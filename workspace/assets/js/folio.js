require=function s(o,a,l){function c(t,e){if(!a[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(h)return h(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[t]={exports:{}};o[t][0].call(r.exports,function(e){return c(o[t][1][e]||e)},r,r.exports,s,o,a,l)}return a[t].exports}for(var h="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,i){function s(e){var t,i,n=e[0]/255,r=e[1]/255,s=e[2]/255,o=Math.min(n,r,s),a=Math.max(n,r,s),l=a-o;return a==o?t=0:n==a?t=(r-s)/l:r==a?t=2+(s-n)/l:s==a&&(t=4+(n-r)/l),(t=Math.min(60*t,360))<0&&(t+=360),i=(o+a)/2,[t,100*(a==o?0:i<=.5?l/(a+o):l/(2-a-o)),100*i]}function n(e){var t,i,n=e[0],r=e[1],s=e[2],o=Math.min(n,r,s),a=Math.max(n,r,s),l=a-o;return i=0==a?0:l/a*1e3/10,a==o?t=0:n==a?t=(r-s)/l:r==a?t=2+(s-n)/l:s==a&&(t=4+(n-r)/l),(t=Math.min(60*t,360))<0&&(t+=360),[t,i,a/255*1e3/10]}function o(e){var t=e[0],i=e[1],n=e[2];return[s(e)[0],100*(1/255*Math.min(t,Math.min(i,n))),100*(n=1-1/255*Math.max(t,Math.max(i,n)))]}function a(e){var t,i=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*((1-i-(t=Math.min(1-i,1-n,1-r)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-r-t)/(1-t)||0),100*t]}function l(e){return E[JSON.stringify(e)]}function c(e){var t=e[0]/255,i=e[1]/255,n=e[2]/255;return[100*(.4124*(t=.04045<t?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(i=.04045<i?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=.04045<n?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*i+.0722*n),100*(.0193*t+.1192*i+.9505*n)]}function h(e){var t=c(e),i=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,i=.008856<(i/=95.047)?Math.pow(i,1/3):7.787*i+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(r=.008856<r?Math.pow(r,1/3):7.787*r+16/116))]}function u(e){var t,i,n,r,s,o=e[0]/360,a=e[1]/100,l=e[2]/100;if(0==a)return[s=255*l,s,s];t=2*l-(i=l<.5?l*(1+a):l+a-l*a),r=[0,0,0];for(var c=0;c<3;c++)(n=o+1/3*-(c-1))<0&&n++,1<n&&n--,s=6*n<1?t+6*(i-t)*n:2*n<1?i:3*n<2?t+(i-t)*(2/3-n)*6:t,r[c]=255*s;return r}function d(e){var t=e[0]/60,i=e[1]/100,n=e[2]/100,r=Math.floor(t)%6,s=t-Math.floor(t),o=255*n*(1-i),a=255*n*(1-i*s),l=255*n*(1-i*(1-s));n*=255;switch(r){case 0:return[n,l,o];case 1:return[a,n,o];case 2:return[o,n,l];case 3:return[o,a,n];case 4:return[l,o,n];case 5:return[n,o,a]}}function p(e){var t,i,n,s,o=e[0]/360,a=e[1]/100,l=e[2]/100,c=a+l;switch(1<c&&(a/=c,l/=c),n=6*o-(t=Math.floor(6*o)),0!=(1&t)&&(n=1-n),s=a+n*((i=1-l)-a),t){default:case 6:case 0:r=i,g=s,b=a;break;case 1:r=s,g=i,b=a;break;case 2:r=a,g=i,b=s;break;case 3:r=a,g=s,b=i;break;case 4:r=s,g=a,b=i;break;case 5:r=i,g=a,b=s}return[255*r,255*g,255*b]}function f(e){var t=e[0]/100,i=e[1]/100,n=e[2]/100,r=e[3]/100;return[255*(1-Math.min(1,t*(1-r)+r)),255*(1-Math.min(1,i*(1-r)+r)),255*(1-Math.min(1,n*(1-r)+r))]}function m(e){var t,i,n,r=e[0]/100,s=e[1]/100,o=e[2]/100;return i=-.9689*r+1.8758*s+.0415*o,n=.0557*r+-.204*s+1.057*o,t=.0031308<(t=3.2406*r+-1.5372*s+-.4986*o)?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,i=.0031308<i?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,n=.0031308<n?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(t=Math.min(Math.max(0,t),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]}function v(e){var t=e[0],i=e[1],n=e[2];return i/=100,n/=108.883,t=.008856<(t/=95.047)?Math.pow(t,1/3):7.787*t+16/116,[116*(i=.008856<i?Math.pow(i,1/3):7.787*i+16/116)-16,500*(t-i),200*(i-(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116))]}function _(e){var t,i,n,r,s=e[0],o=e[1],a=e[2];return s<=8?r=(i=100*s/903.3)/100*7.787+16/116:(i=100*Math.pow((s+16)/116,3),r=Math.pow(i/100,1/3)),[t=t/95.047<=.008856?t=95.047*(o/500+r-16/116)/7.787:95.047*Math.pow(o/500+r,3),i,n=n/108.883<=.008859?n=108.883*(r-a/200-16/116)/7.787:108.883*Math.pow(r-a/200,3)]}function y(e){var t,i=e[0],n=e[1],r=e[2];return(t=360*Math.atan2(r,n)/2/Math.PI)<0&&(t+=360),[i,Math.sqrt(n*n+r*r),t]}function w(e){return m(_(e))}function A(e){var t,i=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[i,n*Math.cos(t),n*Math.sin(t)]}function x(e){return T[e]}t.exports={rgb2hsl:s,rgb2hsv:n,rgb2hwb:o,rgb2cmyk:a,rgb2keyword:l,rgb2xyz:c,rgb2lab:h,rgb2lch:function(e){return y(h(e))},hsl2rgb:u,hsl2hsv:function(e){var t=e[0],i=e[1]/100,n=e[2]/100;if(0===n)return[0,0,0];return[t,100*(2*(i*=(n*=2)<=1?n:2-n)/(n+i)),100*((n+i)/2)]},hsl2hwb:function(e){return o(u(e))},hsl2cmyk:function(e){return a(u(e))},hsl2keyword:function(e){return l(u(e))},hsv2rgb:d,hsv2hsl:function(e){var t,i,n=e[0],r=e[1]/100,s=e[2]/100;return t=r*s,[n,100*(t=(t/=(i=(2-r)*s)<=1?i:2-i)||0),100*(i/=2)]},hsv2hwb:function(e){return o(d(e))},hsv2cmyk:function(e){return a(d(e))},hsv2keyword:function(e){return l(d(e))},hwb2rgb:p,hwb2hsl:function(e){return s(p(e))},hwb2hsv:function(e){return n(p(e))},hwb2cmyk:function(e){return a(p(e))},hwb2keyword:function(e){return l(p(e))},cmyk2rgb:f,cmyk2hsl:function(e){return s(f(e))},cmyk2hsv:function(e){return n(f(e))},cmyk2hwb:function(e){return o(f(e))},cmyk2keyword:function(e){return l(f(e))},keyword2rgb:x,keyword2hsl:function(e){return s(x(e))},keyword2hsv:function(e){return n(x(e))},keyword2hwb:function(e){return o(x(e))},keyword2cmyk:function(e){return a(x(e))},keyword2lab:function(e){return h(x(e))},keyword2xyz:function(e){return c(x(e))},xyz2rgb:m,xyz2lab:v,xyz2lch:function(e){return y(v(e))},lab2xyz:_,lab2rgb:w,lab2lch:y,lch2lab:A,lch2xyz:function(e){return _(A(e))},lch2rgb:function(e){return w(A(e))}};var T={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},E={};for(var S in T)E[JSON.stringify(T[S])]=S},{}],2:[function(e,t,i){var r=e("./conversions"),s=function(){return new c};for(var n in r){s[n+"Raw"]=function(t){return function(e){return"number"==typeof e&&(e=Array.prototype.slice.call(arguments)),r[t](e)}}(n);var o=/(\w+)2(\w+)/.exec(n),a=o[1],l=o[2];(s[a]=s[a]||{})[l]=s[n]=function(n){return function(e){"number"==typeof e&&(e=Array.prototype.slice.call(arguments));var t=r[n](e);if("string"==typeof t||void 0===t)return t;for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]);return t}}(n)}var c=function(){this.convs={}};c.prototype.routeSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i))},c.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},c.prototype.getValues=function(e){var t=this.convs[e];if(!t){var i=this.space,n=this.convs[i];t=s[i][e](n),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){c.prototype[t]=function(e){return this.routeSpace(t,arguments)}}),t.exports=s},{"./conversions":1}],3:[function(e,t,i){var s=e("color-name");function n(e){if(e){var t=[0,0,0],i=1,n=e.match(/^#([a-fA-F0-9]{3})$/);if(n){n=n[1];for(var r=0;r<t.length;r++)t[r]=parseInt(n[r]+n[r],16)}else if(n=e.match(/^#([a-fA-F0-9]{6})$/)){n=n[1];for(r=0;r<t.length;r++)t[r]=parseInt(n.slice(2*r,2*r+2),16)}else if(n=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(r=0;r<t.length;r++)t[r]=parseInt(n[r+1]);i=parseFloat(n[4])}else if(n=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(r=0;r<t.length;r++)t[r]=Math.round(2.55*parseFloat(n[r+1]));i=parseFloat(n[4])}else if(n=e.match(/(\D+)/)){if("transparent"==n[1])return[0,0,0,0];if(!(t=s[n[1]]))return}for(r=0;r<t.length;r++)t[r]=h(t[r],0,255);return i=i||0==i?h(i,0,1):1,t[3]=i,t}}function r(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var i=parseFloat(t[4]);return[h(parseInt(t[1]),0,360),h(parseFloat(t[2]),0,100),h(parseFloat(t[3]),0,100),h(isNaN(i)?1:i,0,1)]}}}function o(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var i=parseFloat(t[4]);return[h(parseInt(t[1]),0,360),h(parseFloat(t[2]),0,100),h(parseFloat(t[3]),0,100),h(isNaN(i)?1:i,0,1)]}}}function a(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function l(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function c(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function h(e,t,i){return Math.min(Math.max(t,e),i)}function u(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}t.exports={getRgba:n,getHsla:r,getRgb:function(e){var t=n(e);return t&&t.slice(0,3)},getHsl:function(e){var t=r(e);return t&&t.slice(0,3)},getHwb:o,getAlpha:function(e){var t=n(e);{if(t)return t[3];if(t=r(e))return t[3];if(t=o(e))return t[3]}},hexString:function(e){return"#"+u(e[0])+u(e[1])+u(e[2])},rgbString:function(e,t){if(t<1||e[3]&&e[3]<1)return a(e,t);return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:a,percentString:function(e,t){if(t<1||e[3]&&e[3]<1)return l(e,t);var i=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return"rgb("+i+"%, "+n+"%, "+r+"%)"},percentaString:l,hslString:function(e,t){if(t<1||e[3]&&e[3]<1)return c(e,t);return"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:c,hwbString:function(e,t){void 0===t&&(t=void 0!==e[3]?e[3]:1);return"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return d[e.slice(0,3)]}};var d={};for(var p in s)d[s[p]]=p},{"color-name":4}],4:[function(e,t,i){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],5:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}i.__esModule=!0;var s=r(e("./handlebars/base")),o=n(e("./handlebars/safe-string")),a=n(e("./handlebars/exception")),l=r(e("./handlebars/utils")),c=r(e("./handlebars/runtime")),h=n(e("./handlebars/no-conflict"));function u(){var t=new s.HandlebarsEnvironment;return l.extend(t,s),t.SafeString=o.default,t.Exception=a.default,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=c,t.template=function(e){return c.template(e,t)},t}var d=u();d.create=u,h.default(d),d.default=d,i.default=d,t.exports=i.default},{"./handlebars/base":6,"./handlebars/exception":9,"./handlebars/no-conflict":19,"./handlebars/runtime":20,"./handlebars/safe-string":21,"./handlebars/utils":22}],6:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.HandlebarsEnvironment=h;var r=e("./utils"),s=n(e("./exception")),o=e("./helpers"),a=e("./decorators"),l=n(e("./logger"));i.VERSION="4.0.5";i.COMPILER_REVISION=7;i.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};var c="[object Object]";function h(e,t,i){this.helpers=e||{},this.partials=t||{},this.decorators=i||{},o.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}h.prototype={constructor:h,logger:l.default,log:l.default.log,registerHelper:function(e,t){if(r.toString.call(e)===c){if(t)throw new s.default("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(r.toString.call(e)===c)r.extend(this.partials,e);else{if(void 0===t)throw new s.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(r.toString.call(e)===c){if(t)throw new s.default("Arg not supported with multiple decorators");r.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var u=l.default.log;i.log=u,i.createFrame=r.createFrame,i.logger=l.default},{"./decorators":7,"./exception":9,"./helpers":10,"./logger":18,"./utils":22}],7:[function(e,t,i){"use strict";i.__esModule=!0,i.registerDefaultDecorators=function(e){s.default(e)};var n,r=e("./decorators/inline"),s=(n=r)&&n.__esModule?n:{default:n}},{"./decorators/inline":8}],8:[function(e,t,i){"use strict";i.__esModule=!0;var a=e("../utils");i.default=function(e){e.registerDecorator("inline",function(r,s,o,e){var t=r;return s.partials||(s.partials={},t=function(e,t){var i=o.partials;o.partials=a.extend({},i,s.partials);var n=r(e,t);return o.partials=i,n}),s.partials[e.args[0]]=e.fn,t})},t.exports=i.default},{"../utils":22}],9:[function(e,t,i){"use strict";i.__esModule=!0;var a=["description","fileName","lineNumber","message","name","number","stack"];function l(e,t){var i=t&&t.loc,n=void 0,r=void 0;i&&(e+=" - "+(n=i.start.line)+":"+(r=i.start.column));for(var s=Error.prototype.constructor.call(this,e),o=0;o<a.length;o++)this[a[o]]=s[a[o]];Error.captureStackTrace&&Error.captureStackTrace(this,l),i&&(this.lineNumber=n,this.column=r)}l.prototype=new Error,i.default=l,t.exports=i.default},{}],10:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}i.__esModule=!0,i.registerDefaultHelpers=function(e){r.default(e),s.default(e),o.default(e),a.default(e),l.default(e),c.default(e),h.default(e)};var r=n(e("./helpers/block-helper-missing")),s=n(e("./helpers/each")),o=n(e("./helpers/helper-missing")),a=n(e("./helpers/if")),l=n(e("./helpers/log")),c=n(e("./helpers/lookup")),h=n(e("./helpers/with"))},{"./helpers/block-helper-missing":11,"./helpers/each":12,"./helpers/helper-missing":13,"./helpers/if":14,"./helpers/log":15,"./helpers/lookup":16,"./helpers/with":17}],11:[function(e,t,i){"use strict";i.__esModule=!0;var o=e("../utils");i.default=function(s){s.registerHelper("blockHelperMissing",function(e,t){var i=t.inverse,n=t.fn;if(!0===e)return n(this);if(!1===e||null==e)return i(this);if(o.isArray(e))return 0<e.length?(t.ids&&(t.ids=[t.name]),s.helpers.each(e,t)):i(this);if(t.data&&t.ids){var r=o.createFrame(t.data);r.contextPath=o.appendContextPath(t.data.contextPath,t.name),t={data:r}}return n(e,t)})},t.exports=i.default},{"../utils":22}],12:[function(e,t,i){"use strict";i.__esModule=!0;var n,d=e("../utils"),r=e("../exception"),p=(n=r)&&n.__esModule?n:{default:n};i.default=function(e){e.registerHelper("each",function(n,e){if(!e)throw new p.default("Must pass iterator to #each");var r=e.fn,t=e.inverse,i=0,s="",o=void 0,a=void 0;function l(e,t,i){o&&(o.key=e,o.index=t,o.first=0===t,o.last=!!i,a&&(o.contextPath=a+e)),s+=r(n[e],{data:o,blockParams:d.blockParams([n[e],e],[a+e,null])})}if(e.data&&e.ids&&(a=d.appendContextPath(e.data.contextPath,e.ids[0])+"."),d.isFunction(n)&&(n=n.call(this)),e.data&&(o=d.createFrame(e.data)),n&&"object"==typeof n)if(d.isArray(n))for(var c=n.length;i<c;i++)i in n&&l(i,i,i===n.length-1);else{var h=void 0;for(var u in n)n.hasOwnProperty(u)&&(void 0!==h&&l(h,i-1),h=u,i++);void 0!==h&&l(h,i-1,!0)}return 0===i&&(s=t(this)),s})},t.exports=i.default},{"../exception":9,"../utils":22}],13:[function(e,t,i){"use strict";i.__esModule=!0;var n,r=e("../exception"),s=(n=r)&&n.__esModule?n:{default:n};i.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new s.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=i.default},{"../exception":9}],14:[function(e,t,i){"use strict";i.__esModule=!0;var n=e("../utils");i.default=function(i){i.registerHelper("if",function(e,t){return n.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e)?t.inverse(this):t.fn(this)}),i.registerHelper("unless",function(e,t){return i.helpers.if.call(this,e,{fn:t.inverse,inverse:t.fn,hash:t.hash})})},t.exports=i.default},{"../utils":22}],15:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(r){r.registerHelper("log",function(){for(var e=[void 0],t=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)e.push(arguments[i]);var n=1;null!=t.hash.level?n=t.hash.level:t.data&&null!=t.data.level&&(n=t.data.level),e[0]=n,r.log.apply(r,e)})},t.exports=i.default},{}],16:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},t.exports=i.default},{}],17:[function(e,t,i){"use strict";i.__esModule=!0;var r=e("../utils");i.default=function(e){e.registerHelper("with",function(e,t){r.isFunction(e)&&(e=e.call(this));var i=t.fn;if(r.isEmpty(e))return t.inverse(this);var n=t.data;return t.data&&t.ids&&((n=r.createFrame(t.data)).contextPath=r.appendContextPath(t.data.contextPath,t.ids[0])),i(e,{data:n,blockParams:r.blockParams([e],[n&&n.contextPath])})})},t.exports=i.default},{"../utils":22}],18:[function(e,t,i){"use strict";i.__esModule=!0;var n=e("./utils"),s={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(s.methodMap,e.toLowerCase());e=0<=t?t:parseInt(e,10)}return e},log:function(e){if(e=s.lookupLevel(e),"undefined"!=typeof console&&s.lookupLevel(s.level)<=e){var t=s.methodMap[e];console[t]||(t="log");for(var i=arguments.length,n=Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];console[t].apply(console,n)}}};i.default=s,t.exports=i.default},{"./utils":22}],19:[function(e,t,i){(function(n){"use strict";i.__esModule=!0,i.default=function(e){var t=void 0!==n?n:window,i=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=i),e}},t.exports=i.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,i){"use strict";i.__esModule=!0,i.checkRevision=function(e){var t=e&&e[0]||1,i=d.COMPILER_REVISION;if(t!==i){if(t<i){var n=d.REVISION_CHANGES[i],r=d.REVISION_CHANGES[t];throw new u.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+r+").")}throw new u.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},i.template=function(a,l){if(!l)throw new u.default("No environment passed to template");if(!a||!a.main)throw new u.default("Unknown template object: "+typeof a);a.main.decorator=a.main_d,l.VM.checkRevision(a.compiler);var o={strict:function(e,t){if(!(t in e))throw new u.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var i=e.length,n=0;n<i;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:h.escapeExpression,invokePartial:function(e,t,i){i.hash&&(t=h.extend({},t,i.hash),i.ids&&(i.ids[0]=!0));e=l.VM.resolvePartial.call(this,e,t,i);var n=l.VM.invokePartial.call(this,e,t,i);null==n&&l.compile&&(i.partials[i.name]=l.compile(e,a.compilerOptions,l),n=i.partials[i.name](t,i));{if(null!=n){if(i.indent){for(var r=n.split("\n"),s=0,o=r.length;s<o&&(r[s]||s+1!==o);s++)r[s]=i.indent+r[s];n=r.join("\n")}return n}throw new u.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")}},fn:function(e){var t=a[e];return t.decorator=a[e+"_d"],t},programs:[],program:function(e,t,i,n,r){var s=this.programs[e],o=this.fn(e);return t||r||n||i?s=p(this,e,o,t,i,n,r):s||(s=this.programs[e]=p(this,e,o)),s},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var i=e||t;return e&&t&&e!==t&&(i=h.extend({},t,e)),i},noop:l.VM.noop,compilerInfo:a.compiler};function c(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t.data;c._setup(t),!t.partial&&a.useData&&(i=function(e,t){t&&"root"in t||((t=t?d.createFrame(t):{}).root=e);return t}(e,i));var n=void 0,r=a.useBlockParams?[]:void 0;function s(e){return""+a.main(o,e,o.helpers,o.partials,i,r,n)}return a.useDepths&&(n=t.depths?e!==t.depths[0]?[e].concat(t.depths):t.depths:[e]),(s=f(a.main,s,o,t.depths||[],i,r))(e,t)}return c.isTop=!0,c._setup=function(e){e.partial?(o.helpers=e.helpers,o.partials=e.partials,o.decorators=e.decorators):(o.helpers=o.merge(e.helpers,l.helpers),a.usePartial&&(o.partials=o.merge(e.partials,l.partials)),(a.usePartial||a.useDecorators)&&(o.decorators=o.merge(e.decorators,l.decorators)))},c._child=function(e,t,i,n){if(a.useBlockParams&&!i)throw new u.default("must pass block params");if(a.useDepths&&!n)throw new u.default("must pass parent depths");return p(o,e,a[e],t,0,i,n)},c},i.wrapProgram=p,i.resolvePartial=function(e,t,i){e?e.call||i.name||(i.name=e,e=i.partials[e]):e="@partial-block"===i.name?i.data["partial-block"]:i.partials[i.name];return e},i.invokePartial=function(e,t,i){i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var n=void 0;i.fn&&i.fn!==s&&(i.data=d.createFrame(i.data),(n=i.data["partial-block"]=i.fn).partials&&(i.partials=h.extend({},i.partials,n.partials)));void 0===e&&n&&(e=n);{if(void 0===e)throw new u.default("The partial "+i.name+" could not be found");if(e instanceof Function)return e(t,i)}},i.noop=s;var n,h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./utils")),r=e("./exception"),u=(n=r)&&n.__esModule?n:{default:n},d=e("./base");function p(n,e,r,s,t,o,a){function i(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=a;return a&&e!==a[0]&&(i=[e].concat(a)),r(n,e,n.helpers,n.partials,t.data||s,o&&[t.blockParams].concat(o),i)}return(i=f(r,i,n,a,s,o)).program=e,i.depth=a?a.length:0,i.blockParams=t||0,i}function s(){return""}function f(e,t,i,n,r,s){if(e.decorator){var o={};t=e.decorator(t,o,i,n&&n[0],r,s,n),h.extend(t,o)}return t}},{"./base":6,"./exception":9,"./utils":22}],21:[function(e,t,i){"use strict";function n(e){this.string=e}i.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},i.default=n,t.exports=i.default},{}],22:[function(e,t,i){"use strict";i.__esModule=!0,i.extend=a,i.indexOf=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},i.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!s.test(e))return e;return e.replace(r,o)},i.isEmpty=function(e){return!e&&0!==e||!(!h(e)||0!==e.length)},i.createFrame=function(e){var t=a({},e);return t._parent=e,t},i.blockParams=function(e,t){return e.path=t,e},i.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,s=/[&<>"'`=]/;function o(e){return n[e]}function a(e){for(var t=1;t<arguments.length;t++)for(var i in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],i)&&(e[i]=arguments[t][i]);return e}var l=Object.prototype.toString;i.toString=l;var c=function(e){return"function"==typeof e};c(/x/)&&(i.isFunction=c=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),i.isFunction=c;var h=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)};i.isArray=h},{}],23:[function(e,t,i){t.exports=e("./dist/cjs/handlebars.runtime").default},{"./dist/cjs/handlebars.runtime":5}],24:[function(e,t,i){t.exports=e("handlebars/runtime").default},{"handlebars/runtime":23}],25:[function(e,t,i){var n,r,s=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,h=[],u=!1,d=-1;function p(){u&&c&&(u=!1,c.length?h=c.concat(h):d=-1,h.length&&f())}function f(){if(!u){var e=l(p);u=!0;for(var t=h.length;t;){for(c=h,h=[];++d<t;)c&&c[d].run();d=-1,t=h.length}c=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new m(e,t)),1!==h.length||u||l(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],26:[function(e,t,i){(function(f,e){!function(i,n){"use strict";if(!i.setImmediate){var r,s,t,o,e,a=1,l={},c=!1,h=i.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(i);u=u&&u.setTimeout?u:i,"[object process]"==={}.toString.call(i.process)?r=function(e){f.nextTick(function(){p(e)})}:!function(){if(i.postMessage&&!i.importScripts){var e=!0,t=i.onmessage;return i.onmessage=function(){e=!1},i.postMessage("","*"),i.onmessage=t,e}}()?i.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){t.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(s=h.documentElement,r=function(e){var t=h.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(o="setImmediate$"+Math.random()+"$",e=function(e){e.source===i&&"string"==typeof e.data&&0===e.data.indexOf(o)&&p(+e.data.slice(o.length))},i.addEventListener?i.addEventListener("message",e,!1):i.attachEvent("onmessage",e),r=function(e){i.postMessage(o+e,"*")}),u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return l[a]=n,r(a),a++},u.clearImmediate=d}function d(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{d(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:25}],27:[function(e,t,i){var n=e("./helper/makeString");t.exports=function(e,t){e=n(e);var i=t?e.slice(1).toLowerCase():e.slice(1);return e.charAt(0).toUpperCase()+i}},{"./helper/makeString":31}],28:[function(e,t,i){var n=e("./trim");t.exports=function(e){return n(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},{"./trim":36}],29:[function(e,t,i){var n=e("./escapeRegExp");t.exports=function(e){return null==e?"\\s":e.source?e.source:"["+n(e)+"]"}},{"./escapeRegExp":30}],30:[function(e,t,i){var n=e("./makeString");t.exports=function(e){return n(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":31}],31:[function(e,t,i){t.exports=function(e){return null==e?"":""+e}},{}],32:[function(e,t,i){t.exports=function(e,t){if(t<1)return"";for(var i="";0<t;)1&t&&(i+=e),t>>=1,e+=e;return i}},{}],33:[function(e,t,i){var n=e("./pad");t.exports=function(e,t,i){return n(e,t,i)}},{"./pad":34}],34:[function(e,t,i){var s=e("./helper/makeString"),o=e("./helper/strRepeat");t.exports=function(e,t,i,n){e=s(e),t=~~t;var r=0;switch(i?1<i.length&&(i=i.charAt(0)):i=" ",n){case"right":return r=t-e.length,e+o(i,r);case"both":return r=t-e.length,o(i,Math.ceil(r/2))+e+o(i,Math.floor(r/2));default:return r=t-e.length,o(i,r)+e}}},{"./helper/makeString":31,"./helper/strRepeat":32}],35:[function(e,t,i){var n=e("./pad");t.exports=function(e,t,i){return n(e,t,i,"right")}},{"./pad":34}],36:[function(e,t,i){var n=e("./helper/makeString"),r=e("./helper/defaultToWhiteSpace"),s=String.prototype.trim;t.exports=function(e,t){return e=n(e),!t&&s?s.call(e):(t=r(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":29,"./helper/makeString":31}],37:[function(a,e,t){"use strict";a("Modernizr"),a("setimmediate"),a("es6-promise").polyfill(),a("classlist-polyfill"),a("raf-polyfill"),a("matches-polyfill"),a("fullscreen-polyfill"),a("math-sign-polyfill"),a("mutation-polyfill"),a("backbone").$=a("backbone.native"),a("backbone.babysitter"),a("Backbone.Mutators"),a("hammerjs"),window.addEventListener("load",function(e){e.target,e.type;try{a("app/model/helper/bootstrap")(window.bootstrap)}catch(e){var t=document.querySelector(".app");throw t.classList.remove("app-initial"),t.classList.add("app-error"),new Error("bootstrap data error ("+e.message+")",e.fileName,e.lineNumber)}finally{delete window.bootstrap}a("app/view/template/_helpers"),a("app/view/helper/createColorStyleSheet").call();var i=a("underscore"),n=a("app/view/AppView"),r=n.getInstance.bind(n),s=a("webfontloader"),o={async:!0,groupName:"",classes:!1,active:function(){this.groupName},fontactive:function(e,t){this.groupName},inactive:function(){console.warn("WebFont:%s:inactive",this.groupName)},fontinactive:function(e,t){console.warn("WebFont:%s:fontinactive '%s' (%s)",this.groupName,e,t)},loading:function(){this.groupName}};s.load(i.defaults({async:!1,groupName:"required",custom:{families:["Franklin Gothic FS:n4,n7","FolioFigures:n4"],testStrings:{FolioFigures:"hms"}},active:r,inactive:r},o)),s.load(i.defaults({},o))})},{"Backbone.Mutators":"Backbone.Mutators",Modernizr:"Modernizr","app/model/helper/bootstrap":51,"app/view/AppView":58,"app/view/helper/createColorStyleSheet":81,"app/view/template/_helpers":108,backbone:"backbone","backbone.babysitter":"backbone.babysitter","backbone.native":"backbone.native","classlist-polyfill":"classlist-polyfill","es6-promise":"es6-promise","fullscreen-polyfill":"fullscreen-polyfill",hammerjs:"hammerjs","matches-polyfill":"matches-polyfill","math-sign-polyfill":"math-sign-polyfill","mutation-polyfill":"mutation-polyfill","raf-polyfill":"raf-polyfill",setimmediate:26,underscore:"underscore",webfontloader:"webfontloader"}],38:[function(e,t,i){e("underscore");var n=e("backbone"),r=e("app/model/collection/ArticleCollection"),s=e("app/model/collection/BundleCollection"),o=n.Router.extend({initialize:function(e){this.route(/(.*)/,"notfound",this.toNotFound),this.route(/^([a-z][a-z0-9\-]*)\/?$/,"article-item",this.toArticleItem),this.route(/^(?:bundles)?\/?$/,"root",this.toRoot),this.route(/^bundles\/([^\/]+)\/?$/,"bundle-item",this.toBundleItem),this.route(/^bundles\/([^\/]+)\/(\d+)\/?$/,"media-item",this.toMediaItem)},selectMedia:function(e){this._goToLocation(e.get("bundle"),e)},selectBundle:function(e){this._goToLocation(e)},deselectMedia:function(){this._goToLocation(s.selected)},deselectBundle:function(){this._goToLocation()},selectArticle:function(e){this.navigate(e.get("handle"),{trigger:!0})},deselectArticle:function(){this.navigate("",{trigger:!0})},_getLocation:function(e,t){var i,n=[];return e&&(n.push("bundles"),n.push(e.get("handle")),t&&0<=(i=e.get("media").indexOf(t))&&n.push(i)),n.join("/")},_goToLocation:function(e,t){this.navigate(this._getLocation(e,t),{trigger:!0})},toRoot:function(){this.trigger("change:before"),s.selected&&s.deselect(),r.deselect(),this.trigger("change:after")},toNotFound:function(e){},toBundleItem:function(e){var t=s.findWhere({handle:e});if(!t)throw new Error('Cannot find bundle with handle "'+e+'"');this._changeSelection(t)},toMediaItem:function(e,t){var i,n;if(!(i=s.findWhere({handle:e})))throw new Error('No bundle with handle "'+e+'" found');if(!(n=i.get("media").at(t)))throw new Error("No media at index "+t+' in bundle with handle "'+e+'" found');this._changeSelection(i,n)},toArticleItem:function(e){var t=r.findWhere({handle:e});if(!t)throw new Error('Cannot find article with handle "'+e+'"');this.trigger("change:before",t),s.deselect(),r.select(t),this.trigger("change:after",t)},_changeSelection:function(e,t){var i,n;void 0===e&&(e=null),void 0===t&&(t=null),n=(i=s.selected)?i.get("media").selected:null,i&&i.cid,e&&e.cid,n&&n.cid,t&&t.cid,(r.selected||i!==e||n!==t)&&(this.trigger("change:before",e,t),e&&e.get("media").select(t),s.select(e),r.deselect(),this.trigger("change:after",e,t))}});t.exports=new o},{"app/model/collection/ArticleCollection":47,"app/model/collection/BundleCollection":48,backbone:"backbone",underscore:"underscore"}],39:[function(u,e,t){var d=u("underscore");e.exports=function(){var e,t,i,n={},r=u("../../../sass/variables.json");for(t in n.VPAN_DRAG=.95,n.HPAN_OUT_DRAG=.4,n.VPAN_OUT_DRAG=.1,n.PAN_THRESHOLD=15,n.COLLAPSE_THRESHOLD=75,n.COLLAPSE_OFFSET=parseInt(r.temp.collapse_offset),n.VIDEO_CROP_PX=parseInt(r.video_crop_px),n.BREAKPOINTS={},r.breakpoints)e=r.breakpoints[t],e=(e=Array.isArray(e)?e.join(", "):e).replace(/[\'\"]/g,""),(e=window.matchMedia(e)).className=t,n.BREAKPOINTS[t]=e;n.DEFAULT_COLORS=d.clone(r.default_colors),n.APP_ROOT=window.approot,n.MEDIA_DIR=window.mediadir,delete window.approot,delete window.mediadir,n.FONT_METRICS={"Franklin Gothic FS":{unitsPerEm:1e3,ascent:827,descent:-173},ITCFranklinGothicStd:{unitsPerEm:1e3,ascent:686,descent:-314},FolioFigures:{unitsPerEm:1024,ascent:939,descent:-256}},n.PAUSE_CHAR=String.fromCharCode(9208),n.PLAY_CHAR=String.fromCharCode(9205),n.STOP_CHAR=String.fromCharCode(9209),"3d"==r.transform_type?n.TRANSLATE_TEMPLATE=function(e,t){return"translate3d("+e+"px, "+t+"px, 0px)"}:n.TRANSLATE_TEMPLATE=function(e,t){return"translate("+e+"px, "+t+"px)"},n.TRANSLATE_TEMPLATE=function(e,t){return"translate("+e+"px, "+t+"px)"};var s=n.TRANSITION_EASE=r.transitions.ease,o=n.TRANSITION_DURATION=parseFloat(r.transitions.duration_ms),a=n.TRANSITION_DELAY_INTERVAL=parseFloat(r.transitions.delay_interval_ms),l=n.TRANSITION_MIN_DELAY=parseFloat(r.transitions.min_delay_ms),c=n.TRANSITION_DELAY=n.TRANSITION_DURATION+n.TRANSITION_DELAY_INTERVAL;(e={tx:function(e,t,i){d.isNumber(e)||(e=1),d.isNumber(t)||(t=-1),d.isString(i)||(i=s);var n={};return t<0?(n.duration=o*e+a*(e-1),n.delay=0):(n.duration=o*e+a*(e-1)-l,n.delay=c*t-l),n.easeing=i,0},NONE:{delay:0,duration:0,easing:"step-start"}}).NOW={delay:0,duration:o,easing:s},e.UNSET=d.defaults({cssText:""},e.NONE);var h=d.defaults({duration:o-l},e.NOW);for(t in e.FIRST=d.defaults({delay:0*c+l},h),e.BETWEEN=d.defaults({delay:1*c+l},h),e.LAST=d.defaults({delay:2*c+l},h),e.AFTER=d.defaults({delay:2*c+l},h),e.BETWEEN_EARLY=d.defaults({delay:1*c+l-60},h),e.BETWEEN_LATE=d.defaults({delay:1*c+l+60},h),e.FIRST_LATE=d.defaults({delay:.5*c+l},h),e.LAST_EARLY=d.defaults({delay:1.5*c+l},h),e)d.isFunction(e[t])||((i=e[t]).name=t,i.className="tx-"+t.replace("_","-").toLowerCase(),i.hasOwnProperty("cssText")||(i.cssText=i.duration/1e3+"s "+i.easing+" "+i.delay/1e3+"s"),i.name,i.cssText);return n.transitions=e,n}()},{"../../../sass/variables.json":136,underscore:"underscore"}],40:[function(e,t,i){var o=e("underscore"),s=e("cookies-js"),a=e("app/control/Globals"),n=e("app/view/base/View"),r=e("./template/DebugToolbar.hbs"),l=e("./template/DebugToolbar.SVGGrid.hbs"),c=o.template("<%= w %> Ã— <%= h %>");t.exports=n.extend({cidPrefix:"debugToolbar",tagName:"div",className:"toolbar",template:r,properties:{grid:{get:function(){return this._grid||(this._grid=this.createGridElement())}}},initialize:function(e){s.defaults={expires:new Date(2147483647e3),domain:String(window.location).match(/^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i)[1]},this.el.innerHTML=this.template({tests:Modernizr,navigator:window.navigator});var t=document.getElementById("container");t.insertBefore(this.createGridElement(),t.firstElementChild),this.backendEl=this.el.querySelector("#edit-backend a"),this.mediaInfoEl=this.el.querySelector("#media-info span"),this.appStateEl=this.el.querySelector("#app-state"),this.initializeClassToggle("show-links",this.el.querySelector("#links-toggle"),this.el,function(e,t){this.el.classList.toggle("not-"+e,!t)}),this.initializeClassToggle("show-tests",this.el.querySelector("#toggle-tests a"),this.el),this.initializeClassToggle("hide-passed",this.el.querySelector("#toggle-passed"),this.el),this.initializeClassToggle("debug-blocks-nav",this.el.querySelector("#toggle-blocks-nav a"),t),this.initializeClassToggle("debug-blocks-content",this.el.querySelector("#toggle-blocks-content a"),t),this.initializeClassToggle("debug-mdown",this.el.querySelector("#toggle-mdown a"),t),this.initializeClassToggle("debug-tx",this.el.querySelector("#toggle-tx a"),t,function(e,t){this.el.classList.toggle("show-tx",t),this.el.classList.toggle("not-show-tx",!t)}),this.initializeClassToggle("debug-graph",this.el.querySelector("#toggle-graph a"),t),this.initializeClassToggle("debug-logs",this.el.querySelector("#toggle-logs a"),t),this.initializeClassToggle("debug-grid-bg",this.el.querySelector("#toggle-grid-bg a"),document.body),this.initializeViewportInfo(),this.listenTo(this.model,"change",this._onModelChange),this._onModelChange()},initializeViewportInfo:function(){var e=this.el.querySelector("#viewport-info span"),t=function(){e.textContent=c({w:window.innerWidth,h:window.innerHeight})};t.call(),window.addEventListener("resize",o.debounce(t,100,!1,!1))},initializeToggle:function(t,e,i){if(e){var n=this,r="true"===s.get(t);i.call(n,t,r),e.addEventListener("click",function(e){e.defaultPrevented||(e.preventDefault(),r=!r,s.set(t,r?"true":""),i.call(n,t,r))},!1)}},initializeClassToggle:function(e,i,n,r){var s=o.isFunction(r);this.initializeToggle(e,i,function(e,t){n.classList.toggle(e,t),i.classList.toggle("toggle-enabled",t),i.classList.toggle("color-reverse",t),s&&r.apply(this,arguments)})},_onModelChange:function(){var e,t,i,n,r=this.appStateEl.children;for(e=0,t=r.length;e<t;e++)i=(n=r[e]).getAttribute("data-prop"),n.classList.toggle("has-value",this.model.get(i)),n.classList.toggle("has-changed",this.model.hasChanged(i)),n.classList.toggle("color-reverse",this.model.hasChanged(i));var s=a.APP_ROOT+"symphony/";switch(this.model.get("routeName")){case"article-item":s+="publish/articles/edit/"+this.model.get("article").id;break;case"bundle-item":s+="publish/bundles/edit/"+this.model.get("bundle").id;break;case"media-item":s+="publish/media/edit/"+this.model.get("media").id;break;case"root":s+="publish/bundles"}this.backendEl.setAttribute("href",s),this.model.hasChanged("media")&&(this.model.has("media")?(this.mediaInfoEl.textContent=c(this.model.get("media").get("source").toJSON()),this.mediaInfoEl.style.display=""):(this.mediaInfoEl.textContent="",this.mediaInfoEl.style.display="none"))},createGridElement:function(){var e=document.createElement("div");return e.id="grid-wrapper",e.innerHTML=l(),e}}),t.exports.prototype._logFlags=""},{"./template/DebugToolbar.SVGGrid.hbs":41,"./template/DebugToolbar.hbs":42,"app/control/Globals":39,"app/view/base/View":66,"cookies-js":"cookies-js",underscore:"underscore"}],41:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,r){return'<svg id="debug-grid" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMaxYMid slice" viewport-fill="hsl(0,0%,100%)" viewport-fill-opacity="1" style="fill:none;stroke:none;stroke-width:1px;fill:none;fill-rule:evenodd;">\n<defs>\n\t<pattern id="pat-baseline-12px" class="baseline base12" x="0" y="0" width="20" height="12" patternUnits="userSpaceOnUse">\n\t\t<line x1="0" x2="100%" y1="0" y2="0" stroke-opacity="1.0"/>\n\t\t<line x1="0" x2="100%" y1="3" y2="3" stroke-opacity="0.125"/>\n\t\t<line x1="0" x2="100%" y1="6" y2="6" stroke-opacity="0.375"/>\n\t\t<line x1="0" x2="100%" y1="9" y2="9" stroke-opacity="0.125"/>\n\t</pattern>\n\n\t<pattern id="pat-baseline-24px" class="baseline base12" x="0" y="0" width="20" height="24" patternUnits="userSpaceOnUse">\n\t\t<line x1="0" x2="100%" y1="0" y2="0" stroke-opacity="1.0"/>\n\t</pattern>\n\n\t<pattern id="pat-baseline-10px" class="baseline base10" x="0" y="0" width="20" height="10" patternUnits="userSpaceOnUse">\n\t\t<line x1="0" x2="100%" y1="0" y2="0" stroke-opacity="1.00"/>\n\t\t<line x1="0" x2="100%" y1="5" y2="5" stroke-opacity="0.75"/>\n\t</pattern>\n\t<pattern id="pat-baseline-20px" class="baseline base10" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">\n\t\t<line x1="0" x2="100%" y1="0" y2="0" stroke-opacity="1.0"/>\n\t</pattern>\n\t<pattern id="pat-cols-220px" x="0" y="0" width="220" height="36" patternUnits="userSpaceOnUse">\n\t\t<rect transform="translate(0,0)" x="0" y="0" width="20" height="100%" fill="hsl(336,50%,40%)" fill-opacity="0.1"/>\n\t\t<rect transform="translate(200,0)" x="0" y="0" width="20" height="100%" fill="hsl(336,50%,40%)" fill-opacity="0.1"/>\n\t\t<line transform="translate(20 0)" x1="0" x2="0" y1="0" y2="100%" stroke="hsl(336,50%,60%)" stroke-opacity="0.2"/>\n\t\t<line transform="translate(200 0)" x1="0" x2="0" y1="0" y2="100%" stroke="hsl(336,50%,40%)" stroke-opacity="0.2"/>\n\n\t\t<line transform="translate(140 0)" x1="0" x2="0" y1="0" y2="100%" stroke="hsl(336,50%,40%)" stroke-opacity="0.3"/>\n\t\t<line transform="translate(80 0)" x1="0" x2="0" y1="0" y2="100%" stroke="hsl(336,50%,40%)" stroke-opacity="0.3"/>\n\n\t\t<line transform="translate(0 0)" x1="0" x2="0" y1="0" y2="100%" stroke="hsl(236,50%,40%)" stroke-opacity="0.4" stroke-width="1"/>\n\t\t<line transform="translate(220 0)" x1="0" x2="0" y1="0" y2="100%" stroke="hsl(236,50%,40%)" stroke-opacity="0.4" stroke-width="1"/>\n\t</pattern>\n</defs>\n<g id="debug-grid-body" transform="translate(0 0.5)">\n\t<rect id="baseline" x="0" y="0" width="100%" height="100%"/>\n\t<g id="debug-grid-container">\n\t\t<g id="debug-grid-content">\n\t\t\t<rect id="baseline-content" x="0" y="0" width="100%" height="100%"/>\n\t\t\t<line id="gct0" class="hguide" x1="0" x2="100%" y1="0" y2="0"/>\n\t\t\t<line id="gct1" class="hguide" x1="0" x2="100%" y1="0" y2="0"/>\n\t\t</g>\n\t\t<line id="gnv0" class="hguide" x1="0" x2="100%" y1="0" y2="0"/>\n\t\t<line id="gnv1" class="hguide" x1="0" x2="100%" y1="0" y2="0"/>\n\t</g>\n\n\t<g id="abs-cols">\n\t\t<rect id="columns" x="0" y="0" width="100%" height="100%"/>\n\t</g>\n\n\t<g id="rel-cols">\n\t\t<line id="le" class="vguide edge" x1="0" x2="0" y1="0" y2="100%"/>\n\t\t<line id="re" class="vguide edge" x1="100%" x2="100%" y1="0" y2="100%"/>\n\n\t\t<line id="gl0" class="vguide margin" x1="0" x2="0" y1="0" y2="100%"/>\n\t\t<line id="gl1" class="vguide gutter" x1="0" x2="0" y1="0" y2="100%"/>\n\n\t\t<line id="gr0" class="vguide margin" x1="0" x2="0" y1="0" y2="100%"/>\n\t\t<line id="gr1" class="vguide gutter" x1="0" x2="0" y1="0" y2="100%"/>\n\n\t\t<line id="gm" class="vguide" x1="0" x2="0" y1="0" y2="100%"/>\n\t</g>\n</g>\n</svg>\n'},useData:!0})},{"hbsfy/runtime":24}],42:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({1:function(e,t,i,n,r){var s;return'\t<dd id="select-layout">\n\t\t<select size=1>\n'+(null!=(s=i.each.call(null!=t?t:{},null!=t?t.layouts:t,{name:"each",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r}))?s:"")+"\t\t</select>\n\t</dd>\n"},2:function(e,t,i,n,r){var s=e.lambda,o=e.escapeExpression;return'\t\t\t<option value="'+o(s(t,t))+'">'+o(s(t,t))+"</option>\n"},4:function(e,t,i,n,r){var s,o,a=null!=t?t:{};return'\t\t<li class="'+(null!=(s=i.if.call(a,t,{name:"if",hash:{},fn:e.program(5,r,0),inverse:e.program(7,r,0),data:r}))?s:"")+'">'+e.escapeExpression("function"==typeof(o=null!=(o=i.key||r&&r.key)?o:i.helperMissing)?o.call(a,{name:"key",hash:{},data:r}):o)+"</li>\n"},5:function(e,t,i,n,r){return"passed"},7:function(e,t,i,n,r){return"failed"},compiler:[7,">= 4.0.0"],main:function(e,t,i,n,r){var s,o=null!=t?t:{},a=e.escapeExpression;return'<dl class="debug-links color-bg">\n\t<dt id="links-toggle">\n\t\t<svg class="icon" viewBox="-100 -100 200 200" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet">\n\t\t\t<path id="cog" d="M11.754,-99.307c-7.809,-0.924 -15.699,-0.924 -23.508,0l-3.73,20.82c-6.254,1.234 -12.338,3.21 -18.123,5.888l-15.255,-14.651c-6.861,3.842 -13.244,8.48 -19.018,13.818l9.22,19.036c-4.335,4.674 -8.095,9.849 -11.201,15.416l-20.953,-2.886c-3.292,7.141 -5.731,14.645 -7.265,22.357l18.648,9.981c-0.759,6.329 -0.759,12.727 0,19.056l-18.648,9.981c1.534,7.712 3.973,15.216 7.265,22.357l20.953,-2.886c3.106,5.567 6.866,10.742 11.201,15.416l-9.22,19.036c5.774,5.338 12.157,9.976 19.018,13.818l15.255,-14.651c5.785,2.678 11.869,4.654 18.123,5.888l3.73,20.82c7.809,0.924 15.699,0.924 23.508,0l3.73,-20.82c6.254,-1.234 12.338,-3.21 18.123,-5.888l15.255,14.651c6.861,-3.842 13.244,-8.48 19.018,-13.818l-9.22,-19.036c4.335,-4.674 8.095,-9.849 11.201,-15.416l20.953,2.886c3.292,-7.141 5.731,-14.645 7.265,-22.357l-18.648,-9.981c0.759,-6.329 0.759,-12.727 0,-19.056l18.648,-9.981c-1.534,-7.712 -3.973,-15.216 -7.265,-22.357l-20.953,2.886c-3.106,-5.567 -6.866,-10.742 -11.201,-15.416l9.22,-19.036c-5.774,-5.338 -12.157,-9.976 -19.018,-13.818l-15.255,14.651c-5.785,-2.678 -11.869,-4.654 -18.123,-5.888l-3.73,-20.82ZM0,-33c18.213,0 33,14.787 33,33c0,18.213 -14.787,33 -33,33c-18.213,0 -33,-14.787 -33,-33c0,-18.213 14.787,-33 33,-33Z" style="fill:currentColor;fill-rule:evenodd;"/>\n\t\t</svg>\n\t</dt>\n'+(null!=(s=i.if.call(o,null!=t?t.layouts:t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?s:"")+'\t<dd id="edit-backend">\n\t\t<a href="'+a((i.global||t&&t.global||i.helperMissing).call(o,"APP_ROOT",{name:"global",hash:{},data:r}))+'symphony/" class="color-fg color-bg" target="_blank">CMS</a>\n\t</dd>\n\t<dd id="toggle-tests">\n\t\t<a href="#toggle-tests" class="color-fg color-bg">Tests</a>\n\t</dd>\n\t<dd id="toggle-blocks-nav">\n\t\t<a href="#toggle-blocks-nav" class="color-fg color-bg">Nav</a>\n\t</dd>\n\t<dd id="toggle-blocks-content">\n\t\t<a href="#toggle-blocks-content" class="color-fg color-bg">Content</a>\n\t</dd>\n\t<dd id="toggle-mdown">\n\t\t<a href="#toggle-mdown" class="color-fg color-bg">Markdown</a>\n\t</dd>\n\t<dd id="toggle-tx">\n\t\t<a href="#toggle-tx" class="color-fg color-bg">TX/FX</a>\n\t</dd>\n\t<dd id="toggle-grid-bg">\n\t\t<a href="#toggle-grid-bg" class="color-fg color-bg">Grid</a>\n\t</dd>\n\t<dd id="toggle-graph">\n\t\t<a href="#toggle-graph" class="color-fg color-bg">Graph</a>\n\t</dd>\n\t<dd id="toggle-logs">\n\t\t<a href="#toggle-logs" class="color-fg color-bg">Logs</a>\n\t</dd>\n\t<dd id="media-info">\n\t\t<span></span>\n\t</dd>\n\t<dd id="viewport-info">\n\t\t<span></span>\n\t</dd>\n\t<dd id="app-state">\n\t\t<span class="color-fg color-bg" data-prop="collapsed">c</span><span class="color-fg color-bg" data-prop="withBundle">b</span><span class="color-fg color-bg" data-prop="withMedia">m</span><span class="color-fg color-bg" data-prop="withArticle">a</span>\n\t</dd>\n</dl>\n<div id="test-results">\n\t<h6>Tests <a id="toggle-passed" href="#toggle-passed">Passed</a></h6>\n\t<p>'+a(e.lambda(null!=(s=null!=t?t.navigator:t)?s.userAgent:s,t))+"</p>\n\t<ul>\n"+(null!=(s=i.each.call(o,null!=t?t.tests:t,{name:"each",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r}))?s:"")+"\t</ul>\n</div>\n"},useData:!0})},{"hbsfy/runtime":24}],43:[function(e,t,i){var n=e("backbone").Model;t.exports=n.extend({defaults:{collapsed:!1,routeName:"initial",article:null,bundle:null,media:null,fromRouteName:"",withArticle:!1,withBundle:!1,withMedia:!1},getters:["collapsed","routeName","article","bundle","media","fromRouteName","withArticle","withBundle","withMedia"],initialize:function(){var t={silent:!1};this.listenTo(this,"change",function(e){this.hasChanged("routeName")&&this.set("fromRouteName",this.previous("routeName"),t),this.hasChanged("article")&&this.set("withArticle",this.has("article"),t),this.hasChanged("bundle")&&this.set("withBundle",this.has("bundle"),t),this.hasChanged("media")&&this.set("withMedia",this.has("media"),t)}),this.listenTo(this,"change:routeName",function(e){this.cid}),this.listenTo(this,"change:article",function(e){this.cid}),this.listenTo(this,"change:bundle",function(e){this.cid}),this.listenTo(this,"change:media",function(e){this.cid})},hasAnyPrevious:function(e){return null!=this.previous(e)},hasAnyChanged:function(e){return this.hasChanged(e)&&this.has(e)!=this.hasAnyPrevious(e)}})},{backbone:"backbone"}],44:[function(e,t,i){var r=e("underscore"),n=e("app/model/BaseModel"),s=function(e,t){if(r.isString(t)){var i=t.indexOf(":");0<i?e[t.substring(0,i)]=t.substring(i+1).replace(/(\,|\;)/g,function(e){return","==e?";":","}):e[t]=t}return e};t.exports=n.extend({_domPrefix:"_",defaults:{get attrs(){return{}}},getters:["domid"],mutators:{domid:function(){return this.hasOwnProperty("_domId")||(this._domId=this._domPrefix+this.id),this._domId},attrs:{set:function(e,t,i,n){Array.isArray(t)&&(t=t.reduce(s,{})),r.isObject(t)||(console.error("%s::attrs value not an object or string array",this.cid,t),t={}),n(e,t,i)}}},attr:function(e){return this.attrs()[e]},attrs:function(){return this.get("attrs")},toString:function(){return this.get("domid")}})},{"app/model/BaseModel":45,underscore:"underscore"}],45:[function(e,t,i){var r=e("backbone"),s=e("underscore"),n={extend:function(e,t){var i,n;for(n in e)e.hasOwnProperty(n)&&s.isObject(e[n])&&(e[n]=s.defaults(e[n],this.prototype[n]));return i=r.Model.extend.apply(this,arguments),Array.isArray(i.prototype.getters)&&i.prototype.getters.forEach(function(e){Object.defineProperty(i.prototype,e,{enumerable:!0,get:function(){return this.get(e)}})}),i}};t.exports=r.Model.extend.call(r.Model,{},n)},{backbone:"backbone",underscore:"underscore"}],46:[function(e,t,i){var r=e("underscore"),n=e("backbone"),s=n.Collection.extend({initialize:function(e,t){t=r.defaults({},t,{initialSelection:"none",silentInitial:!0}),this.initialSelection=t.initialSelection,this.initialOptions={silent:t.silentInitial}},reset:function(e,t){this.deselect(this.initialOptions),n.Collection.prototype.reset.apply(this,arguments),"first"===this.initialSelection&&this.length&&this.select(this.at(0),this.initialOptions)},select:function(e,t){if(void 0===e&&(e=null),this.selected!==e){var i=!(t&&t.silent),n=this.selected;this.lastSelected=this.selected,this.lastSelectedIndex=this.selectedIndex,this.selected=e,this.selectedIndex=this.indexOf(e),n?(r.isFunction(n.deselect)?n.deselect(t):i&&(n.selected=void 0,n.trigger("deselected",e,n)),i&&this.trigger("deselect:one",n)):i&&this.trigger("deselect:none",null),e?(r.isFunction(e.select)?e.select(t):i&&(e.selected=!0,e.trigger("selected",e,n)),i&&this.trigger("select:one",e)):i&&this.trigger("select:none",null)}},deselect:function(e){this.select(null,e)},selectAt:function(e,t){(e<0||e>=this.length)&&new RangeError("index is out of bounds"),this.select(this.at(e),t)},distance:function(e,t){var i,n;if(!e)return NaN;if(-1==(i=this.indexOf(e)))return NaN;if(1==arguments.length)n=this.selectedIndex;else{if(!t)return NaN;if(-1==(n=this.indexOf(t)))return NaN}return Math.abs(n-i)},hasFollowing:function(e){return e||(e=this.selected),this.indexOf(e)<this.length-1},following:function(e){return e||(e=this.selected),this.hasFollowing(e)?this.at(this.indexOf(e)+1):null},followingOrFirst:function(e){return e||(e=this.selected),this.at((this.indexOf(e)+1)%this.length)},hasPreceding:function(e){return e||(e=this.selected),0<this.indexOf(e)},preceding:function(e){return e||(e=this.selected),this.hasPreceding(e)?this.at(this.indexOf(e)-1):null},precedingOrLast:function(e){e||(e=this.selected);var t=this.indexOf(e)-1;return this.at(-1<t?t:this.length-1)}});t.exports=s},{backbone:"backbone",underscore:"underscore"}],47:[function(e,t,i){var n=e("app/model/SelectableCollection"),r=e("app/model/item/ArticleItem"),s=n.extend({model:r});t.exports=new s},{"app/model/SelectableCollection":46,"app/model/item/ArticleItem":52}],48:[function(e,t,i){var n=e("app/model/SelectableCollection"),r=e("app/model/item/BundleItem"),s=n.extend({model:r,comparator:function(e,t){var i=e.get("completed"),n=t.get("completed");return n<i?-1:i<n?1:0},url:"/json/bundles/"});t.exports=new s},{"app/model/SelectableCollection":46,"app/model/item/BundleItem":53}],49:[function(e,t,i){var n=e("app/model/SelectableCollection"),r=e("app/model/item/KeywordItem"),s=n.extend({model:r});t.exports=new s},{"app/model/SelectableCollection":46,"app/model/item/KeywordItem":54}],50:[function(e,t,i){var n=e("backbone"),r=e("app/model/item/TypeItem"),s=n.Collection.extend({model:r});t.exports=new s},{"app/model/item/TypeItem":57,backbone:"backbone"}],51:[function(u,e,t){var d=u("underscore");e.exports=function(e){u("app/control/Globals").APP_NAME=e.params["website-name"];var t=u("app/model/collection/TypeCollection"),i=u("app/model/collection/KeywordCollection"),n=u("app/model/collection/BundleCollection"),r=u("app/model/collection/ArticleCollection"),s=e["articles-all"],o=e["types-all"],a=e["keywords-all"],l=e["bundles-all"],c=e["media-all"],h=d.groupBy(c,"bId");l.forEach(function(n,r,e){n.tIds=[],n.media=h[n.id],a.forEach(function(e,t,i){0===r&&(e.bIds=[]),-1!=n.kIds.indexOf(e.id)&&(e.bIds.push(n.id),-1==n.tIds.indexOf(e.tId)&&n.tIds.push(e.tId))})}),r.reset(s),t.reset(o),i.reset(a),n.reset(l)}},{"app/control/Globals":39,"app/model/collection/ArticleCollection":47,"app/model/collection/BundleCollection":48,"app/model/collection/KeywordCollection":49,"app/model/collection/TypeCollection":50,underscore:"underscore"}],52:[function(e,t,i){var n=e("app/model/BaseItem");t.exports=n.extend({_domPrefix:"a",defaults:{name:"",handle:"",text:""}})},{"app/model/BaseItem":44}],53:[function(e,t,i){var n=e("underscore"),r=e("color"),s=e("app/model/BaseItem"),o=e("app/model/item/MediaItem"),a=e("app/model/SelectableCollection"),l=e("app/control/Globals"),c=e("utils/strings/stripTags"),h=n.defaults({"has-colors":"defaults"},l.DEFAULT_COLORS),u=a.extend({model:o,comparator:"o"});t.exports=s.extend({_domPrefix:"b",defaults:{name:"",handle:"",desc:"",completed:0,get kIds(){return[]}},getters:["name","media"],mutators:{text:function(){return c(this.get("desc"))},media:{transient:!0,set:function(e,t,i,n){Array.isArray(t)&&(t.forEach(function(e){e.bundle=this},this),t=new u(t)),n(e,t,i)}}},initialize:function(e,t){this.colors={fgColor:new r(this.attr("color")),bgColor:new r(this.attr("background-color")),lnColor:new r(this.attr("link-color"))},this.colors.hasDarkBg=this.colors.fgColor.luminosity()>this.colors.bgColor.luminosity()},attrs:function(){return this._attrs||(this._attrs=n.defaults({},this.get("attrs"),h))}})},{"app/control/Globals":39,"app/model/BaseItem":44,"app/model/SelectableCollection":46,"app/model/item/MediaItem":55,color:"color",underscore:"underscore","utils/strings/stripTags":134}],54:[function(e,t,i){var n=e("app/model/BaseItem");t.exports=n.extend({_domPrefix:"k",defaults:{name:"",handle:"",tId:-1}})},{"app/model/BaseItem":44}],55:[function(e,t,i){var n=e("underscore"),r=e("color"),s=e("app/model/BaseItem"),o=e("app/model/item/SourceItem"),a=e("app/model/SelectableCollection"),l=e("app/control/Globals"),c=e("utils/strings/stripTags"),h={original:n.template(l.MEDIA_DIR+"/<%= src %>"),"constrain-width":n.template(l.APP_ROOT+"image/1/<%= width %>/0/uploads/<%= src %>"),"constrain-height":n.template(l.APP_ROOT+"image/1/0/<%= height %>/uploads/<%= src %>"),"debug-bandwidth":n.template(l.MEDIA_DIR.replace(/(https?\:\/\/[^\/]+)/,"$1/slow/<%= kbps %>")+"/<%= src %>")},u=a.extend({model:o});t.exports=s.extend({_domPrefix:"m",defaults:{name:"<p><em>Untitled</em></p>",sub:"",o:0,bId:-1,srcIdx:0,get srcset(){return[]},get sources(){return new u}},getters:["name","bundle","source","sources"],mutators:{handle:function(){return this.get("src")},text:function(){return this.hasOwnProperty("_text")||(this._text=n.unescape(c(this.get("name")))),this._text},attrs:{set:function(e,t,i,n){this._attrs=null,s.prototype.mutators.attrs.set.apply(this,arguments),this._updateSources()}},srcset:{set:function(e,t,i,n){n(e,t,i),this.get("sources").reset(t,i),this._updateSources()}},source:{transient:!0,get:function(){return this.get("sources").at(this.get("srcIdx"))}}},initialize:function(){this._updateColors(),this.listenTo(this,"change:attrs change:bundle",function(){this._attrs=null})},attrs:function(){return this._attrs||(this._attrs=n.defaults({},this.get("bundle").attrs(),this.get("attrs")))},_updateColors:function(){this.colors={fgColor:new r(this.attr("color")),bgColor:new r(this.attr("background-color"))},this.colors.hasDarkBg=this.colors.fgColor.luminosity()>this.colors.bgColor.luminosity()},_updateSources:function(){var t={kbps:this.attr("@debug-bandwidth")},i=h[t.kbps?"debug-bandwidth":"original"];this.get("sources").forEach(function(e){t.src=e.get("src"),e.set("original",i(t))})}})},{"app/control/Globals":39,"app/model/BaseItem":44,"app/model/SelectableCollection":46,"app/model/item/SourceItem":56,color:"color",underscore:"underscore","utils/strings/stripTags":134}],56:[function(e,t,i){var n=e("app/model/BaseItem");Date.now();t.exports=n.extend({defaults:{src:null,mime:null,w:null,h:null},getters:["src","original"],mutators:{src:{set:function(e,t,i,n){n(e,t,i)}}}})},{"app/model/BaseItem":44}],57:[function(e,t,i){var n=e("app/model/BaseItem");t.exports=n.extend({_domPrefix:"t",defaults:{name:"",handle:""}})},{"app/model/BaseItem":44}],58:[function(e,t,i){var s=e("underscore"),r=e("backbone"),o=e("utils/strings/stripTags"),a=e("app/control/Globals"),l=e("app/control/Controller"),n=e("app/model/AppState"),c=e("app/model/collection/BundleCollection"),h=e("app/model/collection/ArticleCollection"),u=e("app/view/base/View"),d=e("app/view/NavigationView"),p=e("app/view/ContentView"),f=e("app/view/base/TouchManager"),m={getInstance:function(){return window.app instanceof this||(window.app=new this({model:new n})),window.app}},g={cidPrefix:"app",el:"html",className:"app",model:n,events:{visibilitychange:function(e){e.type},fullscreenchange:function(e){e.type},dragstart:function(e){"IMG"!=e.target.nodeName&&"A"!=e.target.nodeName||e.defaultPrevented||e.preventDefault()}},properties:{container:{get:function(){return this._container||(this._container=document.getElementById("container"))}},navigation:{get:function(){return this._navigation||(this._navigation=document.getElementById("navigation"))}},content:{get:function(){return this._content||(this._content=document.getElementById("content"))}}},initialize:function(e){var t,i,n;this.breakpointEl=this.el,n=this.content,t=i=f.init(n),this._onResize=this._onResize.bind(this),window.addEventListener("resize",this._onResize,!1),this.listenTo(l,"route",this._onRoute),this.listenTo(this.model,"change",this._onModelChange),this.navigationView=new d({el:this.navigation,model:this.model,vpan:t,hpan:i}),this.contentView=new p({el:this.content,model:this.model,vpan:t,hpan:i}),window.ga&&window.GA_ID&&l.once("route",function(){window.ga("create",window.GA_ID,"auto"),(/(?:(localhost|\.local))$/.test(location.hostname)||"UA-9123564-7"==window.GA_ID)&&window.ga("set","sendHitTask",null)}).on("route",function(e){var t=r.history.getFragment();t.replace(/^(?!\/)/,"/"),window.ga("set","page",t),window.ga("send","pageview")}),this.listenToOnce(l,"route",this._appStart),r.history.start({pushState:!1,hashChange:!0})},_appStart:function(e,t){this.cid,t.join(),this.skipTransitions=!0,this.el.classList.add("skip-transitions"),this.requestRender(u.MODEL_INVALID|u.SIZE_INVALID).requestChildrenRender(u.MODEL_INVALID|u.SIZE_INVALID).listenToOnce(this,"view:render:after",function(e,t){this.requestAnimationFrame(function(){this.cid,this.skipTransitions=!1,this.el.classList.remove("skip-transitions"),this.el.classList.remove("app-initial")})})},_onRoute:function(e,t){this.cid,this.model.get("routeName");var i={routeName:e,bundle:null,media:null,article:null};switch(e){case"media-item":i.bundle=c.selected,i.media=i.bundle.media.selected,i.collapsed=!0;break;case"bundle-item":i.bundle=c.selected,i.collapsed=!0;break;case"article-item":i.article=h.selected,i.collapsed=!0;break;case"bundle-list":case"notfound":case"root":default:i.collapsed=!1}this.model.set(i)},_onModelChange:function(){this.cid,Object.keys(this.model.changedAttributes()).forEach(function(e){this.cid,this.model.previous(e),this.model.get(e)},this),["Article","Bundle","Media"].forEach(function(e){var t=e.toLowerCase();console[this.hasChanged("with"+e)==this.hasAnyChanged(t)?"log":"warn"].call(console,"%s::_onModelChange with%s: %o with%sChanged: %o",this.cid,e,this.has(t),e,this.hasAnyChanged(t))},this.model),this.requestRender(u.MODEL_INVALID).once("view:render:after",function(e,t){e.cid})},_onResize:function(e){this.cid,this.skipTransitions=!0,this.el.classList.add("skip-transitions"),this.requestRender(u.SIZE_INVALID).once("view:render:after",function(e,t){this.requestAnimationFrame(function(){e.cid,e.skipTransitions=!1,e.el.classList.remove("skip-transitions")})}).renderNow()},renderFrame:function(e,t){this.cid,u.flagsToString(t),t&u.MODEL_INVALID&&this.renderModelChange(t),t&u.SIZE_INVALID&&s.each(a.BREAKPOINTS,function(e,t){this.toggle(t,e.matches)},this.breakpointEl.classList),this.requestChildrenRender(t,!0)},renderModelChange:function(){var i=this.el.classList,n=null,e=[],r=!1;e.push(a.APP_NAME),this.model.get("bundle")?(e.push(o(this.model.get("bundle").get("name"))),this.model.get("media")&&e.push(o(this.model.get("media").get("name")))):this.model.get("article")&&e.push(o(this.model.get("article").get("name"))),document.title=s.unescape(e.join(" / ")),this.model.hasChanged("routeName")&&((n=this.model.previous("fromRouteName"))&&i.remove("from-route-"+n),i.add("from-route-"+this.model.get("fromRouteName")),(n=this.model.previous("routeName"))&&i.remove("route-"+n),i.add("route-"+this.model.get("routeName"))),["article","bundle","media"].forEach(function(e){var t=this.model.get(e);this.model.hasChanged(e)&&((n=this.model.previous(e))&&i.remove(n.get("domid")),t&&i.add(t.get("domid"))),i.toggle("with-"+e,!!t),i.toggle("without-"+e,!t),r|=t&&t.colors&&t.colors.hasDarkBg}.bind(this)),i.toggle("color-dark",r)}};t.exports=u.extend(g,m)},{"app/control/Controller":38,"app/control/Globals":39,"app/debug/DebugToolbar":40,"app/model/AppState":43,"app/model/collection/ArticleCollection":47,"app/model/collection/BundleCollection":48,"app/view/ContentView":59,"app/view/NavigationView":60,"app/view/base/TouchManager":65,"app/view/base/View":66,backbone:"backbone",underscore:"underscore","utils/strings/stripTags":134}],59:[function(e,t,i){var n=e("underscore"),o=e("app/control/Globals"),r=e("utils/TransformHelper"),s=e("app/control/Controller"),l=e("app/model/collection/BundleCollection"),c=e("app/model/collection/ArticleCollection"),h=e("app/view/base/View"),a=e("app/view/component/ArticleView"),u=e("app/view/component/CollectionStack"),d=e("app/view/component/SelectableListView"),p=e("app/view/render/DotNavigationRenderer"),f=e("app/view/component/Carousel"),m=e("app/view/render/CarouselRenderer"),g=e("app/view/render/ImageRenderer"),v=e("app/view/render/VideoRenderer"),_=e("app/view/render/SequenceRenderer"),y=e("./template/Carousel.EmptyRenderer.Bundle.hbs"),w=e("./template/CollectionStack.Media.hbs"),b=h.prefixedProperty("transform"),A=h.prefixedProperty("transition"),x=o.transitions,T=h.extend({cidPrefix:"contentView",className:"container-expanded",events:{"transitionend .adding-child":"_onAddedTransitionEnd","transitionend .removing-child":"_onRemovedTransitionEnd"},initialize:function(e){n.bindAll(this,"_onVPanStart","_onVPanMove","_onVPanFinal","_onCollapsedEvent"),this.transforms=new r,this.vpan=e.vpan||new Error("no vpan"),this.hpan=e.hpan||new Error("no hpan"),this.listenTo(this.model,"change",this._onModelChange),this.skipTransitions=!0,this.itemViews=[]},renderFrame:function(e,t){var i=this.model.get("collapsed"),n=t&h.MODEL_INVALID&&this.model.hasChanged("collapsed"),r=t&h.MODEL_INVALID&&(this.model.hasChanged("bundle")||this.model.hasChanged("article")),s=!!(t&h.SIZE_INVALID),o=!!(t&(h.MODEL_INVALID|h.SIZE_INVALID|h.LAYOUT_INVALID));if(o=o||this._transformsChanged||this.skipTransitions,r&&(this.removeChildren(),l.selected?this.createChildren(l.selected):c.selected&&this.createChildren(c.selected)),n&&(this.el.classList.toggle("container-collapsed",i),this.el.classList.toggle("container-expanded",!i)),s&&this.transforms.clearAllCaptures(),o){var a;if(this.el.classList.remove("container-changing"),this.skipTransitions)this.transforms.stopAllTransitions(),this.el.classList.remove("container-changed"),r||n&&this._setChildrenEnabled(i);else if(!r)if(n)this.el.classList.add("container-changed"),i?(a=function(){this._setChildrenEnabled(!0),this.el.classList.remove("container-changed")},this.transforms.runAllTransitions(x.LAST)):(a=function(){this.el.classList.remove("container-changed")},this._setChildrenEnabled(!1),this.transforms.runAllTransitions(x.FIRST)),a=a.bind(this),this.transforms.whenAllTransitionsEnd().then(a,a);else this.transforms.items.forEach(function(e){e.hasOffset&&e.runTransition(x.NOW)});r||this.transforms.clearAllOffsets(),this.transforms.validate()}s&&this.itemViews.forEach(function(e){e.skipTransitions=this.skipTransitions,e.requestRender(h.SIZE_INVALID).renderNow()},this),this.skipTransitions=this._transformsChanged=!1},_setChildrenEnabled:function(t){this.itemViews.forEach(function(e){e.setEnabled(t)})},_onCollapsedEvent:function(e){this.cid,e.type,e.target,e.defaultPrevented||!this.model.has("bundle")||this.model.get("collapsed")||this.enabled||(e.preventDefault(),this.setImmediate(function(){this.model.set("collapsed",!0)}))},_onModelChange:function(){this.model.hasAnyChanged("bundle")&&(this.model.has("bundle")?this.vpan.on("vpanstart",this._onVPanStart):this.vpan.off("vpanstart",this._onVPanStart)),this.requestRender(h.MODEL_INVALID)},_collapsedOffsetY:o.COLLAPSE_OFFSET,_onVPanStart:function(e){this.vpan.on("vpanmove",this._onVPanMove),this.vpan.on("vpanend vpancancel",this._onVPanFinal),this.transforms.stopAllTransitions(),this.transforms.clearAllCaptures(),this.el.classList.add("container-changing"),this._onVPanMove(e)},_onVPanMove:function(e){var t=this.model.get("collapsed"),i=e.deltaY,n=this._collapsedOffsetY,r=t?0<i:i<0,s=t?o.VPAN_DRAG:1-o.VPAN_DRAG;i=Math.abs(i),i*=s,n*=s,r?n<i&&(i=(i-n)*o.VPAN_OUT_DRAG+n):i=-i*o.VPAN_OUT_DRAG,i*=t?1:-1,this.transforms.offsetAll(0,i),this.transforms.validate()},_onVPanFinal:function(e){this.vpan.off("vpanmove",this._onVPanMove),this.vpan.off("vpanend vpancancel",this._onVPanFinal),this._onVPanMove(e),this.setImmediate(function(){this._transformsChanged=!0,this.requestRender()})},createChildren:function(e){var t;e.__proto__.constructor===l.model?(t=this.createMediaCaptionStack(e),this.itemViews.push(t),this.transforms.add(t.el),t=this.createMediaCarousel(e),this.itemViews.push(t),this.transforms.add(t.el),t=this.createMediaDotNavigation(e),this.itemViews.push(t)):e.__proto__.constructor===c.model&&(t=this.createArticleView(e),this.itemViews.push(t)),this.itemViews.forEach(function(e){this.skipTransitions||(e.el.classList.add("adding-child"),e.el.style.opacity=0),this.el.appendChild(e.el),e.render()},this),this.skipTransitions||this.requestAnimationFrame(function(){this.cid,this.itemViews.forEach(function(e){this.skipTransitions||(e.el.style[A]="opacity "+x.LAST.cssText),e.el.style.removeProperty("opacity")},this)})},removeChildren:function(){this.itemViews.forEach(function(e,t,i){if(this.transforms.remove(e.el),this.skipTransitions)e.remove();else{var n=window.getComputedStyle(e.el);"0"==n.opacity||"hidden"==n.visibility?(this.cid,e.cid,e.remove()):(e.el.classList.add("removing-child"),n[b]&&(e.el.style[b]=n[b]),e.el.style[A]="opacity "+x.FIRST.cssText,e.el.style.opacity=0)}i[t]=null},this),this.itemViews.length=0},_onAddedTransitionEnd:function(e){if(e.target.cid&&this.childViews.hasOwnProperty(e.target.cid)){this.cid,e.target.cid,e.propertyName,e.type;var t=this.childViews[e.target.cid];t.el.classList.remove("adding-child"),t.el.style.removeProperty(A)}},_onRemovedTransitionEnd:function(e){if(e.target.cid&&this.childViews.hasOwnProperty(e.target.cid)){this.cid,e.target.cid,e.propertyName,e.type;var t=this.childViews[e.target.cid];t.el.classList.remove("removing-child"),t.remove()}},createMediaCarousel:function(e){var n=m.extend({className:"carousel-item empty-item",model:e,template:y}),t=new f({className:"media-carousel "+e.get("domid"),collection:e.get("media"),rendererFunction:function(e,t,i){if(-1===t)return n;switch(e.attr("@renderer")){case"video":return v;case"sequence":return _;case"image":default:return g}},requireSelection:!1,direction:f.DIRECTION_HORIZONTAL,touch:this.hpan});return s.listenTo(t,{"view:select:one":s.selectMedia,"view:select:none":s.deselectMedia}),t.listenTo(e,"deselected",function(){this.stopListening(this.collection),s.stopListening(this)}),t},createMediaCaptionStack:function(e){var t=new u({className:"media-caption-stack",collection:e.get("media"),template:w});return t.listenTo(e,"deselected",function(){this.stopListening(this.collection)}),t},createMediaDotNavigation:function(e){var t=new d({className:"media-dotnav dots-fontface color-fg05",collection:e.get("media"),renderer:p});return s.listenTo(t,{"view:select:one":s.selectMedia,"view:select:none":s.deselectMedia}),t.listenTo(e,"deselected",function(){this.stopListening(this.collection),s.stopListening(this)}),t},createArticleView:function(e){return new a({model:e})}});t.exports=T},{"./template/Carousel.EmptyRenderer.Bundle.hbs":105,"./template/CollectionStack.Media.hbs":106,"app/control/Controller":38,"app/control/Globals":39,"app/model/collection/ArticleCollection":47,"app/model/collection/BundleCollection":48,"app/view/base/View":66,"app/view/component/ArticleView":70,"app/view/component/Carousel":71,"app/view/component/CollectionStack":73,"app/view/component/SelectableListView":79,"app/view/render/CarouselRenderer":90,"app/view/render/DotNavigationRenderer":95,"app/view/render/ImageRenderer":97,"app/view/render/SequenceRenderer":102,"app/view/render/VideoRenderer":104,underscore:"underscore","utils/TransformHelper":111}],60:[function(e,t,i){var n=e("underscore"),r=e("hammerjs"),f=e("app/control/Globals"),s=e("utils/TransformHelper"),o=e("app/control/Controller"),a=e("app/model/collection/TypeCollection"),l=e("app/model/collection/KeywordCollection"),c=e("app/model/collection/BundleCollection"),h=e("app/model/collection/ArticleCollection"),m=e("app/view/base/View"),u=e("app/view/component/FilterableListView"),d=e("app/view/component/GroupingListView"),p=e("app/view/component/GraphView"),g=e("app/view/component/ArticleButton"),v=f.transitions,_=n.clone(v.NOW);_.easing="ease";var y=m.extend({cidPrefix:"navigationView",className:"navigation container-expanded",initialize:function(e){n.bindAll(this,"_onVPanStart","_onVPanMove","_onVPanFinal"),n.bindAll(this,"_onHPanStart","_onHPanMove","_onHPanFinal"),n.bindAll(this,"_onNavigationClick"),this.itemViews=[],this.transforms=new s,this.vpan=e.vpan||new Error("no vpan"),this.hpan=e.hpan||new Error("no hpan"),this.listenTo(this.model,"change",this._onModelChange),this.listenTo(l,"select:one select:none",this._onKeywordSelect),this.vpanGroup=this.el.querySelector("#vpan-group"),this.keywordList=this.createKeywordList(),this.bundleList=this.createBundleList(),this.itemViews.push(this.keywordList),this.itemViews.push(this.bundleList),this.graph=this.createGraphView(this.bundleList,this.keywordList,this.vpanGroup),this.sitename=this.createSitenameButton(),this.about=this.createAboutButton(),this.hGroupings=this.keywordList.el.querySelectorAll(".list-group .label"),this.transforms.add(this.vpanGroup,this.bundleList.wrapper,this.keywordList.wrapper,this.bundleList.el,this.keywordList.el,this.hGroupings,this.sitename.wrapper,this.about.wrapper,this.sitename.el,this.about.el,this.graph.el)},renderFrame:function(e,t){t&m.MODEL_INVALID&&(this.model.hasChanged("collapsed")&&(this.el.classList.toggle("container-collapsed",this.model.get("collapsed")),this.el.classList.toggle("container-expanded",!this.model.get("collapsed"))),(this.model.hasChanged("collapsed")||this.model.hasChanged("withBundle"))&&this.el.classList.add("container-changing"),this.model.hasChanged("routeName")&&(this.bundleList.requestRender(m.SIZE_INVALID|m.LAYOUT_INVALID),this.keywordList.requestRender(m.SIZE_INVALID|m.LAYOUT_INVALID))),(this.skipTransitions||t&m.ALL_INVALID)&&(this.skipTransitions?(this.transforms.stopAllTransitions(),this.transforms.validate(),this.transforms.clearAllOffsets()):this.renderTransitions(t),this.transforms.validate());var i,n=function(e){return this.graph.enabled=!this.model.get("collapsed"),this.graph.valueTo("a2b",0,0),this.model.get("collapsed")||this.graph.valueTo("a2b",1,f.TRANSITION_DURATION),e}.bind(this),r=function(e){var t=this.model.get("collapsed")?"":Math.max(this.bundleList.metrics.height,this.keywordList.metrics.height)+"px";return this.el.style.height=t,this.graph.el.style.height=t,this.graph.requestRender(m.SIZE_INVALID|m.LAYOUT_INVALID),this.cid,e}.bind(this),s=function(e){return this.cid,m.flagsToString(t),this.el.classList.remove("container-changing"),e}.bind(this);i=Promise.all([this.bundleList.whenCollapseChangeEnds(),this.keywordList.whenCollapseChangeEnds()]).then(r),t&m.MODEL_INVALID&&this.model.hasChanged("collapsed")&&(i=i.then(n)),(i=(i=Promise.all([i,this.transforms.whenAllTransitionsEnd()])).then(s)).catch(function(e){return console.warn("%s::renderFrame promise rejected",this.cid,e),e}.bind(this)),this.itemViews.forEach(function(e){this.skipTransitions&&(e.skipTransitions=!0),t&m.SIZE_INVALID&&e.requestRender(m.SIZE_INVALID),e.renderNow()},this),this.requestAnimationFrame(function(){this.skipTransitions=!1})},renderTransitions:function(e){var t,i=e&m.MODEL_INVALID,n=this.model.get("fromRouteName"),r=this.model.get("routeName"),s=i&&this.model.hasChanged("routeName"),o=this.model.has("bundle"),a=i&&this.model.hasAnyChanged("bundle"),l=i&&this.model.hasChanged("bundle"),c=this.model.has("media"),h=i&&this.model.hasAnyChanged("media"),u=i&&this.model.hasAnyChanged("article"),d=this.model.get("collapsed"),p=i&&this.model.hasChanged("collapsed");(t=this.transforms.get(this.vpanGroup))&&t.hasOffset&&(t.runTransition(p?v.BETWEEN:v.NOW),t.clearOffset()),f.BREAKPOINTS["desktop-small"].matches?(t=this.transforms.get(this.keywordList.wrapper),p&&!u?a?h&&t.runTransition(o?v.LAST:v.FIRST):c&&t.runTransition(d?v.LAST:v.FIRST):!a&&h&&t.runTransition(l?v.BETWEEN:_),t.hasOffset&&t.clearOffset(),p^u&&(this.transforms.runTransition(d?v.LAST:v.FIRST,this.sitename.el,this.about.el,this.bundleList.wrapper),this.transforms.runTransition(d?v.LAST:v.FIRST,this.hGroupings)),!s||"root"!=n&&"root"!=r||this.transforms.runTransition(v.BETWEEN,this.sitename.wrapper,this.about.wrapper)):f.BREAKPOINTS.fullwidth.matches?p^u&&this.transforms.runTransition(d?v.FIRST:v.LAST,this.sitename.el,this.about.el):a&&this.transforms.runTransition(v.BETWEEN,this.sitename.el,this.about.el)},_onModelChange:function(){this.requestRender(m.MODEL_INVALID),this.model.hasChanged("collapsed")&&(this.model.get("collapsed")&&l.deselect(),this.keywordList.collapsed=this.model.get("collapsed"),this.bundleList.collapsed=this.model.get("collapsed")),this.model.hasChanged("bundle")&&(this.bundleList.selectedItem=this.model.get("bundle"),this.keywordList.refreshFilter()),this.model.hasChanged("withBundle")&&(this.model.get("withBundle")?(this.el.addEventListener(m.CLICK_EVENT,this._onNavigationClick),this.vpan.on("vpanstart",this._onVPanStart),this.hpan.on("hpanstart",this._onHPanStart)):(this.el.removeEventListener("click",this._onNavigationClick),this.vpan.off("vpanstart",this._onVPanStart),this.hpan.off("hpanstart",this._onHPanStart),l.deselect()))},_onKeywordSelect:function(e){!this.model.get("collapsed")&&this.graph&&this.listenToOnce(this.bundleList,"view:render:after",function(e,t){this.graph.valueTo("b2a",0,0),this.graph.valueTo("b2a",1,f.TRANSITION_DURATION)}),this.bundleList.refreshFilter()},_onNavigationClick:function(e){this.cid,e.type,e.defaultPrevented,e.defaultPrevented||(e.preventDefault(),this.model.has("bundle")&&this.model.set("collapsed",!this.model.get("collapsed")))},_setCollapsed:function(e){e!==this.model.get("collapsed")&&this.setImmediate(function(){this.model.set("collapsed",e)})},_onHPanStart:function(e){this.transforms.get(this.keywordList.wrapper).stopTransition().clearOffset().validate(),f.BREAKPOINTS["desktop-small"].matches&&this.model.get("bundle").get("media").selectedIndex<=0&&this.model.get("collapsed")&&(this.transforms.get(this.keywordList.wrapper).clearCapture(),this._onHPanMove(e),this.hpan.on("hpanmove",this._onHPanMove),this.hpan.on("hpanend hpancancel",this._onHPanFinal))},_onHPanMove:function(e){var t=e.deltaX;this.model.has("media")?t*=e.offsetDirection&r.DIRECTION_LEFT?0:720/920:t*=e.offsetDirection&r.DIRECTION_LEFT?720/920:f.HPAN_OUT_DRAG,this.transforms.offset(t,null,this.keywordList.wrapper),this.transforms.validate()},_onHPanFinal:function(e){this.hpan.off("hpanmove",this._onHPanMove),this.hpan.off("hpanend hpancancel",this._onHPanFinal);var t=this.transforms.get(this.keywordList.wrapper);this._renderFlags&m.MODEL_INVALID||!t.hasOffset||(0!=t.offsetX&&t.runTransition(v.NOW),t.clearOffset().validate())},_collapsedOffsetY:f.COLLAPSE_OFFSET,_onVPanStart:function(e){this.vpan.on("vpanmove",this._onVPanMove),this.vpan.on("vpanend vpancancel",this._onVPanFinal),this.transforms.stopTransition(this.vpanGroup),this.transforms.clearCapture(this.vpanGroup)},_onVPanMove:function(e){var t=this._computeVPanDelta(e.deltaY);this.transforms.offset(0,t,this.vpanGroup),this.transforms.validate()},_onVPanFinal:function(e){this.vpan.off("vpanmove",this._onVPanMove),this.vpan.off("vpanend vpancancel",this._onVPanFinal),this.setImmediate(function(){this.willCollapsedChange(e)&&this.model.set("collapsed",!this.model.get("collapsed")),this.requestRender(m.LAYOUT_INVALID)})},willCollapsedChange:function(e){return"vpanend"==e.type&&(this.model.get("collapsed")?e.deltaY>f.COLLAPSE_THRESHOLD:e.deltaY<-f.COLLAPSE_THRESHOLD)},_computeVPanDelta:function(e){var t=this.model.get("collapsed"),i=this._collapsedOffsetY,n=t?0<e:e<0,r=t?1-f.VPAN_DRAG:f.VPAN_DRAG;return e=Math.abs(e),e*=r,i*=r,n?i<e&&(e=(e-i)*f.VPAN_OUT_DRAG+i):e=-e*f.VPAN_OUT_DRAG,e*=t?.5:-1},createSitenameButton:function(){var e=new m({el:"#site-name",events:{"click a":function(e){e.defaultPrevented||e.preventDefault(),this.trigger("view:click")}}});return e.wrapper=e.el.parentElement,this.listenTo(e,"view:click",this._onSitenameClick),e},_onSitenameClick:function(){switch(this.model.get("routeName")){case"media-item":case"bundle-item":o.deselectBundle();break;case"article-item":o.deselectArticle()}},createArticleButton:function(e){var t=new g({el:".article-button[data-handle='about']",model:e}).render();return t.wrapper=t.el.parentElement,this.listenTo(t,"view:click",this._onArticleClick),t},_onArticleClick:function(e){switch(this.model.get("routeName")){case"article-item":o.deselectArticle();break;case"root":default:o.selectArticle(e)}},createAboutButton:function(){return this.createArticleButton(h.findWhere({handle:"about"}))},createBundleList:function(e){var t=new u({el:"#bundle-list",collection:c,collapsed:!1,filterFn:function(e,t,i){return!!l.selected&&-1!==e.get("kIds").indexOf(l.selected.id)}});return t.wrapper=t.el.parentElement,this.listenTo(t,"view:select:one view:select:none",function(e){this.setImmediate(function(){o.selectBundle(e)})}),this.listenTo(t,"view:select:same",this._onBundleListSame),t},_onBundleListSame:function(e){this.model.set("collapsed",!this.model.get("collapsed"))},createKeywordList:function(e){var t=new d({el:"#keyword-list",collection:l,collapsed:!1,filterFn:function(e,t,i){return!!c.selected&&-1!==c.selected.get("kIds").indexOf(e.id)},groupingFn:function(e,t,i){return a.get(e.get("tId"))}});return t.wrapper=t.el.parentElement,t.listenTo(l,"select:one select:none",function(e){t.selectedItem=e}),this.listenTo(t,"view:select:one view:select:none",this._onKeywordListChange),t},_onKeywordListChange:function(e){this.model.get("collapsed")||l.select(e)},createGraphView:function(e,t,i){var n=new p({id:"nav-graph",listA:e,listB:t,model:this.model,useOpaque:!1});return i||(i=this.el),i.insertBefore(n.el,i.firstElementChild),n}});t.exports=y},{"app/control/Controller":38,"app/control/Globals":39,"app/model/collection/ArticleCollection":47,"app/model/collection/BundleCollection":48,"app/model/collection/KeywordCollection":49,"app/model/collection/TypeCollection":50,"app/view/base/View":66,"app/view/component/ArticleButton":69,"app/view/component/FilterableListView":74,"app/view/component/GraphView":75,"app/view/component/GroupingListView":76,hammerjs:"hammerjs",underscore:"underscore","utils/TransformHelper":111}],61:[function(e,t,i){var r=function(e){this._offset=0|e,this._items=[],this._priorities=[],this._numItems=0};r.prototype=Object.create({enqueue:function(e,t){var i=this._items.length;return this._items[i]=e,this._priorities[i]={priority:0|t,index:i},this._numItems++,this._offset+i},contains:function(e){return 0<=(e-=this.offset)&&e<this._items.length},skip:function(e){var t,i;if(!((t=e-this._offset)<0||t>=this._items.length))return null!==(i=this._items[t])&&(this._items[t]=null,this._numItems--),i},indexes:function(){var e=this._priorities.concat();return e.sort(function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0}),e.forEach(function(e,t,i){i[t]=e.index},this),e},items:function(){var e=this._priorities.concat();return e.sort(function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0}),e.forEach(function(e,t,i){i[t]=this._items[e.index]},this),e},_empty:function(e){this._offset=e,this._items.length=0,this._priorities.length=0,this._numItems=0}},{offset:{get:function(){return this._offset}},length:{get:function(){return this._items.length}},numItems:{get:function(){return this._numItems}}});var n=function(e,t){this._nextQueue=new r(0),this._currQueue=null,this._running=!1,this._runId=-1,this._requestFn=e,this._cancelFn=t,this._runQueue=this._runQueue.bind(this)};n.prototype=Object.create({_runQueue:function(){if(this._running)throw new Error("wtf!!!");var e,t;this._currQueue=this._nextQueue,this._nextQueue=new r(this._currQueue.offset+this._currQueue.length),this._runId=-1,this._running=!0;var i=this._currQueue.indexes(),n=this._currQueue._items;for(e=0;e<i.length;e++)null!==(t=n[i[e]])&&t.apply(null,arguments);this._running=!1,this._currQueue=null,0<this._nextQueue.numItems&&(this._runId=this._requestFn.call(null,this._runQueue))},request:function(e,t){return this._running||-1!==this._runId||(this._runId=this._requestFn.call(null,this._runQueue)),this._nextQueue.enqueue(e,t)},cancel:function(e){var t;return this._running?t=this._currQueue.skip(e)||this._nextQueue.skip(e):(t=this._nextQueue.skip(e),-1!==this._runId&&0===this._nextQueue.numItems&&(this._cancelFn.call(null,this._runId),this._runId=-1)),t}},{running:{get:function(){return this._running}}}),t.exports=n},{}],62:[function(e,t,i){var n=e("underscore"),r=e("app/view/base/View"),s=e("app/control/Globals"),o=e("app/view/base/Interpolator"),a=e("utils/css/getBoxEdgeStyles"),l=r.extend({cidPrefix:"canvasView",tagName:"canvas",className:"canvas-view",properties:{paused:{get:function(){return this._paused},set:function(e){e=!!e,this._interpolator.paused!==e&&((this._interpolator.paused=e)||this.requestRender())}},context:{get:function(){return this._ctx}},interpolator:{get:function(){return this._interpolator}},canvasRatio:{get:function(){return this._canvasRatio}}},defaults:{values:{value:0},maxValues:{value:1}},initialize:function(e){(e=n.defaults(e||{},this.defaults)).values=n.defaults(e.values||{},this.defaults.values),e.maxValues=n.defaults(e.maxValues||{},this.defaults.maxValues),this._interpolator=new o(e.values,e.maxValues),this._interpolator.paused=e.paused||!1,this._useOpaque=e.useOpaque||!0,this._options=n.pick(e,"color","backgroundColor");this._ctx=this.el.getContext("2d",{});var t=1,i=this._ctx.webkitBackingStorePixelRatio||1;window.devicePixelRatio!==i&&(t=window.devicePixelRatio/i,t=Math.max(t,1)),this._canvasRatio=t,this.listenTo(this,"view:attached",function(){this.requestRender(r.SIZE_INVALID|r.LAYOUT_INVALID).renderNow()})},_updateCanvas:function(){var e=getComputedStyle(this.el);if(this._canvasWidth=this.el.scrollWidth,this._canvasHeight=this.el.scrollHeight,"border-box"===e.boxSizing){var t=a(e);this._canvasWidth-=t.paddingLeft+t.paddingRight+t.borderLeftWidth+t.borderRightWidth,this._canvasHeight-=t.paddingTop+t.paddingBottom+t.borderTopWidth+t.borderBottomWidth}this._canvasWidth*=this._canvasRatio,this._canvasHeight*=this._canvasRatio,this.measureCanvas(this._canvasWidth,this._canvasHeight,e),this.el.width=this._canvasWidth,this.el.height=this._canvasHeight,this._color=this._options.color||e.color||s.DEFAULT_COLORS.color,this._backgroundColor=this._options.backgroundColor||e.backgroundColor||s.DEFAULT_COLORS["background-color"],this._useOpaque&&this._opaqueProp&&(this.el[this._opaqueProp]=!0),this._fontSize=parseFloat(e.fontSize)*this._canvasRatio,this._fontFamily=e.fontFamily,this._ctx.restore(),this._ctx.font=[e.fontWeight,e.fontStyle,this._fontSize+"px/1",e.fontFamily].join(" "),this._ctx.textAlign="left",this._ctx.lineCap="butt",this._ctx.lineJoin="miter",this._ctx.strokeStyle=this._color,this._ctx.fillStyle=this._color,this.updateCanvas(this._ctx,e),this._ctx.save()},measureCanvas:function(e,t,i){},updateCanvas:function(e,t){},_getFontMetrics:function(e){var t,i,n,r=e.length;for(t in s.FONT_METRICS)-1!==(i=e.indexOf(t))&&i<r&&(r=i,n=s.FONT_METRICS[t]);return n||{unitsPerEm:1024,ascent:939,descent:-256}},_clearCanvas:function(e,t,i,n){this._ctx.clearRect(e,t,i,n),this._useOpaque&&(this._ctx.save(),this._ctx.fillStyle=this._backgroundColor,this._ctx.fillRect(e,t,i,n),this._ctx.restore())},_setStyle:function(e){l.setStyle(this._ctx,e)},render:function(){return this.attached?this.renderNow():this},renderFrame:function(e,t){if(!this.attached)return t;t&r.SIZE_INVALID&&this._updateCanvas(),this._interpolator.valuesChanged&&(t|=r.LAYOUT_INVALID,this._interpolator.interpolate(e)),t&(r.LAYOUT_INVALID|r.SIZE_INVALID)&&(this.redraw(this._ctx,this._interpolator,t),this._interpolator.valuesChanged&&this.requestRender())},getTargetValue:function(e){return this._interpolator.getTargetValue(e)},getRenderedValue:function(e){return this._interpolator.getRenderedValue(e)},valueTo:function(e,t,i){this._interpolator.valueTo(e,t,i),this.requestRender(r.MODEL_INVALID|r.LAYOUT_INVALID)},redraw:function(e,t,i){}},{setStyle:function(e,t){if("object"==typeof t)for(var i in t)switch(typeof e[i]){case"undefined":break;case"function":Array.isArray(t[i])?e[i].apply(e,t[i]):e[i].call(e,t[i]);break;default:e[i]=t[i]}}});t.exports=l},{"app/control/Globals":39,"app/view/base/Interpolator":63,"app/view/base/View":66,underscore:"underscore","utils/css/getBoxEdgeStyles":121}],63:[function(e,t,i){var o=e("underscore"),r=e("utils/ease/fn/linear"),n=function(e,t,i){for(var n in this._tstamp=0,this._renderableKeys=[],this._renderedKeys=[],this._paused=!1,this._pausedChanging=!1,this._maxValues=o.isObject(t)?o.extend({},t):{},this._easeFn=o.isObject(i)?o.extend({},i):{},this._valueData={},e)o.isNumber(this._maxValues[n])||(this._maxValues[n]=null),o.isFunction(this._easeFn[n])||(this._easeFn[n]=r),this._valueData[n]=this._initValue(e[n],0,this._maxValues[n]),this._renderableKeys.push(n)};n.prototype=Object.create({isAtTarget:function(e){return-1===this._renderableKeys.indexOf(e)},getCurrentValue:function(e){return this._valueData[e]._renderedValue||this._valueData[e]._value},getTargetValue:function(e){return this._valueData[e]._value},getStartValue:function(e){return this._valueData[e]._startValue},getRenderedValue:function(e){return this._valueData[e]._renderedValue},getOption:function(e,t){return"max"===t?this._maxValues[e]:"ease"===t?this._easeFn[e]:void 0},valueTo:function(n,e,r,t){var i,s=this._valueData[n];return o.isFunction(t)&&(this._easeFn[n]=t),(i=Array.isArray(s)?e.reduce(function(e,t,i){return s[i]?(s[i]=this._initNumber(t,r,this._maxValues[n]),!0):this._setValue(s[i],t,r)||e}.bind(this),i):this._setValue(s,e,r))&&(-1!==this._renderableKeys.indexOf(n)||this._renderableKeys.push(n)),this},updateValue:function(e){var t=this._renderableKeys.indexOf(e);return-1===t||this._interpolateKey(e)||this._renderableKeys.splice(t,1),this},_initValue:function(e,t,i){return Array.isArray(e)?e.map(function(e){return this._initNumber(e,t,i)},this):this._initNumber(e,t,i)},_initNumber:function(e,t,i){var n={};return n._value=e,n._startValue=e,n._valueDelta=0,n._duration=t||0,n._startTime=NaN,n._elapsedTime=NaN,n._lastRenderedValue=null,n._renderedValue=n._startValue,n._maxVal=i,n},_setValue:function(e,t,i){return e._value!==t&&(e._startValue=e._value,e._valueDelta=t-e._value,e._value=t,e._duration=i||0,e._startTime=NaN,!(e._elapsedTime=NaN))},_tstamp:0,interpolate:function(i){if(this._tstamp=i,this.valuesChanged){this._pausedChanging&&(this._renderableKeys.forEach(function(e){var t=this._valueData[e];isNaN(t._elapsedTime)||(t._startTime=i-t._elapsedTime)},this),this._pausedChanging=!1);var e=this._renderableKeys;this._renderableKeys=e.filter(function(e){return this._interpolateValue(i,this._valueData[e],this._easeFn[e])},this),this._renderedKeys=e}return this},_interpolateKey:function(e){return this._interpolateValue(this._tstamp,this._valueData[e],this._easeFn[e])},_interpolateValue:function(r,e,s){return Array.isArray(e)?e.reduce(function(e,t,i,n){return this._interpolateNumber(r,t,s)||e}.bind(this),!1):this._interpolateNumber(r,e,s)},_interpolateNumber:function(e,t,i){isNaN(t._startTime)&&(t._startTime=e),t._lastRenderedValue=t._renderedValue;var n=Math.max(0,e-t._startTime);return n<t._duration?(t._maxVal&&t._valueDelta<0?t._renderedValue=i(n,t._startValue,t._valueDelta+t._maxVal,t._duration)-t._maxVal:t._renderedValue=i(n,t._startValue,t._valueDelta,t._duration),t._elapsedTime=n,!0):(t._renderedValue=t._value,t._elapsedTime=NaN,t._startTime=NaN,!1)}},{paused:{get:function(){return this._paused},set:function(e){e=!!e,this._paused!==e&&(this._paused=e,this._pausedChanging=!0)}},valuesChanged:{get:function(){return!this._paused&&0<this._renderableKeys.length}},renderableKeys:{get:function(){return this._renderableKeys}},renderedKeys:{get:function(){return this._renderedKeys}},keys:{get:function(){return Object.keys(this._valueData)}}}),t.exports=n},{underscore:"underscore","utils/ease/fn/linear":124}],64:[function(e,t,i){var n=e("utils/prefixedEvent"),r={transitionend:n("transitionend"),fullscreenchange:n("fullscreenchange",document),fullscreenerror:n("fullscreenerror",document),visibilitychange:n("visibilitychange",document,"hidden")},s=0;for(var o in r)o===r[o]?delete r[o]:(Object.defineProperty(r,o,{value:r[o],enumerable:!0}),Object.defineProperty(r,s,{value:o,enumerable:!1}),s++);Object.defineProperty(r,"length",{value:s}),t.exports=r},{"utils/prefixedEvent":127}],65:[function(e,t,i){e("app/control/Globals");var r=e("hammerjs"),s=r.Pan;var o={},a={},l={};var c=null,n={init:function(e){var t,i,n;return null===c?(t=e,i=new s({event:"hpan",direction:r.DIRECTION_HORIZONTAL}),(n=new r.Manager(t)).add([i]),c=n,function(){var e,t=c.element;for(e in o)o.hasOwnProperty(e)&&c.on(e,o[e]);for(e in a)a.hasOwnProperty(e)&&t.addEventListener(e,a[e],!0);for(e in l)l.hasOwnProperty(e)&&t.addEventListener(e,l[e],!1)}()):c.element!==e&&console.warn("TouchManager already initialized with another element"),c},destroy:function(){null!==c?(!function(){var e,t=c.element;for(e in a)a.hasOwnProperty(e)&&t.removeEventListener(e,a[e],!0);for(e in l)a.hasOwnProperty(e)&&t.removeEventListener(e,l[e],!0)}(),c.destroy(),c=null):console.warn("no instance to destroy")},getInstance:function(){return null===c&&console.error("TouchManager has not been initialized"),c}};t.exports=n},{"app/control/Globals":39,hammerjs:"hammerjs"}],66:[function(e,t,i){var n=e("backbone"),r=e("underscore"),s=1,o={};function l(e){for(var t,i=e.querySelectorAll("*[data-cid]"),n=0,r=i.length;n<r;n++)(t=m.findByElement(i.item(n)))&&(t.attached||t._elementAttached())}function c(e){for(var t,i=e.querySelectorAll("*[data-cid]"),n=0,r=i.length;n<r;n++)(t=m.findByElement(i.item(n)))&&(t.attached?(t.cid,t._elementDetached()):console.warn("View::[detached (parent)] %s (ignored)",t.cid))}new MutationObserver(function(e){var t,i,n,r,s,o,a;for(t=0,i=e.length;t<i;t++)if("childList"==(n=e[t]).type){for(r=0,s=n.addedNodes.length;r<s;r++)o=n.addedNodes.item(r),(a=m.findByElement(o))&&(a.attached||a._elementAttached()),o instanceof HTMLElement&&l(o);for(r=0,s=n.removedNodes.length;r<s;r++)o=n.removedNodes.item(r),(a=m.findByElement(o))&&(a.attached?(a.cid,a.attached,a._elementDetached()):console.warn("View::[detached (childList)] %s (ignored)",a.cid,a.attached)),o instanceof HTMLElement&&c(o)}else"attributes"==n.type&&(a=m.findByElement(n.target))&&(a.attached||a._elementAttached())}).observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["data-cid"]});var a=window.performance?window.performance.now.bind(window.performance):Date.now.bind(Date),h=new(e("app/view/base/CallbackQueue"))(function(e){return window.requestAnimationFrame(e)},function(e){return window.cancelAnimationFrame(e)}),u=new(e("app/view/base/CallbackQueue"))(function(e){return window.setImmediate(function(){e.call(null,a())})},function(e){return window.clearImmediate(e)}),d=e("app/view/base/PrefixedEvents"),p=function(e){var t,i;for(t in e)i=t.match(/^\w+/i)[0],d.hasOwnProperty(i)&&(e[t.replace(i,d[i])]=e[t],delete e[t]);return e};function f(e,t,i){-1!=["log","info","warn","error"].indexOf(i)&&(i="log"),console[i].call(console,"%s::%s [parent:%s %s %s depth:%s]",e.cid,t,e.parentView&&e.parentView.cid,e.attached?"attached":"detached",e._viewPhase,e.viewDepth)}var m={NONE_INVALID:0,ALL_INVALID:-1>>>1,CHILDREN_INVALID:1,MODEL_INVALID:2,STYLES_INVALID:4,SIZE_INVALID:8,LAYOUT_INVALID:16,CLICK_EVENT:"click",ViewError:e("app/view/base/ViewError"),prefixedProperty:e("utils/prefixedProperty"),prefixedStyleName:e("utils/prefixedStyleName"),prefixedEvent:e("utils/prefixedEvent"),whenViewIsAttached:e("app/view/promise/whenViewIsAttached"),whenViewIsRendered:e("app/view/promise/whenViewIsRendered"),findByElement:function(e){return o[e.cid]?o[e.cid]:null},findByDescendant:function(e){do{if(o[e.cid])return o[e.cid]}while(e=e.parentElement||e.parentNode);return null},extend:function(e,t){return d.length&&e.events&&(r.isFunction(e.events)?e.events=r.wrap(e.events,function(e){return p(e.apply(this))}):r.isObject(e.events)&&(e.events=p(e.events))),e.properties&&this.prototype.properties&&r.defaults(e.properties,this.prototype.properties),n.View.extend.apply(this,arguments)},_flagsToStrings:["-"],flagsToString:function(e){var t=m._flagsToStrings[0|e];return t||(t=[],e&m.CHILDREN_INVALID&&t.push("children"),e&m.MODEL_INVALID&&t.push("model"),e&m.STYLES_INVALID&&t.push("styles"),e&m.SIZE_INVALID&&t.push("size"),e&m.LAYOUT_INVALID&&t.push("layout"),m._flagsToStrings[e]=t=t.join(" ")),t}};Object.defineProperty(m,"instances",{value:o,enumerable:!0});var g={cidPrefix:"view",_attached:!1,_parentView:null,_viewDepth:null,_viewPhase:"initializing",_renderQueueId:-1,_renderFlags:0,_enabled:null,properties:{cid:{get:function(){return this._cid||(this._cid=this.cidPrefix+s++)}},attached:{get:function(){return this._attached}},parentView:{get:function(){return this._parentView}},viewDepth:{get:function(){return this._getViewDepth()}},invalidated:{get:function(){return-1!==this._renderQueueId}},enabled:{get:function(){return this._enabled},set:function(e){this.setEnabled(e)}},renderFlags:{get:function(){return this._renderFlags}}},constructor:function(e){this.transform={},this.childViews={},this._applyRender=this._applyRender.bind(this),this.properties&&Object.defineProperties(this,this.properties),e&&e.className&&this.className&&(e.className+=" "+r.result(this,"className")),e&&e.parentView&&this._setParentView(e.parentView,!0),n.View.apply(this,arguments),this._viewPhase="initialized",null!==this.parentView&&this.trigger("view:parentChange",this.parentView,null),this.attached&&this.trigger("view:attached",this)},remove:function(){return"disposing"==this._viewPhase&&f(this,"remove","warn"),this._viewPhase="disposing",this._cancelRender(),this.$el.remove(),this._attached=!1,this.trigger("view:removed",this),this._setParentView(null),this.stopListening(),this.invalidated&&(console.warn("%s::remove invalidated after remove()",this.cid),this._cancelRender()),delete o[this.cid],this._viewPhase="disposed",this},_elementAttached:function(){this._attached=!0,this._viewDepth=null,this.setEnabled(!0),this._setParentView(m.findByDescendant(this.el.parentElement)),"initialized"==this._viewPhase?this.trigger("view:attached",this):"replacing"==this._viewPhase&&(this._viewPhase="initialized",this.trigger("view:replaced",this))},_elementDetached:function(){this.attached&&"disposing"!=this._viewPhase&&"disposed"!=this._viewPhase||f(this,"_elementDetached","error"),this._attached=!1,this._viewDepth=null,this.setEnabled(!1),"disposing"==this._viewPhase&&"disposed"!=this._viewPhase||this.remove()},_setParentView:function(e,t){void 0===e&&(console.warn("$s::_setParentView invalid value '%s'",this.cid,e),e=null);var i=this._parentView;this._parentView=e,this._viewDepth=null,e!==i&&(null!==i&&this.cid in i.childViews&&delete i.childViews[this.cid],null!==e&&(e.childViews[this.cid]=this),t||this.trigger("view:parentChange",this,e,i))},whenAttached:function(){return m.whenViewIsAttached(this)},_getViewDepth:function(){var e;return null===this._viewDepth&&(this._viewDepth=(e=this)?e.attached?null===e.parentView?0:e.parentView.viewDepth+1:NaN:null),this._viewDepth},setElement:function(e,t){if(this.el?(this.el!==e&&this.el.parentElement&&(this.attached&&(this._viewPhase="replacing"),this.el.parentElement.replaceChild(e,this.el)),n.View.prototype.setElement.apply(this,arguments),this.className&&r.result(this,"className").split(" ").forEach(function(e){this.el.classList.add(e)},this)):n.View.prototype.setElement.apply(this,arguments),void 0===this.el)throw new Error("Backbone view has no element");return(o[this.cid]=this).el.cid=this.cid,this.el.setAttribute("data-cid",this.cid),this},requestAnimationFrame:function(e,t,i){return h.request(e.bind(i||this),t)},cancelAnimationFrame:function(e){return h.cancel(e)},setImmediate:function(e,t,i){return u.request(e.bind(i||this),t)},clearImmediate:function(e){return u.cancel(e)},_traceRenderStatus:function(){return[-1!=this._renderQueueId?"async id:"+this._renderQueueId:"sync",m.flagsToString(this._renderFlags),this.attached?"attached":"detached",(this.skipTransitions?"skip":"run")+"-tx"].join(", ")},_applyRender:function(e){var t=this._renderFlags;this.trigger("view:render:before",this,t),this._renderFlags=0,this._renderQueueId=-1,this._renderFlags|=this.renderFrame(e,t),this.trigger("view:render:after",this,t),0!=this._renderFlags&&console.warn("%s::_applyRender [returned] phase: %s flags: %s (%s)",this.cid,this._viewPhase,m.flagsToString(this._renderFlags),this._renderFlags)},_cancelRender:function(){var e,t;-1!=this._renderQueueId&&(e=this._renderQueueId,this._renderQueueId=-1,void 0===(t=h.cancel(e))?console.warn("%s::_cancelRender [id:%i] not found",this.cid,e):null===t&&console.warn("%s::_cancelRender [id:%i] already cancelled",this.cid,e))},_requestRender:function(){h.running&&this._cancelRender(),-1==this._renderQueueId&&(this._renderQueueId=h.request(this._applyRender,isNaN(this.viewDepth)?Number.MAX_VALUE:this.viewDepth))},invalidate:function(e){return void 0!==e&&(this._renderFlags|=e),this},requestRender:function(e){return this.invalidate(e),this._requestRender(),this},renderFrame:function(e,t){return m.NONE_INVALID},renderNow:function(e){return-1!=this._renderQueueId&&(this._cancelRender(),e=!0),e&&this._applyRender(a()),this},whenRendered:function(){return m.whenViewIsRendered(this)},requestChildrenRender:function(e,t,i){var n,r;for(n in this.childViews)(r=this.childViews[n]).skipTransitions=r.skipTransitions||this.skipTransitions,r.requestRender(e),t&&r.renderNow(i);return this},render:function(){return this.renderNow(!0)},setEnabled:function(e){this._enabled!=e&&(this._enabled=!!e,this._enabled?this.delegateEvents():this.undelegateEvents())}};t.exports=n.View.extend(g,m)},{"app/view/base/CallbackQueue":61,"app/view/base/PrefixedEvents":64,"app/view/base/ViewError":67,"app/view/promise/whenViewIsAttached":88,"app/view/promise/whenViewIsRendered":89,backbone:"backbone",underscore:"underscore","utils/prefixedEvent":127,"utils/prefixedProperty":128,"utils/prefixedStyleName":129}],67:[function(e,t,i){function n(e,t){this.view=e,this.err=t,this.message=t.message}((n.prototype=Object.create(Error.prototype)).constructor=n).prototype.name="ViewError",t.exports=n},{}],68:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,r){var s,o,a=null!=t?t:{},l=i.helperMissing,c=e.escapeExpression,h="function";return'<a href="'+c((i.global||t&&t.global||l).call(a,"APP_ROOT",{name:"global",hash:{},data:r}))+"#"+c(typeof(o=null!=(o=i.handle||(null!=t?t.handle:t))?o:l)===h?o.call(a,{name:"handle",hash:{},data:r}):o)+'">'+(null!=(s=typeof(o=null!=(o=i.name||(null!=t?t.name:t))?o:l)===h?o.call(a,{name:"name",hash:{},data:r}):o)?s:"")+"</a>\n"},useData:!0})},{"hbsfy/runtime":24}],69:[function(e,t,i){var n=e("app/view/base/View"),r=e("./ArticleButton.hbs"),s=n.extend({cidPrefix:"articleButton",tagName:"h2",className:"article-button",template:r,events:{"click a":function(e){e.defaultPrevented||e.preventDefault(),this.trigger("view:click",this.model)}},renderFrame:function(e,t){this.el.innerHTML=this.template(this.model.toJSON())}});t.exports=s},{"./ArticleButton.hbs":68,"app/view/base/View":66}],70:[function(e,t,i){var n=e("app/view/base/View").extend({cidPrefix:"articleView",tagName:"article",className:"article-view mdown",initialize:function(e){},renderFrame:function(e,t){this.el.innerHTML=this.model.get("text")}});t.exports=n},{"app/view/base/View":66}],71:[function(e,t,i){var n,r,s=e("underscore"),o=e("backbone.babysitter"),a=e("hammerjs"),l=e("utils/touch/SmoothPanRecognizer"),c=a.Tap,h=e("app/control/Globals"),u=e("app/view/base/View"),d=e("app/view/render/CarouselRenderer"),p=e("utils/prefixedProperty"),f=e("utils/prefixedStyleName")("transform"),m=p("transform"),g=h.TRANSLATE_TEMPLATE,v=a.DIRECTION_VERTICAL,_=a.DIRECTION_HORIZONTAL,y={ANIMATED:!1,IMMEDIATE:!0,DIRECTION_VERTICAL:v,DIRECTION_HORIZONTAL:_,defaults:{selectOnScrollEnd:!1,requireSelection:!1,direction:_,selectThreshold:20,rendererFunction:(n=d.extend({className:"carousel-item default-renderer"}),r=d.extend({className:"carousel-item empty-renderer"}),function(e,t,i){return-1===t?r:n})}};y.validOptions=s.keys(y.defaults);var w={cidPrefix:"carousel",tagName:"div",className:"carousel skip-transitions",properties:{scrolling:{get:function(){return this._scrolling}},selectedItem:{get:function(){return this._selectedView.model},set:function(e){e?this._onSelectOne(e):this._onSelectNone()}}},events:{"transitionend .carousel-item.selected":"_onScrollTransitionEnd"},initialize:function(e){var t,i,n,r;s.bindAll(this,"_onPointerEvent","_onClick"),this.itemViews=new o,this.metrics={},s.extend(this,s.defaults(s.pick(e,y.validOptions),y.defaults)),this._precedingDir=(a.DIRECTION_LEFT|a.DIRECTION_UP)&this.direction,this._followingDir=(a.DIRECTION_RIGHT|a.DIRECTION_DOWN)&this.direction,!function(e,t){try{return e.get("hpan").options.direction==t}catch(e){return!1}}(e.touch,this.direction)?(console.warn("%s::initialize creating Hammer instance",this.cid),this.touch=(t=this.el,this.direction,i=new a.Manager(t),n=new l({event:"hpan",threshold:h.THRESHOLD,direction:a.DIRECTION_HORIZONTAL}),(r=new c({threshold:h.THRESHOLD-1,interval:50,time:200})).recognizeWith(n),i.add([n,r]),i),this.listenTo(this,"view:removed",function(){this.touch.destroy()})):this.touch=e.touch,this.setEnabled(!0),this.skipTransitions=!0,this._renderFlags=u.CHILDREN_INVALID,this.listenTo(this,"view:attached",function(){this.skipTransitions=!0,this.requestRender(u.SIZE_INVALID|u.LAYOUT_INVALID)}),this.listenTo(this.collection,{reset:this._onReset,"select:one":this._onSelectOne,"select:none":this._onSelectNone,"deselect:one":this._onDeselectAny,"deselect:none":this._onDeselectAny})},remove:function(){return this._togglePointerEvents(!1),this.removeChildren(),u.prototype.remove.apply(this,arguments),this},dirProp:function(e,t){return this.direction&_?e:t},renderFrame:function(e,t){t&u.CHILDREN_INVALID&&(this._createChildren(),t&=~u.CHILDREN_INVALID),this.attached?(t&u.SIZE_INVALID&&this._measure(),t&(u.LAYOUT_INVALID|u.SIZE_INVALID)&&this._scrollBy(this._delta,this.skipTransitions)):t&&this.listenToOnce(this,"view:attached",function(){this.requestRender(t)})},setEnabled:function(e){this._enabled!==e&&(this._enabled=e,this._togglePointerEvents(e),this.setImmediate(this._renderEnabled))},_renderEnabled:function(){this.el.classList.toggle("disabled",!this.enabled),this.itemViews.each(function(e){e.setEnabled(this.enabled)},this)},_createChildren:function(){var n,r,s,o;this.removeChildren(),this.collection.length&&(o={enabled:this.enabled},n=document.createDocumentFragment(),this.requireSelection||(r=this.rendererFunction(null,-1,this.collection),s=new r(o),this.itemViews.add(s),n.appendChild(s.el),this.emptyView=s),this.collection.each(function(e,t,i){o.model=e,r=this.rendererFunction(e,t,i),s=new r(o),this.itemViews.add(s),n.appendChild(s.el)},this),this.adjustToSelection(),this._selectedView.el.classList.add("selected"),this.el.appendChild(n))},removeChildren:function(){this.itemViews.each(this.removeItemView,this),this.emptyView=void 0},removeItemView:function(e){return this.itemViews.remove(e),e.remove(),e},_measure:function(){var t,e,i,n,r=0,s=0,o=0,a=0;i=n=this.emptyView||this.itemViews.first(),this.itemViews.each(function(e){e.render()}),this.itemViews.each(function(e){(t=this.measureItemView(e)).pos=r,r+=t.outer,t.posInner=s,s+=t.inner,e!==this.emptyView&&(t.across>o&&(o=t.across,n=e),t.outer>a&&(a=t.outer,i=e))},this),(e=this.metrics[this.cid]||(this.metrics[this.cid]={})).outer=this.el[this.dirProp("offsetWidth","offsetHeight")],e.before=i.el[this.dirProp("offsetLeft","offsetTop")],e.inner=i.el[this.dirProp("offsetWidth","offsetHeight")],e.after=e.outer-(e.inner+e.before),e.across=o,this._tapAcrossBefore=n.el[this.dirProp("offsetTop","offsetLeft")],this._tapAcrossAfter=this._tapAcrossBefore+o,this._tapBefore=e.before+this._tapGrow,this._tapAfter=e.before+e.inner-this._tapGrow,this.selectThreshold=Math.min(20,.1*e.outer)},measureItemView:function(e){var t,i;return i=e.el,(t=this.metrics[e.cid]||(this.metrics[e.cid]={})).outer=i[this.dirProp("offsetWidth","offsetHeight")],t.across=i[this.dirProp("offsetHeight","offsetWidth")],e.metrics?(t.before=e.metrics[this.dirProp("marginLeft","marginTop")],t.outer+=t.before,t.outer+=e.metrics[this.dirProp("marginRight","marginBottom")],t.inner=e.metrics.content[this.dirProp("width","height")],t.before+=e.metrics.content[this.dirProp("x","y")],t.after=t.outer-(t.inner+t.before)):(console.warn("%s::measureItemView view '%s' has no metrics",this.cid,e.cid),t.inner=t.outer,t.after=t.before=0),t},_delta:0,_scrolling:!1,_setScrolling:function(e){this._scrolling!=e&&(this._scrolling=e,this.el.classList.toggle("scrolling",e),this.trigger(e?"view:scrollstart":"view:scrollend"))},scrollBy:function(e,t){this._delta=e||0,this.skipTransitions=!!t,this.requestRender(u.LAYOUT_INVALID)},_scrollBy:function(t,e){var i,n,r;i=this.metrics[(this._scrollCandidateView||this._selectedView).cid],this.itemViews.each(function(e){n=this.metrics[e.cid],r=Math.floor(this._getScrollOffset(t,n,i)),e.metrics.translateX=this.direction&_?r:0,e.metrics.translateY=this.direction&_?0:r,e.metrics._transform=g(e.metrics.translateX,e.metrics.translateY),e.el.style[m]=e.metrics._transform},this),this.el.classList.toggle("skip-transitions",e),this.selectFromView()},_getScrollOffset:function(e,t,i){var n,r=0;return(n=t.pos-i.pos+e)<0?Math.abs(n)<i.outer?r+=-t.after/i.outer*n:r+=t.after:0<=n&&(Math.abs(n)<i.outer?r-=t.before/i.outer*n:r-=t.before),n+r},_onScrollTransitionEnd:function(e){e.propertyName===f&&this.scrolling&&(this.cid,e.target.cid,this._setScrolling(!1))},_togglePointerEvents:function(e){this._pointerEventsEnabled!=e&&((this._pointerEventsEnabled=e)?(this.touch.on("hpanstart hpanmove hpanend hpancancel",this._onPointerEvent),this.el.addEventListener(u.CLICK_EVENT,this._onClick,!0)):(this.touch.off("hpanstart hpanmove hpanend hpancancel",this._onPointerEvent),this.el.removeEventListener(u.CLICK_EVENT,this._onClick,!0)))},_onPointerEvent:function(e){if("pointercancel"!==e.srcEvent.type)switch(e.type){case"tap":return this._onTap(e);case"hpanstart":return this._onPanStart(e);case"hpanmove":return this._onPanMove(e);case"hpanend":case"hpancancel":return this._onPanFinal(e)}},getViewAtPanDir:function(e){return e&this._followingDir?this._precedingView:this._followingView},_onPanStart:function(e){this.selectFromView(),this.el.classList.add("panning"),this._setScrolling(!0)},_onPanMove:function(e){var t=this.direction&_?e.deltaX:e.deltaY,i=this.getViewAtPanDir(e.offsetDirection),n=this._panCandidateView;n!==i&&(n&&n.el.classList.remove("candidate"),i&&i.el.classList.add("candidate"),this._panCandidateView=i),void 0===n&&(t*=h.HPAN_OUT_DRAG),-1!==this._renderRafId?(this.scrollBy(t,y.IMMEDIATE),this.renderNow()):this._scrollBy(t,y.IMMEDIATE)},_onPanFinal:function(e){var t,i=this.direction&_?e.deltaX:e.deltaY;"hpanend"==e.type&&e.direction^e.offsetDirection^this.direction&&Math.abs(i)>this.selectThreshold&&(t=this.getViewAtPanDir(e.offsetDirection)),this._scrollCandidateView=t||void 0,this._panCandidateView&&this._panCandidateView!==t&&this._panCandidateView.el.classList.remove("candidate"),this._panCandidateView=void 0,this.el.classList.remove("panning"),this.scrollBy(0,y.ANIMATED),this.selectFromView()},_tapGrow:10,getViewAtTapPos:function(e,t){if(this._tapAcrossBefore<t&&t<this._tapAcrossAfter){if(e<this._tapBefore)return this._precedingView;if(e>this._tapAfter)return this._followingView}},_onTap:function(e){if(!e.defaultPrevented){var t,i,n,r,s=u.findByDescendant(e.target);do{if(this._selectedView===s)return;if(this===s)break}while(s=s.parentView);t=this.el.getBoundingClientRect(),"tap"==e.type?(i=e.center.x-t.left,n=e.center.y-t.top):(i=e.clientX-t.left,n=e.clientY-t.top),(r=this.getViewAtTapPos(this.dirProp(i,n),this.dirProp(n,i)))&&(this.cid,e.preventDefault(),this._scrollCandidateView=r,this._setScrolling(!0),this.scrollBy(0,y.ANIMATED),this.triggerSelectionEvents(r,!0))}},_onClick:function(e){this.cid,e.type,this._onTap(e)},triggerSelectionEvents:function(e,t){void 0===e||this._internalSelection||(this._internalSelection=!!t,e===this.emptyView?this.trigger("view:select:none"):this.trigger("view:select:one",e.model),this._internalSelection=!1)},selectFromView:function(){if(void 0!==this._scrollCandidateView){var e=this._scrollCandidateView;this._scrollCandidateView=void 0,e.el.classList.remove("candidate"),this.triggerSelectionEvents(e,!0)}},adjustToSelection:function(){var e,t=this.collection.selectedIndex;this.requireSelection?(-1==t&&t++,this._selectedView=(e=this.collection.at(t))&&this.itemViews.findByModel(e),this._precedingView=(e=this.collection.at(t-1))&&this.itemViews.findByModel(e)):(this._selectedView=(e=this.collection.at(t))?this.itemViews.findByModel(e):this.emptyView,this._precedingView=e&&((e=this.collection.at(t-1))?this.itemViews.findByModel(e):this.emptyView)),this._followingView=(e=this.collection.at(t+1))&&this.itemViews.findByModel(e)},_onSelectOne:function(e){e!==this._selectedView.model&&this._onSelectAny(e)},_onSelectNone:function(){(this.requireSelection?this.itemViews.first():this.emptyView)!==this._selectedView&&this._onSelectAny()},_onSelectAny:function(e){this._selectedView.el.classList.remove("selected"),this.adjustToSelection(),this._selectedView.el.classList.add("selected"),this._internalSelection||(this._setScrolling(!0),this.scrollBy(0,y.ANIMATED))},_onReset:function(){this.requestRender(u.CHILDREN_INVALID|u.MODEL_INVALID)}};t.exports=y=u.extend(w,y)},{"app/control/Globals":39,"app/view/base/View":66,"app/view/render/CarouselRenderer":90,"backbone.babysitter":"backbone.babysitter",hammerjs:"hammerjs",underscore:"underscore","utils/prefixedProperty":128,"utils/prefixedStyleName":129,"utils/touch/SmoothPanRecognizer":135}],72:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,r){var s;return e.escapeExpression("function"==typeof(s=null!=(s=i.id||(null!=t?t.id:t))?s:i.helperMissing)?s.call(null!=t?t:{},{name:"id",hash:{},data:r}):s)},useData:!0})},{"hbsfy/runtime":24}],73:[function(e,t,i){var n=e("app/view/base/View"),r=e("./CollectionStack.hbs");t.exports=n.extend({cidPrefix:"stack",tagName:"div",className:"stack",template:r,events:{transitionend:function(e){this._renderContent()}},initialize:function(e){this._enabled=!0,this._skipTransitions=!0,this._contentInvalid=!0,e.template&&(this.template=e.template),this.content=document.createElement("div"),this.content.className="stack-item",this.el.appendChild(this.content),this.listenTo(this.collection,"select:one select:none",this._onSelectChange)},setEnabled:function(e){this._enabled!==e&&(this._enabled=e,this.el.classList.toggle("disabled",!this._enabled))},_onSelectChange:function(e){if(this._renderedItem===this.collection.selected)throw new Error("change event received but item is identical");this._renderedItem=this.collection.selected,this._contentInvalid=!0,this.render()},render:function(){return this._skipTransitions?(this._skipTransitions=!1,this.el.classList.add("skip-transitions"),this.setImmediate(function(){this.el.classList.remove("skip-transitions")}),this._contentInvalid&&this._renderContent()):this._contentInvalid&&this.content.classList.remove("current"),this},_renderContent:function(){if(this._contentInvalid){this._contentInvalid=!1;var e=this.collection.selected;this.content.innerHTML=e?this.template(e.toJSON()):"",this.content.classList.add("current")}}})},{"./CollectionStack.hbs":72,"app/view/base/View":66}],74:[function(e,t,i){var n=e("underscore"),r=e("backbone.babysitter"),s=e("app/view/base/View"),o=e("app/view/render/ClickableRenderer"),a=e("utils/prefixedProperty"),l=e("utils/css/getBoxEdgeStyles"),c=e("utils/array/difference"),h=e("utils/promise/resolveAll"),u=e("utils/promise/rejectAll"),d=e("app/control/Globals").TRANSLATE_TEMPLATE,p=a("transform"),f=s.extend({cidPrefix:"filterableList",tagName:"ul",className:"list selectable filterable",defaults:{collapsed:!0,filterFn:function(){return!0},renderer:o.extend({cidPrefix:"listItem",className:"list-item list-node"})},properties:{collapsed:{get:function(){return this._collapsed},set:function(e){this._setCollapsed(e)}},selectedItem:{get:function(){return this._selectedItem},set:function(e){this._setSelection(e)}},filteredItems:{get:function(){return this._filteredItems}},metrics:{get:function(){return this._metrics}}},events:{"transitionend .list-node":function(e){e.propertyName==p&&e.target.parentElement===this.el&&this._changedPosNum--,this._collapsedChanging&&0==this._changedPosNum&&(this.cid,e.type,e.propertyName,this._collapsePromises.length,this._collapsedChanging=!1,this.el.classList.remove("collapsed-changing"),h(this._collapsePromises,this))}},initialize:function(e){this._filteredItems=[],this._filteredIncoming=[],this._filteredOutgoing=[],this._metrics={},this._itemMetrics=[],this._collapsePromises=[],this.itemViews=new r,n.defaults(e,this.defaults),this.renderer=e.renderer,this._filterFn=e.filterFn,this.collection.each(this.createItemView,this),this._setSelection(this.collection.selected),this._setCollapsed(e.collapsed),this.refreshFilter(),this.listenTo(this.collection,"reset",function(){throw this._allItems=null,new Error("not implemented")}),this.cid,this.attached,this.once("view:attached",function(e){e.cid,e.attached,e.skipTransitions=!0,e.el.classList.add("skip-transitions"),e.setImmediate(function(){e.renderNow()})})},_getAllItems:function(){return this._allItems||(this._allItems=this.collection.slice())},_whenCollapseChangeEnds:function(){if(this._collapsedChanged){var i=this;return new Promise(function(e,t){i.on("view:render:after",e)})}return Promise.resolve(this)},whenCollapseChangeEnds:function(){var i,e;return this._collapsedChanging||this._collapsedChanged?(i={},e=new Promise(function(e,t){i.resolve=e,i.reject=t}),this._collapsePromises.push(i)):e=Promise.resolve(this),e},renderFrame:function(e,t){if(this._collapsedChanging&&(console.warn("%s::renderFrame collapsed tx interrupted",this.cid),this._collapsedChanging=!1,this.el.classList.remove("collapsed-changing"),u(this._collapsePromises,this)),this.skipTransitions&&(this.el.classList.add("skip-transitions"),this.setImmediate(function(){this.skipTransitions=!1,this.el.classList.remove("skip-transitions")})),this._collapsedChanged&&(this._collapsedChanged=!1,t|=s.SIZE_INVALID,this.el.classList.toggle("collapsed",this._collapsed),this.skipTransitions?(this._collapsedChanging=!1,this.once("view:render:after",function(e){this._changedPosNum=0,h(e._collapsePromises,e)})):(this._collapsedChanging=!0,this.el.classList.add("collapsed-changing")),this.cid,this._collapsePromises.length,this._collapsedChanging),this._selectionChanged&&(this._selectionChanged=!1,t|=s.LAYOUT_INVALID,this.renderSelection(this.collection.selected,this.collection.lastSelected)),this._filterChanged){this._filterChanged=!1,t|=s.LAYOUT_INVALID;this.filteredItems;this.computeFilter(),this.applyFilter()}t&s.SIZE_INVALID&&this.measure(),t&(s.LAYOUT_INVALID|s.SIZE_INVALID)&&this.renderLayout()},measure:function(){this._metrics=l(this.el,this._metrics),this.itemViews.forEach(function(e){e._metrics||(e._metrics={}),e._metrics.offsetTop=e.el.offsetTop,e._metrics.offsetHeight=e.el.offsetHeight,e._metrics.offsetLeft=e.el.offsetLeft,e._metrics.offsetWidth=e.el.offsetWidth,!this._collapsed&&e.label?(e._metrics.textLeft=e.label.offsetLeft,e._metrics.textWidth=e.label.offsetWidth):(e._metrics.textLeft=e._metrics.offsetLeft,e._metrics.textWidth=e._metrics.offsetWidth)},this)},renderLayout:function(){var e,t,i,n;e=this._metrics.paddingLeft,t=this._metrics.paddingTop;for(var r=this._changedPosNum=0,s=this.el.children.length;r<s;r++){var o=this.itemViews.findByCid(this.el.children[r].cid);i=o.transform.tx,n=o.transform.ty,(this.collection.selected&&!o.model.selected||o.el.classList.contains("excluded"))&&this._collapsed?(o.transform.tx=e,o.transform.ty=t):(0==o._metrics.offsetHeight&&(t-=o._metrics.offsetTop),o.transform.tx=e,o.transform.ty=t,t+=o._metrics.offsetHeight+o._metrics.offsetTop),o.el.style[p]=d(o.transform.tx,o.transform.ty),o.transform.tx==i&&o.transform.ty==n||this._changedPosNum++}this._metrics.height=Math.max(0,t+this._metrics.paddingBottom),this.el.style.height=this._metrics.height+"px"},createItemView:function(e,t){var i=new this.renderer({model:e,el:this.el.querySelector('.list-item[data-id="'+e.id+'"]')});return this.listenTo(i,"renderer:click",this._onRendererClick),this.itemViews.add(i),i},_onRendererClick:function(e,t){this._collapsedChanging||this._collapsed&&e.get("excluded")||(this.collection.selected!==e?this.trigger("view:select:one",e):t.altKey?this.trigger("view:select:none"):this.trigger("view:select:same",e))},_collapsed:void 0,_setCollapsed:function(e){e!==this._collapsed&&(this._collapsed=e,this._collapsedChanged=!0,this.requestRender())},_selectedItem:void 0,_setSelection:function(e){e!==this._selectedItem&&(this._selectedItem=e,this._selectionChanged=!0,this.requestRender(s.MODEL_INVALID))},renderSelection:function(e,t){t&&this.itemViews.findByModel(t).el.classList.remove("selected"),e&&this.itemViews.findByModel(e).el.classList.add("selected"),this.el.classList.toggle("has-selected",null!==this.selectedItem)},refreshFilter:function(){this._filterFn&&(this._filterChanged=!0,this.requestRender(s.MODEL_INVALID))},computeFilter:function(){var e,t,i,n;this._filteredIncoming.length=0,this._filteredOutgoing.length=0,e=this._filterFn?this.collection.filter(this._filterFn,this):this._getAllItems(),t=this._filteredItems,i=!(!e||!e.length),n=!(!t||!t.length),i&&c(n?t:this._getAllItems(),e,this._filteredIncoming),n&&c(i?e:this._getAllItems(),t,this._filteredOutgoing),this._filteredItems=e},applyFilter:function(){this._filteredIncoming.forEach(function(e){this.itemViews.findByModel(e).el.classList.add("excluded"),e.set("excluded",!0)},this),this._filteredOutgoing.forEach(function(e){this.itemViews.findByModel(e).el.classList.remove("excluded"),e.set("excluded",!1)},this),this.el.classList.toggle("has-excluded",0<this.filteredItems.length)}});t.exports=f},{"app/control/Globals":39,"app/view/base/View":66,"app/view/render/ClickableRenderer":91,"backbone.babysitter":"backbone.babysitter",underscore:"underscore","utils/array/difference":113,"utils/css/getBoxEdgeStyles":121,"utils/prefixedProperty":128,"utils/promise/rejectAll":131,"utils/promise/resolveAll":132}],75:[function(e,t,i){var o=e("underscore"),n=e("color"),s=e("app/view/base/CanvasView"),r=e("app/control/Globals"),y=e("utils/canvas/calcArcHConnector"),u=e("utils/canvas/CanvasHelper"),a=(e("utils/geom/inflateRect"),{lineCap:"butt",lineWidth:.75,lineDashOffset:0,setLineDash:[[]]}),l={radiusBase:1.25,radiusIncrement:.21,outlineWidth:3,arrowSize:.3},c=s.extend({cidPrefix:"graph",tagName:"canvas",className:"graph",defaultKey:"a2b",defaults:{values:{a2b:0,b2a:0},maxValues:{a2b:1,b2a:1}},initialize:function(e){s.prototype.initialize.apply(this,arguments),this._listA=e.listA,this._listB=e.listB,this._a2b={srcView:e.listA,destView:e.listB,s:o.defaults({lineWidth:1.25},a,l),p:o.defaults({},l),strokeStyleFn:function(e,t,i){return n(i).mix(t,.9).hexString()}},this._b2a={srcView:e.listB,destView:e.listA,s:o.defaults({lineWidth:.7},a,l),p:o.defaults({},l),strokeStyleFn:function(e,t,i){return n(e).mix(t,.6).hexString()}}},measureCanvas:function(e,t,i){this.cid,i.height,this.el.offsetHeight,this.el.scrollHeight,this.el.clientHeight},updateCanvas:function(){this._updateMetrics(),this._updateStyles()},_updateStyles:function(){var e,t,i;this.model.has("bundle")?(i=(e=this.model.get("bundle")).colors.lnColor.clone(),t=e.colors.bgColor.clone()):(t=n(r.DEFAULT_COLORS["background-color"]),i=n(r.DEFAULT_COLORS["link-color"])),this._a2b.s.strokeStyle=this._a2b.s.fillStyle=this._a2b.strokeStyleFn(this._color,t,i),this._b2a.s.strokeStyle=this._b2a.s.fillStyle=this._b2a.strokeStyleFn(this._color,t,i)},_setStyle:function(e){"string"==typeof e&&(e=this._styleData[e]),s.setStyle(this._ctx,e)},_updateMetrics:function(){var e,t,i,n,r,s,o,a,l,c;for(this._rootFontSize=parseFloat(getComputedStyle(document.documentElement).fontSize),e=this.el.getBoundingClientRect(),this._ctx.setTransform(this._canvasRatio,0,0,this._canvasRatio,-(e.left+window.pageXOffset)*this._canvasRatio-.5,-(e.top+window.pageYOffset)*this._canvasRatio-.5),r=this._a2b.srcView.el.getBoundingClientRect(),s=this._a2b.destView.el.getBoundingClientRect(),this._a2b.qx=(c=s,(l=r).right<c.left?1:c.right<l.left?-1:0),n=this._listA.el.querySelectorAll(".label"),o=r.left+window.pageXOffset,t=0,i=n.length;t<i;t++)o=Math.max(o,n[t].getBoundingClientRect().right+window.pageXOffset);for(this._a2b.xMin=o,n=this._listB.el.querySelectorAll(".label"),a=s.left+window.pageXOffset,t=0,i=n.length;t<i;t++)a=Math.min(a,n[t].getBoundingClientRect().left+window.pageXOffset);this._a2b.destMinX=a,this._b2a.qx=-this._a2b.qx,this._b2a.xMin=this._a2b.destMinX,this._b2a.destMinX=this._a2b.xMin},redraw:function(e,t,i){this._clearCanvas(0,0,this._canvasWidth,this._canvasHeight),e.save(),this._redraw_fromElements(e,t,i),e.restore()},_redraw_fromElements:function(e,t,i){var n,r;i&(s.SIZE_INVALID|s.MODEL_INVALID)&&(this.cid,t.valuesChanged,s.flagsToString(i),this._a2b.connectorsOut=this._a2b.connectors,this._b2a.connectorsOut=this._b2a.connectors,this._b2a.connectors=this._computeConnectors(this._b2a),this._a2b.connectors=this._computeConnectors(this._a2b),this._labelOverlays=this._computeLabelOverlays(this._listB)),n=t.getRenderedValue("b2a")/t.getOption("b2a","max"),r=t.getRenderedValue("a2b")/t.getOption("a2b","max"),this._drawConnectors(this._b2a.connectors,this._b2a.s,n,1),this._drawConnectors(this._b2a.connectorsOut,this._b2a.s,1-n,1),this._drawConnectors(this._a2b.connectors,this._a2b.s,r,2),this._drawLabelOverlays(this._labelOverlays)},_computeLabelOverlays:function(e){var t,i,n,r={rects:[]},s=e.el.querySelectorAll(".list-group .label span");for(t=0,i=s.length;t<i;t++)(n=o.clone(s[t].getBoundingClientRect())).top+=window.pageYOffset,n.left+=window.pageXOffset,r.rects[t]=n;return r},_drawLabelOverlays:function(e){this._ctx.save(),this._ctx.globalAlpha=.85,this._ctx.globalCompositeOperation="destination-out",e.rects.forEach(function(e){this._ctx.fillRect(e.left,e.top,e.width,e.height)},this),this._ctx.restore()},_computeConnectors:function(e){var t,i,n=e.xMin,r=e.destMinX,s=e.qx;t=this._roundTo(e.s.radiusBase*this._rootFontSize,.5),i=this._roundTo(e.s.radiusIncrement*this._rootFontSize,.5);var o,a,l,c,h,u,d,p=[];if(e.srcView.collection.selected&&e.destView.filteredItems){var f=e.srcView.itemViews.findByModel(e.srcView.collection.selected).label.getBoundingClientRect();for(c=f.left,h=f.top+f.height/2,0<s&&(c+=f.width),c+=window.pageXOffset,h+=window.pageYOffset,d=e.destView.filteredItems,l=e.destView.filteredItems.length,o=0;o<l;o++)a={},f=e.destView.itemViews.findByModel(d[o]).label.getBoundingClientRect(),a.x2=f.left,a.y2=f.top+f.height/2,s<0&&(a.x2+=f.width),a.x2+=window.pageXOffset,a.y2+=window.pageYOffset,a.x1=c,a.y1=h,a.qx=s,p[o]=a;p.sort(function(e,t){return e.y2-t.y2});var m,g=0,v=l*i*.5;for(o=0;o<l;o++)m=(o-(l-1)/2)*i,(a=p[o]).cy1=a.y1+m,a.cy2=a.y2,a.r0=Math.abs(m),a.cx0=a.x1+(v-a.r0)*s,a.di=0<a.cy1-a.y2?o:l-(o+1),g=Math.max(g,a.di);var _=(Math.abs(r-n)-(v+g*i))/2;for(t=Math.max(0,Math.min(t,_)),o=0;o<l;o++)(a=p[o]).r1=a.di*i+t,a.r2=t,a.cx1=n+v*s,a.cx2=r-(g-a.di)*i*s,(u=y(a.cx1,a.cy1,a.r1,a.cx2,a.cy2,a.r2,1))?(a.tx1=u[0],a.tx2=u[1]):(a.tx1=a.cx1,a.tx2=a.cx2),a.length=Math.abs(a.x1-a.x2)+Math.abs(a.cy1-a.cy2);p.sort(function(e,t){return e.di-t.di}),p.si=g,p.qx=s,p.sMin=n,p.dMin=r}return p},_drawConnectors:function(e,t,i,n){var r,s,o,a,l,c,h;if(e&&e.length&&i){if(s=e.length,a=t.lineWidth+t.outlineWidth,c=(l=t.arrowSize*this._rootFontSize)+(a-t.lineWidth),h=Math.PI*n,this._setStyle(t),t.outlineWidth){for(this._ctx.save(),this._ctx.globalCompositeOperation="destination-out",this._ctx.lineWidth=a,r=0;r<s;r++)o=e[r],i<1&&(this._ctx.lineDashOffset=o.length*(1+i),this._ctx.setLineDash([o.length,o.length])),this._drawConnector(o,r,e),1==i&&(u.arrowhead(this._ctx,o.x2,o.y2,c,h),this._ctx.fill());this._ctx.restore()}for(r=0;r<s;r++)o=e[r],i<1&&(this._ctx.lineDashOffset=o.length*(1+i),this._ctx.setLineDash([o.length,o.length])),this._drawConnector(o,r,e),1==i&&(u.arrowhead(this._ctx,o.x2,o.y2,l,n*h),this._ctx.fill())}},_drawConnector:function(e,t,i){this._ctx.beginPath(),this._ctx.moveTo(e.x2,e.cy2),this._ctx.arcTo(e.tx2,e.cy2,e.tx1,e.cy1,e.r2),this._ctx.arcTo(e.tx1,e.cy1,e.cx1,e.cy1,e.r1),this._ctx.arcTo(e.cx0,e.cy1,e.cx0,e.y1,e.r0),this._ctx.stroke()},_roundTo:function(e,t){return 1<t&&(t=1/t),Math.round(e/t)*t}});t.exports=c},{"app/control/Globals":39,"app/view/base/CanvasView":62,color:"color",underscore:"underscore","utils/canvas/CanvasHelper":114,"utils/canvas/calcArcHConnector":120,"utils/geom/inflateRect":126}],76:[function(e,t,i){var n=e("underscore"),r=e("app/view/component/FilterableListView"),s=e("app/view/render/ClickableRenderer"),o=e("app/view/render/LabelRenderer"),a=r.extend({cidPrefix:"groupingList",tagName:"dl",className:"grouped",_groupingFn:null,defaults:n.defaults({renderer:s.extend({cidPrefix:"groupingListItem",tagName:"dl",className:"list-item list-node"}),groupingRenderer:o.extend({cidPrefix:"groupingListGroup",tagName:"dt",className:"list-group list-node"}),groupingFn:null},r.prototype.defaults),properties:{groups:{get:function(){return this._groups}},filteredGroups:{get:function(){return this._filteredGroups}}},initialize:function(e){r.prototype.initialize.apply(this,arguments),this._groups=[],this._filteredGroups=[],this._changedFilteredGroups=[],this._groupsByItemCid={},this._groupingFn=e.groupingFn,this.groupingRenderer=e.groupingRenderer,this._computeGroups(),this._groupingFn&&this._groups.forEach(this.createGroupingView,this)},_computeGroups:function(){this._groups.length=0,this._groupingFn?this.collection.forEach(function(e){var t,i;(i=this._groupingFn.apply(null,arguments))&&-1==(t=this._groups.indexOf(i))&&(t=this._groups.length,this._groups[t]=i),this._groupsByItemCid[e.cid]=i},this):this.collection.forEach(function(e){this._groupsByItemCid[e.cid]=null},this)},createGroupingView:function(e){var t=new this.groupingRenderer({model:e,el:this.el.querySelector('.list-group[data-id="'+e.id+'"]')});return this.itemViews.add(t),t},computeFilter:function(){r.prototype.computeFilter.apply(this,arguments),this._groupingFn&&(0==this._filteredItems.length?this._filteredGroups=this._groups.concat():this._filteredGroups=n.uniq(this._filteredItems.map(function(e){return this._groupsByItemCid[e.cid]},this)))},applyFilter:function(){r.prototype.applyFilter.apply(this,arguments),this._groups.forEach(function(e){this.itemViews.findByModel(e).el.classList.toggle("excluded",-1==this._filteredGroups.indexOf(e))},this)}});t.exports=a},{"app/view/component/FilterableListView":74,"app/view/render/ClickableRenderer":91,"app/view/render/LabelRenderer":98,underscore:"underscore"}],77:[function(e,t,i){var n=e("underscore"),r=e("app/view/base/CanvasView"),a=e("utils/ease/fn/easeInQuad"),l=e("utils/ease/fn/easeOutQuad"),c=2*Math.PI;t.exports=r.extend({cidPrefix:"playToggleSymbol",className:"play-toggle-symbol",defaults:{values:{_loop:0,_arc:0},maxValues:{_loop:1},symbolName:"play"},properties:{symbolName:{get:function(){return this._symbolName},set:function(e){this._setSymbolName(e)}}},initialize:function(e){r.prototype.initialize.apply(this,arguments),this._options=n.extend(this._options,n.pick(e,"symbolName")),this.symbolName=this._options.symbolName},_symbolName:null,_setSymbolName:function(e){this._symbolName!==e&&(this._lastSymbolName=this._symbolName,this._symbolName=e,this.requestRender(r.LAYOUT_INVALID),this.cid,this._lastSymbolName,this._symbolName)},measureCanvas:function(e,t,i){this._canvasHeight=this._canvasWidth=Math.min(e,t)},updateCanvas:function(e,t){var i=this._getFontMetrics(this._fontFamily);this._baselineShift=i?(i.ascent+i.descent)/i.unitsPerEm:.7,this._baselineShift*=.5*this._fontSize,this._baselineShift=Math.round(this._baselineShift),this._radius=this._canvasWidth/2*Math.SQRT1_2*Math.SQRT1_2,this._side=this._radius*Math.SQRT1_2,this._ctx.lineWidth=3*this._canvasRatio,this._ctx.shadowBlur=0,this._ctx.shadowColor="#000000",this._ctx.shadowOffsetX=1,this._ctx.shadowOffsetY=1,this._ctx.setTransform(1,0,0,1,this._canvasWidth/2,this._canvasHeight/2)},redraw:function(e,t,i){this._clearCanvas(-this._canvasWidth/2,-this._canvasHeight/2,this._canvasWidth,this._canvasHeight),"waiting"===this._symbolName?0===t.getTargetValue("_arc")&&t.valueTo("_arc",1,400,a).updateValue("_arc"):1===t.getTargetValue("_arc")&&t.valueTo("_arc",0,400,l).updateValue("_arc");var n=t.getRenderedValue("_arc");0<n&&!t.paused&&t.isAtTarget("_loop")&&t.valueTo("_loop",0,0).valueTo("_loop",1,800).updateValue("_loop");var r=t.getRenderedValue("_loop");if(0<n){var s=n*(2*(r<.5?r%.5:.5-r%.5))*.25+.125*n+1e-4,o=r+1.833333;e.beginPath(),e.arc(0,0,this._radius,(1-s+o)*c,(s+o)*c,!1),e.stroke()}switch(this._symbolName){case"replay":case"ended":case"play":this.drawPlay(e,this._side),e.fill();break;case"pause":this.drawPause(e,this._side),e.fill();break;case"waiting":switch(this._lastSymbolName){case"replay":case"ended":case"play":this.drawPlay(e,(1-n)*this._side),e.fill();break;case"pause":this.drawPause(e,(1-n)*this._side),e.fill()}}},drawPlay:function(e,t){var i=(1-Math.SQRT1_2)*t;e.beginPath(),e.moveTo(i+t,0),e.lineTo(i-t,-t),e.lineTo(i-t,t),e.closePath()},drawPause:function(e,t){var i=.75*t,n=2*t;e.beginPath(),e.rect(-t,-t,i,n),e.rect(t-i,-t,i,n),e.closePath()},drawLabel:function(e){var t=this._ctx.measureText(e).width;this._ctx.fillText(e,-.5*t,this._baselineShift,t)}},{PLAY:"playing",PAUSE:"paused",WAITING:"waiting",ENDED:"ended"})},{"app/view/base/CanvasView":62,underscore:"underscore","utils/ease/fn/easeInQuad":122,"utils/ease/fn/easeOutQuad":123}],78:[function(e,t,i){t.exports=e("app/view/component/progress/CanvasProgressMeter3")},{"app/view/component/progress/CanvasProgressMeter3":80}],79:[function(e,t,i){var n=e("backbone.babysitter"),r=e("app/view/base/View"),s=e("app/view/render/DefaultSelectableRenderer"),o=e("app/view/render/ClickableRenderer"),a=r.extend({cidPrefix:"selectableList",tagName:"ul",className:"list selectable",renderer:s,initialize:function(e){this._enabled=!0,this._childrenInvalid=!0,e.renderer&&(this.renderer=e.renderer),this.showEmpty=!!e.showEmpty,this.itemViews=new n,this.listenTo(this.collection,"add remove reset",this._onCollectionChange)},remove:function(){return this.removeChildren(),r.prototype.remove.apply(this,arguments),this},_onCollectionChange:function(e){this._childrenInvalid=!0,this.render()},render:function(){return this._childrenInvalid&&(this._childrenInvalid=!1,this.createChildren()),this},setEnabled:function(e){this._enabled!==e&&(this._enabled=e,this.el.classList.toggle("disabled",!this._enabled))},createChildren:function(){var n,r;this.removeChildren(),this.el.innerHTML="",this.collection.length&&(n=document.createDocumentFragment(),this.showEmpty&&(r=this.createEmptyView(),n.appendChild(r.render().el)),this.collection.each(function(e,t,i){r=this.createItemView(e,t),n.appendChild(r.render().el)},this),this.el.appendChild(n))},createItemView:function(e,t){var i=new this.renderer({model:e});return this.itemViews.add(i),this.listenTo(i,"renderer:click",this.onItemViewClick),i},removeChildren:function(){this.itemViews.each(this.removeItemView,this)},removeItemView:function(e){return this.stopListening(e),this.itemViews.remove(e),e.remove(),e},onItemViewClick:function(e){this.collection.selected!==e&&this._enabled&&this.trigger("view:select:one",e)},createEmptyView:function(){var e=new a.EmptyRenderer({model:this.collection});return this.itemViews.add(e),this.listenTo(e,"renderer:click",function(){this._enabled&&this.trigger("view:select:none")}),e}},{EmptyRenderer:o.extend({tagName:"li",className:"list-item empty-item",initialize:function(e){this.listenTo(this.model,"selected deselected",this.renderClassList),this.renderClassList()},render:function(){return this.el.innerHTML='<a href="#clear"><b> </b></a>',this.renderClassList(),this},renderClassList:function(){this.el.classList.toggle("selected",-1===this.model.selectedIndex)}})});t.exports=a},{"app/view/base/View":66,"app/view/render/ClickableRenderer":91,"app/view/render/DefaultSelectableRenderer":93,"backbone.babysitter":"backbone.babysitter"}],80:[function(e,t,i){var n=e("underscore"),r=e("app/view/base/CanvasView"),d=2*Math.PI,p=d/48,s={amount:{lineWidth:.75,radiusOffset:0},available:{lineWidth:.75,inverse:"not-available"},"not-available":{lineWidth:.8,lineDash:[.3,.7],lineDashOffset:0},indeterminate:{lineWidth:2,lineDash:[.3,1.7],lineDashOffset:0}};t.exports=r.extend({cidPrefix:"canvasProgressMeter",className:"progress-meter canvas-progress-meter",defaultKey:"amount",defaults:{values:{amount:0,available:0,_loop:0,_stalled_arc:0,_stalled_loop:0},maxValues:{amount:1,available:1,_loop:1,_stalled_loop:1},useOpaque:!0,labelFn:function(e,t){return e/t*100|0}},properties:{stalled:{get:function(){return this._stalled},set:function(e){this._setStalled(e)}}},_setStalled:function(e){this._stalled!==e&&(this._stalled=e)},initialize:function(e){r.prototype.initialize.apply(this,arguments),this._labelFn=e.labelFn,this._stalled=!!e.stalled,this._valueStyles={},this._canvasSize=null,this._canvasOrigin=null},_needsLoop:!1,valueTo:function(e,t,i){"amount"===e&&t<this.interpolator.getCurrentValue("amount")&&(this._needsLoop=!0),r.prototype.valueTo.apply(this,arguments)},measureCanvas:function(e,t,i){this._canvasHeight=this._canvasWidth=Math.min(e,t)},updateCanvas:function(){var e;for(var t in s)(e=n.defaults({},s[t])).lineWidth*=this._canvasRatio,e.radius=(this._canvasWidth-e.lineWidth)/2,e.radiusOffset&&(e.radius+=e.radiusOffset*this._canvasRatio),n.isArray(e.lineDash)?(e.lineDash=e.lineDash.map(function(e,t,i){return e*this.radius*p},e),e.lineDashLength=e.lineDash.reduce(function(e,t,i,n){return e+t},0),e.lineDashArc=e.lineDash[0]*p):e.lineDashArc=0,this._valueStyles[t]=e;var i=this._getFontMetrics(this._fontFamily);this._baselineShift=i?(i.ascent+i.descent)/i.unitsPerEm:.7,this._baselineShift*=.5*this._fontSize,this._baselineShift=Math.round(this._baselineShift),this._ctx.restore(),this._ctx.setTransform(1,0,0,1,this._canvasWidth/2,this._canvasHeight/2),this._ctx.save()},redraw:function(e,t,i){var n,r,s,o;this._clearCanvas(-this._canvasWidth/2,-this._canvasHeight/2,this._canvasWidth,this._canvasHeight),r=t._valueData.amount,this.drawLabel(this._labelFn(r._renderedValue,r._maxVal)),e.save(),this._needsLoop&&(this._needsLoop=!1,t.valueTo("_loop",1,0),t.valueTo("_loop",0,750),t.updateValue("_loop")),o=t.getCurrentValue("_loop"),e.rotate(d*(1-o+.75));var a=0;n=this._valueStyles.amount,0<(s=o+r._renderedValue/r._maxVal)&&(a=this.drawArc(s,p,d-p,a,n),this.drawEndCap(a,n),a+=2*p),n=this._valueStyles.available;var l=(r=t._valueData.available).length||1,c=d/l,h=p+(c%p-n.lineDashArc)/2;if(Array.isArray(r))for(var u=0;u<l;u++)s=r[u]._renderedValue/(r[u]._maxVal/l),this.drawArc(s,u*c+h,(u+1)*c-h,a,n);else s=r._renderedValue/r._maxVal,this.drawArc(s,h,d-h,a,n);e.restore()},drawArc:function(e,t,i,n,r){var s,o,a,l,c,h;return n||(n=0),a=t+(s=i-t)*e,(o=Math.max(t,n))<a&&(this._ctx.save(),this.applyValueStyle(r),this._ctx.beginPath(),this._ctx.arc(0,0,r.radius,a,o,!0),this._ctx.stroke(),this._ctx.restore()),void 0!==r.inverse&&(l=this._valueStyles[r.inverse],h=a+s*(1-e),(c=Math.max(a,n))<h&&(this._ctx.save(),this.applyValueStyle(l),this._ctx.beginPath(),this._ctx.arc(0,0,l.radius,h,c,!0),this._ctx.stroke(),this._ctx.restore())),a},applyValueStyle:function(e){this._ctx.lineWidth=e.lineWidth,n.isArray(e.lineDash)&&this._ctx.setLineDash(e.lineDash),n.isNumber(e.lineDashOffset)&&(this._ctx.lineDashOffset=e.lineDashOffset)},drawNotch:function(e,t,i){var n,r,s,o;n=Math.cos(e),r=Math.sin(e),s=i.radius,o=i.radius-t,this._ctx.save(),this.applyValueStyle(i),this._ctx.lineCap="square",this._ctx.beginPath(),this._ctx.moveTo(s*n,s*r),this._ctx.lineTo(o*n,o*r),this._ctx.stroke(),this._ctx.restore()},drawEndCap:function(e,t){var i=t.radius;this._ctx.save(),this._ctx.lineWidth=t.lineWidth,this._ctx.rotate(e-2*p),this._ctx.beginPath(),this._ctx.arc(0,0,i,.5*p,2*p,!1),this._ctx.lineTo(i-p*i,0),this._ctx.closePath(),this._ctx.fill(),this._ctx.stroke(),this._ctx.restore()},drawLabel:function(e){var t=this._ctx.measureText(e).width;this._ctx.fillText(e,-.5*t,this._baselineShift,t)}})},{"app/view/base/CanvasView":62,underscore:"underscore"}],81:[function(e,t,i){var u=e("underscore"),a=e("color"),l=e("app/control/Globals"),c=e("app/model/collection/BundleCollection");function d(e,t,i){var n="";for(var r in i)n+=r+":"+i[r]+";";e.insertRule(t+"{"+n+"}",e.cssRules.length)}function p(e,t){return e+" "+t+", "+e+t}var f=["color","background","background-color"];function h(e,t,i,n,r,s,o){var a,l,c,h;(a=u.pick(i,f))["-webkit-font-smoothing"]=o?"antialiased":"auto",d(e,t,a),(a={}).color=s.rgbString(),d(e,t+" a",a),d(e,t+" .color-ln",a),(a={}).color=n.clone().mix(r,.5).rgbString(),a["border-color"]=n.clone().mix(r,.7).rgbString(),d(e,t+" .color-fg05",a),c=n.rgbString(),h=r.rgbString(),l=t+" .color-reverse",d(e,t+" .color-fg",a={color:c}),d(e,t+" .color-bg",a={"background-color":h}),a={color:h},d(e,p(l,".color-fg"),a),a={"background-color":c},d(e,p(l,".color-bg"),a),d(e,t+" .color-stroke",a={stroke:c}),d(e,t+" .color-fill",a={fill:h}),a={stroke:h},d(e,p(l,".color-stroke"),a),a={fill:c},d(e,p(l,".color-fill"),a)}var m=["box-shadow","border","border-radius"];function g(e,t,i,n,r,s,o){var a=u.pick(i,m);d(e,t+" .media-item .content",a),(a={})["background-color"]=r.clone().mix(n,.95).rgbString(),d(e,t+" .media-item .color-bg09",a),(a={})["-webkit-font-smoothing"]=o?"auto":"antialiased",a.color=r.rgbString(),a["background-color"]=r.clone().mix(n,.95).rgbString(),"border-radius"in i&&(a["border-radius"]=i["border-radius"]),d(e,t+" .media-item .placeholder",a),(a={})["text-decoration-color"]=n.clone().mix(r,.3).rgbString(),d(e,t+" .empty-item A",a)}t.exports=function(){var t,i,n,r,s;t=l.DEFAULT_COLORS,i=new a(l.DEFAULT_COLORS.color),n=new a(l.DEFAULT_COLORS["background-color"]),r=new a(l.DEFAULT_COLORS["link-color"]),s=i.luminosity()>n.luminosity();var o=document.createElement("style");o.id="colors",o.type="text/css",document.head.appendChild(o),h(o.sheet,".app",t,i,n,r,s),g(o.sheet,".carousel",t,i,n,0,s),c.each(function(e){t=e.attrs(),i=e.colors.fgColor,n=e.colors.bgColor,r=e.colors.lnColor,s=e.colors.hasDarkBg,h(o.sheet,".app."+e.get("domid"),t,i,n,r,s),g(o.sheet,".carousel."+e.get("domid"),t,i,n,0,s)})}},{"app/control/Globals":39,"app/model/collection/BundleCollection":48,color:"color",underscore:"underscore"}],82:[function(e,t,i){window.XMLHttpRequest&&window.URL&&window.Blob?t.exports=function(s,o){return new Promise(function(t,i){var n=new XMLHttpRequest;n.open("GET",s,!0),n.responseType="blob";var r=function(e){var t=new Error((0<e.target.status?"http_"+n.statusText.replace(/\s/g,"_"):e.type+"_event").toUpperCase());return t.infoCode=e.target.status,t.infoSrc=s,t.logEvent=e,t.logMessage="_loadImageAsObjectURL::"+e.type+" [reject]",t};o&&(n.onprogress=function(e){o(e.loaded/e.total,n)}),n.onload=function(e){200==n.status?t(URL.createObjectURL(n.response)):i(r(e))},n.onabort=function(e){t(void 0)},n.onerror=function(e){i(r(e))},n.ontimeout=n.onerror,n.onloadend=function(e){e&&e.type,n.onabort=n.ontimeout=n.onerror=void 0,n.onload=n.onloadend=void 0,o&&(n.onprogress=void 0)},n.send()})}:t.exports=function(e,t){return Promise.resolve(e)}},{}],83:[function(e,t,i){t.exports=function(s,o){return new Promise(function(t,i){if(s instanceof window.HTMLImageElement)if(s.complete&&(0<s.src.length||o))t(s);else{var n={load:function(e){r(),t(s)},error:function(e){var t=new Error("Loading failed ("+e.type+" event)");t.infoCode=-1,t.infoSrc=s.src,t.logEvent=e,t.logMessage="_whenImageLoads::"+e.type+" [reject]",r(),i(t)}};n.abort=n.error;var r=function(){for(var e in n)n.hasOwnProperty(e)&&s.removeEventListener(e,n[e],!1)};for(var e in n)n.hasOwnProperty(e)&&s.addEventListener(e,n[e],!1)}else i("Error: not an HTMLImageElement")})}},{}],84:[function(e,t,i){var o=e("underscore"),a=e("app/view/promise/_whenImageLoads"),l=e("app/view/promise/_loadImageAsObjectURL");t.exports=function(s){return new Promise(function(t,i){var n=s.model.get("source");if(n.has("prefetched"))s.defaultImage.src=n.get("prefetched"),a(s.defaultImage).then(function(e){t(s)});else{s.mediaState="pending";var r=n.get("original"),e=function(e,t){s.updateMediaProgress(e,r)};e=o.throttle(e,100,{leading:!0,trailing:!1}),l(r,e).then(function(e){return/^blob\:.*/.test(e)&&n.set("prefetched",e),s.defaultImage.src=e,s.defaultImage}).then(a).then(function(e){s.on("view:removed",function(){var e=n.get("prefetched");e&&/^blob\:/.test(e)&&(n.unset("prefetched",{silent:!0}),URL.revokeObjectURL(e))}),t(s)},function(e){i(e)})}})}},{"app/view/promise/_loadImageAsObjectURL":82,"app/view/promise/_whenImageLoads":83,underscore:"underscore"}],85:[function(e,t,i){var a=e("app/view/base/ViewError"),n=e("app/view/promise/whenViewIsAttached");function r(o){return new Promise(function(e,t){var i=o.parentView;if(null===i)console.error("%s::whenScrollingEnds [%s] (sync)",o.cid,"rejected",o.attached),t(new a(o,new Error("whenScrollingEnds: view has no parent")));else if(i.scrolling){var n=function(){i.off("view:scrollend",r),i.off("view:remove",s)},r=function(){n(),e(o)},s=function(){n(),t(new a(o,new Error("whenScrollingEnds: view was removed")))};i.on("view:scrollend",r),i.on("view:remove",s)}else e(o)})}t.exports=function(e){return Promise.resolve(e).then(n).then(r)}},{"app/view/base/ViewError":67,"app/view/promise/whenViewIsAttached":88}],86:[function(e,t,i){var h=e("app/view/base/ViewError");t.exports=function(l,c){return new Promise(function(t,i){var n=l.model,r=n.collection,s=function(e){return Math.abs(r.indexOf(n)-r.selectedIndex)<=c};if(s())t(l);else{var o=function(){r.off("select:one select:none",e),l.off("view:removed",a)},e=function(e){s()&&(o(),t(l))},a=function(e){o(),i(new h(e,new Error("whenSelectionDistanceIs: view was removed")))};r.on("select:one select:none",e),l.on("view:removed",a)}})}},{"app/view/base/ViewError":67}],87:[function(e,t,i){var n=e("app/view/promise/whenSelectionDistanceIs");t.exports=function(e){return n(e,1)}},{"app/view/promise/whenSelectionDistanceIs":86}],88:[function(e,t,i){t.exports=function(i){return new Promise(function(t,e){i.attached?t(i):i.on("view:attached",function(e){t(e)})})}},{}],89:[function(e,t,i){t.exports=function(t){return new Promise(function(i,e){t.invalidated?t.once("view:render:after",function(e,t){i(e)}):i(t)})}},{}],90:[function(e,t,i){var n=e("underscore"),r=e("app/view/base/View"),s=e("utils/css/getBoxEdgeStyles"),o=r.extend({cidPrefix:"carouselRenderer",tagName:"div",className:"carousel-item",template:n.template('<div class="content sizing"><%= name %></div>'),properties:{content:{get:function(){return this._content||(this._content=this.el.querySelector(".content"))}},sizing:{get:function(){return this._sizing||(this._sizing=this.el.querySelector(".sizing"))}}},initialize:function(e){if(void 0!==this.model.attr("@classname"))for(var t=this.model.attr("@classname").split(" "),i=0;i<t.length;i++)this.el.classList.add(t[i]);e.parentView&&(this.parentView=e.parentView),this.metrics={},this.metrics.content={},this.createChildren(),this.setEnabled(!!e.enabled)},createChildren:function(){this.el.innerHTML=this.template(this.model.toJSON())},getSizingEl:function(){return this._sizing||(this._sizing=this.el.querySelector(".sizing"))},getContentEl:function(){return this._content||(this._content=this.el.querySelector(".content"))},measure:function(){var e=this.getSizingEl();return this.metrics=s(this.el,this.metrics),this.metrics.content=s(this.getContentEl(),this.metrics.content),e.style.maxWidth="",e.style.maxHeight="",this.metrics.content.x=e.offsetLeft+e.clientLeft,this.metrics.content.y=e.offsetTop+e.clientTop,this.metrics.content.width=e.clientWidth,this.metrics.content.height=e.clientHeight,this},render:function(){return this.measure(),this},getSelectionDistance:function(){return Math.abs(this.model.collection.indexOf(this.model)-this.model.collection.selectedIndex)}});t.exports=o},{"app/view/base/View":66,underscore:"underscore","utils/css/getBoxEdgeStyles":121}],91:[function(e,t,i){var n=e("app/view/render/LabelRenderer").extend({cidPrefix:"clickableRenderer",events:{"click .label":function(e){e.defaultPrevented||(e.preventDefault(),this.trigger("renderer:click",this.model,e))},"click a":function(e){e.defaultPrevented||e.preventDefault()}}});t.exports=n},{"app/view/render/LabelRenderer":98}],92:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,r){var s,o,a=null!=t?t:{},l=i.helperMissing,c="function";return'<a href="#'+e.escapeExpression(typeof(o=null!=(o=i.domid||(null!=t?t.domid:t))?o:l)===c?o.call(a,{name:"domid",hash:{},data:r}):o)+'"><span class="label">'+(null!=(s=typeof(o=null!=(o=i.name||(null!=t?t.name:t))?o:l)===c?o.call(a,{name:"name",hash:{},data:r}):o)?s:"")+"</span></a>"},useData:!0})},{"hbsfy/runtime":24}],93:[function(e,t,i){var n=e("app/view/render/ClickableRenderer").extend({tagName:"li",className:"list-item",template:e("./DefaultSelectableRenderer.hbs"),initialize:function(e){this.listenTo(this.model,"selected deselected",this._renderClassList),this._renderClassList()},render:function(){return this.el.innerHTML=this.template(this.model.toJSON()),this._renderClassList(),this},_renderClassList:function(){this.el.classList.toggle("selected",this.model.selected)}});t.exports=n},{"./DefaultSelectableRenderer.hbs":92,"app/view/render/ClickableRenderer":91}],94:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,r){var s,o=null!=t?t:{},a=i.helperMissing,l="function",c=e.escapeExpression;return'<span class="label">'+c(typeof(s=null!=(s=i.name||(null!=t?t.name:t))?s:a)===l?s.call(o,{name:"name",hash:{},data:r}):s)+'</span><a href="#'+c(typeof(s=null!=(s=i.domid||(null!=t?t.domid:t))?s:a)===l?s.call(o,{name:"domid",hash:{},data:r}):s)+'"><b> </b></a>'},useData:!0})},{"hbsfy/runtime":24}],95:[function(e,t,i){var n=e("app/view/base/View"),r=e("./DotNavigationRenderer.hbs"),s=n.extend({cidPrefix:"dotRenderer",tagName:"li",className:"list-item",template:r,events:{click:function(e){e.defaultPrevented||(e.preventDefault(),this.trigger("renderer:click",this.model,e))},"click a":function(e){e.defaultPrevented||e.preventDefault()}},initialize:function(e){this.listenTo(this.model,"selected deselected",this.renderClassList),this.renderClassList()},render:function(){return this.el.innerHTML=this.template(this.model.toJSON()),this.renderClassList(),this},renderClassList:function(){this.el.classList.toggle("selected",this.model.selected)}});t.exports=s},{"./DotNavigationRenderer.hbs":94,"app/view/base/View":66}],96:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,r){var s,o=null!=t?t:{},a=i.helperMissing,l="function",c=e.escapeExpression;return'<div class="placeholder sizing"></div>\n<img class="content media-border default" alt="'+c(typeof(s=null!=(s=i.text||(null!=t?t.text:t))?s:a)===l?s.call(o,{name:"text",hash:{},data:r}):s)+'" longdesc="#desc_m'+c(typeof(s=null!=(s=i.id||(null!=t?t.id:t))?s:a)===l?s.call(o,{name:"id",hash:{},data:r}):s)+'" />\n'},useData:!0})},{"hbsfy/runtime":24}],97:[function(e,t,i){var n=e("./MediaRenderer"),r=e("./ImageRenderer.hbs"),s=n.extend({cidPrefix:"imageRenderer",className:n.prototype.className+" image-renderer",template:r,initialize:function(e){n.prototype.initialize.apply(this,arguments)},createChildren:function(){n.prototype.createChildren.apply(this,arguments),this.placeholder=this.el.querySelector(".placeholder")},render:function(){n.prototype.render.apply(this,arguments);var e=this.getDefaultImage();e.setAttribute("width",this.metrics.media.width),e.setAttribute("height",this.metrics.media.height);var t=this.getContentEl();return t.style.left=this.metrics.content.x+"px",t.style.top=this.metrics.content.y+"px",this},initializeAsync:function(){return n.prototype.initializeAsync.apply(this,arguments)}});t.exports=s},{"./ImageRenderer.hbs":96,"./MediaRenderer":99}],98:[function(e,t,i){var n=e("app/view/base/View").extend({cidPrefix:"labelRenderer",properties:{label:{get:function(){return this._label||(this._label=this.el.querySelector(".label"))}}}});t.exports=n},{"app/view/base/View":66}],99:[function(e,t,i){var n=e("underscore"),r=e("underscore.string/lpad"),s=e("app/model/item/MediaItem"),d=e("app/view/render/CarouselRenderer"),o=e("../template/ErrorBlock.hbs"),a=d.extend({cidPrefix:"mediaRenderer",className:d.prototype.className+" media-item",model:s,properties:{defaultImage:{get:function(){return this._defaultImage||(this._defaultImage=this.el.querySelector("img.default"))}},mediaState:{get:function(){return this._mediaState},set:function(e){this._setMediaState(e)}}},initialize:function(e){d.prototype.initialize.apply(this,arguments),this.metrics.media={},this.mediaState="idle",this.initializeAsync().then(this.whenInitialized).catch(this.whenInitializeError.bind(this))},initializeAsync:function(){return Promise.resolve(this).then(a.whenSelectionIsContiguous).then(a.whenScrollingEnds).then(a.whenDefaultImageLoads)},whenInitialized:function(e){return e.mediaState="ready",e.placeholder.removeAttribute("data-progress"),e},whenInitializeError:function(e){e instanceof d.ViewError||(e instanceof Error&&console.error(e.stack),this.renderMediaError(e),this.placeholder.removeAttribute("data-progress"),this.mediaState="error",console.error("%s::initializeAsync [%s (caught)]: %s",this.cid,e.name,e.info&&e.info.logMessage||e.message),e.logEvent&&e.logEvent)},renderMediaError:function(e){this.placeholder.innerHTML=e?o(e):""},updateMediaProgress:function(e,t){n.isNumber(e)&&this.placeholder.setAttribute("data-progress",r(Math.floor(100*e),2,"0"))},getDefaultImage:function(){return this.defaultImage},createChildren:function(){this.el.innerHTML=this.template(this.model.toJSON())},measure:function(){var e,t,i,n,r,s,o,a,l,c,h,u;return d.prototype.measure.apply(this,arguments),r=(u=this.metrics.content).x,s=u.y,i=u.width,n=u.height,i-=c=u.paddingLeft+u.paddingRight+u.borderLeftWidth+u.borderRightWidth,n-=h=u.paddingTop+u.paddingBottom+u.borderTopWidth+u.borderBottomWidth,e=this.model.get("source").get("w"),t=this.model.get("source").get("h"),e<i&&t<n?(l=1,o=e,a=t,this.metrics.fitDirection="both"):i/n<e/t?(l=(o=i)/e,a=Math.round(l*t),this.metrics.fitDirection="width"):(l=(a=n)/t,o=Math.round(l*e),this.metrics.fitDirection="height"),this.metrics.content.x=r,this.metrics.content.y=s,this.metrics.content.width=o+c,this.metrics.content.height=a+h,this.metrics.media.x=r+u.paddingLeft+u.borderLeftWidth,this.metrics.media.y=s+u.paddingTop+u.borderTopWidth,this.metrics.media.width=o,this.metrics.media.height=a,this.metrics.media.scale=l,this},render:function(){this.measure();var e=this.getSizingEl();return e.style.maxWidth=this.metrics.content.width+"px",e.style.maxHeight=this.metrics.content.height+"px",this.el.setAttribute("data-fit-dir",this.metrics.fitDirection),this},_mediaStateEnum:["idle","pending","ready","error"],_setMediaState:function(e){if(-1===this._mediaStateEnum.indexOf(e))throw new Error("Argument "+e+" invalid. Must be one of: "+this._mediaStateEnum.join(", "));this._mediaState!==e&&(this._mediaState&&this.el.classList.remove(this._mediaState),this.el.classList.add(e),this._mediaState=e,this.trigger("media:"+e))}},{LOG_TO_SCREEN:!0,whenSelectionIsContiguous:e("app/view/promise/whenSelectionIsContiguous"),whenScrollingEnds:e("app/view/promise/whenScrollingEnds"),whenDefaultImageLoads:e("app/view/promise/whenDefaultImageLoads")});t.exports=a},{"../template/ErrorBlock.hbs":107,"app/model/item/MediaItem":55,"app/view/promise/whenDefaultImageLoads":84,"app/view/promise/whenScrollingEnds":85,"app/view/promise/whenSelectionIsContiguous":87,"app/view/render/CarouselRenderer":90,color:"color",underscore:"underscore","underscore.string/lpad":33}],100:[function(u,d,e){(function(e){var n,r,t=u("underscore"),i=u("app/view/render/MediaRenderer"),s=u("app/view/component/PlayToggleSymbol"),o=u("utils/prefixedProperty"),a=u("utils/prefixedEvent"),l=o("visibilityState",document),c=a("visibilitychange",document,"hidden"),y=u("color"),w=u("utils/canvas/bitmap/stackBlurRGB"),b=u("utils/canvas/bitmap/getAverageRGB"),A=null,h=i.extend({cidPrefix:"playableRenderer",className:i.prototype.className+" playable-renderer",properties:{mediaPaused:{get:function(){return this._isMediaPaused()}},mediaWaiting:{get:function(){return this._isMediaWaiting()}},playbackRequested:{get:function(){return this._playbackRequested},set:function(e){this._setPlaybackRequested(e)}},overlay:{get:function(){return this._overlay||(this._overlay=this.el.querySelector(".overlay"))}},playToggle:{get:function(){return this._playToggle||(this._playToggle=this.el.querySelector(".play-toggle"))}},playToggleHitarea:{get:function(){return this._playToggleHitarea||(this._playToggleHitarea=this.el.querySelector(".play-toggle-hitarea"))}}},initialize:function(e){i.prototype.initialize.apply(this,arguments),t.bindAll(this,"_onPlaybackToggle","_onVisibilityChange"),this._setPlaybackRequested(this._playbackRequested),this._toggleWaiting=t.throttle(this._toggleWaiting,1e3,{leading:!1,trailing:!0})},setEnabled:function(e){i.prototype.setEnabled.apply(this,arguments),this._validatePlayback(),this._playToggleSymbol&&(this._playToggleSymbol.enabled=this.enabled)},addSelectionListeners:function(){if("initialized"!=this._viewPhase)throw new Error(this.cid+"::addSelectionListeners called while "+this._viewPhase);this.listenTo(this.model,"selected",this._onModelSelected),this.listenTo(this.model,"deselected",this._onModelDeselected),this.model.selected&&this._onModelSelected()},_onModelSelected:function(){this.cid,this._playbackRequested,this._toggleEvent,this.listenTo(this,"view:parentChange",this._onParentChange),this.parentView&&this._onParentChange(this,this.parentView,null),this._playToggleSymbol&&(this._playToggleSymbol.paused=!this.enabled),this._addDOMListeners(),this._validatePlayback()},_onModelDeselected:function(){this.cid,this._playbackRequested,this._toggleEvent,this.stopListening(this,"view:parentChange",this._onParentChange),this.parentView&&this._onParentChange(this,null,this.parentView),this._playToggleSymbol&&(this._playToggleSymbol.paused=!0),this._removeDOMListeners(),this.togglePlayback(!1)},_onParentChange:function(e,t,i){i&&this.stopListening(i,"view:scrollstart view:scrollend",this._onScrollChange),t&&this.listenTo(t,"view:scrollstart view:scrollend",this._onScrollChange)},_onScrollChange:function(){if(null===this.parentView)throw this.togglePlayback(!1),new Error(this.cid+"::_onScrollChange parentView is null");this._validatePlayback()},_addDOMListeners:function(){this.listenTo(this,"view:removed",this._removeDOMListeners),document.addEventListener(c,this._onVisibilityChange,!1),this.playToggleHitarea.addEventListener(this._toggleEvent,this._onPlaybackToggle,!0)},_removeDOMListeners:function(){this.stopListening(this,"view:removed",this._removeDOMListeners),document.removeEventListener(c,this._onVisibilityChange,!1),this.playToggleHitarea.removeEventListener(this._toggleEvent,this._onPlaybackToggle,!0)},_onVisibilityChange:function(e){this._validatePlayback()},_toggleEvent:i.CLICK_EVENT,_onPlaybackToggle:function(e){!this.enabled||e.defaultPrevented||e.button||(e.preventDefault(),this.playbackRequested=!this.playbackRequested)},_playbackRequested:null,_setPlaybackRequested:function(e){this._playbackRequested=e;var t=this.content.classList;t.toggle("playing",!0===e),t.toggle("paused",!1===e),t.toggle("requested",!0===e||!1===e),this._validatePlayback()},togglePlayback:function(e){t.isBoolean(e)&&e!==this._isMediaPaused()||((e=this._isMediaPaused())?this._playMedia():this._pauseMedia(),this._renderPlaybackState())},_canResumePlayback:function(){return!(!(this.enabled&&this.model.selected&&this.playbackRequested&&"ready"===this.mediaState&&this.attached&&null!==this.parentView)||this.parentView.scrolling||"hidden"==document[l])},_validatePlayback:function(e){0==arguments.length||e?this.togglePlayback(this._canResumePlayback()):this.togglePlayback(!1)},_renderPlaybackState:function(){this.progressMeter&&(this.progressMeter.stalled=this._isMediaWaiting()),this.playbackRequested?this._isMediaWaiting()?this._setPlayToggleSymbol("waiting"):this._setPlayToggleSymbol("play"):this.content.classList.contains("started")?this._setPlayToggleSymbol("pause"):this._setPlayToggleSymbol("play"),this.content.classList.toggle("playing",this.playbackRequested),this.content.classList.toggle("paused",!this.playbackRequested),this.content.classList.toggle("waiting",this._isMediaWaiting())},_playToggleSymbol:null,_setPlayToggleSymbol:function(e){null===this._playToggleSymbol&&(this._playToggleSymbol=new s({el:this.el.querySelector(".play-toggle-symbol")})),this.cid,this.enabled,this.parentView.collection.selected,this.model,this._playToggleSymbol.paused=!(this.enabled&&this.parentView.collection.selected===this.model),this._playToggleSymbol.symbolName=e},_isWaiting:!1,_isMediaWaiting:function(){return this._isWaiting},_toggleWaiting:function(e){0===arguments.length&&(e=!this._isWaiting),this._isWaiting!==e&&(this._isWaiting=e,this._renderPlaybackState())},_isMediaPaused:function(){return console.warn("%s::_isMediaPaused Not implemented",this.cid),!0},_playMedia:function(){console.warn("%s::_playMedia Not implemented",this.cid)},_pauseMedia:function(){console.warn("%s::_pauseMedia Not implemented",this.cid)},updateOverlay:function(e,t,i){},_drawMediaElement:function(e,t,i){t||(t=this.defaultImage),i||(i={x:0,y:0,width:this.metrics.media.width,height:this.metrics.media.height});var n=this.model.get("source").get("w"),r=this.model.get("source").get("h"),s=n/this.metrics.media.width,o=r/this.metrics.media.height,a={x:Math.max(0,i.x*s),y:Math.max(0,i.y*o),width:Math.min(n,i.width*s),height:Math.min(r,i.height*o)};return e.canvas.width=i.width,e.canvas.height=i.height,e.clearRect(0,0,i.width,i.height),e.drawImage(t,a.x,a.y,a.width,a.height,0,0,i.width,i.height),e},_updateOverlay:function(e,t,i){i||(i=t);var n=i.offsetLeft,r=i.offsetTop,s=i.offsetWidth,o=i.offsetHeight;if(void 0!==n&&void 0!==r&&void 0!==s&&void 0!==o){var a,l,c,h={x:n-20,y:r-20,width:s+40,height:o+40},u=this.model.get("source").get("w"),d=this.model.get("source").get("h"),p=u/this.metrics.media.width,f=d/this.metrics.media.height,m={x:Math.max(0,h.x*p),y:Math.max(0,h.y*f),width:Math.min(u,h.width*p),height:Math.min(d,h.height*f)};null===A&&(A=document.createElement("canvas")),(a=A).width===h.width&&a.height===h.height||(a.width=h.width,a.height=h.height),(l=a.getContext("2d")).clearRect(0,0,h.width,h.height),l.drawImage(e,m.x,m.y,m.width,m.height,0,0,h.width,h.height),c=l.getImageData(0,0,h.width,h.height);var g=y().rgb(b(c));t.classList.toggle("over-dark",g.dark()),this.fgColor||(this.fgColor=new y(this.model.attr("color"))),this.bgColor||(this.bgColor=new y(this.model.attr("background-color")));var v={radius:20},_=this.fgColor.luminosity()<this.bgColor.luminosity();v.x00=_?this.fgColor.clone().lighten(.5):this.bgColor.clone().darken(.5),v.xFF=_?this.bgColor.clone().lighten(.5):this.fgColor.clone().darken(.5),w(c,{radius:40}),l.putImageData(c,0,0),t.style.backgroundOrigin="border-box",t.style.backgroundClip="content-box",t.style.backgroundSize="100%",t.style.backgroundImage="url("+a.toDataURL()+")"}}});e&&(n=h,r=u("underscore.string/dasherize"),h=n.extend({initialize:function(){var e=n.prototype.initialize.apply(this,arguments);return this._playbackRequestedDefault=this.playbackRequested,e},_onPlaybackToggle:function(e){var t=n.prototype._onPlaybackToggle.apply(this,arguments),i={hitType:"event",eventCategory:r(this.cidPrefix),eventAction:this.playbackRequested?"play":"pause",eventLabel:this.model.get("text")};return this._playbackRequestedDefault&&(i.eventAction+="-autoplay"),window.ga("send",i),t}})),d.exports=h}).call(this,!0)},{"app/view/component/PlayToggleSymbol":77,"app/view/render/MediaRenderer":99,color:"color",underscore:"underscore","underscore.string/dasherize":28,"utils/canvas/bitmap/getAverageRGB":116,"utils/canvas/bitmap/stackBlurRGB":119,"utils/prefixedEvent":127,"utils/prefixedProperty":128}],101:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,r){var s,o=null!=t?t:{},a=i.helperMissing,l="function",c=e.escapeExpression;return'<div class="placeholder sizing"></div>\n<div class="content">\n\t<div class="media-border content-size"></div>\n\t<div class="controls content-size">\n\t\t<canvas class="progress-meter"></canvas>\n\t</div>\n\t<div class="sequence media-size">\n\t\t<img class="sequence-step current default" alt="'+c(typeof(s=null!=(s=i.text||(null!=t?t.text:t))?s:a)===l?s.call(o,{name:"text",hash:{},data:r}):s)+'" longdesc="#desc_m'+c(typeof(s=null!=(s=i.id||(null!=t?t.id:t))?s:a)===l?s.call(o,{name:"id",hash:{},data:r}):s)+'" />\n\t</div>\n\t<div class="overlay media-size play-toggle-hitarea">\n\t\t<div class="play-toggle">\n\t\t\t<canvas class="play-toggle-symbol"/>\n\t\t</div>\n\t</div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":24}],102:[function(e,t,i){var n=e("underscore"),r=e("backbone.babysitter"),s=e("app/view/base/View"),l=e("app/view/render/PlayableRenderer"),o=e("app/control/Globals"),a=e("app/view/component/ProgressMeter"),c=e("utils/Timer"),h=e("app/view/promise/_whenImageLoads"),u=e("app/view/promise/_loadImageAsObjectURL"),d=e("app/view/promise/whenSelectionDistanceIs"),p=e("../template/ErrorBlock.hbs"),f=2*o.TRANSITION_DURATION+o.TRANSITION_DELAY_INTERVAL,m=6*o.TRANSITION_DURATION+o.TRANSITION_DELAY_INTERVAL,g=s.extend({cidPrefix:"sequenceStepRenderer",className:"sequence-step",tagName:"img",properties:{ready:{get:function(){return this._ready}}},initialize:function(e){!this.el.hasAttribute("alt")&&this.el.setAttribute("alt",this.model.get("src")),this.model.has("prefetched")?this._renderPrefetched():this.listenTo(this.model,"change:prefetched",this._renderPrefetched),this.listenTo(this.model,"selected deselected",this._renderSelection),this._renderSelection()},_renderSelection:function(){this.el.classList.toggle("current",!!this.model.selected)},_renderPrefetched:function(){var e=this.model.get("prefetched");e!==this.el.src&&(this.el.src=e),h(this.el).then(function(e){this.requestAnimationFrame(function(e){this._setReady(!0)})}.bind(this),function(e){throw e instanceof Error||(e=new Error("cannot load prefetched url")),e}.bind(this))},_ready:!1,_setReady:function(e){this._ready!==e&&(this._ready=!!e,this.trigger("renderer:ready",this))},render:function(){return this.cid,this}}),v=s.extend({className:"sequence-step error",cidPrefix:"sourceErrorRenderer",template:p,ready:!0,initialize:function(e){this.listenTo(this.model,"selected deselected",function(){this.el.classList.toggle("current",!!this.model.selected)})},render:function(){return this.el.classList.toggle("current",!!this.model.selected),this.el.innerHTML=this.template(this.model.get("error")),this}}),_=g,y=l.extend({cidPrefix:"sequenceRenderer",className:l.prototype.className+" sequence-renderer",template:e("./SequenceRenderer.hbs"),initialize:function(){this.sources=this.model.get("sources"),l.prototype.initialize.apply(this,arguments)},initializeAsync:function(){return l.prototype.initializeAsync.apply(this,arguments).then(function(e){return e.whenAttached()}).then(function(e){return e.initializePlayable(),e.updateOverlay(e.defaultImage,e.playToggle),e.addSelectionListeners(),e})},whenInitialized:function(e){var t=l.prototype.whenInitialized.apply(this,arguments);return e._validatePlayback(),t},createChildren:function(){l.prototype.createChildren.apply(this,arguments),this.placeholder=this.el.querySelector(".placeholder"),this.sequence=this.content.querySelector(".sequence"),this.content.classList.add("started");var e,t=this.model.attrs();e=n.pick(t,"box-shadow","border","border-radius"),n.extend(this.content.querySelector(".media-border").style,e),e=n.pick(t,"border-radius"),n.extend(this.sequence.style,e),n.extend(this.placeholder.style,e),this.sources.select(this.model.get("source")),this.itemViews=new r,this.itemViews.add(new _({el:this.getDefaultImage(),model:this.model.get("source")}))},render:function(){var e,t,i,n,r;l.prototype.render.apply(this,arguments);var s,o,a=this.content;for(n=this.metrics.media.width+"px",r=this.metrics.media.height+"px",e=this.el.querySelectorAll(".media-size"),i=0;i<e.length;i++)(t=e.item(i)).style.width=n,t.style.height=r;return a.style.width=n,a.style.height=r,s=this.metrics.content.x+"px",o=this.metrics.content.y+"px",a.style.left=s,a.style.top=o,(t=this.el.querySelector(".controls")).style.width=this.metrics.content.width+"px",t.style.height=this.metrics.content.height+"px",this},initializePlayable:function(){d(this,0).then(this._preloadAllItems,function(e){return e instanceof s.ViewError?void 0:e}),this._sequenceInterval=Math.max(parseInt(this.model.attr("@sequence-interval")),f)||m,this.timer=new c,this.listenTo(this,"view:removed",function(){this.timer.stop(),this.stopListening(this.timer)}),this.listenTo(this.timer,{start:this._onTimerStart,resume:this._onTimerResume,pause:this._onTimerPause,end:this._onTimerEnd}),this._sourceProgressByIdx=this.sources.map(function(){return 0}),this._sourceProgressByIdx[0]=1,this.progressMeter=new a({el:this.el.querySelector(".progress-meter"),values:{available:this._sourceProgressByIdx.concat()},maxValues:{amount:this.sources.length,available:this.sources.length},color:this.model.attr("color"),labelFn:this._progressLabelFn.bind(this)})},_progressLabelFn:function(){return!1===this.playbackRequested?o.PAUSE_CHAR:this.sources.selectedIndex+1+"/"+this.sources.length},_preloadAllItems:function(e){return e.once("view:remove",function(){var r={silent:!0};e.sources.forEach(function(e,t,i){var n=e.get("prefetched");n&&/^blob\:/.test(n)&&(e.set("progress",0,r),e.unset("prefetched",r),URL.revokeObjectURL(n))})}),e.sources.reduce(function(e,n,r,t){return e.then(function(i){if("disposed"===i._viewPhase)return i;if(n.has("prefetched"))return i._updateItemProgress(1,r),i;var t=function(e,t){i._updateItemProgress(t,r)};return i.listenTo(n,"change:progress",t),i.once("view:remove",function(e){e.stopListening(n,"change:progress",t)}),u(n.get("original"),function(e,t){"disposed"===i._viewPhase?t.abort():n.set("progress",e)}).then(function(e){return n.set({progress:e?1:0,prefetched:e}),i},function(e){return n.set({progress:0,error:e}),i})})},Promise.resolve(e))},_updateItemProgress:function(e,t){this._sourceProgressByIdx[t]=e,this.progressMeter&&this.progressMeter.valueTo("available",this._sourceProgressByIdx,300)},_playbackRequested:!0,_paused:!0,_isMediaPaused:function(){return this._paused},_playMedia:function(){this._paused&&(this._paused=!1,this._isMediaWaiting()||(this.timer.status===c.PAUSED?this.timer.start():this.timer.start(this._sequenceInterval)))},_pauseMedia:function(){this._paused||(this._paused=!0,this.timer.status===c.STARTED&&this.timer.pause())},_onTimerStart:function(e){var t,i;t=-1===this.sources.selectedIndex?this.model.get("source"):this.sources.followingOrFirst(),this.sources.select(t),this.progressMeter.valueTo("amount",this.sources.selectedIndex+1,e),this.content.classList.toggle("playback-error",t.has("error")),i=this.itemViews.findByModel(t),t.has("error")||null===i||this.updateOverlay(i.el,this.playToggle),this._getItemRenderer(this.sources.followingOrFirst())},_onTimerResume:function(e){this.progressMeter.valueTo("amount",this.sources.selectedIndex+1,e)},_onTimerPause:function(e){this.progressMeter.valueTo("amount",this.progressMeter.getRenderedValue("amount"),0)},_onTimerEnd:function(){var e,t,i=this;e=this.sources.followingOrFirst(),t=this._getItemRenderer(e);var n=function(e){return i.setImmediate(function(){i._paused||i.timer.start(i._sequenceInterval)}),e};e.has("prefetched")?h(t.el).then(n,n):e.has("error")?n():(this._toggleWaiting(!0),this.listenToOnce(e,"change:prefetched change:error",function(e){this._toggleWaiting(!1),h(t.el).then(n,n)}))},_getItemRenderer:function(e){var t=this.itemViews.findByModel(e);t||(t=new(e.has("error")?v:_)({model:e}),this.itemViews.add(t),this.sequence.appendChild(t.render().el));return t}});t.exports=y},{"../template/ErrorBlock.hbs":107,"./SequenceRenderer.hbs":101,"app/control/Globals":39,"app/view/base/View":66,"app/view/component/ProgressMeter":78,"app/view/promise/_loadImageAsObjectURL":82,"app/view/promise/_whenImageLoads":83,"app/view/promise/whenSelectionDistanceIs":86,"app/view/render/PlayableRenderer":100,"backbone.babysitter":"backbone.babysitter",underscore:"underscore","underscore.string/capitalize":27,"underscore.string/lpad":33,"utils/Timer":110}],103:[function(e,t,i){var n=e("hbsfy/runtime"),r=e("../template/svg/FullscreenSymbol.hbs");n.registerPartial("../template/svg/FullscreenSymbol.hbs",r),t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,r){var s,o;return'<div class="placeholder sizing"></div>\n<div class="content media-border">\n\t<div class="controls content-size">\n\t\t<canvas class="progress-meter"></canvas>\n\t\t<a class="fullscreen-toggle" href="javascript:(void 0)">\n'+(null!=(s=e.invokePartial(n["../template/svg/FullscreenSymbol.hbs"],t,{name:"../template/svg/FullscreenSymbol.hbs",data:r,indent:"\t\t\t",helpers:i,partials:n,decorators:e.decorators}))?s:"")+'\t\t</a>\n\t</div>\n\t<div class="crop-box media-size">\n\t\t<video width="240" height="180"></video>\n\t\t<img class="poster default" alt="'+e.escapeExpression("function"==typeof(o=null!=(o=i.text||(null!=t?t.text:t))?o:i.helperMissing)?o.call(null!=t?t:{},{name:"text",hash:{},data:r}):o)+'" width="240" height="180" />\n\t</div>\n\t<div class="overlay media-size play-toggle-hitarea">\n\t\t<div class="play-toggle">\n\t\t\t<canvas class="play-toggle-symbol"/>\n\t\t</div>\n\t</div>\n</div>\n'},usePartial:!0,useData:!0})},{"../template/svg/FullscreenSymbol.hbs":109,"hbsfy/runtime":24}],104:[function(e,t,i){var h=e("underscore"),n=e("app/control/Globals"),u=e("app/view/render/PlayableRenderer"),r=e("app/view/component/ProgressMeter"),s=e("utils/prefixedEvent")("fullscreenchange",document),o=function(e){return isNaN(e)?"":3600<=e?(e/3600|0)+"H":60<=e?(e/60|0)+"M":(0|e)+"S"},c=n.VIDEO_CROP_PX,a=1200,l=u.extend({cidPrefix:"videoRenderer",className:u.prototype.className+" video-renderer",template:e("./VideoRenderer.hbs"),properties:{fullscreenToggle:{get:function(){return this._fullscreenToggle||(this._fullscreenToggle=this.el.querySelector(".fullscreen-toggle"))}}},initialize:function(e){u.prototype.initialize.apply(this,arguments),h.bindAll(this,"_updatePlaybackState","_updateCurrTimeValue","_updateBufferedValue","_onMediaError","_onMediaEnded","_onMediaPlayingOnce","_onFullscreenChange","_onFullscreenToggle"),h.bindAll(this,"_playbackTimeoutFn_playing","_playbackTimeoutFn_waiting")},createChildren:function(){u.prototype.createChildren.apply(this,arguments),this.placeholder=this.el.querySelector(".placeholder"),this.video=this.content.querySelector("video"),this.video.preload="none",this.video.loop=void 0!==this.model.attr("@video-loop"),this.video.src=this.findPlayableSource(this.video)},measure:function(){u.prototype.measure.apply(this,arguments),this.metrics.media.height+=2*c,this.metrics.content.height+=2*c},render:function(){var e,t,i,n,r;u.prototype.render.apply(this,arguments);var s,o,a=this.defaultImage,l=this.content;for(n=this.metrics.media.width+"px",r=this.metrics.media.height+"px",e=this.el.querySelectorAll(".media-size"),i=0;i<e.length;i++)(t=e.item(i)).style.width=n,t.style.height=r;return l.style.width=n,l.style.height=this.metrics.media.height+c+"px",s=this.metrics.content.x+"px",o=this.metrics.content.y+"px",l.style.left=s,l.style.top=o,(t=this.el.querySelector(".controls")).style.width=this.metrics.content.width+"px",t.style.height=this.metrics.content.height+"px",this.video.setAttribute("width",this.metrics.media.width),this.video.setAttribute("height",this.metrics.media.height-2*c),a.setAttribute("width",this.metrics.media.width),a.setAttribute("height",this.metrics.media.height-2*c),this},initializeAsync:function(){return Promise.resolve(this).then(u.whenSelectionIsContiguous).then(u.whenScrollingEnds).then(function(e){return e.cid,e.whenAttached()}).then(function(t){return t.cid,Promise.all([t.whenVideoHasMetadata(t),u.whenDefaultImageLoads(t)]).then(function(e){return t.cid,Promise.resolve(t)},function(e){return t.cid,Promise.reject(e)})}).then(function(e){return e.cid,e.initializePlayable(),e.updateOverlay(e.defaultImage,e.playToggle),e.addSelectionListeners(),e})},initializePlayable:function(){this.addMediaListeners(),this.progressMeter=new r({el:this.el.querySelector(".progress-meter"),maxValues:{amount:this.video.duration,available:this.video.duration},color:this.model.attr("color"),labelFn:this._progressLabelFn.bind(this)}),this._renderPlaybackState()},_progressLabelFn:function(e,t){return!this._started||this.video.ended||isNaN(e)?o(t):this.playbackRequested?o(t-e):n.PAUSE_CHAR},whenVideoHasMetadata:function(c){return new Promise(function(t,i){var n=c.video,r={loadedmetadata:function(e){e&&a(),c.cid,e&&e.type,t(c)},abort:function(e){e&&a(),i(new u.ViewError(c,new Error("whenVideoHasMetadata: view was removed")))},error:function(e){var t;e&&a(),n.error?(t=new Error(h.invert(MediaError)[n.error.code])).infoCode=n.error.code:t=new Error("Unspecified error"),t.infoSrc=n.src,t.logMessage="whenVideoHasMetadata: "+t.name+" "+t.infoSrc,t.logEvent=e,i(t)}};if(n.error)r.error();else if(n.readyState>=HTMLMediaElement.HAVE_METADATA)r.loadedmetadata();else{var e=n.querySelectorAll("source"),s=0<e.length?e.item(e.length-1):n,o=s===n,a=function(){for(var e in s.removeEventListener("error",r.error,o),r)"error"!==e&&r.hasOwnProperty(e)&&n.removeEventListener(e,r[e],!1)};for(var l in s.addEventListener("error",r.error,o),r)"error"!==l&&r.hasOwnProperty(l)&&n.addEventListener(l,r[l],!1);c.cid,n.preload,n.setAttribute("preload","metadata"),n.setAttribute("playsinline","true")}})},findPlayableSource:function(t){var e=this.model.get("sources").find(function(e){return/^video\//.test(e.get("mime"))&&""!=t.canPlayType(e.get("mime"))});return e?e.get("original"):""},_playbackRequested:!1,_isMediaPaused:function(){return this.video.paused},_playMedia:function(){this.video.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&0==this.video.seekable.length?(console.warn(this.cid,"WTF! got video data, but cannot seek, calling load()"),this.video.load()):this.video.ended&&(this.video.currentTime=this.video.seekable.start(0)),this.video.play()},_pauseMedia:function(){this.video.pause()},_addDOMListeners:function(){u.prototype._addDOMListeners.apply(this,arguments),this.fullscreenToggle.addEventListener(this._toggleEvent,this._onFullscreenToggle,!0)},_removeDOMListeners:function(){u.prototype._removeDOMListeners.apply(this,arguments),this.fullscreenToggle.removeEventListener(this._toggleEvent,this._onFullscreenToggle,!0)},addListener:function(e,t,i,n){"string"==typeof t&&(t=t.split(" "));for(var r=0;r<t.length;r++)e.addEventListener(t[r],i,!!n)},removeListener:function(e,t,i,n){"string"==typeof t&&(t=t.split(" "));for(var r=0;r<t.length;r++)e.removeEventListener(t[r],i,!!n)},addMediaListeners:function(){this._started||this.addListener(this.video,this.playingOnceEvents,this._onMediaPlayingOnce),this.addListener(this.video,this.updatePlaybackEvents,this._updatePlaybackState),this.addListener(this.video,this.updateBufferedEvents,this._updateBufferedValue),this.addListener(this.video,this.updateCurrTimeEvents,this._updateCurrTimeValue),this.video.addEventListener("ended",this._onMediaEnded,!1),this.video.addEventListener("error",this._onMediaError,!0),this.on("view:removed",this.removeMediaListeners,this)},removeMediaListeners:function(){this.off("view:removed",this.removeMediaListeners,this),this._started||this.removeListener(this.video,this.playingOnceEvents,this._onMediaPlayingOnce),this.removeListener(this.video,this.updatePlaybackEvents,this._updatePlaybackState),this.removeListener(this.video,this.updateBufferedEvents,this._updateBufferedValue),this.removeListener(this.video,this.updateCurrTimeEvents,this._updateCurrTimeValue),this.video.removeEventListener("ended",this._onMediaEnded,!1),this.video.removeEventListener("error",this._onMediaError,!0)},_onMediaError:function(e){this.removeMediaListeners(),this.removeSelectionListeners(),this._started=!1,this.content.classList.remove("started"),this.mediaState="error",this.playbackRequested=!1,this._exitFullscreen()},_onMediaEnded:function(e){this.playbackRequested=!1,this._exitFullscreen()},_exitFullscreen:function(){this.video.webkitDisplayingFullscreen&&this.video.webkitExitFullscreen(),document.fullscreenElement===this.video&&this.video.exitFullscreen()},playingOnceEvents:"playing waiting",_onMediaPlayingOnce:function(e){this.removeListener(this.video,this.playingOnceEvents,this._onMediaPlayingOnce),this._started||(this._started=!0,this.content.classList.add("started"))},updateCurrTimeEvents:"playing waiting pause timeupdate seeked".split(" "),_updateCurrTimeValue:function(e){this.progressMeter&&this.progressMeter.valueTo("amount",this.video.currentTime,0)},updatePlaybackEvents:"playing waiting pause timeupdate seeked".split(" "),_isPlaybackWaiting:!1,_playbackStartTS:-1,_playbackStartTC:-1,_updatePlaybackState:function(e){var t=!1;if(window.clearTimeout(this._playbackTimeoutID),this._playbackTimeoutID=-1,this.playbackRequested)switch("timeupdate"!==e.type&&(this._playbackStartTS=e.timeStamp,this._playbackStartTC=this.video.currentTime),e.type){case"timeupdate":100<Math.abs(e.timeStamp-this._playbackStartTS-1e3*(this.video.currentTime-this._playbackStartTC))?(this._playbackStartTS=e.timeStamp,this._playbackStartTC=this.video.currentTime,this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_waiting,a),t=!0):(this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_playing,a),t=!1);break;case"seeked":case"playing":this._playbackStartTS=e.timeStamp,this._playbackStartTC=this.video.currentTime,this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_playing,a);case"pause":t=!1;break;case"waiting":t=!0}else t=!1;this._toggleWaiting(t)},_playbackTimeoutID:-1,_playbackTimeoutFn_playing:function(){this._playbackTimeoutID=-1,this._toggleWaiting(!0)},_playbackTimeoutFn_waiting:function(){100<1e3*(this.video.currentTime-this._playbackStartTC)?this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_waiting,a):(this._playbackStartTS+=a,this._playbackStartTC=this.video.currentTime,this._playbackTimeoutID=window.setTimeout(this._playbackTimeoutFn_playing,a),this._toggleWaiting(!1))},_renderPlaybackState:function(){this._started&&this.updateOverlay(this.video,this.playToggle),u.prototype._renderPlaybackState.apply(this,arguments),this.content.classList.toggle("ended",this.video.ended)},updateBufferedEvents:"progress canplay canplaythrough play playing",_updateBufferedValue:function(e){if(this._started){var t=this.video.buffered;0<t.length&&(this._bufferedValue=t.end(t.length-1),this.progressMeter&&this.video.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&this.progressMeter.valueTo("available",this._bufferedValue,300))}},_onFullscreenToggle:function(e){if(!e.defaultPrevented&&!e.button&&this.model.selected)try{document.hasOwnProperty("fullscreenElement")&&document.fullscreenElement!==this.video?(document.addEventListener(s,this._onFullscreenChange,!1),this.video.requestFullscreen()):this.video.webkitSupportsFullscreen&&!this.video.webkitDisplayingFullscreen&&(this.video.addEventListener("webkitbeginfullscreen",this._onFullscreenChange,!1),this.video.webkitEnterFullScreen())}catch(e){this.video.controls=!1,console.error(e)}},_onFullscreenChange:function(e){switch(e.type){case s:var t=document.fullscreenElement===this.video;(this.video.controls=t)||document.removeEventListener(s,this._onFullscreenChange,!1);break;case"webkitbeginfullscreen":this.video.controls=!0,this.video.removeEventListener("webkitbeginfullscreen",this._onFullscreenChange,!1),this.video.addEventListener("webkitendfullscreen",this._onFullscreenChange,!1);break;case"webkitendfullscreen":this.video.controls=!1,this.video.removeEventListener("webkitendfullscreen",this._onFullscreenChange,!1)}}});t.exports=l},{"./VideoRenderer.hbs":103,"app/control/Globals":39,"app/view/component/ProgressMeter":78,"app/view/render/PlayableRenderer":100,color:"color",underscore:"underscore","underscore.string/lpad":33,"underscore.string/rpad":35,"utils/event/mediaEventsEnum":125,"utils/prefixedEvent":127}],105:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,r){var s,o,a=null!=t?t:{},l=i.helperMissing,c="function";return'<div id="desc_b'+e.escapeExpression(typeof(o=null!=(o=i.id||(null!=t?t.id:t))?o:l)===c?o.call(a,{name:"id",hash:{},data:r}):o)+'" class="content sizing mdown">'+(null!=(s=typeof(o=null!=(o=i.desc||(null!=t?t.desc:t))?o:l)===c?o.call(a,{name:"desc",hash:{},data:r}):o)?s:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":24}],106:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,r){var s,o,a=null!=t?t:{},l=i.helperMissing,c="function";return'<div id="desc_m'+e.escapeExpression(typeof(o=null!=(o=i.id||(null!=t?t.id:t))?o:l)===c?o.call(a,{name:"id",hash:{},data:r}):o)+'" class="content sizing"><p>'+(null!=(s=typeof(o=null!=(o=i.name||(null!=t?t.name:t))?o:l)===c?o.call(a,{name:"name",hash:{},data:r}):o)?s:"")+"</p>"+(null!=(s=typeof(o=null!=(o=i.sub||(null!=t?t.sub:t))?o:l)===c?o.call(a,{name:"sub",hash:{},data:r}):o)?s:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":24}],107:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({1:function(e,t,i,n,r){var s;return"\t\t<p><code>"+e.escapeExpression("function"==typeof(s=null!=(s=i.infoSrc||(null!=t?t.infoSrc:t))?s:i.helperMissing)?s.call(null!=t?t:{},{name:"infoSrc",hash:{},data:r}):s)+"</code></p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,i,n,r){var s,o,a=null!=t?t:{},l=i.helperMissing,c="function",h=e.escapeExpression;return'<div class="error-title color-fg color-reverse">'+h(typeof(o=null!=(o=i.name||(null!=t?t.name:t))?o:l)===c?o.call(a,{name:"name",hash:{},data:r}):o)+'</div>\n<div class="error-message color-fg">\n\t<p><strong>'+h(typeof(o=null!=(o=i.name||(null!=t?t.name:t))?o:l)===c?o.call(a,{name:"name",hash:{},data:r}):o)+"</strong> <code>"+h(typeof(o=null!=(o=i.message||(null!=t?t.message:t))?o:l)===c?o.call(a,{name:"message",hash:{},data:r}):o)+"</code></p>\n"+(null!=(s=i.if.call(a,null!=t?t.infoSrc:t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?s:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":24}],108:[function(e,t,i){var n=e("hbsfy/runtime"),r=e("color"),s=e("app/control/Globals"),o={add:function(e,t){return e+t},subtract:function(e,t){return e-t},divide:function(e,t){return e/t},multiply:function(e,t){return e*t},floor:function(e){return Math.floor(e)},ceil:function(e){return Math.ceil(e)},round:function(e){return Math.round(e)},global:function(e){return s[e]},is:function(e,t,i){return e===t?i.fn(this):i.inverse(this)},isnot:function(e,t,i){return e!==t?i.fn(this):i.inverse(this)},isany:function(e){var t=0,i=arguments.length-2,n=arguments[i+1];do{if(e===arguments[++t])return n.fn(this)}while(t<i);return n.inverse(this)},contains:function(e,t,i){return-1!==e.indexOf(t)?i.fn(this):i.inverse(this)},ignore:function(){return""},mix:function(e,t,i){return new r(e).mix(new r(t),i).rgbString()},lighten:function(e,t){return new r(e).lighten(t).rgbString()},darken:function(e,t){return new r(e).darken(t).rgbString()}};for(var a in o)o.hasOwnProperty(a)&&n.registerHelper(a,o[a])},{"app/control/Globals":39,color:"color","hbsfy/runtime":24}],109:[function(e,t,i){var n=e("hbsfy/runtime");t.exports=n.template({compiler:[7,">= 4.0.0"],main:function(e,t,i,n,r){return'<svg class="fullscreen-symbol" version="1.1" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="-21 -21 42 42" style="max-width:14px;max-height:14px">\n\t<path d="M-5,5 L-20,20 M-7,20 L-20,20 L-20,7 M5,-5 L20,-20 M7,-20 L20,-20 L20,-7" class="color-stroke" style="stroke-width:1;fill:none;" vector-effect="non-scaling-stroke" />\n</svg>\n'},useData:!0})},{"hbsfy/runtime":24}],110:[function(e,t,i){var n=e("underscore"),r=e("backbone").Events,s=0,o=function(e){this._id=s++,this._duration=0,this._status="initialized",this._start=0};n.extend(o.prototype,r,{start:function(e){if(!n.isNumber(e)&&!this._duration)return this;if(this._timeout&&"started"===this._status)return this;var t="stopped"===this._status?"start":"resume";return this._duration=e||this._duration,this._timeout=window.setTimeout(function(){l.call(this),this._status="stopped",this.trigger("end")}.bind(this),this._duration),this._start=a(),this._status="started",this.trigger(t,this.getDuration()),this},pause:function(){return"started"!==this._status||(this._duration-=a()-this._start,l.call(this,!1),this._status="paused",this.trigger("pause",this.getDuration())),this},stop:function(){return/started|paused/.test(this._status)&&(l.call(this,!0),this._status="stopped",this.trigger("stop")),this},getDuration:function(){return"started"===this._status?this._duration-(a()-this._start):"paused"===this._status?this._duration:0},getStatus:function(){return this._status}});var a=window.performance?window.performance.now.bind(window.performance):Date.now.bind(Date);function l(e){window.clearTimeout(this._timeout),!0===e&&(this._duration=0)}Object.defineProperties(o.prototype,{duration:{enumerable:!0,get:function(){return this.getDuration()}},status:{enumerable:!0,get:function(){return this.getStatus()}}}),Object.defineProperties(o,{STOPPED:{enumerable:!0,value:"stopped"},STARTED:{enumerable:!0,value:"started"},PAUSED:{enumerable:!0,value:"paused"}}),t.exports=o},{backbone:"backbone",underscore:"underscore"}],111:[function(e,t,i){var n=e("./TransformItem"),r=0,s=100,u=Array.prototype.slice;function o(){this.id=r++,this._items=[],this._itemsById={}}o.prototype=Object.create({_get:function(e){return this.has(e)?this._itemsById[e.eid]:this._add(e)},_add:function(e){var t,i;return i=e.eid||e.cid||"elt"+s++,t=new n(e,i),this._itemsById[i]=t,this._items.push(t),t},_remove:function(e){if(this.has(e)){var t=this._itemsById[e.eid];this._items.splice(this._items.indexOf(t),1),t.destroy(),delete this._itemsById[e.eid]}},_invoke:function(e,t,i){var n,r,s,o,a,l,c,h=null;for(void 0!==i?h=u.call(t,0,i):i=0,n=i,r=t.length,c=[];n<r;++n)if((a=t[n]).length)for(s=0,o=a.length;s<o;++s)l=this._get(a[s]),c.push(l[e].apply(l,h));else l=this._get(a),c.push(l[e].apply(l,h));return c},has:function(e){return e.eid&&void 0!==this._itemsById[e.eid]},getItems:function(){var e,t,i,n=[];for(e=0;e<arguments.length;++e)if((i=arguments[e]).length)for(t=0;t<i.length;++t)n.push(this._get(i[t]));else n.push(this._get(i));return n},get:function(e){return this._get(e)},add:function(){var e,t,i;for(e=0;e<arguments.length;++e)if((i=arguments[e]).length)for(t=0;t<i.length;++t)this._get(i[t]);else this._get(i)},remove:function(){var e,t,i;for(e=0;e<arguments.length;++e)if((i=arguments[e]).length)for(t=0;t<i.length;++t)this._remove(i[t]);else this._remove(i)},hasOffset:function(e){return this.has(e)?this._itemsById[e.eid].hasOffset:void 0},capture:function(){this._invoke("capture",arguments)},captureAll:function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].capture()},clearCapture:function(){this._invoke("clearCapture",arguments)},clearAllCaptures:function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].clearCapture()},offset:function(e,t){this._invoke("offset",arguments,2)},offsetAll:function(e,t){for(var i=0,n=this._items.length;i<n;i++)this._items[i].offset(e,t)},clearOffset:function(){this._invoke("clearOffset",arguments)},clearAllOffsets:function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].clearOffset()},runTransition:function(e){this._invoke("runTransition",arguments,1)},runAllTransitions:function(e){for(var t=0,i=this._items.length;t<i;t++)this._items[t].runTransition(e)},clearTransition:function(){this._invoke("clearTransition",arguments)},clearAllTransitions:function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].clearTransition()},stopTransition:function(){this._invoke("stopTransition",arguments)},stopAllTransitions:function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].stopTransition()},whenTransitionEnds:function(){var e=this._invoke("whenTransitionEnds",arguments);return 0!=e.length?Promise.all(e):Promise.resolve(null)},whenAllTransitionsEnd:function(){return 0!=this._items.length?Promise.all(this._items.map(function(e){return e.whenTransitionEnds()})):Promise.resolve(null)},promise:function(){return 0==arguments.length?this.whenAllTransitionsEnd():this.whenTransitionEnds.call(this,arguments)},validate:function(){for(var e=0,t=this._items.length;e<t;e++)this._items[e].validate()}},{items:{get:function(){return this._items}}}),t.exports=o},{"./TransformItem":112}],112:[function(e,t,i){var n,r,s=e("underscore"),o=e("utils/prefixedProperty"),a=e("utils/prefixedStyleName"),l=e("utils/prefixedEvent")("transitionend"),c="none 0s step-start 0s",h={name:"unset",className:"tx-unset",property:"none",easing:"ease",delay:0,duration:0,cssText:"unset"},u=(n=e("app/control/Globals").TRANSLATE_TEMPLATE,function(e){return n(e._renderedX,e._renderedY)}),d=Object.keys({opacity:"1",visibility:"visible",transform:"matrix(1, 0, 0, 1, 0, 0)",transformStyle:"",transition:""}),p=d.reduce(function(e,t){return e[t]=o(t),e},{}),f=(r=e("utils/strings/camelToDashed"),d.map(r).reduce(function(e,t){return e[t]=a(t),e},{})),m=function(e,n){return 0!=e.length&&(e.forEach(function(e,t,i){e.resolve(n),i[t]=null}),e.length=0),e},g=function(e,n){return 0!=e.length&&(e.forEach(function(e,t,i){e.reject(n),i[t]=null}),e.length=0),e},v=function(e,t){this.el=e,this.id=t,this.el.eid=t,this._onTransitionEnd=this._onTransitionEnd.bind(this),this.el.addEventListener(l,this._onTransitionEnd,!1),this._captureInvalid=!1,this._capturedChanged=!1,this._capturedX=null,this._capturedY=null,this._currCapture={},this._lastCapture={},this._hasOffset=!1,this._offsetInvalid=!1,this._offsetX=null,this._offsetY=null,this._renderedX=null,this._renderedY=null,this._hasTransition=!1,this._transitionInvalid=!1,this._transitionRunning=!1,this._transition=s.extend({},h),this._promises=[],this._pendingPromises=[]};v.prototype=Object.create({destroy:function(){this.el.removeEventListener(l,this._onTransitionEnd,!1),g(this._pendingPromises,this),g(this._promises,this)},capture:function(e){return e&&this.clearCapture(),this._validateCapture(),this},clearCapture:function(){return this._captureInvalid=!0,this},offset:function(e,t){return this._hasOffset=!0,this._offsetInvalid=!0,this._offsetX=e||0,this._offsetY=t||0,this},clearOffset:function(){return this._hasOffset&&(this._hasOffset=!1,this._offsetInvalid=!0,this._offsetX=null,this._offsetY=null),this},runTransition:function(e){if(!e)return this.clearTransition();var t,i=this._transitionValue,n=this._transition.name;return this._transition.property=f.transform,this._transition=s.extend(this._transition,e),this._transitionValue=(t=this._transition).property+" "+t.duration/1e3+"s "+t.easing+" "+t.delay/1e3+"s",this._transitionInvalid&&console.warn("tx[%s]::runTransition set over (%s:'%s' => %s:'%s')",this.id,n,i,this._transition.name,this._transitionValue),this._hasTransition=!0,this._transitionInvalid=!0,this},clearTransition:function(){return this._transition=s.extend(this._transition,h),this._transitionValue=c,this._hasTransition=!1,this._transitionInvalid=!0,this},stopTransition:function(){return this._transition=s.extend(this._transition,h),this._transitionValue=c,this._hasTransition=!1,this._transitionInvalid=!0,this},whenTransitionEnds:function(){var i,e;return this._transitionInvalid||this._transitionRunning?(i={},e=new Promise(function(e,t){i.resolve=e,i.reject=t}),(this._transitionInvalid?this._pendingPromises:this._promises).push(i)):e=Promise.resolve(this),e},validate:function(){if(this._ignoreEvent=!0,this._captureInvalid){var e=null!==this._renderedX?this._renderedX:this._capturedX,t=null!==this._renderedY?this._renderedY:this._capturedY;this._validateCapture(),this._validateOffset();var i=null!==this._renderedX?this._renderedX:this._capturedX,n=null!==this._renderedY?this._renderedY:this._capturedY;e===i&&t===n&&(this._hasTransition&&console.warn("tx[%s]::validate unchanged: last:[%i,%i] curr:[%i,%i]",this.el.id||this.id,e,t,i,n),this.clearTransition()),this._validateTransition()}else this._validateTransition(),this._validateOffset();return this._ignoreEvent=!1,this._capturedChanged=!1,this},_validateCapture:function(){if(this._captureInvalid){var e,t,i=null;if(this._hasOffset&&!this._offsetInvalid&&(""===(i=this._getCSSProp("transform"))&&console.error('tx[%s]::_capture valid offset (%i,$i) but transformValue=""',this.id,this._offsetX,this._offsetY),this._removeCSSProp("transform")),this._lastCapture=this._currCapture,this._currCapture=this._getComputedCSSProps(),this._currCapture.transform!==this._lastCapture.transform)(t=this._currCapture.transform.match(/(matrix|matrix3d)\(([^\)]+)\)/))?(e=t[2].split(","),"matrix"===t[1]?(this._capturedX=parseFloat(e[4]),this._capturedY=parseFloat(e[5])):(this._capturedX=parseFloat(e[12]),this._capturedY=parseFloat(e[13]))):(this._capturedX=0,this._capturedY=0),this._capturedChanged=!0;null!==i&&(this.id,this._setCSSProp("transform",i)),this._captureInvalid=!1}},_validateOffset:function(){if(this._offsetInvalid)if(this._offsetInvalid=!1,this._hasOffset){var e=this._offsetX+this._capturedX,t=this._offsetY+this._capturedY;e===this._renderedX&&t===this._renderedY||(this._renderedX=e,this._renderedY=t,this._setCSSProp("transform",u(this)))}else this._renderedX=null,this._renderedY=null,this._removeCSSProp("transform")},_validateTransition:function(){if(this._transitionInvalid){this._transitionInvalid=!1;var e=this._promises;this._promises=this._pendingPromises,this._pendingPromises=g(e,this),this._transitionRunning=this._hasTransition,this._setCSSProp("transition",this._transitionValue),this._hasTransition||m(this._promises,this)}},_onTransitionEnd:function(e){this._ignoreEvent||this._transitionRunning&&this.el===e.target&&this._transition.property==e.propertyName&&(this._hasTransition=!1,this._transitionRunning=!1,this._removeCSSProp("transition"),m(this._promises,this))},_getCSSProp:function(e){return this.el.style[p[e]]},_setCSSProp:function(e,t){"transition"===e&&t==c&&(t=""),null==t||""===t?this._removeCSSProp(e):this.el.style[p[e]]=t},_removeCSSProp:function(e){this.el.style[p[e]]=""},_getComputedCSSProps:function(){var e={},t=window.getComputedStyle(this.el);for(var i in p)e[i]=t[p[i]];return e}},{transition:{get:function(){return this._transition}},hasTransition:{get:function(){return this._hasTransition}},capturedChanged:{get:function(){return this._capturedChanged}},capturedX:{get:function(){return this._capturedX}},capturedY:{get:function(){return this._capturedY}},hasOffset:{get:function(){return this._hasOffset}},offsetX:{get:function(){return this._offsetX}},offsetY:{get:function(){return this._offsetY}}}),t.exports=v},{"app/control/Globals":39,underscore:"underscore","utils/prefixedEvent":127,"utils/prefixedProperty":128,"utils/prefixedStyleName":129,"utils/strings/camelToDashed":133}],113:[function(e,t,i){t.exports=function(e,r,t){return e.reduce(function(e,t,i,n){return-1==r.indexOf(t)&&e.push(t),e},void 0!==t?t:[])}},{}],114:[function(e,t,i){var o=2*Math.PI,n=Array.prototype.splice,r=function(e,t){if("object"==typeof t)for(var i in t)switch(typeof e[i]){case"undefined":break;case"function":Array.isArray(t[i])?e[i].apply(e,t[i]):e[i].call(e,t[i]);break;default:e[i]=t[i]}},a=function(e,t,i){i.save(),t&&r(i,t),e.apply(null,n.call(arguments,2)),"transparent"!==i.lineWidth&&i.stroke(),"transparent"!==i.fillStyle&&i.fill(),i.restore()};t.exports={setStyle:r,vGuide:function(e,t){e.beginPath(),e.moveTo(t,0),e.lineTo(t,e.canvas.height)},drawVGuide:function(e,t,i){a(this.vGuide,t,e,i)},hGuide:function(e,t){e.beginPath(),e.moveTo(0,t),e.lineTo(e.canvas.width,t)},drawHGuide:function(e,t,i){a(this.hGuide,t,e,i)},crosshair:function(e,t,i,n){e.save(),e.translate(t,i),e.rotate(Math.PI/4),e.beginPath(),e.moveTo(0,-n),e.lineTo(0,n),e.moveTo(-n,0),e.lineTo(n,0),e.restore()},drawCrosshair:function(e,t,i,n,r){a(this.crosshair,t,e,i,n,r)},circle:function(e,t,i,n){e.beginPath(),e.arc(t,i,n,0,o)},drawCircle:function(e,t,i,n,r){a(this.circle,t,e,i,n,r)},square:function(e,t,i,n){n=2*Math.floor(n/2),e.beginPath(),e.rect(t-n,i-n,2*n,2*n)},drawSquare:function(e,t,i,n,r){a(this.square,t,e,i,n,r)},arrowhead:function(e,t,i,n,r){var s;e.save(),e.translate(t,i),e.rotate((r%(s=o)+s)%s),e.translate(.5*n,0),e.beginPath(),e.moveTo(0,0),e.lineTo(-n*Math.SQRT2,n*Math.SQRT1_2),e.arcTo(0,0,-n*Math.SQRT2,-n*Math.SQRT1_2,n),e.lineTo(0,0),e.closePath(),e.restore()},drawArrowhead:function(e,t,i,n,r,s){a(this.arrowhead,t,e,i,n,r,s)},rect:function(e,t,i,n,r){e.beginPath(),isNaN(t)?e.rect(t.left,t.top,t.width,t.height):e.rect(t,i,n,r)},drawRect:function(e,t,i,n,r,s){a(this.rect,t,e,i,n,r,s)}}},{}],115:[function(e,t,i){t.exports=function(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}},{}],116:[function(e,t,i){t.exports=function(e,t){var i,n=e.data,r=n.length,s=[0,0,0];for(i=0;i<r;i+=4)s[0]+=n[i],s[1]+=n[i+1],s[2]+=n[i+2];for(i=0;i<3;i++)s[i]=s[i]/(r/4)|0;return s}},{}],117:[function(e,t,i){t.exports=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259]},{}],118:[function(e,t,i){t.exports=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24]},{}],119:[function(e,t,i){var F=e("./mul_table"),z=e("./shg_table"),B=e("./BlurStack");t.exports=function(e,t){var i=e.data,n=e.width,r=e.height;if(!(!t.hasOwnProperty("radius")||isNaN(t.radius)||t.radius<1)){var s,o,a,l,c,h,u,d,p,f,m,g,v,_,y,w,b,A,x,T,E=0|t.radius,S=E+E+1,k=n-1,M=r-1,C=E+1,I=C*(C+1)/2,P=new B,L=P;for(a=1;a<S;a++)if(L=L.next=new B,a==C)var N=L;L.next=P;var O=null,V=null;u=h=0;var R=F[E],D=z[E];for(o=0;o<r;o++){for(_=y=w=d=p=f=0,m=C*(b=i[h]),g=C*(A=i[h+1]),v=C*(x=i[h+2]),d+=I*b,p+=I*A,f+=I*x,L=P,a=0;a<C;a++)L.r=b,L.g=A,L.b=x,L=L.next;for(a=1;a<C;a++)l=h+((k<a?k:a)<<2),d+=(L.r=b=i[l])*(T=C-a),p+=(L.g=A=i[l+1])*T,f+=(L.b=x=i[l+2])*T,_+=b,y+=A,w+=x,L=L.next;for(O=P,V=N,s=0;s<n;s++)i[h]=d*R>>D,i[h+1]=p*R>>D,i[h+2]=f*R>>D,d-=m,p-=g,f-=v,m-=O.r,g-=O.g,v-=O.b,l=u+((l=s+E+1)<k?l:k)<<2,d+=_+=O.r=i[l],p+=y+=O.g=i[l+1],f+=w+=O.b=i[l+2],O=O.next,m+=b=V.r,g+=A=V.g,v+=x=V.b,_-=b,y-=A,w-=x,V=V.next,h+=4;u+=n}for(s=0;s<n;s++){for(y=w=_=p=f=d=0,m=C*(b=i[h=s<<2]),g=C*(A=i[h+1]),v=C*(x=i[h+2]),d+=I*b,p+=I*A,f+=I*x,L=P,a=0;a<C;a++)L.r=b,L.g=A,L.b=x,L=L.next;for(c=n,a=1;a<=E;a++)h=c+s<<2,d+=(L.r=b=i[h])*(T=C-a),p+=(L.g=A=i[h+1])*T,f+=(L.b=x=i[h+2])*T,_+=b,y+=A,w+=x,L=L.next,a<M&&(c+=n);for(h=s,O=P,V=N,o=0;o<r;o++)i[l=h<<2]=d*R>>D,i[l+1]=p*R>>D,i[l+2]=f*R>>D,d-=m,p-=g,f-=v,m-=O.r,g-=O.g,v-=O.b,l=s+((l=o+C)<M?l:M)*n<<2,d+=_+=O.r=i[l],p+=y+=O.g=i[l+1],f+=w+=O.b=i[l+2],O=O.next,m+=b=V.r,g+=A=V.g,v+=x=V.b,_-=b,y-=A,w-=x,V=V.next,h+=n}return e}}},{"./BlurStack":115,"./mul_table":117,"./shg_table":118}],120:[function(e,t,i){t.exports=function(e,t,i,n,r,s,o){var a,l,c,h,u=e<n?1:-1,d=Math.abs(r-t),p=Math.abs(n-e),f=i+s;if(d<1&&(a=0,l=p),f<=d&&f<=p)c=f,l=a=i;else{if(c=Math.sqrt(d*s*2+d*i*2-d*d),i<(h=d*i/f)||p<c)return;var m=(f-d)/c;l=d*m+(a=c*i/f-h*m)}return 0<o&&(1<o?o=Math.min(p-f,o):o*=p-f,a+=o,l+=o),[a*u+e,l*u+e,a,l]}},{}],121:[function(e,t,i){var h=["boxSizing","position","objectFit"],u=["marginTop","marginBottom","marginLeft","marginRight","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","paddingTop","paddingBottom","paddingLeft","paddingRight"],d=u.concat(["width","height","minWidth","minHeight","maxWidth","maxHeight"],["top","bottom","left","right"]),p=/^(-?[\d\.]+)(px|em|rem)$/;t.exports=function(e,t,i){var n,r,s,o,a,l;for(e instanceof HTMLElement&&(e=getComputedStyle(e)),t||(t={}),a=t.fontSize=parseFloat(e.fontSize),s=0,o=h.length;s<o;s++)(r=h[s])in e&&(t[r]=e[r]);var c=i?u:d;for(s=0,o=c.length;s<o;s++)t["_"+(r=c[s])]=e[r],e[r]&&(n=p.exec(e[r]))&&("px"===n[2]?t[r]=parseFloat(n[1]):"em"===n[2]?t[r]=parseFloat(n[1])*a:"rem"===n[2]?(l||(l=parseFloat(getComputedStyle(document.documentElement).fontSize)),t[r]=parseFloat(n[1])*l):(console.warn("Ignoring value",r,n[1],n[2]),t[r]=null));return t}},{}],122:[function(e,t,i){t.exports=function(e,t,i,n,r){return n*(t/=r)*t+i}},{}],123:[function(e,t,i){t.exports=function(e,t,i,n){return-i*(e/=n)*(e-2)+t}},{}],124:[function(e,t,i){t.exports=function(e,t,i,n){return i*e/n+t}},{}],125:[function(e,t,i){t.exports=["loadstart","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","paused","ratechange","resize","volumechange"]},{}],126:[function(e,t,i){t.exports=function(e,t,i){2==arguments.length&&(i=t);var n={width:e.width+2*t,height:e.height+2*i};return 0<=n.width?(n.left=e.left-t,n.right=n.left+n.width,n.x=n.left):(n.right=e.right+t,n.left=e.right-n.width,n.y=n.right),0<=n.height?(n.top=e.top-i,n.bottom=n.top+n.height,n.y=n.top):(n.bottom=e.bottom+i,n.top=e.bottom-n.height,n.y=n.bottom),n}},{}],127:[function(e,t,i){var s=[""].concat(e("./prefixes")),o=s.map(function(e){return""===e?e:e.charAt(0).toUpperCase()+e.substr(1)}),n={},r={};n.transitionend=function(){var e,t=document.body.style,i={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd"};for(e in i)if(e in t)return i[e];return null},t.exports=function(e){return r.hasOwnProperty(e)||(r[e]=n.hasOwnProperty(e)?n[e]():function(e,t,i){var n=/^[A-Z]/.test(e)?o:s;t||(t=document);for(var r=0;r<n.length;r++){if(i&&n[r]+i in t)return n[r]+e;if("on"+n[r]+e in t)return n[r]+e}return null}.apply(null,arguments),null===r[e]?console.warn("Event '%s' not found",e):r[e]),r[e]}},{"./prefixes":130}],128:[function(e,t,i){var s=e("./prefixes"),o=s.length,n={};t.exports=function(e,t){return n[e]||(n[e]=function(e,t){var i,n;if(e in t)return e;n=e[0].toUpperCase()+e.slice(1);for(var r=0;r<o;r++)if((i=s[r]+n)in t)return i;return console.error("Property '%s' not found",e),null}(e,t||document.body.style))}},{"./prefixes":130}],129:[function(e,t,i){var r=e("./prefixes"),s=r.length,n={};t.exports=function(e,t){return n[e]||(n[e]=function(e,t){var i;if(e in t)return e;for(var n=0;n<s;n++)if((i="-"+r[n]+"-"+e)in t)return i;return console.warn("CSS style '%s' not found",e),null}(e,t||document.body.style))}},{"./prefixes":130}],130:[function(e,t,i){t.exports=["webkit","moz","ms","o"]},{}],131:[function(e,t,i){t.exports=function(e,n){return 0<e.length&&(e.forEach(function(e,t,i){e.reject(n),i[t]=null}),e.length=0),e}},{}],132:[function(e,t,i){t.exports=function(e,n){return 0!=e.length&&(e.forEach(function(e,t,i){e.resolve(n),i[t]=null}),e.length=0),e}},{}],133:[function(e,t,i){t.exports=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}},{}],134:[function(e,t,i){t.exports=function(e){return e.replace(/<[^>]+>/g,"")}},{}],135:[function(e,t,i){var r=e("hammerjs");function n(){var e=r.Pan.apply(this,arguments);return this.thresholdOffsetX=null,this.thresholdOffsetY=null,this.thresholdOffset=null,e}r.inherit(n,r.Pan,{emit:function(e){var t,i=this.options.threshold,n=e.direction;return this.state==r.STATE_BEGAN&&(this.thresholdOffsetX=n&r.DIRECTION_HORIZONTAL?n&r.DIRECTION_LEFT?i:-i:0,this.thresholdOffsetY=n&r.DIRECTION_VERTICAL?n&r.DIRECTION_UP?i:-i:0),e.thresholdOffsetX=this.thresholdOffsetX,e.thresholdOffsetY=this.thresholdOffsetY,e.thresholdDeltaX=e.deltaX+this.thresholdOffsetX,e.thresholdDeltaY=e.deltaY+this.thresholdOffsetY,this.pX=e.deltaX,this.pY=e.deltaY,(n=(t=n)==r.DIRECTION_DOWN?"down":t==r.DIRECTION_UP?"up":t==r.DIRECTION_LEFT?"left":t==r.DIRECTION_RIGHT?"right":"")&&this.manager.emit(this.options.event+n,e),r.Recognizer.prototype.emit.apply(this,arguments)}}),t.exports=n},{hammerjs:"hammerjs"}],136:[function(e,t,i){t.exports={video_crop_px:"0",transform_type:"3d",transitions:{ease:"ease-in-out",duration_ms:"350",delay_interval_ms:"34",min_delay_ms:"34"},breakpoints:{landscape:"'(orientation: landscape)'",portrait:"'(orientation: portrait)'","fullwidth-small":"'not screen and (min-width: 460px)'",fullwidth:"'not screen and (min-width: 704px), not screen and (min-height: 540px)'",default:"'only screen and (min-width: 704px) and (min-height: 540px)'","desktop-small":"'only screen and (min-width: 1024px) and (min-height: 540px)'","desktop-medium":"'only screen and (min-width: 1224px) and (min-height: 704px)'","desktop-large":"'only screen and (min-width: 1824px) and (min-height: 1024px)'"},default_colors:{color:"hsl(47, 5%, 15%)","background-color":"hsl(47, 5%, 95%)","link-color":"hsl(10, 80%, 50%)"},temp:{collapse_offset:"360"},_ignore:{transitions:{ease:"cubic-bezier(0.42, 0.0, 0.58, 1.0)",duration_ms:"400",delay_interval_ms:"134",min_delay_ms:"34"},default_colors:{"--link-color":"hsl(10, 80%, 50%)","--alt-background-color":"unset"},units:{hu_px:"20",vu_px:"12"},breakpoints:{mobile:"'not screen and (min-width: 704px), not screen and (min-height: 540px)'",unsupported:"'not screen and (min-width: 704px)'",unquoted:"only screen and (min-width: 1824px)",unquoted_neg:"not screen and (min-width: 704px)",quoted_combined:"'not screen and (min-width: 704px), not screen and (min-height: 540px)'",array:["only screen and (min-width: 704px)","not screen and (min-width: 704px)","not screen and (min-height: 540px)"]}}}},{}],"Backbone.Mutators":[function(t,r,s){!function(i,n,e){"use strict";"object"==typeof s?r.exports=n(t("underscore"),t("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],function(e,t){return e=void 0===e?i._:e,t=void 0===t?i.Backbone:t,i.returnExportsGlobal=n(e,t,i)}):i.returnExportsGlobal=n(i._,i.Backbone)}(this,function(o,e,t,a){"use strict";e=e===a?t.Backbone:e,o=o===a?t._:o;var i=function(){},n=e.Model.prototype.get,l=e.Model.prototype.set,c=e.Model.prototype.toJSON;return i.prototype.mutators={},i.prototype.get=function(e){var t=this.mutators!==a;return!0===t&&!0===o.isFunction(this.mutators[e])?this.mutators[e].call(this):!0===t&&!0===o.isObject(this.mutators[e])&&!0===o.isFunction(this.mutators[e].get)?this.mutators[e].get.call(this):n.call(this,e)},i.prototype.set=function(e,t,n){var i=this.mutators!==a,r=null,s=null;return r=l.call(this,e,t,n),o.isObject(e)||null===e?(s=e,n=t):(s={})[e]=t,!0===i&&!0===o.isObject(this.mutators[e])&&(!0===o.isFunction(this.mutators[e].set)?r=this.mutators[e].set.call(this,e,s[e],n,o.bind(l,this)):o.isFunction(this.mutators[e])&&(r=this.mutators[e].call(this,e,s[e],n,o.bind(l,this)))),!0===i&&o.isObject(s)&&o.each(s,o.bind(function(e,t){if(!0===o.isObject(this.mutators[t])){var i=this.mutators[t];o.isFunction(i.set)&&(i=i.set),o.isFunction(i)&&((n===a||!0===o.isObject(n)&&!0!==n.silent&&n.mutators!==a&&!0!==n.mutators.silent)&&this.trigger("mutators:set:"+t),i.call(this,t,e,n,o.bind(l,this)))}},this)),r},i.prototype.toJSON=function(i){var n,r,s=c.call(this);return o.each(this.mutators,o.bind(function(e,t){!0===o.isObject(this.mutators[t])&&o.isFunction(this.mutators[t].get)?(n=this.isSaving?this.isSaving(i,e,t):o.has(i||{},"emulateHTTP"),r=this.mutators[t].transient,n&&r||(s[t]=o.bind(this.mutators[t].get,this)())):o.isFunction(this.mutators[t])&&(s[t]=o.bind(this.mutators[t],this)())},this)),s},i.prototype.escape=function(e){var t=this.get(e);return o.escape(null==t?"":""+t)},o.extend(e.Model.prototype,i.prototype),e.Mutators=i})},{backbone:"backbone",underscore:"underscore"}],Modernizr:[function(e,t,i){e("modernizr-dist"),Modernizr._config.classPrefix="has-",Modernizr._config.enableClasses=!1,Modernizr.addTest("weakmap",function(){return void 0!==window.WeakMap}),Modernizr.addTest("strictmode",function(){try{undeclaredVar=1}catch(e){return!0}return!1}),t.exports=window.Modernizr},{"modernizr-dist":"modernizr-dist"}],"backbone.babysitter":[function(r,s,o){!function(e,i){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(e,t){return i(e,t)});else if(void 0!==o){var t=r("backbone"),n=r("underscore");s.exports=i(t,n)}else i(e.Backbone,e._)}(this,function(e,t){"use strict";var i=e.ChildViewContainer;return e.ChildViewContainer=function(e,n){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),n.each(e,this.add,this)};n.extend(i.prototype,{add:function(e,t){var i=e.cid;return(this._views[i]=e).model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return n.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;return e.model&&delete this._indexByModel[e.model.cid],n.any(this._indexByCustom,function(e,t){if(e===i)return delete this._indexByCustom[t],!0},this),delete this._views[i],this._updateLength(),this},call:function(e){this.apply(e,n.tail(arguments))},apply:function(t,i){n.each(this._views,function(e){n.isFunction(e[t])&&e[t].apply(e,i||[])})},_updateLength:function(){this.length=n.size(this._views)}});return n.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"],function(t){i.prototype[t]=function(){var e=[n.values(this._views)].concat(n.toArray(arguments));return n[t].apply(n,e)}}),i}(0,t),e.ChildViewContainer.VERSION="0.1.11",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=i,this},e.ChildViewContainer})},{backbone:"backbone",underscore:"underscore"}],"backbone.native":[function(e,m,g){(function(){"use strict";var l=/^([^.]+)?(?:\.([^.]+))?$/,c=Element.prototype.matchesSelector||null;c||["webkit","moz","o","ms"].forEach(function(e){var t=Element.prototype[e+"MatchesSelector"];t&&(c=t)});var i="backboneNativeKey"+Math.random(),n=1,r={},s=[];function h(e){e[i]||(e[i]=0===s.length?++n:s.pop());var t=e[i];return r[t]||(r[t]=[])}function a(e){var t=e[i];r[t]&&(r[t]=null,e[i]=null,s.push(t))}function o(n,e,r,t){"function"==typeof r&&(t=r,r=null);var i=l.exec(e);e=i[1]||null;var s=i[2]||null;if(e){var o=t,a=t;o=r?function(e){for(var t=e.target;t&&t!==n;t=t.parentElement)if(c.call(t,r)){var i=a.call(t,e,t);return!1===i&&(e.stopPropagation(),e.preventDefault()),i}}:function(e){var t=a.call(n,e,n);return!1===t&&(e.stopPropagation(),e.preventDefault()),t},n.addEventListener(e,o,!1),h(n).push({eventName:e,callback:t,handler:o,namespace:s,selector:r})}}function u(t,i,n,r){"function"==typeof n&&(r=n,n=null);var e=l.exec(i||"");i=e[1];var s=e[2],o=h(t)||[];i||s||n||r?(o.filter(function(e){return!(s&&e.namespace!==s||i&&e.eventName!==i||r&&e.callback!==r||n&&e.selector!==n)}).forEach(function(e){t.removeEventListener(e.eventName,e.handler,!1),o.splice(o.indexOf(e),1)}),0===o.length&&a(t)):(o.forEach(function(e){t.removeEventListener(e.eventName,e.handler,!1)}),a(t))}function d(e,t){if(t=t||document,!(this instanceof d))return new d(e,t);if(e)if("string"==typeof e)if(/^\s*</.test(e)){var i=document.createElement("div");i.innerHTML=e,this[0]=i.firstChild,i.removeChild(i.firstChild),this.length=1}else this[0]=t.querySelector(e),this.length=1;else this[0]=e,this.length=1;else this.length=0}if(d.prototype={hide:null,appendTo:null,find:null,attr:function(t){return Object.keys(t).forEach(function(e){switch(e){case"html":this[0].innerHTML=t[e];break;case"text":this[0].textContent=t[e];break;case"class":this[0].className=t[e];break;default:this[0].setAttribute(e,t[e])}},this),this},html:function(e){return this[0].innerHTML=e,this},remove:function(){var e=this[0];return e.parentElement&&e.parentElement.removeChild(e),function e(t){u(t);for(var i=0,n=t.childNodes.length;i<n;i++)t.childNodes[i].nodeType!==Node.TEXT_NODE&&e(t.childNodes[i])}(e),this},on:function(e,t,i){return o(this[0],e,t,i),this},off:function(e,t,i){return u(this[0],e,t,i),this},bind:function(e,t){return this.on(e,t)},unbind:function(e,t){return this.off(e,t)},delegate:function(e,t,i){return this.on(t,e,i)},undelegate:function(e,t,i){return this.off(t,e,i)}},d.ajax=function(i){var e=(i=i||{}).type||"GET",t=i.url,n=void 0===i.processData||!!i.processData,r=i.data;if(n&&"object"==typeof r){var s=Object.keys(r).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])});r=s.join("&")}!r||"GET"!==e&&"HEAD"!==e||(t+=(-1===t.indexOf("?")?"?":"&")+r,r=void 0);var o=new XMLHttpRequest;return o.open(e,t,!0),i.contentType&&o.setRequestHeader("Content-Type",i.contentType),i.beforeSend&&i.beforeSend(o),o.onload=function(){var t=!1,e=o.responseText;if("json"===i.dataType)try{e=JSON.parse(e)}catch(e){t=!0}!t&&200<=o.status&&o.status<300?i.success&&i.success(e,o.statusText,o):i.error&&i.error(o)}.bind(this),o.onerror=o.onabort=function(){i.error&&i.error(o)},o.send(r),o},d.on=o,d.off=u,void 0!==g)return m.exports=d;var t=this,p=t.Backbone?t.Backbone.Native:null,f=t.$;t.Backbone&&(t.Backbone.Native=d),(t.$=d).noConflict=function(e){return t.$=f,e&&(t.Backbone.Native=p),d},t.Backbone&&(t.Backbone.setDomLibrary?t.Backbone.setDomLibrary(d):t.Backbone.$=d)}).call(this)},{}],backbone:[function(t,e,i){!function(n,r){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(e,t,i){n.Backbone=r(n,i,e,t)});else if(void 0!==i){var e=t("underscore");r(n,i,e)}else n.Backbone=r(n,{},n._,n.jQuery||n.Zepto||n.ender||n.$)}(this,function(e,a,A,t){var i=e.Backbone,n=[],r=n.slice;a.VERSION="1.1.2",a.$=t,a.noConflict=function(){return e.Backbone=i,this},a.emulateHTTP=!1,a.emulateJSON=!1;var s=a.Events={on:function(e,t,i){return u(this,"on",e,[t,i])&&t&&(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:i,ctx:i||this})),this},once:function(e,t,i){if(!u(this,"once",e,[t,i])||!t)return this;var n=this,r=A.once(function(){n.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,i)},off:function(e,t,i){var n,r,s,o,a,l,c,h;if(!this._events||!u(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(a=0,l=(o=e?[e]:A.keys(this._events)).length;a<l;a++)if(e=o[a],s=this._events[e]){if(this._events[e]=n=[],t||i)for(c=0,h=s.length;c<h;c++)r=s[c],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&n.push(r);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!u(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&o(i,t),n&&o(n,arguments),this},stopListening:function(e,t,i){var n=this._listeningTo;if(!n)return this;var r=!t&&!i;for(var s in i||"object"!=typeof t||(i=this),e&&((n={})[e._listenId]=e),n)(e=n[s]).off(t,i,this),(r||A.isEmpty(e._events))&&delete this._listeningTo[s];return this}},l=/\s+/,u=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var r in i)e[t].apply(e,[r,i[r]].concat(n));return!1}if(l.test(i)){for(var s=i.split(l),o=0,a=s.length;o<a;o++)e[t].apply(e,[s[o]].concat(n));return!1}return!0},o=function(e,t){var i,n=-1,r=e.length,s=t[0],o=t[1],a=t[2];switch(t.length){case 0:for(;++n<r;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=e[n]).callback.call(i.ctx,s);return;case 2:for(;++n<r;)(i=e[n]).callback.call(i.ctx,s,o);return;case 3:for(;++n<r;)(i=e[n]).callback.call(i.ctx,s,o,a);return;default:for(;++n<r;)(i=e[n]).callback.apply(i.ctx,t);return}};A.each({listenTo:"on",listenToOnce:"once"},function(r,e){s[e]=function(e,t,i){var n=this._listeningTo||(this._listeningTo={});return i||"object"!=typeof t||(i=this),(n[e._listenId||(e._listenId=A.uniqueId("l"))]=e)[r](t,i,this),this}}),s.bind=s.on,s.unbind=s.off,A.extend(a,s);var x=a.Model=function(e,t){var i=e||{};t||(t={}),this.cid=A.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=A.defaults({},i,A.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};A.extend(x.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return A.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return A.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var n,r,s,o,a,l,c,h;if(null==e)return this;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;for(n in s=i.unset,a=i.silent,o=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=A.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]),r)t=r[n],A.isEqual(h[n],t)||o.push(n),A.isEqual(c[n],t)?delete this.changed[n]:this.changed[n]=t,s?delete h[n]:h[n]=t;if(!a){o.length&&(this._pending=i);for(var u=0,d=o.length;u<d;u++)this.trigger("change:"+o[u],this,h[o[u]],i)}if(l)return this;if(!a)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,A.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,A.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!A.isEmpty(this.changed):A.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&A.clone(this.changed);var t,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var r in e)A.isEqual(n[r],t=e[r])||((i||(i={}))[r]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return A.clone(this._previousAttributes)},fetch:function(t){void 0===(t=t?A.clone(t):{}).parse&&(t.parse=!0);var i=this,n=t.success;return t.success=function(e){if(!i.set(i.parse(e,t),t))return!1;n&&n(i,e,t),i.trigger("sync",i,e,t)},L(this,t),this.sync("read",this,t)},save:function(e,t,i){var n,r,s,o=this.attributes;if(null==e||"object"==typeof e?(n=e,i=t):(n={})[e]=t,i=A.extend({validate:!0},i),n&&!i.wait){if(!this.set(n,i))return!1}else if(!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=A.extend({},o,n)),void 0===i.parse&&(i.parse=!0);var a=this,l=i.success;return i.success=function(e){a.attributes=o;var t=a.parse(e,i);if(i.wait&&(t=A.extend(n||{},t)),A.isObject(t)&&!a.set(t,i))return!1;l&&l(a,e,i),a.trigger("sync",a,e,i)},L(this,i),"patch"===(r=this.isNew()?"create":i.patch?"patch":"update")&&(i.attrs=n),s=this.sync(r,this,i),n&&i.wait&&(this.attributes=o),s},destroy:function(t){t=t?A.clone(t):{};var i=this,n=t.success,r=function(){i.trigger("destroy",i,i.collection,t)};if(t.success=function(e){(t.wait||i.isNew())&&r(),n&&n(i,e,t),i.isNew()||i.trigger("sync",i,e,t)},this.isNew())return t.success(),!1;L(this,t);var e=this.sync("delete",this,t);return t.wait||r(),e},url:function(){var e=A.result(this,"urlRoot")||A.result(this.collection,"url")||P();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},A.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=A.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,A.extend(t,{validationError:i})),!1)}});A.each(["keys","values","pairs","invert","pick","omit"],function(t){x.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),A[t].apply(A,e)}});var c=a.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,A.extend({silent:!0},t))},T={add:!0,remove:!0,merge:!0},h={add:!0,remove:!1};A.extend(c.prototype,s,{model:x,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return a.sync.apply(this,arguments)},add:function(e,t){return this.set(e,A.extend({merge:!1},t,h))},remove:function(e,t){var i,n,r,s,o=!A.isArray(e);for(t||(t={}),i=0,n=(e=o?[e]:A.clone(e)).length;i<n;i++)(s=e[i]=this.get(e[i]))&&(delete this._byId[s.id],delete this._byId[s.cid],r=this.indexOf(s),this.models.splice(r,1),this.length--,t.silent||(t.index=r,s.trigger("remove",s,this,t)),this._removeReference(s,t));return o?e[0]:e},set:function(e,t){(t=A.defaults({},t,T)).parse&&(e=this.parse(e,t));var i,n,r,s,o,a,l,c=!A.isArray(e);e=c?e?[e]:[]:A.clone(e);var h=t.at,u=this.model,d=this.comparator&&null==h&&!1!==t.sort,p=A.isString(this.comparator)?this.comparator:null,f=[],m=[],g={},v=t.add,_=t.merge,y=t.remove,w=!(d||!v||!y)&&[];for(i=0,n=e.length;i<n;i++){if(r=(o=e[i]||{})instanceof x?s=o:o[u.prototype.idAttribute||"id"],a=this.get(r))y&&(g[a.cid]=!0),_&&(o=o===s?s.attributes:o,t.parse&&(o=a.parse(o,t)),a.set(o,t),d&&!l&&a.hasChanged(p)&&(l=!0)),e[i]=a;else if(v){if(!(s=e[i]=this._prepareModel(o,t)))continue;f.push(s),this._addReference(s,t)}s=a||s,!w||!s.isNew()&&g[s.id]||w.push(s),g[s.id]=!0}if(y){for(i=0,n=this.length;i<n;++i)g[(s=this.models[i]).cid]||m.push(s);m.length&&this.remove(m,t)}if(f.length||w&&w.length)if(d&&(l=!0),this.length+=f.length,null!=h)for(i=0,n=f.length;i<n;i++)this.models.splice(h+i,0,f[i]);else{w&&(this.models.length=0);var b=w||f;for(i=0,n=b.length;i<n;i++)this.models.push(b[i])}if(l&&this.sort({silent:!0}),!t.silent){for(i=0,n=f.length;i<n;i++)(s=f[i]).trigger("add",s,this,t);(l||w&&w.length)&&this.trigger("sort",this,t)}return c?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,n=this.models.length;i<n;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,A.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,A.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,A.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return r.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(i,e){return A.isEmpty(i)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var t in i)if(i[t]!==e.get(t))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),A.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(A.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return A.invoke(this.models,"get",e)},fetch:function(i){void 0===(i=i?A.clone(i):{}).parse&&(i.parse=!0);var n=i.success,r=this;return i.success=function(e){var t=i.reset?"reset":"set";r[t](e,i),n&&n(r,e,i),r.trigger("sync",r,e,i)},L(this,i),this.sync("read",this,i)},create:function(e,i){if(i=i?A.clone(i):{},!(e=this._prepareModel(e,i)))return!1;i.wait||this.add(e,i);var n=this,r=i.success;return i.success=function(e,t){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,i),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof x)return e;var i=new(((t=t?A.clone(t):{}).collection=this).model)(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_addReference:function(e,t){null!=(this._byId[e.cid]=e).id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});A.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],function(t){c.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),A[t].apply(A,e)}});A.each(["groupBy","countBy","sortBy","indexBy"],function(n){c.prototype[n]=function(t,e){var i=A.isFunction(t)?t:function(e){return e.get(t)};return A[n](this.models,i,e)}});var d=a.View=function(e){this.cid=A.uniqueId("view"),e||(e={}),A.extend(this,A.pick(e,f)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},p=/^(\S+)\s*(.*)$/,f=["model","collection","el","id","attributes","className","tagName","events"];A.extend(d.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof a.$?e:a.$(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=A.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var i=e[t];if(A.isFunction(i)||(i=this[e[t]]),i){var n=t.match(p),r=n[1],s=n[2];i=A.bind(i,this),r+=".delegateEvents"+this.cid,""===s?this.$el.on(r,i):this.$el.on(r,s,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(A.result(this,"el"),!1);else{var e=A.extend({},A.result(this,"attributes"));this.id&&(e.id=A.result(this,"id")),this.className&&(e.class=A.result(this,"className"));var t=a.$("<"+A.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}}}),a.sync=function(e,t,i){var n=g[e];A.defaults(i||(i={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var r={type:n,dataType:"json"};if(i.url||(r.url=A.result(t,"url")||P()),null!=i.data||!t||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(i.attrs||t.toJSON(i))),i.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),i.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){r.type="POST",i.emulateJSON&&(r.data._method=n);var s=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",n),s)return s.apply(this,arguments)}}"GET"===r.type||i.emulateJSON||(r.processData=!1),"PATCH"===r.type&&m&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var o=i.xhr=a.ajax(A.extend(r,i));return t.trigger("request",t,o,i),o};var m=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),g={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var v=a.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},_=/\((.*?)\)/g,y=/(\(\?)?:\w+/g,w=/\*\w+/g,b=/[\-{}\[\]+?.,\\\^$|#\s]/g;A.extend(v.prototype,s,{initialize:function(){},route:function(i,n,r){A.isRegExp(i)||(i=this._routeToRegExp(i)),A.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var s=this;return a.history.route(i,function(e){var t=s._extractParameters(i,e);s.execute(r,t),s.trigger.apply(s,["route:"+n].concat(t)),s.trigger("route",n,t),a.history.trigger("route",s,n,t)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,t){return a.history.navigate(e,t),this},_bindRoutes:function(){if(this.routes){this.routes=A.result(this,"routes");for(var e,t=A.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(b,"\\$&").replace(_,"(?:$1)?").replace(y,function(e,t){return t?e:"([^/?]+)"}).replace(w,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return A.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var E=a.History=function(){this.handlers=[],A.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},S=/^[#\/]|\s+$/g,k=/^\/+|\/+$/g,M=/msie [\w.]+/,C=/\/$/,I=/#.*$/;E.started=!1,A.extend(E.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(C,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(S,"")},start:function(e){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=A.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),i=document.documentMode,n=M.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);if(this.root=("/"+this.root+"/").replace(k,"/"),n&&this._wantsHashChange){var r=a.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=r.hide().appendTo("body")[0].contentWindow,this.navigate(t)}this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var s=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(S,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),E.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),A.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(e,t){if(!E.started)return!1;t&&!0!==t||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(I,""),this.fragment!==e){if(""===(this.fragment=e)&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),a.history=new E;x.extend=c.extend=v.extend=d.extend=E.extend=function(e,t){var i,n=this;i=e&&A.has(e,"constructor")?e.constructor:function(){return n.apply(this,arguments)},A.extend(i,n,t);var r=function(){this.constructor=i};return r.prototype=n.prototype,i.prototype=new r,e&&A.extend(i.prototype,e),i.__super__=n.prototype,i};var P=function(){throw new Error('A "url" property or function must be specified')},L=function(t,i){var n=i.error;i.error=function(e){n&&n(t,e,i),t.trigger("error",t,e,i)}};return a})},{underscore:"underscore"}],"classlist-polyfill":[function(e,t,i){"document"in window.self&&("classList"in document.createElement("_")?function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var n=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var t,i=arguments.length;for(t=0;t<i;t++)e=arguments[t],n.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:i.call(this,e)}}e=null}():function(e){"use strict";if("Element"in e){var t="classList",i="prototype",n=e.Element[i],r=Object,s=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[i].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1},a=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(e,t)},c=function(e){for(var t=s.call(e.getAttribute("class")||""),i=t?t.split(/\s+/):[],n=0,r=i.length;n<r;n++)this.push(i[n]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},h=c[i]=[],u=function(){return new c(this)};if(a[i]=Error[i],h.item=function(e){return this[e]||null},h.contains=function(e){return-1!==l(this,e+="")},h.add=function(){for(var e,t=arguments,i=0,n=t.length,r=!1;e=t[i]+"",-1===l(this,e)&&(this.push(e),r=!0),++i<n;);r&&this._updateClassName()},h.remove=function(){var e,t,i=arguments,n=0,r=i.length,s=!1;do{for(e=i[n]+"",t=l(this,e);-1!==t;)this.splice(t,1),s=!0,t=l(this,e)}while(++n<r);s&&this._updateClassName()},h.toggle=function(e,t){e+="";var i=this.contains(e),n=i?!0!==t&&"remove":!1!==t&&"add";return n&&this[n](e),!0===t||!1===t?t:!i},h.toString=function(){return this.join(" ")},r.defineProperty){var d={get:u,enumerable:!0,configurable:!0};try{r.defineProperty(n,t,d)}catch(e){-2146823252===e.number&&(d.enumerable=!1,r.defineProperty(n,t,d))}}else r[i].__defineGetter__&&n.__defineGetter__(t,u)}}(window.self))},{}],color:[function(e,t,i){var c=e("color-convert"),n=e("color-string"),r=function(e){if(e instanceof r)return e;if(!(this instanceof r))return new r(e);if(this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},"string"==typeof e)if(t=n.getRgba(e))this.setValues("rgb",t);else if(t=n.getHsla(e))this.setValues("hsl",t);else{if(!(t=n.getHwb(e)))throw new Error('Unable to parse color from string "'+e+'"');this.setValues("hwb",t)}else if("object"==typeof e){var t;if(void 0!==(t=e).r||void 0!==t.red)this.setValues("rgb",t);else if(void 0!==t.l||void 0!==t.lightness)this.setValues("hsl",t);else if(void 0!==t.v||void 0!==t.value)this.setValues("hsv",t);else if(void 0!==t.w||void 0!==t.whiteness)this.setValues("hwb",t);else{if(void 0===t.c&&void 0===t.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(e));this.setValues("cmyk",t)}}};r.prototype={rgb:function(e){return this.setSpace("rgb",arguments)},hsl:function(e){return this.setSpace("hsl",arguments)},hsv:function(e){return this.setSpace("hsv",arguments)},hwb:function(e){return this.setSpace("hwb",arguments)},cmyk:function(e){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){return 1!==this.values.alpha?this.values.hwb.concat([this.values.alpha]):this.values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){return this.values.rgb.concat([this.values.alpha])},hslaArray:function(){return this.values.hsl.concat([this.values.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return n.hexString(this.values.rgb)},rgbString:function(){return n.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return n.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return n.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return n.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return n.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return n.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return n.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){return this.values.rgb[0]<<16|this.values.rgb[1]<<8|this.values.rgb[2]},luminosity:function(){for(var e=this.values.rgb,t=[],i=0;i<e.length;i++){var n=e[i]/255;t[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),i=e.luminosity();return i<t?(t+.05)/(i+.05):(i+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return 7.1<=t?"AAA":4.5<=t?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){return this.values.hsl[2]+=this.values.hsl[2]*e,this.setValues("hsl",this.values.hsl),this},darken:function(e){return this.values.hsl[2]-=this.values.hsl[2]*e,this.setValues("hsl",this.values.hsl),this},saturate:function(e){return this.values.hsl[1]+=this.values.hsl[1]*e,this.setValues("hsl",this.values.hsl),this},desaturate:function(e){return this.values.hsl[1]-=this.values.hsl[1]*e,this.setValues("hsl",this.values.hsl),this},whiten:function(e){return this.values.hwb[1]+=this.values.hwb[1]*e,this.setValues("hwb",this.values.hwb),this},blacken:function(e){return this.values.hwb[2]+=this.values.hwb[2]*e,this.setValues("hwb",this.values.hwb),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){return this.setValues("alpha",this.values.alpha-this.values.alpha*e),this},opaquer:function(e){return this.setValues("alpha",this.values.alpha+this.values.alpha*e),this},rotate:function(e){var t=this.values.hsl[0];return t=(t=(t+e)%360)<0?360+t:t,this.values.hsl[0]=t,this.setValues("hsl",this.values.hsl),this},mix:function(e,t){var i=e,n=void 0!==t?t:.5,r=2*n-1,s=this.alpha()-i.alpha(),o=((r*s==-1?r:(r+s)/(1+r*s))+1)/2,a=1-o;return this.rgb(o*this.red()+a*i.red(),o*this.green()+a*i.green(),o*this.blue()+a*i.blue()).alpha(this.alpha()*n+i.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){return new r(this.rgb())}},r.prototype.getValues=function(e){for(var t={},i=0;i<e.length;i++)t[e.charAt(i)]=this.values[e][i];return 1!=this.values.alpha&&(t.a=this.values.alpha),t},r.prototype.setValues=function(e,t){var i={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},n={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},r=1;if("alpha"==e)r=t;else if(t.length)this.values[e]=t.slice(0,e.length),r=t[e.length];else if(void 0!==t[e.charAt(0)]){for(var s=0;s<e.length;s++)this.values[e][s]=t[e.charAt(s)];r=t.a}else if(void 0!==t[i[e][0]]){var o=i[e];for(s=0;s<e.length;s++)this.values[e][s]=t[o[s]];r=t.alpha}if(this.values.alpha=Math.max(0,Math.min(1,void 0!==r?r:this.values.alpha)),"alpha"!=e){for(s=0;s<e.length;s++){var a=Math.max(0,Math.min(n[e][s],this.values[e][s]));this.values[e][s]=Math.round(a)}for(var l in i){l!=e&&(this.values[l]=c[e][l](this.values[e]));for(s=0;s<l.length;s++){a=Math.max(0,Math.min(n[l][s],this.values[l][s]));this.values[l][s]=Math.round(a)}}return!0}},r.prototype.setSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i),this)},r.prototype.setChannel=function(e,t,i){return void 0===i?this.values[e][t]:(this.values[e][t]=i,this.setValues(e,this.values[e]),this)},t.exports=r},{"color-convert":2,"color-string":3}],"cookies-js":[function(e,n,r){!function(e,o){"use strict";var t=function(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var s=function(e,t,i){return 1===arguments.length?s.get(e):s.set(e,t,i)};return s._document=e.document,s._cacheKeyPrefix="cookey.",s._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),s.defaults={path:"/",secure:!1},s.get=function(e){s._cachedDocumentCookie!==s._document.cookie&&s._renewCache();var t=s._cache[s._cacheKeyPrefix+e];return t===o?o:decodeURIComponent(t)},s.set=function(e,t,i){return(i=s._getExtendedOptions(i)).expires=s._getExpiresDate(t===o?-1:i.expires),s._document.cookie=s._generateCookieString(e,t,i),s},s.expire=function(e,t){return s.set(e,o,t)},s._getExtendedOptions=function(e){return{path:e&&e.path||s.defaults.path,domain:e&&e.domain||s.defaults.domain,expires:e&&e.expires||s.defaults.expires,secure:e&&e.secure!==o?e.secure:s.defaults.secure}},s._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},s._getExpiresDate=function(e,t){if(t=t||new Date,"number"==typeof e?e=e===1/0?s._maxExpireDate:new Date(t.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!s._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},s._generateCookieString=function(e,t,i){var n=(e=(e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return n+=(i=i||{}).path?";path="+i.path:"",n+=i.domain?";domain="+i.domain:"",n+=i.expires?";expires="+i.expires.toUTCString():"",n+=i.secure?";secure":""},s._getCacheFromString=function(e){for(var t={},i=e?e.split("; "):[],n=0;n<i.length;n++){var r=s._getKeyValuePairFromCookieString(i[n]);t[s._cacheKeyPrefix+r.key]===o&&(t[s._cacheKeyPrefix+r.key]=r.value)}return t},s._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var i,n=e.substr(0,t);try{i=decodeURIComponent(n)}catch(e){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+n+'"',e)}return{key:i,value:e.substr(t+1)}},s._renewCache=function(){s._cache=s._getCacheFromString(s._document.cookie),s._cachedDocumentCookie=s._document.cookie},s._areEnabled=function(){var e="cookies.js",t="1"===s.set(e,1).get(e);return s.expire(e),t},s.enabled=s._areEnabled(),s},i="object"==typeof e.document?t(e):t;"function"==typeof define&&define.amd?define(function(){return i}):"object"==typeof r?("object"==typeof n&&"object"==typeof n.exports&&(r=n.exports=i),r.Cookies=i):e.Cookies=i}("undefined"==typeof window?this:window)},{}],"es6-promise":[function(q,i,n){(function(B,j){var e,t;e=this,t=function(){"use strict";function c(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,t=void 0,r=void 0,a=function(e,t){d[n]=e,d[n+1]=t,2===(n+=2)&&(r?r(p):_())};var e="undefined"!=typeof window?window:void 0,s=e||{},o=s.MutationObserver||s.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==B&&"[object process]"==={}.toString.call(B),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function u(){var e=setTimeout;return function(){return e(p,1)}}var d=new Array(1e3);function p(){for(var e=0;e<n;e+=2){(0,d[e])(d[e+1]),d[e]=void 0,d[e+1]=void 0}n=0}var f,m,g,v,_=void 0;function y(e,t){var i=this,n=new this.constructor(A);void 0===n[b]&&D(n);var r=i._state;if(r){var s=arguments[r-1];a(function(){return V(r,n,s,i._result)})}else N(i,n,e,t);return n}function w(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(A);return C(t,e),t}l?_=function(){return B.nextTick(p)}:o?(m=0,g=new o(p),v=document.createTextNode(""),g.observe(v,{characterData:!0}),_=function(){v.data=m=++m%2}):h?((f=new MessageChannel).port1.onmessage=p,_=function(){return f.port2.postMessage(0)}):_=void 0===e&&"function"==typeof q?function(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(p)}:u()}catch(e){return u()}}():u();var b=Math.random().toString(36).substring(2);function A(){}var x=void 0,T=1,E=2,S={error:null};function k(e){try{return e.then}catch(e){return S.error=e,S}}function M(e,t,i){var n,r,s,o;t.constructor===e.constructor&&i===y&&t.constructor.resolve===w?(s=e,(o=t)._state===T?P(s,o._result):o._state===E?L(s,o._result):N(o,void 0,function(e){return C(s,e)},function(e){return L(s,e)})):i===S?(L(e,S.error),S.error=null):void 0===i?P(e,t):c(i)?(n=t,r=i,a(function(t){var i=!1,e=function(e,t,i,n){try{e.call(t,i,n)}catch(e){return e}}(r,n,function(e){i||(i=!0,n!==e?C(t,e):P(t,e))},function(e){i||(i=!0,L(t,e))},t._label);!i&&e&&(i=!0,L(t,e))},e)):P(e,t)}function C(e,t){var i,n;e===t?L(e,new TypeError("You cannot resolve a promise with itself")):(n=typeof(i=t),null===i||"object"!==n&&"function"!==n?P(e,t):M(e,t,k(t)))}function I(e){e._onerror&&e._onerror(e._result),O(e)}function P(e,t){e._state===x&&(e._result=t,e._state=T,0!==e._subscribers.length&&a(O,e))}function L(e,t){e._state===x&&(e._state=E,e._result=t,a(I,e))}function N(e,t,i,n){var r=e._subscribers,s=r.length;e._onerror=null,r[s]=t,r[s+T]=i,r[s+E]=n,0===s&&e._state&&a(O,e)}function O(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n=void 0,r=void 0,s=e._result,o=0;o<t.length;o+=3)n=t[o],r=t[o+i],n?V(i,n,r,s):r(s);e._subscribers.length=0}}function V(e,t,i,n){var r=c(i),s=void 0,o=void 0,a=void 0,l=void 0;if(r){if((s=function(e,t){try{return e(t)}catch(e){return S.error=e,S}}(i,n))===S?(l=!0,o=s.error,s.error=null):a=!0,t===s)return void L(t,new TypeError("A promises callback cannot return that same promise."))}else s=n,a=!0;t._state!==x||(r&&a?C(t,s):l?L(t,o):e===T?P(t,s):e===E&&L(t,s))}var R=0;function D(e){e[b]=R++,e._state=void 0,e._result=void 0,e._subscribers=[]}var F=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(A),this.promise[b]||D(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?P(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&P(this.promise,this._result))):L(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===x&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===w){var r=k(t);if(r===y&&t._state!==x)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(i===z){var s=new i(A);M(s,t,r),this._willSettleAt(s,e)}else this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},e.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===x&&(this._remaining--,e===E?L(n,i):this._result[t]=i),0===this._remaining&&P(n,this._result)},e.prototype._willSettleAt=function(e,t){var i=this;N(e,void 0,function(e){return i._settledAt(T,t,e)},function(e){return i._settledAt(E,t,e)})},e}();var z=function(){function t(e){this[b]=R++,this._result=this._state=void 0,this._subscribers=[],A!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){C(t,e)},function(e){L(t,e)})}catch(e){L(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var i=this.constructor;return this.then(function(e){return i.resolve(t()).then(function(){return e})},function(e){return i.resolve(t()).then(function(){throw e})})},t}();return z.prototype.then=y,z.all=function(e){return new F(this,e).promise},z.race=function(r){var s=this;return i(r)?new s(function(e,t){for(var i=r.length,n=0;n<i;n++)s.resolve(r[n]).then(e,t)}):new s(function(e,t){return t(new TypeError("You must pass an array to race."))})},z.resolve=w,z.reject=function(e){var t=new this(A);return L(t,e),t},z._setScheduler=function(e){r=e},z._setAsap=function(e){a=e},z._asap=a,z.polyfill=function(){var e=void 0;if(void 0!==j)e=j;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=z},z.Promise=z},"object"==typeof n&&void 0!==i?i.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}).call(this,q("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:25}],"fullscreen-polyfill":[function(e,t,i){!function(n){"use strict";var t,e,i={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},r=i.w3;for(e in i)if(i[e].enabled in n){t=i[e];break}function s(e,t){var i=n.createEvent("Event");i.initEvent(e,!0,!1),t.dispatchEvent(i)}r.enabled in n||!t||(n.addEventListener(t.events.change,function(e){n[r.enabled]=n[t.enabled],n[r.element]=n[t.element],s(r.events.change,e.target)},!1),n.addEventListener(t.events.error,function(e){s(r.events.error,e.target)},!1),n[r.enabled]=n[t.enabled],n[r.element]=n[t.element],n[r.exit]=n[t.exit],Element.prototype[r.request]=function(){return this[t.request].apply(this,arguments)})}(document)},{}],hammerjs:[function(e,Ge,t){!function(s,a,e,m){"use strict";var o,l=["","webkit","Moz","MS","ms","o"],t=a.createElement("div"),i="function",c=Math.round,g=Math.abs,v=Date.now;function h(e,t,i){return setTimeout(_(e,i),t)}function n(e,t,i){return!!Array.isArray(e)&&(u(e,i[t],i),!0)}function u(e,t,i){var n;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==m)for(n=0;n<e.length;)t.call(i,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(i,e[n],n,e)}function r(n,e,t){var r="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=s.console&&(s.console.warn||s.console.log);return i&&i.call(s.console,r,t),n.apply(this,arguments)}}o="function"!=typeof Object.assign?function(e){if(e===m||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==m&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}:Object.assign;var d=r(function(e,t,i){for(var n=Object.keys(t),r=0;r<n.length;)(!i||i&&e[n[r]]===m)&&(e[n[r]]=t[n[r]]),r++;return e},"extend","Use `assign`."),p=r(function(e,t){return d(e,t,!0)},"merge","Use `assign`.");function f(e,t,i){var n,r=t.prototype;(n=e.prototype=Object.create(r)).constructor=e,n._super=r,i&&o(n,i)}function _(e,t){return function(){return e.apply(t,arguments)}}function y(e,t){return typeof e==i?e.apply(t&&t[0]||m,t):e}function w(e,t){return e===m?t:e}function b(t,e,i){u(E(e),function(e){t.addEventListener(e,i,!1)})}function A(t,e,i){u(E(e),function(e){t.removeEventListener(e,i,!1)})}function x(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function T(e,t){return-1<e.indexOf(t)}function E(e){return e.trim().split(/\s+/g)}function S(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var n=0;n<e.length;){if(i&&e[n][i]==t||!i&&e[n]===t)return n;n++}return-1}function k(e){return Array.prototype.slice.call(e,0)}function M(e,i,t){for(var n=[],r=[],s=0;s<e.length;){var o=i?e[s][i]:e[s];S(r,o)<0&&n.push(e[s]),r[s]=o,s++}return t&&(n=i?n.sort(function(e,t){return e[i]>t[i]}):n.sort()),n}function C(e,t){for(var i,n,r=t[0].toUpperCase()+t.slice(1),s=0;s<l.length;){if((n=(i=l[s])?i+r:t)in e)return n;s++}return m}var I=1;function P(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||s}var L="ontouchstart"in s,N=C(s,"PointerEvent")!==m,O=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),V="touch",R=25,D=1,F=4,z=8,B=1,j=2,q=4,H=8,G=16,W=j|q,U=H|G,Y=W|U,X=["x","y"],Q=["clientX","clientY"];function Z(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){y(t.options.enable,[t])&&i.handler(e)},this.init()}function J(e,t,i){var n=i.pointers.length,r=i.changedPointers.length,s=t&D&&n-r==0,o=t&(F|z)&&n-r==0;i.isFirst=!!s,i.isFinal=!!o,s&&(e.session={}),i.eventType=t,function(e,t){var i=e.session,n=t.pointers,r=n.length;i.firstInput||(i.firstInput=K(t));1<r&&!i.firstMultiple?i.firstMultiple=K(t):1===r&&(i.firstMultiple=!1);var s=i.firstInput,o=i.firstMultiple,a=o?o.center:s.center,l=t.center=$(n);t.timeStamp=v(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=ne(a,l),t.distance=ie(a,l),function(e,t){var i=t.center,n=e.offsetDelta||{},r=e.prevDelta||{},s=e.prevInput||{};t.eventType!==D&&s.eventType!==F||(r=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=e.offsetDelta={x:i.x,y:i.y});t.deltaX=r.x+(i.x-n.x),t.deltaY=r.y+(i.y-n.y)}(i,t),t.offsetDirection=te(t.deltaX,t.deltaY);var c=ee(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=g(c.x)>g(c.y)?c.x:c.y,t.scale=o?(d=o.pointers,p=n,ie(p[0],p[1],Q)/ie(d[0],d[1],Q)):1,t.rotation=o?(h=o.pointers,u=n,ne(u[1],u[0],Q)+ne(h[1],h[0],Q)):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,function(e,t){var i,n,r,s,o=e.lastInterval||t,a=t.timeStamp-o.timeStamp;if(t.eventType!=z&&(R<a||o.velocity===m)){var l=t.deltaX-o.deltaX,c=t.deltaY-o.deltaY,h=ee(a,l,c);n=h.x,r=h.y,i=g(h.x)>g(h.y)?h.x:h.y,s=te(l,c),e.lastInterval=t}else i=o.velocity,n=o.velocityX,r=o.velocityY,s=o.direction;t.velocity=i,t.velocityX=n,t.velocityY=r,t.direction=s}(i,t);var h,u;var d,p;var f=e.element;x(t.srcEvent.target,f)&&(f=t.srcEvent.target);t.target=f}(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function K(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:c(e.pointers[i].clientX),clientY:c(e.pointers[i].clientY)},i++;return{timeStamp:v(),pointers:t,center:$(t),deltaX:e.deltaX,deltaY:e.deltaY}}function $(e){var t=e.length;if(1===t)return{x:c(e[0].clientX),y:c(e[0].clientY)};for(var i=0,n=0,r=0;r<t;)i+=e[r].clientX,n+=e[r].clientY,r++;return{x:c(i/t),y:c(n/t)}}function ee(e,t,i){return{x:t/e||0,y:i/e||0}}function te(e,t){return e===t?B:g(e)>=g(t)?e<0?j:q:t<0?H:G}function ie(e,t,i){i||(i=X);var n=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return Math.sqrt(n*n+r*r)}function ne(e,t,i){i||(i=X);var n=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return 180*Math.atan2(r,n)/Math.PI}Z.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(P(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(P(this.element),this.evWin,this.domHandler)}};var re={mousedown:D,mousemove:2,mouseup:F},se="mousedown",oe="mousemove mouseup";function ae(){this.evEl=se,this.evWin=oe,this.pressed=!1,Z.apply(this,arguments)}f(ae,Z,{handler:function(e){var t=re[e.type];t&D&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=F),this.pressed&&(t&F&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var le={pointerdown:D,pointermove:2,pointerup:F,pointercancel:z,pointerout:z},ce={2:V,3:"pen",4:"mouse",5:"kinect"},he="pointerdown",ue="pointermove pointerup pointercancel";function de(){this.evEl=he,this.evWin=ue,Z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}s.MSPointerEvent&&!s.PointerEvent&&(he="MSPointerDown",ue="MSPointerMove MSPointerUp MSPointerCancel"),f(de,Z,{handler:function(e){var t=this.store,i=!1,n=e.type.toLowerCase().replace("ms",""),r=le[n],s=ce[e.pointerType]||e.pointerType,o=s==V,a=S(t,e.pointerId,"pointerId");r&D&&(0===e.button||o)?a<0&&(t.push(e),a=t.length-1):r&(F|z)&&(i=!0),a<0||(t[a]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:s,srcEvent:e}),i&&t.splice(a,1))}});var pe={touchstart:D,touchmove:2,touchend:F,touchcancel:z};function fe(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,Z.apply(this,arguments)}f(fe,Z,{handler:function(e){var t=pe[e.type];if(t===D&&(this.started=!0),this.started){var i=function(e,t){var i=k(e.touches),n=k(e.changedTouches);t&(F|z)&&(i=M(i.concat(n),"identifier",!0));return[i,n]}.call(this,e,t);t&(F|z)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:V,srcEvent:e})}}});var me={touchstart:D,touchmove:2,touchend:F,touchcancel:z},ge="touchstart touchmove touchend touchcancel";function ve(){this.evTarget=ge,this.targetIds={},Z.apply(this,arguments)}f(ve,Z,{handler:function(e){var t=me[e.type],i=function(e,t){var i=k(e.touches),n=this.targetIds;if(t&(2|D)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=k(e.changedTouches),a=[],l=this.target;if(s=i.filter(function(e){return x(e.target,l)}),t===D)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;r=0;for(;r<o.length;)n[o[r].identifier]&&a.push(o[r]),t&(F|z)&&delete n[o[r].identifier],r++;if(!a.length)return;return[M(s.concat(a),"identifier",!0),a]}.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:V,srcEvent:e})}});var _e=2500;function ye(){Z.apply(this,arguments);var e=_(this.handler,this);this.touch=new ve(this.manager,e),this.mouse=new ae(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function we(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var e=n.indexOf(i);-1<e&&n.splice(e,1)},_e)}}f(ye,Z,{handler:function(e,t,i){var n=i.pointerType==V,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(e,t){e&D?(this.primaryTouch=t.changedPointers[0].identifier,we.call(this,t)):e&(F|z)&&we.call(this,t)}).call(this,t,i);else if(r&&function(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(t-r.x),o=Math.abs(i-r.y);if(s<=25&&o<=25)return!0}return!1}.call(this,i))return;this.callback(e,t,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var be=C(t.style,"touchAction"),Ae=be!==m,xe="manipulation",Te="none",Ee="pan-x",Se="pan-y",ke=function(){if(!Ae)return!1;var t={},i=s.CSS&&s.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!i||s.CSS.supports("touch-action",e)}),t}();function Me(e,t){this.manager=e,this.set(t)}Me.prototype={set:function(e){"compute"==e&&(e=this.compute()),Ae&&this.manager.element.style&&ke[e]&&(this.manager.element.style[be]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return u(this.manager.recognizers,function(e){y(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(T(e,Te))return Te;var t=T(e,Ee),i=T(e,Se);if(t&&i)return Te;if(t||i)return t?Ee:Se;if(T(e,xe))return xe;return"auto"}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,r=T(n,Te)&&!ke.none,s=T(n,Se)&&!ke[Se],o=T(n,Ee)&&!ke[Ee];if(r){var a=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(a&&l&&c)return}if(!o||!s)return r||s&&i&W||o&&i&U?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Ce=1;function Ie(e){this.options=o({},this.defaults,e||{}),this.id=I++,this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=Ce,this.simultaneous={},this.requireFail=[]}function Pe(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Le(e){return e==G?"down":e==H?"up":e==j?"left":e==q?"right":""}function Ne(e,t){var i=t.manager;return i?i.get(e):e}function Oe(){Ie.apply(this,arguments)}function Ve(){Oe.apply(this,arguments),this.pX=null,this.pY=null}function Re(){Oe.apply(this,arguments)}function De(){Ie.apply(this,arguments),this._timer=null,this._input=null}function Fe(){Oe.apply(this,arguments)}function ze(){Oe.apply(this,arguments)}function Be(){Ie.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function je(e,t){return(t=t||{}).recognizers=w(t.recognizers,je.defaults.preset),new qe(e,t)}Ie.prototype={defaults:{},set:function(e){return o(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(n(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Ne(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return n(e,"dropRecognizeWith",this)||(e=Ne(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(n(e,"requireFailure",this))return this;var t=this.requireFail;return-1===S(t,e=Ne(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(n(e,"dropRequireFailure",this))return this;e=Ne(e,this);var t=S(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){var i=this,e=this.state;function n(e){i.manager.emit(e,t)}e<8&&n(i.options.event+Pe(e)),n(i.options.event),t.additionalEvent&&n(t.additionalEvent),8<=e&&n(i.options.event+Pe(e))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Ce)))return!1;e++}return!0},recognize:function(e){var t=o({},e);if(!y(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=Ce),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},f(Oe,Ie,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,n=6&t,r=this.attrTest(e);return n&&(i&z||!r)?16|t:n||r?i&F?8|t:2&t?4|t:2:32}}),f(Ve,Oe,{defaults:{event:"pan",threshold:10,pointers:1,direction:Y},getTouchAction:function(){var e=this.options.direction,t=[];return e&W&&t.push(Se),e&U&&t.push(Ee),t},directionTest:function(e){var t=this.options,i=!0,n=e.distance,r=e.direction,s=e.deltaX,o=e.deltaY;return r&t.direction||(t.direction&W?(r=0===s?B:s<0?j:q,i=s!=this.pX,n=Math.abs(e.deltaX)):(r=0===o?B:o<0?H:G,i=o!=this.pY,n=Math.abs(e.deltaY))),e.direction=r,i&&n>t.threshold&&r&t.direction},attrTest:function(e){return Oe.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Le(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),f(Re,Oe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Te]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),f(De,Ie,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!n||!i||e.eventType&(F|z)&&!r)this.reset();else if(e.eventType&D)this.reset(),this._timer=h(function(){this.state=8,this.tryEmit()},t.time,this);else if(e.eventType&F)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&F?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=v(),this.manager.emit(this.options.event,this._input)))}}),f(Fe,Oe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Te]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),f(ze,Oe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:W|U,pointers:1},getTouchAction:function(){return Ve.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(W|U)?t=e.overallVelocity:i&W?t=e.overallVelocityX:i&U&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&g(t)>this.options.velocity&&e.eventType&F},emit:function(e){var t=Le(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),f(Be,Ie,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xe]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&D&&0===this.count)return this.failTimeout();if(n&&r&&i){if(e.eventType!=F)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||ie(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&s?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=h(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=h(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),je.VERSION="2.0.7",je.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Fe,{enable:!1}],[Re,{enable:!1},["rotate"]],[ze,{direction:W}],[Ve,{direction:W},["swipe"]],[Be],[Be,{event:"doubletap",taps:2},["tap"]],[De]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function qe(e,t){var i;this.options=o({},je.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((i=this).options.inputClass||(N?de:O?ve:L?ye:ae))(i,J),this.touchAction=new Me(this,this.options.touchAction),He(this,!0),u(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function He(i,n){var r,s=i.element;s.style&&(u(i.options.cssProps,function(e,t){r=C(s.style,t),n?(i.oldCssProps[r]=s.style[r],s.style[r]=e):s.style[r]=i.oldCssProps[r]||""}),n||(i.oldCssProps={}))}qe.prototype={set:function(e){return o(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var i;this.touchAction.preventDefaults(e);var n=this.recognizers,r=t.curRecognizer;(!r||r&&8&r.state)&&(r=t.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===t.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(e),!r&&14&i.state&&(r=t.curRecognizer=i),s++}},get:function(e){if(e instanceof Ie)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(n(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){if(n(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,i=S(t,e);-1!==i&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){if(e!==m&&t!==m){var i=this.handlers;return u(E(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this}},off:function(e,t){if(e!==m){var i=this.handlers;return u(E(e),function(e){t?i[e]&&i[e].splice(S(i[e],t),1):delete i[e]}),this}},emit:function(e,t){var i,n,r;this.options.domEvents&&(i=e,n=t,(r=a.createEvent("Event")).initEvent(i,!0,!0),(r.gesture=n).target.dispatchEvent(r));var s=this.handlers[e]&&this.handlers[e].slice();if(s&&s.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](t),o++}},destroy:function(){this.element&&He(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(je,{INPUT_START:D,INPUT_MOVE:2,INPUT_END:F,INPUT_CANCEL:z,STATE_POSSIBLE:Ce,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:B,DIRECTION_LEFT:j,DIRECTION_RIGHT:q,DIRECTION_UP:H,DIRECTION_DOWN:G,DIRECTION_HORIZONTAL:W,DIRECTION_VERTICAL:U,DIRECTION_ALL:Y,Manager:qe,Input:Z,TouchAction:Me,TouchInput:ve,MouseInput:ae,PointerEventInput:de,TouchMouseInput:ye,SingleTouchInput:fe,Recognizer:Ie,AttrRecognizer:Oe,Tap:Be,Pan:Ve,Swipe:ze,Pinch:Re,Rotate:Fe,Press:De,on:b,off:A,each:u,merge:p,extend:d,assign:o,inherit:f,bindFn:_,prefixed:C}),(void 0!==s?s:"undefined"!=typeof self?self:{}).Hammer=je,"function"==typeof define&&define.amd?define(function(){return je}):void 0!==Ge&&Ge.exports?Ge.exports=je:s.Hammer=je}(window,document)},{}],"matches-polyfill":[function(e,t,i){!function(e){var t=["ms","moz","webkit","o"],i=-1;for(i=0;i<t.length&&!e.matches;++i)e.matches=e[t[i]+"MatchesSelector"];e.matches||console.warn("No native Element.prototype.matches found"),e.matches||(e.matches=function(e){for(var t=(this.parentNode||this.document).querySelectorAll(e),i=-1;t[++i]&&t[i]!=this;);return!!t[i]})}(window.Element.prototype)},{}],"math-sign-polyfill":[function(e,t,i){Math.sign||(Math.sign=function(e){return(0<e)-(e<0)||+e})},{}],"modernizr-dist":[function(require,module,exports){!function(window,document,undefined){var tests=[],ModernizrProto={_version:"3.6.0",_config:{classPrefix:"has-",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var i=this;setTimeout(function(){t(i[e])},0)},addTest:function(e,t,i){tests.push({name:e,fn:t,options:i})},addAsyncTest:function(e){tests.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=ModernizrProto,Modernizr=new Modernizr;var classes=[];function is(e,t){return typeof e===t}function testRunner(){var e,t,i,n,r,s;for(var o in tests)if(tests.hasOwnProperty(o)){if(e=[],(t=tests[o]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(i=0;i<t.options.aliases.length;i++)e.push(t.options.aliases[i].toLowerCase());for(n=is(t.fn,"function")?t.fn():t.fn,r=0;r<e.length;r++)1===(s=e[r].split(".")).length?Modernizr[s[0]]=n:(!Modernizr[s[0]]||Modernizr[s[0]]instanceof Boolean||(Modernizr[s[0]]=new Boolean(Modernizr[s[0]])),Modernizr[s[0]][s[1]]=n),classes.push((n?"":"no-")+s.join("-"))}}var docElement=document.documentElement,isSVG="svg"===docElement.nodeName.toLowerCase();function createElement(){return"function"!=typeof document.createElement?document.createElement(arguments[0]):isSVG?document.createElementNS.call(document,"http://www.w3.org/2000/svg",arguments[0]):document.createElement.apply(document,arguments)}var hasEvent=(Hwa=!("onblur"in document.documentElement),function(e,t){var i;return!!e&&(t&&"string"!=typeof t||(t=createElement(t||"div")),!(i=(e="on"+e)in t)&&Hwa&&(t.setAttribute||(t=createElement("div")),t.setAttribute(e,""),i="function"==typeof t[e],t[e]!==undefined&&(t[e]=undefined),t.removeAttribute(e)),i)}),Hwa;function getBody(){var e=document.body;return e||((e=createElement(isSVG?"svg":"body")).fake=!0),e}function injectElementWithStyles(e,t,i,n){var r,s,o,a,l="modernizr",c=createElement("div"),h=getBody();if(parseInt(i,10))for(;i--;)(o=createElement("div")).id=n?n[i]:l+(i+1),c.appendChild(o);return(r=createElement("style")).type="text/css",r.id="s"+l,(h.fake?h:c).appendChild(r),h.appendChild(c),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),c.id=l,h.fake&&(h.style.background="",h.style.overflow="hidden",a=docElement.style.overflow,docElement.style.overflow="hidden",docElement.appendChild(h)),s=t(c,e),h.fake?(h.parentNode.removeChild(h),docElement.style.overflow=a,docElement.offsetHeight):c.parentNode.removeChild(c),!!s}ModernizrProto.hasEvent=hasEvent;var mq=(Ywa=window.matchMedia||window.msMatchMedia,Ywa?function(e){var t=Ywa(e);return t&&t.matches||!1}:function(e){var t=!1;return injectElementWithStyles("@media "+e+" { #modernizr { position: absolute; } }",function(e){t="absolute"==(window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle).position}),t}),Ywa;ModernizrProto.mq=mq;var omPrefixes="Moz O ms Webkit",cssomPrefixes=ModernizrProto._config.usePrefixes?omPrefixes.split(" "):[];function contains(e,t){return!!~(""+e).indexOf(t)}ModernizrProto._cssomPrefixes=cssomPrefixes;var modElem={elem:createElement("modernizr")};Modernizr._q.push(function(){delete modElem.elem});var mStyle={style:modElem.elem.style};function domToCSS(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function computedStyle(e,t,i){var n;if("getComputedStyle"in window){n=getComputedStyle.call(window,e,t);var r=window.console;if(null!==n)i&&(n=n.getPropertyValue(i));else if(r)r[r.error?"error":"log"].call(r,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else n=!t&&e.currentStyle&&e.currentStyle[i];return n}function nativeTestProps(e,t){var i=e.length;if("CSS"in window&&"supports"in window.CSS){for(;i--;)if(window.CSS.supports(domToCSS(e[i]),t))return!0;return!1}if("CSSSupportsRule"in window){for(var n=[];i--;)n.push("("+domToCSS(e[i])+":"+t+")");return injectElementWithStyles("@supports ("+(n=n.join(" or "))+") { #modernizr { position: absolute; } }",function(e){return"absolute"==computedStyle(e,null,"position")})}return undefined}function cssToDOM(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,i){return t+i.toUpperCase()}).replace(/^-/,"")}function testProps(e,t,i,n){if(n=!is(n,"undefined")&&n,!is(i,"undefined")){var r=nativeTestProps(e,i);if(!is(r,"undefined"))return r}for(var s,o,a,l,c,h=["modernizr","tspan","samp"];!mStyle.style&&h.length;)s=!0,mStyle.modElem=createElement(h.shift()),mStyle.style=mStyle.modElem.style;function u(){s&&(delete mStyle.style,delete mStyle.modElem)}for(a=e.length,o=0;o<a;o++)if(l=e[o],c=mStyle.style[l],contains(l,"-")&&(l=cssToDOM(l)),mStyle.style[l]!==undefined){if(n||is(i,"undefined"))return u(),"pfx"!=t||l;try{mStyle.style[l]=i}catch(e){}if(mStyle.style[l]!=c)return u(),"pfx"!=t||l}return u(),!1}Modernizr._q.unshift(function(){delete mStyle.style});var domPrefixes=ModernizrProto._config.usePrefixes?omPrefixes.toLowerCase().split(" "):[];function fnBind(e,t){return function(){return e.apply(t,arguments)}}function testDOMProps(e,t,i){var n;for(var r in e)if(e[r]in t)return!1===i?e[r]:is(n=t[e[r]],"function")?fnBind(n,i||t):n;return!1}function testPropsAll(e,t,i,n,r){var s=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+cssomPrefixes.join(s+" ")+s).split(" ");return is(t,"string")||is(t,"undefined")?testProps(o,t,n,r):testDOMProps(o=(e+" "+domPrefixes.join(s+" ")+s).split(" "),t,i)}ModernizrProto._domPrefixes=domPrefixes,ModernizrProto.testAllProps=testPropsAll;var atRule=function(e){var t,i=prefixes.length,n=window.CSSRule;if(void 0===n)return undefined;if(!e)return!1;if((t=(e=e.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in n)return"@"+e;for(var r=0;r<i;r++){var s=prefixes[r];if(s.toUpperCase()+"_"+t in n)return"@-"+s.toLowerCase()+"-"+e}return!1};ModernizrProto.atRule=atRule;var prefixed=ModernizrProto.prefixed=function(e,t,i){return 0===e.indexOf("@")?atRule(e):(-1!=e.indexOf("-")&&(e=cssToDOM(e)),t?testPropsAll(e,t,i):testPropsAll(e,"pfx"))},prefixedCSS=ModernizrProto.prefixedCSS=function(e){var t=prefixed(e);return t&&domToCSS(t)};Modernizr.addTest("canvas",function(){var e=createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}),Modernizr.addTest("canvasblending",function(){if(!1===Modernizr.canvas)return!1;var e=createElement("canvas").getContext("2d");try{e.globalCompositeOperation="screen"}catch(e){}return"screen"===e.globalCompositeOperation});var canvas=createElement("canvas");function testAllProps(e,t,i){return testPropsAll(e,undefined,undefined,t,i)}Modernizr.addTest("todataurljpeg",function(){return!!Modernizr.canvas&&0===canvas.toDataURL("image/jpeg").indexOf("data:image/jpeg")}),Modernizr.addTest("todataurlpng",function(){return!!Modernizr.canvas&&0===canvas.toDataURL("image/png").indexOf("data:image/png")}),Modernizr.addTest("todataurlwebp",function(){var e=!1;try{e=!!Modernizr.canvas&&0===canvas.toDataURL("image/webp").indexOf("data:image/webp")}catch(e){}return e}),Modernizr.addTest("canvaswinding",function(){if(!1===Modernizr.canvas)return!1;var e=createElement("canvas").getContext("2d");return e.rect(0,0,10,10),e.rect(2,2,6,6),!1===e.isPointInPath(5,5,"evenodd")}),Modernizr.addTest("canvastext",function(){return!1!==Modernizr.canvas&&"function"==typeof createElement("canvas").getContext("2d").fillText}),ModernizrProto.testAllProps=testAllProps,Modernizr.addTest("cssanimations",testAllProps("animationName","a",!0)),Modernizr.addTest("backgroundblendmode",prefixed("backgroundBlendMode","text")),Modernizr.addTest("backgroundcliptext",function(){return testAllProps("backgroundClip","text")}),Modernizr.addTest("bgpositionshorthand",function(){var e=createElement("a").style,t="right 10px bottom 10px";return e.cssText="background-position: "+t+";",e.backgroundPosition===t}),Modernizr.addTest("bgpositionxy",function(){return testAllProps("backgroundPositionX","3px",!0)&&testAllProps("backgroundPositionY","5px",!0)}),Modernizr.addTest("bgrepeatround",testAllProps("backgroundRepeat","round")),Modernizr.addTest("bgrepeatspace",testAllProps("backgroundRepeat","space")),Modernizr.addTest("backgroundsize",testAllProps("backgroundSize","100%",!0)),Modernizr.addTest("bgsizecover",testAllProps("backgroundSize","cover")),Modernizr.addTest("borderradius",testAllProps("borderRadius","0px",!0)),Modernizr.addTest("boxshadow",testAllProps("boxShadow","1px 1px",!0)),Modernizr.addTest("boxsizing",testAllProps("boxSizing","border-box",!0)&&(document.documentMode===undefined||7<document.documentMode));var prefixes=ModernizrProto._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];ModernizrProto._prefixes=prefixes,Modernizr.addTest("csscalc",function(){var e=createElement("a");return e.style.cssText="width:"+prefixes.join("calc(10px);width:"),!!e.style.length}),Modernizr.addTest("csschunit",function(){var t,e=modElem.elem.style;try{e.fontSize="3ch",t=-1!==e.fontSize.indexOf("ch")}catch(e){t=!1}return t}),Modernizr.addTest("cubicbezierrange",function(){var e=createElement("a");return e.style.cssText=prefixes.join("transition-timing-function:cubic-bezier(1,0,0,1.1); "),!!e.style.length}),Modernizr.addTest("ellipsis",testAllProps("textOverflow","ellipsis")),Modernizr.addTest("cssexunit",function(){var t,e=modElem.elem.style;try{e.fontSize="3ex",t=-1!==e.fontSize.indexOf("ex")}catch(e){t=!1}return t}),Modernizr.addTest("flexbox",testAllProps("flexBasis","1px",!0)),Modernizr.addTest("flexwrap",testAllProps("flexWrap","wrap",!0));var testStyles=ModernizrProto.testStyles=injectElementWithStyles,blacklist=(Dya=navigator.userAgent,Eya=Dya.match(/w(eb)?osbrowser/gi),Fya=Dya.match(/windows phone/gi)&&Dya.match(/iemobile\/([0-9])+/gi)&&9<=parseFloat(RegExp.$1),Eya||Fya),Dya,Eya,Fya;blacklist?Modernizr.addTest("fontface",!1):testStyles('@font-face {font-family:"font";src:url("https://")}',function(e,t){var i=document.getElementById("smodernizr"),n=i.sheet||i.styleSheet,r=n?n.cssRules&&n.cssRules[0]?n.cssRules[0].cssText:n.cssText||"":"",s=/src/i.test(r)&&0===r.indexOf(t.split(" ")[0]);Modernizr.addTest("fontface",s)}),testStyles('#modernizr{font:0/0 a}#modernizr:after{content:":)";visibility:hidden;font:7px/1 a}',function(e){Modernizr.addTest("generatedcontent",6<=e.offsetHeight)}),Modernizr.addTest("cssgradients",function(){for(var e,t="background-image:",i="",n=0,r=prefixes.length-1;n<r;n++)e=0===n?"to ":"",i+=t+prefixes[n]+"linear-gradient("+e+"left top, #9f9, white);";Modernizr._config.usePrefixes&&(i+=t+"-webkit-gradient(linear,left top,right bottom,from(#9f9),to(white));");var s=createElement("a").style;return s.cssText=i,-1<(""+s.backgroundImage).indexOf("gradient")}),Modernizr.addTest("hsla",function(){var e=createElement("a").style;return e.cssText="background-color:hsla(120,40%,100%,.5)",contains(e.backgroundColor,"rgba")||contains(e.backgroundColor,"hsla")}),testStyles("#modernizr div {width:100px} #modernizr :last-child{width:200px;display:block}",function(e){Modernizr.addTest("lastchild",e.lastChild.offsetWidth>e.firstChild.offsetWidth)},2),Modernizr.addTest("mediaqueries",mq("only all")),Modernizr.addTest("multiplebgs",function(){var e=createElement("a").style;return e.cssText="background:url(https://),url(https://),red url(https://)",/(url\s*\(.*?){3}/.test(e.background)}),testStyles("#modernizr div {width:1px} #modernizr div:nth-child(2n) {width:2px;}",function(e){for(var t=e.getElementsByTagName("div"),i=!0,n=0;n<5;n++)i=i&&t[n].offsetWidth===n%2+1;Modernizr.addTest("nthchild",i)},5),Modernizr.addTest("objectfit",!!prefixed("objectFit"),{aliases:["object-fit"]}),Modernizr.addTest("opacity",function(){var e=createElement("a").style;return e.cssText=prefixes.join("opacity:.55;"),/^0.55$/.test(e.opacity)}),Modernizr.addTest("csspointerevents",function(){var e=createElement("a").style;return e.cssText="pointer-events:auto","auto"===e.pointerEvents}),Modernizr.addTest("csspositionsticky",function(){var e="position:",t=createElement("a").style;return t.cssText=e+prefixes.join("sticky;"+e).slice(0,-e.length),-1!==t.position.indexOf("sticky")}),Modernizr.addTest("csspseudoanimations",function(){var t=!1;if(!Modernizr.cssanimations||!window.getComputedStyle)return t;var e=["@",Modernizr._prefixes.join("keyframes csspseudoanimations { from { font-size: 10px; } }@").replace(/\@$/,""),'#modernizr:before { content:" "; font-size:5px;',Modernizr._prefixes.join("animation:csspseudoanimations 1ms infinite;"),"}"].join("");return Modernizr.testStyles(e,function(e){t="10px"===window.getComputedStyle(e,":before").getPropertyValue("font-size")}),t}),Modernizr.addTest("csstransitions",testAllProps("transition","all",!0)),Modernizr.addTest("csspseudotransitions",function(){var t=!1;if(!Modernizr.csstransitions||!window.getComputedStyle)return t;var e='#modernizr:before { content:" "; font-size:5px;'+Modernizr._prefixes.join("transition:0s 100s;")+"}#modernizr.trigger:before { font-size:10px; }";return Modernizr.testStyles(e,function(e){window.getComputedStyle(e,":before").getPropertyValue("font-size"),e.className+="trigger",t="5px"===window.getComputedStyle(e,":before").getPropertyValue("font-size")}),t}),Modernizr.addTest("cssremunit",function(){var e=createElement("a").style;try{e.fontSize="3rem"}catch(e){}return/rem/.test(e.fontSize)}),Modernizr.addTest("cssresize",testAllProps("resize","both",!0)),Modernizr.addTest("rgba",function(){var e=createElement("a").style;return e.cssText="background-color:rgba(150,255,150,.5)",-1<(""+e.backgroundColor).indexOf("rgba")}),Modernizr.addTest("siblinggeneral",function(){return testStyles("#modernizr div {width:100px} #modernizr div ~ div {width:200px;display:block}",function(e){return 200==e.lastChild.offsetWidth},2)}),testStyles("#modernizr{position: absolute; top: -10em; visibility:hidden; font: normal 10px arial;}#subpixel{float: left; font-size: 33.3333%;}",function(e){var t=e.firstChild;t.innerHTML="This is a text written in Arial",Modernizr.addTest("subpixelfont",!!window.getComputedStyle&&"44px"!==window.getComputedStyle(t,null).getPropertyValue("width"))},1,["subpixel"]);var newSyntax="CSS"in window&&"supports"in window.CSS,oldSyntax="supportsCSS"in window,hasOwnProp,bAa;function roundedEquals(e,t){return e-1===t||e===t||e+1===t}function setClasses(e){var t=docElement.className,i=Modernizr._config.classPrefix||"";if(isSVG&&(t=t.baseVal),Modernizr._config.enableJSClass){var n=new RegExp("(^|\\s)"+i+"no-js(\\s|$)");t=t.replace(n,"$1"+i+"js$2")}Modernizr._config.enableClasses&&(t+=" "+i+e.join(" "+i),isSVG?docElement.className.baseVal=t:docElement.className=t)}function addTest(e,t){if("object"==typeof e)for(var i in e)hasOwnProp(e,i)&&addTest(i,e[i]);else{var n=(e=e.toLowerCase()).split("."),r=Modernizr[n[0]];if(2==n.length&&(r=r[n[1]]),void 0!==r)return Modernizr;t="function"==typeof t?t():t,1==n.length?Modernizr[n[0]]=t:(!Modernizr[n[0]]||Modernizr[n[0]]instanceof Boolean||(Modernizr[n[0]]=new Boolean(Modernizr[n[0]])),Modernizr[n[0]][n[1]]=t),setClasses([(t&&0!=t?"":"no-")+n.join("-")]),Modernizr._trigger(e,t)}return Modernizr}Modernizr.addTest("supports",newSyntax||oldSyntax),Modernizr.addTest("target",function(){var e=window.document;if(!("querySelectorAll"in e))return!1;try{return e.querySelectorAll(":target"),!0}catch(e){return!1}}),Modernizr.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&testAllProps("transform","scale(1)",!0)}),Modernizr.addTest("csstransforms3d",function(){return!!testAllProps("perspective","1px",!0)}),Modernizr.addTest("preserve3d",function(){var e,t,i=window.CSS,n=!1;return!!(i&&i.supports&&i.supports("(transform-style: preserve-3d)"))||(e=createElement("a"),t=createElement("a"),e.style.cssText="display: block; transform-style: preserve-3d; transform-origin: right; transform: rotateY(40deg);",t.style.cssText="display: block; width: 9px; height: 1px; background: #000; transform-origin: right; transform: rotateY(40deg);",e.appendChild(t),docElement.appendChild(e),n=t.getBoundingClientRect(),docElement.removeChild(e),n=n.width&&n.width<4)}),Modernizr.addTest("userselect",testAllProps("userSelect","none",!0)),testStyles("#modernizr { height: 50vh; }",function(e){var t=parseInt(window.innerHeight/2,10),i=parseInt(computedStyle(e,null,"height"),10);Modernizr.addTest("cssvhunit",roundedEquals(i,t))}),testStyles("#modernizr1{width: 50vmax}#modernizr2{width:50px;height:50px;overflow:scroll}#modernizr3{position:fixed;top:0;left:0;bottom:0;right:0}",function(e){var t=e.childNodes[2],i=e.childNodes[1],n=e.childNodes[0],r=parseInt((i.offsetWidth-i.clientWidth)/2,10),s=n.clientWidth/100,o=n.clientHeight/100,a=parseInt(50*Math.max(s,o),10),l=parseInt(computedStyle(t,null,"width"),10);Modernizr.addTest("cssvmaxunit",roundedEquals(a,l)||roundedEquals(a,l-r))},3),testStyles("#modernizr1{width: 50vm;width:50vmin}#modernizr2{width:50px;height:50px;overflow:scroll}#modernizr3{position:fixed;top:0;left:0;bottom:0;right:0}",function(e){var t=e.childNodes[2],i=e.childNodes[1],n=e.childNodes[0],r=parseInt((i.offsetWidth-i.clientWidth)/2,10),s=n.clientWidth/100,o=n.clientHeight/100,a=parseInt(50*Math.min(s,o),10),l=parseInt(computedStyle(t,null,"width"),10);Modernizr.addTest("cssvminunit",roundedEquals(a,l)||roundedEquals(a,l-r))},3),testStyles("#modernizr { width: 50vw; }",function(e){var t=parseInt(window.innerWidth/2,10),i=parseInt(computedStyle(e,null,"width"),10);Modernizr.addTest("cssvwunit",roundedEquals(i,t))}),Modernizr.addTest("willchange","willChange"in docElement.style),Modernizr.addTest("classlist","classList"in docElement),Modernizr.addTest("documentfragment",function(){return"createDocumentFragment"in document&&"appendChild"in docElement}),Modernizr.addTest("mutationobserver",!!window.MutationObserver||!!window.WebKitMutationObserver),Modernizr.addTest("es6array",!!(Array.prototype&&Array.prototype.copyWithin&&Array.prototype.fill&&Array.prototype.find&&Array.prototype.findIndex&&Array.prototype.keys&&Array.prototype.entries&&Array.prototype.values&&Array.from&&Array.of)),Modernizr.addTest("contains",is(String.prototype.contains,"function")),Modernizr.addTest("generators",function(){try{new Function("function* test() {}")()}catch(e){return!1}return!0}),Modernizr.addTest("es6math",!!(Math&&Math.clz32&&Math.cbrt&&Math.imul&&Math.sign&&Math.log10&&Math.log2&&Math.log1p&&Math.expm1&&Math.cosh&&Math.sinh&&Math.tanh&&Math.acosh&&Math.asinh&&Math.atanh&&Math.hypot&&Math.trunc&&Math.fround)),Modernizr.addTest("es6number",!!(Number.isFinite&&Number.isInteger&&Number.isSafeInteger&&Number.isNaN&&Number.parseInt&&Number.parseFloat&&Number.isInteger(Number.MAX_SAFE_INTEGER)&&Number.isInteger(Number.MIN_SAFE_INTEGER)&&Number.isFinite(Number.EPSILON))),Modernizr.addTest("es6object",!!(Object.assign&&Object.is&&Object.setPrototypeOf)),Modernizr.addTest("promises",function(){return"Promise"in window&&"resolve"in window.Promise&&"reject"in window.Promise&&"all"in window.Promise&&"race"in window.Promise&&(new window.Promise(function(e){t=e}),"function"==typeof t);var t}),Modernizr.addTest("es6string",!!(String.fromCodePoint&&String.raw&&String.prototype.codePointAt&&String.prototype.repeat&&String.prototype.startsWith&&String.prototype.endsWith&&String.prototype.includes)),Modernizr.addTest("devicemotion","DeviceMotionEvent"in window),Modernizr.addTest("deviceorientation","DeviceOrientationEvent"in window),Modernizr.addTest("fullscreen",!(!prefixed("exitFullscreen",document,!1)&&!prefixed("cancelFullScreen",document,!1))),Modernizr.addTest("hashchange",function(){return!1!==hasEvent("hashchange",window)&&(document.documentMode===undefined||7<document.documentMode)}),Modernizr.addTest("hiddenscroll",function(){return testStyles("#modernizr {width:100px;height:100px;overflow:scroll}",function(e){return e.offsetWidth===e.clientWidth})}),Modernizr.addTest("history",function(){var e=navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone")||"file:"===location.protocol)&&(window.history&&"pushState"in window.history)}),bAa={}.hasOwnProperty,hasOwnProp=is(bAa,"undefined")||is(bAa.call,"undefined")?function(e,t){return t in e&&is(e.constructor.prototype[t],"undefined")}:function(e,t){return bAa.call(e,t)},ModernizrProto._l={},ModernizrProto.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),Modernizr.hasOwnProperty(e)&&setTimeout(function(){Modernizr._trigger(e,Modernizr[e])},0)},ModernizrProto._trigger=function(e,t){if(this._l[e]){var i=this._l[e];setTimeout(function(){var e;for(e=0;e<i.length;e++)(0,i[e])(t)},0),delete this._l[e]}},Modernizr._q.push(function(){ModernizrProto.addTest=addTest}),Modernizr.addAsyncTest(function(){var e,t,i=createElement("img"),n="sizes"in i;!n&&"srcset"in i?("data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",t=function(){addTest("sizes",2==i.width)},i.onload=t,i.onerror=t,i.setAttribute("sizes","9px"),i.srcset=e+" 1w,data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw== 8w",i.src=e):addTest("sizes",n)}),Modernizr.addTest("srcset","srcset"in createElement("img")),Modernizr.addTest("json","JSON"in window&&"parse"in JSON&&"stringify"in JSON),Modernizr.addTest("xhrresponsetype",function(){if("undefined"==typeof XMLHttpRequest)return!1;var e=new XMLHttpRequest;return e.open("get","/",!0),"response"in e}());var testXhrType=function(e){if("undefined"==typeof XMLHttpRequest)return!1;var t=new XMLHttpRequest;t.open("get","/",!0);try{t.responseType=e}catch(e){return!1}return"response"in t&&t.responseType==e};Modernizr.addTest("xhrresponsetypearraybuffer",testXhrType("arraybuffer")),Modernizr.addTest("xhrresponsetypeblob",testXhrType("blob")),Modernizr.addTest("xhr2","XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest),Modernizr.addTest("pagevisibility",!!prefixed("hidden",document,!1)),Modernizr.addTest("performance",!!prefixed("performance",window)),Modernizr.addTest("pointerevents",function(){var e=!1,t=domPrefixes.length;for(e=Modernizr.hasEvent("pointerdown");t--&&!e;)hasEvent(domPrefixes[t]+"pointerdown")&&(e=!0);return e}),Modernizr.addTest("postmessage","postMessage"in window),Modernizr.addTest("queryselector","querySelector"in document&&"querySelectorAll"in document),Modernizr.addTest("requestanimationframe",!!prefixed("requestAnimationFrame",window),{aliases:["raf"]}),Modernizr.addTest("scriptasync","async"in createElement("script")),Modernizr.addTest("scriptdefer","defer"in createElement("script")),Modernizr.addTest("svg",!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),Modernizr.addTest("svgasimg",document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"));var toStringFn={}.toString;Modernizr.addTest("svgclippaths",function(){return!!document.createElementNS&&/SVGClipPath/.test(toStringFn.call(document.createElementNS("http://www.w3.org/2000/svg","clipPath")))}),Modernizr.addTest("svgfilters",function(){var e=!1;try{e="SVGFEColorMatrixElement"in window&&2==SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE}catch(e){}return e}),Modernizr.addTest("svgforeignobject",function(){return!!document.createElementNS&&/SVGForeignObject/.test(toStringFn.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}),Modernizr.addTest("inlinesvg",function(){var e=createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"==("undefined"!=typeof SVGRect&&e.firstChild&&e.firstChild.namespaceURI)}),Modernizr.addTest("smil",function(){return!!document.createElementNS&&/SVGAnimate/.test(toStringFn.call(document.createElementNS("http://www.w3.org/2000/svg","animate")))}),Modernizr.addTest("templatestrings",function(){var supports;try{eval("``"),supports=!0}catch(e){}return!!supports});var url=prefixed("URL",window,!1);url=url&&window[url],Modernizr.addTest("bloburls",url&&"revokeObjectURL"in url&&"createObjectURL"in url),Modernizr.addAsyncTest(function(){-1!==navigator.userAgent.indexOf("MSIE 7.")&&setTimeout(function(){addTest("datauri",!1)},10);var e=new Image;e.onerror=function(){addTest("datauri",!1)},e.onload=function(){1==e.width&&1==e.height?function(){var e=new Image;e.onerror=function(){addTest("datauri",!0),Modernizr.datauri=new Boolean(!0),Modernizr.datauri.over32kb=!1},e.onload=function(){addTest("datauri",!0),Modernizr.datauri=new Boolean(!0),Modernizr.datauri.over32kb=1==e.width&&1==e.height};var t="R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";for(;t.length<33e3;)t="\r\n"+t;e.src="data:image/gif;base64,"+t}():addTest("datauri",!1)},e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}),Modernizr.addTest("video",function(){var e=createElement("video"),t=!1;try{(t=!!e.canPlayType)&&((t=new Boolean(t)).ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),t.vp9=e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),t.hls=e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch(e){}return t}),Modernizr.addAsyncTest(function(){var i,n=200,r=5,s=0,o=createElement("video"),e=o.style;function a(e){s++,clearTimeout(i);var t=e&&"playing"===e.type||0!==o.currentTime;!t&&s<r?i=setTimeout(a,n):(o.removeEventListener("playing",a,!1),addTest("videoautoplay",t),o.parentNode&&o.parentNode.removeChild(o))}if(Modernizr.video&&"autoplay"in o){e.position="absolute",e.height=0,e.width=0;try{if(Modernizr.video.ogg)o.src="data:video/ogg;base64,T2dnUwACAAAAAAAAAABmnCATAAAAAHDEixYBKoB0aGVvcmEDAgEAAQABAAAQAAAQAAAAAAAFAAAAAQAAAAAAAAAAAGIAYE9nZ1MAAAAAAAAAAAAAZpwgEwEAAAACrA7TDlj///////////////+QgXRoZW9yYSsAAABYaXBoLk9yZyBsaWJ0aGVvcmEgMS4xIDIwMDkwODIyIChUaHVzbmVsZGEpAQAAABoAAABFTkNPREVSPWZmbXBlZzJ0aGVvcmEtMC4yOYJ0aGVvcmG+zSj3uc1rGLWpSUoQc5zmMYxSlKQhCDGMYhCEIQhAAAAAAAAAAAAAEW2uU2eSyPxWEvx4OVts5ir1aKtUKBMpJFoQ/nk5m41mUwl4slUpk4kkghkIfDwdjgajQYC8VioUCQRiIQh8PBwMhgLBQIg4FRba5TZ5LI/FYS/Hg5W2zmKvVoq1QoEykkWhD+eTmbjWZTCXiyVSmTiSSCGQh8PB2OBqNBgLxWKhQJBGIhCHw8HAyGAsFAiDgUCw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDAwPEhQUFQ0NDhESFRUUDg4PEhQVFRUOEBETFBUVFRARFBUVFRUVEhMUFRUVFRUUFRUVFRUVFRUVFRUVFRUVEAwLEBQZGxwNDQ4SFRwcGw4NEBQZHBwcDhATFhsdHRwRExkcHB4eHRQYGxwdHh4dGxwdHR4eHh4dHR0dHh4eHRALChAYKDM9DAwOExo6PDcODRAYKDlFOA4RFh0zV1A+EhYlOkRtZ00YIzdAUWhxXDFATldneXhlSFxfYnBkZ2MTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTEhIVGRoaGhoSFBYaGhoaGhUWGRoaGhoaGRoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhESFh8kJCQkEhQYIiQkJCQWGCEkJCQkJB8iJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQREhgvY2NjYxIVGkJjY2NjGBo4Y2NjY2MvQmNjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRISEhUXGBkbEhIVFxgZGxwSFRcYGRscHRUXGBkbHB0dFxgZGxwdHR0YGRscHR0dHhkbHB0dHR4eGxwdHR0eHh4REREUFxocIBERFBcaHCAiERQXGhwgIiUUFxocICIlJRcaHCAiJSUlGhwgIiUlJSkcICIlJSUpKiAiJSUlKSoqEBAQFBgcICgQEBQYHCAoMBAUGBwgKDBAFBgcICgwQEAYHCAoMEBAQBwgKDBAQEBgICgwQEBAYIAoMEBAQGCAgAfF5cdH1e3Ow/L66wGmYnfIUbwdUTe3LMRbqON8B+5RJEvcGxkvrVUjTMrsXYhAnIwe0dTJfOYbWrDYyqUrz7dw/JO4hpmV2LsQQvkUeGq1BsZLx+cu5iV0e0eScJ91VIQYrmqfdVSK7GgjOU0oPaPOu5IcDK1mNvnD+K8LwS87f8Jx2mHtHnUkTGAurWZlNQa74ZLSFH9oF6FPGxzLsjQO5Qe0edcpttd7BXBSqMCL4k/4tFrHIPuEQ7m1/uIWkbDMWVoDdOSuRQ9286kvVUlQjzOE6VrNguN4oRXYGkgcnih7t13/9kxvLYKQezwLTrO44sVmMPgMqORo1E0sm1/9SludkcWHwfJwTSybR4LeAz6ugWVgRaY8mV/9SluQmtHrzsBtRF/wPY+X0JuYTs+ltgrXAmlk10xQHmTu9VSIAk1+vcvU4ml2oNzrNhEtQ3CysNP8UeR35wqpKUBdGdZMSjX4WVi8nJpdpHnbhzEIdx7mwf6W1FKAiucMXrWUWVjyRf23chNtR9mIzDoT/6ZLYailAjhFlZuvPtSeZ+2oREubDoWmT3TguY+JHPdRVSLKxfKH3vgNqJ/9emeEYikGXDFNzaLjvTeGAL61mogOoeG3y6oU4rW55ydoj0lUTSR/mmRhPmF86uwIfzp3FtiufQCmppaHDlGE0r2iTzXIw3zBq5hvaTldjG4CPb9wdxAme0SyedVKczJ9AtYbgPOzYKJvZZImsN7ecrxWZg5dR6ZLj/j4qpWsIA+vYwE+Tca9ounMIsrXMB4Stiib2SPQtZv+FVIpfEbzv8ncZoLBXc3YBqTG1HsskTTotZOYTG+oVUjLk6zhP8bg4RhMUNtfZdO7FdpBuXzhJ5Fh8IKlJG7wtD9ik8rWOJxy6iQ3NwzBpQ219mlyv+FLicYs2iJGSE0u2txzed++D61ZWCiHD/cZdQVCqkO2gJpdpNaObhnDfAPrT89RxdWFZ5hO3MseBSIlANppdZNIV/Rwe5eLTDvkfWKzFnH+QJ7m9QWV1KdwnuIwTNtZdJMoXBf74OhRnh2t+OTGL+AVUnIkyYY+QG7g9itHXyF3OIygG2s2kud679ZWKqSFa9n3IHD6MeLv1lZ0XyduRhiDRtrNnKoyiFVLcBm0ba5Yy3fQkDh4XsFE34isVpOzpa9nR8iCpS4HoxG2rJpnRhf3YboVa1PcRouh5LIJv/uQcPNd095ickTaiGBnWLKVWRc0OnYTSyex/n2FofEPnDG8y3PztHrzOLK1xo6RAml2k9owKajOC0Wr4D5x+3nA0UEhK2m198wuBHF3zlWWVKWLN1CHzLClUfuoYBcx4b1llpeBKmbayaR58njtE9onD66lUcsg0Spm2snsb+8HaJRn4dYcLbCuBuYwziB8/5U1C1DOOz2gZjSZtrLJk6vrLF3hwY4Io9xuT/ruUFRSBkNtUzTOWhjh26irLEPx4jPZL3Fo3QrReoGTTM21xYTT9oFdhTUIvjqTkfkvt0bzgVUjq/hOYY8j60IaO/0AzRBtqkTS6R5ellZd5uKdzzhb8BFlDdAcrwkE0rbXTOPB+7Y0FlZO96qFL4Ykg21StJs8qIW7h16H5hGiv8V2Cflau7QVDepTAHa6Lgt6feiEvJDM21StJsmOH/hynURrKxvUpQ8BH0JF7BiyG2qZpnL/7AOU66gt+reLEXY8pVOCQvSsBtqZTNM8bk9ohRcwD18o/WVkbvrceVKRb9I59IEKysjBeTMmmbA21xu/6iHadLRxuIzkLpi8wZYmmbbWi32RVAUjruxWlJ//iFxE38FI9hNKOoCdhwf5fDe4xZ81lgREhK2m1j78vW1CqkuMu/AjBNK210kzRUX/B+69cMMUG5bYrIeZxVSEZISmkzbXOi9yxwIfPgdsov7R71xuJ7rFcACjG/9PzApqFq7wEgzNJm2suWESPuwrQvejj7cbnQxMkxpm21lUYJL0fKmogPPqywn7e3FvB/FCNxPJ85iVUkCE9/tLKx31G4CgNtWTTPFhMvlu8G4/TrgaZttTChljfNJGgOT2X6EqpETy2tYd9cCBI4lIXJ1/3uVUllZEJz4baqGF64yxaZ+zPLYwde8Uqn1oKANtUrSaTOPHkhvuQP3bBlEJ/LFe4pqQOHUI8T8q7AXx3fLVBgSCVpMba55YxN3rv8U1Dv51bAPSOLlZWebkL8vSMGI21lJmmeVxPRwFlZF1CpqCN8uLwymaZyjbXHCRytogPN3o/n74CNykfT+qqRv5AQlHcRxYrC5KvGmbbUwmZY/29BvF6C1/93x4WVglXDLFpmbapmF89HKTogRwqqSlGbu+oiAkcWFbklC6Zhf+NtTLFpn8oWz+HsNRVSgIxZWON+yVyJlE5tq/+GWLTMutYX9ekTySEQPLVNQQ3OfycwJBM0zNtZcse7CvcKI0V/zh16Dr9OSA21MpmmcrHC+6pTAPHPwoit3LHHqs7jhFNRD6W8+EBGoSEoaZttTCZljfduH/fFisn+dRBGAZYtMzbVMwvul/T/crK1NQh8gN0SRRa9cOux6clC0/mDLFpmbarmF8/e6CopeOLCNW6S/IUUg3jJIYiAcDoMcGeRbOvuTPjXR/tyo79LK3kqqkbxkkMRAOB0GODPItnX3Jnxro/25Ud+llbyVVSN4ySGIgHA6DHBnkWzr7kz410f7cqO/Syt5KqpFVJwn6gBEvBM0zNtZcpGOEPiysW8vvRd2R0f7gtjhqUvXL+gWVwHm4XJDBiMpmmZtrLfPwd/IugP5+fKVSysH1EXreFAcEhelGmbbUmZY4Xdo1vQWVnK19P4RuEnbf0gQnR+lDCZlivNM22t1ESmopPIgfT0duOfQrsjgG4tPxli0zJmF5trdL1JDUIUT1ZXSqQDeR4B8mX3TrRro/2McGeUvLtwo6jIEKMkCUXWsLyZROd9P/rFYNtXPBli0z398iVUlVKAjFlY437JXImUTm2r/4ZYtMy61hf16RPJIU9nZ1MABAwAAAAAAAAAZpwgEwIAAABhp658BScAAAAAAADnUFBQXIDGXLhwtttNHDhw5OcpQRMETBEwRPduylKVB0HRdF0A";else{if(!Modernizr.video.h264)return void addTest("videoautoplay",!1);o.src="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAs1tZGF0AAACrgYF//+q3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0OCByMjYwMSBhMGNkN2QzIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNSAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTEgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEwIHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAD2WIhAA3//728P4FNjuZQQAAAu5tb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAAZAABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACGHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAZAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAgAAAAIAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAGQAAAAAAAEAAAAAAZBtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAACgAAAAEAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAE7bWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAA+3N0YmwAAACXc3RzZAAAAAAAAAABAAAAh2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAgACAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAxYXZjQwFkAAr/4QAYZ2QACqzZX4iIhAAAAwAEAAADAFA8SJZYAQAGaOvjyyLAAAAAGHN0dHMAAAAAAAAAAQAAAAEAAAQAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAAsUAAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjU2LjQwLjEwMQ=="}}catch(e){return void addTest("videoautoplay",!1)}o.setAttribute("autoplay",""),e.cssText="display:none",docElement.appendChild(o),setTimeout(function(){o.addEventListener("playing",a,!1),i=setTimeout(a,n)},0)}else addTest("videoautoplay",!1)}),Modernizr.addTest("videoloop","loop"in createElement("video")),Modernizr.addTest("videopreload","preload"in createElement("video")),testRunner(),delete ModernizrProto.addTest,delete ModernizrProto.addAsyncTest;for(var i=0;i<Modernizr._q.length;i++)Modernizr._q[i]();window.Modernizr=Modernizr}(window,document)},{}],"mutation-polyfill":[function(e,t,i){var n,r,s;"undefined"==typeof WeakMap&&(n=Object.defineProperty,r=Date.now()%1e9,(s=function(){this.name="__st"+(1e9*Math.random()>>>0)+r+++"__"}).prototype={set:function(e,t){var i=e[this.name];return i&&i[0]===e?i[1]=t:n(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];return!(!t||t[0]!==e||(t[0]=t[1]=void 0,0))},has:function(e){var t=e[this.name];return!!t&&t[0]===e}},window.WeakMap=s),function(e){if(!e.JsMutationObserver){var s,l=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))s=setTimeout;else if(window.setImmediate)s=window.setImmediate;else{var i=[],n=String(Math.random());window.addEventListener("message",function(e){if(e.data===n){var t=i;i=[],t.forEach(function(e){e()})}}),s=function(e){i.push(e),window.postMessage(n,"*")}}var u,d,o=!1,a=[],t=0;r.prototype={observe:function(e,t){var i;if(i=e,e=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(i)||i,!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var n,r=l.get(e);r||l.set(e,r=[]);for(var s=0;s<r.length;s++)if(r[s].observer===this){(n=r[s]).removeListeners(),n.options=t;break}n||(n=new v(this,e,t),r.push(n),this.nodes_.push(e)),n.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=l.get(e),i=0;i<t.length;i++){var n=t[i];if(n.observer===this){n.removeListeners(),t.splice(i,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}},v.prototype={enqueue:function(e){var t,i=this.observer.records_,n=i.length;if(0<i.length){var r=g(i[n-1],e);if(r)return void(i[n-1]=r)}else t=this.observer,a.push(t),o||(o=!0,s(c));i[n]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=l.get(e);t||l.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=l.get(e),i=0;i<t.length;i++)if(t[i]===this){t.splice(i,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,i=e.relatedNode.namespaceURI,n=e.target;(s=new f("attributes",n)).attributeName=t,s.attributeNamespace=i;var r=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;p(n,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(i)))return e.attributeOldValue?m(r):s});break;case"DOMCharacterDataModified":var s=f("characterData",n=e.target);r=e.prevValue;p(n,function(e){if(e.characterData)return e.characterDataOldValue?m(r):s});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var o,a,l=e.target;"DOMNodeInserted"===e.type?(o=[l],a=[]):(o=[],a=[l]);var c=l.previousSibling,h=l.nextSibling;(s=f("childList",e.target.parentNode)).addedNodes=o,s.removedNodes=a,s.previousSibling=c,s.nextSibling=h,p(e.relatedNode,function(e){if(e.childList)return s})}u=d=void 0}},e.JsMutationObserver=r,e.MutationObserver||((e.MutationObserver=r)._isPolyfilled=!0)}function c(){o=!1;var e=a;a=[],e.sort(function(e,t){return e.uid_-t.uid_});var n=!1;e.forEach(function(e){var i,t=e.takeRecords();(i=e).nodes_.forEach(function(e){var t=l.get(e);t&&t.forEach(function(e){e.observer===i&&e.removeTransientObservers()})}),t.length&&(e.callback_(t,e),n=!0)}),n&&c()}function p(e,t){for(var i=e;i;i=i.parentNode){var n=l.get(i);if(n)for(var r=0;r<n.length;r++){var s=n[r],o=s.options;if(i===e||o.subtree){var a=t(o);a&&s.enqueue(a)}}}}function r(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++t}function h(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function f(e,t){return u=new h(e,t)}function m(e){return d||((i=new h((t=u).type,t.target)).addedNodes=t.addedNodes.slice(),i.removedNodes=t.removedNodes.slice(),i.previousSibling=t.previousSibling,i.nextSibling=t.nextSibling,i.attributeName=t.attributeName,i.attributeNamespace=t.attributeNamespace,i.oldValue=t.oldValue,(d=i).oldValue=e,d);var t,i}function g(e,t){return e===t?e:d&&((i=e)===d||i===u)?d:null;var i}function v(e,t,i){this.observer=e,this.target=t,this.options=i,this.transientObservedNodes=[]}}(self)},{}],"raf-polyfill":[function(e,t,i){!function(){var s,e=["ms","moz","webkit","o"],t=-1;for(t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||console.warn("No native window.requestAnimationFrame found"),window.requestAnimationFrame||(s=0,window.requestAnimationFrame=function(e,t){var i=(new Date).getTime(),n=Math.max(0,16-(i-s)),r=window.setTimeout(function(){e(i+n)},n);return s=i+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)})}()},{}],underscore:[function(e,q,H){(function(){var e=this,t=e._,n=Array.prototype,o=Object.prototype,i=Function.prototype,r=n.push,l=n.slice,u=o.toString,s=o.hasOwnProperty,a=Array.isArray,c=Object.keys,h=i.bind,d=Object.create,p=function(){},f=function(e){return e instanceof f?e:this instanceof f?void(this._wrapped=e):new f(e)};void 0!==H?(void 0!==q&&q.exports&&(H=q.exports=f),H._=f):e._=f,f.VERSION="1.8.3";var m=function(r,s,e){if(void 0===s)return r;switch(null==e?3:e){case 1:return function(e){return r.call(s,e)};case 2:return function(e,t){return r.call(s,e,t)};case 3:return function(e,t,i){return r.call(s,e,t,i)};case 4:return function(e,t,i,n){return r.call(s,e,t,i,n)}}return function(){return r.apply(s,arguments)}},g=function(e,t,i){return null==e?f.identity:f.isFunction(e)?m(e,t,i):f.isObject(e)?f.matcher(e):f.property(e)};f.iteratee=function(e,t){return g(e,t,1/0)};var v=function(l,c){return function(e){var t=arguments.length;if(t<2||null==e)return e;for(var i=1;i<t;i++)for(var n=arguments[i],r=l(n),s=r.length,o=0;o<s;o++){var a=r[o];c&&void 0!==e[a]||(e[a]=n[a])}return e}},_=function(e){if(!f.isObject(e))return{};if(d)return d(e);p.prototype=e;var t=new p;return p.prototype=null,t},y=function(t){return function(e){return null==e?void 0:e[t]}},w=Math.pow(2,53)-1,b=y("length"),A=function(e){var t=b(e);return"number"==typeof t&&0<=t&&t<=w};function x(a){return function(e,t,i,n){t=m(t,n,4);var r=!A(e)&&f.keys(e),s=(r||e).length,o=0<a?0:s-1;return arguments.length<3&&(i=e[r?r[o]:o],o+=a),function(e,t,i,n,r,s){for(;0<=r&&r<s;r+=a){var o=n?n[r]:r;i=t(i,e[o],o,e)}return i}(e,t,i,r,o,s)}}f.each=f.forEach=function(e,t,i){var n,r;if(t=m(t,i),A(e))for(n=0,r=e.length;n<r;n++)t(e[n],n,e);else{var s=f.keys(e);for(n=0,r=s.length;n<r;n++)t(e[s[n]],s[n],e)}return e},f.map=f.collect=function(e,t,i){t=g(t,i);for(var n=!A(e)&&f.keys(e),r=(n||e).length,s=Array(r),o=0;o<r;o++){var a=n?n[o]:o;s[o]=t(e[a],a,e)}return s},f.reduce=f.foldl=f.inject=x(1),f.reduceRight=f.foldr=x(-1),f.find=f.detect=function(e,t,i){var n;if(void 0!==(n=A(e)?f.findIndex(e,t,i):f.findKey(e,t,i))&&-1!==n)return e[n]},f.filter=f.select=function(e,n,t){var r=[];return n=g(n,t),f.each(e,function(e,t,i){n(e,t,i)&&r.push(e)}),r},f.reject=function(e,t,i){return f.filter(e,f.negate(g(t)),i)},f.every=f.all=function(e,t,i){t=g(t,i);for(var n=!A(e)&&f.keys(e),r=(n||e).length,s=0;s<r;s++){var o=n?n[s]:s;if(!t(e[o],o,e))return!1}return!0},f.some=f.any=function(e,t,i){t=g(t,i);for(var n=!A(e)&&f.keys(e),r=(n||e).length,s=0;s<r;s++){var o=n?n[s]:s;if(t(e[o],o,e))return!0}return!1},f.contains=f.includes=f.include=function(e,t,i,n){return A(e)||(e=f.values(e)),("number"!=typeof i||n)&&(i=0),0<=f.indexOf(e,t,i)},f.invoke=function(e,i){var n=l.call(arguments,2),r=f.isFunction(i);return f.map(e,function(e){var t=r?i:e[i];return null==t?t:t.apply(e,n)})},f.pluck=function(e,t){return f.map(e,f.property(t))},f.where=function(e,t){return f.filter(e,f.matcher(t))},f.findWhere=function(e,t){return f.find(e,f.matcher(t))},f.max=function(e,n,t){var i,r,s=-1/0,o=-1/0;if(null==n&&null!=e)for(var a=0,l=(e=A(e)?e:f.values(e)).length;a<l;a++)i=e[a],s<i&&(s=i);else n=g(n,t),f.each(e,function(e,t,i){r=n(e,t,i),(o<r||r===-1/0&&s===-1/0)&&(s=e,o=r)});return s},f.min=function(e,n,t){var i,r,s=1/0,o=1/0;if(null==n&&null!=e)for(var a=0,l=(e=A(e)?e:f.values(e)).length;a<l;a++)(i=e[a])<s&&(s=i);else n=g(n,t),f.each(e,function(e,t,i){((r=n(e,t,i))<o||r===1/0&&s===1/0)&&(s=e,o=r)});return s},f.shuffle=function(e){for(var t,i=A(e)?e:f.values(e),n=i.length,r=Array(n),s=0;s<n;s++)(t=f.random(0,s))!==s&&(r[s]=r[t]),r[t]=i[s];return r},f.sample=function(e,t,i){return null==t||i?(A(e)||(e=f.values(e)),e[f.random(e.length-1)]):f.shuffle(e).slice(0,Math.max(0,t))},f.sortBy=function(e,n,t){return n=g(n,t),f.pluck(f.map(e,function(e,t,i){return{value:e,index:t,criteria:n(e,t,i)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(n<i||void 0===i)return 1;if(i<n||void 0===n)return-1}return e.index-t.index}),"value")};var T=function(o){return function(n,r,e){var s={};return r=g(r,e),f.each(n,function(e,t){var i=r(e,t,n);o(s,e,i)}),s}};f.groupBy=T(function(e,t,i){f.has(e,i)?e[i].push(t):e[i]=[t]}),f.indexBy=T(function(e,t,i){e[i]=t}),f.countBy=T(function(e,t,i){f.has(e,i)?e[i]++:e[i]=1}),f.toArray=function(e){return e?f.isArray(e)?l.call(e):A(e)?f.map(e,f.identity):f.values(e):[]},f.size=function(e){return null==e?0:A(e)?e.length:f.keys(e).length},f.partition=function(e,n,t){n=g(n,t);var r=[],s=[];return f.each(e,function(e,t,i){(n(e,t,i)?r:s).push(e)}),[r,s]},f.first=f.head=f.take=function(e,t,i){if(null!=e)return null==t||i?e[0]:f.initial(e,e.length-t)},f.initial=function(e,t,i){return l.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},f.last=function(e,t,i){if(null!=e)return null==t||i?e[e.length-1]:f.rest(e,Math.max(0,e.length-t))},f.rest=f.tail=f.drop=function(e,t,i){return l.call(e,null==t||i?1:t)},f.compact=function(e){return f.filter(e,f.identity)};var E=function(e,t,i,n){for(var r=[],s=0,o=n||0,a=b(e);o<a;o++){var l=e[o];if(A(l)&&(f.isArray(l)||f.isArguments(l))){t||(l=E(l,t,i));var c=0,h=l.length;for(r.length+=h;c<h;)r[s++]=l[c++]}else i||(r[s++]=l)}return r};function S(s){return function(e,t,i){t=g(t,i);for(var n=b(e),r=0<s?0:n-1;0<=r&&r<n;r+=s)if(t(e[r],r,e))return r;return-1}}function k(s,o,a){return function(e,t,i){var n=0,r=b(e);if("number"==typeof i)0<s?n=0<=i?i:Math.max(i+r,n):r=0<=i?Math.min(i+1,r):i+r+1;else if(a&&i&&r)return e[i=a(e,t)]===t?i:-1;if(t!=t)return 0<=(i=o(l.call(e,n,r),f.isNaN))?i+n:-1;for(i=0<s?n:r-1;0<=i&&i<r;i+=s)if(e[i]===t)return i;return-1}}f.flatten=function(e,t){return E(e,t,!1)},f.without=function(e){return f.difference(e,l.call(arguments,1))},f.uniq=f.unique=function(e,t,i,n){f.isBoolean(t)||(n=i,i=t,t=!1),null!=i&&(i=g(i,n));for(var r=[],s=[],o=0,a=b(e);o<a;o++){var l=e[o],c=i?i(l,o,e):l;t?(o&&s===c||r.push(l),s=c):i?f.contains(s,c)||(s.push(c),r.push(l)):f.contains(r,l)||r.push(l)}return r},f.union=function(){return f.uniq(E(arguments,!0,!0))},f.intersection=function(e){for(var t=[],i=arguments.length,n=0,r=b(e);n<r;n++){var s=e[n];if(!f.contains(t,s)){for(var o=1;o<i&&f.contains(arguments[o],s);o++);o===i&&t.push(s)}}return t},f.difference=function(e){var t=E(arguments,!0,!0,1);return f.filter(e,function(e){return!f.contains(t,e)})},f.zip=function(){return f.unzip(arguments)},f.unzip=function(e){for(var t=e&&f.max(e,b).length||0,i=Array(t),n=0;n<t;n++)i[n]=f.pluck(e,n);return i},f.object=function(e,t){for(var i={},n=0,r=b(e);n<r;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},f.findIndex=S(1),f.findLastIndex=S(-1),f.sortedIndex=function(e,t,i,n){for(var r=(i=g(i,n,1))(t),s=0,o=b(e);s<o;){var a=Math.floor((s+o)/2);i(e[a])<r?s=a+1:o=a}return s},f.indexOf=k(1,f.findIndex,f.sortedIndex),f.lastIndexOf=k(-1,f.findLastIndex),f.range=function(e,t,i){null==t&&(t=e||0,e=0),i=i||1;for(var n=Math.max(Math.ceil((t-e)/i),0),r=Array(n),s=0;s<n;s++,e+=i)r[s]=e;return r};var M=function(e,t,i,n,r){if(!(n instanceof t))return e.apply(i,r);var s=_(e.prototype),o=e.apply(s,r);return f.isObject(o)?o:s};f.bind=function(e,t){if(h&&e.bind===h)return h.apply(e,l.call(arguments,1));if(!f.isFunction(e))throw new TypeError("Bind must be called on a function");var i=l.call(arguments,2),n=function(){return M(e,n,t,this,i.concat(l.call(arguments)))};return n},f.partial=function(r){var s=l.call(arguments,1),o=function(){for(var e=0,t=s.length,i=Array(t),n=0;n<t;n++)i[n]=s[n]===f?arguments[e++]:s[n];for(;e<arguments.length;)i.push(arguments[e++]);return M(r,o,this,this,i)};return o},f.bindAll=function(e){var t,i,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)e[i=arguments[t]]=f.bind(e[i],e);return e},f.memoize=function(n,r){var s=function(e){var t=s.cache,i=""+(r?r.apply(this,arguments):e);return f.has(t,i)||(t[i]=n.apply(this,arguments)),t[i]};return s.cache={},s},f.delay=function(e,t){var i=l.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},f.defer=f.partial(f.delay,f,1),f.throttle=function(i,n,r){var s,o,a,l=null,c=0;r||(r={});var h=function(){c=!1===r.leading?0:f.now(),l=null,a=i.apply(s,o),l||(s=o=null)};return function(){var e=f.now();c||!1!==r.leading||(c=e);var t=n-(e-c);return s=this,o=arguments,t<=0||n<t?(l&&(clearTimeout(l),l=null),c=e,a=i.apply(s,o),l||(s=o=null)):l||!1===r.trailing||(l=setTimeout(h,t)),a}},f.debounce=function(t,i,n){var r,s,o,a,l,c=function(){var e=f.now()-a;e<i&&0<=e?r=setTimeout(c,i-e):(r=null,n||(l=t.apply(o,s),r||(o=s=null)))};return function(){o=this,s=arguments,a=f.now();var e=n&&!r;return r||(r=setTimeout(c,i)),e&&(l=t.apply(o,s),o=s=null),l}},f.wrap=function(e,t){return f.partial(t,e)},f.negate=function(e){return function(){return!e.apply(this,arguments)}},f.compose=function(){var i=arguments,n=i.length-1;return function(){for(var e=n,t=i[n].apply(this,arguments);e--;)t=i[e].call(this,t);return t}},f.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},f.before=function(e,t){var i;return function(){return 0<--e&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}},f.once=f.partial(f.before,2);var C=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function P(e,t){var i=I.length,n=e.constructor,r=f.isFunction(n)&&n.prototype||o,s="constructor";for(f.has(e,s)&&!f.contains(t,s)&&t.push(s);i--;)(s=I[i])in e&&e[s]!==r[s]&&!f.contains(t,s)&&t.push(s)}f.keys=function(e){if(!f.isObject(e))return[];if(c)return c(e);var t=[];for(var i in e)f.has(e,i)&&t.push(i);return C&&P(e,t),t},f.allKeys=function(e){if(!f.isObject(e))return[];var t=[];for(var i in e)t.push(i);return C&&P(e,t),t},f.values=function(e){for(var t=f.keys(e),i=t.length,n=Array(i),r=0;r<i;r++)n[r]=e[t[r]];return n},f.mapObject=function(e,t,i){t=g(t,i);for(var n,r=f.keys(e),s=r.length,o={},a=0;a<s;a++)o[n=r[a]]=t(e[n],n,e);return o},f.pairs=function(e){for(var t=f.keys(e),i=t.length,n=Array(i),r=0;r<i;r++)n[r]=[t[r],e[t[r]]];return n},f.invert=function(e){for(var t={},i=f.keys(e),n=0,r=i.length;n<r;n++)t[e[i[n]]]=i[n];return t},f.functions=f.methods=function(e){var t=[];for(var i in e)f.isFunction(e[i])&&t.push(i);return t.sort()},f.extend=v(f.allKeys),f.extendOwn=f.assign=v(f.keys),f.findKey=function(e,t,i){t=g(t,i);for(var n,r=f.keys(e),s=0,o=r.length;s<o;s++)if(t(e[n=r[s]],n,e))return n},f.pick=function(e,t,i){var n,r,s={},o=e;if(null==o)return s;f.isFunction(t)?(r=f.allKeys(o),n=m(t,i)):(r=E(arguments,!1,!1,1),n=function(e,t,i){return t in i},o=Object(o));for(var a=0,l=r.length;a<l;a++){var c=r[a],h=o[c];n(h,c,o)&&(s[c]=h)}return s},f.omit=function(e,t,i){if(f.isFunction(t))t=f.negate(t);else{var n=f.map(E(arguments,!1,!1,1),String);t=function(e,t){return!f.contains(n,t)}}return f.pick(e,t,i)},f.defaults=v(f.allKeys,!0),f.create=function(e,t){var i=_(e);return t&&f.extendOwn(i,t),i},f.clone=function(e){return f.isObject(e)?f.isArray(e)?e.slice():f.extend({},e):e},f.tap=function(e,t){return t(e),e},f.isMatch=function(e,t){var i=f.keys(t),n=i.length;if(null==e)return!n;for(var r=Object(e),s=0;s<n;s++){var o=i[s];if(t[o]!==r[o]||!(o in r))return!1}return!0};var L=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof f&&(e=e._wrapped),t instanceof f&&(t=t._wrapped);var r=u.call(e);if(r!==u.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var s="[object Array]"===r;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,a=t.constructor;if(o!==a&&!(f.isFunction(o)&&o instanceof o&&f.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[];for(var l=(i=i||[]).length;l--;)if(i[l]===e)return n[l]===t;if(i.push(e),n.push(t),s){if((l=e.length)!==t.length)return!1;for(;l--;)if(!L(e[l],t[l],i,n))return!1}else{var c,h=f.keys(e);if(l=h.length,f.keys(t).length!==l)return!1;for(;l--;)if(c=h[l],!f.has(t,c)||!L(e[c],t[c],i,n))return!1}return i.pop(),n.pop(),!0};f.isEqual=function(e,t){return L(e,t)},f.isEmpty=function(e){return null==e||(A(e)&&(f.isArray(e)||f.isString(e)||f.isArguments(e))?0===e.length:0===f.keys(e).length)},f.isElement=function(e){return!(!e||1!==e.nodeType)},f.isArray=a||function(e){return"[object Array]"===u.call(e)},f.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},f.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){f["is"+t]=function(e){return u.call(e)==="[object "+t+"]"}}),f.isArguments(arguments)||(f.isArguments=function(e){return f.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(f.isFunction=function(e){return"function"==typeof e||!1}),f.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},f.isNaN=function(e){return f.isNumber(e)&&e!==+e},f.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===u.call(e)},f.isNull=function(e){return null===e},f.isUndefined=function(e){return void 0===e},f.has=function(e,t){return null!=e&&s.call(e,t)},f.noConflict=function(){return e._=t,this},f.identity=function(e){return e},f.constant=function(e){return function(){return e}},f.noop=function(){},f.property=y,f.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},f.matcher=f.matches=function(t){return t=f.extendOwn({},t),function(e){return f.isMatch(e,t)}},f.times=function(e,t,i){var n=Array(Math.max(0,e));t=m(t,i,1);for(var r=0;r<e;r++)n[r]=t(r);return n},f.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},f.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},O=f.invert(N),V=function(t){var i=function(e){return t[e]},e="(?:"+f.keys(t).join("|")+")",n=RegExp(e),r=RegExp(e,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(r,i):e}};f.escape=V(N),f.unescape=V(O),f.result=function(e,t,i){var n=null==e?void 0:e[t];return void 0===n&&(n=i),f.isFunction(n)?n.call(e):n};var R=0;f.uniqueId=function(e){var t=++R+"";return e?e+t:t},f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\u2028|\u2029/g,B=function(e){return"\\"+F[e]};f.template=function(s,e,t){!e&&t&&(e=t),e=f.defaults({},e,f.templateSettings);var i=RegExp([(e.escape||D).source,(e.interpolate||D).source,(e.evaluate||D).source].join("|")+"|$","g"),o=0,a="__p+='";s.replace(i,function(e,t,i,n,r){return a+=s.slice(o,r).replace(z,B),o=r+e.length,t?a+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":n&&(a+="';\n"+n+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var n=new Function(e.variable||"obj","_",a)}catch(e){throw e.source=a,e}var r=function(e){return n.call(this,e,f)},l=e.variable||"obj";return r.source="function("+l+"){\n"+a+"}",r},f.chain=function(e){var t=f(e);return t._chain=!0,t};var j=function(e,t){return e._chain?f(t).chain():t};f.mixin=function(i){f.each(f.functions(i),function(e){var t=f[e]=i[e];f.prototype[e]=function(){var e=[this._wrapped];return r.apply(e,arguments),j(this,t.apply(f,e))}})},f.mixin(f),f.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=n[t];f.prototype[t]=function(){var e=this._wrapped;return i.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],j(this,e)}}),f.each(["concat","join","slice"],function(e){var t=n[e];f.prototype[e]=function(){return j(this,t.apply(this._wrapped,arguments))}}),f.prototype.value=function(){return this._wrapped},f.prototype.valueOf=f.prototype.toJSON=f.prototype.value,f.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return f})}).call(this)},{}],webfontloader:[function(e,te,t){!function(){function n(e,t,i){return e.call.apply(e.bind,arguments)}function r(t,i,e){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,n),t.apply(i,e)}}return function(){return t.apply(i,arguments)}}function f(e,t,i){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?n:r).apply(null,arguments)}var a=Date.now||function(){return+new Date};function t(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var l=!!window.FontFace;function c(e,t,i,n){if(t=e.c.createElement(t),i)for(var r in i)i.hasOwnProperty(r)&&("style"==r?t.style.cssText=i[r]:t.setAttribute(r,i[r]));return n&&t.appendChild(e.c.createTextNode(n)),t}function h(e,t,i){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(i,e.lastChild)}function i(e){e.parentNode&&e.parentNode.removeChild(e)}function m(e,t,i){t=t||[],i=i||[];for(var n=e.className.split(/\s+/),r=0;r<t.length;r+=1){for(var s=!1,o=0;o<n.length;o+=1)if(t[r]===n[o]){s=!0;break}s||n.push(t[r])}for(t=[],r=0;r<n.length;r+=1){for(s=!1,o=0;o<i.length;o+=1)if(n[r]===i[o]){s=!0;break}s||t.push(n[r])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function s(e,t){for(var i=e.className.split(/\s+/),n=0,r=i.length;n<r;n++)if(i[n]==t)return!0;return!1}function u(e,t,i){function n(){o&&r&&(o(s),o=null)}t=c(e,"link",{rel:"stylesheet",href:t,media:"all"});var r=!1,s=null,o=i||null;l?(t.onload=function(){r=!0,n()},t.onerror=function(){r=!0,s=Error("Stylesheet failed to load"),n()}):setTimeout(function(){r=!0,n()},0),h(e,"head",t)}function d(e,t,i,n){var r=e.c.getElementsByTagName("head")[0];if(r){var s=c(e,"script",{src:t}),o=!1;return s.onload=s.onreadystatechange=function(){o||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(o=!0,i&&i(null),s.onload=s.onreadystatechange=null,"HEAD"==s.parentNode.tagName&&r.removeChild(s))},r.appendChild(s),setTimeout(function(){o||(o=!0,i&&i(Error("Script load timeout")))},n||5e3),s}return null}function p(){this.a=0,this.c=null}function g(e){return e.a++,function(){e.a--,o(e)}}function v(e,t){e.c=t,o(e)}function o(e){0==e.a&&e.c&&(e.c(),e.c=null)}function _(e){this.a=e||"-"}function y(e,t){this.c=e,this.f=4,this.a="n";var i=(t||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function w(e){var t=[];e=e.split(/,\s*/);for(var i=0;i<e.length;i++){var n=e[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?t.push("'"+n+"'"):t.push(n)}return t.join(",")}function b(e){return e.a+e.f}function A(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function x(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new _("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function T(e){if(e.g){var t=s(e.f,e.a.c("wf","active")),i=[],n=[e.a.c("wf","loading")];t||i.push(e.a.c("wf","inactive")),m(e.f,i,n)}E(e,"inactive")}function E(e,t,i){e.j&&e.h[t]&&(i?e.h[t](i.c,b(i)):e.h[t]())}function S(){this.c={}}function k(e,t){this.c=e,this.f=t,this.a=c(this.c,"span",{"aria-hidden":"true"},this.f)}function M(e){h(e.c,"body",e.a)}function C(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+w(e.c)+";font-style:"+A(e)+";font-weight:"+e.f+"00;"}function I(e,t,i,n,r,s){this.g=e,this.j=t,this.a=n,this.c=i,this.f=r||3e3,this.h=s||void 0}function P(e,t,i,n,r,s,o){this.v=e,this.B=t,this.c=i,this.a=n,this.s=o||"BESbswy",this.f={},this.w=r||3e3,this.u=s||null,this.m=this.j=this.h=this.g=null,this.g=new k(this.c,this.s),this.h=new k(this.c,this.s),this.j=new k(this.c,this.s),this.m=new k(this.c,this.s),e=C(e=new y(this.a.c+",serif",b(this.a))),this.g.a.style.cssText=e,e=C(e=new y(this.a.c+",sans-serif",b(this.a))),this.h.a.style.cssText=e,e=C(e=new y("serif",b(this.a))),this.j.a.style.cssText=e,e=C(e=new y("sans-serif",b(this.a))),this.m.a.style.cssText=e,M(this.g),M(this.h),M(this.j),M(this.m)}_.prototype.c=function(e){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},I.prototype.start=function(){var r=this.c.o.document,s=this,o=a(),e=new Promise(function(i,n){!function t(){var e;a()-o>=s.f?n():r.fonts.load((e=s.a,A(e)+" "+e.f+"00 300px "+w(e.c)),s.h).then(function(e){1<=e.length?i():setTimeout(t,25)},function(){n()})}()}),i=null,t=new Promise(function(e,t){i=setTimeout(t,s.f)});Promise.race([t,e]).then(function(){i&&(clearTimeout(i),i=null),s.g(s.a)},function(){s.j(s.a)})};var L={D:"serif",C:"sans-serif"},N=null;function O(){if(null===N){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);N=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)}return N}function V(e,t,i){for(var n in L)if(L.hasOwnProperty(n)&&t===e.f[L[n]]&&i===e.f[L[n]])return!0;return!1}function R(e){var t,i=e.g.a.offsetWidth,n=e.h.a.offsetWidth;(t=i===e.f.serif&&n===e.f["sans-serif"])||(t=O()&&V(e,i,n)),t?a()-e.A>=e.w?O()&&V(e,i,n)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?D(e,e.v):D(e,e.B):setTimeout(f(function(){R(this)},e),50):D(e,e.v)}function D(e,t){setTimeout(f(function(){i(this.g.a),i(this.h.a),i(this.j.a),i(this.m.a),t(this.a)},e),0)}function F(e,t,i){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=i}P.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=a(),R(this)};var z=null;function B(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&m(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),E(e,"active")):T(e.a))}function e(e){this.j=e,this.a=new S,this.h=0,this.f=this.g=!0}function j(e,t){this.c=e,this.a=t}function q(e,t){this.c=e,this.a=t}function H(e,t){this.c=e||"https://fonts.googleapis.com/css",this.a=[],this.f=[],this.g=t||""}F.prototype.g=function(e){var t=this.a;t.g&&m(t.f,[t.a.c("wf",e.c,b(e).toString(),"active")],[t.a.c("wf",e.c,b(e).toString(),"loading"),t.a.c("wf",e.c,b(e).toString(),"inactive")]),E(t,"fontactive",e),this.m=!0,B(this)},F.prototype.h=function(e){var t=this.a;if(t.g){var i=s(t.f,t.a.c("wf",e.c,b(e).toString(),"active")),n=[],r=[t.a.c("wf",e.c,b(e).toString(),"loading")];i||n.push(t.a.c("wf",e.c,b(e).toString(),"inactive")),m(t.f,n,r)}E(t,"fontinactive",e),B(this)},e.prototype.load=function(e){this.c=new t(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(r,e,t){var i=[],n=t.timeout;s=e,s.g&&m(s.f,[s.a.c("wf","loading")]),E(s,"loading");var s;var i=function(e,t,i){var n,r=[];for(n in t)if(t.hasOwnProperty(n)){var s=e.c[n];s&&r.push(s(t[n],i))}return r}(r.a,t,r.c),o=new F(r.c,e,n);for(r.h=i.length,e=0,t=i.length;e<t;e++)i[e].load(function(e,t,i){var n,c,h,u,d,p;c=o,h=e,u=t,d=i,p=0==--(n=r).h,(n.f||n.g)&&setTimeout(function(){var e=d||null,t=u||{};if(0===h.length&&p)T(c.a);else{c.f+=h.length,p&&(c.j=p);var i,n=[];for(i=0;i<h.length;i++){var r=h[i],s=t[r.c],o=c.a,a=r;if(o.g&&m(o.f,[o.a.c("wf",a.c,b(a).toString(),"loading")]),E(o,"fontloading",a),(o=null)===z)if(window.FontFace){var a=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),l=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);z=a?42<parseInt(a[1],10):!l}else z=!1;o=z?new I(f(c.g,c),f(c.h,c),c.c,r,c.s,s):new P(f(c.g,c),f(c.h,c),c.c,r,c.s,e,s),n.push(o)}for(i=0;i<n.length;i++)n[i].start()}},0)})}(this,new x(this.c,e),e)},j.prototype.load=function(o){var t=this,a=t.a.projectId,e=t.a.version;if(a){var l=t.c.o;d(this.c,(t.a.api||"https://fast.fonts.net/jsapi")+"/"+a+".js"+(e?"?v="+e:""),function(e){e?o([]):(l["__MonotypeConfiguration__"+a]=function(){return t.a},function e(){if(l["__mti_fntLst"+a]){var t,i=l["__mti_fntLst"+a](),n=[];if(i)for(var r=0;r<i.length;r++){var s=i[r].fontfamily;null!=i[r].fontStyle&&null!=i[r].fontWeight?(t=i[r].fontStyle+i[r].fontWeight,n.push(new y(s,t))):n.push(new y(s))}o(n)}else setTimeout(function(){e()},50)}())}).id="__MonotypeAPIScript__"+a}else o([])},q.prototype.load=function(e){var t,i,n=this.a.urls||[],r=this.a.families||[],s=this.a.testStrings||{},o=new p;for(t=0,i=n.length;t<i;t++)u(this.c,n[t],g(o));var a=[];for(t=0,i=r.length;t<i;t++)if((n=r[t].split(":"))[1])for(var l=n[1].split(","),c=0;c<l.length;c+=1)a.push(new y(n[0],l[c]));else a.push(new y(n[0]));v(o,function(){e(a,s)})};function G(e){this.f=e,this.a=[],this.c={}}var W={latin:"BESbswy","latin-ext":"Ã§Ã¶Ã¼ÄŸÅŸ",cyrillic:"Ð¹ÑÐ–",greek:"Î±Î²Î£",khmer:"áž€ážáž‚",Hanuman:"áž€ážáž‚"},U={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Y={i:"i",italic:"i",n:"n",normal:"n"},X=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Q(e,t){this.c=e,this.a=t}var Z={Arimo:!0,Cousine:!0,Tinos:!0};function J(e,t){this.c=e,this.a=t}function K(e,t){this.c=e,this.f=t,this.a=[]}Q.prototype.load=function(e){var t=new p,i=this.c,n=new H(this.a.api,this.a.text),r=this.a.families;!function(e,t){for(var i=t.length,n=0;n<i;n++){var r=t[n].split(":");3==r.length&&e.f.push(r.pop());var s="";2==r.length&&""!=r[1]&&(s=":"),e.a.push(r.join(s))}}(n,r);var s=new G(r);!function(e){for(var t=e.f.length,i=0;i<t;i++){var n=e.f[i].split(":"),r=n[0].replace(/\+/g," "),s=["n4"];if(2<=n.length){var o;if(o=[],a=n[1])for(var a,l=(a=a.split(",")).length,c=0;c<l;c++){var h;if((h=a[c]).match(/^[\w-]+$/))if(null==(d=X.exec(h.toLowerCase())))h="";else{if(h=null==(h=d[2])||""==h?"n":Y[h],null==(d=d[1])||""==d)d="4";else var u=U[d],d=u||(isNaN(d)?"4":d.substr(0,1));h=[h,d].join("")}else h="";h&&o.push(h)}0<o.length&&(s=o),3==n.length&&(o=[],0<(n=(n=n[2])?n.split(","):o).length&&(n=W[n[0]])&&(e.c[r]=n))}for(e.c[r]||(n=W[r])&&(e.c[r]=n),n=0;n<s.length;n+=1)e.a.push(new y(r,s[n]))}}(s),u(i,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,i=[],n=0;n<t;n++)i.push(e.a[n].replace(/ /g,"+"));return t=e.c+"?family="+i.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(n),g(t)),v(t,function(){e(s.a,s.c,Z)})},J.prototype.load=function(o){var e=this.a.id,a=this.c.o;e?d(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)o([]);else if(a.Typekit&&a.Typekit.config&&a.Typekit.config.fn){e=a.Typekit.config.fn;for(var t=[],i=0;i<e.length;i+=2)for(var n=e[i],r=e[i+1],s=0;s<r.length;s++)t.push(new y(n,r[s]));try{a.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}o(t)}},2e3):o([])},K.prototype.load=function(c){var e,t=this.f.id,i=this.c.o,h=this;t?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[t]=function(e,t){for(var i=0,n=t.fonts.length;i<n;++i){var r=t.fonts[i];h.a.push(new y(r.name,(s="font-weight:"+r.weight+";font-style:"+r.style,l=a=o=void 0,o=4,a="n",l=null,s&&((l=s.match(/(normal|oblique|italic)/i))&&l[1]&&(a=l[1].substr(0,1).toLowerCase()),(l=s.match(/([1-9]00|normal|bold)/i))&&l[1]&&(/bold/i.test(l[1])?o=7:/[1-9]00/.test(l[1])&&(o=parseInt(l[1].substr(0,1),10)))),a+o)))}var s,o,a,l;c(h.a)},d(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+((e=this.c).o.location.hostname||e.a.location.hostname)+"/"+t+".js",function(e){e&&c([])})):c([])};var $=new e(window);$.a.c.custom=function(e,t){return new q(t,e)},$.a.c.fontdeck=function(e,t){return new K(t,e)},$.a.c.monotype=function(e,t){return new j(t,e)},$.a.c.typekit=function(e,t){return new J(t,e)},$.a.c.google=function(e,t){return new Q(t,e)};var ee={load:f($.load,$)};"function"==typeof define&&define.amd?define(function(){return ee}):void 0!==te&&te.exports?te.exports=ee:(window.WebFont=ee,window.WebFontConfig&&$.load(window.WebFontConfig))}()},{}]},{},[37]);