require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,c,d){function e(a){var b,c,d,e=a[0]/255,f=a[1]/255,g=a[2]/255,h=Math.min(e,f,g),i=Math.max(e,f,g),j=i-h;return i==h?b=0:e==i?b=(f-g)/j:f==i?b=2+(g-e)/j:g==i&&(b=4+(e-f)/j),b=Math.min(60*b,360),0>b&&(b+=360),d=(h+i)/2,c=i==h?0:.5>=d?j/(i+h):j/(2-i-h),[b,100*c,100*d]}function f(a){var b,c,d,e=a[0],f=a[1],g=a[2],h=Math.min(e,f,g),i=Math.max(e,f,g),j=i-h;return c=0==i?0:j/i*1e3/10,i==h?b=0:e==i?b=(f-g)/j:f==i?b=2+(g-e)/j:g==i&&(b=4+(e-f)/j),b=Math.min(60*b,360),0>b&&(b+=360),d=i/255*1e3/10,[b,c,d]}function h(a){var b=a[0],c=a[1],d=a[2],f=e(a)[0],g=1/255*Math.min(b,Math.min(c,d)),d=1-1/255*Math.max(b,Math.max(c,d));return[f,100*g,100*d]}function i(a){var b,c,d,e,f=a[0]/255,g=a[1]/255,h=a[2]/255;return e=Math.min(1-f,1-g,1-h),b=(1-f-e)/(1-e)||0,c=(1-g-e)/(1-e)||0,d=(1-h-e)/(1-e)||0,[100*b,100*c,100*d,100*e]}function j(a){return Z[JSON.stringify(a)]}function k(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255;b=b>.04045?Math.pow((b+.055)/1.055,2.4):b/12.92,c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92;var e=.4124*b+.3576*c+.1805*d,f=.2126*b+.7152*c+.0722*d,g=.0193*b+.1192*c+.9505*d;return[100*e,100*f,100*g]}function l(a){var b,c,d,e=k(a),f=e[0],g=e[1],h=e[2];return f/=95.047,g/=100,h/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,b=116*g-16,c=500*(f-g),d=200*(g-h),[b,c,d]}function m(a){return M(l(a))}function n(a){var b,c,d,e,f,g=a[0]/360,h=a[1]/100,i=a[2]/100;if(0==h)return f=255*i,[f,f,f];c=.5>i?i*(1+h):i+h-i*h,b=2*i-c,e=[0,0,0];for(var j=0;3>j;j++)d=g+1/3*-(j-1),0>d&&d++,d>1&&d--,f=1>6*d?b+6*(c-b)*d:1>2*d?c:2>3*d?b+(c-b)*(2/3-d)*6:b,e[j]=255*f;return e}function o(a){var b,c,d=a[0],e=a[1]/100,f=a[2]/100;return 0===f?[0,0,0]:(f*=2,e*=1>=f?f:2-f,c=(f+e)/2,b=2*e/(f+e),[d,100*b,100*c])}function p(a){return h(n(a))}function q(a){return i(n(a))}function s(a){return j(n(a))}function t(a){var b=a[0]/60,c=a[1]/100,d=a[2]/100,e=Math.floor(b)%6,f=b-Math.floor(b),g=255*d*(1-c),h=255*d*(1-c*f),i=255*d*(1-c*(1-f)),d=255*d;switch(e){case 0:return[d,i,g];case 1:return[h,d,g];case 2:return[g,d,i];case 3:return[g,h,d];case 4:return[i,g,d];case 5:return[d,g,h]}}function u(a){var b,c,d=a[0],e=a[1]/100,f=a[2]/100;return c=(2-e)*f,b=e*f,b/=1>=c?c:2-c,b=b||0,c/=2,[d,100*b,100*c]}function v(a){return h(t(a))}function w(a){return i(t(a))}function x(a){return j(t(a))}function y(a){var c,d,e,f,h=a[0]/360,i=a[1]/100,j=a[2]/100,k=i+j;switch(k>1&&(i/=k,j/=k),c=Math.floor(6*h),d=1-j,e=6*h-c,0!=(1&c)&&(e=1-e),f=i+e*(d-i),c){default:case 6:case 0:r=d,g=f,b=i;break;case 1:r=f,g=d,b=i;break;case 2:r=i,g=d,b=f;break;case 3:r=i,g=f,b=d;break;case 4:r=f,g=i,b=d;break;case 5:r=d,g=i,b=f}return[255*r,255*g,255*b]}function z(a){return e(y(a))}function A(a){return f(y(a))}function B(a){return i(y(a))}function C(a){return j(y(a))}function D(a){var b,c,d,e=a[0]/100,f=a[1]/100,g=a[2]/100,h=a[3]/100;return b=1-Math.min(1,e*(1-h)+h),c=1-Math.min(1,f*(1-h)+h),d=1-Math.min(1,g*(1-h)+h),[255*b,255*c,255*d]}function E(a){return e(D(a))}function F(a){return f(D(a))}function G(a){return h(D(a))}function H(a){return j(D(a))}function I(a){var b,c,d,e=a[0]/100,f=a[1]/100,g=a[2]/100;return b=3.2406*e+-1.5372*f+g*-.4986,c=e*-.9689+1.8758*f+.0415*g,d=.0557*e+f*-.204+1.057*g,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b=12.92*b,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=12.92*c,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:d=12.92*d,b=Math.min(Math.max(0,b),1),c=Math.min(Math.max(0,c),1),d=Math.min(Math.max(0,d),1),[255*b,255*c,255*d]}function J(a){var b,c,d,e=a[0],f=a[1],g=a[2];return e/=95.047,f/=100,g/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,b=116*f-16,c=500*(e-f),d=200*(f-g),[b,c,d]}function K(a){return M(J(a))}function L(a){var b,c,d,e,f=a[0],g=a[1],h=a[2];return 8>=f?(c=100*f/903.3,e=7.787*(c/100)+16/116):(c=100*Math.pow((f+16)/116,3),e=Math.pow(c/100,1/3)),b=.008856>=b/95.047?b=95.047*(g/500+e-16/116)/7.787:95.047*Math.pow(g/500+e,3),d=.008859>=d/108.883?d=108.883*(e-h/200-16/116)/7.787:108.883*Math.pow(e-h/200,3),[b,c,d]}function M(a){var b,c,d,e=a[0],f=a[1],g=a[2];return b=Math.atan2(g,f),c=360*b/2/Math.PI,0>c&&(c+=360),d=Math.sqrt(f*f+g*g),[e,d,c]}function N(a){return I(L(a))}function O(a){var b,c,d,e=a[0],f=a[1],g=a[2];return d=g/360*2*Math.PI,b=f*Math.cos(d),c=f*Math.sin(d),[e,b,c]}function P(a){return L(O(a))}function Q(a){return N(O(a))}function R(a){return Y[a]}function S(a){return e(R(a))}function T(a){return f(R(a))}function U(a){return h(R(a))}function V(a){return i(R(a))}function W(a){return l(R(a))}function X(a){return k(R(a))}c.exports={rgb2hsl:e,rgb2hsv:f,rgb2hwb:h,rgb2cmyk:i,rgb2keyword:j,rgb2xyz:k,rgb2lab:l,rgb2lch:m,hsl2rgb:n,hsl2hsv:o,hsl2hwb:p,hsl2cmyk:q,hsl2keyword:s,hsv2rgb:t,hsv2hsl:u,hsv2hwb:v,hsv2cmyk:w,hsv2keyword:x,hwb2rgb:y,hwb2hsl:z,hwb2hsv:A,hwb2cmyk:B,hwb2keyword:C,cmyk2rgb:D,cmyk2hsl:E,cmyk2hsv:F,cmyk2hwb:G,cmyk2keyword:H,keyword2rgb:R,keyword2hsl:S,keyword2hsv:T,keyword2hwb:U,keyword2cmyk:V,keyword2lab:W,keyword2xyz:X,xyz2rgb:I,xyz2lab:J,xyz2lch:K,lab2xyz:L,lab2rgb:N,lab2lch:M,lch2lab:O,lch2xyz:P,lch2rgb:Q};var Y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Z={};for(var $ in Y)Z[JSON.stringify(Y[$])]=$},{}],2:[function(a,b,c){var d=a("./conversions"),e=function(){return new j};for(var f in d){e[f+"Raw"]=function(a){return function(b){return"number"==typeof b&&(b=Array.prototype.slice.call(arguments)),d[a](b)}}(f);var g=/(\w+)2(\w+)/.exec(f),h=g[1],i=g[2];e[h]=e[h]||{},e[h][i]=e[f]=function(a){return function(b){"number"==typeof b&&(b=Array.prototype.slice.call(arguments));var c=d[a](b);if("string"==typeof c||void 0===c)return c;for(var e=0;e<c.length;e++)c[e]=Math.round(c[e]);return c}}(f)}var j=function(){this.convs={}};j.prototype.routeSpace=function(a,b){var c=b[0];return void 0===c?this.getValues(a):("number"==typeof c&&(c=Array.prototype.slice.call(b)),this.setValues(a,c))},j.prototype.setValues=function(a,b){return this.space=a,this.convs={},this.convs[a]=b,this},j.prototype.getValues=function(a){var b=this.convs[a];if(!b){var c=this.space,d=this.convs[c];b=e[c][a](d),this.convs[a]=b}return b},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(a){j.prototype[a]=function(b){return this.routeSpace(a,arguments)}}),b.exports=e},{"./conversions":1}],3:[function(a,b,c){function d(a){if(a){var b=/^#([a-fA-F0-9]{3})$/,c=/^#([a-fA-F0-9]{6})$/,d=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,e=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,f=/(\D+)/,g=[0,0,0],h=1,i=a.match(b);if(i){i=i[1];for(var j=0;j<g.length;j++)g[j]=parseInt(i[j]+i[j],16)}else if(i=a.match(c)){i=i[1];for(var j=0;j<g.length;j++)g[j]=parseInt(i.slice(2*j,2*j+2),16)}else if(i=a.match(d)){for(var j=0;j<g.length;j++)g[j]=parseInt(i[j+1]);h=parseFloat(i[4])}else if(i=a.match(e)){for(var j=0;j<g.length;j++)g[j]=Math.round(2.55*parseFloat(i[j+1]));h=parseFloat(i[4])}else if(i=a.match(f)){if("transparent"==i[1])return[0,0,0,0];if(g=u[i[1]],!g)return}for(var j=0;j<g.length;j++)g[j]=s(g[j],0,255);return h=h||0==h?s(h,0,1):1,g[3]=h,g}}function e(a){if(a){var b=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=a.match(b);if(c){var d=parseFloat(c[4]),e=s(parseInt(c[1]),0,360),f=s(parseFloat(c[2]),0,100),g=s(parseFloat(c[3]),0,100),h=s(isNaN(d)?1:d,0,1);return[e,f,g,h]}}}function f(a){if(a){var b=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=a.match(b);if(c){var d=parseFloat(c[4]),e=s(parseInt(c[1]),0,360),f=s(parseFloat(c[2]),0,100),g=s(parseFloat(c[3]),0,100),h=s(isNaN(d)?1:d,0,1);return[e,f,g,h]}}}function g(a){var b=d(a);return b&&b.slice(0,3)}function h(a){var b=e(a);return b&&b.slice(0,3)}function i(a){var b=d(a);return b?b[3]:(b=e(a))?b[3]:(b=f(a))?b[3]:void 0}function j(a){return"#"+t(a[0])+t(a[1])+t(a[2])}function k(a,b){return 1>b||a[3]&&a[3]<1?l(a,b):"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function l(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+b+")"}function m(a,b){if(1>b||a[3]&&a[3]<1)return n(a,b);var c=Math.round(a[0]/255*100),d=Math.round(a[1]/255*100),e=Math.round(a[2]/255*100);return"rgb("+c+"%, "+d+"%, "+e+"%)"}function n(a,b){var c=Math.round(a[0]/255*100),d=Math.round(a[1]/255*100),e=Math.round(a[2]/255*100);return"rgba("+c+"%, "+d+"%, "+e+"%, "+(b||a[3]||1)+")"}function o(a,b){return 1>b||a[3]&&a[3]<1?p(a,b):"hsl("+a[0]+", "+a[1]+"%, "+a[2]+"%)"}function p(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"hsla("+a[0]+", "+a[1]+"%, "+a[2]+"%, "+b+")"}function q(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"hwb("+a[0]+", "+a[1]+"%, "+a[2]+"%"+(void 0!==b&&1!==b?", "+b:"")+")"}function r(a){return v[a.slice(0,3)]}function s(a,b,c){return Math.min(Math.max(b,a),c)}function t(a){var b=a.toString(16).toUpperCase();return b.length<2?"0"+b:b}var u=a("color-name");b.exports={getRgba:d,getHsla:e,getRgb:g,getHsl:h,getHwb:f,getAlpha:i,hexString:j,rgbString:k,rgbaString:l,percentString:m,percentaString:n,hslString:o,hslaString:p,hwbString:q,keyword:r};var v={};for(var w in u)v[u[w]]=w},{"color-name":4}],4:[function(a,b,c){b.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],5:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j["default"],a.Exception=l["default"],a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}c.__esModule=!0;var g=a("./handlebars/base"),h=e(g),i=a("./handlebars/safe-string"),j=d(i),k=a("./handlebars/exception"),l=d(k),m=a("./handlebars/utils"),n=e(m),o=a("./handlebars/runtime"),p=e(o),q=a("./handlebars/no-conflict"),r=d(q),s=f();s.create=f,r["default"](s),s["default"]=s,c["default"]=s,b.exports=c["default"]},{"./handlebars/base":7,"./handlebars/exception":10,"./handlebars/no-conflict":20,"./handlebars/runtime":21,"./handlebars/safe-string":22,"./handlebars/utils":23}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}c.__esModule=!0,c.HandlebarsEnvironment=e;var f=a("./utils"),g=a("./exception"),h=d(g),i=a("./helpers"),j=a("./decorators"),k=a("./logger"),l=d(k),m="4.0.3";c.VERSION=m;var n=7;c.COMPILER_REVISION=n;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};c.REVISION_CHANGES=o;var p="[object Object]";e.prototype={constructor:e,logger:l["default"],log:l["default"].log,registerHelper:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===p)f.extend(this.partials,a);else{if("undefined"==typeof b)throw new h["default"]("Attempting to register a partial as undefined");this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};var q=l["default"].log;c.log=q,c.createFrame=f.createFrame,c.logger=l["default"]},{"./decorators":8,"./exception":10,"./helpers":11,"./logger":19,"./utils":23}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){g["default"](a)}c.__esModule=!0,c.registerDefaultDecorators=e;var f=a("./decorators/inline"),g=d(f)},{"./decorators/inline":9}],9:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},b.exports=c["default"]},{"../utils":23}],10:[function(a,b,c){"use strict";function d(a,b){var c=b&&b.loc,f=void 0,g=void 0;c&&(f=c.start.line,g=c.start.column,a+=" - "+f+":"+g);for(var h=Error.prototype.constructor.call(this,a),i=0;i<e.length;i++)this[e[i]]=h[e[i]];Error.captureStackTrace&&Error.captureStackTrace(this,d),c&&(this.lineNumber=f,this.column=g)}c.__esModule=!0;var e=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,c["default"]=d,b.exports=c["default"]},{}],11:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){g["default"](a),i["default"](a),k["default"](a),m["default"](a),o["default"](a),q["default"](a),s["default"](a)}c.__esModule=!0,c.registerDefaultHelpers=e;var f=a("./helpers/block-helper-missing"),g=d(f),h=a("./helpers/each"),i=d(h),j=a("./helpers/helper-missing"),k=d(j),l=a("./helpers/if"),m=d(l),n=a("./helpers/log"),o=d(n),p=a("./helpers/lookup"),q=d(p),r=a("./helpers/with"),s=d(r)},{"./helpers/block-helper-missing":12,"./helpers/each":13,"./helpers/helper-missing":14,"./helpers/if":15,"./helpers/log":16,"./helpers/lookup":17,"./helpers/with":18}],12:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;if(b===!0)return f(this);if(b===!1||null==b)return e(this);if(d.isArray(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):e(this);if(c.data&&c.ids){var g=d.createFrame(c.data);g.contextPath=d.appendContextPath(c.data.contextPath,c.name),c={data:g}}return f(b,c)})},b.exports=c["default"]},{"../utils":23}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("../utils"),f=a("../exception"),g=d(f);c["default"]=function(a){a.registerHelper("each",function(a,b){function c(b,c,f){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!f,k&&(j.contextPath=k+b)),i+=d(a[b],{data:j,blockParams:e.blockParams([a[b],b],[k+b,null])})}if(!b)throw new g["default"]("Must pass iterator to #each");var d=b.fn,f=b.inverse,h=0,i="",j=void 0,k=void 0;if(b.data&&b.ids&&(k=e.appendContextPath(b.data.contextPath,b.ids[0])+"."),e.isFunction(a)&&(a=a.call(this)),b.data&&(j=e.createFrame(b.data)),a&&"object"==typeof a)if(e.isArray(a))for(var l=a.length;l>h;h++)h in a&&c(h,h,h===a.length-1);else{var m=void 0;for(var n in a)a.hasOwnProperty(n)&&(void 0!==m&&c(m,h-1),m=n,h++);void 0!==m&&c(m,h-1,!0)}return 0===h&&(i=f(this)),i})},b.exports=c["default"]},{"../exception":10,"../utils":23}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("../exception"),f=d(e);c["default"]=function(a){a.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new f["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},b.exports=c["default"]},{"../exception":10}],15:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerHelper("if",function(a,b){return d.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},b.exports=c["default"]},{"../utils":23}],16:[function(a,b,c){"use strict";c.__esModule=!0,c["default"]=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},b.exports=c["default"]},{}],17:[function(a,b,c){"use strict";c.__esModule=!0,c["default"]=function(a){a.registerHelper("lookup",function(a,b){return a&&a[b]})},b.exports=c["default"]},{}],18:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerHelper("with",function(a,b){d.isFunction(a)&&(a=a.call(this));var c=b.fn;if(d.isEmpty(a))return b.inverse(this);var e=b.data;return b.data&&b.ids&&(e=d.createFrame(b.data),e.contextPath=d.appendContextPath(b.data.contextPath,b.ids[0])),c(a,{data:e,blockParams:d.blockParams([a],[e&&e.contextPath])})})},b.exports=c["default"]},{"../utils":23}],19:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("./utils"),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=b>=0?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;c>f;f++)d[f-1]=arguments[f]}}};c["default"]=e,b.exports=c["default"]},{"./utils":23}],20:[function(a,b,c){(function(a){"use strict";c.__esModule=!0,c["default"]=function(b){var c="undefined"!=typeof a?a:window,d=c.Handlebars;b.noConflict=function(){c.Handlebars===b&&(c.Handlebars=d)}},b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a){var b=a&&a[0]||1,c=r.COMPILER_REVISION;if(b!==c){if(c>b){var d=r.REVISION_CHANGES[c],e=r.REVISION_CHANGES[b];throw new q["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new q["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function g(a,b){function c(c,d,e){e.hash&&(d=o.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;i>h&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new q["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(e,b,e.helpers,e.partials,g,i,h)}var f=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=f.data;d._setup(f),!f.partial&&a.useData&&(g=l(b,g));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=f.depths?b!==f.depths[0]?[b].concat(f.depths):f.depths:[b]),(c=m(a.main,c,e,f.depths||[],g,i))(b,f)}if(!b)throw new q["default"]("No environment passed to template");if(!a||!a.main)throw new q["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new q["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:o.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var f=this.programs[a],g=this.fn(a);return b||e||d||c?f=h(this,a,g,b,c,d,e):f||(f=this.programs[a]=h(this,a,g)),f},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=o.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials,e.decorators=c.decorators):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(e.decorators=e.merge(c.decorators,b.decorators)))},d._child=function(b,c,d,f){if(a.useBlockParams&&!d)throw new q["default"]("must pass block params");if(a.useDepths&&!f)throw new q["default"]("must pass parent depths");return h(e,b,a[b],c,0,d,f)},d}function h(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return g&&b!==g[0]&&(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=m(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function i(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function j(a,b,c){c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var d=void 0;if(c.fn&&c.fn!==k&&(c.data=r.createFrame(c.data),d=c.data["partial-block"]=c.fn,d.partials&&(c.partials=o.extend({},c.partials,d.partials))),void 0===a&&d&&(a=d),void 0===a)throw new q["default"]("The partial "+c.name+" could not be found");return a instanceof Function?a(b,c):void 0}function k(){return""}function l(a,b){return b&&"root"in b||(b=b?r.createFrame(b):{},b.root=a),b}function m(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),o.extend(b,g)}return b}c.__esModule=!0,c.checkRevision=f,c.template=g,c.wrapProgram=h,c.resolvePartial=i,c.invokePartial=j,c.noop=k;var n=a("./utils"),o=e(n),p=a("./exception"),q=d(p),r=a("./base")},{"./base":7,"./exception":10,"./utils":23}],22:[function(a,b,c){"use strict";function d(a){this.string=a}c.__esModule=!0,d.prototype.toString=d.prototype.toHTML=function(){return""+this.string},c["default"]=d,b.exports=c["default"]},{}],23:[function(a,b,c){"use strict";function d(a){return l[a]}function e(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function f(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function g(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return n.test(a)?a.replace(m,d):a}function h(a){return a||0===a?q(a)&&0===a.length?!0:!1:!0}function i(a){var b=e({},a);return b._parent=a,b}function j(a,b){return a.path=b,a}function k(a,b){return(a?a+".":"")+b}c.__esModule=!0,c.extend=e,c.indexOf=f,c.escapeExpression=g,c.isEmpty=h,c.createFrame=i,c.blockParams=j,c.appendContextPath=k;var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},m=/[&<>"'`=]/g,n=/[&<>"'`=]/,o=Object.prototype.toString;c.toString=o;var p=function(a){return"function"==typeof a};p(/x/)&&(c.isFunction=p=function(a){return"function"==typeof a&&"[object Function]"===o.call(a)}),c.isFunction=p;var q=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===o.call(a):!1};c.isArray=q},{}],24:[function(a,b,c){b.exports=a("./dist/cjs/handlebars.runtime")["default"]},{"./dist/cjs/handlebars.runtime":6}],25:[function(a,b,c){b.exports=a("handlebars/runtime")["default"]},{"handlebars/runtime":24}],26:[function(a,b,c){b.exports=function(a){return null==a?"":""+a}},{}],27:[function(a,b,c){b.exports=function(a,b){if(1>b)return"";for(var c="";b>0;)1&b&&(c+=a),b>>=1,a+=a;return c}},{}],28:[function(a,b,c){var d=a("./pad");b.exports=function(a,b,c){return d(a,b,c)}},{"./pad":29}],29:[function(a,b,c){var d=a("./helper/makeString"),e=a("./helper/strRepeat");b.exports=function(a,b,c,f){a=d(a),b=~~b;var g=0;switch(c?c.length>1&&(c=c.charAt(0)):c=" ",
f){case"right":return g=b-a.length,a+e(c,g);case"both":return g=b-a.length,e(c,Math.ceil(g/2))+a+e(c,Math.floor(g/2));default:return g=b-a.length,e(c,g)+a}}},{"./helper/makeString":26,"./helper/strRepeat":27}],30:[function(a,b,c){var d=a("./pad");b.exports=function(a,b,c){return d(a,b,c,"right")}},{"./pad":29}],31:[function(a,b,c){"use strict";a("Modernizr"),a("es6-promise").polyfill(),a("classlist-polyfill"),a("raf-polyfill"),a("matches-polyfill"),a("fullscreen-polyfill");var d=a("underscore"),e=a("backbone");e.$=a("backbone.native"),a("backbone.babysitter"),a("Backbone.Mutators"),a("hammerjs"),window.addEventListener("load",function(b){if(void 0===window.bootstrap)return document.body.innerHTML="<h1>Oops... </h1>",document.documentElement.classList.remove("app-initial"),void document.documentElement.classList.add("app-error");var c=a("./model/collection/TypeCollection"),e=a("./model/collection/KeywordCollection"),f=a("./model/collection/BundleCollection"),g=window.bootstrap["types-all"],h=window.bootstrap["keywords-all"],i=window.bootstrap["bundles-all"],j=window.bootstrap["media-all"],k=d.groupBy(j,"bId");d.each(i,function(a,b,c){a.tIds=[],a.media=k[a.id],d.each(h,function(c,e,f){0===b&&(c.bIds=[]),d.contains(a.kIds,c.id)&&(c.bIds.push(a.id),d.contains(a.tIds,c.tId)||a.tIds.push(c.tId))})}),c.reset(g),e.reset(h),f.reset(i),delete window.bootstrap,a("./view/template/_helpers"),a("./view/template/_partials");var l=a("./view/AppView");window.app=new l})},{"./model/collection/BundleCollection":36,"./model/collection/KeywordCollection":37,"./model/collection/TypeCollection":38,"./view/AppView":44,"./view/template/_helpers":91,"./view/template/_partials":92,"Backbone.Mutators":"Backbone.Mutators",Modernizr:"Modernizr",backbone:"backbone","backbone.babysitter":"backbone.babysitter","backbone.native":"backbone.native","classlist-polyfill":"classlist-polyfill","es6-promise":"es6-promise","fullscreen-polyfill":"fullscreen-polyfill",hammerjs:"hammerjs","matches-polyfill":"matches-polyfill","raf-polyfill":"raf-polyfill",underscore:"underscore"}],32:[function(a,b,c){var d=(a("underscore"),a("backbone")),e=(a("../model/collection/TypeCollection"),a("../model/collection/KeywordCollection"),a("../model/collection/BundleCollection")),f=d.Router.extend({routes:{"bundles/:bundleHandle(/:mediaIndex)":"toBundleItem",bundles:"toBundleCollection","":function(){this.navigate("bundles",{trigger:!0,replace:!0})}},initialize:function(a){},selectMedia:function(a){this._changeSelection(a.get("bundle"),a),this._updateLocation()},selectBundle:function(a){this._changeSelection(a),this._updateLocation()},deselectMedia:function(){this._changeSelection(e.selected),this._updateLocation()},deselectBundle:function(){this._changeSelection(),this._updateLocation()},_updateLocation:function(){var a,b;a=e.selected,a&&(b=a.get("media").selected),this.navigate(this._getLocation(a,b),{trigger:!1})},_getLocation:function(a,b){var c,d;return d="bundles",a&&(d+="/"+a.get("handle"),b&&(c=a.get("media").indexOf(b),c>=0&&(d+="/"+c))),d},_goToLocation:function(a,b){this.navigate(this._getLocation(a,b),{trigger:!0})},toBundleItem:function(a,b){var c,d;if(c=e.findWhere({handle:a}),!c)throw new Error('Cannot find bundle with handle "'+a+'"');if(b&&(d=c.get("media").at(b),!d))throw new Error("No media at index "+b+' bundle with handle "'+a+'"');this._changeSelection(c,d)},toBundleCollection:function(){this._changeSelection()},_changeSelection:function(a,b){var c=e.selected;c?c.get("media").selected:void 0;this.trigger("change:before",a,b),a&&a.get("media").select(b),e.select(a),this.trigger("change:after",a,b)}});b.exports=new f},{"../model/collection/BundleCollection":36,"../model/collection/KeywordCollection":37,"../model/collection/TypeCollection":38,backbone:"backbone",underscore:"underscore"}],33:[function(a,b,c){var d=a("underscore"),e=function(a){return a.duration/1e3+"s "+a.easing+" "+a.delay/1e3+"s"};b.exports=function(){var b,c={},f=a("../../../sass/variables.json");b={};for(var g in f.breakpoints)b[g]=f.breakpoints[g].slice(1,-1);return c.BREAKPOINTS=b,c.DEFAULT_COLORS=d.clone(f.default_colors),c.HORIZONTAL_STEP=parseFloat(f.units.hu_px),c.VERTICAL_STEP=parseFloat(f.units.vu_px),c.TRANSITION_GAP=parseFloat(f.transitions.delay_interval_ms),c.TRANSITION_DURATION=parseFloat(f.transitions.duration_ms),c.TRANSITION_EASE=f.transitions.ease,c.NO_DELAY=0,c.TRANSITION_DELAY=c.TRANSITION_DURATION+c.TRANSITION_GAP,c.EXITING_DELAY=0*c.TRANSITION_DELAY+1,c.CHANGING_DELAY=1*c.TRANSITION_DELAY+1,c.ENTERING_DELAY=2*c.TRANSITION_DELAY+1,c.TRANSITION_END_TIMEOUT=3*c.TRANSITION_DELAY,b={},b.easing=c.TRANSITION_EASE,b.duration=c.TRANSITION_DURATION-1,c.TRANSIT_ENTERING=d.clone(b),c.TRANSIT_ENTERING.delay=c.ENTERING_DELAY,c.TRANSIT_ENTERING.className="transform-entering",c.TRANSIT_ENTERING.cssText=e(c.TRANSIT_ENTERING),c.TRANSIT_EXITING=d.clone(b),c.TRANSIT_EXITING.delay=c.EXITING_DELAY,c.TRANSIT_EXITING.className="transform-exiting",c.TRANSIT_EXITING.cssText=e(c.TRANSIT_EXITING),c.TRANSIT_IMMEDIATE=d.clone(b),c.TRANSIT_IMMEDIATE.delay=c.NO_DELAY,c.TRANSIT_IMMEDIATE.duration=c.TRANSITION_DURATION,c.TRANSIT_IMMEDIATE.className="transform-immediate",c.TRANSIT_IMMEDIATE.cssText=e(c.TRANSIT_IMMEDIATE),c.TRANSIT_CHANGING=d.clone(b),c.TRANSIT_CHANGING.delay=c.CHANGING_DELAY,c.TRANSIT_CHANGING.className="transform-changing",c.TRANSIT_CHANGING.cssText=e(c.TRANSIT_CHANGING),c.TRANSIT_PARENT=d.clone(c.TRANSIT_CHANGING),c.TRANSIT_ENTERING.cssText=e(c.TRANSIT_ENTERING),c.H_PANOUT_DRAG=.4,c.V_PANOUT_DRAG=.1,c.COLLAPSE_THRESHOLD=75,c.PAN_THRESHOLD=15,c.APP_ROOT=window.approot,c.MEDIA_DIR=window.mediadir,c.IMAGE_URL_TEMPLATES={original:d.template(c.MEDIA_DIR+"/<%= src %>"),"constrain-width":d.template(c.APP_ROOT+"image/1/<%= width %>/0/uploads/<%= src %>"),"constrain-height":d.template(c.APP_ROOT+"image/1/0/<%= height %>/uploads/<%= src %>")},delete window.approot,delete window.mediadir,c}()},{"../../../sass/variables.json":111,underscore:"underscore"}],34:[function(a,b,c){function d(a){var b=[],c=new e.Manager(a),d=new f({threshold:g.THRESHOLD,direction:e.DIRECTION_HORIZONTAL});b.push(d);var h=new f({event:"vpan",threshold:g.THRESHOLD,direction:e.DIRECTION_VERTICAL});b.push(h),h.requireFailure(d);var i=new e.Tap({});return b.push(i),i.recognizeWith(d),c.add(b),c}var e=(a("underscore"),a("hammerjs")),f=a("../../utils/touch/SmoothPanRecognizer"),g=a("./Globals"),h=null,i=-1,j=!1,k={"panstart panend pancancel vpanstart vpanend vpancancel":function(a){j=!a.isFinal,a.isFinal&&(i=a.srcEvent.timeStamp)}},l={click:function(a){i==a.timeStamp&&(i=-1,a.defaultPrevented||a.preventDefault(),a.stopPropagation())},dragstart:function(a){"IMG"==a.target.nodeName&&(a.defaultPrevented||a.preventDefault())},mouseup:function(a){j&&a.preventDefault()}},m={},n={init:function(a){if(null===h){h=d(a);var b,c=h.element;for(b in k)k.hasOwnProperty(b)&&h.on(b,k[b]);for(b in l)l.hasOwnProperty(b)&&c.addEventListener(b,l[b],!0);for(b in m)m.hasOwnProperty(b)&&c.addEventListener(b,m[b],!1)}else h.element!==a;return h},destroy:function(){if(null!==h){var a,b=h.element;for(a in l)l.hasOwnProperty(a)&&b.removeEventListener(a,l[a],!0);for(a in m)l.hasOwnProperty(a)&&b.removeEventListener(a,m[a],!0);h.destroy(),h=null}},getInstance:function(){return h}};b.exports=n},{"../../utils/touch/SmoothPanRecognizer":110,"./Globals":33,hammerjs:"hammerjs",underscore:"underscore"}],35:[function(a,b,c){var d=a("underscore"),e=a("backbone"),f=e.Collection.extend({initialize:function(a,b){b=d.defaults({},b,{initialSelection:"none",silentInitial:!0}),this.initialSelection=b.initialSelection,this.initialOptions={silent:b.silentInitial}},reset:function(a,b){this.deselect(this.initialOptions),e.Collection.prototype.reset.apply(this,arguments),"first"===this.initialSelection&&this.length&&this.select(this.at(0),this.initialOptions)},select:function(a,b){if(void 0===a&&(a=null),this.selected!==a){var c=!(b&&b.silent),e=this.selected;this.lastSelected=this.selected,this.lastSelectedIndex=this.selectedIndex,this.selected=a,this.selectedIndex=this.indexOf(a),e?(d.isFunction(e.deselect)?e.deselect(b):c&&(e.selected=void 0,e.trigger("deselected")),c&&this.trigger("deselect:one",e)):c&&this.trigger("deselect:none"),a?(d.isFunction(a.select)?a.select(b):c&&(a.selected=!0,a.trigger("selected")),c&&this.trigger("select:one",a)):c&&this.trigger("select:none")}},deselect:function(a){this.select(void 0,a)},selectAt:function(a,b){(0>a||a>=this.length)&&new RangeError("index is out of bounds"),this.select(this.at(a),b)},distance:function(a,b){throw new Error("not implemented")},hasFollowing:function(a){return a||(a=this.selected),this.indexOf(a)<this.length-1},following:function(a){return a||(a=this.selected),this.hasFollowing(a)?this.at(this.indexOf(a)+1):null},followingOrFirst:function(a){return a||(a=this.selected),this.at((this.indexOf(a)+1)%this.length)},hasPreceding:function(a){return a||(a=this.selected),this.indexOf(a)>0},preceding:function(a){return a||(a=this.selected),this.hasPreceding(a)?this.at(this.indexOf(a)-1):null},precedingOrLast:function(a){a||(a=this.selected);var b=this.indexOf(a)-1;return this.at(b>-1?b:this.length-1)}});b.exports=f},{backbone:"backbone",underscore:"underscore"}],36:[function(a,b,c){var d=a("../../model/SelectableCollection"),e=a("../item/BundleItem"),f=d.extend({model:e,comparator:function(a,b){var c=a.get("completed"),d=b.get("completed");return c>d?-1:d>c?1:0},url:"/json/bundles/"});b.exports=new f},{"../../model/SelectableCollection":35,"../item/BundleItem":39}],37:[function(a,b,c){var d=a("../../model/SelectableCollection"),e=a("../item/KeywordItem"),f=d.extend({model:e});b.exports=new f},{"../../model/SelectableCollection":35,"../item/KeywordItem":40}],38:[function(a,b,c){var d=a("backbone"),e=a("../item/TypeItem"),f=d.Collection.extend({model:e});b.exports=new f},{"../item/TypeItem":42,backbone:"backbone"}],39:[function(a,b,c){var d=a("backbone"),e=a("underscore"),f=a("color"),g=a("../../control/Globals"),h=a("../../model/SelectableCollection"),i=a("../item/MediaItem"),j=a("../../../utils/strings/stripTags"),k=a("../parseSymAttrs"),l=h.extend({model:i,comparator:"o"}),m=e.defaults({"has-colors":"defaults"},g.DEFAULT_COLORS);b.exports=d.Model.extend({defaults:function(){return{name:"",handle:"",desc:"",completed:0,kIds:[],attrs:e.clone(m)}},mutators:{domid:function(){return"b"+this.id},text:function(){return j(this.get("desc"))},media:{set:function(a,b,c,d){e.each(b,function(a){a.bundle=this},this),d(a,new l(b),c)},"transient":!0},attrs:{set:function(a,b,c,d){if(e.isArray(b)){var f=e.clone(m);e.each(b,function(a){if(e.isString(a)){var b=a.indexOf(":");b>0?f[a.substring(0,b)]=k(a.substring(b+1)):f[a]=a}}),b=f}else e.isObject(b)?b=e.defaults(b,m):(b=e.clone(m),b._value=b);d(a,b,c)}}},initialize:function(a,b){this.colors={fgColor:new f(this.attrs().color),bgColor:new f(this.attrs()["background-color"])},this.colors.hasDarkBg=this.colors.fgColor.luminosity()>this.colors.bgColor.luminosity()},attrs:function(){return this.get("attrs")},toString:function(){return this.id}})},{"../../../utils/strings/stripTags":109,"../../control/Globals":33,"../../model/SelectableCollection":35,"../item/MediaItem":41,"../parseSymAttrs":43,backbone:"backbone",color:"color",underscore:"underscore"}],40:[function(a,b,c){var d=a("backbone");b.exports=d.Model.extend({defaults:{name:"",handle:"",tId:0,attrs:null},mutators:{domid:function(){return"k"+this.id}},attrs:function(){return this.get("attrs")},toString:function(){return this.id}})},{backbone:"backbone"}],41:[function(a,b,c){var d=a("backbone"),e=a("underscore"),f=a("../../../utils/strings/stripTags"),g=a("../parseSymAttrs"),h=a("../../control/Globals");b.exports=d.Model.extend({defaults:function(){return{o:0,bId:-1,desc:"<p><em>Untitled</em></p>",src:"",w:0,h:0,srcset:[],attrs:{}}},mutators:{domid:function(){return"m"+this.id},name:function(){return this.get("text")||this.get("src")},handle:function(){return this.get("src")},text:function(){return f(this.get("desc"))},attrs:{set:function(a,b,c,d){if(e.isArray(b)){var f={};e.each(b,function(a){if(e.isString(a)){var b=a.indexOf(":");b>0?f[a.substring(0,b)]=g(a.substring(b+1)):f[a]=a}}),b=f}e.isObject(b)?e.extend(this.attrs(),b):b={},d(a,b,c)}},bundle:{set:function(a,b,c,d){e.defaults(this.attrs(),b.get("attrs")),d(a,b,c)},"transient":!0}},initialize:function(){var a=this.get("src");this._imageUrl=h.IMAGE_URL_TEMPLATES.original({src:a}),this._thumbUrl=h.IMAGE_URL_TEMPLATES["constrain-width"]({src:a,width:60})},attrs:function(){return this._attrs||(this._attrs={})},getImageUrl:function(){return this._imageUrl},getThumbUrl:function(){return this._thumbUrl},toString:function(){return this.id}})},{"../../../utils/strings/stripTags":109,"../../control/Globals":33,"../parseSymAttrs":43,backbone:"backbone",underscore:"underscore"}],42:[function(a,b,c){var d=a("backbone");b.exports=d.Model.extend({defaults:{name:"",handle:"",attrs:null},mutators:{domid:function(){return"t"+this.id}},attrs:function(){return this.get("attrs")},toString:function(){return this.id}})},{backbone:"backbone"}],43:[function(a,b,c){b.exports=function(a,b,c){return a.replace(/(\,|\;)/g,function(a){return","==a?";":","})}},{}],44:[function(a,b,c){var d=a("underscore"),e=a("backbone"),f=(a("color"),a("../control/Globals")),g=a("../control/TouchManager"),h=a("../control/Controller"),i=(a("../model/collection/BundleCollection"),a("./base/View")),j=a("./NavigationView"),k=a("./ContentView"),l=a("./helper/createColorStyleSheet"),m=a("../../utils/strings/stripTags"),n=i.extend({el:"body",initialize:function(a){this.breakpoints={"desktop-small":window.matchMedia(f.BREAKPOINTS["desktop-small"])},this.touch=g.init(document.querySelector("#container")),this.listenTo(h,{"change:before":this._beforeChange,"change:after":this._afterChange}),"complete"===document.readyState?l():document.addEventListener("load",l);var b=this.render.bind(this);window.addEventListener("onorientationchange",b,!1),window.addEventListener("resize",d.debounce(b,100,!1),!1),this.navigationView=new j({el:"#navigation"}),this.contentView=new k({el:"#content"}),e.history.start({pushState:!1,hashChange:!0}),this.requestAnimationFrame(function(){document.documentElement.classList.remove("app-initial"),document.documentElement.classList.add("app-ready")}),this.render()},render:function(){return document.documentElement.classList.toggle("desktop-small",this.breakpoints["desktop-small"].matches),this.navigationView.render(),this.contentView.render(),this},_beforeChange:function(a,b){},_afterChange:function(a,b){var c=this.el.classList;c.toggle("with-bundle",!!a),c.toggle("without-bundle",!a),c.toggle("with-media",!!b),c.toggle("without-media",!b),a&&c.toggle("color-dark",a.colors.hasDarkBg),this._lastBundle&&c.remove(this._lastBundle.get("domid")),a&&c.add(a.get("domid")),this._lastBundle=a,document.title=a?"Portfolio – "+m(a.get("name")):"Portfolio"}});b.exports=n},{"../../utils/strings/stripTags":109,"../control/Controller":32,"../control/Globals":33,"../control/TouchManager":34,"../model/collection/BundleCollection":36,"./ContentView":45,"./DebugToolbar":46,"./NavigationView":47,"./base/View":50,"./helper/createColorStyleSheet":62,backbone:"backbone",color:"color",underscore:"underscore"}],45:[function(a,b,c){var d=a("underscore"),e=a("../control/Globals"),f=a("../control/Controller"),g=a("../model/collection/BundleCollection"),h=a("./base/ContainerView"),i=a("./component/CollectionStack"),j=a("./template/CollectionStack.Media.hbs"),k=a("./component/SelectableListView"),l=a("./render/DotNavigationRenderer"),m=a("./component/Carousel"),n=a("./render/ImageRenderer"),o=a("./render/SequenceRenderer"),p=a("./render/VideoRenderer"),q=a("./template/CollectionStack.Bundle.hbs"),r=a("../../utils/event/transitionEnd"),s=h.extend({initialize:function(a){h.prototype.initialize.apply(this,arguments),d.bindAll(this,"_onVPanStart","_onVPanMove","_onVPanFinal"),this.childViews=[],this.bundleListeners={"select:one":this._onSelectOne,"select:none":this._onSelectNone,"deselect:one":this._onDeselectOne,"deselect:none":this._onDeselectNone},this.mediaListeners={"select:one":this._onSelectMedia,"select:none":this._onSelectMedia,"deselect:one":this._onDeselectMedia,"deselect:none":this._onDeselectMedia},this.listenTo(g,this.bundleListeners)},render:function(){return this.transforms.stopAllTransitions(),this.transforms.validate(),this.childViews.forEach(function(a){a.skipTransitions=!0,a.render()},this),h.prototype.render.apply(this,arguments)},_onCollapseChange:function(a){this.childViews.forEach(function(b){b.setEnabled(a)})},_onDeselectOne:function(a){this.stopListening(a.get("media"),this.mediaListeners),this.purgeChildren(),this.removeChildren(a)},_onDeselectNone:function(){this.touch.on("vpanstart",this._onVPanStart)},_onSelectOne:function(a){this.listenTo(a.get("media"),this.mediaListeners),this.createChildren(a),this.setCollapsed(!0)},_onSelectNone:function(){this.touch.off("vpanstart",this._onVPanStart),this.setCollapsed(!1)},_onDeselectMedia:function(a){this.isCollapsed()||(this.transforms.clearAllOffsets(),this.transforms.runAllTransitions(e.TRANSIT_ENTERING),this.transforms.validate())},_onSelectMedia:function(a){this._bundleChanging||this.setCollapsed(!0)},_beforeChange:function(a,b){this._bundleChanging=a!==g.selected},_afterChange:function(a,b){this._bundleChanging=!1},createChildren:function(a){var b=this.getPrefixedProperty("transition");this.captionStack=this.createMediaCaptionStack(a),this.carousel=this.createMediaCarousel(a),this.dotNavigation=this.createMediaDotNavigation(a),this.childViews.push(this.captionStack,this.carousel,this.dotNavigation),this.transforms.add(this.carousel.el,this.captionStack.el),this.childViews.forEach(function(a,c,d){if(!this.skipTransitions){var f=function(){var c=function(d){d.target===a.el&&(a.el.removeEventListener(r,c,!1),a.el.style.removeProperty(b))};a.el.addEventListener(r,c,!1),a.el.style[b]="opacity "+e.TRANSIT_ENTERING.cssText,a.el.style.removeProperty("opacity")};this.requestAnimationFrame(f),a.el.style.opacity=0}this.el.appendChild(a.el),a.render()},this)},removeChildren:function(a){var b=this.getPrefixedProperty("transform"),c=this.getPrefixedProperty("transition");this.transforms.remove(this.carousel.el,this.captionStack.el),this.childViews.forEach(function(a,d,g){if(a.stopListening(a.collection),f.stopListening(a),this.skipTransitions)a.remove();else{var h=getComputedStyle(a.el);if("0"==h.opacity||"hidden"==h.visibility)a.remove();else{var i=function(b){b.target===a.el&&(a.el.removeEventListener(r,i,!1),a.remove())};a.el.addEventListener(r,i,!1),a.el.classList.add("removing-child"),a.el.style[b]=h[b],a.el.style[c]="opacity "+e.TRANSIT_EXITING.cssText,a.el.style.opacity=0}}},this),this.childViews.length=0},purgeChildren:function(){var a,b,c,d,e=[];for(b=0,c=this.el.children.length;c>b;b++)d=this.el.children.item(b),d.classList.contains("removing-child")&&e.push(d);for(b=0,c=e.length;c>b;b++){d=e[b];try{a=h.findByElement(d).remove()}catch(f){this.el.removeChild(d)}}},PAN_MOVE_FACTOR:.05,_collapsedOffsetY:300,_onVPanStart:function(a){this.touch.on("vpanmove",this._onVPanMove),this.touch.on("vpanend vpancancel",this._onVPanFinal),this.transforms.stopAllTransitions(),this.transforms.clearAllCaptures(),this.el.classList.add("container-changing"),this._onVPanMove(a)},_onVPanMove:function(a){var b=a.thresholdDeltaY,c=this.isCollapsed()?b>0:0>b,d=this._collapsedOffsetY+Math.abs(a.thresholdOffsetY),f=this.isCollapsed()?1-this.PAN_MOVE_FACTOR:this.PAN_MOVE_FACTOR;b=Math.abs(b),b*=f,d*=f,c?b=b>d?(b-d)*e.V_PANOUT_DRAG+d:b:b*=-e.V_PANOUT_DRAG,b*=this.isCollapsed()?1:-1,this.transforms.offsetAll(0,b),this.transforms.validate()},_onVPanFinal:function(a){this.touch.off("vpanmove",this._onVPanMove),this.touch.off("vpanend vpancancel",this._onVPanFinal),this.transforms.clearAllOffsets(),this.willCollapseChange(a)?(this.transforms.runAllTransitions(this.isCollapsed()?e.TRANSIT_EXITING:e.TRANSIT_ENTERING),this.transforms.validate(),this.setCollapsed(!this.isCollapsed())):(this.transforms.runAllTransitions(e.TRANSIT_IMMEDIATE),this.transforms.validate()),this.el.classList.remove("container-changing")},willCollapseChange:function(a){return"vpanend"==a.type?this.isCollapsed()?a.thresholdDeltaY>e.COLLAPSE_THRESHOLD:a.thresholdDeltaY<-e.COLLAPSE_THRESHOLD:!1},createMediaCarousel:function(a){var b="media-carousel "+a.get("domid"),c=m.defaultRenderer.extend({className:"carousel-item empty-item",model:a,template:q}),d=function(a,b,d){if(-1===b)return c;switch(a.attrs()["@renderer"]){case"video":return p;case"sequence":return o;case"image":return n;default:return n}},e=new m({className:b,collection:a.get("media"),rendererFunction:d,emptyRenderer:c,direction:m.DIRECTION_HORIZONTAL,hammer:this.touch});return f.listenTo(e,{"view:select:one":f.selectMedia,"view:select:none":f.deselectMedia,"view:remove":f.stopListening}),e},createMediaCaptionStack:function(a){var b=new i({className:"media-caption-stack",collection:a.get("media"),template:j});return b},createMediaDotNavigation:function(a,b){var c=new k({className:"media-dotnav dots-fontello color-fg05",collection:a.get("media"),renderer:l});return f.listenTo(c,{"view:select:one":f.selectMedia,"view:select:none":f.deselectMedia,"view:remove":f.stopListening}),c}});b.exports=s},{"../../utils/event/transitionEnd":104,"../control/Controller":32,"../control/Globals":33,"../model/collection/BundleCollection":36,"./base/ContainerView":48,"./component/Carousel":52,"./component/CollectionStack":58,"./component/SelectableListView":61,"./render/DotNavigationRenderer":74,"./render/ImageRenderer":76,"./render/SequenceRenderer":80,"./render/VideoRenderer":83,"./template/CollectionStack.Bundle.hbs":84,"./template/CollectionStack.Media.hbs":85,underscore:"underscore"}],46:[function(a,b,c){var d=a("underscore"),e=a("backbone"),f=a("cookies-js"),g=a("../control/Globals"),h=(a("../control/Controller"),a("./template/DebugToolbar.hbs")),i=d.template("<%= w %> × <%= h %>"),j=e.View.extend({tagName:"div",className:"toolbar show-info color-fg05",template:h,events:{"click dt":function(a){this.el.classList.toggle("show-info"),this.el.classList.toggle("show-links")}},initialize:function(a){f.defaults={domain:String(window.location).match(/^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i)[1]},this.el.innerHTML=this.template({approot:g.APP_ROOT});var b=document.body.querySelector("#container"),c=this.el.querySelector("#show-grid"),d=this.el.querySelector("#show-blocks");this.initializeToggle(d,"debug-blocks",b),this.initializeToggle(c,"debug-grid-bg",b),this.backendEl=this.el.querySelector("#edit-backend"),this.listenTo(this.collection,"select:one select:none",this._onSelectAnyBundle),this.mediaInfoEl=this.el.querySelector("#media-info"),this.listenTo(this.collection,"select:one",this._onSelectOneBundle)},initializeToggle:function(a,b,c){a.addEventListener("click",function(a){c.classList.toggle(b),f.set(b,c.classList.contains(b)?"true":"")},!1),f.get(b)&&c.classList.add(b)},initializeToggleFn:function(a,b,c){var d="true"===f.get(b);c(d,b),a.addEventListener("click",function(a){d=!d,f.set(b,d?"true":""),c(d,b)},!1)},_onSelectAnyBundle:function(a){this.backendEl.setAttribute("href",g.APP_ROOT+"symphony/publish/bundles/edit/"+(a?a.id:""))},_onSelectOneBundle:function(a){var b=a.get("media");this._onSelectAnyMedia.call(this,b.selected),this.listenTo(b,"select:one select:none",this._onSelectAnyMedia),this.listenToOnce(a,"deselected",function(){this.stopListening(b,"select:one select:none",this._onSelectAnyMedia)})},_onSelectAnyMedia:function(a){this.mediaInfoEl.textContent=a?i(a.attributes):"",this.mediaInfoEl.style.display=a?"":"none"}});b.exports=j},{"../control/Controller":32,"../control/Globals":33,"./template/DebugToolbar.hbs":86,backbone:"backbone","cookies-js":"cookies-js",underscore:"underscore"}],47:[function(a,b,c){var d=a("underscore"),e=(a("backbone"),a("hammerjs")),f=a("../control/Globals"),g=(a("../control/TouchManager"),a("../control/Controller")),h=a("../model/collection/TypeCollection"),i=a("../model/collection/KeywordCollection"),j=a("../model/collection/BundleCollection"),k=a("./base/View"),l=a("./base/ContainerView"),m=a("./component/FilterableListView"),n=a("./component/GroupingListView");a("./component/CollectionPager");b.exports=l.extend({initialize:function(a){l.prototype.initialize.apply(this,arguments),d.bindAll(this,"_onHPanStart","_onHPanMove","_onHPanFinal"),d.bindAll(this,"_onVPanStart","_onVPanMove","_onVPanFinal"),this.bundleListeners={"select:one":this._onSelectOneBundle,"select:none":this._onSelectNoBundle,"deselect:one":this._onDeselectOneBundle,"deselect:none":this._onDeselectNoBundle},this.mediaListeners={"select:one":this._onSelectAnyMedia,"select:none":this._onSelectAnyMedia,"deselect:one":this._onDeselectAnyMedia,"deselect:none":this._onDeselectAnyMedia},this.listenTo(j,this.bundleListeners),this.sitename=this.assignSitenameButton(),this.bundleList=this.createBundleList(),this.keywordList=this.createKeywordList(),this.hGroupings=this.keywordList.el.querySelectorAll(".list-group span"),this.children=[this.bundleList,this.keywordList],this.transforms.add(this.bundleList.el,this.keywordList.el,this.bundleList.wrapper,this.keywordList.wrapper,this.sitename.el,this.hGroupings)},render:function(){return this.transforms.stopAllTransitions(),this.transforms.validate(),d.each(this.children,function(a){a.skipTransitions=!0,a.render()},this),l.prototype.render.apply(this,arguments)},_beforeChange:function(a,b){this._bundleChanging=a!==j.selected},_afterChange:function(a,b){this._bundleChanging=!1},_onDeselectOneBundle:function(a){this.stopListening(a.get("media"),this.mediaListeners),this.transforms.runTransition(f.TRANSIT_CHANGING,this.bundleList.el,this.keywordList.el),this.transforms.runTransition(this.isCollapsed()?f.TRANSIT_CHANGING:f.TRANSIT_ENTERING,this.sitename.el),this.transforms.runTransition(this.isCollapsed()?f.TRANSIT_EXITING:f.TRANSIT_ENTERING,this.hGroupings),this.transforms.runTransition(this.isCollapsed()?f.TRANSIT_EXITING:f.TRANSIT_ENTERING,this.bundleList.wrapper),this.transforms.runTransition(this.isCollapsed()?f.TRANSIT_EXITING:f.TRANSIT_ENTERING,this.keywordList.wrapper),this.transforms.validate()},_onDeselectNoBundle:function(){this.touch.on("panstart",this._onHPanStart),this.touch.on("vpanstart",this._onVPanStart),this.transforms.runTransition(f.TRANSIT_CHANGING,this.bundleList.el,this.keywordList.el),this.transforms.runTransition(f.TRANSIT_CHANGING,this.sitename.el),this.transforms.runTransition(f.TRANSIT_ENTERING,this.hGroupings),this.transforms.runTransition(f.TRANSIT_ENTERING,this.bundleList.wrapper,this.keywordList.wrapper),this.transforms.validate()},_onDeselectAnyMedia:function(a){this.isCollapsed()?(this.transforms.clearOffset(this.keywordList.wrapper),this.transforms.runTransition(f.TRANSIT_IMMEDIATE,this.keywordList.wrapper)):(this.transforms.runTransition(f.TRANSIT_CHANGING,this.bundleList.el,this.keywordList.el),this.transforms.runTransition(f.TRANSIT_ENTERING,this.bundleList.wrapper,this.keywordList.wrapper,this.sitename.el),this.transforms.runTransition(f.TRANSIT_ENTERING,this.hGroupings)),this._bundleChanging||this.transforms.validate()},_onSelectOneBundle:function(a){this.listenTo(a.get("media"),this.mediaListeners),this.keywordList.filterBy(a),this.setCollapsed(!0)},_onSelectNoBundle:function(){this.touch.off("panstart",this._onHPanStart),this.touch.off("vpanstart",this._onVPanStart),this.keywordList.clearFilter(),this.setCollapsed(!1)},_onSelectAnyMedia:function(a){this.setCollapsed(!0)},_onKeywordListSelect:function(a){this.isCollapsed()||(i.select(a),this.bundleList.filterBy(a))},_onCollapseChange:function(a){a&&(i.deselect(),this.bundleList.clearFilter()),this.bundleList.setCollapsed(a),this.keywordList.setCollapsed(a)},_onHPanStart:function(a){this.isCollapsed()&&j.selected.get("media").selectedIndex<=0&&document.body.matches(".desktop-small .default-layout")&&(this.touch.on("panend pancancel",this._onHPanFinal),this.touch.on("panmove",this._onHPanMove),this.transforms.stopTransitions(this.keywordList.wrapper),this.transforms.clearCapture(this.keywordList.wrapper),this._onHPanMove(a))},_onHPanMove:function(a){var b=a.thresholdDeltaX;b*=-1==j.selected.get("media").selectedIndex?a.offsetDirection&e.DIRECTION_LEFT?f.H_PANOUT_DRAG:.75:a.offsetDirection&e.DIRECTION_LEFT?.75:0,this.transforms.offset(b,void 0,this.keywordList.wrapper),this.transforms.validate()},_onHPanFinal:function(a){this.touch.off("panmove",this._onHPanMove),this.touch.off("panend pancancel",this._onHPanFinal),this.transforms.runTransition(f.TRANSIT_IMMEDIATE,this.keywordList.wrapper),this.transforms.clearOffset(this.keywordList.wrapper),this.transforms.validate()},_onVPanStart:function(a){this.touch.on("vpanmove",this._onVPanMove),this.touch.on("vpanend vpancancel",this._onVPanFinal),this.transforms.stopTransitions(this.bundleList.el,this.keywordList.el),this.transforms.clearCapture(this.bundleList.el,this.keywordList.el),this._onVPanMove(a)},PAN_MOVE_FACTOR:.05,_collapsedOffsetY:300,_onVPanMove:function(a){var b=a.thresholdDeltaY,c=this._collapsedOffsetY+Math.abs(a.thresholdOffsetY),d=this.isCollapsed()?b>0:0>b,e=this.isCollapsed()?this.PAN_MOVE_FACTOR:1-this.PAN_MOVE_FACTOR;b=Math.abs(b),b*=e,c*=e,d?b=b>c?(b-c)*f.V_PANOUT_DRAG+c:b:b*=-f.V_PANOUT_DRAG,b*=this.isCollapsed()?.5:-1,this.transforms.offset(0,b,this.bundleList.el,this.keywordList.el),this.transforms.validate()},_onVPanFinal:function(a){this.touch.off("vpanmove",this._onVPanMove),this.touch.off("vpanend vpancancel",this._onVPanFinal),this.transforms.clearOffset(this.bundleList.el,this.keywordList.el),this.willCollapseChange(a)?(this.transforms.runTransition(f.TRANSIT_CHANGING,this.bundleList.el,this.keywordList.el),this.transforms.runTransition(this.isCollapsed()?f.TRANSIT_EXITING:f.TRANSIT_ENTERING,this.bundleList.wrapper,this.keywordList.wrapper,this.sitename.el,this.hGroupings),this.setCollapsed(!this.isCollapsed()),this.transforms.validate()):(this.transforms.runTransition(f.TRANSIT_IMMEDIATE,this.bundleList.el,this.keywordList.el),this.transforms.validate())},willCollapseChange:function(a){return"vpanend"==a.type?this.isCollapsed()?a.thresholdDeltaY>f.COLLAPSE_THRESHOLD:a.thresholdDeltaY<-f.COLLAPSE_THRESHOLD:!1},assignSitenameButton:function(){var a=new k({el:"#site-name",events:{"click a":function(a){a.defaultPrevented||a.preventDefault(),g.deselectBundle()}}});return a.wrapper=a.el.parentElement,a},createBundleList:function(){var a=new m({el:"#bundle-list",collection:j,collapsed:!1,filterKey:"bIds",filterBy:i.selected,filterFn:function(a,b,c){return b?-1!==b.get("bIds").indexOf(a.id):!0}});return g.listenTo(a,{"view:select:one":g.selectBundle,"view:select:none":g.deselectBundle,"view:remove":g.stopListening}),a.wrapper=a.el.parentElement,a},createKeywordList:function(){var a=new n({el:"#keyword-list",collection:i,collapsed:!1,filterKey:"kIds",filterBy:j.selected,filterFn:function(a,b,c){return b?-1!==b.get("kIds").indexOf(a.id):!0},groupings:{collection:h,key:"tIds"}});return a.wrapper=a.el.parentElement,this.listenTo(a,"view:select:one view:select:none",this._onKeywordListSelect),a}})},{"../control/Controller":32,"../control/Globals":33,"../control/TouchManager":34,"../model/collection/BundleCollection":36,"../model/collection/KeywordCollection":37,"../model/collection/TypeCollection":38,"./base/ContainerView":48,"./base/View":50,"./component/CollectionPager":56,"./component/FilterableListView":59,"./component/GroupingListView":60,backbone:"backbone",hammerjs:"hammerjs",underscore:"underscore"}],48:[function(a,b,c){var d=(a("backbone"),a("underscore"),a("../../control/Globals"),a("./View")),e=a("../../../utils/TransformHelper"),f=a("../../control/TouchManager"),g=a("../../control/Controller");b.exports=d.extend({className:"container container-expanded",constructor:function(a){d.apply(this,arguments)},initialize:function(a){this.transforms=new e,this.touch=f.getInstance(),
this.listenTo(g,{"change:before":this._beforeChange,"change:after":this._afterChange}),this.listenTo(this,"collapsed:change",this._onCollapseChange)},_collapsed:!1,isCollapsed:function(){return this._collapsed},setCollapsed:function(a){this._collapsed!==a&&(this._collapsed=a,this.el.classList.toggle("container-collapsed",a),this.el.classList.toggle("container-expanded",!a),this.trigger("collapsed:change",a))},_beforeChange:function(a,b){},_afterChange:function(a,b){},_onCollapseChange:function(a){}})},{"../../../utils/TransformHelper":95,"../../control/Controller":32,"../../control/Globals":33,"../../control/TouchManager":34,"./View":50,backbone:"backbone",underscore:"underscore"}],49:[function(a,b,c){var d=a("underscore"),e=(a("backbone"),a("./View")),f=[],g=null,h={},i=!1,j=function(){var a=f;f=[],g=null,h={},i=!0,a.forEach(function(a){a&&a.call()}),i=!1},k=function(a){var b=h[a.cid]||(h[a.cid]=f.length);f[b]=a._applyRender,null===g&&(g=window.requestAnimationFrame(j))},l=function(a){h.hasOwnProperty(a.cid)&&(f[h[a.cid]]=null)},m=k,n=l,o=e.extend({constructor:function(a){d.bindAll(this,"_applyRender"),this._renderJobs={},e.apply(this,arguments)},remove:function(){return n(this),e.prototype.remove.apply(this,arguments)},requestRender:function(a,b){a&&(this._renderJobs.hasOwnProperty(a),this._renderJobs[a]=b?b:!0),m(this)},renderNow:function(){n(this),this._applyRender()},renderLater:function(){},needsRender:function(a){return this._renderJobs.hasOwnProperty(a)},validateRender:function(a){this.needsRender(a)&&(d.isFunction(this._renderJobs[a])&&this._renderJobs[a].call(),delete this._renderJobs[a])},_applyRender:function(){this.renderLater();for(var a in this._renderJobs)this._renderJobs.hasOwnProperty(a)&&delete this._renderJobs[a]}});b.exports=o},{"./View":50,backbone:"backbone",underscore:"underscore"}],50:[function(a,b,c){var d=a("backbone"),e=a("underscore"),f=a("../../../utils/css/prefixedProperty"),g=a("../../../utils/css/prefixedStyleName"),h=a("../../../utils/event/addTransitionCallback"),i=a("../../../utils/event/transitionEnd"),j=(a("../../../utils/object/getPrototypeChainValue"),{}),k=1,l=d.View.extend({cidPrefix:"view",constructor:function(a){if(Object.defineProperty(this,"cid",{get:function(){return this._cid||(this._cid=this.cidPrefix+k++)}}),a&&a.className&&this.className&&(a.className+=" "+e.result(this,"className")),"transitionend"!==i)for(var b in this.events)this.events.hasOwnProperty(b)&&/^transitionend(\s.+)?$/i.test(b)&&(this.events[b.toLowerCase().replace("transitionend",i)]=this.events[b],delete this.events[b]);d.View.apply(this,arguments)},remove:function(){return this.trigger("view:remove",this),d.View.prototype.remove.apply(this,arguments),delete j[this.cid],this},setElement:function(a,b){return this.el&&this.className?(d.View.prototype.setElement.apply(this,arguments),e.result(this,"className").split(" ").forEach(function(a){this.el.classList.add(a)},this)):d.View.prototype.setElement.apply(this,arguments),void 0===this.el||(this.el.setAttribute("data-cid",this.cid),this.el.cid=this.cid),j[this.cid]=this,this},setEnabled:function(a){},getPrefixedProperty:function(a){return f(a,this.el.style)},getPrefixedStyle:function(a){return g(a,this.el.style)},onTransitionEnd:function(a,b,c,d){return h(a,b,c,this,d)},requestAnimationFrame:function(a){return window.requestAnimationFrame(a.bind(this))},cancelAnimationFrame:function(a){return window.cancelAnimationFrame(a)}},{findByElement:function(a){return j[a.cid]},ViewError:a("./ViewError")});b.exports=l},{"../../../utils/css/prefixedProperty":99,"../../../utils/css/prefixedStyleName":100,"../../../utils/event/addTransitionCallback":103,"../../../utils/event/transitionEnd":104,"../../../utils/object/getPrototypeChainValue":105,"./ViewError":51,backbone:"backbone",underscore:"underscore"}],51:[function(a,b,c){function d(a,b){this.view=a,this.err=b,this.message=b.message}d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="ViewError",b.exports=d},{}],52:[function(a,b,c){var d=a("underscore"),e=(a("backbone"),a("hammerjs")),f=a("backbone.babysitter"),g=a("../../control/Globals"),h=(a("../base/View"),a("../base/DeferredView")),i=(a("../../../utils/setImmediate"),a("../render/CarouselRenderer")),j=function(a,b){return parseInt(a)},k=h.extend({cidPrefix:"carousel-",tagName:"div",className:"carousel skip-transitions",tapAreaGrow:10,selectThreshold:20,panThreshold:15,direction:e.DIRECTION_HORIZONTAL,renderer:i.extend({className:"carousel-item default-renderer"}),emptyRenderer:i.extend({className:"carousel-item empty-item"}),initialize:function(a){d.bindAll(this,"_createChildren","_measure","_onPan","_onTap"),this.initializeHammer(a),a.template&&(this.template=a.template),a.renderer&&(this.renderer=a.renderer),a.emptyRenderer&&(this.emptyRenderer=a.emptyRenderer),d.isFunction(a.rendererFunction)&&(this.rendererFunction=a.rendererFunction),this.children=new f,this.childGap=this.dirProp(20,18),this.metrics={},this._precedingDir=(e.DIRECTION_LEFT|e.DIRECTION_UP)&this.direction,this._followingDir=(e.DIRECTION_RIGHT|e.DIRECTION_DOWN)&this.direction,this.createChildrenNow(),this.setEnabledNow(!0),this.listenTo(this.collection,{reset:this._onReset,"select:one":this._onSelectAny,"select:none":this._onSelectAny,"deselect:one":this._onDeselectAny,"deselect:none":this._onDeselectAny})},remove:function(){return this._scrollPendingAction&&this._scrollPendingAction(!0),this._enabled&&(this.hammer.off("tap",this._onTap),this.hammer.off("panstart panmove panend pancancel",this._onPan)),this.removeChildren(),h.prototype.remove.apply(this)},initializeHammer:function(a){var b,c,d;a.direction===e.DIRECTION_VERTICAL&&(this.direction=e.DIRECTION_VERTICAL),(b=a.hammer)&&(c=b.get("pan"))?(c.options.direction!==e.DIRECTION_ALL&&(this.direction=c.options.direction),this.panThreshold=c.options.threshold):(b=new e.Manager(this.el),c=new e.Pan({threshold:this.panThreshold,direction:this.direction}),d=new e.Tap({threshold:this.panThreshold-1,interval:50,time:200}),d.recognizeWith(c),b.add([c,d]),this.on("view:remove",b.destroy,b)),this.hammer=b},dirProp:function(a,b){return this.direction&e.DIRECTION_HORIZONTAL?a:b},render:function(){return this.measureLater(),this.scrollByLater(0,k.IMMEDIATE),this.el.parentElement&&this.renderNow(),this},renderLater:function(){this.validateRender("createChildren"),this.validateRender("measure"),this.validateRender("scrollBy"),this.validateRender("enabled")},createChildrenNow:function(){this._createChildren()},createChildrenLater:function(){this.requestRender("createChildren",this._createChildren)},_createChildren:function(){var a,b;this.removeChildren(),this.collection.length&&(a=document.createDocumentFragment(),b=this.collection.selectedIndex,this.emptyRenderer?a.appendChild(this.createEmptyView().el):-1==b&&(b=0),this.collection.each(function(c,d,e){a.appendChild(this.createChildView(this._getRenderer(c,d,e),{model:c},d,b).el)},this),this.el.appendChild(a))},_getRenderer:function(a,b,c){return this.rendererFunction?this.rendererFunction(a,b,c):this.renderer},createEmptyView:function(){return this.emptyView=this.createChildView(this.emptyRenderer,d.pick(this,k.EMPTY_VIEW_OPTS),-1,this.collection.selectedIndex)},createChildView:function(a,b,c,d){var e=new a(b);switch(this.children.add(e),c-d){case 0:return e.el.classList.add("selected"),this._selectedView=e;case-1:return this._precedingView=e;case 1:return this._followingView=e;default:return e}},removeChildren:function(){this.children.each(this.removeChildView,this),this.emptyView=void 0},removeChildView:function(a){return this.children.remove(a),a.remove(),a},measureNow:function(){this._measure()},measureLater:function(){this.requestRender("measure",this._measure)},_measure:function(){var a,b,c=0,d=0,e=0,f=0,g=this.emptyView||this.children.first();this.children.each(function(a){a.render()}),this.children.each(function(b){a=this.measureChildView(b),a.pos=c,c+=a.outer+this.childGap,a.posInner=d,d+=a.inner+this.childGap,b!==this.emptyView&&(a.across>e&&(e=a.across),a.outer>f&&(f=a.outer,g=b))},this),a=this.metrics[g.cid],b=this.metrics[this.cid]||(this.metrics[this.cid]={}),b.across=e,b.outer=this.el[this.dirProp("offsetWidth","offsetHeight")],b.before=g.el[this.dirProp("offsetLeft","offsetTop")],b.inner=g.el[this.dirProp("offsetWidth","offsetHeight")],b.after=b.outer-(b.inner+b.before),this.tapAreaBefore=b.before+this.tapAreaGrow,this.tapAreaAfter=b.before+b.inner-this.tapAreaGrow,this.selectThreshold=Math.min(k.MAX_SELECT_THRESHOLD,.1*b.outer)},measureChildView:function(a){var b,c,d,e;return d=a.el,b=this.metrics[a.cid]||(this.metrics[a.cid]={}),a.metrics?(b.before=a.metrics[this.dirProp("marginLeft","marginTop")],b.outer=d[this.dirProp("offsetWidth","offsetHeight")],b.outer+=b.before,b.outer+=a.metrics[this.dirProp("marginRight","marginBottom")],b.inner=a.metrics.content[this.dirProp("width","height")],b.before+=a.metrics.content[this.dirProp("x","y")]):(c=getComputedStyle(d),b.before=j(c[this.dirProp("marginLeft","marginTop")]),b.outer=j(c[this.dirProp("maxWidth","maxHeight")])||j(c[this.dirProp("width","height")])||d[this.dirProp("offsetWidth","offsetHeight")],b.outer+=b.before,b.outer+=j(c[this.dirProp("marginRight","marginBottom")]),e=d.querySelector(".sizing")||d.firstChild,e?(b.inner=e[this.dirProp("offsetWidth","offsetHeight")],b.before+=e[this.dirProp("offsetLeft","offsetTop")]):(b.inner=b.outer,b.before=0)),b.after=b.outer-(b.inner+b.before),b.across=d[this.dirProp("offsetHeight","offsetWidth")],b},_enabled:void 0,isEnabled:function(){return this._enabled},setEnabled:function(a){this._enabled!==a&&(this._enabled=a,this.requestRender("enabled",this.renderEnabled.bind(this,a)))},setEnabledNow:function(a){this._enabled!==a&&(this._enabled=a,this.renderEnabled(a))},renderEnabled:function(a){a?(this.hammer.on("tap",this._onTap),this.hammer.on("panstart panmove panend pancancel",this._onPan)):(this.hammer.off("tap",this._onTap),this.hammer.off("panstart panmove panend pancancel",this._onPan)),this.children.each(function(b){b.setEnabled(a)}),this.el.classList.toggle("disabled",!a)},scrollByLater:function(a,b){this.requestRender("scrollBy",this._scrollBy.bind(this,a,b))},scrollByNow:function(a,b){this._scrollBy(a,b)},_scrollBy:function(a,b){var c,d,f,h,i,j,k;k=this.getPrefixedProperty("transform"),d=this._scrollCandidateView||this._selectedView,h=this._panCandidateView||this._selectedView,f=this.metrics[d.cid],i=this.metrics[h.cid],this.children.each(function(b){c=this.metrics[b.cid],j=Math.floor(this._getScrollOffset(a,c,f,i)),b.el.style[k]=this.direction&e.DIRECTION_HORIZONTAL?"translate3d("+j+"px,0,0)":"translate3d(0,"+j+"px,0)"},this),this._scrollEndCancellable&&this._scrollEndCancellable(!1),b?this.el.classList.add("skip-transitions"):(this.el.classList.remove("skip-transitions"),this._scrollEndCancellable=this.onTransitionEnd(this._selectedView.el,this.getPrefixedStyle("transform"),this._onScrollEnd,2*g.TRANSITION_DURATION)),this.commitScrollSelection()},_onScrollEnd:function(a){this._scrollEndCancellable=void 0,a&&this.el.classList.remove("scrolling")},_getScrollOffset:function(a,b,c,d){var e=b.pos-c.pos+a,f=0;return 0>e?f+=Math.abs(e)<b.outer?-b.after/b.outer*e:b.after:e>=0&&(f-=Math.abs(e)<b.outer?b.before/b.outer*e:b.before),e+f},commitScrollSelection:function(){if(void 0!==this._scrollCandidateView){var a=this._scrollCandidateView;this._scrollCandidateView=void 0,a.el.classList.remove("candidate"),this._internalSelection=!0,a===this.emptyView?this.trigger("view:select:none"):this.trigger("view:select:one",a.model),this._internalSelection=!1}},_onTap:function(a){this.commitScrollSelection();var b=this.dirProp(a.center.x,a.center.y);this.dirProp(a.center.y,a.center.x);b<this.tapAreaBefore?this._scrollCandidateView=this._precedingView:b>this.tapAreaAfter?this._scrollCandidateView=this._followingView:this._scrollCandidateView=void 0,this._scrollCandidateView&&(a.preventDefault(),this._scrollCandidateView.el.classList.add("candidate"),this.el.classList.add("scrolling"),this.scrollByNow(0,k.ANIMATED))},_onPan:function(a){switch(a.type){case"panstart":return this._onPanStart(a);case"panmove":return this._onPanMove(a);case"panend":return this._onPanFinish(a);case"pancancel":return this._onPanFinish(a)}},_onPanStart:function(a){this.commitScrollSelection();var b=this.direction&e.DIRECTION_HORIZONTAL?a.thresholdDeltaX:a.thresholdDeltaY;this.el.classList.add("panning"),this.el.classList.add("scrolling"),this.scrollByNow(b,k.IMMEDIATE)},_onPanMove:function(a){var b=this.direction&e.DIRECTION_HORIZONTAL?a.thresholdDeltaX:a.thresholdDeltaY,c=a.offsetDirection&this._precedingDir?this._precedingView:this._followingView;this._panCandidateView!==c&&(this._panCandidateView&&this._panCandidateView.el.classList.remove("candidate"),this._panCandidateView=c,this._panCandidateView&&this._panCandidateView.el.classList.add("candidate")),void 0===this._panCandidateView&&(b*=g.H_PANOUT_DRAG),this.scrollByNow(b,k.IMMEDIATE)},_onPanFinish:function(a){var b=this.direction&e.DIRECTION_HORIZONTAL?a.deltaX:a.deltaY,c=a.offsetDirection&this._precedingDir?this._precedingView:this._followingView;"panend"==a.type&&(a.direction^a.offsetDirection)&this.direction&&Math.abs(b)>this.selectThreshold&&(this._scrollCandidateView=c),this._panCandidateView&&this._panCandidateView!==this._scrollCandidateView&&this._panCandidateView.el.classList.remove("candidate"),this.el.classList.remove("panning"),this._panCandidateView=void 0,this.scrollByNow(0,k.ANIMATED)},_onReset:function(){this.createChildrenLater(),this.render()},_onSelectAny:function(a){this._selectedView.el.classList.remove("selected"),this.updateSelection(),this._selectedView.el.classList.add("selected"),this._internalSelection||(this.el.classList.add("scrolling"),this.scrollByNow(0,k.ANIMATED))},_onDeselectAny:function(a){},updateSelection:function(){var a,b=this.collection.selectedIndex;this.emptyView?(this._selectedView=(a=this.collection.at(b))?this.children.findByModel(a):this.emptyView,this._precedingView=a&&((a=this.collection.at(b-1))?this.children.findByModel(a):this.emptyView),this._followingView=(a=this.collection.at(b+1))&&this.children.findByModel(a)):(-1==b&&b++,this._selectedView=(a=this.collection.at(b))&&this.children.findByModel(a),this._precedingView=(a=this.collection.at(b-1))&&this.children.findByModel(a),this._followingView=(a=this.collection.at(b+1))&&this.children.findByModel(a))}},{MAX_SELECT_THRESHOLD:50,ANIMATED:!1,IMMEDIATE:!0,DIRECTION_VERTICAL:e.DIRECTION_VERTICAL,DIRECTION_HORIZONTAL:e.DIRECTION_HORIZONTAL,EMPTY_VIEW_OPTS:["model","collection","template"],defaultRenderer:i});b.exports=k},{"../../../utils/setImmediate":106,"../../control/Globals":33,"../base/DeferredView":49,"../base/View":50,"../render/CarouselRenderer":69,backbone:"backbone","backbone.babysitter":"backbone.babysitter",hammerjs:"hammerjs",underscore:"underscore"}],53:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i=a.escapeExpression,j="function";return'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" class="color-bg"\n		buffered-rendering="dynamic" shape-rendering="auto"\n		viewBox="-'+i((c.divide||b&&b.divide||h).call(g,null!=b?b.d:b,2,{name:"divide",hash:{},data:e}))+" -"+i((c.divide||b&&b.divide||h).call(g,null!=b?b.d:b,2,{name:"divide",hash:{},data:e}))+" "+i((f=null!=(f=c.d||(null!=b?b.d:b))?f:h,typeof f===j?f.call(g,{name:"d",hash:{},data:e}):f))+" "+i((f=null!=(f=c.d||(null!=b?b.d:b))?f:h,typeof f===j?f.call(g,{name:"d",hash:{},data:e}):f))+'" preserveAspectRatio="xMidYMid meet">\n	<g id="cicle-group" class="color-stroke" transform="rotate('+i((f=null!=(f=c.sr||(null!=b?b.sr:b))?f:h,typeof f===j?f.call(g,{name:"sr",hash:{},data:e}):f))+')" fill="none">\n		<circle id="steps" r="'+i((f=null!=(f=c.r||(null!=b?b.r:b))?f:h,typeof f===j?f.call(g,{name:"r",hash:{},data:e}):f))+'" stroke-width="'+i((f=null!=(f=c.s2||(null!=b?b.s2:b))?f:h,typeof f===j?f.call(g,{name:"s2",hash:{},data:e}):f))+'"></circle>\n		<circle id="amount"	r="'+i((f=null!=(f=c.r||(null!=b?b.r:b))?f:h,typeof f===j?f.call(g,{name:"r",hash:{},data:e}):f))+'" stroke-width="'+i((f=null!=(f=c.s1||(null!=b?b.s1:b))?f:h,typeof f===j?f.call(g,{name:"s1",hash:{},data:e}):f))+'"></circle>\n	</g>\n	<text id="step-label" class="color-reverse color-fill" \n		font-size="'+i((c.divide||b&&b.divide||h).call(g,null!=b?b.d:b,2,{name:"divide",hash:{},data:e}))+'" dy="'+i((c.divide||b&&b.divide||h).call(g,null!=b?b.d:b,6,{name:"divide",hash:{},data:e}))+'" text-anchor="middle">1</text>\n</svg>\n'},useData:!0})},{"hbsfy/runtime":25}],54:[function(a,b,c){var d=a("../base/View"),e=a("../../../utils/css/prefixedProperty");b.exports=d.extend({cidPrefix:"circle-progress-meter-",className:"progress-meter circle-progress-meter",template:a("./CircleProgressMeter.hbs"),initialize:function(a){this._value=a.value||0,this._total=a.total||1,this._transitionStartTime=-1,this._valueChanged=!0,this.createChildren()},createChildren:function(){var a,b,c=this._total;b={d:24,s1:3.6,s2:2.4,sw:2.75},b.r=b.d/2,b.c=b.d*Math.PI,b.sr=b.sw/2/b.r*(180/Math.PI)-90,this._params=b,this.el.innerHTML=this.template(b),this.labelEl=this.el.querySelector("#step-label"),this.amountShape=this.el.querySelector("#amount"),this.stepsShape=this.el.querySelector("#steps"),a=this.stepsShape.style,a.strokeDasharray=[b.c/c-b.sw,b.sw],a.strokeOpacity=.5,a=this.amountShape.style,a.strokeDasharray=[b.c-b.sw,b.c+b.sw],a.strokeDashoffset=b.c},valueTo:function(a,b){this._valueChanged=!0,this._transitionDuration=b||0,this._lastValue=this._value,this._value=a,this.render()},render:function(){if(this._valueChanged){var a;this._transitionDuration>0?(a="stroke-dashoffset "+this._transitionDuration+"ms linear 1ms",this._transitionStartTime=Date.now()):(a="stroke-dashoffset 0ms linear 0ms",this._transitionStartTime=-1),this.amountShape.style[e("transition")]=a,this.amountShape.style.strokeDashoffset=(1-this._value/this._total)*this._params.c}return this},events:{transitionend:"_onTransitionEnd"},_onTransitionEnd:function(a){a.target===this.amountShape&&(this._transitionStartTime=-1,this._transitionDuration=0)}})},{"../../../utils/css/prefixedProperty":99,"../base/View":50,"./CircleProgressMeter.hbs":53}],55:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=a.lambda,h=a.escapeExpression;return'<a class="preceding-button button" href="'+h(g(null!=(f=null!=b?b.preceding:b)?f.href:f,b))+'"><span class="name">'+(null!=(f=g(null!=(f=null!=b?b.preceding:b)?f.label:f,b))?f:"")+'</span></a>\n<a class="following-button button" href="'+h(g(null!=(f=null!=b?b.following:b)?f.href:f,b))+'"><span class="name">'+(null!=(f=g(null!=(f=null!=b?b.following:b)?f.label:f,b))?f:"")+'</span></a>\n<a class="close-button button" href="#"><span class="name">Close</span></a>\n'},useData:!0})},{"hbsfy/runtime":25}],56:[function(a,b,c){var d=(a("underscore"),a("backbone"),a("../base/View")),e=a("./CollectionPager.hbs");b.exports=d.extend({tagName:"div",className:"pager",template:e,labelAttribute:"name",events:{"click .preceding-button":function(a){a.isDefaultPrevented()||a.preventDefault(),this.trigger("view:select:one",this.collection.precedingOrLast())},"click .following-button":function(a){a.isDefaultPrevented()||a.preventDefault(),this.trigger("view:select:one",this.collection.followingOrFirst())},"click .close-button":function(a){a.isDefaultPrevented()||a.preventDefault(),this.trigger("view:select:none")}},initialize:function(a){a.template&&(this.template=a.template),a.labelAttribute&&(this.labelAttribute=a.labelAttribute),this.listenTo(this.collection,"select:one select:none",this.render),this.listenTo(this.collection,"reset",this.render)},render:function(){if(this.collection.length>1&&this.collection.selected){var a=this.collection.precedingOrLast(),b=this.collection.followingOrFirst();this.el.innerHTML=this.template({preceding:{label:this.getLabel(a),href:a.get("handle")},following:{label:this.getLabel(b),href:b.get("handle")}})}else this.el.innerHTML="";return this},getLabel:function(a){return a.has(this.labelAttribute)?a.get(this.labelAttribute):a.toString()}})},{"../base/View":50,"./CollectionPager.hbs":55,backbone:"backbone",underscore:"underscore"}],57:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return a.escapeExpression((f=null!=(f=c.id||(null!=b?b.id:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"id",hash:{},data:e}):f))+"\n"},useData:!0})},{"hbsfy/runtime":25}],58:[function(a,b,c){var d=(a("underscore"),a("backbone"),a("../../control/Globals"),a("../base/View")),e=(a("../../../utils/event/transitionEnd"),a("../../../utils/setImmediate")),f=a("./CollectionStack.hbs");b.exports=d.extend({tagName:"div",className:"stack",template:f,events:{transitionend:function(a){this._renderContent()}},initialize:function(a){this._enabled=!0,this._skipTransitions=!0,this._contentInvalid=!0,a.template&&(this.template=a.template),this.content=this.el.appendChild(document.createElement("div")),this.listenTo(this.collection,"select:one select:none",this._onSelectChange)},setEnabled:function(a){this._enabled!==a&&(this._enabled=a,this.el.classList.toggle("disabled",!this._enabled))},_onSelectChange:function(a){this._renderedItem!==this.collection.selected&&(this._contentInvalid=!0,this.render())},render:function(){return this._skipTransitions?(this._skipTransitions=!1,this.el.classList.add("skip-transitions"),e(function(){this.el.classList.remove("skip-transitions")}.bind(this)),this._renderContent()):this._contentInvalid&&(this.content.className="not-current"),this},_renderContent:function(){this._contentInvalid&&(this._contentInvalid=!1,this._renderedItem=this.collection.selected,this.content.innerHTML=this._renderedItem?this.template(this._renderedItem.toJSON()):"",this.content.className="current")}})},{"../../../utils/event/transitionEnd":104,"../../../utils/setImmediate":106,"../../control/Globals":33,"../base/View":50,"./CollectionStack.hbs":57,backbone:"backbone",underscore:"underscore"}],59:[function(a,b,c){var d=a("underscore"),e=(a("backbone"),a("backbone.babysitter")),f=(a("../base/View"),a("../base/DeferredView")),g=a("../render/ClickableRenderer"),h=f.extend({cidPrefix:"filterable-list-",tagName:"ul",className:"list selectable filterable skip-transitions",initialize:function(a){this.children=new e,this.renderer=a.renderer||h.defaultRenderer,a.filterFn&&(this._filterFn=a.filterFn),this.filterKey=a.filterKey,this.filterBy(a.filterBy),this.setSelection(this.collection.selected),this.setCollapsed(d.isBoolean(a.collapsed)?a.collapsed:!1),this.skipTransitions=!0,this.el.classList.add("skip-transitions"),this.collection.each(this.assignChildView,this),this.listenTo(this.collection,"select:one select:none",this.setSelection)},render:function(){return this.renderNow(),this},renderLater:function(){this.skipTransitions&&(this.el.classList.add("skip-transitions"),this.requestAnimationFrame(function(){this.skipTransitions=!1,this.el.classList.remove("skip-transitions")})),this.el.classList.toggle("collapsed-changed",this.needsRender("collapsed")),this.validateRender("collapsed"),this.validateRender("selection"),this.validateRender("filterBy"),this.renderLayout()},renderLayout:function(){var a,b=this.getPrefixedProperty("transform"),c=this.el.firstElementChild,d=window.getComputedStyle(this.el),e=parseFloat(d.paddingLeft),f=parseFloat(d.paddingTop),g=[],h=[],i=0;do a=-1!=c.className.indexOf("excluded"),this._collapsed&&a||0!=c.offsetHeight||(f-=c.offsetTop),g[i]=c,h[i]="translate3d("+e+"px,"+f+"px, 0px)",i++,this._collapsed&&a||(f+=c.offsetHeight+c.offsetTop);while(c=c.nextElementSibling);for(var j=0;i>j;j++)g[j].style[b]=h[j];f+=parseFloat(d.paddingBottom),this.el.style.height=f>0?f+"px":""},assignChildView:function(a,b){var c=new this.renderer({model:a,el:this.el.querySelector('.list-item[data-id="'+a.id+'"]')});return this.children.add(c),this.listenTo(c,"renderer:click",this.onChildClick),c},onChildClick:function(a){this.collection.selected!==a?this.trigger("view:select:one",a):this.trigger("view:select:none")},_collapsed:void 0,setCollapsed:function(a){a!==this._collapsed&&(this._collapsed=a,this.requestRender("collapsed",this.renderCollapsed.bind(this,a)))},getCollapsed:function(){return this._collapsed},renderCollapsed:function(a){this.el.classList.toggle("collapsed",a)},_selectedItem:void 0,setSelection:function(a){if(a!==this._selectedItem){var b=this._selectedItem;this.requestRender("selection",this.renderSelection.bind(this,a,b))}},renderSelection:function(a,b){b&&this.children.findByModel(b).el.classList.remove("selected"),a&&this.children.findByModel(a).el.classList.add("selected"),this._selectedItem=a},_filter:void 0,filterBy:function(a){if(a!==this._filter){var b=this._filter;this.requestRender("filterBy",this.renderFilterBy.bind(this,a,b))}},clearFilter:function(){this.filterBy(null)},renderFilterBy:function(a,b){this.el.classList.toggle("has-excluded",!!a),this.renderFiltersById(a&&a.get(this.filterKey),b&&b.get(this.filterKey)),this._filter=a},renderFiltersById:function(a,b){var c,e;this.itemIds||(this.itemIds=this.collection.pluck("id")),a&&(e=d.difference(b||this.itemIds,a),d.each(e,function(a){this.children.findByModel(this.collection.get(a)).el.classList.add("excluded")},this)),b&&(c=d.difference(a||this.itemIds,b),d.each(c,function(a){this.children.findByModel(this.collection.get(a)).el.classList.remove("excluded")},this))}},{defaultRenderer:g});b.exports=h},{"../base/DeferredView":49,"../base/View":50,"../render/ClickableRenderer":70,backbone:"backbone","backbone.babysitter":"backbone.babysitter",underscore:"underscore"}],60:[function(a,b,c){var d=a("underscore"),e=(a("backbone"),a("backbone.babysitter"),a("../base/View")),f=a("./FilterableListView"),g=f.extend({cidPrefix:"grouping-list-",tagName:"dl",className:"grouped",initialize:function(a){f.prototype.initialize.apply(this,arguments),a.groupings&&(this.groupingKey=a.groupings.key,this.groupingCollection=a.groupings.collection,this.groupingRenderer=a.groupings.renderer||g.defaultGroupRenderer,this.groupingCollection.each(this.assignGroupingView,this))},renderFilterBy:function(a,b){this.renderChildrenGroups(a&&a.get(this.groupingKey)),f.prototype.renderFilterBy.apply(this,arguments)},renderChildrenGroups:function(a){a?this.groupingCollection.each(function(b,c,e){this.children.findByModel(b).el.classList.toggle("excluded",!d.contains(a,b.id))},this):this.children.each(function(a){a.el.classList.remove("excluded")})},assignGroupingView:function(a){var b=new this.groupingRenderer({model:a,el:this.el.querySelector('.list-group[data-id="'+a.id+'"]')});return this.children.add(b),b}},{defaultGroupRenderer:e.extend({tagName:"dt",className:"list-group"})});b.exports=g},{"../base/View":50,"./FilterableListView":59,backbone:"backbone","backbone.babysitter":"backbone.babysitter",underscore:"underscore"}],61:[function(a,b,c){var d=(a("underscore"),a("backbone"),a("backbone.babysitter")),e=a("../base/View"),f=a("../render/DefaultSelectableRenderer"),g=a("../render/ClickableRenderer"),h=e.extend({cidPrefix:"selectable-list-",tagName:"ul",className:"list selectable",renderer:f,initialize:function(a){this._enabled=!0,this._childrenInvalid=!0,a.renderer&&(this.renderer=a.renderer),this.showEmpty=!!a.showEmpty,this.children=new d,this.listenTo(this.collection,"add remove reset",this._onCollectionChange)},_onCollectionChange:function(a){this._childrenInvalid=!0,this.render()},render:function(){return this._childrenInvalid&&(this._childrenInvalid=!1,this.createChildren()),this},setEnabled:function(a){this._enabled!==a&&(this._enabled=a,this.el.classList.toggle("disabled",!this._enabled))},createChildren:function(){var a,b;this.removeChildren(),this.el.innerHTML="",this.collection.length&&(a=document.createDocumentFragment(),this.showEmpty&&(b=this.createEmptyView(),a.appendChild(b.render().el)),this.collection.each(function(c,d,e){b=this.createChildView(c,d),a.appendChild(b.render().el)},this),this.el.appendChild(a))},createChildView:function(a,b){var c=new this.renderer({model:a});return this.children.add(c),this.listenTo(c,"renderer:click",this.onChildViewClick),c},removeChildren:function(){this.children.each(this.removeChildView,this)},removeChildView:function(a){return this.stopListening(a),this.children.remove(a),a.remove(),a},onChildViewClick:function(a){this.collection.selected!==a&&this._enabled&&this.trigger("view:select:one",a)},createEmptyView:function(){var a=new h.EmptyRenderer({model:this.collection});return this.children.add(a),this.listenTo(a,"renderer:click",function(){this._enabled&&this.trigger("view:select:none")}),a}},{EmptyRenderer:g.extend({tagName:"li",className:"list-item empty-item",initialize:function(a){this.listenTo(this.model,"selected deselected",this.renderClassList),this.renderClassList()},render:function(){return this.el.innerHTML='<a href="#clear"><b> </b></a>',this.renderClassList(),this},renderClassList:function(){this.el.classList.toggle("selected",-1===this.model.selectedIndex)}})});b.exports=h},{"../base/View":50,"../render/ClickableRenderer":70,"../render/DefaultSelectableRenderer":72,backbone:"backbone","backbone.babysitter":"backbone.babysitter",underscore:"underscore"}],62:[function(a,b,c){var d=a("underscore"),e=(a("color"),a("../../control/Globals"),a("../../../utils/StyleHelper")),f=a("../../model/collection/BundleCollection");b.exports=function(){var a,b,c,g,h,i,j,k,l,m,n,o,p=["background","background-color","color"],q=["box-shadow","border","border-radius"];f.each(function(f){b=f.attrs(),c=f.colors.fgColor,g=f.colors.bgColor,h=f.colors.hasDarkBg,n="body."+f.get("domid"),a=d.pick(b,p),a["-webkit-font-smoothing"]=h?"antialiased":"auto",e.createCSSRule(n,a),a={},a.color=c.clone().mix(g,.5).hslString(),a["border-color"]=c.clone().mix(g,.7).hslString(),e.createCSSRule(n+" .color-fg05",a),i=c.hslString(),j=g.hslString(),l=g.clone().mix(c,.1).hslString(),m=c.clone().mix(g,.1).hslString(),k=n+" .color-reverse",a={color:i},e.createCSSRule(n+" .color-fg",a),a={"background-color":j},e.createCSSRule(n+" .color-bg",a),a={color:l},a["-webkit-font-smoothing"]=h?"auto":"antialiased",e.createCSSRule(k+" .color-fg",a),e.createCSSRule(k+".color-fg",a),a={"background-color":m},e.createCSSRule(k+" .color-bg",a),e.createCSSRule(k+".color-bg",a),a={stroke:i},e.createCSSRule(n+" .color-stroke",a),a={fill:j},e.createCSSRule(n+" .color-fill",a),a={stroke:j},e.createCSSRule(k+" .color-stroke",a),e.createCSSRule(k+".color-stroke",a),a={fill:i},e.createCSSRule(k+" .color-fill",a),e.createCSSRule(k+".color-fill",a),o=".carousel."+f.get("domid"),a=d.pick(b,q),e.createCSSRule(o+" .media-item .content",a),a={},a["-webkit-font-smoothing"]=h?"auto":"antialiased",a.color=g.hslString(),a["background-color"]=g.clone().mix(c,.95).hslString(),"border-radius"in b&&(a["border-radius"]=b["border-radius"]),e.createCSSRule(o+" .media-item .placeholder",a)})}},{"../../../utils/StyleHelper":93,"../../control/Globals":33,"../../model/collection/BundleCollection":36,color:"color",underscore:"underscore"}],63:[function(a,b,c){window.XMLHttpRequest&&window.URL&&window.Blob?b.exports=function(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.open("GET",a,!0),e.responseType="blob",b&&(e.onprogress=function(a){b(a.loaded/a.total)}),e.onload=function(b){200==e.status?c(URL.createObjectURL(e.response)):d(Error(e.statusText+" ("+e.status+"): "+a))},e.onerror=function(b){var c=new Error("Failed to load image from "+a+" ("+b.type+")");c.event=b,d(c)},e.ontimeout=e.onerror,e.onabort=function(b){var c=new Error("Aborted loading image from "+a+" ("+b.type+")");c.event=b,d(c)},e.onloadend=function(){e.onabort=e.ontimeout=e.onerror=void 0,e.onload=e.onloadend=void 0,b&&(e.onprogress=void 0)},e.send()})}:b.exports=function(a){
return Promise.resolve(a)}},{}],64:[function(a,b,c){b.exports=function(a){return a.complete?Promise.resolve(a):new Promise(function(b,c){var d={load:function(c){e(),b(a)},error:function(b){var d=new Error("Failed to load image from "+a.src+" ["+b.type+"]");d.event=b,e(),c(d)}};d.abort=d.error;var e=function(){for(var b in d)d.hasOwnProperty(b)&&a.removeEventListener(b,d[b],!1)};for(var f in d)d.hasOwnProperty(f)&&a.addEventListener(f,d[f],!1)})}},{}],65:[function(a,b,c){var d=a("underscore"),e=a("./_whenImageLoads"),f=a("./_loadImageAsObjectURL"),g=/^blob\:.*/;b.exports=function(a){return new Promise(function(b,c){var h=a.getDefaultImage();if(a.model.has("prefetched"))h.src=a.model.get("prefetched"),e(h).then(function(c){b(a)});else{a.setState("pending");var i=function(b){a.placeholder.setAttribute("data-progress",(100*b).toFixed(0))};i=d.throttle(i,100,{leading:!0,trailing:!1}),f(a.model.getImageUrl(),i).then(function(b){return g.test(b)&&a.model.set({prefetched:b}),h.src=b,h}).then(e).then(function(c){a.placeholder.removeAttribute("data-progress"),b(a)})["catch"](function(b){a.placeholder.removeAttribute("data-progress"),c(b)})}})}},{"./_loadImageAsObjectURL":63,"./_whenImageLoads":64,underscore:"underscore"}],66:[function(a,b,c){var d=a("./whenTransitionEnds");b.exports=function(a){return a.model.selected?Promise.resolve(a):d(a,a.el,"transform")}},{"./whenTransitionEnds":68}],67:[function(a,b,c){var d=a("../base/ViewError");b.exports=function(a){return new Promise(function(b,c){var e=a.model,f=e.collection,g=function(a){return Math.abs(f.indexOf(e)-f.selectedIndex)<2};if(g())b(a);else{var h=function(){f.off("select:one select:none",i),a.off("view:remove",j)},i=function(c){g()&&(h(),b(a))},j=function(a){h(),c(new d(a,new Error("whenSelectionIsContiguous: view was removed")))};f.on("select:one select:none",i),a.on("view:remove",j)}})}},{"../base/ViewError":51}],68:[function(a,b,c){var d=a("../../../utils/event/transitionEnd"),e=a("../../../utils/css/prefixedProperty"),f=a("../../../utils/css/prefixedStyleName"),g=a("../base/ViewError"),h=function(a,b,c){var d,f,g,h=window.getComputedStyle(b);return d=h[e("transitionProperty",b.style)],"none"==d||"all"!=d&&-1===d.indexOf(c)?0:(f=h[e("transitionDelay",b.style)],g=h[e("transitionDuration",b.style)],1e3*(parseFloat(f)+parseFloat(g)))};b.exports=function(a,b,c,e){return new Promise(function(i,j){var k,l,m,n,o=e||h(a,b,c);c=f(c),0===o?i(a):(n=function(){m&&window.clearTimeout(m),b.removeEventListener(d,k,!1),a.off("view:remove",l)},k=function(d){d.target===b&&c==d.propertyName&&(n(),i(a))},b.addEventListener(d,k,!1),m=window.setTimeout(function(){m=null,n(),i(a)},o+200),l=function(){n(),j(new g(a,new Error("whenTransitionEnds: view was removed")))},a.on("view:remove",l))})}},{"../../../utils/css/prefixedProperty":99,"../../../utils/css/prefixedStyleName":100,"../../../utils/event/transitionEnd":104,"../base/ViewError":51}],69:[function(a,b,c){var d=a("underscore"),e=(a("backbone"),a("../base/View")),f=a("../../../utils/css/getBoxEdgeStyles");b.exports=e.extend({cidPrefix:"carousel-renderer-",tagName:"div",className:"carousel-item",template:d.template('<div class="content sizing"><%= name %></div>'),initialize:function(a){this.metrics={},this.metrics.content={},this.createChildren()},createChildren:function(){this.el.innerHTML=this.template(this.model.toJSON())},getSizingEl:function(){return this._sizing||(this._sizing=this.el.querySelector(".sizing"))},getContentEl:function(){return this._content||(this._content=this.el.querySelector(".content"))},measure:function(){var a=this.getSizingEl();return this.metrics=f(this.el,this.metrics),this.metrics.content=f(this.getContentEl(),this.metrics.content),a.style.maxWidth="",a.style.maxHeight="",this.metrics.content.x=a.offsetLeft+a.clientLeft,this.metrics.content.y=a.offsetTop+a.clientTop,this.metrics.content.width=a.clientWidth,this.metrics.content.height=a.clientHeight,this},render:function(){return this.measure(),this}})},{"../../../utils/css/getBoxEdgeStyles":98,"../base/View":50,backbone:"backbone",underscore:"underscore"}],70:[function(a,b,c){var d=(a("underscore"),a("backbone"));b.exports=d.View.extend({events:{click:function(a){this.trigger("renderer:click",this.model)},"click a":function(a){a.defaultPrevented||a.preventDefault()}}})},{backbone:"backbone",underscore:"underscore"}],71:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j="function";return'<a href="#'+a.escapeExpression((g=null!=(g=c.domid||(null!=b?b.domid:b))?g:i,typeof g===j?g.call(h,{name:"domid",hash:{},data:e}):g))+'"><span class="label">'+(null!=(g=null!=(g=c.name||(null!=b?b.name:b))?g:i,f=typeof g===j?g.call(h,{name:"name",hash:{},data:e}):g)?f:"")+"</span></a>\n"},useData:!0})},{"hbsfy/runtime":25}],72:[function(a,b,c){var d=a("./ClickableRenderer"),e=d.extend({tagName:"li",className:"list-item",template:a("./DefaultSelectableRenderer.hbs"),initialize:function(a){this.listenTo(this.model,"selected deselected",this._renderClassList),this._renderClassList()},render:function(){return this.el.innerHTML=this.template(this.model.toJSON()),this._renderClassList(),this},_renderClassList:function(){this.el.classList.toggle("selected",this.model.selected)}});b.exports=e},{"./ClickableRenderer":70,"./DefaultSelectableRenderer.hbs":71}],73:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i="function",j=a.escapeExpression;return'<span class="label">'+j((f=null!=(f=c.name||(null!=b?b.name:b))?f:h,typeof f===i?f.call(g,{name:"name",hash:{},data:e}):f))+'</span><a href="#'+j((f=null!=(f=c.domid||(null!=b?b.domid:b))?f:h,typeof f===i?f.call(g,{name:"domid",hash:{},data:e}):f))+'"><b> </b></a>\n'},useData:!0})},{"hbsfy/runtime":25}],74:[function(a,b,c){var d=(a("underscore"),a("backbone"),a("./DotNavigationRenderer.hbs")),e=a("./ClickableRenderer"),f=e.extend({tagName:"li",className:"list-item",template:d,initialize:function(a){this.listenTo(this.model,"selected deselected",this.renderClassList),this.renderClassList()},render:function(){return this.el.innerHTML=this.template(this.model.toJSON()),this.renderClassList(),this},renderClassList:function(){this.el.classList.toggle("selected",this.model.selected)}});b.exports=f},{"./ClickableRenderer":70,"./DotNavigationRenderer.hbs":73,backbone:"backbone",underscore:"underscore"}],75:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i="function",j=a.escapeExpression;return'<div class="placeholder sizing"></div>\n<img class="content default" alt="'+j((f=null!=(f=c.name||(null!=b?b.name:b))?f:h,typeof f===i?f.call(g,{name:"name",hash:{},data:e}):f))+'" longdesc="#desc_m'+j((f=null!=(f=c.id||(null!=b?b.id:b))?f:h,typeof f===i?f.call(g,{name:"id",hash:{},data:e}):f))+'" />\n'},useData:!0})},{"hbsfy/runtime":25}],76:[function(a,b,c){var d=(a("underscore"),a("backbone"),a("../../control/Globals"),a("../../model/item/MediaItem"),a("./MediaRenderer")),e=(a("../base/ViewError"),a("./ImageRenderer.hbs"));b.exports=d.extend({cidPrefix:"image-renderer-",className:d.prototype.className+" image-renderer",template:e,initialize:function(a){d.prototype.initialize.apply(this,arguments)},createChildren:function(){this.el.innerHTML=this.template(this.model.toJSON()),this.placeholder=this.el.querySelector(".placeholder")},render:function(){this.measure();var a=this.getDefaultImage();a.setAttribute("width",this.metrics.media.width),a.setAttribute("height",this.metrics.media.height);var b=this.getContentEl();b.style.left=this.metrics.content.x+"px",b.style.top=this.metrics.content.y+"px";var c=this.getSizingEl();return c.style.maxWidth=this.metrics.content.width+"px",c.style.maxHeight=this.metrics.content.height+"px",this},initializeAsync:function(){return d.prototype.initializeAsync.apply(this,arguments)}})},{"../../control/Globals":33,"../../model/item/MediaItem":41,"../base/ViewError":51,"./ImageRenderer.hbs":75,"./MediaRenderer":77,backbone:"backbone",underscore:"underscore"}],77:[function(a,b,c){var d=(a("underscore"),a("../../../utils/css/getBoxEdgeStyles"),a("../../model/item/MediaItem")),e=a("./CarouselRenderer");b.exports=e.extend({cidPrefix:"media-renderer-",className:e.prototype.className+" media-item",model:d,initialize:function(a){this.model.attrs().hasOwnProperty("@classname")&&(this.el.className+=" "+this.model.attrs()["@classname"]),e.prototype.initialize.apply(this,arguments),this.metrics.media={},this.setState("idle"),this.initializeAsync().then(function(a){a.setState("done")})["catch"](function(a){a instanceof e.ViewError||(this.placeholder.innerHTML='<p class="color-fg" style="position:absolute;bottom:0;padding:3rem;"><strong>'+a.name+"</strong> "+a.message+"</p>",this.setState("error"))}.bind(this))},initializeAsync:function(){var a=Object.getPrototypeOf(this).constructor;return Promise.resolve(this).then(a.whenSelectionIsContiguous).then(a.whenSelectTransitionEnds).then(a.whenDefaultImageLoads)},getDefaultImage:function(){return this._defaultImage||(this._defaultImage=this.el.querySelector("img.default"))},measure:function(){var a,b,c,d,f,g,h,i,j,k,l,m;this.getSizingEl();return e.prototype.measure.apply(this,arguments),m=this.metrics.content,f=m.x,g=m.y,c=m.width,d=m.height,k=m.paddingLeft+m.paddingRight+m.borderLeftWidth+m.borderRightWidth,l=m.paddingTop+m.paddingBottom+m.borderTopWidth+m.borderBottomWidth,c-=k,d-=l,a=this.model.get("w"),b=this.model.get("h"),c>a&&d>b?(j=1,h=a,i=b):a/b>c/d?(h=c,j=h/a,i=Math.round(j*b)):(i=d,j=i/b,h=Math.round(j*a)),this.metrics.content.x=f,this.metrics.content.y=g,this.metrics.content.width=h+k,this.metrics.content.height=i+l,this.metrics.media.width=h,this.metrics.media.height=i,this.metrics.media.scale=j,this},render:function(){this.measure();var a=this.getSizingEl();return a.style.maxWidth=this.metrics.content.width+"px",a.style.maxHeight=this.metrics.content.height+"px",this},_stateEnum:["idle","pending","done","error"],setState:function(a){if(-1===this._stateEnum.indexOf(a))throw new Error("Argument "+a+" invalid. Must be one of: "+this._stateEnum.join(", "));this._lastState!==a&&(this._lastState&&this.el.classList.remove(this._lastState),this.el.classList.add(a),this._lastState=a)}},{whenSelectionIsContiguous:a("../promise/whenSelectionIsContiguous"),whenSelectTransitionEnds:a("../promise/whenSelectTransitionEnds"),whenDefaultImageLoads:a("../promise/whenDefaultImageLoads")})},{"../../../utils/css/getBoxEdgeStyles":98,"../../model/item/MediaItem":41,"../promise/whenDefaultImageLoads":65,"../promise/whenSelectTransitionEnds":66,"../promise/whenSelectionIsContiguous":67,"./CarouselRenderer":69,underscore:"underscore"}],78:[function(a,b,c){var d=a("underscore"),e=a("color"),f=a("./MediaRenderer"),g=a("../../../utils/canvas/bitmap/getAverageRGB"),h=null,i=function(){return null===h&&(h=document.createElement("canvas")),h};b.exports=f.extend({className:f.prototype.className+" playable-renderer",initialize:function(a){f.prototype.initialize.apply(this,arguments),d.bindAll(this,"_onToggleEvent"),this._lastMediaState=null},setEnabled:function(a){a||this.model.selected&&this.togglePlayback(!1)},addSelectionListeners:function(){this.listenTo(this.model,"selected",this._onModelSelected),this.listenTo(this.model,"deselected",this._onModelDeselected),this.model.selected&&this._onModelSelected()},removeSelectionListeners:function(){this.stopListening(this.model,"selected",this._onModelSelected),this.stopListening(this.model,"deselected",this._onModelDeselected),this.model.selected&&this._onModelDeselected()},_toggleEvent:"mouseup",_onModelSelected:function(){this.playToggle.addEventListener(this._toggleEvent,this._onToggleEvent,!1),this.listenTo(this,"view:remove",this._removeClickHandler)},_onModelDeselected:function(){this.togglePlayback(!1),this.playToggle.removeEventListener(this._toggleEvent,this._onToggleEvent,!1),this.stopListening(this,"view:remove",this._removeClickHandler)},_removeClickHandler:function(){this.playToggle.removeEventListener(this._toggleEvent,this._onToggleEvent,!1)},_onToggleEvent:function(a){a.defaultPrevented||a.button||(this.togglePlayback(),a.preventDefault())},togglePlayback:function(a){},_mediaStates:["network","media","user-play","user-resume","user-replay"],setMediaState:function(a){if(-1===this._mediaStates.indexOf(a))throw new Error("Argument "+a+" invalid. Must be one of: "+this._mediaStates.join(", "));this._lastMediaState!==a&&(this._lastMediaState&&this.content.classList.remove("pending-"+this._lastMediaState),this.content.classList.add("pending-"+a),this._lastMediaState=a)},updateOverlay:function(a,b,c){c||(c=b);var d=c.offsetLeft,f=c.offsetTop,h=c.offsetWidth,j=c.offsetHeight;if(void 0!==d&&void 0!==f&&void 0!==h&&void 0!==j){var k,l,m,n=20,o={x:d-n,y:f-n,width:h+2*n,height:j+2*n},p=this.model.get("w"),q=this.model.get("h"),r=p/this.metrics.media.width,s=q/this.metrics.media.height,t={x:Math.max(0,o.x*r),y:Math.max(0,o.y*s),width:Math.min(p,o.width*r),height:Math.min(q,o.height*s)};k=i(),(k.width!==o.width||k.height!==o.height)&&(k.width=o.width,k.height=o.height),l=k.getContext("2d"),l.clearRect(0,0,o.width,o.height),l.drawImage(a,t.x,t.y,t.width,t.height,0,0,o.width,o.height),m=l.getImageData(0,0,o.width,o.height);var u=e().rgb(g(m));b.classList.toggle("over-dark",u.dark())}}})},{"../../../utils/canvas/bitmap/getAverageRGB":97,"./MediaRenderer":77,color:"color",underscore:"underscore"}],79:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i="function",j=a.escapeExpression;return'<div class="placeholder sizing"></div>\n<div class="content play-toggle">\n	<div class="sequence media-size">\n		<img class="current default" alt="'+j((f=null!=(f=c.name||(null!=b?b.name:b))?f:h,typeof f===i?f.call(g,{name:"name",hash:{},data:e}):f))+'" longdesc="#desc_m'+j((f=null!=(f=c.id||(null!=b?b.id:b))?f:h,typeof f===i?f.call(g,{name:"id",hash:{},data:e}):f))+'" />\n	</div>\n	<div class="overlay media-size">\n		<div class="play-toggle-hitarea play-toggle"><!-- &#xe80d; --></div>\n	</div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":25}],80:[function(a,b,c){var d=a("underscore"),e=a("backbone"),f=a("backbone.babysitter"),g=a("../../control/Globals"),h=a("./PlayableRenderer"),i=a("../base/View"),j=a("../../model/SelectableCollection"),k=a("../component/CircleProgressMeter"),l=a("../../../utils/event/transitionEnd"),m=(a("../../../utils/css/prefixedProperty"),a("../promise/_whenImageLoads")),n=a("../../../utils/Timer"),o=j.extend({model:e.Model}),p=i.extend({cidPrefix:"sequence-step-renderer-",tagName:"img",className:"sequence-step",attributes:function(){return{src:""}},initialize:function(a){this.el.classList.toggle("current",this.model.hasOwnProperty("selected")),this.listenTo(this.model,{selected:function(){this.el.classList.add("current")},deselected:function(){this.el.classList.remove("current")}}),h.whenSelectionIsContiguous(this).then(function(a){a.el.src=g.MEDIA_DIR+"/"+a.model.get("src")})}});b.exports=h.extend({cidPrefix:"sequence-renderer-",className:h.prototype.className+" sequence-renderer",template:a("./SequenceRenderer.hbs"),initialize:function(a){h.prototype.initialize.apply(this,arguments)},createChildren:function(){this.el.innerHTML=this.template(this.model.toJSON()),this.placeholder=this.el.querySelector(".placeholder"),this.content=this.el.querySelector(".content");var a,b,c,d=["box-shadow","border","border-radius"],e=["border-radius"],f=this.model.get("attrs");for(b=0,c=d.length;c>b;b++)a=d[b],"string"==typeof f[a]&&(this.content.style[a]=f[a]);for(b=0,c=e.length;c>b;b++)a=e[b],"string"==typeof f[a]&&(this.placeholder.style[a]=f[a]);this.playToggle=this.el.querySelector(".play-toggle"),this.sequence=this.content.querySelector(".sequence"),this.overlay=this.content.querySelector(".overlay")},initializeSequence:function(){this._isSequenceRunning=!1,this._sequenceInterval=parseInt(this.model.attrs()["@sequence-interval"])||2500;var a={silent:!0},b=this.model.get("srcset"),c=d.pick(this.model.attributes,["src"]);this.sources=new o,d.some(b,d.matcher(c))||this.sources.add(c,a),this.sources.add(b,a),this.sources.selectAt(0),this.children=new f,this.children.add(new p({el:this.getDefaultImage(),model:this.sources.selected}));var e=document.createDocumentFragment();this.sources.each(function(a,b,c){if(!this.children.findByModel(a)){var d=new p({model:a});this.children.add(d),e.appendChild(d.render().el)}},this),this.sequence.appendChild(e),this.progressMeter=this.createProgressMeter(),this.timer=new n,this.listenTo(this,"view:remove",function(){this.timer.stop()}),this.listenTo(this.timer,{start:this._onTimerStart,pause:this._onTimerPause,end:this._onTimerEnd}),this.listenTo(this.sources,"select:one",function(){this.updateProgressLabel(this.sources.selectedIndex)})},initializeAsync:function(){return h.whenSelectionIsContiguous(this).then(h.whenSelectTransitionEnds).then(h.whenDefaultImageLoads).then(function(a){a.initializeSequence(),a.addSelectionListeners();try{return a.updateOverlay(a.getDefaultImage(),a.overlay),a}catch(b){return Promise.reject(b)}})},render:function(){this.measure();var a=this.getContentEl();a.style.left=this.metrics.content.x+"px",a.style.top=this.metrics.content.y+"px",this.sequence.style.width=a.style.width=this.metrics.media.width+"px",this.sequence.style.height=a.style.height=this.metrics.media.height+"px",this.overlay.style.width=this.metrics.media.width+"px",this.overlay.style.height=this.metrics.media.height+"px";var b=this.getSizingEl();return b.style.maxWidth=this.metrics.content.width+"px",b.style.maxHeight=this.metrics.content.height+"px",this},togglePlayback:function(a){d.isBoolean(a)&&a===this.isSequenceRunning()||(a=!this.isSequenceRunning(),a?this.startSequence():this.stopSequence())},isSequenceRunning:function(){return this._isSequenceRunning},startSequence:function(){this._isSequenceRunning||(this._isSequenceRunning=!0,this.setMediaState("media"),"paused"===this.timer.getStatus()?this.timer.start():this.timer.start(this._sequenceInterval))},stopSequence:function(){this._isSequenceRunning&&(this._isSequenceRunning=!1,"started"===this.timer.getStatus()&&this.timer.pause(),this.setMediaState("user-resume"))},_onTimerEnd:function(){var a=this,b=function(){};b("_onTimerEnd (calling next step)");var c=a.sources.followingOrFirst(),d=a.children.findByModel(c);m(d.el).then(function(){a._isSequenceRunning?(b("_whenImageLoads (calling next step)"),a.sources.select(c),a.updateOverlay(d.el,a.overlay),a.timer.start(a._sequenceInterval)):b("_whenImageLoads (sequence not running)")})},_onTimerStart:function(){var a=this.timer.getDuration()/this._sequenceInterval;this.updateProgress(this.sources.selectedIndex+(1-a),a,this.timer.getDuration())},_onTimerPause:function(){var a=this.timer.getDuration()/this._sequenceInterval;this.updateProgress(this.sources.selectedIndex+(1-a),0,0)},createProgressMeter:function(){var a=new k({value:0,total:this.sources.length});return this.content.appendChild(a.render().el),a},updateProgressLabel:function(a){this.progressMeter.labelEl.textContent=(0|a)+1},updateProgress:function(a,b,c){var d=a+b,e=this.progressMeter,f=this.progressMeter.amountShape;if(c>0){var g=function(a){f.removeEventListener(l,g,!1),e.valueTo(d,.9*c)};f.addEventListener(l,g,!1),e.valueTo(a+1e-5,1)}else e.valueTo(d)}})},{"../../../utils/Timer":94,"../../../utils/css/prefixedProperty":99,"../../../utils/event/transitionEnd":104,"../../control/Globals":33,"../../model/SelectableCollection":35,"../base/View":50,"../component/CircleProgressMeter":54,"../promise/_whenImageLoads":64,"./PlayableRenderer":78,"./SequenceRenderer.hbs":79,backbone:"backbone","backbone.babysitter":"backbone.babysitter",underscore:"underscore"}],81:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({1:function(a,b,c,d,e){var f;return null!=(f=(c.contains||b&&b.contains||c.helperMissing).call(null!=b?b:{},null!=b?b.mime:b,"video",{name:"contains",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:""},2:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i=a.escapeExpression,j="function";return'		<source src="'+i((c.global||b&&b.global||h).call(g,"MEDIA_DIR",{name:"global",hash:{},data:e}))+"/"+i((f=null!=(f=c.src||(null!=b?b.src:b))?f:h,typeof f===j?f.call(g,{name:"src",hash:{},data:e}):f))+'" type="'+i((f=null!=(f=c.mime||(null!=b?b.mime:b))?f:h,typeof f===j?f.call(g,{name:"mime",hash:{},data:e}):f))+'"/>\n'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return null!=(f=c.each.call(null!=b?b:{},null!=b?b.srcset:b,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:""},useData:!0})},{"hbsfy/runtime":25}],82:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({1:function(a,b,c,d,e){var f;return null!=(f=(c.contains||b&&b.contains||c.helperMissing).call(null!=b?b:{},null!=b?b.mime:b,"video",{name:"contains",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:""},2:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i=a.escapeExpression,j="function";return'			<source src="'+i((c.global||b&&b.global||h).call(g,"MEDIA_DIR",{name:"global",hash:{},data:e}))+"/"+i((f=null!=(f=c.src||(null!=b?b.src:b))?f:h,typeof f===j?f.call(g,{name:"src",hash:{},data:e}):f))+'" type="'+i((f=null!=(f=c.mime||(null!=b?b.mime:b))?f:h,typeof f===j?f.call(g,{name:"mime",hash:{},data:e}):f))+'"/>\n'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j=a.escapeExpression,k="function";return'<div class="placeholder sizing"></div>\n<div class="debug-log color-fg05"><pre></pre></div>\n<div class="content not-played">\n	<div class="controls">\n		<div class="timecode-meter">\n			<span class="current-time">0</span>\n			<span class="duration">0</span>\n		</div>\n		<a class="fullscreen-toggle" href="javascript:(void 0);">\n			<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet" viewBox="-21 -21 42 42" width="14px" height="14px">\n				<path d="M-5,5 L-20,20 M-7,20 L-20,20 L-20,7 M5,-5 L20,-20 M7,-20 L20,-20 L20,-7" class="color-stroke" style="stroke-width:1.4;fill:none;" vector-effect="non-scaling-stroke"/>\n			</svg>\n		</a>\n	</div>\n	<div class="crop-box media-size">\n		<!-- poster="'+j((c.global||b&&b.global||i).call(h,"MEDIA_DIR",{name:"global",hash:{},data:e}))+"/"+j((g=null!=(g=c.src||(null!=b?b.src:b))?g:i,typeof g===k?g.call(h,{name:"src",hash:{},data:e}):g))+'" -->\n		<!-- <video preload="none"></video> -->\n		<!-- <video preload="none" poster="'+j((c.global||b&&b.global||i).call(h,"MEDIA_DIR",{name:"global",hash:{},data:e}))+"/"+j((g=null!=(g=c.src||(null!=b?b.src:b))?g:i,typeof g===k?g.call(h,{name:"src",hash:{},data:e}):g))+'"></video> -->\n		<video preload="none">\n'+(null!=(f=c.each.call(h,null!=b?b.srcset:b,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'		</video>\n		<img class="poster default" alt="'+j((g=null!=(g=c.name||(null!=b?b.name:b))?g:i,typeof g===k?g.call(h,{name:"name",hash:{},data:e}):g))+'"/>\n	</div>\n	<div class="overlay media-size">\n		<div class="play-toggle-hitarea play-toggle"><!-- &#xe80d; --></div>\n	</div>\n</div>\n'},useData:!0})},{"hbsfy/runtime":25}],83:[function(a,b,c){(function(c){function d(a,b){for(var c,d,f={},g=0;g<b.length;g++)d=b[g],c=a[d],e.isNumber(c)&&(f[c]=d+"("+c+")");return f}var e=a("underscore"),f=(a("backbone"),a("color"),a("underscore.string/lpad")),g=a("underscore.string/rpad"),h=(c.Modernizr||a("Modernizr")&&c.Modernizr,a("../../control/Globals"),a("./PlayableRenderer")),i=a("../../../utils/event/MediaEventsEnum.json");i.concat(["readystatechange","networkstatechange","webkitbeginfullscreen","webkitendfullscreen","fullscreenchange","fullscreenerror"]);var j,k,l,m=["loadstart","abort","error","stalled","canplay","canplaythrough","playing","waiting","timeupdate","play","pause"],n=e.difference(i,m),o=d(HTMLMediaElement,["NETWORK_EMPTY","NETWORK_IDLE","NETWORK_LOADING","NETWORK_NO_SOURCE"]),p=d(HTMLMediaElement,["HAVE_NOTHING","HAVE_METADATA","HAVE_CURRENT_DATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA"]),q=d(MediaError,e.keys(MediaError));"undefined"!=typeof document.hidden?(j="hidden",l="visibilitychange",k="visibilityState"):"undefined"!=typeof document.mozHidden?(j="mozHidden",l="mozvisibilitychange",k="mozVisibilityState"):"undefined"!=typeof document.msHidden?(j="msHidden",l="msvisibilitychange",k="msVisibilityState"):"undefined"!=typeof document.webkitHidden&&(j="webkitHidden",l="webkitvisibilitychange",k="webkitVisibilityState");var r=a("./VideoRenderer.hbs");a("./VideoRenderer.Sources.hbs");b.exports=h.extend({cidPrefix:"video-renderer-",className:h.prototype.className+" video-renderer",template:r,events:{"fullscreenchange video":"_onFullscreenChange","mozfullscreenchange video":"_onFullscreenChange","webkitfullscreenchange video":"_onFullscreenChange","mouseup .fullscreen-toggle":"_onFullscreenToggleClick"},initialize:function(a){h.prototype.initialize.apply(this,arguments),e.bindAll(this,"_onMediaEvent","_onPollInterval","_onVisibilityChange","_onFullscreenChange","_onFullscreenToggleClick"),this._logInit()},createChildren:function(){this.el.innerHTML=this.template(this.model.toJSON()),this.placeholder=this.el.querySelector(".placeholder"),this.content=this.getContentEl(),this.video=this.content.querySelector("video"),this.overlay=this.content.querySelector(".overlay"),this.playToggle=this.el.querySelector(".play-toggle"),this.fullscreenToggle=this.el.querySelector(".fullscreen-toggle"),this.currentTimeLabel=this.el.querySelector(".current-time"),this.durationLabel=this.el.querySelector(".duration"),this.video.loop=this.model.attrs().hasOwnProperty("@video-loop")},measure:function(){h.prototype.measure.apply(this,arguments)},render:function(){var a,b,c,d,e;this.measure(),this.video.setAttribute("width",this.metrics.media.width),this.video.setAttribute("height",this.metrics.media.height);var f=this.getDefaultImage();f.setAttribute("width",this.metrics.media.width),f.setAttribute("height",this.metrics.media.height),this.metrics.media.height-=2;var g=this.getContentEl();for(g.style.left=this.metrics.content.x+"px",g.style.top=this.metrics.content.y+"px",g.style.width=this.metrics.media.width+"px",g.style.height=this.metrics.media.height+"px",d=this.metrics.media.width+"px",e=this.metrics.media.height+"px",a=this.el.querySelectorAll(".media-size"),c=0;c<a.length;c++)b=a.item(c),b.style.width=d,b.style.height=e;for(d=this.metrics.content.width+"px",e=this.metrics.content.height+"px",a=this.el.querySelectorAll(".content-size"),c=0;c<a.length;c++)b=a.item(c),b.style.width=d,b.style.height=e;var h=this.getSizingEl();return h.style.maxWidth=this.metrics.content.width+"px",h.style.maxHeight=this.metrics.content.height+"px",this._logRender(),this},initializeAsync:function(){return h.whenSelectionIsContiguous(this).then(h.whenSelectTransitionEnds).then(h.whenDefaultImageLoads).then(function(a){return a.addMediaListeners(),a.addSelectionListeners(),a.video.preload="auto",a}).then(function(a){try{return a.updateOverlay(a.getDefaultImage(),a.overlay),a}catch(b){return Promise.reject(b)}})},setEnabled:function(a){!a&&!this.video.paused&&this.video.pause()},togglePlayback:function(a){e.isBoolean(a)&&a!==this.video.paused||(a=this.video.paused,a?(this.video.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&0==this.video.seekable.length?(this._logMessage("call:load","got video data, but cannot seek, calling load()","orange"),this.video.load()):this.video.ended&&(this.video.currentTime=this.video.seekable.start(0)),this.video.play()):this.video.pause())},addMediaListeners:function(){document.addEventListener(l,this._onVisibilityChange,!1);for(var a=0;a<i.length;a++)this.video.addEventListener(i[a],this._onMediaEvent,!0)},removeMediaListeners:function(){document.removeEventListener(l,this._onVisibilityChange,!1);for(var a=0;a<i.length;a++)this.video.removeEventListener(i[a],this._onMediaEvent,!0)},updateOverlayFromVideo:function(a){this.video.readyState>2&&this.updateOverlay(this.video,a)},_onVisibilityChange:function(a){this._logEvent([j,document[j],k,document[k]].join("	"),l+":"+document[k]),this.togglePlayback(!1)},_onFullscreenChange:function(a){var b=document.fullscreenElement===this.video;this._logEvent(b,a.type),this.video.controls=b},_onFullscreenToggleClick:function(a){if(!a.defaultPrevented&&this.model.selected){this._logEvent("fullscreen-toggle",a.type);try{document.hasOwnProperty("fullscreenElement")&&document.fullscreenElement!==this.video?this.video.requestFullscreen():this.video.webkitSupportsFullscreen&&!this.video.webkitDisplayingFullscreen&&this.video.webkitEnterFullScreen()}catch(b){this.video.controls=!1}}},_onMediaEvent:function(a){var b=-1!==m.indexOf(a.type);if(this.video.error||this.video.networkState===HTMLMediaElement.NETWORK_NO_SOURCE){var c=["networkState:",o[this.video.networkState],"error:",this.video.error?q[this.video.error.code]:"null"].join(" ");return this.removeMediaListeners(),this.removeSelectionListeners(),this.setState("error"),this._logMediaEvent(a.type,!b),void this._logMessage(c,a.type,"brown")}switch(b&&(this.video.paused?this.video.ended?this.setMediaState("user-replay"):this.setMediaState("user-resume"):"playing"===a.type||"timeupdate"===a.type?this.setMediaState("media"):this.setMediaState("network")),a.type){case"playing":this.content.classList.contains("not-played")&&this.content.classList.remove("not-played");break;case"ended":this.video.webkitDisplayingFullscreen&&this.video.webkitExitFullscreen(),document.fullscreenElement===this.video&&this.video.exitFullscreen();break;case"webkitbeginfullscreen":this.video.controls=!0;break;case"webkitendfullscreen":this.video.controls=!1;break;case"fullscreenchange":this.video.controls=document.fullscreenElement===this.video;break;case"fullscreenerror":this.video.controls=!1;break;case"durationchange":this.durationLabel.textContent=this.video.duration.toFixed(0);break;case"timeupdate":this.currentTimeLabel.textContent=this.video.currentTime.toFixed(0)}this._logMediaEvent(a.type,!b)},_onPollInterval:function(){this._logMediaEvent(),!this.model.selected},_logInit:function(){if(void 0===this.debugLog)if(this.debugLog=this.el.querySelector(".debug-log"),this.debugLog)this.lastEntry=this.debugLog.lastElementChild;else for(var a in this)this.hasOwnProperty(a)&&/^_log/.test(a)&&(this[a]=function(){})},_logRender:function(){this.debugLog.style.width=this.metrics.media.width+"px",this.debugLog.style.height="calc(100% - "+this.metrics.media.height+"px - 6rem)"},_logMessage:function(a,b,c){this.lastEntry=document.createElement("pre"),this.lastEntry.textContent=a,this.lastEntry.setAttribute("data-logtype",b||"-"),void 0!==c&&(this.lastEntry.style.color=c),this.debugLog.appendChild(this.lastEntry),this.debugLog.scrollTop=this.debugLog.scrollHeight},_logEvent:function(a,b,c){"string"!=typeof b||this.lastEntry.getAttribute("data-logtype")===b?this.lastEntry.textContent=a:(this.lastEntry=document.createElement("pre"),this.lastEntry.textContent=a,this.lastEntry.setAttribute("data-logtype",b),this.lastEntry.style.opacity=-1==n.indexOf(b)?1:.3,this.debugLog.appendChild(this.lastEntry),this.debugLog.scrollTop=this.debugLog.scrollHeight)},_logMediaEvent:function(a,b){for(var c,d=new Date(Date.now()),e=this.video.currentTime,h=this.video.duration,i=this.video.buffered,j=this.video.seekable,k=-1,l=0,m=i.length;m>l;l++)if(i.start(l)<=e&&e<=i.end(l)){k=l;break}c=[this.video.ended?">:":this.video.paused?"::":">>",d.toISOString().substr(11,12),f(e.toFixed(3),7),f(h.toFixed(3),7),f(k>=0?i.end(k).toFixed(3):"-",7),"b:"+i.length+"["+(k>=0?k:"-")+"]","s:"+j.length,g(o[this.video.networkState].substr(8),12),g(p[this.video.readyState].substr(5),15),g(this._lastMediaState,9)].join(" "),
this._logEvent(c,a,b)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../utils/event/MediaEventsEnum.json":102,"../../control/Globals":33,"./PlayableRenderer":78,"./VideoRenderer.Sources.hbs":81,"./VideoRenderer.hbs":82,Modernizr:"Modernizr",backbone:"backbone",color:"color",underscore:"underscore","underscore.string/lpad":28,"underscore.string/rpad":30}],84:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j="function";return'<div id="desc_b'+a.escapeExpression((g=null!=(g=c.id||(null!=b?b.id:b))?g:i,typeof g===j?g.call(h,{name:"id",hash:{},data:e}):g))+'" class="content sizing">'+(null!=(g=null!=(g=c.desc||(null!=b?b.desc:b))?g:i,f=typeof g===j?g.call(h,{name:"desc",hash:{},data:e}):g)?f:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":25}],85:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j="function";return'<div id="desc_m'+a.escapeExpression((g=null!=(g=c.id||(null!=b?b.id:b))?g:i,typeof g===j?g.call(h,{name:"id",hash:{},data:e}):g))+'" class="content sizing">'+(null!=(g=null!=(g=c.desc||(null!=b?b.desc:b))?g:i,f=typeof g===j?g.call(h,{name:"desc",hash:{},data:e}):g)?f:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":25}],86:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return'<dl class="debug-links">\n	<dt>\n		<svg class="icon" viewBox="-100 -100 200 200" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet">\n			<path id="cog" d="M11.754,-99.307c-7.809,-0.924 -15.699,-0.924 -23.508,0l-3.73,20.82c-6.254,1.234 -12.338,3.21 -18.123,5.888l-15.255,-14.651c-6.861,3.842 -13.244,8.48 -19.018,13.818l9.22,19.036c-4.335,4.674 -8.095,9.849 -11.201,15.416l-20.953,-2.886c-3.292,7.141 -5.731,14.645 -7.265,22.357l18.648,9.981c-0.759,6.329 -0.759,12.727 0,19.056l-18.648,9.981c1.534,7.712 3.973,15.216 7.265,22.357l20.953,-2.886c3.106,5.567 6.866,10.742 11.201,15.416l-9.22,19.036c5.774,5.338 12.157,9.976 19.018,13.818l15.255,-14.651c5.785,2.678 11.869,4.654 18.123,5.888l3.73,20.82c7.809,0.924 15.699,0.924 23.508,0l3.73,-20.82c6.254,-1.234 12.338,-3.21 18.123,-5.888l15.255,14.651c6.861,-3.842 13.244,-8.48 19.018,-13.818l-9.22,-19.036c4.335,-4.674 8.095,-9.849 11.201,-15.416l20.953,2.886c3.292,-7.141 5.731,-14.645 7.265,-22.357l-18.648,-9.981c0.759,-6.329 0.759,-12.727 0,-19.056l18.648,-9.981c-1.534,-7.712 -3.973,-15.216 -7.265,-22.357l-20.953,2.886c-3.106,-5.567 -6.866,-10.742 -11.201,-15.416l9.22,-19.036c-5.774,-5.338 -12.157,-9.976 -19.018,-13.818l-15.255,14.651c-5.785,-2.678 -11.869,-4.654 -18.123,-5.888l-3.73,-20.82ZM0,-33c18.213,0 33,14.787 33,33c0,18.213 -14.787,33 -33,33c-18.213,0 -33,-14.787 -33,-33c0,-18.213 14.787,-33 33,-33Z" style="fill:currentColor;fill-rule:evenodd;"/>\n		</svg>\n	</dt>\n	<!-- <dt><span class="icon">&#xe811;</span></dt> -->\n	<dd><a id="edit-backend" href="'+a.escapeExpression((f=null!=(f=c.approot||(null!=b?b.approot:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"approot",hash:{},data:e}):f))+'/symphony/" target="_blank">Edit</a></dd>\n	<dd><a id="source" href="?debug=xml" target="_blank">Source</a></dd>\n	<dd><a id="show-grid" href="javascript:(void 0)">Grid</a></dd>\n	<dd><a id="show-blocks" href="javascript:(void 0)">Blocks</a></dd>\n	<!-- <dd><a id="toggle-full-screen" href="javascript:(void 0)">Full Screen</a></dd> -->\n	<dd><span id="media-info"></span></dd>\n</dl>\n<!-- <dl class="debug-info">\n	<dt><span class="icon">&#xe812;</span></dt>\n</dl> -->\n'},useData:!0})},{"hbsfy/runtime":25}],87:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<g style="stroke:none">\n	<path d="M-60 -70 L90 0 L-60 70 Z"/>\n</g>\n'},useData:!0})},{"hbsfy/runtime":25}],88:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<g style="stroke:none">\n	<path d="M-40 -50 L65 0 L-40 50 Z"/>\n	<path d="M -132 -1.6e-14 A 132 132 0 1 0 -93.33809511662416 -93.33809511662439 L -76.36753236814704 -76.36753236814722 A 108 108 0 1 1 -108 -1.3e-14 H-85 L -120 -40 L -155 13e-14 Z"/>\n</g>\n'},useData:!0})},{"hbsfy/runtime":25}],89:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<g style="stroke:none">\n	<rect id="wait-line" x="50" y="-7" width="40" height="14" rx="7"/>\n	<use xlink:href="#wait-line" transform="rotate( 30 0 0)"/>\n	<use xlink:href="#wait-line" transform="rotate( 60 0 0)"/>\n	<use xlink:href="#wait-line" transform="rotate( 90 0 0)"/>\n	<use xlink:href="#wait-line" transform="rotate(120 0 0)"/>\n	<use xlink:href="#wait-line" transform="rotate(150 0 0)"/>\n	<use xlink:href="#wait-line" transform="rotate(180 0 0)"/>\n	<use xlink:href="#wait-line" transform="rotate(210 0 0)"/>\n	<use xlink:href="#wait-line" transform="rotate(240 0 0)"/>\n	<use xlink:href="#wait-line" transform="rotate(270 0 0)"/>\n	<use xlink:href="#wait-line" transform="rotate(300 0 0)"/>\n	<use xlink:href="#wait-line" transform="rotate(330 0 0)"/>\n	<animateTransform attributeName="transform" type="rotate" from="0 0 0" to="360 0 0" begin="0s" dur="3s" repeatCount="indefinite" />\n</symbol>\n'},useData:!0})},{"hbsfy/runtime":25}],90:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return'<svg class="symbol" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="75px" height="75px" viewBox="-200 -200 400 400" preserveAspectRatio="xMidYMid meet">\n'+(null!=(f=a.invokePartial(c.lookup.call(null!=b?b:{},b,"partialName",{name:"lookup",hash:{},data:e}),b,{data:e,indent:"	",helpers:c,partials:d,decorators:a.decorators}))?f:"")+"</svg>\n"},usePartial:!0,useData:!0})},{"hbsfy/runtime":25}],91:[function(a,b,c){var d=a("hbsfy/runtime"),e=a("color"),f=a("../../control/Globals"),g={add:function(a,b){return a+b},subtract:function(a,b){return a-b},divide:function(a,b){return a/b},multiply:function(a,b){return a*b},floor:function(a){return Math.floor(a)},ceil:function(a){return Math.ceil(a)},round:function(a){return Math.round(a)},global:function(a){return f[a]},is:function(a,b,c){return a===b?c.fn(this):c.inverse(this)},isnot:function(a,b,c){return a!==b?c.fn(this):c.inverse(this)},isany:function(a){var b=0,c=arguments.length-2,d=arguments[c+1];do if(a===arguments[++b])return d.fn(this);while(c>b);return d.inverse(this)},contains:function(a,b,c){return-1!==a.indexOf(b)?c.fn(this):c.inverse(this)},mix:function(a,b,c){return new e(a).mix(new e(b),c).rgbString()},lighten:function(a,b){return new e(a).lighten(b).rgbString()},darken:function(a,b){return new e(a).darken(b).rgbString()}};for(var h in g)g.hasOwnProperty(h)&&d.registerHelper(h,g[h])},{"../../control/Globals":33,color:"color","hbsfy/runtime":25}],92:[function(a,b,c){var d=a("hbsfy/runtime");d.registerPartial("svgWrapper",a("./SVGSymbolWrapper.hbs")),d.registerPartial("svgSymbolPlay",a("./SVGSymbolPlay.hbs")),d.registerPartial("svgSymbolReplay",a("./SVGSymbolReplay.hbs")),d.registerPartial("svgSymbolWait",a("./SVGSymbolWait.hbs"))},{"./SVGSymbolPlay.hbs":87,"./SVGSymbolReplay.hbs":88,"./SVGSymbolWait.hbs":89,"./SVGSymbolWrapper.hbs":90,"hbsfy/runtime":25}],93:[function(a,b,c){var d=a("underscore"),e=a("./strings/dashedToCamel"),f={},g={},h={},i=function(a){var b=document.createElement("style");return a&&(b.id=a),b.type="text/css",document.head.appendChild(b),b.sheet},j=null,k=function(){return null===j&&(j=i()),j},l=function(a){d.isEmpty(a)||(void 0!==g[a]&&(a=g[a]),f[a]=n(a))},m=function(a){return d.isEmpty(a)?void 0:(void 0!==g[a]&&(a=g[a]),f[a]||(f[a]=n(a)))},n=function(a){for(var b=null,c=document.styleSheets.length;c>0&&null===b;--c)b=d.findWhere(document.styleSheets[c].cssRules,{selectorText:a});return b},o=function(a,b){try{return m(a).style[e(b)]}catch(c){return""}},p=function(a,b,c){var f=e(b),g=a+"$$"+b,i=m(a);void 0!==h[g]||(h[g]=i.style[f]),i.style[f]=d.isEmpty(c)?h[g]:c},q=function(a,b){var c="";for(var d in b)c+=d+":"+b[d]+";";var e=k();e.insertRule(a+"{"+c+"}",e.cssRules.length)};b.exports={getCSSRule:m,createCSSRule:q,getCSSProperty:o,setCSSProperty:p,refreshCSSRule:l}},{"./strings/dashedToCamel":108,underscore:"underscore"}],94:[function(a,b,c){function d(){e.call(this),this._status="stopped",this.trigger("end")}function e(a){window.clearTimeout(this._timeout),a===!0&&(this._duration=0)}var f=a("underscore"),g=a("backbone").Events,h=0,i=function(a){this._id=h++,this._duration=0,this._status="initialized",this._start=0};f.extend(i.prototype,g,{start:function(a){return f.isNumber(a)||this._duration?this._timeout&&"started"===this._status?this:(this._duration=a||this._duration,this._timeout=window.setTimeout(d.bind(this),this._duration),this._start=Date.now(),this._status="started",this.trigger("start",this.getDuration()),this):this},pause:function(){return"started"!==this._status?this:(this._duration-=Date.now()-this._start,e.call(this,!1),this._status="paused",this.trigger("pause"),this)},stop:function(){return/started|paused/.test(this._status)?(e.call(this,!0),this._status="stopped",this.trigger("stop"),this):this},getDuration:function(){return"started"===this._status?this._duration-(Date.now()-this._start):"paused"===this._status?this._duration:0},getStatus:function(){return this._status}}),b.exports=i},{backbone:"backbone",underscore:"underscore"}],95:[function(a,b,c){function d(){this.id=f++,this._items={},this.immediate=!1,this._validateCallbackId=-1,this._validateCallback=this._validateCallback.bind(this)}var e=(a("underscore"),a("./TransformItem")),f=0,g=100,h=Array.prototype.slice;d.prototype={has:function(a){return a.cid&&void 0!==this._items[a.cid]},get:function(a){return this.has(a)?this._items[a.cid]:(a.cid||(a.cid="elt"+g++,a.setAttribute("data-cid",a.cid)),this._items[a.cid]=new e(a,this.immediate))},add:function(){var a,b,c;for(a=0;a<arguments.length;++a)if(c=arguments[a],c.length)for(b=0;b<c.length;++b)this.get(c[b]);else this.get(c)},remove:function(){var a,b,c;for(a=0;a<arguments.length;++a)if(c=arguments[a],c.length)for(b=0;b<c.length;++b)this._remove(c[b]);else this._remove(c)},_remove:function(a){if(this.has(a)){var b=this._items[a.cid];b.destroy(),delete this._items[a.cid]}},capture:function(){this._invoke("capture",arguments)},captureAll:function(){for(var a in this._items)this._items[a].capture()},clearCapture:function(){this._invoke("clearCapture",arguments)},clearAllCaptures:function(){for(var a in this._items)this._items[a].clearCapture()},offset:function(a,b){this._invoke("offset",arguments,2)},offsetAll:function(a,b){for(var c in this._items)this._items[c].offset(a,b)},clearOffset:function(){this._invoke("clearOffset",arguments)},clearAllOffsets:function(){for(var a in this._items)this._items[a].clearOffset()},runTransition:function(a){this._invoke("runTransition",arguments,1)},runAllTransitions:function(a){for(var b in this._items)this._items[b].runTransition(a)},clearTransitions:function(){this._invoke("clearTransitions",arguments)},clearAllTransitions:function(){for(var a in this._items)this._items[a].clearCapture()},stopTransitions:function(){this._invoke("stopTransitions",arguments)},stopAllTransitions:function(){for(var a in this._items)this._items[a].stopTransitions()},_invoke:function(a,b,c){var d,e,f,g,i,j,k=null;for(void 0!==c?k=h.call(b,0,c):c=0,d=c,e=b.length;e>d;++d)if(i=b[d],i.length)for(f=0,g=i.length;g>f;++f)j=this.get(i[f]),j[a].apply(j,k);else j=this.get(i),j[a].apply(j,k)},validate:function(){-1!==this._validateCallbackId&&(window.cancelTimeout(this._validateCallbackId),this._validateCallbackId=-1),this._validate()},invalidate:function(){-1===this._validateCallbackId&&(this._validateCallbackId=window.setTimeout(this._validateCallback,100))},_validateCallback:function(){this._validateCallbackId=-1,this._validate()},_validate:function(){for(var a in this._items)this._items[a].validate()}},b.exports=d},{"./TransformItem":96,underscore:"underscore"}],96:[function(a,b,c){function d(a,b){e.bindAll(this,"_handleTransitionEnd"),this.el=a,this.immediate=b,this.id=a.cid,this.el.addEventListener(f,this._handleTransitionEnd,!1),this._captureInvalid=!1,this._capturedX=null,this._capturedY=null,this._currCapture={},this._lastCapture={},this._capturedValuesChanged=!1,this._offsetInvalid=!1,this._hasOffset=!1,this._offsetX=null,this._offsetY=null,this._transitionInvalid=!1,this._hasTransition=!1,this._transitionRunning=!1,this._transition={},this._renderedX=null,this._renderedY=null,this.enableTransitions=this.clearTransitions,this.disableTransitions=this.stopTransitions}var e=a("underscore"),f=a("./event/transitionEnd"),g=a("./css/prefixedProperty"),h=a("./css/prefixedStyleName"),i=a("./debug/traceElement"),j=function(){var a="log",b=Array.prototype.slice.apply(arguments);switch(b[0]){case"error":case"warn":case"info":a=b.shift();break;default:return}b[0]="	"+b[0]},k=function(a){return a.property+" "+a.duration/1e3+"s "+a.easing+" "+a.delay/1e3+"s"},l="none 0s step-start 0s",m={},n={};!function(){var a,b,c,d=["opacity","visibility"],e=["transform","transformStyle"],f=["transition","transitionDuration","transitionDelay","transitionProperty","transitionTimingFunction"],i=["transform","transform-style"],j=["transition","transition-duration","transition-delay","transition-property","transition-timing-function"];for(c=e.concat(f).concat(d),a=0;a<c.length;++a)b=c[a],m[b]=g(b);for(c=i.concat(j).concat(d),a=0;a<c.length;++a)b=c[a],n[b]=h(b)}(),d.prototype={destroy:function(){this.el.removeEventListener(f,this._handleTransitionEnd,!1)},capture:function(){return j(i(this.el),"TransformItem.capture"),this._validateCapture(),this},clearCapture:function(){return j(i(this.el),"TransformItem.clearCapture"),this._captureInvalid=!0,this},offset:function(a,b,c){return j(i(this.el),"TransformItem.offset"),this._hasOffset=!0,this._offsetInvalid=!0,this._offsetX=a||0,this._offsetY=b||0,this.immediate&&c!==!1&&this._validateOffset(),this},clearOffset:function(a){return this._hasOffset?(j(i(this.el),"TransformItem.clearOffset"),this._hasOffset=!1,this._offsetInvalid=!0,this._offsetX=null,this._offsetY=null,this.immediate&&a!==!1&&this._validateOffset()):j(i(this.el),"TransformItem.clearOffset","no offset to clear"),this},runTransition:function(a,b){return this._transition.property=n.transform,this._transition=e.extend(this._transition,a),this._transitionInvalid&&j("warn",i(this.el),"TransformItem.runTransition changed twice",this._transitionValue,k(this._transition)),this._transitionValue=k(this._transition),this._hasTransition=!0,this._transitionInvalid=!0,this.immediate&&b!==!1&&this._validateTransition(),this},clearTransitions:function(a){return this._transition.property="none",this._transitionValue=l,this._hasTransition=!1,this._transitionInvalid=!0,this.immediate&&a!==!1&&this._validateTransition(),this},stopTransitions:function(a){return this._transition.property="none",this._transitionValue=l,this._hasTransition=!1,this._transitionInvalid=!0,this.immediate&&a!==!1&&this._validateTransition(),this},validate:function(){return this.el.removeEventListener(f,this._handleTransitionEnd,!1),this._validateTransition(),this._validateOffset(),this.el.addEventListener(f,this._handleTransitionEnd,!1),this._capturedValuesChanged=!1,this},_validateCapture:function(){if(this._captureInvalid){var a=null;if(this._hasOffset&&!this._offsetInvalid&&(a=this._getCSSProp("transform"),""===a&&j("error",i(this.el),"TransformItem._capture",'has valid offset but transformValue="" ?',this._offsetX,this._offsetY),this._removeCSSProp("transform")),this._lastCapture=this._currCapture,this._currCapture=this._getComputedCSSProps(),this._currCapture.transform!==this._lastCapture.transform){var b,c;c=this._currCapture.transform.match(/(matrix|matrix3d)\(([^\)]+)\)/),c?(b=c[2].split(","),"matrix"===c[1]?(this._capturedX=parseFloat(b[4]),this._capturedY=parseFloat(b[5])):(this._capturedX=parseFloat(b[12]),this._capturedY=parseFloat(b[13]))):(this._capturedX=0,this._capturedY=0),this._capturedValuesChanged=!0}null!==a&&(j(i(this.el),"TransformItem._capture","reapplying after capture",a),this._setCSSProp("transform",a)),this._captureInvalid=!1}},_validateTransition:function(){this._transitionInvalid&&(this._validateCapture(),this._transitionRunning=this._hasTransition,this._setCSSProp("transition",this._transitionValue),this._transitionInvalid=!1)},_handleTransitionEnd:function(a){this._transitionRunning&&this.el===a.target&&this._transition.property===a.propertyName&&(this._transitionRunning=!1,this._setCSSProp("transition",l))},_validateOffset:function(){if(this._offsetInvalid){if(this._validateCapture(),this._hasOffset){var a=this._offsetX+this._capturedX,b=this._offsetY+this._capturedY;(a!==this._renderedX||b!==this._renderedY)&&(this._renderedX=a,this._renderedY=b,this._setCSSProp("transform","translate("+this._renderedX+"px, "+this._renderedY+"px)"))}else this._renderedX=null,this._renderedY=null,this._removeCSSProp("transform");this._offsetInvalid=!1}},_getCSSProp:function(a){return this.el.style[m[a]]},_setCSSProp:function(a,b){"transition"===a&&b===l?this._removeCSSProp(a):this.el.style[m[a]]=b},_removeCSSProp:function(a){this.el.style[m[a]]=""},_getComputedCSSProps:function(){var a={},b=window.getComputedStyle(this.el);for(var c in m)a[c]=b[m[c]];return a}},b.exports=d},{"./css/prefixedProperty":99,"./css/prefixedStyleName":100,"./debug/traceElement":101,"./event/transitionEnd":104,underscore:"underscore"}],97:[function(a,b,c){b.exports=function(a,b){var c,d=a.data,e=d.length,f=[0,0,0];for(c=0;e>c;c+=4)f[0]+=d[c],f[1]+=d[c+1],f[2]+=d[c+2];for(c=0;3>c;c++)f[c]=f[c]/(e/4)|0;return f}},{}],98:[function(a,b,c){var d=["boxSizing","position","objectFit"],e=["marginTop","marginBottom","marginLeft","marginRight","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","paddingTop","paddingBottom","paddingLeft","paddingRight"],f=/^(-?[\d\.]+)(px|em|rem)$/;b.exports=function(a,b){var c,g,h,i,j,k,l=getComputedStyle(a);for(b||(b={}),j=b.fontSize=parseFloat(l.fontSize),h=0,i=d.length;i>h;h++)g=d[h],g in l&&(b[g]=l[g]);for(h=0,i=e.length;i>h;h++)g=e[h],l[g]&&(c=f.exec(l[g]))&&("px"===c[2]?b[g]=parseFloat(c[1]):"em"===c[2]?b[g]=parseFloat(c[1])*j:"rem"===c[2]&&(k||(k=parseFloat(getComputedStyle(document.documentElement).fontSize)),b[g]=parseFloat(c[1])*k));return b}},{}],99:[function(a,b,c){var d=["webkit","moz","MS","ms","o"],e=d.length,f=function(a,b){var c,f;if(b||(b=document.body.style),a in b)return a;f=a[0].toUpperCase()+a.slice(1);for(var g=0;e>g;g++)if(c=d[g]+f,c in b)return c;return null},g={};b.exports=function(a,b){return g.hasOwnProperty(a)||(g[a]=f(a,b)),g[a]}},{}],100:[function(a,b,c){var d=(a("../strings/camelToDashed"),["-webkit-","-moz-","-ms-","-o-"]),e=d.length,f=function(a,b){var c,f=a;if(b||(b=document.body.style),f in b)return f;for(var g=0;e>g;g++)if(c=d[g]+f,c in b)return c;return null},g={};b.exports=function(a,b){return g.hasOwnProperty(a)||(g[a]=f(a,b)),g[a]}},{"../strings/camelToDashed":107}],101:[function(a,b,c){b.exports=function(a){var b="";return void 0!==a.cid&&(b+="@"+a.cid+" "),b+=a.hasAttribute("id")?"#"+a.id+" ":"."+a.classList[0]+" ",""==b&&(b+="("+a.tagName+")?"),b}},{}],102:[function(a,b,c){b.exports=["loadstart","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","paused","resize","ratechange","volumechange"]},{}],103:[function(a,b,c){var d=(a("underscore"),a("./transitionEnd"));b.exports=function(a,b,c,e,f){var g,h,i,j=!0;return e||(e=window),f||(f=2e3),i=window.setTimeout(function(){h(!0)},f),g=function(c){c.target===a&&b==c.propertyName&&h(!0)},h=function(b){j&&(j=!1,a.removeEventListener(d,g,!1),window.clearTimeout(i),c.call(e,b,a))},a.addEventListener(d,g,!1),h}},{"./transitionEnd":104,underscore:"underscore"}],104:[function(a,b,c){b.exports=function(a){var b,c={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd"};for(b in c)if(b in a)return c[b]}(document.body.style)},{}],105:[function(a,b,c){var d=function(a,b,c){var e,f;return f=Object.getPrototypeOf(a),c||(c=Object.prototype),f!==c&&(e=d(f,b,c)),a.hasOwnProperty(b)&&_.isObject(a[b])&&(e=_.isObject(e)?_.extend(e,a[b]):a[b]),_.isObject(e)?e:void 0};b.exports=d},{}],106:[function(a,b,c){var d;if(/Trident|Edge/.test(navigator.userAgent))d=setTimeout;else if(window.setImmediate)d=window.setImmediate;else{var e=[],f=String(Math.random());window.addEventListener("message",function(a){if(a.data===f){var b=e;e=[],b.forEach(function(a){a()})}}),d=function(a){e.push(a),window.postMessage(f,"*")}}b.exports=d},{}],107:[function(a,b,c){b.exports=function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}},{}],108:[function(a,b,c){b.exports=function(a){return a.split("-").reduce(function(a,b,c,d){return a+(""!=a?b[0].toUpperCase()+b.slice(1):b)})}},{}],109:[function(a,b,c){b.exports=function(a){return a.replace(/<[^>]+>/g,"")}},{}],110:[function(a,b,c){function d(a){return a==f.DIRECTION_DOWN?"down":a==f.DIRECTION_UP?"up":a==f.DIRECTION_LEFT?"left":a==f.DIRECTION_RIGHT?"right":""}function e(){f.Pan.apply(this,arguments),this.thresholdOffsetX=null,this.thresholdOffsetY=null,this.thresholdOffset=null}var f=a("hammerjs");f.inherit(e,f.Pan,{emit:function(a){var b=this.options.threshold,c=a.direction;this.state==f.STATE_BEGAN&&(this.thresholdOffsetX=c&f.DIRECTION_HORIZONTAL?c&f.DIRECTION_LEFT?b:-b:0,this.thresholdOffsetY=c&f.DIRECTION_VERTICAL?c&f.DIRECTION_UP?b:-b:0),a.thresholdOffsetX=this.thresholdOffsetX,a.thresholdOffsetY=this.thresholdOffsetY,a.thresholdDeltaX=a.deltaX+this.thresholdOffsetX,a.thresholdDeltaY=a.deltaY+this.thresholdOffsetY,this.pX=a.deltaX,this.pY=a.deltaY,c=d(c),c&&this.manager.emit(this.options.event+c,a),f.Recognizer.prototype.emit.apply(this,arguments)}}),b.exports=e},{hammerjs:"hammerjs"}],111:[function(a,b,c){b.exports={units:{hu_px:"20",vu_px:"12"},transitions:{delay_interval_ms:"75",duration_ms:"400",ease:"ease"},breakpoints:{_unquoted:"only screen and (min-device-width : 320px) and (max-device-width : 480px)",smartphone:"'only screen and (min-device-width : 320px) and (max-device-width : 480px)'","smartphone-landscape":"'only screen and (min-width : 321px)'","smartphone-portrait":"'only screen and (max-width : 320px)'","ipad-landscape":"'only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : landscape)'","ipad-portrait":"'only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : portrait)'",ipad:"'only screen and (min-device-width : 768px) and (max-device-width : 1024px)'","desktop-small":"'only screen and (min-width : 1024px)'","desktop-medium":"'only screen and (min-width : 1224px)'","desktop-large":"'only screen and (min-width : 1824px)'",iphone4:"'only screen and (min-device-pixel-ratio : 1.5)'"},default_colors:{color:"hsl(47, 5%, 15%)","background-color":"hsl(47, 5%, 95%)","link-color":"hsl(10, 80%, 50%)"}}},{}],"Backbone.Mutators":[function(a,b,c){!function(d,e,f){"use strict";"object"==typeof c?b.exports=e(a("underscore"),a("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],function(a,b){return a=a===f?d._:a,b=b===f?d.Backbone:b,d.returnExportsGlobal=e(a,b,d)}):d.returnExportsGlobal=e(d._,d.Backbone)}(this,function(a,b,c,d){"use strict";b=b===d?c.Backbone:b,a=a===d?c._:a;var e=function(){},f=b.Model.prototype.get,g=b.Model.prototype.set,h=b.Model.prototype.toJSON;return e.prototype.mutators={},e.prototype.get=function(b){var c=this.mutators!==d;return c===!0&&a.isFunction(this.mutators[b])===!0?this.mutators[b].call(this):c===!0&&a.isObject(this.mutators[b])===!0&&a.isFunction(this.mutators[b].get)===!0?this.mutators[b].get.call(this):f.call(this,b)},e.prototype.set=function(b,c,e){var f=this.mutators!==d,h=null,i=null;return h=g.call(this,b,c,e),a.isObject(b)||null===b?(i=b,e=c):(i={},i[b]=c),f===!0&&a.isObject(this.mutators[b])===!0&&(a.isFunction(this.mutators[b].set)===!0?h=this.mutators[b].set.call(this,b,i[b],e,a.bind(g,this)):a.isFunction(this.mutators[b])&&(h=this.mutators[b].call(this,b,i[b],e,a.bind(g,this)))),f===!0&&a.isObject(i)&&a.each(i,a.bind(function(b,c){if(a.isObject(this.mutators[c])===!0){var f=this.mutators[c];a.isFunction(f.set)&&(f=f.set),a.isFunction(f)&&((e===d||a.isObject(e)===!0&&e.silent!==!0&&e.mutators!==d&&e.mutators.silent!==!0)&&this.trigger("mutators:set:"+c),f.call(this,c,b,e,a.bind(g,this)))}},this)),h},e.prototype.toJSON=function(b){var c,d,e=h.call(this);return a.each(this.mutators,a.bind(function(f,g){a.isObject(this.mutators[g])===!0&&a.isFunction(this.mutators[g].get)?(c=this.isSaving?this.isSaving(b,f,g):a.has(b||{},"emulateHTTP"),d=this.mutators[g]["transient"],c&&d||(e[g]=a.bind(this.mutators[g].get,this)())):a.isFunction(this.mutators[g])&&(e[g]=a.bind(this.mutators[g],this)())},this)),e},e.prototype.escape=function(b){var c=this.get(b);return a.escape(null==c?"":""+c)},a.extend(b.Model.prototype,e.prototype),b.Mutators=e,e})},{backbone:"backbone",underscore:"underscore"}],Modernizr:[function(a,b,c){!function(a,b,c){function d(a,b){return typeof a===b}function e(){var a,b,c,e,f,g,h;for(var i in t){if(a=[],b=t[i],b.name&&(a.push(b.name.toLowerCase()),b.options&&b.options.aliases&&b.options.aliases.length))for(c=0;c<b.options.aliases.length;c++)a.push(b.options.aliases[c].toLowerCase());for(e=d(b.fn,"function")?b.fn():b.fn,f=0;f<a.length;f++)g=a[f],h=g.split("."),1===h.length?v[h[0]]=e:(!v[h[0]]||v[h[0]]instanceof Boolean||(v[h[0]]=new Boolean(v[h[0]])),v[h[0]][h[1]]=e),w.push((e?"":"no-")+h.join("-"))}}function f(a){var b=x.className,c=v._config.classPrefix||"";if(y&&(b=b.baseVal),v._config.enableJSClass){var d=new RegExp("(^|\\s)"+c+"no-js(\\s|$)");b=b.replace(d,"$1"+c+"js$2")}v._config.enableClasses&&(b+=" "+c+a.join(" "+c),y?x.className.baseVal=b:x.className=b)}function g(){return"function"!=typeof b.createElement?b.createElement(arguments[0]):y?b.createElementNS.call(b,"http://www.w3.org/2000/svg",arguments[0]):b.createElement.apply(b,arguments)}function h(){var a=b.body;return a||(a=g(y?"svg":"body"),a.fake=!0),a}function i(a,c,d,e){var f,i,j,k,l="modernizr",m=g("div"),n=h();if(parseInt(d,10))for(;d--;)j=g("div"),j.id=e?e[d]:l+(d+1),m.appendChild(j);return f=g("style"),f.type="text/css",f.id="s"+l,(n.fake?n:m).appendChild(f),n.appendChild(m),f.styleSheet?f.styleSheet.cssText=a:f.appendChild(b.createTextNode(a)),m.id=l,n.fake&&(n.style.background="",n.style.overflow="hidden",k=x.style.overflow,x.style.overflow="hidden",x.appendChild(n)),i=c(m,a),n.fake?(n.parentNode.removeChild(n),x.style.overflow=k,x.offsetHeight):m.parentNode.removeChild(m),!!i}function j(a,b){return!!~(""+a).indexOf(b)}function k(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-")}function l(b,d){var e=b.length;if("CSS"in a&&"supports"in a.CSS){for(;e--;)if(a.CSS.supports(k(b[e]),d))return!0;return!1}if("CSSSupportsRule"in a){for(var f=[];e--;)f.push("("+k(b[e])+":"+d+")");return f=f.join(" or "),i("@supports ("+f+") { #modernizr { position: absolute; } }",function(a){return"absolute"==getComputedStyle(a,null).position})}return c}function m(a){return a.replace(/([a-z])-([a-z])/g,function(a,b,c){return b+c.toUpperCase()}).replace(/^-/,"")}function n(a,b,e,f){function h(){k&&(delete E.style,delete E.modElem)}if(f=d(f,"undefined")?!1:f,!d(e,"undefined")){var i=l(a,e);if(!d(i,"undefined"))return i}for(var k,n,o,p,q,r=["modernizr","tspan"];!E.style;)k=!0,E.modElem=g(r.shift()),E.style=E.modElem.style;for(o=a.length,n=0;o>n;n++)if(p=a[n],q=E.style[p],j(p,"-")&&(p=m(p)),E.style[p]!==c){if(f||d(e,"undefined"))return h(),"pfx"==b?p:!0;try{E.style[p]=e}catch(s){}if(E.style[p]!=q)return h(),"pfx"==b?p:!0}return h(),!1}function o(a,b){return function(){return a.apply(b,arguments)}}function p(a,b,c){var e;for(var f in a)if(a[f]in b)return c===!1?a[f]:(e=b[a[f]],d(e,"function")?o(e,c||b):e);return!1}function q(a,b,c,e,f){var g=a.charAt(0).toUpperCase()+a.slice(1),h=(a+" "+C.join(g+" ")+g).split(" ");return d(b,"string")||d(b,"undefined")?n(h,b,e,f):(h=(a+" "+F.join(g+" ")+g).split(" "),p(h,b,c))}function r(a,b,d){return q(a,c,c,b,d)}function s(a,b){if("object"==typeof a)for(var c in a)L(a,c)&&s(c,a[c]);else{a=a.toLowerCase();var d=a.split("."),e=v[d[0]];if(2==d.length&&(e=e[d[1]]),"undefined"!=typeof e)return v;b="function"==typeof b?b():b,1==d.length?v[d[0]]=b:(!v[d[0]]||v[d[0]]instanceof Boolean||(v[d[0]]=new Boolean(v[d[0]])),v[d[0]][d[1]]=b),f([(b&&0!=b?"":"no-")+d.join("-")]),v._trigger(a,b)}return v}var t=[],u={_version:"3.0.0",_config:{classPrefix:"mod_",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(a,b){var c=this;setTimeout(function(){b(c[a])},0)},addTest:function(a,b,c){t.push({name:a,fn:b,options:c})},addAsyncTest:function(a){t.push({name:null,fn:a})}},v=function(){};v.prototype=u,v=new v;var w=[],x=b.documentElement,y="svg"===x.nodeName.toLowerCase(),z=function(a){function c(b,c){var e;return b?(c&&"string"!=typeof c||(c=g(c||"div")),b="on"+b,e=b in c,!e&&d&&(c.setAttribute||(c=g("div")),c.setAttribute(b,""),e="function"==typeof c[b],c[b]!==a&&(c[b]=a),c.removeAttribute(b)),e):!1}var d=!("onblur"in b.documentElement);return c}();u.hasEvent=z;var A=function(){var b=a.matchMedia||a.msMatchMedia;return b?function(a){var c=b(a);return c&&c.matches||!1}:function(b){var c=!1;return i("@media "+b+" { #modernizr { position: absolute; } }",function(b){c="absolute"==(a.getComputedStyle?a.getComputedStyle(b,null):b.currentStyle).position}),c}}();u.mq=A;var B="Moz O ms Webkit",C=u._config.usePrefixes?B.split(" "):[];u._cssomPrefixes=C;var D={elem:g("modernizr")};v._q.push(function(){delete D.elem});var E={style:D.elem.style};v._q.unshift(function(){delete E.style});var F=u._config.usePrefixes?B.toLowerCase().split(" "):[];u._domPrefixes=F,u.testAllProps=q;var G=function(b){var d,e=J.length,f=a.CSSRule;if("undefined"==typeof f)return c;if(!b)return!1;if(b=b.replace(/^@/,""),d=b.replace(/-/g,"_").toUpperCase()+"_RULE",d in f)return"@"+b;for(var g=0;e>g;g++){var h=J[g],i=h.toUpperCase()+"_"+d;if(i in f)return"@-"+h.toLowerCase()+"-"+b}return!1};u.atRule=G;var H=u.prefixed=function(a,b,c){return 0===a.indexOf("@")?G(a):(-1!=a.indexOf("-")&&(a=m(a)),b?q(a,b,c):q(a,"pfx"))};u.prefixedCSS=function(a){var b=H(a);return b&&k(b)};v.addTest("webanimations","animate"in g("div")),u.testAllProps=r,v.addTest("backgroundcliptext",function(){return r("backgroundClip","text")}),v.addTest("backgroundsize",r("backgroundSize","100%",!0)),v.addTest("bgpositionshorthand",function(){var a=g("a"),b=a.style,c="right 10px bottom 10px";return b.cssText="background-position: "+c+";",b.backgroundPosition===c}),v.addTest("bgpositionxy",function(){return r("backgroundPositionX","3px",!0)&&r("backgroundPositionY","5px",!0)}),v.addTest("bgsizecover",r("backgroundSize","cover"));var I=H("URL",a,!1);I=I&&a[I],v.addTest("bloburls",I&&"revokeObjectURL"in I&&"createObjectURL"in I),v.addTest("boxshadow",r("boxShadow","1px 1px",!0)),v.addTest("boxsizing",r("boxSizing","border-box",!0)&&(b.documentMode===c||b.documentMode>7)),v.addTest("canvas",function(){var a=g("canvas");return!(!a.getContext||!a.getContext("2d"))}),v.addTest("canvastext",function(){return v.canvas===!1?!1:"function"==typeof g("canvas").getContext("2d").fillText}),v.addTest("classlist","classList"in x),v.addTest("cookies",function(){try{b.cookie="cookietest=1";var a=-1!=b.cookie.indexOf("cookietest=");return b.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",
a}catch(c){return!1}}),v.addTest("cssanimations",r("animationName","a",!0));var J=u._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];u._prefixes=J,v.addTest("csscalc",function(){var a="width:",b="calc(10px);",c=g("a");return c.style.cssText=a+J.join(b+a),!!c.style.length}),v.addTest("csspositionsticky",function(){var a="position:",b="sticky",c=g("a"),d=c.style;return d.cssText=a+J.join(b+";"+a).slice(0,-a.length),-1!==d.position.indexOf(b)});u.testStyles=i;v.addTest("csspseudoanimations",function(){var b=!1;if(!v.cssanimations||!a.getComputedStyle)return b;var c=["@",v._prefixes.join("keyframes csspseudoanimations { from { font-size: 10px; } }@").replace(/\@$/,""),'#modernizr:before { content:" "; font-size:5px;',v._prefixes.join("animation:csspseudoanimations 1ms infinite;"),"}"].join("");return v.testStyles(c,function(c){b="10px"===a.getComputedStyle(c,":before").getPropertyValue("font-size")}),b}),v.addTest("csstransitions",r("transition","all",!0)),v.addTest("csspseudotransitions",function(){var b=!1;if(!v.csstransitions||!a.getComputedStyle)return b;var c='#modernizr:before { content:" "; font-size:5px;'+v._prefixes.join("transition:0s 100s;")+"}#modernizr.trigger:before { font-size:10px; }";return v.testStyles(c,function(c){a.getComputedStyle(c,":before").getPropertyValue("font-size"),c.className+="trigger",b="5px"===a.getComputedStyle(c,":before").getPropertyValue("font-size")}),b}),v.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&r("transform","scale(1)",!0)}),v.addTest("documentfragment",function(){return"createDocumentFragment"in b&&"appendChild"in x}),v.addTest("ellipsis",r("textOverflow","ellipsis")),v.addTest("fullscreen",!(!H("exitFullscreen",b,!1)&&!H("cancelFullScreen",b,!1))),v.addTest("hashchange",function(){return z("hashchange",a)===!1?!1:b.documentMode===c||b.documentMode>7}),v.addTest("inlinesvg",function(){var a=g("div");return a.innerHTML="<svg/>","http://www.w3.org/2000/svg"==("undefined"!=typeof SVGRect&&a.firstChild&&a.firstChild.namespaceURI)}),v.addTest("matchmedia",!!H("matchMedia",a)),v.addTest("objectfit",!!H("objectFit"),{aliases:["object-fit"]}),v.addTest("pagevisibility",!!H("hidden",b,!1)),v.addTest("promises",function(){return"Promise"in a&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;return new a.Promise(function(a){b=a}),"function"==typeof b}()}),v.addTest("queryselector","querySelector"in b&&"querySelectorAll"in b),v.addTest("requestanimationframe",!!H("requestAnimationFrame",a),{aliases:["raf"]});var K={}.toString;v.addTest("smil",function(){return!!b.createElementNS&&/SVGAnimate/.test(K.call(b.createElementNS("http://www.w3.org/2000/svg","animate")))}),v.addTest("svg",!!b.createElementNS&&!!b.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);var L;!function(){var a={}.hasOwnProperty;L=d(a,"undefined")||d(a.call,"undefined")?function(a,b){return b in a&&d(a.constructor.prototype[b],"undefined")}:function(b,c){return a.call(b,c)}}(),u._l={},u.on=function(a,b){this._l[a]||(this._l[a]=[]),this._l[a].push(b),v.hasOwnProperty(a)&&setTimeout(function(){v._trigger(a,v[a])},0)},u._trigger=function(a,b){if(this._l[a]){var c=this._l[a];setTimeout(function(){var a,d;for(a=0;a<c.length;a++)(d=c[a])(b)},0),delete this._l[a]}},v._q.push(function(){u.addTest=s}),v.addTest("svgasimg",b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")),v.addTest("userselect",r("userSelect","none",!0)),v.addTest("video",function(){var a=g("video"),b=!1;try{(b=!!a.canPlayType)&&(b=new Boolean(b),b.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),b.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),b.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),b.vp9=a.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),b.hls=a.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch(c){}return b}),v.addAsyncTest(function(){function a(c){clearTimeout(b),d.removeEventListener("playing",a,!1),s("videoautoplay",c&&"playing"===c.type||0!==d.currentTime),d.parentNode.removeChild(d)}var b,c=300,d=g("video"),e=d.style;if(!(v.video&&"autoplay"in d))return void s("videoautoplay",!1);e.position="absolute",e.height=0,e.width=0;try{if(v.video.ogg)d.src="data:video/ogg;base64,T2dnUwACAAAAAAAAAABmnCATAAAAAHDEixYBKoB0aGVvcmEDAgEAAQABAAAQAAAQAAAAAAAFAAAAAQAAAAAAAAAAAGIAYE9nZ1MAAAAAAAAAAAAAZpwgEwEAAAACrA7TDlj///////////////+QgXRoZW9yYSsAAABYaXBoLk9yZyBsaWJ0aGVvcmEgMS4xIDIwMDkwODIyIChUaHVzbmVsZGEpAQAAABoAAABFTkNPREVSPWZmbXBlZzJ0aGVvcmEtMC4yOYJ0aGVvcmG+zSj3uc1rGLWpSUoQc5zmMYxSlKQhCDGMYhCEIQhAAAAAAAAAAAAAEW2uU2eSyPxWEvx4OVts5ir1aKtUKBMpJFoQ/nk5m41mUwl4slUpk4kkghkIfDwdjgajQYC8VioUCQRiIQh8PBwMhgLBQIg4FRba5TZ5LI/FYS/Hg5W2zmKvVoq1QoEykkWhD+eTmbjWZTCXiyVSmTiSSCGQh8PB2OBqNBgLxWKhQJBGIhCHw8HAyGAsFAiDgUCw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDAwPEhQUFQ0NDhESFRUUDg4PEhQVFRUOEBETFBUVFRARFBUVFRUVEhMUFRUVFRUUFRUVFRUVFRUVFRUVFRUVEAwLEBQZGxwNDQ4SFRwcGw4NEBQZHBwcDhATFhsdHRwRExkcHB4eHRQYGxwdHh4dGxwdHR4eHh4dHR0dHh4eHRALChAYKDM9DAwOExo6PDcODRAYKDlFOA4RFh0zV1A+EhYlOkRtZ00YIzdAUWhxXDFATldneXhlSFxfYnBkZ2MTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTEhIVGRoaGhoSFBYaGhoaGhUWGRoaGhoaGRoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhESFh8kJCQkEhQYIiQkJCQWGCEkJCQkJB8iJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQREhgvY2NjYxIVGkJjY2NjGBo4Y2NjY2MvQmNjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRISEhUXGBkbEhIVFxgZGxwSFRcYGRscHRUXGBkbHB0dFxgZGxwdHR0YGRscHR0dHhkbHB0dHR4eGxwdHR0eHh4REREUFxocIBERFBcaHCAiERQXGhwgIiUUFxocICIlJRcaHCAiJSUlGhwgIiUlJSkcICIlJSUpKiAiJSUlKSoqEBAQFBgcICgQEBQYHCAoMBAUGBwgKDBAFBgcICgwQEAYHCAoMEBAQBwgKDBAQEBgICgwQEBAYIAoMEBAQGCAgAfF5cdH1e3Ow/L66wGmYnfIUbwdUTe3LMRbqON8B+5RJEvcGxkvrVUjTMrsXYhAnIwe0dTJfOYbWrDYyqUrz7dw/JO4hpmV2LsQQvkUeGq1BsZLx+cu5iV0e0eScJ91VIQYrmqfdVSK7GgjOU0oPaPOu5IcDK1mNvnD+K8LwS87f8Jx2mHtHnUkTGAurWZlNQa74ZLSFH9oF6FPGxzLsjQO5Qe0edcpttd7BXBSqMCL4k/4tFrHIPuEQ7m1/uIWkbDMWVoDdOSuRQ9286kvVUlQjzOE6VrNguN4oRXYGkgcnih7t13/9kxvLYKQezwLTrO44sVmMPgMqORo1E0sm1/9SludkcWHwfJwTSybR4LeAz6ugWVgRaY8mV/9SluQmtHrzsBtRF/wPY+X0JuYTs+ltgrXAmlk10xQHmTu9VSIAk1+vcvU4ml2oNzrNhEtQ3CysNP8UeR35wqpKUBdGdZMSjX4WVi8nJpdpHnbhzEIdx7mwf6W1FKAiucMXrWUWVjyRf23chNtR9mIzDoT/6ZLYailAjhFlZuvPtSeZ+2oREubDoWmT3TguY+JHPdRVSLKxfKH3vgNqJ/9emeEYikGXDFNzaLjvTeGAL61mogOoeG3y6oU4rW55ydoj0lUTSR/mmRhPmF86uwIfzp3FtiufQCmppaHDlGE0r2iTzXIw3zBq5hvaTldjG4CPb9wdxAme0SyedVKczJ9AtYbgPOzYKJvZZImsN7ecrxWZg5dR6ZLj/j4qpWsIA+vYwE+Tca9ounMIsrXMB4Stiib2SPQtZv+FVIpfEbzv8ncZoLBXc3YBqTG1HsskTTotZOYTG+oVUjLk6zhP8bg4RhMUNtfZdO7FdpBuXzhJ5Fh8IKlJG7wtD9ik8rWOJxy6iQ3NwzBpQ219mlyv+FLicYs2iJGSE0u2txzed++D61ZWCiHD/cZdQVCqkO2gJpdpNaObhnDfAPrT89RxdWFZ5hO3MseBSIlANppdZNIV/Rwe5eLTDvkfWKzFnH+QJ7m9QWV1KdwnuIwTNtZdJMoXBf74OhRnh2t+OTGL+AVUnIkyYY+QG7g9itHXyF3OIygG2s2kud679ZWKqSFa9n3IHD6MeLv1lZ0XyduRhiDRtrNnKoyiFVLcBm0ba5Yy3fQkDh4XsFE34isVpOzpa9nR8iCpS4HoxG2rJpnRhf3YboVa1PcRouh5LIJv/uQcPNd095ickTaiGBnWLKVWRc0OnYTSyex/n2FofEPnDG8y3PztHrzOLK1xo6RAml2k9owKajOC0Wr4D5x+3nA0UEhK2m198wuBHF3zlWWVKWLN1CHzLClUfuoYBcx4b1llpeBKmbayaR58njtE9onD66lUcsg0Spm2snsb+8HaJRn4dYcLbCuBuYwziB8/5U1C1DOOz2gZjSZtrLJk6vrLF3hwY4Io9xuT/ruUFRSBkNtUzTOWhjh26irLEPx4jPZL3Fo3QrReoGTTM21xYTT9oFdhTUIvjqTkfkvt0bzgVUjq/hOYY8j60IaO/0AzRBtqkTS6R5ellZd5uKdzzhb8BFlDdAcrwkE0rbXTOPB+7Y0FlZO96qFL4Ykg21StJs8qIW7h16H5hGiv8V2Cflau7QVDepTAHa6Lgt6feiEvJDM21StJsmOH/hynURrKxvUpQ8BH0JF7BiyG2qZpnL/7AOU66gt+reLEXY8pVOCQvSsBtqZTNM8bk9ohRcwD18o/WVkbvrceVKRb9I59IEKysjBeTMmmbA21xu/6iHadLRxuIzkLpi8wZYmmbbWi32RVAUjruxWlJ//iFxE38FI9hNKOoCdhwf5fDe4xZ81lgREhK2m1j78vW1CqkuMu/AjBNK210kzRUX/B+69cMMUG5bYrIeZxVSEZISmkzbXOi9yxwIfPgdsov7R71xuJ7rFcACjG/9PzApqFq7wEgzNJm2suWESPuwrQvejj7cbnQxMkxpm21lUYJL0fKmogPPqywn7e3FvB/FCNxPJ85iVUkCE9/tLKx31G4CgNtWTTPFhMvlu8G4/TrgaZttTChljfNJGgOT2X6EqpETy2tYd9cCBI4lIXJ1/3uVUllZEJz4baqGF64yxaZ+zPLYwde8Uqn1oKANtUrSaTOPHkhvuQP3bBlEJ/LFe4pqQOHUI8T8q7AXx3fLVBgSCVpMba55YxN3rv8U1Dv51bAPSOLlZWebkL8vSMGI21lJmmeVxPRwFlZF1CpqCN8uLwymaZyjbXHCRytogPN3o/n74CNykfT+qqRv5AQlHcRxYrC5KvGmbbUwmZY/29BvF6C1/93x4WVglXDLFpmbapmF89HKTogRwqqSlGbu+oiAkcWFbklC6Zhf+NtTLFpn8oWz+HsNRVSgIxZWON+yVyJlE5tq/+GWLTMutYX9ekTySEQPLVNQQ3OfycwJBM0zNtZcse7CvcKI0V/zh16Dr9OSA21MpmmcrHC+6pTAPHPwoit3LHHqs7jhFNRD6W8+EBGoSEoaZttTCZljfduH/fFisn+dRBGAZYtMzbVMwvul/T/crK1NQh8gN0SRRa9cOux6clC0/mDLFpmbarmF8/e6CopeOLCNW6S/IUUg3jJIYiAcDoMcGeRbOvuTPjXR/tyo79LK3kqqkbxkkMRAOB0GODPItnX3Jnxro/25Ud+llbyVVSN4ySGIgHA6DHBnkWzr7kz410f7cqO/Syt5KqpFVJwn6gBEvBM0zNtZcpGOEPiysW8vvRd2R0f7gtjhqUvXL+gWVwHm4XJDBiMpmmZtrLfPwd/IugP5+fKVSysH1EXreFAcEhelGmbbUmZY4Xdo1vQWVnK19P4RuEnbf0gQnR+lDCZlivNM22t1ESmopPIgfT0duOfQrsjgG4tPxli0zJmF5trdL1JDUIUT1ZXSqQDeR4B8mX3TrRro/2McGeUvLtwo6jIEKMkCUXWsLyZROd9P/rFYNtXPBli0z398iVUlVKAjFlY437JXImUTm2r/4ZYtMy61hf16RPJIU9nZ1MABAwAAAAAAAAAZpwgEwIAAABhp658BScAAAAAAADnUFBQXIDGXLhwtttNHDhw5OcpQRMETBEwRPduylKVB0HRdF0A";else{if(!v.video.h264)return void s("videoautoplay",!1);d.src="data:video/mp4;base64,AAAAHGZ0eXBtcDQyAAAAAG1wNDJpc29tYXZjMQAAAz5tb292AAAAbG12aGQAAAAAzaNacc2jWnEAAV+QAAFfkAABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAGGlvZHMAAAAAEICAgAcAT////3//AAACQ3RyYWsAAABcdGtoZAAAAAHNo1pxzaNacQAAAAEAAAAAAAFfkAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAEAAAABAAAAAAAd9tZGlhAAAAIG1kaGQAAAAAzaNacc2jWnEAAV+QAAFfkFXEAAAAAAAhaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAAAAAAGWbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABVnN0YmwAAACpc3RzZAAAAAAAAAABAAAAmWF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAEAAQAEgAAABIAAAAAAAAAAEOSlZUL0FWQyBDb2RpbmcAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAxYXZjQwH0AAr/4QAZZ/QACq609NQYBBkAAAMAAQAAAwAKjxImoAEABWjOAa8gAAAAEmNvbHJuY2xjAAYAAQAGAAAAGHN0dHMAAAAAAAAAAQAAAAUAAEZQAAAAKHN0c3oAAAAAAAAAAAAAAAUAAAIqAAAACAAAAAgAAAAIAAAACAAAAChzdHNjAAAAAAAAAAIAAAABAAAABAAAAAEAAAACAAAAAQAAAAEAAAAYc3RjbwAAAAAAAAACAAADYgAABaQAAAAUc3RzcwAAAAAAAAABAAAAAQAAABFzZHRwAAAAAAREREREAAAAb3VkdGEAAABnbWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcgAAAAAAAAAAAAAAAAAAAAA6aWxzdAAAADKpdG9vAAAAKmRhdGEAAAABAAAAAEhhbmRCcmFrZSAwLjkuOCAyMDEyMDcxODAwAAACUm1kYXQAAAHkBgX/4NxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxMjAgLSBILjI2NC9NUEVHLTQgQVZDIGNvZGVjIC0gQ29weWxlZnQgMjAwMy0yMDExIC0gaHR0cDovL3d3dy52aWRlb2xhbi5vcmcveDI2NC5odG1sIC0gb3B0aW9uczogY2FiYWM9MCByZWY9MSBkZWJsb2NrPTE6MDowIGFuYWx5c2U9MHgxOjAgbWU9ZXNhIHN1Ym1lPTkgcHN5PTAgbWl4ZWRfcmVmPTAgbWVfcmFuZ2U9NCBjaHJvbWFfbWU9MSB0cmVsbGlzPTAgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0wIGNocm9tYV9xcF9vZmZzZXQ9MCB0aHJlYWRzPTYgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTUwIGtleWludF9taW49NSBzY2VuZWN1dD00MCBpbnRyYV9yZWZyZXNoPTAgcmM9Y3FwIG1idHJlZT0wIHFwPTAAgAAAAD5liISscR8A+E4ACAACFoAAITAAAgsAAPgYCoKgoC+L4vi+KAvi+L4YfAEAACMzgABF9AAEUGUgABDJiXnf4AAAAARBmiKUAAAABEGaQpQAAAAEQZpilAAAAARBmoKU"}}catch(f){return void s("videoautoplay",!1)}d.setAttribute("autoplay",""),d.style.cssText="display:none",x.appendChild(d),setTimeout(function(){d.addEventListener("playing",a,!1),b=setTimeout(a,c)},0)}),v.addTest("videoloop","loop"in g("video")),v.addTest("videopreload","preload"in g("video")),v.addTest("willchange","willChange"in x.style),v.addTest("xhrresponsetype",function(){if("undefined"==typeof XMLHttpRequest)return!1;var a=new XMLHttpRequest;return a.open("get","/",!0),"response"in a}());var M=function(a){if("undefined"==typeof XMLHttpRequest)return!1;var b=new XMLHttpRequest;b.open("get","/",!0);try{b.responseType=a}catch(c){return!1}return"response"in b&&b.responseType==a};v.addTest("xhrresponsetypeblob",M("blob")),e(),f(w),delete u.addTest,delete u.addAsyncTest;for(var N=0;N<v._q.length;N++)v._q[N]();a.Modernizr=v}(window,document)},{}],"backbone.babysitter":[function(a,b,c){!function(d,e){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(a,b){return e(a,b)});else if("undefined"!=typeof c){var f=a("backbone"),g=a("underscore");b.exports=e(f,g)}else e(d.Backbone,d._)}(this,function(a,b){"use strict";var c=a.ChildViewContainer;return a.ChildViewContainer=function(a,b){var c=function(a){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),b.each(a,this.add,this)};b.extend(c.prototype,{add:function(a,b){var c=a.cid;return this._views[c]=a,a.model&&(this._indexByModel[a.model.cid]=c),b&&(this._indexByCustom[b]=c),this._updateLength(),this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){var b=this._indexByModel[a];return this.findByCid(b)},findByCustom:function(a){var b=this._indexByCustom[a];return this.findByCid(b)},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var c=a.cid;return a.model&&delete this._indexByModel[a.model.cid],b.any(this._indexByCustom,function(a,b){return a===c?(delete this._indexByCustom[b],!0):void 0},this),delete this._views[c],this._updateLength(),this},call:function(a){this.apply(a,b.tail(arguments))},apply:function(a,c){b.each(this._views,function(d){b.isFunction(d[a])&&d[a].apply(d,c||[])})},_updateLength:function(){this.length=b.size(this._views)}});var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return b.each(d,function(a){c.prototype[a]=function(){var c=b.values(this._views),d=[c].concat(b.toArray(arguments));return b[a].apply(b,d)}}),c}(a,b),a.ChildViewContainer.VERSION="0.1.6",a.ChildViewContainer.noConflict=function(){return a.ChildViewContainer=c,this},a.ChildViewContainer})},{backbone:"backbone",underscore:"underscore"}],"backbone.native":[function(a,b,c){(function(){"use strict";function a(a){a[j]||(a[j]=0===m.length?++k:m.pop());var b=a[j];return l[b]||(l[b]=[])}function d(a){var b=a[j];l[b]&&(l[b]=null,a[j]=null,m.push(b))}function e(b,c,d,e){"function"==typeof d&&(e=d,d=null);var f=h.exec(c);c=f[1]||null;var g=f[2]||null;if(c){var j=e,k=e;j=d?function(a){for(var c=a.target;c&&c!==b;c=c.parentElement)if(i.call(c,d)){var e=k.call(c,a,c);return e===!1&&(a.stopPropagation(),a.preventDefault()),e}}:function(a){var c=k.call(b,a,b);return c===!1&&(a.stopPropagation(),a.preventDefault()),c},b.addEventListener(c,j,!1),a(b).push({eventName:c,callback:e,handler:j,namespace:g,selector:d})}}function f(b,c,e,f){"function"==typeof e&&(f=e,e=null);var g=h.exec(c||"");c=g[1];var i=g[2],j=a(b)||[];if(c||i||e||f){var k=j.filter(function(a){return!(i&&a.namespace!==i||c&&a.eventName!==c||f&&a.callback!==f||e&&a.selector!==e)});k.forEach(function(a){b.removeEventListener(a.eventName,a.handler,!1),j.splice(j.indexOf(a),1)}),0===j.length&&d(b)}else j.forEach(function(a){b.removeEventListener(a.eventName,a.handler,!1)}),d(b)}function g(a,b){if(b=b||document,!(this instanceof g))return new g(a,b);if(a)if("string"==typeof a)if(/^\s*</.test(a)){var c=document.createElement("div");c.innerHTML=a,this[0]=c.firstChild,c.removeChild(c.firstChild),this.length=1}else this[0]=b.querySelector(a),this.length=1;else this[0]=a,this.length=1;else this.length=0}var h=/^([^.]+)?(?:\.([^.]+))?$/,i=Element.prototype.matchesSelector||null;i||["webkit","moz","o","ms"].forEach(function(a){var b=Element.prototype[a+"MatchesSelector"];b&&(i=b)});var j="backboneNativeKey"+Math.random(),k=1,l={},m=[];if(g.prototype={hide:null,appendTo:null,find:null,attr:function(a){return Object.keys(a).forEach(function(b){switch(b){case"html":this[0].innerHTML=a[b];break;case"text":this[0].textContent=a[b];break;case"class":this[0].className=a[b];break;default:this[0].setAttribute(b,a[b])}},this),this},html:function(a){return this[0].innerHTML=a,this},remove:function(){var a=this[0];return a.parentElement&&a.parentElement.removeChild(a),function b(a){f(a);for(var c=0,d=a.childNodes.length;d>c;c++)a.childNodes[c].nodeType!==Node.TEXT_NODE&&b(a.childNodes[c])}(a),this},on:function(a,b,c){return e(this[0],a,b,c),this},off:function(a,b,c){return f(this[0],a,b,c),this},bind:function(a,b){return this.on(a,b)},unbind:function(a,b){return this.off(a,b)},delegate:function(a,b,c){return this.on(b,a,c)},undelegate:function(a,b,c){return this.off(b,a,c)}},g.ajax=function(a){a=a||{};var b=a.type||"GET",c=a.url,d=void 0===a.processData?!0:!!a.processData,e=a.data;if(d&&"object"==typeof e){var f=Object.keys(e).map(function(a){return encodeURIComponent(a)+"="+encodeURIComponent(e[a])});e=f.join("&")}!e||"GET"!==b&&"HEAD"!==b||(c+=(-1===c.indexOf("?")?"?":"&")+e,e=void 0);var g=new XMLHttpRequest;return g.open(b,c,!0),a.contentType&&g.setRequestHeader("Content-Type",a.contentType),a.beforeSend&&a.beforeSend(g),g.onload=function(){var b=!1,c=g.responseText;if("json"===a.dataType)try{c=JSON.parse(c)}catch(d){b=!0}!b&&g.status>=200&&g.status<300?a.success&&a.success(c,g.statusText,g):a.error&&a.error(g)}.bind(this),g.onerror=g.onabort=function(){a.error&&a.error(g)},g.send(e),g},g.on=e,g.off=f,"undefined"!=typeof c)return b.exports=g;var n=this,o=n.Backbone?n.Backbone.Native:null,p=n.$;n.Backbone&&(n.Backbone.Native=g),n.$=g,g.noConflict=function(a){return n.$=p,a&&(n.Backbone.Native=o),g},n.Backbone&&(n.Backbone.setDomLibrary?n.Backbone.setDomLibrary(g):n.Backbone.$=g)}).call(this)},{}],backbone:[function(a,b,c){!function(b,d){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(a,c,e){b.Backbone=d(b,e,a,c)});else if("undefined"!=typeof c){var e=a("underscore");d(b,c,e)}else b.Backbone=d(b,{},b._,b.jQuery||b.Zepto||b.ender||b.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice;b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;k>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!o&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;f>e;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a,b){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,
d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b})},{underscore:"underscore"}],"classlist-polyfill":[function(a,b,c){"document"in window.self&&("classList"in document.createElement("_")?!function(){"use strict";var a=document.createElement("_");if(a.classList.add("c1","c2"),!a.classList.contains("c2")){var b=function(a){var b=DOMTokenList.prototype[a];DOMTokenList.prototype[a]=function(a){var c,d=arguments.length;for(c=0;d>c;c++)a=arguments[c],b.call(this,a)}};b("add"),b("remove")}if(a.classList.toggle("c3",!1),a.classList.contains("c3")){var c=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,b){return 1 in arguments&&!this.contains(a)==!b?b:c.call(this,a)}}a=null}():!function(a){"use strict";if("Element"in a){var b="classList",c="prototype",d=a.Element[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(""===b)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){for(var b=f.call(a.getAttribute("class")||""),c=b?b.split(/\s+/):[],d=0,e=c.length;e>d;d++)this.push(c[d]);this._updateClassName=function(){a.setAttribute("class",this.toString())}},k=j[c]=[],l=function(){return new j(this)};if(h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",-1!==i(this,a)},k.add=function(){var a,b=arguments,c=0,d=b.length,e=!1;do a=b[c]+"",-1===i(this,a)&&(this.push(a),e=!0);while(++c<d);e&&this._updateClassName()},k.remove=function(){var a,b,c=arguments,d=0,e=c.length,f=!1;do for(a=c[d]+"",b=i(this,a);-1!==b;)this.splice(b,1),f=!0,b=i(this,a);while(++d<e);f&&this._updateClassName()},k.toggle=function(a,b){a+="";var c=this.contains(a),d=c?b!==!0&&"remove":b!==!1&&"add";return d&&this[d](a),b===!0||b===!1?b:!c},k.toString=function(){return this.join(" ")},e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(n){-2146823252===n.number&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}}(window.self))},{}],color:[function(a,b,c){var d=a("color-convert"),e=a("color-string"),f=function(a){if(a instanceof f)return a;if(!(this instanceof f))return new f(a);if(this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},"string"==typeof a){var b=e.getRgba(a);if(b)this.setValues("rgb",b);else if(b=e.getHsla(a))this.setValues("hsl",b);else{if(!(b=e.getHwb(a)))throw new Error('Unable to parse color from string "'+a+'"');this.setValues("hwb",b)}}else if("object"==typeof a){var b=a;if(void 0!==b.r||void 0!==b.red)this.setValues("rgb",b);else if(void 0!==b.l||void 0!==b.lightness)this.setValues("hsl",b);else if(void 0!==b.v||void 0!==b.value)this.setValues("hsv",b);else if(void 0!==b.w||void 0!==b.whiteness)this.setValues("hwb",b);else{if(void 0===b.c&&void 0===b.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(a));this.setValues("cmyk",b)}}};f.prototype={rgb:function(a){return this.setSpace("rgb",arguments)},hsl:function(a){return this.setSpace("hsl",arguments)},hsv:function(a){return this.setSpace("hsv",arguments)},hwb:function(a){return this.setSpace("hwb",arguments)},cmyk:function(a){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){return 1!==this.values.alpha?this.values.hwb.concat([this.values.alpha]):this.values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var a=this.values.rgb;return a.concat([this.values.alpha])},hslaArray:function(){var a=this.values.hsl;return a.concat([this.values.alpha])},alpha:function(a){return void 0===a?this.values.alpha:(this.setValues("alpha",a),this)},red:function(a){return this.setChannel("rgb",0,a)},green:function(a){return this.setChannel("rgb",1,a)},blue:function(a){return this.setChannel("rgb",2,a)},hue:function(a){return this.setChannel("hsl",0,a)},saturation:function(a){return this.setChannel("hsl",1,a)},lightness:function(a){return this.setChannel("hsl",2,a)},saturationv:function(a){return this.setChannel("hsv",1,a)},whiteness:function(a){return this.setChannel("hwb",1,a)},blackness:function(a){return this.setChannel("hwb",2,a)},value:function(a){return this.setChannel("hsv",2,a)},cyan:function(a){return this.setChannel("cmyk",0,a)},magenta:function(a){return this.setChannel("cmyk",1,a)},yellow:function(a){return this.setChannel("cmyk",2,a)},black:function(a){return this.setChannel("cmyk",3,a)},hexString:function(){return e.hexString(this.values.rgb)},rgbString:function(){return e.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return e.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return e.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return e.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return e.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return e.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return e.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){return this.values.rgb[0]<<16|this.values.rgb[1]<<8|this.values.rgb[2]},luminosity:function(){for(var a=this.values.rgb,b=[],c=0;c<a.length;c++){var d=a[c]/255;b[c]=.03928>=d?d/12.92:Math.pow((d+.055)/1.055,2.4)}return.2126*b[0]+.7152*b[1]+.0722*b[2]},contrast:function(a){var b=this.luminosity(),c=a.luminosity();return b>c?(b+.05)/(c+.05):(c+.05)/(b+.05)},level:function(a){var b=this.contrast(a);return b>=7.1?"AAA":b>=4.5?"AA":""},dark:function(){var a=this.values.rgb,b=(299*a[0]+587*a[1]+114*a[2])/1e3;return 128>b},light:function(){return!this.dark()},negate:function(){for(var a=[],b=0;3>b;b++)a[b]=255-this.values.rgb[b];return this.setValues("rgb",a),this},lighten:function(a){return this.values.hsl[2]+=this.values.hsl[2]*a,this.setValues("hsl",this.values.hsl),this},darken:function(a){return this.values.hsl[2]-=this.values.hsl[2]*a,this.setValues("hsl",this.values.hsl),this},saturate:function(a){return this.values.hsl[1]+=this.values.hsl[1]*a,this.setValues("hsl",this.values.hsl),this},desaturate:function(a){return this.values.hsl[1]-=this.values.hsl[1]*a,this.setValues("hsl",this.values.hsl),this},whiten:function(a){return this.values.hwb[1]+=this.values.hwb[1]*a,this.setValues("hwb",this.values.hwb),this},blacken:function(a){return this.values.hwb[2]+=this.values.hwb[2]*a,this.setValues("hwb",this.values.hwb),this},greyscale:function(){var a=this.values.rgb,b=.3*a[0]+.59*a[1]+.11*a[2];return this.setValues("rgb",[b,b,b]),this},clearer:function(a){return this.setValues("alpha",this.values.alpha-this.values.alpha*a),this},opaquer:function(a){return this.setValues("alpha",this.values.alpha+this.values.alpha*a),this},rotate:function(a){var b=this.values.hsl[0];return b=(b+a)%360,b=0>b?360+b:b,this.values.hsl[0]=b,this.setValues("hsl",this.values.hsl),this},mix:function(a,b){var c=this,d=a,e=void 0!==b?b:.5,f=2*e-1,g=c.alpha()-d.alpha(),h=((f*g==-1?f:(f+g)/(1+f*g))+1)/2,i=1-h;return this.rgb(h*c.red()+i*d.red(),h*c.green()+i*d.green(),h*c.blue()+i*d.blue()).alpha(c.alpha()*e+d.alpha()*(1-e))},toJSON:function(){return this.rgb()},clone:function(){return new f(this.rgb())}},f.prototype.getValues=function(a){for(var b={},c=0;c<a.length;c++)b[a.charAt(c)]=this.values[a][c];return 1!=this.values.alpha&&(b.a=this.values.alpha),b},f.prototype.setValues=function(a,b){var c={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},e={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},f=1;if("alpha"==a)f=b;else if(b.length)this.values[a]=b.slice(0,a.length),f=b[a.length];else if(void 0!==b[a.charAt(0)]){for(var g=0;g<a.length;g++)this.values[a][g]=b[a.charAt(g)];f=b.a}else if(void 0!==b[c[a][0]]){for(var h=c[a],g=0;g<a.length;g++)this.values[a][g]=b[h[g]];f=b.alpha}if(this.values.alpha=Math.max(0,Math.min(1,void 0!==f?f:this.values.alpha)),"alpha"!=a){for(var g=0;g<a.length;g++){var i=Math.max(0,Math.min(e[a][g],this.values[a][g]));this.values[a][g]=Math.round(i)}for(var j in c){j!=a&&(this.values[j]=d[a][j](this.values[a]));for(var g=0;g<j.length;g++){var i=Math.max(0,Math.min(e[j][g],this.values[j][g]));this.values[j][g]=Math.round(i)}}return!0}},f.prototype.setSpace=function(a,b){var c=b[0];return void 0===c?this.getValues(a):("number"==typeof c&&(c=Array.prototype.slice.call(b)),this.setValues(a,c),this)},f.prototype.setChannel=function(a,b,c){return void 0===c?this.values[a][b]:(this.values[a][b]=c,this.setValues(a,this.values[a]),this)},b.exports=f},{"color-convert":2,"color-string":3}],"cookies-js":[function(a,b,c){!function(a,d){"use strict";var e=function(a){if("object"!=typeof a.document)throw new Error("Cookies.js requires a `window` with a `document` object");var b=function(a,c,d){return 1===arguments.length?b.get(a):b.set(a,c,d)};return b._document=a.document,b._cacheKeyPrefix="cookey.",b._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),b.defaults={path:"/",secure:!1},b.get=function(a){b._cachedDocumentCookie!==b._document.cookie&&b._renewCache();var c=b._cache[b._cacheKeyPrefix+a];return c===d?d:decodeURIComponent(c)},b.set=function(a,c,e){return e=b._getExtendedOptions(e),e.expires=b._getExpiresDate(c===d?-1:e.expires),b._document.cookie=b._generateCookieString(a,c,e),b},b.expire=function(a,c){return b.set(a,d,c)},b._getExtendedOptions=function(a){return{path:a&&a.path||b.defaults.path,domain:a&&a.domain||b.defaults.domain,expires:a&&a.expires||b.defaults.expires,secure:a&&a.secure!==d?a.secure:b.defaults.secure}},b._isValidDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)&&!isNaN(a.getTime())},b._getExpiresDate=function(a,c){if(c=c||new Date,"number"==typeof a?a=a===1/0?b._maxExpireDate:new Date(c.getTime()+1e3*a):"string"==typeof a&&(a=new Date(a)),a&&!b._isValidDate(a))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return a},b._generateCookieString=function(a,b,c){a=a.replace(/[^#$&+\^`|]/g,encodeURIComponent),a=a.replace(/\(/g,"%28").replace(/\)/g,"%29"),b=(b+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),c=c||{};var d=a+"="+b;return d+=c.path?";path="+c.path:"",d+=c.domain?";domain="+c.domain:"",d+=c.expires?";expires="+c.expires.toUTCString():"",d+=c.secure?";secure":""},b._getCacheFromString=function(a){for(var c={},e=a?a.split("; "):[],f=0;f<e.length;f++){var g=b._getKeyValuePairFromCookieString(e[f]);c[b._cacheKeyPrefix+g.key]===d&&(c[b._cacheKeyPrefix+g.key]=g.value)}return c},b._getKeyValuePairFromCookieString=function(a){var b=a.indexOf("=");b=0>b?a.length:b;var c,d=a.substr(0,b);try{c=decodeURIComponent(d)}catch(e){console&&"function"==typeof console.error}return{key:c,value:a.substr(b+1)}},b._renewCache=function(){b._cache=b._getCacheFromString(b._document.cookie),b._cachedDocumentCookie=b._document.cookie},b._areEnabled=function(){var a="cookies.js",c="1"===b.set(a,1).get(a);return b.expire(a),c},b.enabled=b._areEnabled(),b},f="object"==typeof a.document?e(a):e;"function"==typeof define&&define.amd?define(function(){return f}):"object"==typeof c?("object"==typeof b&&"object"==typeof b.exports&&(c=b.exports=f),c.Cookies=f):a.Cookies=f}("undefined"==typeof window?this:window)},{}],"es6-promise":[function(a,b,c){(function(c,d){(function(){"use strict";function e(a){return"function"==typeof a||"object"==typeof a&&null!==a}function f(a){return"function"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){T=a}function i(a){X=a}function j(){return function(){c.nextTick(o)}}function k(){return function(){S(o)}}function l(){var a=0,b=new $(o),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function m(){var a=new MessageChannel;return a.port1.onmessage=o,function(){a.port2.postMessage(0)}}function n(){return function(){setTimeout(o,1)}}function o(){for(var a=0;W>a;a+=2){var b=ba[a],c=ba[a+1];b(c),ba[a]=void 0,ba[a+1]=void 0}W=0}function p(){try{var b=a,c=b("vertx");return S=c.runOnLoop||c.runOnContext,k()}catch(d){return n()}}function q(){}function r(){return new TypeError("You cannot resolve a promise with itself")}function s(){return new TypeError("A promises callback cannot return that same promise.")}function t(a){try{return a.then}catch(b){return fa.error=b,fa}}function u(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function v(a,b,c){X(function(a){var d=!1,e=u(c,b,function(c){d||(d=!0,b!==c?y(a,c):A(a,c))},function(b){d||(d=!0,B(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,B(a,e))},a)}function w(a,b){b._state===da?A(a,b._result):b._state===ea?B(a,b._result):C(b,void 0,function(b){y(a,b)},function(b){B(a,b)})}function x(a,b){if(b.constructor===a.constructor)w(a,b);else{var c=t(b);c===fa?B(a,fa.error):void 0===c?A(a,b):f(c)?v(a,b,c):A(a,b)}}function y(a,b){a===b?B(a,r()):e(b)?x(a,b):A(a,b)}function z(a){a._onerror&&a._onerror(a._result),D(a)}function A(a,b){a._state===ca&&(a._result=b,a._state=da,0!==a._subscribers.length&&X(D,a))}function B(a,b){a._state===ca&&(a._state=ea,a._result=b,X(z,a))}function C(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+da]=c,e[f+ea]=d,0===f&&a._state&&X(D,a)}function D(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?G(c,d,e,f):e(f);a._subscribers.length=0}}function E(){this.error=null}function F(a,b){try{return a(b)}catch(c){return ga.error=c,ga}}function G(a,b,c,d){var e,g,h,i,j=f(c);if(j){if(e=F(c,d),e===ga?(i=!0,g=e.error,e=null):h=!0,b===e)return void B(b,s())}else e=d,h=!0;b._state!==ca||(j&&h?y(b,e):i?B(b,g):a===da?A(b,e):a===ea&&B(b,e))}function H(a,b){try{b(function(b){y(a,b)},function(b){B(a,b)})}catch(c){B(a,c)}}function I(a,b){var c=this;c._instanceConstructor=a,c.promise=new a(q),c._validateInput(b)?(c._input=b,c.length=b.length,c._remaining=b.length,c._init(),0===c.length?A(c.promise,c._result):(c.length=c.length||0,c._enumerate(),0===c._remaining&&A(c.promise,c._result))):B(c.promise,c._validationError())}function J(a){return new ha(this,a).promise}function K(a){function b(a){y(e,a)}function c(a){B(e,a)}var d=this,e=new d(q);if(!V(a))return B(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;e._state===ca&&f>g;g++)C(d.resolve(a[g]),void 0,b,c);return e}function L(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(q);return y(c,a),c}function M(a){var b=this,c=new b(q);return B(c,a),c}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function O(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function P(a){this._id=ma++,this._state=void 0,this._result=void 0,this._subscribers=[],q!==a&&(f(a)||N(),this instanceof P||O(),H(this,a))}function Q(){var a;if("undefined"!=typeof d)a=d;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(b){throw new Error("polyfill failed because global object is unavailable in this environment")}var c=a.Promise;(!c||"[object Promise]"!==Object.prototype.toString.call(c.resolve())||c.cast)&&(a.Promise=na)}var R;R=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var S,T,U,V=R,W=0,X=({}.toString,function(a,b){ba[W]=a,ba[W+1]=b,W+=2,2===W&&(T?T(o):U())}),Y="undefined"!=typeof window?window:void 0,Z=Y||{},$=Z.MutationObserver||Z.WebKitMutationObserver,_="undefined"!=typeof c&&"[object process]"==={}.toString.call(c),aa="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ba=new Array(1e3);U=_?j():$?l():aa?m():void 0===Y&&"function"==typeof a?p():n();var ca=void 0,da=1,ea=2,fa=new E,ga=new E;I.prototype._validateInput=function(a){return V(a)},I.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},I.prototype._init=function(){this._result=new Array(this.length)};var ha=I;I.prototype._enumerate=function(){for(var a=this,b=a.length,c=a.promise,d=a._input,e=0;c._state===ca&&b>e;e++)a._eachEntry(d[e],e)},I.prototype._eachEntry=function(a,b){var c=this,d=c._instanceConstructor;g(a)?a.constructor===d&&a._state!==ca?(a._onerror=null,c._settledAt(a._state,b,a._result)):c._willSettleAt(d.resolve(a),b):(c._remaining--,c._result[b]=a)},I.prototype._settledAt=function(a,b,c){var d=this,e=d.promise;e._state===ca&&(d._remaining--,a===ea?B(e,c):d._result[b]=c),0===d._remaining&&A(e,d._result)},I.prototype._willSettleAt=function(a,b){var c=this;C(a,void 0,function(a){c._settledAt(da,b,a)},function(a){c._settledAt(ea,b,a)})};var ia=J,ja=K,ka=L,la=M,ma=0,na=P;P.all=ia,P.race=ja,P.resolve=ka,P.reject=la,P._setScheduler=h,P._setAsap=i,P._asap=X,P.prototype={constructor:P,then:function(a,b){var c=this,d=c._state;if(d===da&&!a||d===ea&&!b)return this;var e=new this.constructor(q),f=c._result;if(d){var g=arguments[d-1];X(function(){G(d,e,g,f)})}else C(c,e,a,b);return e},"catch":function(a){return this.then(null,a)}};var oa=Q,pa={Promise:na,polyfill:oa};"function"==typeof define&&define.amd?define(function(){return pa}):"undefined"!=typeof b&&b.exports?b.exports=pa:"undefined"!=typeof this&&(this.ES6Promise=pa),oa()}).call(this)}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:5}],"fullscreen-polyfill":[function(a,b,c){!function(a){"use strict";function b(b,c){var d=a.createEvent("Event");d.initEvent(b,!0,!1),c.dispatchEvent(d)}function c(c){a[i.enabled]=a[e.enabled],a[i.element]=a[e.element],b(i.events.change,c.target)}function d(a){b(i.events.error,a.target)}var e,f,g=!0,h={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitIsFullScreen",element:"webkitFullscreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},i=h.w3;for(f in h)if(h[f].enabled in a){e=h[f];break}return!g||i.enabled in a||!e||(a.addEventListener(e.events.change,c,!1),a.addEventListener(e.events.error,d,!1),a[i.enabled]=a[e.enabled],a[i.element]=a[e.element],a[i.exit]=a[e.exit],Element.prototype[i.request]=Element.prototype[e.request]),e}(document)},{}],hammerjs:[function(a,b,c){!function(a,c,d,e){"use strict";function f(a,b,c){return setTimeout(l(a,c),b)}function g(a,b,c){return Array.isArray(a)?(h(a,c[b],c),!0):!1}function h(a,b,c){var d;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==e)for(d=0;d<a.length;)b.call(c,a[d],d,a),d++;else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)}function i(a,b,c){for(var d=Object.keys(b),f=0;f<d.length;)(!c||c&&a[d[f]]===e)&&(a[d[f]]=b[d[f]]),f++;return a}function j(a,b){return i(a,b,!0)}function k(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&i(d,c)}function l(a,b){return function(){return a.apply(b,arguments)}}function m(a,b){return typeof a==la?a.apply(b?b[0]||e:e,b):a}function n(a,b){return a===e?b:a}function o(a,b,c){h(s(b),function(b){a.addEventListener(b,c,!1)})}function p(a,b,c){h(s(b),function(b){a.removeEventListener(b,c,!1)})}function q(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function r(a,b){return a.indexOf(b)>-1}function s(a){return a.trim().split(/\s+/g)}function t(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function u(a){return Array.prototype.slice.call(a,0)}function v(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];t(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function w(a,b){for(var c,d,f=b[0].toUpperCase()+b.slice(1),g=0;g<ja.length;){if(c=ja[g],d=c?c+f:b,d in a)return d;g++}return e}function x(){return pa++}function y(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function z(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){m(a.options.enable,[a])&&c.handler(b)},this.init()}function A(a){var b,c=a.options.inputClass;return new(b=c?c:sa?O:ta?R:ra?T:N)(a,B)}function B(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&za&&d-e===0,g=b&(Ba|Ca)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,C(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function C(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=F(b)),e>1&&!c.firstMultiple?c.firstMultiple=F(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=G(d);b.timeStamp=oa(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=K(h,i),b.distance=J(h,i),D(c,b),b.offsetDirection=I(b.deltaX,b.deltaY),b.scale=g?M(g.pointers,d):1,b.rotation=g?L(g.pointers,d):0,E(c,b);var j=a.element;q(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function D(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===za||f.eventType===Ba)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function E(a,b){var c,d,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ca&&(i>ya||h.velocity===e)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=H(i,j,k);d=l.x,f=l.y,c=na(l.x)>na(l.y)?l.x:l.y,g=I(j,k),a.lastInterval=b}else c=h.velocity,d=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=d,b.velocityY=f,b.direction=g}function F(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:ma(a.pointers[c].clientX),clientY:ma(a.pointers[c].clientY)},c++;return{timeStamp:oa(),pointers:b,center:G(b),deltaX:a.deltaX,deltaY:a.deltaY}}function G(a){var b=a.length;if(1===b)return{x:ma(a[0].clientX),y:ma(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:ma(c/b),y:ma(d/b)}}function H(a,b,c){return{x:b/a||0,y:c/a||0}}function I(a,b){return a===b?Da:na(a)>=na(b)?a>0?Ea:Fa:b>0?Ga:Ha}function J(a,b,c){c||(c=La);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function K(a,b,c){c||(c=La);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function L(a,b){return K(b[1],b[0],Ma)-K(a[1],a[0],Ma)}function M(a,b){return J(b[0],b[1],Ma)/J(a[0],a[1],Ma)}function N(){this.evEl=Oa,this.evWin=Pa,this.allow=!0,this.pressed=!1,z.apply(this,arguments)}function O(){this.evEl=Sa,this.evWin=Ta,z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function P(){this.evTarget=Va,this.evWin=Wa,this.started=!1,z.apply(this,arguments)}function Q(a,b){var c=u(a.touches),d=u(a.changedTouches);return b&(Ba|Ca)&&(c=v(c.concat(d),"identifier",!0)),[c,d]}function R(){this.evTarget=Ya,this.targetIds={},z.apply(this,arguments)}function S(a,b){var c=u(a.touches),d=this.targetIds;if(b&(za|Aa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=u(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return q(a.target,i)}),b===za)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ba|Ca)&&delete d[g[e].identifier],e++;return h.length?[v(f.concat(h),"identifier",!0),h]:void 0}function T(){z.apply(this,arguments);var a=l(this.handler,this);this.touch=new R(this.manager,a),this.mouse=new N(this.manager,a)}function U(a,b){this.manager=a,this.set(b)}function V(a){if(r(a,cb))return cb;var b=r(a,db),c=r(a,eb);return b&&c?db+" "+eb:b||c?b?db:eb:r(a,bb)?bb:ab}function W(a){this.id=x(),this.manager=null,this.options=j(a||{},this.defaults),this.options.enable=n(this.options.enable,!0),this.state=fb,this.simultaneous={},this.requireFail=[]}function X(a){return a&kb?"cancel":a&ib?"end":a&hb?"move":a&gb?"start":""}function Y(a){return a==Ha?"down":a==Ga?"up":a==Ea?"left":a==Fa?"right":""}function Z(a,b){var c=b.manager;return c?c.get(a):a}function $(){W.apply(this,arguments)}function _(){$.apply(this,arguments),this.pX=null,this.pY=null}function aa(){$.apply(this,arguments)}function ba(){W.apply(this,arguments),this._timer=null,this._input=null}function ca(){$.apply(this,arguments)}function da(){$.apply(this,arguments)}function ea(){W.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function fa(a,b){return b=b||{},b.recognizers=n(b.recognizers,fa.defaults.preset),new ga(a,b)}function ga(a,b){b=b||{},this.options=j(b,fa.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=A(this),this.touchAction=new U(this,this.options.touchAction),ha(this,!0),h(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ha(a,b){var c=a.element;h(a.options.cssProps,function(a,d){c.style[w(c.style,d)]=b?a:""})}function ia(a,b){var d=c.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=b,b.target.dispatchEvent(d)}var ja=["","webkit","moz","MS","ms","o"],ka=c.createElement("div"),la="function",ma=Math.round,na=Math.abs,oa=Date.now,pa=1,qa=/mobile|tablet|ip(ad|hone|od)|android/i,ra="ontouchstart"in a,sa=w(a,"PointerEvent")!==e,ta=ra&&qa.test(navigator.userAgent),ua="touch",va="pen",wa="mouse",xa="kinect",ya=25,za=1,Aa=2,Ba=4,Ca=8,Da=1,Ea=2,Fa=4,Ga=8,Ha=16,Ia=Ea|Fa,Ja=Ga|Ha,Ka=Ia|Ja,La=["x","y"],Ma=["clientX","clientY"];z.prototype={handler:function(){},init:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(y(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(y(this.element),this.evWin,this.domHandler)}};var Na={mousedown:za,mousemove:Aa,mouseup:Ba},Oa="mousedown",Pa="mousemove mouseup";k(N,z,{handler:function(a){var b=Na[a.type];b&za&&0===a.button&&(this.pressed=!0),b&Aa&&1!==a.which&&(b=Ba),this.pressed&&this.allow&&(b&Ba&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:wa,srcEvent:a}))}});var Qa={pointerdown:za,pointermove:Aa,pointerup:Ba,pointercancel:Ca,pointerout:Ca},Ra={2:ua,3:va,4:wa,5:xa},Sa="pointerdown",Ta="pointermove pointerup pointercancel";a.MSPointerEvent&&(Sa="MSPointerDown",Ta="MSPointerMove MSPointerUp MSPointerCancel"),
k(O,z,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Qa[d],f=Ra[a.pointerType]||a.pointerType,g=f==ua,h=t(b,a.pointerId,"pointerId");e&za&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ba|Ca)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Ua={touchstart:za,touchmove:Aa,touchend:Ba,touchcancel:Ca},Va="touchstart",Wa="touchstart touchmove touchend touchcancel";k(P,z,{handler:function(a){var b=Ua[a.type];if(b===za&&(this.started=!0),this.started){var c=Q.call(this,a,b);b&(Ba|Ca)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ua,srcEvent:a})}}});var Xa={touchstart:za,touchmove:Aa,touchend:Ba,touchcancel:Ca},Ya="touchstart touchmove touchend touchcancel";k(R,z,{handler:function(a){var b=Xa[a.type],c=S.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ua,srcEvent:a})}}),k(T,z,{handler:function(a,b,c){var d=c.pointerType==ua,e=c.pointerType==wa;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Ba|Ca)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Za=w(ka.style,"touchAction"),$a=Za!==e,_a="compute",ab="auto",bb="manipulation",cb="none",db="pan-x",eb="pan-y";U.prototype={set:function(a){a==_a&&(a=this.compute()),$a&&(this.manager.element.style[Za]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return h(this.manager.recognizers,function(b){m(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),V(a.join(" "))},preventDefaults:function(a){if(!$a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=r(d,cb),f=r(d,eb),g=r(d,db);return e||f&&c&Ia||g&&c&Ja?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var fb=1,gb=2,hb=4,ib=8,jb=ib,kb=16,lb=32;W.prototype={defaults:{},set:function(a){return i(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(g(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=Z(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return g(a,"dropRecognizeWith",this)?this:(a=Z(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(g(a,"requireFailure",this))return this;var b=this.requireFail;return a=Z(a,this),-1===t(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(g(a,"dropRequireFailure",this))return this;a=Z(a,this);var b=t(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?X(d):""),a)}var c=this,d=this.state;ib>d&&b(!0),b(),d>=ib&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=lb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(lb|fb)))return!1;a++}return!0},recognize:function(a){var b=i({},a);return m(this.options.enable,[this,b])?(this.state&(jb|kb|lb)&&(this.state=fb),this.state=this.process(b),void(this.state&(gb|hb|ib|kb)&&this.tryEmit(b))):(this.reset(),void(this.state=lb))},process:function(a){},getTouchAction:function(){},reset:function(){}},k($,W,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(gb|hb),e=this.attrTest(a);return d&&(c&Ca||!e)?b|kb:d||e?c&Ba?b|ib:b&gb?b|hb:gb:lb}}),k(_,$,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ka},getTouchAction:function(){var a=this.options.direction,b=[];return a&Ia&&b.push(eb),a&Ja&&b.push(db),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Ia?(e=0===f?Da:0>f?Ea:Fa,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Da:0>g?Ga:Ha,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return $.prototype.attrTest.call(this,a)&&(this.state&gb||!(this.state&gb)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=Y(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),k(aa,$,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[cb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&gb)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),k(ba,W,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[ab]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,e=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ba|Ca)&&!e)this.reset();else if(a.eventType&za)this.reset(),this._timer=f(function(){this.state=jb,this.tryEmit()},b.time,this);else if(a.eventType&Ba)return jb;return lb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===jb&&(a&&a.eventType&Ba?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=oa(),this.manager.emit(this.options.event,this._input)))}}),k(ca,$,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[cb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&gb)}}),k(da,$,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Ia|Ja,pointers:1},getTouchAction:function(){return _.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Ia|Ja)?b=a.velocity:c&Ia?b=a.velocityX:c&Ja&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&na(b)>this.options.velocity&&a.eventType&Ba},emit:function(a){var b=Y(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),k(ea,W,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[bb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,e=a.deltaTime<b.time;if(this.reset(),a.eventType&za&&0===this.count)return this.failTimeout();if(d&&e&&c){if(a.eventType!=Ba)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||J(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=f(function(){this.state=jb,this.tryEmit()},b.interval,this),gb):jb}return lb},failTimeout:function(){return this._timer=f(function(){this.state=lb},this.options.interval,this),lb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==jb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),fa.VERSION="2.0.4",fa.defaults={domEvents:!1,touchAction:_a,enable:!0,inputTarget:null,inputClass:null,preset:[[ca,{enable:!1}],[aa,{enable:!1},["rotate"]],[da,{direction:Ia}],[_,{direction:Ia},["swipe"]],[ea],[ea,{event:"doubletap",taps:2},["tap"]],[ba]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var mb=1,nb=2;ga.prototype={set:function(a){return i(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?nb:mb},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&jb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===nb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(gb|hb|ib)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof W)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(g(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(g(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(t(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return h(s(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return h(s(a),function(a){b?c[a].splice(t(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&ia(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ha(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},i(fa,{INPUT_START:za,INPUT_MOVE:Aa,INPUT_END:Ba,INPUT_CANCEL:Ca,STATE_POSSIBLE:fb,STATE_BEGAN:gb,STATE_CHANGED:hb,STATE_ENDED:ib,STATE_RECOGNIZED:jb,STATE_CANCELLED:kb,STATE_FAILED:lb,DIRECTION_NONE:Da,DIRECTION_LEFT:Ea,DIRECTION_RIGHT:Fa,DIRECTION_UP:Ga,DIRECTION_DOWN:Ha,DIRECTION_HORIZONTAL:Ia,DIRECTION_VERTICAL:Ja,DIRECTION_ALL:Ka,Manager:ga,Input:z,TouchAction:U,TouchInput:R,MouseInput:N,PointerEventInput:O,TouchMouseInput:T,SingleTouchInput:P,Recognizer:W,AttrRecognizer:$,Tap:ea,Pan:_,Swipe:da,Pinch:aa,Rotate:ca,Press:ba,on:o,off:p,each:h,merge:j,extend:i,inherit:k,bindFn:l,prefixed:w}),typeof define==la&&define.amd?define(function(){return fa}):"undefined"!=typeof b&&b.exports?b.exports=fa:a[d]=fa}(window,document,"Hammer")},{}],"matches-polyfill":[function(a,b,c){!function(a){var b=["ms","moz","webkit","o"],c=-1;for(c=0;c<b.length&&!a.matches;++c)a.matches=a[b[c]+"MatchesSelector"];a.matches,a.matches||(a.matches=function(a){for(var b=this,c=(b.parentNode||b.document).querySelectorAll(a),d=-1;c[++d]&&c[d]!=b;);return!!c[d]})}(window.Element.prototype)},{}],"raf-polyfill":[function(a,b,c){!function(){var a=["ms","moz","webkit","o"],b=-1;for(b=0;b<a.length&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[a[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[b]+"CancelAnimationFrame"]||window[a[b]+"CancelRequestAnimationFrame"];window.requestAnimationFrame,window.requestAnimationFrame||!function(){var a=0;window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}}(),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){window.clearTimeout(a)})}()},{}],underscore:[function(a,b,c){(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=v(d,f,4);var g=!C(c)&&u.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function d(a){return function(b,c,d){c=w(c,d);for(var e=B(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function e(a,b,c){return function(d,e,f){var g=0,h=B(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(m.call(d,g,h),u.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function f(a,b){var c=H.length,d=a.constructor,e=u.isFunction(d)&&d.prototype||j,f="constructor";for(u.has(a,f)&&!u.contains(b,f)&&b.push(f);c--;)f=H[c],f in a&&a[f]!==e[f]&&!u.contains(b,f)&&b.push(f)}var g=this,h=g._,i=Array.prototype,j=Object.prototype,k=Function.prototype,l=i.push,m=i.slice,n=j.toString,o=j.hasOwnProperty,p=Array.isArray,q=Object.keys,r=k.bind,s=Object.create,t=function(){},u=function(a){return a instanceof u?a:this instanceof u?void(this._wrapped=a):new u(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=u),c._=u):g._=u,u.VERSION="1.8.3";var v=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){return null==a?u.identity:u.isFunction(a)?v(a,b,c):u.isObject(a)?u.matcher(a):u.property(a)};u.iteratee=function(a,b){return w(a,b,1/0)};var x=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},y=function(a){if(!u.isObject(a))return{};if(s)return s(a);t.prototype=a;var b=new t;return t.prototype=null,b},z=function(a){return function(b){return null==b?void 0:b[a]}},A=Math.pow(2,53)-1,B=z("length"),C=function(a){var b=B(a);return"number"==typeof b&&b>=0&&A>=b};u.each=u.forEach=function(a,b,c){b=v(b,c);var d,e;if(C(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=u.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},u.map=u.collect=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},u.reduce=u.foldl=u.inject=a(1),u.reduceRight=u.foldr=a(-1),u.find=u.detect=function(a,b,c){var d;return d=C(a)?u.findIndex(a,b,c):u.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},u.filter=u.select=function(a,b,c){var d=[];return b=w(b,c),u.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},u.reject=function(a,b,c){return u.filter(a,u.negate(w(b)),c)},u.every=u.all=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},u.some=u.any=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},u.contains=u.includes=u.include=function(a,b,c,d){return C(a)||(a=u.values(a)),("number"!=typeof c||d)&&(c=0),u.indexOf(a,b,c)>=0},u.invoke=function(a,b){var c=m.call(arguments,2),d=u.isFunction(b);return u.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},u.pluck=function(a,b){return u.map(a,u.property(b))},u.where=function(a,b){return u.filter(a,u.matcher(b))},u.findWhere=function(a,b){return u.find(a,u.matcher(b))},u.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},u.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},u.shuffle=function(a){for(var b,c=C(a)?a:u.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=u.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},u.sample=function(a,b,c){return null==b||c?(C(a)||(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,Math.max(0,b))},u.sortBy=function(a,b,c){return b=w(b,c),u.pluck(u.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=w(c,d),u.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};u.groupBy=D(function(a,b,c){u.has(a,c)?a[c].push(b):a[c]=[b]}),u.indexBy=D(function(a,b,c){a[c]=b}),u.countBy=D(function(a,b,c){u.has(a,c)?a[c]++:a[c]=1}),u.toArray=function(a){return a?u.isArray(a)?m.call(a):C(a)?u.map(a,u.identity):u.values(a):[]},u.size=function(a){return null==a?0:C(a)?a.length:u.keys(a).length},u.partition=function(a,b,c){b=w(b,c);var d=[],e=[];return u.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},u.first=u.head=u.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:u.initial(a,a.length-b)},u.initial=function(a,b,c){return m.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},u.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:u.rest(a,Math.max(0,a.length-b))},u.rest=u.tail=u.drop=function(a,b,c){return m.call(a,null==b||c?1:b)},u.compact=function(a){return u.filter(a,u.identity)};var E=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=B(a);h>g;g++){var i=a[g];if(C(i)&&(u.isArray(i)||u.isArguments(i))){b||(i=E(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};u.flatten=function(a,b){return E(a,b,!1)},u.without=function(a){return u.difference(a,m.call(arguments,1))},u.uniq=u.unique=function(a,b,c,d){u.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=w(c,d));for(var e=[],f=[],g=0,h=B(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?u.contains(f,j)||(f.push(j),e.push(i)):u.contains(e,i)||e.push(i)}return e},u.union=function(){return u.uniq(E(arguments,!0,!0))},u.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=B(a);e>d;d++){var f=a[d];if(!u.contains(b,f)){for(var g=1;c>g&&u.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},u.difference=function(a){var b=E(arguments,!0,!0,1);return u.filter(a,function(a){return!u.contains(b,a)})},u.zip=function(){return u.unzip(arguments)},u.unzip=function(a){for(var b=a&&u.max(a,B).length||0,c=Array(b),d=0;b>d;d++)c[d]=u.pluck(a,d);return c},u.object=function(a,b){for(var c={},d=0,e=B(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},u.findIndex=d(1),u.findLastIndex=d(-1),u.sortedIndex=function(a,b,c,d){c=w(c,d,1);for(var e=c(b),f=0,g=B(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},u.indexOf=e(1,u.findIndex,u.sortedIndex),u.lastIndexOf=e(-1,u.findLastIndex),u.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var F=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=y(a.prototype),g=a.apply(f,e);return u.isObject(g)?g:f};u.bind=function(a,b){if(r&&a.bind===r)return r.apply(a,m.call(arguments,1));if(!u.isFunction(a))throw new TypeError("Bind must be called on a function");var c=m.call(arguments,2),d=function(){return F(a,d,b,this,c.concat(m.call(arguments)))};return d},u.partial=function(a){var b=m.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===u?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return F(a,c,this,this,f)};return c},u.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=u.bind(a[c],a);return a},u.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return u.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},u.delay=function(a,b){var c=m.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},u.defer=u.partial(u.delay,u,1),u.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:u.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=u.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},u.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=u.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=u.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},u.wrap=function(a,b){return u.partial(b,a)},u.negate=function(a){return function(){return!a.apply(this,arguments)}},u.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},u.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},u.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},u.once=u.partial(u.before,2);var G=!{toString:null}.propertyIsEnumerable("toString"),H=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];u.keys=function(a){if(!u.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)u.has(a,c)&&b.push(c);return G&&f(a,b),b},u.allKeys=function(a){if(!u.isObject(a))return[];var b=[];for(var c in a)b.push(c);return G&&f(a,b),b},u.values=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},u.mapObject=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},u.pairs=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},u.invert=function(a){for(var b={},c=u.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},u.functions=u.methods=function(a){var b=[];for(var c in a)u.isFunction(a[c])&&b.push(c);return b.sort()},u.extend=x(u.allKeys),u.extendOwn=u.assign=x(u.keys),u.findKey=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},u.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;u.isFunction(b)?(e=u.allKeys(g),d=v(b,c)):(e=E(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},u.omit=function(a,b,c){if(u.isFunction(b))b=u.negate(b);else{var d=u.map(E(arguments,!1,!1,1),String);b=function(a,b){return!u.contains(d,b)}}return u.pick(a,b,c)},u.defaults=x(u.allKeys,!0),u.create=function(a,b){var c=y(a);return b&&u.extendOwn(c,b),c},u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a},u.tap=function(a,b){return b(a),a},u.isMatch=function(a,b){var c=u.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof u&&(a=a._wrapped),b instanceof u&&(b=b._wrapped);var e=n.call(a);if(e!==n.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(u.isFunction(g)&&g instanceof g&&u.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!I(a[i],b[i],c,d))return!1}else{var j,k=u.keys(a);if(i=k.length,u.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!u.has(b,j)||!I(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};u.isEqual=function(a,b){return I(a,b)},u.isEmpty=function(a){return null==a?!0:C(a)&&(u.isArray(a)||u.isString(a)||u.isArguments(a))?0===a.length:0===u.keys(a).length},u.isElement=function(a){return!(!a||1!==a.nodeType)},u.isArray=p||function(a){return"[object Array]"===n.call(a)},u.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},u.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){u["is"+a]=function(b){return n.call(b)==="[object "+a+"]"}}),u.isArguments(arguments)||(u.isArguments=function(a){return u.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(u.isFunction=function(a){return"function"==typeof a||!1}),u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},u.isNaN=function(a){return u.isNumber(a)&&a!==+a},u.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===n.call(a)},u.isNull=function(a){return null===a},u.isUndefined=function(a){return void 0===a},u.has=function(a,b){return null!=a&&o.call(a,b)},u.noConflict=function(){return g._=h,this},u.identity=function(a){return a},u.constant=function(a){return function(){return a}},u.noop=function(){},u.property=z,u.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},u.matcher=u.matches=function(a){return a=u.extendOwn({},a),function(b){return u.isMatch(b,a)}},u.times=function(a,b,c){var d=Array(Math.max(0,a));b=v(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},u.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},u.now=Date.now||function(){return(new Date).getTime()};var J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=u.invert(J),L=function(a){var b=function(b){return a[b]},c="(?:"+u.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};u.escape=L(J),u.unescape=L(K),u.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),u.isFunction(d)?d.call(a):d};var M=0;u.uniqueId=function(a){var b=++M+"";return a?a+b:b},u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(a){return"\\"+O[a]};u.template=function(a,b,c){!b&&c&&(b=c),b=u.defaults({},b,u.templateSettings);var d=RegExp([(b.escape||N).source,(b.interpolate||N).source,(b.evaluate||N).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(P,Q),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,u)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},u.chain=function(a){var b=u(a);return b._chain=!0,b};var R=function(a,b){return a._chain?u(b).chain():b};u.mixin=function(a){u.each(u.functions(a),function(b){var c=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];return l.apply(a,arguments),R(this,c.apply(u,a))}})},u.mixin(u),u.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=i[a];u.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],R(this,c)}}),u.each(["concat","join","slice"],function(a){var b=i[a];u.prototype[a]=function(){return R(this,b.apply(this._wrapped,arguments))}}),u.prototype.value=function(){return this._wrapped},u.prototype.valueOf=u.prototype.toJSON=u.prototype.value,u.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return u})}).call(this)},{}]},{},[31]);