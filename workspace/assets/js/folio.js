require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(a,c,d){function e(a){var b,c,d,e=a[0]/255,f=a[1]/255,g=a[2]/255,h=Math.min(e,f,g),i=Math.max(e,f,g),j=i-h;return i==h?b=0:e==i?b=(f-g)/j:f==i?b=2+(g-e)/j:g==i&&(b=4+(e-f)/j),b=Math.min(60*b,360),0>b&&(b+=360),d=(h+i)/2,c=i==h?0:.5>=d?j/(i+h):j/(2-i-h),[b,100*c,100*d]}function f(a){var b,c,d,e=a[0],f=a[1],g=a[2],h=Math.min(e,f,g),i=Math.max(e,f,g),j=i-h;return c=0==i?0:j/i*1e3/10,i==h?b=0:e==i?b=(f-g)/j:f==i?b=2+(g-e)/j:g==i&&(b=4+(e-f)/j),b=Math.min(60*b,360),0>b&&(b+=360),d=i/255*1e3/10,[b,c,d]}function h(a){var b=a[0],c=a[1],d=a[2],f=e(a)[0],g=1/255*Math.min(b,Math.min(c,d)),d=1-1/255*Math.max(b,Math.max(c,d));return[f,100*g,100*d]}function i(a){var b,c,d,e,f=a[0]/255,g=a[1]/255,h=a[2]/255;return e=Math.min(1-f,1-g,1-h),b=(1-f-e)/(1-e)||0,c=(1-g-e)/(1-e)||0,d=(1-h-e)/(1-e)||0,[100*b,100*c,100*d,100*e]}function j(a){return Z[JSON.stringify(a)]}function k(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255;b=b>.04045?Math.pow((b+.055)/1.055,2.4):b/12.92,c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92;var e=.4124*b+.3576*c+.1805*d,f=.2126*b+.7152*c+.0722*d,g=.0193*b+.1192*c+.9505*d;return[100*e,100*f,100*g]}function l(a){var b,c,d,e=k(a),f=e[0],g=e[1],h=e[2];return f/=95.047,g/=100,h/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,b=116*g-16,c=500*(f-g),d=200*(g-h),[b,c,d]}function m(a){return M(l(a))}function n(a){var b,c,d,e,f,g=a[0]/360,h=a[1]/100,i=a[2]/100;if(0==h)return f=255*i,[f,f,f];c=.5>i?i*(1+h):i+h-i*h,b=2*i-c,e=[0,0,0];for(var j=0;3>j;j++)d=g+1/3*-(j-1),0>d&&d++,d>1&&d--,f=1>6*d?b+6*(c-b)*d:1>2*d?c:2>3*d?b+(c-b)*(2/3-d)*6:b,e[j]=255*f;return e}function o(a){var b,c,d=a[0],e=a[1]/100,f=a[2]/100;return 0===f?[0,0,0]:(f*=2,e*=1>=f?f:2-f,c=(f+e)/2,b=2*e/(f+e),[d,100*b,100*c])}function p(a){return h(n(a))}function q(a){return i(n(a))}function s(a){return j(n(a))}function t(a){var b=a[0]/60,c=a[1]/100,d=a[2]/100,e=Math.floor(b)%6,f=b-Math.floor(b),g=255*d*(1-c),h=255*d*(1-c*f),i=255*d*(1-c*(1-f)),d=255*d;switch(e){case 0:return[d,i,g];case 1:return[h,d,g];case 2:return[g,d,i];case 3:return[g,h,d];case 4:return[i,g,d];case 5:return[d,g,h]}}function u(a){var b,c,d=a[0],e=a[1]/100,f=a[2]/100;return c=(2-e)*f,b=e*f,b/=1>=c?c:2-c,b=b||0,c/=2,[d,100*b,100*c]}function v(a){return h(t(a))}function w(a){return i(t(a))}function x(a){return j(t(a))}function y(a){var c,d,e,f,h=a[0]/360,i=a[1]/100,j=a[2]/100,k=i+j;switch(k>1&&(i/=k,j/=k),c=Math.floor(6*h),d=1-j,e=6*h-c,0!=(1&c)&&(e=1-e),f=i+e*(d-i),c){default:case 6:case 0:r=d,g=f,b=i;break;case 1:r=f,g=d,b=i;break;case 2:r=i,g=d,b=f;break;case 3:r=i,g=f,b=d;break;case 4:r=f,g=i,b=d;break;case 5:r=d,g=i,b=f}return[255*r,255*g,255*b]}function z(a){return e(y(a))}function A(a){return f(y(a))}function B(a){return i(y(a))}function C(a){return j(y(a))}function D(a){var b,c,d,e=a[0]/100,f=a[1]/100,g=a[2]/100,h=a[3]/100;return b=1-Math.min(1,e*(1-h)+h),c=1-Math.min(1,f*(1-h)+h),d=1-Math.min(1,g*(1-h)+h),[255*b,255*c,255*d]}function E(a){return e(D(a))}function F(a){return f(D(a))}function G(a){return h(D(a))}function H(a){return j(D(a))}function I(a){var b,c,d,e=a[0]/100,f=a[1]/100,g=a[2]/100;return b=3.2406*e+-1.5372*f+g*-.4986,c=e*-.9689+1.8758*f+.0415*g,d=.0557*e+f*-.204+1.057*g,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b=12.92*b,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=12.92*c,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:d=12.92*d,b=Math.min(Math.max(0,b),1),c=Math.min(Math.max(0,c),1),d=Math.min(Math.max(0,d),1),[255*b,255*c,255*d]}function J(a){var b,c,d,e=a[0],f=a[1],g=a[2];return e/=95.047,f/=100,g/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,b=116*f-16,c=500*(e-f),d=200*(f-g),[b,c,d]}function K(a){return M(J(a))}function L(a){var b,c,d,e,f=a[0],g=a[1],h=a[2];return 8>=f?(c=100*f/903.3,e=7.787*(c/100)+16/116):(c=100*Math.pow((f+16)/116,3),e=Math.pow(c/100,1/3)),b=.008856>=b/95.047?b=95.047*(g/500+e-16/116)/7.787:95.047*Math.pow(g/500+e,3),d=.008859>=d/108.883?d=108.883*(e-h/200-16/116)/7.787:108.883*Math.pow(e-h/200,3),[b,c,d]}function M(a){var b,c,d,e=a[0],f=a[1],g=a[2];return b=Math.atan2(g,f),c=360*b/2/Math.PI,0>c&&(c+=360),d=Math.sqrt(f*f+g*g),[e,d,c]}function N(a){return I(L(a))}function O(a){var b,c,d,e=a[0],f=a[1],g=a[2];return d=g/360*2*Math.PI,b=f*Math.cos(d),c=f*Math.sin(d),[e,b,c]}function P(a){return L(O(a))}function Q(a){return N(O(a))}function R(a){return Y[a]}function S(a){return e(R(a))}function T(a){return f(R(a))}function U(a){return h(R(a))}function V(a){return i(R(a))}function W(a){return l(R(a))}function X(a){return k(R(a))}c.exports={rgb2hsl:e,rgb2hsv:f,rgb2hwb:h,rgb2cmyk:i,rgb2keyword:j,rgb2xyz:k,rgb2lab:l,rgb2lch:m,hsl2rgb:n,hsl2hsv:o,hsl2hwb:p,hsl2cmyk:q,hsl2keyword:s,hsv2rgb:t,hsv2hsl:u,hsv2hwb:v,hsv2cmyk:w,hsv2keyword:x,hwb2rgb:y,hwb2hsl:z,hwb2hsv:A,hwb2cmyk:B,hwb2keyword:C,cmyk2rgb:D,cmyk2hsl:E,cmyk2hsv:F,cmyk2hwb:G,cmyk2keyword:H,keyword2rgb:R,keyword2hsl:S,keyword2hsv:T,keyword2hwb:U,keyword2cmyk:V,keyword2lab:W,keyword2xyz:X,xyz2rgb:I,xyz2lab:J,xyz2lch:K,lab2xyz:L,lab2rgb:N,lab2lch:M,lch2lab:O,lch2xyz:P,lch2rgb:Q};var Y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Z={};for(var $ in Y)Z[JSON.stringify(Y[$])]=$},{}],3:[function(a,b,c){var d=a("./conversions"),e=function(){return new j};for(var f in d){e[f+"Raw"]=function(a){return function(b){return"number"==typeof b&&(b=Array.prototype.slice.call(arguments)),d[a](b)}}(f);var g=/(\w+)2(\w+)/.exec(f),h=g[1],i=g[2];e[h]=e[h]||{},e[h][i]=e[f]=function(a){return function(b){"number"==typeof b&&(b=Array.prototype.slice.call(arguments));var c=d[a](b);if("string"==typeof c||void 0===c)return c;for(var e=0;e<c.length;e++)c[e]=Math.round(c[e]);return c}}(f)}var j=function(){this.convs={}};j.prototype.routeSpace=function(a,b){var c=b[0];return void 0===c?this.getValues(a):("number"==typeof c&&(c=Array.prototype.slice.call(b)),this.setValues(a,c))},j.prototype.setValues=function(a,b){return this.space=a,this.convs={},this.convs[a]=b,this},j.prototype.getValues=function(a){var b=this.convs[a];if(!b){var c=this.space,d=this.convs[c];b=e[c][a](d),this.convs[a]=b}return b},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(a){j.prototype[a]=function(b){return this.routeSpace(a,arguments)}}),b.exports=e},{"./conversions":2}],4:[function(a,b,c){function d(a){if(a){var b=/^#([a-fA-F0-9]{3})$/,c=/^#([a-fA-F0-9]{6})$/,d=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,e=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,f=/(\D+)/,g=[0,0,0],h=1,i=a.match(b);if(i){i=i[1];for(var j=0;j<g.length;j++)g[j]=parseInt(i[j]+i[j],16)}else if(i=a.match(c)){i=i[1];for(var j=0;j<g.length;j++)g[j]=parseInt(i.slice(2*j,2*j+2),16)}else if(i=a.match(d)){for(var j=0;j<g.length;j++)g[j]=parseInt(i[j+1]);h=parseFloat(i[4])}else if(i=a.match(e)){for(var j=0;j<g.length;j++)g[j]=Math.round(2.55*parseFloat(i[j+1]));h=parseFloat(i[4])}else if(i=a.match(f)){if("transparent"==i[1])return[0,0,0,0];if(g=u[i[1]],!g)return}for(var j=0;j<g.length;j++)g[j]=s(g[j],0,255);return h=h||0==h?s(h,0,1):1,g[3]=h,g}}function e(a){if(a){var b=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=a.match(b);if(c){var d=parseFloat(c[4]),e=s(parseInt(c[1]),0,360),f=s(parseFloat(c[2]),0,100),g=s(parseFloat(c[3]),0,100),h=s(isNaN(d)?1:d,0,1);return[e,f,g,h]}}}function f(a){if(a){var b=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=a.match(b);if(c){var d=parseFloat(c[4]),e=s(parseInt(c[1]),0,360),f=s(parseFloat(c[2]),0,100),g=s(parseFloat(c[3]),0,100),h=s(isNaN(d)?1:d,0,1);return[e,f,g,h]}}}function g(a){var b=d(a);return b&&b.slice(0,3)}function h(a){var b=e(a);return b&&b.slice(0,3)}function i(a){var b=d(a);return b?b[3]:(b=e(a))?b[3]:(b=f(a))?b[3]:void 0}function j(a){return"#"+t(a[0])+t(a[1])+t(a[2])}function k(a,b){return 1>b||a[3]&&a[3]<1?l(a,b):"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function l(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+b+")"}function m(a,b){if(1>b||a[3]&&a[3]<1)return n(a,b);var c=Math.round(a[0]/255*100),d=Math.round(a[1]/255*100),e=Math.round(a[2]/255*100);return"rgb("+c+"%, "+d+"%, "+e+"%)"}function n(a,b){var c=Math.round(a[0]/255*100),d=Math.round(a[1]/255*100),e=Math.round(a[2]/255*100);return"rgba("+c+"%, "+d+"%, "+e+"%, "+(b||a[3]||1)+")"}function o(a,b){return 1>b||a[3]&&a[3]<1?p(a,b):"hsl("+a[0]+", "+a[1]+"%, "+a[2]+"%)"}function p(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"hsla("+a[0]+", "+a[1]+"%, "+a[2]+"%, "+b+")"}function q(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"hwb("+a[0]+", "+a[1]+"%, "+a[2]+"%"+(void 0!==b&&1!==b?", "+b:"")+")"}function r(a){return v[a.slice(0,3)]}function s(a,b,c){return Math.min(Math.max(b,a),c)}function t(a){var b=a.toString(16).toUpperCase();return b.length<2?"0"+b:b}var u=a("color-name");b.exports={getRgba:d,getHsla:e,getRgb:g,getHsl:h,getHwb:f,getAlpha:i,hexString:j,rgbString:k,rgbaString:l,percentString:m,percentaString:n,hslString:o,hslaString:p,hwbString:q,keyword:r};var v={};for(var w in u)v[u[w]]=w},{"color-name":5}],5:[function(a,b,c){b.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j["default"],a.Exception=l["default"],a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}c.__esModule=!0;var g=a("./handlebars/base"),h=e(g),i=a("./handlebars/safe-string"),j=d(i),k=a("./handlebars/exception"),l=d(k),m=a("./handlebars/utils"),n=e(m),o=a("./handlebars/runtime"),p=e(o),q=a("./handlebars/no-conflict"),r=d(q),s=f();s.create=f,r["default"](s),s["default"]=s,c["default"]=s,b.exports=c["default"]},{"./handlebars/base":7,"./handlebars/exception":10,"./handlebars/no-conflict":20,"./handlebars/runtime":21,"./handlebars/safe-string":22,"./handlebars/utils":23}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}c.__esModule=!0,c.HandlebarsEnvironment=e;var f=a("./utils"),g=a("./exception"),h=d(g),i=a("./helpers"),j=a("./decorators"),k=a("./logger"),l=d(k),m="4.0.5";c.VERSION=m;var n=7;c.COMPILER_REVISION=n;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};c.REVISION_CHANGES=o;var p="[object Object]";e.prototype={constructor:e,logger:l["default"],log:l["default"].log,registerHelper:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===p)f.extend(this.partials,a);else{if("undefined"==typeof b)throw new h["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};var q=l["default"].log;c.log=q,c.createFrame=f.createFrame,c.logger=l["default"]},{"./decorators":8,"./exception":10,"./helpers":11,"./logger":19,"./utils":23}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){g["default"](a)}c.__esModule=!0,c.registerDefaultDecorators=e;var f=a("./decorators/inline"),g=d(f)},{"./decorators/inline":9}],9:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},b.exports=c["default"]},{"../utils":23}],10:[function(a,b,c){"use strict";function d(a,b){var c=b&&b.loc,f=void 0,g=void 0;c&&(f=c.start.line,g=c.start.column,a+=" - "+f+":"+g);for(var h=Error.prototype.constructor.call(this,a),i=0;i<e.length;i++)this[e[i]]=h[e[i]];Error.captureStackTrace&&Error.captureStackTrace(this,d),c&&(this.lineNumber=f,this.column=g)}c.__esModule=!0;var e=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,c["default"]=d,b.exports=c["default"]},{}],11:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){g["default"](a),i["default"](a),k["default"](a),m["default"](a),o["default"](a),q["default"](a),s["default"](a)}c.__esModule=!0,c.registerDefaultHelpers=e;var f=a("./helpers/block-helper-missing"),g=d(f),h=a("./helpers/each"),i=d(h),j=a("./helpers/helper-missing"),k=d(j),l=a("./helpers/if"),m=d(l),n=a("./helpers/log"),o=d(n),p=a("./helpers/lookup"),q=d(p),r=a("./helpers/with"),s=d(r)},{"./helpers/block-helper-missing":12,"./helpers/each":13,"./helpers/helper-missing":14,"./helpers/if":15,"./helpers/log":16,"./helpers/lookup":17,"./helpers/with":18}],12:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;if(b===!0)return f(this);if(b===!1||null==b)return e(this);if(d.isArray(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):e(this);if(c.data&&c.ids){var g=d.createFrame(c.data);g.contextPath=d.appendContextPath(c.data.contextPath,c.name),c={data:g}}return f(b,c)})},b.exports=c["default"]},{"../utils":23}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("../utils"),f=a("../exception"),g=d(f);c["default"]=function(a){a.registerHelper("each",function(a,b){function c(b,c,f){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!f,k&&(j.contextPath=k+b)),i+=d(a[b],{data:j,blockParams:e.blockParams([a[b],b],[k+b,null])})}if(!b)throw new g["default"]("Must pass iterator to #each");var d=b.fn,f=b.inverse,h=0,i="",j=void 0,k=void 0;if(b.data&&b.ids&&(k=e.appendContextPath(b.data.contextPath,b.ids[0])+"."),e.isFunction(a)&&(a=a.call(this)),b.data&&(j=e.createFrame(b.data)),a&&"object"==typeof a)if(e.isArray(a))for(var l=a.length;l>h;h++)h in a&&c(h,h,h===a.length-1);else{var m=void 0;for(var n in a)a.hasOwnProperty(n)&&(void 0!==m&&c(m,h-1),m=n,h++);void 0!==m&&c(m,h-1,!0)}return 0===h&&(i=f(this)),i})},b.exports=c["default"]},{"../exception":10,"../utils":23}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("../exception"),f=d(e);c["default"]=function(a){a.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new f["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},b.exports=c["default"]},{"../exception":10}],15:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerHelper("if",function(a,b){return d.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},b.exports=c["default"]},{"../utils":23}],16:[function(a,b,c){"use strict";c.__esModule=!0,c["default"]=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},b.exports=c["default"]},{}],17:[function(a,b,c){"use strict";c.__esModule=!0,c["default"]=function(a){a.registerHelper("lookup",function(a,b){return a&&a[b]})},b.exports=c["default"]},{}],18:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../utils");c["default"]=function(a){a.registerHelper("with",function(a,b){d.isFunction(a)&&(a=a.call(this));var c=b.fn;if(d.isEmpty(a))return b.inverse(this);var e=b.data;return b.data&&b.ids&&(e=d.createFrame(b.data),e.contextPath=d.appendContextPath(b.data.contextPath,b.ids[0])),c(a,{data:e,blockParams:d.blockParams([a],[e&&e.contextPath])})})},b.exports=c["default"]},{"../utils":23}],19:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("./utils"),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=b>=0?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;c>f;f++)d[f-1]=arguments[f];console[b].apply(console,d)}}};c["default"]=e,b.exports=c["default"]},{"./utils":23}],20:[function(a,b,c){(function(a){"use strict";c.__esModule=!0,c["default"]=function(b){var c="undefined"!=typeof a?a:window,d=c.Handlebars;b.noConflict=function(){return c.Handlebars===b&&(c.Handlebars=d),b}},b.exports=c["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a){var b=a&&a[0]||1,c=r.COMPILER_REVISION;if(b!==c){if(c>b){var d=r.REVISION_CHANGES[c],e=r.REVISION_CHANGES[b];throw new q["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new q["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function g(a,b){function c(c,d,e){e.hash&&(d=o.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;i>h&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new q["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(e,b,e.helpers,e.partials,g,i,h)}var f=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=f.data;d._setup(f),!f.partial&&a.useData&&(g=l(b,g));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=f.depths?b!==f.depths[0]?[b].concat(f.depths):f.depths:[b]),(c=m(a.main,c,e,f.depths||[],g,i))(b,f)}if(!b)throw new q["default"]("No environment passed to template");if(!a||!a.main)throw new q["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new q["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:o.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var f=this.programs[a],g=this.fn(a);return b||e||d||c?f=h(this,a,g,b,c,d,e):f||(f=this.programs[a]=h(this,a,g)),f},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=o.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials,e.decorators=c.decorators):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(e.decorators=e.merge(c.decorators,b.decorators)))},d._child=function(b,c,d,f){if(a.useBlockParams&&!d)throw new q["default"]("must pass block params");if(a.useDepths&&!f)throw new q["default"]("must pass parent depths");return h(e,b,a[b],c,0,d,f)},d}function h(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return g&&b!==g[0]&&(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=m(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function i(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function j(a,b,c){c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var d=void 0;if(c.fn&&c.fn!==k&&(c.data=r.createFrame(c.data),d=c.data["partial-block"]=c.fn,d.partials&&(c.partials=o.extend({},c.partials,d.partials))),void 0===a&&d&&(a=d),void 0===a)throw new q["default"]("The partial "+c.name+" could not be found");return a instanceof Function?a(b,c):void 0}function k(){return""}function l(a,b){return b&&"root"in b||(b=b?r.createFrame(b):{},b.root=a),b}function m(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),o.extend(b,g)}return b}c.__esModule=!0,c.checkRevision=f,c.template=g,c.wrapProgram=h,c.resolvePartial=i,c.invokePartial=j,c.noop=k;var n=a("./utils"),o=e(n),p=a("./exception"),q=d(p),r=a("./base")},{"./base":7,"./exception":10,"./utils":23}],22:[function(a,b,c){"use strict";function d(a){this.string=a}c.__esModule=!0,d.prototype.toString=d.prototype.toHTML=function(){return""+this.string},c["default"]=d,b.exports=c["default"]},{}],23:[function(a,b,c){"use strict";function d(a){return l[a]}function e(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function f(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function g(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return n.test(a)?a.replace(m,d):a}function h(a){return a||0===a?q(a)&&0===a.length?!0:!1:!0}function i(a){var b=e({},a);return b._parent=a,b}function j(a,b){return a.path=b,a}function k(a,b){return(a?a+".":"")+b}c.__esModule=!0,c.extend=e,c.indexOf=f,c.escapeExpression=g,c.isEmpty=h,c.createFrame=i,c.blockParams=j,c.appendContextPath=k;var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},m=/[&<>"'`=]/g,n=/[&<>"'`=]/,o=Object.prototype.toString;c.toString=o;var p=function(a){return"function"==typeof a};p(/x/)&&(c.isFunction=p=function(a){return"function"==typeof a&&"[object Function]"===o.call(a)}),c.isFunction=p;var q=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===o.call(a):!1};c.isArray=q},{}],24:[function(a,b,c){b.exports=a("./dist/cjs/handlebars.runtime")["default"]},{"./dist/cjs/handlebars.runtime":6}],25:[function(a,b,c){b.exports=a("handlebars/runtime")["default"]},{"handlebars/runtime":24}],26:[function(a,b,c){(function(a,b){!function(b,c){"use strict";function d(a){"function"!=typeof a&&(a=new Function(""+a));for(var b=new Array(arguments.length-1),c=0;c<b.length;c++)b[c]=arguments[c+1];var d={callback:a,args:b};return p[o]=d,n(o),o++}function e(a){delete p[a]}function f(a){var b=a.callback,d=a.args;switch(d.length){case 0:b();break;case 1:b(d[0]);break;case 2:
b(d[0],d[1]);break;case 3:b(d[0],d[1],d[2]);break;default:b.apply(c,d)}}function g(a){if(q)setTimeout(g,0,a);else{var b=p[a];if(b){q=!0;try{f(b)}finally{e(a),q=!1}}}}function h(){n=function(b){a.nextTick(function(){g(b)})}}function i(){if(b.postMessage&&!b.importScripts){var a=!0,c=b.onmessage;return b.onmessage=function(){a=!1},b.postMessage("","*"),b.onmessage=c,a}}function j(){var a="setImmediate$"+Math.random()+"$",c=function(c){c.source===b&&"string"==typeof c.data&&0===c.data.indexOf(a)&&g(+c.data.slice(a.length))};b.addEventListener?b.addEventListener("message",c,!1):b.attachEvent("onmessage",c),n=function(c){b.postMessage(a+c,"*")}}function k(){var a=new MessageChannel;a.port1.onmessage=function(a){var b=a.data;g(b)},n=function(b){a.port2.postMessage(b)}}function l(){var a=r.documentElement;n=function(b){var c=r.createElement("script");c.onreadystatechange=function(){g(b),c.onreadystatechange=null,a.removeChild(c),c=null},a.appendChild(c)}}function m(){n=function(a){setTimeout(g,0,a)}}if(!b.setImmediate){var n,o=1,p={},q=!1,r=b.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(b);s=s&&s.setTimeout?s:b,"[object process]"==={}.toString.call(b.process)?h():i()?j():b.MessageChannel?k():r&&"onreadystatechange"in r.createElement("script")?l():m(),s.setImmediate=d,s.clearImmediate=e}}("undefined"==typeof self?"undefined"==typeof b?this:b:self)}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],27:[function(a,b,c){var d=a("./trim"),e=a("./decapitalize");b.exports=function(a,b){return a=d(a).replace(/[-_\s]+(.)?/g,function(a,b){return b?b.toUpperCase():""}),b===!0?e(a):a}},{"./decapitalize":30,"./trim":38}],28:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a,b){a=d(a);var c=b?a.slice(1).toLowerCase():a.slice(1);return a.charAt(0).toUpperCase()+c}},{"./helper/makeString":33}],29:[function(a,b,c){var d=a("./capitalize"),e=a("./camelize"),f=a("./helper/makeString");b.exports=function(a){return a=f(a),d(e(a.replace(/[\W_]/g," ")).replace(/\s/g,""))}},{"./camelize":27,"./capitalize":28,"./helper/makeString":33}],30:[function(a,b,c){var d=a("./helper/makeString");b.exports=function(a){return a=d(a),a.charAt(0).toLowerCase()+a.slice(1)}},{"./helper/makeString":33}],31:[function(a,b,c){var d=a("./escapeRegExp");b.exports=function(a){return null==a?"\\s":a.source?a.source:"["+d(a)+"]"}},{"./escapeRegExp":32}],32:[function(a,b,c){var d=a("./makeString");b.exports=function(a){return d(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":33}],33:[function(a,b,c){b.exports=function(a){return null==a?"":""+a}},{}],34:[function(a,b,c){b.exports=function(a,b){if(1>b)return"";for(var c="";b>0;)1&b&&(c+=a),b>>=1,a+=a;return c}},{}],35:[function(a,b,c){var d=a("./pad");b.exports=function(a,b,c){return d(a,b,c)}},{"./pad":36}],36:[function(a,b,c){var d=a("./helper/makeString"),e=a("./helper/strRepeat");b.exports=function(a,b,c,f){a=d(a),b=~~b;var g=0;switch(c?c.length>1&&(c=c.charAt(0)):c=" ",f){case"right":return g=b-a.length,a+e(c,g);case"both":return g=b-a.length,e(c,Math.ceil(g/2))+a+e(c,Math.floor(g/2));default:return g=b-a.length,e(c,g)+a}}},{"./helper/makeString":33,"./helper/strRepeat":34}],37:[function(a,b,c){var d=a("./pad");b.exports=function(a,b,c){return d(a,b,c,"right")}},{"./pad":36}],38:[function(a,b,c){var d=a("./helper/makeString"),e=a("./helper/defaultToWhiteSpace"),f=String.prototype.trim;b.exports=function(a,b){return a=d(a),!b&&f?f.call(a):(b=e(b),a.replace(new RegExp("^"+b+"+|"+b+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":31,"./helper/makeString":33}],39:[function(a,b,c){"use strict";a("underscore");a("Modernizr"),a("es6-promise").polyfill(),a("classlist-polyfill"),a("raf-polyfill"),a("matches-polyfill"),a("fullscreen-polyfill"),a("math-sign-polyfill"),a("setimmediate"),window.addEventListener("load",function(b){var c=a("backbone");c.$=a("backbone.native"),a("backbone.babysitter"),a("Backbone.Mutators"),a("hammerjs");try{a("app/model/helper/bootstrap")(window.bootstrap)}finally{delete window.bootstrap}a("app/view/template/_helpers"),a("app/view/helper/createColorStyleSheet").call();var d=a("app/view/AppView"),e=a("webfontloader");e.load({async:!1,classes:!1,custom:{families:["Franklin Gothic FS:n4,i4,n7,i7","FolioFigures-Regular"],testStrings:{"FolioFigures-Regular":"hms"}},active:function(){d.getInstance()},fontactive:function(a,b){},inactive:function(){d.getInstance()},fontinactive:function(a,b){}})})},{"Backbone.Mutators":"Backbone.Mutators",Modernizr:"Modernizr","app/model/helper/bootstrap":49,"app/view/AppView":56,"app/view/helper/createColorStyleSheet":79,"app/view/template/_helpers":106,backbone:"backbone","backbone.babysitter":"backbone.babysitter","backbone.native":"backbone.native","classlist-polyfill":"classlist-polyfill","es6-promise":"es6-promise","fullscreen-polyfill":"fullscreen-polyfill",hammerjs:"hammerjs","matches-polyfill":"matches-polyfill","math-sign-polyfill":"math-sign-polyfill","raf-polyfill":"raf-polyfill",setimmediate:26,underscore:"underscore",webfontloader:"webfontloader"}],40:[function(a,b,c){var d=a("underscore"),e=a("backbone"),f=a("app/model/collection/ArticleCollection"),g=a("app/model/collection/BundleCollection"),h=e.Router.extend({initialize:function(a){this._routeNames=[],this.route(/(.*)/,"notfound",this.toNotFound),this.route(/^([a-z][a-z0-9\-]*)\/?$/,"article-item",this.toArticleItem),this.route(/^(?:bundles)?\/?$/,"root",this.toRoot),this.route(/^bundles\/([^\/]+)\/?$/,"bundle-item",this.toBundleItem),this.route(/^bundles\/([^\/]+)\/(\d+)\/?$/,"media-item",this.toMediaItem)},route:function(a,b,c){return this._routeNames.push(d.isString(b)?b:""),e.Router.prototype.route.apply(this,arguments)},selectMedia:function(a){this._goToLocation(a.get("bundle"),a)},selectBundle:function(a){this._goToLocation(a)},deselectMedia:function(){this._goToLocation(g.selected)},deselectBundle:function(){this._goToLocation()},selectArticle:function(a){this.navigate(a.get("handle"),{trigger:!0})},deselectArticle:function(){this.navigate("",{trigger:!0})},_updateLocation:function(){var a,b;a=g.selected,a&&(b=a.get("media").selected),this.navigate(this._getLocation(a,b),{trigger:!1})},_getLocation:function(a,b){var c,d=[];return a&&(d.push("bundles"),d.push(a.get("handle")),b&&(c=a.get("media").indexOf(b),c>=0&&d.push(c))),d.join("/")},_goToLocation:function(a,b){this.navigate(this._getLocation(a,b),{trigger:!0})},toRoot:function(){this.trigger("change:before"),g.selected&&(g.selected.get("media").deselect(),g.deselect()),f.deselect(),this.trigger("change:after")},toNotFound:function(a){},toBundleItem:function(a){var b=g.findWhere({handle:a});if(!b)throw new Error('Cannot find bundle with handle "'+a+'"');this._changeSelection(b)},toMediaItem:function(a,b){var c,d;if(c=g.findWhere({handle:a}),!c)throw new Error('No bundle with handle "'+a+'" found');if(d=c.get("media").at(b),!d)throw new Error("No media at index "+b+' in bundle with handle "'+a+'" found');this._changeSelection(c,d)},toArticleItem:function(a){var b=f.findWhere({handle:a});if(!b)throw new Error('Cannot find article with handle "'+a+'"');this.trigger("change:before",b),g.deselect(),f.select(b),this.trigger("change:after",b)},_changeSelection:function(a,b){var c,d;void 0===a&&(a=null),void 0===b&&(b=null),c=g.selected,d=c?c.get("media").selected:null,(f.selected||c!==a||d!==b)&&(this.trigger("change:before",a,b),a&&a.get("media").select(b),g.select(a),f.deselect(),this.trigger("change:after",a,b))}});b.exports=new h},{"app/model/collection/ArticleCollection":45,"app/model/collection/BundleCollection":46,backbone:"backbone",underscore:"underscore"}],41:[function(a,b,c){var d=a("underscore");b.exports=function(){var b,c,e,f={},g=a("../../../sass/variables.json");f.VPAN_DRAG=.95,f.HPAN_OUT_DRAG=.4,f.VPAN_OUT_DRAG=.1,f.PAN_THRESHOLD=15,f.COLLAPSE_THRESHOLD=75,f.COLLAPSE_OFFSET=parseInt(g.temp.collapse_offset),f.BREAKPOINTS={};for(c in g.breakpoints)f.BREAKPOINTS[c]=window.matchMedia(g.breakpoints[c]);f.LAYOUT_NAMES=d.clone(g.layout_names),f.DEFAULT_COLORS=d.clone(g.default_colors),f.HORIZONTAL_STEP=parseFloat(g.units.hu_px),f.VERTICAL_STEP=parseFloat(g.units.vu_px),f.APP_ROOT=window.approot,f.MEDIA_DIR=window.mediadir,delete window.approot,delete window.mediadir,f.FONT_METRICS={"Franklin Gothic FS":{unitsPerEm:1e3,ascent:827,descent:-173},ITCFranklinGothicStd:{unitsPerEm:1e3,ascent:686,descent:-314},FolioFigures:{unitsPerEm:1024,ascent:939,descent:-256}},f.PAUSE_CHAR=String.fromCharCode(9208),f.PLAY_CHAR=String.fromCharCode(9205),f.STOP_CHAR=String.fromCharCode(9209),f.TRANSLATE_TEMPLATE=function(a,b){return"translate("+a+"px, "+b+"px)"};var h=f.TRANSITION_EASE=g.transitions.ease,i=f.TRANSITION_DURATION=parseFloat(g.transitions.duration_ms),j=(f.TRANSITION_DELAY_INTERVAL=parseFloat(g.transitions.delay_interval_ms),f.TRANSITION_MIN_DELAY=parseFloat(g.transitions.min_delay_ms)),k=f.TRANSITION_DELAY=f.TRANSITION_DURATION+f.TRANSITION_DELAY_INTERVAL;b={},b.NONE={delay:0,duration:0,easing:"step-start"},b.NOW={delay:0,duration:i,easing:h},b.UNSET=d.defaults({cssText:""},b.NONE);var l=d.defaults({duration:i-j},b.NOW);b.FIRST=d.defaults({delay:0*k+j},l),b.BETWEEN=d.defaults({delay:1*k+j},l),b.LAST=d.defaults({delay:2*k+j},l),b.AFTER=d.defaults({delay:2*k+j},l),b.BETWEEN_EARLY=d.defaults({delay:1*k+j-60},l),b.BETWEEN_LATE=d.defaults({delay:1*k+j+60},l),b.FIRST_LATE=d.defaults({delay:.5*k+j},l),b.LAST_EARLY=d.defaults({delay:1.5*k+j},l);for(c in b)e=b[c],e.name=c,e.className="tx-"+c.replace("_","-").toLowerCase(),e.hasOwnProperty("cssText")||(e.cssText=e.duration/1e3+"s "+e.easing+" "+e.delay/1e3+"s");return f.transitions=b,f}()},{"../../../sass/variables.json":125,underscore:"underscore"}],42:[function(a,b,c){var d=a("backbone"),e={routeName:"initial",collapsed:!1,article:null,withArticle:!1,bundle:null,withBundle:!1,media:null,withMedia:!1},f=d.Model.extend({defaults:e});b.exports=f},{backbone:"backbone"}],43:[function(a,b,c){var d=a("backbone").Model,e=a("underscore"),f=(a("app/control/Globals"),a("utils/strings/stripTags"),function(a){return a.replace(/(\,|\;)/g,function(a){return","==a?";":","})}),g=function(a,b){if(e.isString(b)){var c=b.indexOf(":");c>0?a[b.substring(0,c)]=f(b.substring(c+1)):a[b]=b}return a},h={_domPrefix:"_",defaults:{get attrs(){return{}}},getters:["domid"],mutators:{domid:function(){return this._domId||(this._domId=this._domPrefix+this.id)},attrs:{set:function(a,b,c,d){Array.isArray(b)&&(b=b.reduce(g,{})),e.isObject(b)||(console.error("%s::attrs value not an object or string array",this.cid,b),b={}),d(a,b,c)}}},attr:function(a){return this.attrs()[a]},attrs:function(){return this.get("attrs")},toString:function(){return this.get("domid")}},i={extend:function(a,b){var c,f;for(f in a)a.hasOwnProperty(f)&&e.isObject(a[f])&&e.defaults(a[f],h[f]);return c=d.extend.apply(this,arguments),Array.isArray(c.prototype.getters)&&c.prototype.getters.forEach(function(a){Object.defineProperty(c.prototype,a,{enumerable:!0,get:function(){return this.get(a)}})}),c}};b.exports=i.extend.call(d,h,i)},{"app/control/Globals":41,backbone:"backbone",underscore:"underscore","utils/strings/stripTags":123}],44:[function(a,b,c){var d=a("underscore"),e=a("backbone"),f=e.Collection.extend({initialize:function(a,b){b=d.defaults({},b,{initialSelection:"none",silentInitial:!0}),this.initialSelection=b.initialSelection,this.initialOptions={silent:b.silentInitial}},reset:function(a,b){this.deselect(this.initialOptions),e.Collection.prototype.reset.apply(this,arguments),"first"===this.initialSelection&&this.length&&this.select(this.at(0),this.initialOptions)},select:function(a,b){if(void 0===a&&(a=null),this.selected!==a){var c=!(b&&b.silent),e=this.selected;this.lastSelected=this.selected,this.lastSelectedIndex=this.selectedIndex,this.selected=a,this.selectedIndex=this.indexOf(a),e?(d.isFunction(e.deselect)?e.deselect(b):c&&(e.selected=void 0,e.trigger("deselected",a,e)),c&&this.trigger("deselect:one",e)):c&&this.trigger("deselect:none",null),a?(d.isFunction(a.select)?a.select(b):c&&(a.selected=!0,a.trigger("selected",a,e)),c&&this.trigger("select:one",a)):c&&this.trigger("select:none",null)}},deselect:function(a){this.select(null,a)},selectAt:function(a,b){(0>a||a>=this.length)&&new RangeError("index is out of bounds"),this.select(this.at(a),b)},distance:function(a,b){var c,d;if(!a)return NaN;if(c=this.indexOf(a),-1==c)return NaN;if(1==arguments.length)d=this.selectedIndex;else{if(!b)return NaN;if(d=this.indexOf(b),-1==d)return NaN}return Math.abs(d-c)},hasFollowing:function(a){return a||(a=this.selected),this.indexOf(a)<this.length-1},following:function(a){return a||(a=this.selected),this.hasFollowing(a)?this.at(this.indexOf(a)+1):null},followingOrFirst:function(a){return a||(a=this.selected),this.at((this.indexOf(a)+1)%this.length)},hasPreceding:function(a){return a||(a=this.selected),this.indexOf(a)>0},preceding:function(a){return a||(a=this.selected),this.hasPreceding(a)?this.at(this.indexOf(a)-1):null},precedingOrLast:function(a){a||(a=this.selected);var b=this.indexOf(a)-1;return this.at(b>-1?b:this.length-1)}});b.exports=f},{backbone:"backbone",underscore:"underscore"}],45:[function(a,b,c){var d=a("app/model/SelectableCollection"),e=a("app/model/item/ArticleItem"),f=d.extend({model:e});b.exports=new f},{"app/model/SelectableCollection":44,"app/model/item/ArticleItem":50}],46:[function(a,b,c){var d=a("app/model/SelectableCollection"),e=a("app/model/item/BundleItem"),f=d.extend({model:e,comparator:function(a,b){var c=a.get("completed"),d=b.get("completed");return c>d?-1:d>c?1:0},url:"/json/bundles/"});b.exports=new f},{"app/model/SelectableCollection":44,"app/model/item/BundleItem":51}],47:[function(a,b,c){var d=a("app/model/SelectableCollection"),e=a("app/model/item/KeywordItem"),f=d.extend({model:e});b.exports=new f},{"app/model/SelectableCollection":44,"app/model/item/KeywordItem":52}],48:[function(a,b,c){var d=a("backbone"),e=a("app/model/item/TypeItem"),f=d.Collection.extend({model:e});b.exports=new f},{"app/model/item/TypeItem":55,backbone:"backbone"}],49:[function(a,b,c){var d=a("underscore"),e=a("app/model/collection/TypeCollection"),f=a("app/model/collection/KeywordCollection"),g=a("app/model/collection/BundleCollection"),h=a("app/model/collection/ArticleCollection");b.exports=function(a){var b=a["articles-all"],c=a["types-all"],i=a["keywords-all"],j=a["bundles-all"],k=a["media-all"],l=d.groupBy(k,"bId");j.forEach(function(a,b,c){a.tIds=[],a.media=l[a.id],i.forEach(function(c,d,e){0===b&&(c.bIds=[]),-1!=a.kIds.indexOf(c.id)&&(c.bIds.push(a.id),-1==a.tIds.indexOf(c.tId)&&a.tIds.push(c.tId))})}),h.reset(b),e.reset(c),f.reset(i),g.reset(j)}},{"app/model/collection/ArticleCollection":45,"app/model/collection/BundleCollection":46,"app/model/collection/KeywordCollection":47,"app/model/collection/TypeCollection":48,underscore:"underscore"}],50:[function(a,b,c){var d=a("app/model/BaseItem");b.exports=d.extend({_domPrefix:"a",defaults:{name:"",handle:"",text:""}})},{"app/model/BaseItem":43}],51:[function(a,b,c){var d=a("underscore"),e=a("color"),f=a("app/model/BaseItem"),g=a("app/model/item/MediaItem"),h=a("app/model/SelectableCollection"),i=a("app/control/Globals"),j=a("utils/strings/stripTags"),k=d.defaults({"has-colors":"defaults"},i.DEFAULT_COLORS),l=h.extend({model:g,comparator:"o"});b.exports=f.extend({_domPrefix:"b",defaults:{name:"",handle:"",desc:"",completed:0,get kIds(){return[]}},getters:["name","media"],mutators:{text:function(){return j(this.get("desc"))},media:{"transient":!0,set:function(a,b,c,d){Array.isArray(b)&&(b.forEach(function(a){a.bundle=this},this),b=new l(b)),d(a,b,c)}}},initialize:function(a,b){this.colors={fgColor:new e(this.attr("color")),bgColor:new e(this.attr("background-color")),lnColor:new e(this.attr("--link-color"))},this.colors.hasDarkBg=this.colors.fgColor.luminosity()>this.colors.bgColor.luminosity()},attrs:function(){return this._attrs||(this._attrs=d.defaults({},this.get("attrs"),k))}})},{"app/control/Globals":41,"app/model/BaseItem":43,"app/model/SelectableCollection":44,"app/model/item/MediaItem":53,color:"color",underscore:"underscore","utils/strings/stripTags":123}],52:[function(a,b,c){var d=a("app/model/BaseItem");b.exports=d.extend({_domPrefix:"k",defaults:{name:"",handle:"",tId:-1}})},{"app/model/BaseItem":43}],53:[function(a,b,c){var d=a("underscore"),e=a("color"),f=a("app/model/BaseItem"),g=a("app/model/item/SourceItem"),h=a("app/model/SelectableCollection"),i=a("app/control/Globals"),j=a("utils/strings/stripTags"),k={original:d.template(i.MEDIA_DIR+"/<%= src %>"),"constrain-width":d.template(i.APP_ROOT+"image/1/<%= width %>/0/uploads/<%= src %>"),"constrain-height":d.template(i.APP_ROOT+"image/1/0/<%= height %>/uploads/<%= src %>"),"debug-bandwidth":d.template(i.MEDIA_DIR.replace(/(https?\:\/\/[^\/]+)/,"$1/slow/<%= kbps %>")+"/<%= src %>")},l=h.extend({model:g});b.exports=f.extend({_domPrefix:"m",defaults:{name:"<p><em>Untitled</em></p>",o:0,bId:-1,srcIdx:0,get srcset(){return[]},get sources(){return new l}},getters:["name","bundle","source","sources"],mutators:{desc:function(){return this.get("name")},handle:function(){return this.get("src")},text:function(){return j(this.get("name"))},attrs:{set:function(a,b,c,d){this._attrs=null,f.prototype.mutators.attrs.set.apply(this,arguments),this._updateSources()}},srcset:{set:function(a,b,c,d){d(a,b,c),this.get("sources").reset(b,c),this._updateSources()}},source:{"transient":!0,get:function(){return this.get("sources").at(this.get("srcIdx"))}}},initialize:function(){this._updateColors(),this.listenTo(this,"change:attrs change:bundle",function(){this._attrs=null})},attrs:function(){return this._attrs||(this._attrs=d.defaults({},this.get("bundle").attrs(),this.get("attrs")))},_updateColors:function(){this.colors={fgColor:new e(this.attr("color")),bgColor:new e(this.attr("background-color"))},this.colors.hasDarkBg=this.colors.fgColor.luminosity()>this.colors.bgColor.luminosity()},_updateSources:function(){var a={kbps:this.attr("@debug-bandwidth")},b=k[a.kbps?"debug-bandwidth":"original"];this.get("sources").forEach(function(c){a.src=c.get("src"),c.set("original",b(a))})}})},{"app/control/Globals":41,"app/model/BaseItem":43,"app/model/SelectableCollection":44,"app/model/item/SourceItem":54,color:"color",underscore:"underscore","utils/strings/stripTags":123}],54:[function(a,b,c){var d=a("app/model/BaseItem");"?"+Date.now();b.exports=d.extend({defaults:{src:null,mime:null,w:null,h:null},getters:["src","original"],mutators:{src:{set:function(a,b,c,d){d(a,b,c)}}}})},{"app/model/BaseItem":43}],55:[function(a,b,c){var d=a("app/model/BaseItem");b.exports=d.extend({_domPrefix:"t",defaults:{name:"",handle:""}})},{"app/model/BaseItem":43}],56:[function(a,b,c){var d=a("underscore"),e=a("backbone"),f=a("utils/strings/stripTags"),g=a("app/control/Globals"),h=a("app/view/base/TouchManager"),i=a("app/control/Controller"),j=a("app/model/AppState"),k=a("app/model/collection/BundleCollection"),l=a("app/model/collection/ArticleCollection"),m=a("app/view/base/View"),n=a("app/view/NavigationView"),o=a("app/view/ContentView"),p={getInstance:function(){return window.app instanceof this||(window.app=new this({model:new j})),window.app}},q={cidPrefix:"app",el:"body",className:"without-bundle without-media",model:j,events:{visibilitychange:function(a){},fullscreenchange:function(a){}},initialize:function(a){this.touch=h.init(this.el),this._onResize=this._onResize.bind(this),window.addEventListener("orientationchange",this._onResize,!1),window.addEventListener("resize",d.debounce(this._onResize,100,!1),!1),this.listenTo(i,"route",this._onRoute),this.listenTo(this.model,"change",this._onModelChange),this.navigationView=new n({el:"#navigation",model:this.model}),this.contentView=new o({el:"#content",model:this.model}),this.listenToOnce(i,"route",this._appStart),window.ga&&i.on("route",function(a){var b=e.history.getFragment();/^\//.test(b)||(b="/"+b),window.ga("set","page",b),window.ga("send","pageview")}),e.history.start({pushState:!1,hashChange:!0})},_appStart:function(){this._appStartChanged=!0,this.requestRender(m.MODEL_INVALID|m.SIZE_INVALID)},_onRoute:function(a,b){var c=d.defaults({routeName:a},j.prototype.defaults);switch(a){case"media-item":c.bundle=k.selected,c.withBundle=!0,c.media=c.bundle.media.selected,c.withMedia=!0,c.collapsed=!0;break;case"bundle-item":c.bundle=k.selected,c.withBundle=!0,c.collapsed=!0;break;case"article-item":c.article=l.selected,c.withArticle=!0,c.collapsed=!0;break;case"bundle-list":case"notfound":case"root":default:c.collapsed=!1}this.model.set(c)},_onModelChange:function(){this.requestRender(m.MODEL_INVALID)},_onResize:function(){this.requestRender(m.SIZE_INVALID).renderNow()},renderFrame:function(a,b){b&m.MODEL_INVALID&&this.renderModelChange(),b&m.SIZE_INVALID&&this.renderResize(),this._appStartChanged&&(this._appStartChanged=!1,this.requestAnimationFrame(this.renderAppStart))},renderAppStart:function(){this.el.classList.remove("app-initial"),this.el.classList.contains("route-initial")&&(this.el.classList.remove("route-initial"),document.documentElement.appendChild(document.createComment("'route-initial' was still present")))},renderResize:function(){document.body.scrollTop=0,d.each(g.BREAKPOINTS,function(a,b){this.toggle(b,a.matches)},document.body.classList),this.requestChildrenRender(m.SIZE_INVALID,!0)},renderModelChange:function(){var a=this.model.get("article"),b=this.model.get("bundle"),c=this.model.get("media"),d="Portfolio";b?(d+=" - "+f(b.get("name")),c&&(d+=": "+f(c.get("name")))):a&&(d+=" - "+f(a.get("name"))),document.title=d;var e=this.el.classList,g=null;this.model.hasChanged("article")&&(g=this.model.previous("article"),g&&e.remove(g.get("domid")),a&&e.add(a.get("domid"))),e.toggle("with-article",!!a),e.toggle("without-article",!a),this.model.hasChanged("bundle")&&(g=this.model.previous("bundle"),g&&e.remove(g.get("domid")),b&&e.add(b.get("domid"))),e.toggle("with-bundle",!!b),e.toggle("without-bundle",!b),this.model.hasChanged("media")&&(g=this.model.previous("media"),g&&e.remove(g.get("domid")),c&&e.add(c.get("domid"))),e.toggle("with-media",!!c),e.toggle("without-media",!c),this.model.hasChanged("routeName")&&(g=this.model.previous("routeName"),g&&e.remove("route-"+g),e.add("route-"+this.model.get("routeName"))),e.toggle("color-dark",c&&c.colors.hasDarkBg||b&&b.colors.hasDarkBg)}};b.exports=m.extend(q,p)},{"app/control/Controller":40,"app/control/Globals":41,"app/model/AppState":42,"app/model/collection/ArticleCollection":45,"app/model/collection/BundleCollection":46,"app/view/ContentView":57,"app/view/DebugToolbar":58,"app/view/NavigationView":59,"app/view/base/TouchManager":64,"app/view/base/View":65,backbone:"backbone",underscore:"underscore","utils/strings/stripTags":123}],57:[function(a,b,c){var d=a("underscore"),e=a("app/control/Globals"),f=a("utils/TransformHelper"),g=a("app/view/base/TouchManager"),h=a("app/control/Controller"),i=a("app/model/collection/BundleCollection"),j=a("app/model/collection/ArticleCollection"),k=a("app/view/base/View"),l=a("app/view/component/ArticleView"),m=a("app/view/component/CollectionStack"),n=a("app/view/component/SelectableListView"),o=a("app/view/render/DotNavigationRenderer"),p=a("app/view/component/Carousel"),q=a("app/view/render/CarouselRenderer"),r=a("app/view/render/ImageRenderer"),s=a("app/view/render/VideoRenderer"),t=a("app/view/render/SequenceRenderer"),u=a("./template/CollectionStack.Bundle.hbs"),v=a("./template/CollectionStack.Media.hbs"),w=k.prefixedProperty("transform"),x=k.prefixedProperty("transition"),y=e.transitions,z=k.extend({cidPrefix:"contentView",className:"container-x container-expanded",events:{"transitionend .adding-child":"_onAddedTransitionEnd","transitionend .removing-child":"_onRemovedTransitionEnd"},initialize:function(a){d.bindAll(this,"_onVPanStart","_onVPanMove","_onVPanFinal","_onCollapsedEvent"),this.transforms=new f,this.touch=g.getInstance(),this.listenTo(this.model,"change",this._onModelChange),this.skipTransitions=!0,this.itemViews=[]},renderFrame:function(a,b){var c=this.model.get("collapsed"),d=b&k.MODEL_INVALID&&this.model.hasChanged("collapsed"),e=b&k.MODEL_INVALID&&(this.model.hasChanged("bundle")||this.model.hasChanged("article")),f=!!(b&k.SIZE_INVALID),g=!!(b&(k.MODEL_INVALID|k.SIZE_INVALID|k.LAYOUT_INVALID));if(g=g||this._transformsChanged||this.skipTransitions,e&&(this.removeChildren(),i.selected?this.createChildren(i.selected):j.selected&&this.createChildren(j.selected)),d&&(this.el.classList.toggle("container-collapsed",c),this.el.classList.toggle("container-expanded",!c)),f&&this.transforms.clearAllCaptures(),g){if(this.el.classList.remove("container-changing"),this.skipTransitions)this.transforms.stopAllTransitions(),this.el.classList.remove("container-changed"),e||d&&this._setChildrenEnabled(c);else if(!e)if(d){var h;this.el.classList.add("container-changed"),c?(h=function(){this._setChildrenEnabled(!0),this.el.classList.remove("container-changed")},this.transforms.runAllTransitions(y.LAST)):(h=function(){this.el.classList.remove("container-changed")},this._setChildrenEnabled(!1),this.transforms.runAllTransitions(y.FIRST)),h=h.bind(this),this.transforms.whenAllTransitionsEnd().then(h,h)}else this.transforms.items.forEach(function(a){a.hasOffset&&a.runTransition(y.NOW)});e||this.transforms.clearAllOffsets(),this.transforms.validate()}f&&this.itemViews.forEach(function(a){a.skipTransitions=this.skipTransitions,a.requestRender(k.SIZE_INVALID).renderNow()},this),this.skipTransitions=this._transformsChanged=!1},_setChildrenEnabled:function(a){this.itemViews.forEach(function(b){b.setEnabled(a)})},_onCollapsedEvent:function(a){a.defaultPrevented||!this.model.get("withBundle")||this.model.get("collapsed")||this.enabled||(a.preventDefault(),this.setImmediate(function(){this.model.set("collapsed",!0)}))},_onModelChange:function(){this.model.hasChanged("withBundle")&&(this.model.get("withBundle")?this.touch.on("vpanstart",this._onVPanStart):this.touch.off("vpanstart",this._onVPanStart)),(this.model.hasChanged("collapsed")||this.model.hasChanged("withBundle"))&&(this.model.get("withBundle")&&!this.model.get("collapsed")?(this.touch.on("hpanleft hpanright",this._onCollapsedEvent),this.el.addEventListener("click",this._onCollapsedEvent,!1)):(this.touch.off("hpanleft hpanright",this._onCollapsedEvent),this.el.removeEventListener("click",this._onCollapsedEvent,!1))),this.requestRender(k.MODEL_INVALID)},_collapsedOffsetY:e.COLLAPSE_OFFSET,_onVPanStart:function(a){this.touch.on("vpanmove",this._onVPanMove),this.touch.on("vpanend vpancancel",this._onVPanFinal),this.transforms.stopAllTransitions(),this.transforms.clearAllCaptures(),this.el.classList.add("container-changing"),this._onVPanMove(a)},_onVPanMove:function(a){var b=this.model.get("collapsed"),c=a.deltaY,d=this._collapsedOffsetY,f=b?c>0:0>c,g=b?e.VPAN_DRAG:1-e.VPAN_DRAG;c=Math.abs(c),c*=g,d*=g,f?c>d&&(c=(c-d)*e.VPAN_OUT_DRAG+d):c=-c*e.VPAN_OUT_DRAG,c*=b?1:-1,this.transforms.offsetAll(0,c),this.transforms.validate()},_onVPanFinal:function(a){this.touch.off("vpanmove",this._onVPanMove),this.touch.off("vpanend vpancancel",this._onVPanFinal),this._onVPanMove(a),this.setImmediate(function(){this._transformsChanged=!0,this.requestRender()})},createChildren:function(a){var b;a.__proto__.constructor===i.model?(b=this.createMediaCaptionStack(a),this.itemViews.push(b),this.transforms.add(b.el),b=this.createMediaCarousel(a),this.itemViews.push(b),this.transforms.add(b.el),b=this.createMediaDotNavigation(a),this.itemViews.push(b)):a.__proto__.constructor===j.model&&(b=this.createArticleView(a),this.itemViews.push(b)),this.itemViews.forEach(function(a){this.skipTransitions||(a.el.classList.add("adding-child"),a.el.style.opacity=0),this.el.appendChild(a.el),a.render()},this),this.skipTransitions||this.requestAnimationFrame(function(){this.itemViews.forEach(function(a){this.skipTransitions||(a.el.style[x]="opacity "+y.LAST.cssText),a.el.style.removeProperty("opacity")},this)})},removeChildren:function(){this.itemViews.forEach(function(a,b,c){if(this.transforms.remove(a.el),this.skipTransitions)a.remove();else{var d=window.getComputedStyle(a.el);"0"==d.opacity||"hidden"==d.visibility?a.remove():(a.el.classList.add("removing-child"),d[w]&&(a.el.style[w]=d[w]),a.el.style[x]="opacity "+y.FIRST.cssText,a.el.style.opacity=0)}c[b]=null},this),this.itemViews.length=0},_onAddedTransitionEnd:function(a){if(a.target.cid&&this.childViews.hasOwnProperty(a.target.cid)){var b=this.childViews[a.target.cid];b.el.classList.remove("adding-child"),b.el.style.removeProperty(x)}},_onRemovedTransitionEnd:function(a){if(a.target.cid&&this.childViews.hasOwnProperty(a.target.cid)){var b=this.childViews[a.target.cid];b.el.classList.remove("removing-child"),b.remove()}},createMediaCarousel:function(a){var b=q.extend({className:"carousel-item empty-item",model:a,template:u}),c=function(a,c,d){if(-1===c)return b;switch(a.attr("@renderer")){case"video":return s;case"sequence":return t;default:return r}},d=new p({className:"media-carousel "+a.get("domid"),collection:a.get("media"),rendererFunction:c,requireSelection:!1,direction:p.DIRECTION_HORIZONTAL,touch:this.touch});return h.listenTo(d,{"view:select:one":h.selectMedia,"view:select:none":h.deselectMedia}),d.listenTo(a,"deselected",function(){this.stopListening(this.collection),h.stopListening(this)}),d},createMediaCaptionStack:function(a){var b=new m({className:"media-caption-stack",collection:a.get("media"),template:v});return b.listenTo(a,"deselected",function(){this.stopListening(this.collection)}),b},createMediaDotNavigation:function(a){var b=new n({className:"media-dotnav dots-fontface color-fg05",collection:a.get("media"),renderer:o});return h.listenTo(b,{"view:select:one":h.selectMedia,"view:select:none":h.deselectMedia}),b.listenTo(a,"deselected",function(){this.stopListening(this.collection),h.stopListening(this)}),b},createArticleView:function(a){var b=new l({model:a});return b}});b.exports=z},{"./template/CollectionStack.Bundle.hbs":102,"./template/CollectionStack.Media.hbs":103,"app/control/Controller":40,"app/control/Globals":41,"app/model/collection/ArticleCollection":45,"app/model/collection/BundleCollection":46,"app/view/base/TouchManager":64,"app/view/base/View":65,"app/view/component/ArticleView":69,"app/view/component/Carousel":70,"app/view/component/CollectionStack":72,"app/view/component/SelectableListView":77,"app/view/render/CarouselRenderer":87,"app/view/render/DotNavigationRenderer":92,"app/view/render/ImageRenderer":94,"app/view/render/SequenceRenderer":99,"app/view/render/VideoRenderer":101,underscore:"underscore","utils/TransformHelper":108}],58:[function(a,b,c){var d=a("underscore"),e=a("cookies-js"),f=a("app/control/Globals"),g=a("app/view/base/View"),h=a("./template/DebugToolbar.hbs"),i=d.template("<%= w %> × <%= h %>"),j=g.extend({cidPrefix:"debugToolbar",tagName:"div",className:"toolbar",template:h,initialize:function(a){e.defaults={expires:new Date(2147483647e3),domain:String(window.location).match(/^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i)[1]},this.el.innerHTML=this.template({tests:Modernizr,navigator:window.navigator});var b=document.body.querySelector("#container");this.backendEl=this.el.querySelector("#edit-backend a"),this.mediaInfoEl=this.el.querySelector("#media-info span"),this.appStateEl=this.el.querySelector("#app-state"),this.initializeClassToggle("show-links",this.el.querySelector(".debug-links #links-toggle"),this.el),this.initializeClassToggle("show-tests",this.el.querySelector("#toggle-tests a"),this.el),this.initializeClassToggle("hide-passed",this.el.querySelector("#toggle-passed"),this.el),this.initializeClassToggle("debug-grid-bg",this.el.querySelector("#toggle-grid-bg a"),b),this.initializeClassToggle("debug-blocks",this.el.querySelector("#toggle-blocks a"),b),this.initializeClassToggle("debug-markdown",this.el.querySelector("#toggle-markdown a"),b),this.initializeClassToggle("debug-logs",this.el.querySelector("#toggle-logs a"),b),
this.initializeClassToggle("debug-tx",this.el.querySelector("#toggle-tx a"),b,function(a,b){this.el.classList.toggle("show-tx",b)}),this.initializeViewportInfo(),this.listenTo(this.model,"change",this._onModelChange),this._onModelChange()},initializeViewportInfo:function(){var a=this.el.querySelector("#viewport-info span"),b=function(){a.textContent=i({w:window.innerWidth,h:window.innerHeight})};b.call(),window.addEventListener("resize",d.debounce(b,100,!1,!1))},initializeToggle:function(a,b,c){var d=this,f="true"===e.get(a);c.call(d,a,f),b.addEventListener("click",function(b){b.defaultPrevented||(b.preventDefault(),f=!f,e.set(a,f?"true":""),c.call(d,a,f))},!1)},initializeClassToggle:function(a,b,c,e){var f=d.isFunction(e);this.initializeToggle(a,b,function(a,d){c.classList.toggle(a,d),b.classList.toggle("toggle-enabled",d),b.classList.toggle("color-reverse",d),f&&e.apply(this,arguments)})},_onModelChange:function(){var a,b,c,d,e=this.appStateEl.children;for(a=0,b=e.length;b>a;a++)d=e[a],c=d.getAttribute("data-prop"),d.classList.toggle("has-value",this.model.get(c)),d.classList.toggle("has-changed",this.model.hasChanged(c)),d.classList.toggle("color-reverse",this.model.hasChanged(c));if(this.model.hasChanged("routeName")){var g=f.APP_ROOT+"symphony/";switch(this.model.get("routeName")){case"article-item":g+="publish/articles/edit/"+this.model.get("article").id;break;case"bundle-item":g+="publish/bundles/edit/"+this.model.get("bundle").id;break;case"media-item":g+="publish/media/edit/"+this.model.get("media").id;break;case"root":g+="publish/bundles"}this.backendEl.setAttribute("href",g)}this.model.hasChanged("media")&&(this.model.has("media")?(this.mediaInfoEl.textContent=i(this.model.get("media").get("source").toJSON()),this.mediaInfoEl.style.display=""):(this.mediaInfoEl.textContent="",this.mediaInfoEl.style.display="none"))}});b.exports=j},{"./template/DebugToolbar.hbs":104,"app/control/Globals":41,"app/view/base/View":65,"cookies-js":"cookies-js",underscore:"underscore"}],59:[function(a,b,c){var d=a("underscore"),e=a("hammerjs"),f=a("app/control/Globals"),g=a("utils/TransformHelper"),h=a("app/view/base/TouchManager"),i=a("app/control/Controller"),j=a("app/model/collection/TypeCollection"),k=a("app/model/collection/KeywordCollection"),l=a("app/model/collection/BundleCollection"),m=a("app/model/collection/ArticleCollection"),n=a("app/view/base/View"),o=a("app/view/component/FilterableListView"),p=a("app/view/component/GroupingListView"),q=a("app/view/component/GraphView"),r=a("app/view/component/ArticleButton"),s=f.transitions,t=n.extend({cidPrefix:"navigationView",className:"container-expanded",initialize:function(a){d.bindAll(this,"_onVPanStart","_onVPanMove","_onVPanFinal"),d.bindAll(this,"_onHPanStart","_onHPanMove","_onHPanFinal"),d.bindAll(this,"_whenTransitionsEnd","_whenTransitionsAbort"),d.bindAll(this,"_onNavigationClick"),this.itemViews=[],this.transforms=new g,this.touch=h.getInstance(),this.listenTo(this.model,"change",this._onModelChange),this.keywordList=this.createKeywordList(),this.hGroupings=this.keywordList.el.querySelectorAll(".list-group .label"),this.transforms.add(this.hGroupings,this.keywordList.el,this.keywordList.wrapper),this.itemViews.push(this.keywordList),this.bundleList=this.createBundleList(),this.transforms.add(this.bundleList.el,this.bundleList.wrapper),this.itemViews.push(this.bundleList),this.sitename=this.createSitenameButton(),this.transforms.add(this.sitename.wrapper,this.sitename.el),this.about=this.createArticleButton(m.findWhere({handle:"about"})),this.transforms.add(this.about.wrapper,this.about.el),this.graph=this.createGraphView(this.bundleList,this.keywordList),this.listenTo(this.graph,"view:render:before",function(a,b){b&n.SIZE_INVALID|n.MODEL_INVALID&&(this.graph.el.style.height=this.bundleList.el.style.height)})},renderFrame:function(a,b){b&n.MODEL_INVALID&&(this.model.hasChanged("collapsed")&&(this.el.classList.toggle("container-collapsed",this.model.get("collapsed")),this.el.classList.toggle("container-expanded",!this.model.get("collapsed"))),(this.model.hasChanged("collapsed")||this.model.hasChanged("withBundle"))&&this.el.classList.add("container-changing"),this.model.hasChanged("bundle")&&(this.bundleList.requestRender(n.SIZE_INVALID),this.keywordList.requestRender(n.SIZE_INVALID))),(this.skipTransitions||b&(n.MODEL_INVALID|n.SIZE_INVALID|n.LAYOUT_INVALID))&&(this.skipTransitions?(this.transforms.stopAllTransitions(),this.transforms.validate(),this.transforms.clearAllOffsets()):this.renderTransitions(b),this.transforms.validate()),b&n.MODEL_INVALID&&(this.model.hasChanged("collapsed")||this.model.hasChanged("withBundle")||this.model.hasChanged("withArticle"))&&this.transforms.promise().then(this._whenTransitionsEnd,this._whenTransitionsAbort),this.itemViews.forEach(function(a){a.skipTransitions=a.skipTransitions||this.skipTransitions,b&n.SIZE_INVALID&&a.requestRender(n.SIZE_INVALID),a.skipTransitions||a.renderNow()},this),b&(n.SIZE_INVALID|~n.MODEL_INVALID)&&!this.model.hasChanged("collapsed")&&!this.model.get("withBundle")?(this.graph.requestRender(n.SIZE_INVALID|n.LAYOUT_INVALID),this.skipTransitions||this.graph.renderNow()):b&n.SIZE_INVALID&&!this.model.get("collapsed")&&this.graph.requestRender(n.SIZE_INVALID),this.skipTransitions=!1},_whenTransitionsEnd:function(a){this.el.classList.remove("container-changing"),this.graph.requestRender(n.SIZE_INVALID),this.model.get("collapsed")||this.graph.requestRender(n.LAYOUT_INVALID).renderNow()},_whenTransitionsAbort:function(a){console.warn("%s::_whenTransitionsAbort %o",this.cid,a),this.el.classList.remove("container-changing"),this.graph.requestRender(n.SIZE_INVALID),this.model.get("collapsed")||this.graph.requestRender(n.LAYOUT_INVALID).renderNow()},renderTransitions:function(a){var b,c=this.model.previous("routeName"),d=this.model.get("routeName"),e=a&n.MODEL_INVALID,g=this.model.get("withBundle"),h=e&&this.model.hasChanged("withBundle"),i=e&&this.model.hasChanged("bundle"),j=this.model.get("withMedia"),k=e&&this.model.hasChanged("withMedia"),l=this.model.get("collapsed"),m=e&&this.model.hasChanged("collapsed"),o=e&&this.model.hasChanged("withArticle");b=this.transforms.get(this.bundleList.el),b.hasOffset&&b.runTransition(m?s.BETWEEN:s.NOW),b=this.transforms.get(this.keywordList.el),b.hasOffset&&b.runTransition(m?s.BETWEEN:s.NOW),b=this.transforms.get(this.graph.el),b&&b.hasOffset&&(b.runTransition(m?s.BETWEEN:s.NOW),b.clearOffset()),f.BREAKPOINTS["desktop-small"].matches?(b=this.transforms.get(this.keywordList.wrapper),m&&!o?h?k&&b.runTransition(g?s.LAST:s.FIRST):j&&b.runTransition(l?s.LAST:s.FIRST):!h&&k&&b.runTransition(i?s.BETWEEN:s.NOW),m^o&&this.transforms.runTransition(l?s.LAST:s.FIRST,this.sitename.el,this.about.el,this.bundleList.wrapper,this.hGroupings),("root"==c||"root"==d)&&this.transforms.runTransition(s.BETWEEN,this.sitename.wrapper,this.about.wrapper)):h&&this.transforms.runTransition(s.BETWEEN,this.sitename.el,this.about.el),this.transforms.clearOffset(this.bundleList.el,this.keywordList.el,this.keywordList.wrapper)},_onModelChange:function(){k.deselect(),this.model.hasChanged("collapsed")&&(this.model.get("collapsed")&&k.deselect(),this.keywordList.collapsed=this.bundleList.collapsed=this.model.get("collapsed")),this.model.hasChanged("bundle")&&this.keywordList.refresh(),this.model.hasChanged("withBundle")&&(this.model.get("withBundle")?(this.touch.on("vpanstart",this._onVPanStart),this.touch.on("hpanstart",this._onHPanStart)):(this.touch.off("vpanstart",this._onVPanStart),this.touch.off("hpanstart",this._onHPanStart))),this.requestRender(n.MODEL_INVALID)},_onKeywordSelect:function(a){this.bundleList.refresh(),!this.model.get("collapsed")&&this.graph&&this.listenToOnce(this.bundleList,"view:render:after",function(a,b){this.graph.valueTo(0,0,"amount"),this.graph.valueTo(1,f.TRANSITION_DURATION,"amount")})},_onNavigationClick:function(a){this._changeCollapsed(!1)},_onArticleClick:function(a){switch(this.model.get("routeName")){case"article-item":i.deselectArticle();break;case"root":default:i.selectArticle(a)}},_onSitenameClick:function(){switch(this.model.get("routeName")){case"media-item":case"bundle-item":this.model.get("collapsed")?this._changeCollapsed(!1):i.deselectBundle();break;case"article-item":i.deselectArticle()}},_onBundleListSame:function(a){this._changeCollapsed(!this.model.get("collapsed"))},_onKeywordListChange:function(a){this.model.get("collapsed")||k.select(a)},_changeCollapsed:function(a){a!==this.model.get("collapsed")&&(this.transforms.offset(0,1,this.graph.el),this.transforms.validate(),this.setImmediate(function(){this.model.set("collapsed",!this.model.get("collapsed"))}))},_onHPanStart:function(a){this.transforms.get(this.keywordList.wrapper).stopTransition().clearOffset().validate(),f.BREAKPOINTS["desktop-small"].matches&&this.model.get("bundle").get("media").selectedIndex<=0&&this.model.get("collapsed")&&(this.transforms.get(this.keywordList.wrapper).clearCapture(),this._onHPanMove(a),this.touch.on("hpanmove",this._onHPanMove),this.touch.on("hpanend hpancancel",this._onHPanFinal))},_onHPanMove:function(a){var b=720/920,c=a.deltaX;c*=this.model.get("withMedia")?a.offsetDirection&e.DIRECTION_LEFT?0:b:a.offsetDirection&e.DIRECTION_LEFT?b:f.HPAN_OUT_DRAG,this.transforms.offset(c,void 0,this.keywordList.wrapper),this.transforms.validate()},_onHPanFinal:function(a){this.touch.off("hpanmove",this._onHPanMove),this.touch.off("hpanend hpancancel",this._onHPanFinal);var b=this.transforms.get(this.keywordList.wrapper);this._renderFlags&n.MODEL_INVALID||!b.hasOffset||(0!=b.offsetX&&b.runTransition(s.NOW),b.clearOffset().validate())},_collapsedOffsetY:f.COLLAPSE_OFFSET,_onVPanStart:function(a){this.touch.on("vpanmove",this._onVPanMove),this.touch.on("vpanend vpancancel",this._onVPanFinal),this.transforms.stopTransition(this.bundleList.el,this.keywordList.el),this.transforms.clearCapture(this.bundleList.el,this.keywordList.el),this.model.get("collapsed")||(this.transforms.stopTransition(this.graph.el),this.transforms.clearCapture(this.graph.el)),this._onVPanMove(a)},_onVPanMove:function(a){var b=this.model.get("collapsed"),c=a.deltaY,d=this._collapsedOffsetY,e=b?c>0:0>c,g=b?1-f.VPAN_DRAG:f.VPAN_DRAG;c=Math.abs(c),c*=g,d*=g,e?c>d&&(c=(c-d)*f.VPAN_OUT_DRAG+d):c=-c*f.VPAN_OUT_DRAG,c*=b?.5:-1,this.transforms.offset(0,c,this.bundleList.el,this.keywordList.el),b||this.transforms.offset(0,c,this.graph.el),this.transforms.validate()},_onVPanFinal:function(a){this.touch.off("vpanmove",this._onVPanMove),this.touch.off("vpanend vpancancel",this._onVPanFinal),this._onVPanMove(a),this.setImmediate(function(){this.willCollapsedChange(a)?this.model.set("collapsed",!this.model.get("collapsed")):this.requestRender(n.LAYOUT_INVALID)})},willCollapsedChange:function(a){return"vpanend"==a.type?this.model.get("collapsed")?a.deltaY>f.COLLAPSE_THRESHOLD:a.deltaY<-f.COLLAPSE_THRESHOLD:!1},createSitenameButton:function(){var a=new n({el:"#site-name",events:{"click a":function(a){a.defaultPrevented||a.preventDefault(),this.trigger("view:click")}}});return this.listenTo(a,"view:click",this._onSitenameClick),a.wrapper=a.el.parentElement,a},createArticleButton:function(a){var b=new r({el:"#about",model:a}).render();return this.listenTo(b,"view:click",this._onArticleClick),b.wrapper=b.el.parentElement,b},createBundleList:function(){var a=new o({el:"#bundle-list",collection:l,collapsed:!1,filterFn:function(a,b,c){return k.selected?-1!==a.get("kIds").indexOf(k.selected.id):!1}});return i.listenTo(a,{"view:select:one":i.selectBundle,"view:select:none":i.deselectBundle}),this.listenTo(a,"view:select:same",this._onBundleListSame),this.listenTo(k,"select:one select:none",this._onKeywordSelect),a.wrapper=a.el.parentElement,a},createKeywordList:function(){var a=new p({el:"#keyword-list",collection:k,collapsed:!1,filterFn:function(a,b,c){return l.selected?-1!==l.selected.get("kIds").indexOf(a.id):!1},groupingFn:function(a,b,c){return j.get(a.get("tId"))}});return this.listenTo(a,"view:select:one view:select:none",this._onKeywordListChange),a.wrapper=a.el.parentElement,a},createGraphView:function(a,b){var c=new q({id:"nav-graph",listA:a,listB:b,model:this.model,useOpaque:!1});return this.el.appendChild(c.el),c}});b.exports=t},{"app/control/Controller":40,"app/control/Globals":41,"app/model/collection/ArticleCollection":45,"app/model/collection/BundleCollection":46,"app/model/collection/KeywordCollection":47,"app/model/collection/TypeCollection":48,"app/view/base/TouchManager":64,"app/view/base/View":65,"app/view/component/ArticleButton":68,"app/view/component/FilterableListView":73,"app/view/component/GraphView":74,"app/view/component/GroupingListView":75,hammerjs:"hammerjs",underscore:"underscore","utils/TransformHelper":108}],60:[function(a,b,c){var d=a("underscore"),e=a("app/view/base/View"),f=a("app/control/Globals"),g=a("app/view/base/Interpolator"),h=a("utils/css/getBoxEdgeStyles"),i=2,j=e.extend({cidPrefix:"canvasView",tagName:"canvas",className:"canvas-view",properties:{context:{get:function(){return this._ctx}},interpolator:{get:function(){return this._interpolator}},canvasRatio:{get:function(){return this._canvasRatio}}},defaults:{values:{value:0},maxValues:{value:1},useOpaque:!0},initialize:function(a){a=d.defaults(a,this.defaults),a.values=d.defaults(a.values,this.defaults.values),a.maxValues=d.defaults(a.maxValues,this.defaults.maxValues),this._interpolator=new g(a.values,a.maxValues),this._useOpaque=a.useOpaque,this._options=d.pick(a,"color","backgroundColor");var b={};this._ctx=this.el.getContext("2d",b);var c=i,f=this._ctx.webkitBackingStorePixelRatio||1;window.devicePixelRatio!==f&&(c=window.devicePixelRatio/f,c=Math.max(c,i)),this._canvasRatio=c,this.listenTo(this,"view:attached",function(){this.requestRender(e.SIZE_INVALID|e.LAYOUT_INVALID).renderNow()})},_updateCanvas:function(){var a,b,c,d,e,g;a=getComputedStyle(this.el),b=h(a),e=b.paddingLeft+b.paddingRight+b.borderLeftWidth+b.borderRightWidth,g=b.paddingTop+b.paddingBottom+b.borderTopWidth+b.borderBottomWidth,c=this.el.offsetWidth,d=this.el.offsetHeight,this.el.width=this._canvasWidth=(c-e)*this._canvasRatio,this.el.height=this._canvasHeight=(d-g)*this._canvasRatio,this._color=a.color||this._options.color||f.DEFAULT_COLORS.color,this._backgroundColor=a.backgroundColor||this._options.backgroundColor||f.DEFAULT_COLORS["background-color"],this._useOpaque&&this._opaqueProp&&(this.el[this._opaqueProp]=!0),this._fontSize=parseFloat(a.fontSize)*this._canvasRatio,this._fontFamily=a.fontFamily,this._ctx.restore(),this._ctx.font=[a.fontWeight,a.fontStyle,this._fontSize+"px/1",a.fontFamily].join(" "),this._ctx.textAlign="left",this._ctx.lineCap="butt",this._ctx.lineJoin="miter",this._ctx.strokeStyle=this._color,this._ctx.fillStyle=this._color,this.updateCanvas(this._ctx),this._ctx.save()},updateCanvas:function(){},_getFontMetrics:function(a){var b,c,d,e=a.length;for(b in f.FONT_METRICS)c=a.indexOf(b),-1!==c&&e>c&&(e=c,d=f.FONT_METRICS[b]);return d},_clearCanvas:function(a,b,c,d){this._ctx.clearRect(a,b,c,d),this._useOpaque&&(this._ctx.save(),this._ctx.fillStyle=this._backgroundColor,this._ctx.fillRect(a,b,c,d),this._ctx.restore())},render:function(){return this.attached?this.renderNow():this},renderFrame:function(a,b){return this.attached?(b&e.SIZE_INVALID&&this._updateCanvas(),this._interpolator.valuesChanged&&(b|=e.LAYOUT_INVALID,this._interpolator.interpolate(a)),void(b&(e.LAYOUT_INVALID|e.SIZE_INVALID)&&(this.redraw(this._ctx,this._interpolator),this._interpolator.valuesChanged&&this.requestRender()))):b},getValue:function(a){return this._interpolator.getValue(a)},getRenderedValue:function(a){return this._interpolator.getRenderedValue(a)},valueTo:function(a,b,c){this._interpolator.valueTo(a,b,c),this.requestRender(e.MODEL_INVALID|e.LAYOUT_INVALID)},redraw:function(a,b){}});b.exports=j},{"app/control/Globals":41,"app/view/base/Interpolator":62,"app/view/base/View":65,underscore:"underscore","utils/css/getBoxEdgeStyles":112}],61:[function(a,b,c){function d(a){this._offset=0|a,this._items=[],this._priorities=[],this._numItems=0}d.prototype=Object.create({enqueue:function(a,b){var c=this._items.length;return this._items[c]=a,this._priorities[c]={priority:0|b,index:c},this._numItems++,this._offset+c},contains:function(a){return a-=this.offset,a>=0&&a<this._items.length},skip:function(a){var b,c;return b=a-this._offset,0>b||b>=this._items.length?void 0:(c=this._items[b],null!==c&&(this._items[b]=null,this._numItems--),c)},indexes:function(){var a=this._priorities.concat();return a.sort(function(a,b){return a.priority>b.priority?1:a.priority<b.priority?-1:0}),a.forEach(function(a,b,c){c[b]=a.index},this),a},items:function(){var a=this._priorities.concat();return a.sort(function(a,b){return a.priority>b.priority?1:a.priority<b.priority?-1:0}),a.forEach(function(a,b,c){c[b]=this._items[a.index]},this),a},_empty:function(a){this._offset=a,this._items.length=0,this._priorities.length=0,this._numItems=0}},{offset:{get:function(){return this._offset}},length:{get:function(){return this._items.length}},numItems:{get:function(){return this._numItems}}});var e=new d(0),f=null,g=!1,h=-1,i=function(a){if(g)throw new Error("wtf!!!");h=-1,g=!0,f=e,e=new d(f.offset+f.length),f.indexes().forEach(function(b,c,d){var e=f._items[b];null!==e&&e(a)}),g=!1,f=null,e.numItems>0&&(h=window.requestAnimationFrame(i))},j=Object.create({request:function(a,b){return g||-1!==h||(h=window.requestAnimationFrame(i)),e.enqueue(a,b)},cancel:function(a){var b;return g?b=f.skip(a)||e.skip(a):(b=e.skip(a),-1!==h&&0===e.numItems&&(window.cancelAnimationFrame(h),h=-1)),b}},{running:{get:function(){return g}}});b.exports=j},{underscore:"underscore"}],62:[function(a,b,c){function d(a,b){this._valueData={},this._maxValues={},this._renderableKeys=[];var c,d,e;for(c in a)d=a[c],e=b[c]||null,this._valueData[c]=this._initValue(d,0,e),this._maxValues[c]=e,this._renderableKeys.push(c);this._valuesChanged=this._renderableKeys.length>0}var e=a("utils/ease/linear");d.prototype=Object.create({isAtTarget:function(a){return-1===this._renderableKeys.indexOf(a)},getValue:function(a){return this._valueData[a]._value},getRenderedValue:function(a){return this._valueData[a]._renderedValue},valueTo:function(a,b,c){var d,e=this._valueData[c];return d=Array.isArray(e)?a.reduce(function(a,d,f){return e[f]?(e[f]=this._initNumber(d,b,this._maxValues[c]),!0):this._setValue(d,b,e[f])||a}.bind(this),d):this._setValue(a,b,e),d&&(-1!==this._renderableKeys.indexOf(c)||this._renderableKeys.push(c),this._valuesChanged=!0),this},updateValue:function(a){var b=this._renderableKeys.indexOf(a);return-1===b||this._interpolateValue(a)||(this._renderableKeys.splice(b,1),this._valuesChanged=this._renderableKeys.length>0),this},_initValue:function(a,b,c){return Array.isArray(a)?a.map(function(a){return this._initNumber(a,0,c)},this):this._initNumber(a,0,c)},_initNumber:function(a,b,c){var d={};return d._value=a,d._startValue=a,d._valueDelta=0,d._duration=b||0,d._startTime=-1,d._elapsedTime=0,d._lastRenderedValue=d._renderedValue=null,d._maxVal=c,d},_setValue:function(a,b,c){return c._value!=a?(c._startValue=c._value,c._valueDelta=a-c._value,c._value=a,c._duration=b||0,c._startTime=-1,c._elapsedTime=0,c._lastRenderedValue=c._renderedValue,!0):!1},interpolate:function(a){if(this._valuesChanged){this._valuesChanged=!1;var b=this._renderableKeys;this._tstamp=a,this._renderableKeys=b.filter(this._interpolateValue,this),this._renderedKeys=b,0!==this._renderableKeys.length&&(this._valuesChanged=!0)}return this},_interpolateValue:function(a){var b=this._valueData[a];return Array.isArray(b)?b.reduce(function(a,b,c,d){return this._interpolateNumber(this._tstamp,b)||a}.bind(this),!1):this._interpolateNumber(this._tstamp,b)},_interpolateNumber:function(a,b){b._startTime<0&&(b._startTime=a);var c=a-b._startTime;return b._elapsedTime=c,b._lastRenderedValue=b._renderedValue,c<b._duration?(b._maxVal&&b._valueDelta<0?b._renderedValue=e(c,b._startValue,b._valueDelta+b._maxVal,b._duration)-b._maxVal:b._renderedValue=e(c,b._startValue,b._valueDelta,b._duration),!0):(b._renderedValue=b._value,!1)}},{valuesChanged:{get:function(){return this._valuesChanged}},renderableKeys:{get:function(){return this._renderableKeys}},renderedKeys:{get:function(){return this._renderedKeys}}}),b.exports=d},{"utils/ease/linear":113}],63:[function(a,b,c){var d=a("utils/prefixedEvent"),e={transitionend:d("transitionend"),fullscreenchange:d("fullscreenchange",document),fullscreenerror:d("fullscreenerror",document),visibilitychange:d("visibilitychange",document,"hidden")},f=0;for(var g in e)g===e[g]?delete e[g]:(Object.defineProperty(e,g,{value:e[g],enumerable:!0}),Object.defineProperty(e,f,{value:g,enumerable:!1}),f++);Object.defineProperty(e,"length",{value:f}),b.exports=e},{"utils/prefixedEvent":117}],64:[function(a,b,c){function d(a){var b,c,d,e;return c=new i({threshold:g.PAN_THRESHOLD,direction:h.DIRECTION_HORIZONTAL,event:"hpan"}),d=new i({threshold:g.PAN_THRESHOLD,direction:h.DIRECTION_VERTICAL,event:"vpan"}),e=new h.Tap({threshold:g.PAN_THRESHOLD-1}),b=new h.Manager(a),b.add([e,c,d]),d.requireFailure(c),b}function e(){var a,b=j.element;for(a in m)m.hasOwnProperty(a)&&j.on(a,m[a]);for(a in n)n.hasOwnProperty(a)&&b.addEventListener(a,n[a],!0);for(a in o)o.hasOwnProperty(a)&&b.addEventListener(a,o[a],!1)}function f(){var a,b=j.element;for(a in n)n.hasOwnProperty(a)&&b.removeEventListener(a,n[a],!0);for(a in o)n.hasOwnProperty(a)&&b.removeEventListener(a,o[a],!0)}var g=a("app/control/Globals"),h=a("hammerjs"),i=a("utils/touch/SmoothPanRecognizer"),j=null,k=-1,l=!1,m={},n={},o={};m["vpanstart vpanend vpancancel hpanstart hpanend hpancancel"]=function(a){l=!a.isFinal,a.isFinal&&(k=a.srcEvent.timeStamp)},n.click=function(a){k==a.timeStamp&&(k=-1,a.defaultPrevented||a.preventDefault(),a.stopPropagation())},n.mouseup=function(a){l&&a.preventDefault()},n.dragstart=function(a){"IMG"==a.target.nodeName&&(a.defaultPrevented||a.preventDefault())};var p={init:function(a){return null===j?(j=d(a),e()):j.element!==a&&console.warn("TouchManager already initialized with another element"),j},destroy:function(){null!==j?(f(),j.destroy(),j=null):console.warn("no instance to destroy")},getInstance:function(){return null===j&&console.error("TouchManager has not been initialized"),j}};b.exports=p},{"app/control/Globals":41,hammerjs:"hammerjs","utils/touch/SmoothPanRecognizer":124}],65:[function(a,b,c){function d(a){for(var b,c=a.querySelectorAll("*[data-cid]"),d=0,e=c.length;e>d;d++)b=q.findByElement(c.item(d)),b&&(b.attached||b._elementAttached())}function e(a){for(var b,c=a.querySelectorAll("*[data-cid]"),d=0,e=c.length;e>d;d++)b=q.findByElement(c.item(d)),b&&(b.attached?b._elementDetached():console.warn("View::[detached (parent)] %s (ignored)",b.cid))}function f(a,b,c){-1!=["log","info","warn","error"].indexOf(c)&&(c="log"),console[c].call(console,"%s::%s [parent:%s %s %s depth:%s]",a.cid,b,a.parentView&&a.parentView.cid,a.attached?"attached":"detached",a._viewPhase,a.viewDepth)}var g=a("backbone"),h=a("underscore"),i=1,j={},k=new MutationObserver(function(a){var b,c,f,g,h,i,j;for(b=0,c=a.length;c>b;b++)if(f=a[b],"childList"==f.type){for(g=0,h=f.addedNodes.length;h>g;g++)i=f.addedNodes.item(g),j=q.findByElement(i),j&&(j.attached||j._elementAttached()),i instanceof HTMLElement&&d(i);for(g=0,h=f.removedNodes.length;h>g;g++)i=f.removedNodes.item(g),j=q.findByElement(i),j&&(j.attached?j._elementDetached():console.warn("View::[detached (childList)] %s (ignored)",j.cid,j.attached)),i instanceof HTMLElement&&e(i)}else"attributes"==f.type&&(j=q.findByElement(f.target),j&&(j.attached||j._elementAttached()))});k.observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["data-cid"]});var l=a("app/view/base/FrameQueue"),m=a("app/view/base/PrefixedEvents"),n=window.performance?window.performance.now.bind(window.performance):Date.now.bind(Date),o=function(a){var b,c;for(b in a)c=b.match(/^\w+/i)[0],m.hasOwnProperty(c)&&(a[b.replace(c,m[c])]=a[b],delete a[b]);return a},p=function(a){return a?a.attached?null===a.parentView?0:a.parentView.viewDepth+1:NaN:null},q={NONE_INVALID:0,CHILDREN_INVALID:1,MODEL_INVALID:2,STYLES_INVALID:4,SIZE_INVALID:8,LAYOUT_INVALID:16,ViewError:a("app/view/base/ViewError"),prefixedProperty:a("utils/prefixedProperty"),prefixedStyleName:a("utils/prefixedStyleName"),prefixedEvent:a("utils/prefixedEvent"),whenViewIsAttached:a("app/view/promise/whenViewIsAttached"),findByElement:function(a){return j[a.cid]?j[a.cid]:null},findByDescendant:function(a){do if(j[a.cid])return j[a.cid];while(a=a.parentElement||a.parentNode);return null},extend:function(a,b){return m.length&&a.events&&(h.isFunction(a.events)?a.events=h.wrap(a.events,function(a){return o(a.apply(this))}):h.isObject(a.events)&&(a.events=o(a.events))),a.properties&&this.prototype.properties&&h.defaults(a.properties,this.prototype.properties),g.View.extend.apply(this,arguments)},_flagsToStrings:["-"],flagsToString:function(a){var b=q._flagsToStrings[0|a];return b||(b=[],a&q.CHILDREN_INVALID&&b.push("children"),a&q.MODEL_INVALID&&b.push("model"),a&q.STYLES_INVALID&&b.push("styles"),a&q.SIZE_INVALID&&b.push("size"),a&q.LAYOUT_INVALID&&b.push("layout"),q._flagsToStrings[a]=b=b.join(" ")),b}};Object.defineProperty(q,"instances",{value:j,enumerable:!0});var r={cidPrefix:"view",_attached:!1,_parentView:null,_viewDepth:null,_viewPhase:"initializing",_frameQueueId:-1,_renderFlags:0,properties:{cid:{get:function(){return this._cid||(this._cid=this.cidPrefix+i++)}},attached:{get:function(){return this._attached}},parentView:{get:function(){return this._parentView}},viewDepth:{get:function(){return this._getViewDepth()}},invalidated:{get:function(){return-1!==this._frameQueueId}},enabled:{get:function(){return this._enabled},set:function(a){this.setEnabled(a)}}},constructor:function(a){this.transform={},this.childViews={},this._applyRender=this._applyRender.bind(this),this.properties&&Object.defineProperties(this,this.properties),a&&a.className&&this.className&&(a.className+=" "+h.result(this,"className")),a&&a.parentView&&this._setParentView(a.parentView,!0),g.View.apply(this,arguments),this._viewPhase="initialized",null!==this.parentView&&this.trigger("view:parentChange",this.parentView,null),this.attached&&this.trigger("view:attached",this)},remove:function(){return"disposing"==this._viewPhase&&f(this,"remove","warn"),this._viewPhase="disposing",this._cancelRender(),this.$el.remove(),this._attached=!1,this.trigger("view:removed",this),this._setParentView(null),this.stopListening(),this.invalidated&&(console.warn("%s::remove invalidated after remove()",this.cid),this._cancelRender()),delete j[this.cid],this._viewPhase="disposed",this},_elementAttached:function(){this._attached=!0,this._viewDepth=null,this._setParentView(q.findByDescendant(this.el.parentElement)),"initialized"==this._viewPhase?this.trigger("view:attached",this):"replacing"==this._viewPhase&&(this._viewPhase="initialized",this.trigger("view:replaced",this))},_elementDetached:function(){this.attached&&"disposing"!=this._viewPhase&&"disposed"!=this._viewPhase||f(this,"_elementDetached","error"),this._attached=!1,this._viewDepth=null,("disposing"!=this._viewPhase||"disposed"==this._viewPhase)&&this.remove()},_setParentView:function(a,b){void 0===a&&(console.warn("$s::_setParentView invalid value '%s'",this.cid,a),a=null);var c=this._parentView;this._parentView=a,this._viewDepth=null,a!==c&&(null!==c&&this.cid in c.childViews&&delete c.childViews[this.cid],null!==a&&(a.childViews[this.cid]=this),b||this.trigger("view:parentChange",this,a,c))},whenAttached:function(){return q.whenViewIsAttached(this)},_getViewDepth:function(){return null===this._viewDepth&&(this._viewDepth=p(this)),this._viewDepth},setElement:function(a,b){if(this.el?(this.el!==a&&this.el.parentElement&&(this.attached&&(this._viewPhase="replacing"),this.el.parentElement.replaceChild(a,this.el)),g.View.prototype.setElement.apply(this,arguments),this.className&&h.result(this,"className").split(" ").forEach(function(a){this.el.classList.add(a)},this)):g.View.prototype.setElement.apply(this,arguments),void 0===this.el)throw new Error("Backbone view has no element");return j[this.cid]=this,this.el.cid=this.cid,this.el.setAttribute("data-cid",this.cid),this},requestAnimationFrame:function(a,b,c){return l.request(a.bind(c||this),b)},cancelAnimationFrame:function(a){return l.cancel(a)},setImmediate:function(a,b){window.setImmediate(a.bind(b||this))},_applyRender:function(a){!this._skipLog;var b=this._renderFlags;this.trigger("view:render:before",this,b),this._renderFlags=0,this._frameQueueId=-1,this._renderFlags|=this.renderFrame(a,b),this.trigger("view:render:after",this,b),0!=this._renderFlags&&console.warn("%s::_applyRender [returned] flags: %s",this.cid,q.flagsToString(this._renderFlags),this._renderFlags)},_cancelRender:function(){if(-1!=this._frameQueueId){var a,b;a=this._frameQueueId,this._frameQueueId=-1,b=l.cancel(a),void 0===b?console.warn("%s::_cancelRender ID:%i not found",this.cid,a):null===b&&console.warn("%s::_cancelRender ID:%i already cancelled",this.cid,a)}},_requestRender:function(){-1==this._frameQueueId&&(this._frameQueueId=l.request(this._applyRender,isNaN(this.viewDepth)?Number.MAX_VALUE:this.viewDepth))},requestRender:function(a){return void 0!==a&&(this._renderFlags|=a),this._requestRender(),this},renderFrame:function(a,b){return q.NONE_INVALID},renderNow:function(a){if(-1!=this._frameQueueId){this._cancelRender();a=!0}return a&&this._applyRender(n()),this},requestChildrenRender:function(a,b,c){var d,e;for(d in this.childViews)e=this.childViews[d],e.skipTransitions=!!(a&q.SIZE_INVALID),e.requestRender(a),b&&e.renderNow(c)},render:function(){return this.renderNow(!0)},_enabled:void 0,setEnabled:function(a){this._enabled=a}};b.exports=g.View.extend(r,q)},{"app/view/base/FrameQueue":61,"app/view/base/PrefixedEvents":63,"app/view/base/ViewError":66,"app/view/promise/whenViewIsAttached":86,backbone:"backbone",underscore:"underscore","utils/prefixedEvent":117,"utils/prefixedProperty":118,"utils/prefixedStyleName":119}],66:[function(a,b,c){function d(a,b){this.view=a,this.err=b,this.message=b.message}d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="ViewError",b.exports=d},{}],67:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i=a.escapeExpression,j="function";return'<a href="'+i((c.global||b&&b.global||h).call(g,"APP_ROOT",{name:"global",hash:{},data:e}))+"#"+i((f=null!=(f=c.handle||(null!=b?b.handle:b))?f:h,typeof f===j?f.call(g,{name:"handle",hash:{},data:e}):f))+'">'+i((f=null!=(f=c.name||(null!=b?b.name:b))?f:h,typeof f===j?f.call(g,{name:"name",hash:{},data:e}):f))+"</a>\n"},useData:!0})},{"hbsfy/runtime":25}],68:[function(a,b,c){var d=a("app/view/base/View"),e=a("./ArticleButton.hbs"),f=d.extend({cidPrefix:"articleButton",tagName:"h2",className:"article-button",template:e,events:{"click a":function(a){a.defaultPrevented||a.preventDefault(),this.trigger("view:click",this.model)}},renderFrame:function(a,b){this.el.innerHTML=this.template(this.model.toJSON())}});b.exports=f},{"./ArticleButton.hbs":67,"app/view/base/View":65}],69:[function(a,b,c){var d=a("app/view/base/View"),e=a("utils/net/toAbsoluteURL"),f=e(a("app/control/Globals").APP_ROOT),g=d.extend({cidPrefix:"articleView",tagName:"article",className:"article-view markdown-html",initialize:function(a){},renderFrame:function(a,b){this.el.innerHTML=this.model.get("text"),this.el.querySelectorAll("a[href]").forEach(function(a){var b=e(a.getAttribute("href"));0!==b.indexOf(f)&&a.setAttribute("target","_blank")})}});b.exports=g},{"app/control/Globals":41,"app/view/base/View":65,"utils/net/toAbsoluteURL":116}],70:[function(a,b,c){var d=a("underscore"),e=a("hammerjs"),f=a("backbone.babysitter"),g=a("app/control/Globals"),h=a("app/view/base/View"),i=a("app/view/render/CarouselRenderer"),j=a("utils/prefixedProperty"),k=a("utils/prefixedStyleName"),l=k("transform"),m=j("transform"),n=g.TRANSLATE_TEMPLATE,o=20,p=e.DIRECTION_VERTICAL,q=e.DIRECTION_HORIZONTAL,r=function(a,b){
try{return a.get("hpan").options.direction==b}catch(c){return!1}},s=function(a,b,c){var d=new e.Manager(a),f=new e.Pan({threshold:15,direction:b}),g=new e.Tap({threshold:c-1,interval:50,time:200});return g.recognizeWith(f),d.add([f,g]),d},t={ANIMATED:!1,IMMEDIATE:!0,DIRECTION_VERTICAL:p,DIRECTION_HORIZONTAL:q,defaults:{selectOnScrollEnd:!1,requireSelection:!1,direction:q,selectThreshold:20,rendererFunction:function(){var a=i.extend({className:"carousel-item default-renderer"}),b=i.extend({className:"carousel-item empty-renderer"});return function(c,d,e){return-1===d?b:a}}()}};t.validOptions=d.keys(t.defaults);var u={cidPrefix:"carousel",tagName:"div",className:"carousel skip-transitions",properties:{scrolling:{get:function(){return this._scrolling}}},events:{"transitionend .carousel-item.selected":"_onScrollTransitionEnd"},initialize:function(a){d.bindAll(this,"_onTouchEvent"),this.itemViews=new f,this.metrics={},d.extend(this,d.defaults(d.pick(a,t.validOptions),t.defaults)),this.childGap=this.dirProp(20,18),this._precedingDir=(e.DIRECTION_LEFT|e.DIRECTION_UP)&this.direction,this._followingDir=(e.DIRECTION_RIGHT|e.DIRECTION_DOWN)&this.direction,r(a.touch,this.direction)?this.touch=a.touch:(console.warn("%s::initializeHammer using private Hammer instance",this.cid),this.touch=s(this.el,this.direction),this.listenTo(this,"view:removed",function(){this.touch.destroy()})),this.setEnabled(!0),this.skipTransitions=!0,this._renderFlags=h.CHILDREN_INVALID,this.listenTo(this,"view:attached",function(){this.skipTransitions=!0,this.requestRender(h.SIZE_INVALID|h.LAYOUT_INVALID)}),this.listenTo(this.collection,{reset:this._onReset,"select:one":this._onSelectOne,"select:none":this._onSelectNone,"deselect:one":this._onDeselectAny,"deselect:none":this._onDeselectAny})},remove:function(){return this._toggleTouchEvents(!1),this.removeChildren(),h.prototype.remove.apply(this,arguments),this},dirProp:function(a,b){return this.direction&q?a:b},renderFrame:function(a,b){b&h.CHILDREN_INVALID&&(this._createChildren(),b&=~h.CHILDREN_INVALID),this.attached?(b&h.SIZE_INVALID&&this._measure(),b&(h.LAYOUT_INVALID|h.SIZE_INVALID)&&this._scrollBy(this._delta,this.skipTransitions)):b&&this.listenToOnce(this,"view:attached",function(){this.requestRender(b)})},_enabled:void 0,setEnabled:function(a){this._enabled!==a&&(this._enabled=a,this._toggleTouchEvents(a),this.el.classList.toggle("disabled",!this.enabled),this.itemViews.each(function(a){a.setEnabled(this.enabled)},this))},_renderEnabled:function(){this.el.classList.toggle("disabled",!this.enabled),this.itemViews.each(function(a){a.setEnabled(this.enabled)},this)},_createChildren:function(){var a,b,c,d;this.removeChildren(),this.collection.length&&(d={enabled:this.enabled},a=document.createDocumentFragment(),this.requireSelection||(b=this.rendererFunction(null,-1,this.collection),c=new b(d),this.itemViews.add(c),a.appendChild(c.el),this.emptyView=c),this.collection.each(function(e,f,g){d.model=e,b=this.rendererFunction(e,f,g),c=new b(d),this.itemViews.add(c),a.appendChild(c.el)},this),this.adjustToSelection(),this._selectedView.el.classList.add("selected"),this.el.appendChild(a))},removeChildren:function(){this.itemViews.each(this.removeItemView,this),this.emptyView=void 0},removeItemView:function(a){return this.itemViews.remove(a),a.remove(),a},_measure:function(){var a,b,c,d,e=0,f=0,g=0,h=0;c=d=this.emptyView||this.itemViews.first(),this.itemViews.each(function(a){a.render()}),this.itemViews.each(function(b){a=this.measureItemView(b),a.pos=e,e+=a.outer+this.childGap,a.posInner=f,f+=a.inner+this.childGap,b!==this.emptyView&&(a.across>g&&(g=a.across,d=b),a.outer>h&&(h=a.outer,c=b))},this),b=this.metrics[this.cid]||(this.metrics[this.cid]={}),b.outer=this.el[this.dirProp("offsetWidth","offsetHeight")],b.before=c.el[this.dirProp("offsetLeft","offsetTop")],b.inner=c.el[this.dirProp("offsetWidth","offsetHeight")],b.after=b.outer-(b.inner+b.before),b.across=g,this._tapAcrossBefore=d.el[this.dirProp("offsetTop","offsetLeft")],this._tapAcrossAfter=this._tapAcrossBefore+g,this._tapBefore=b.before+this._tapGrow,this._tapAfter=b.before+b.inner-this._tapGrow,this.selectThreshold=Math.min(o,.1*b.outer)},measureItemView:function(a){var b,c;return c=a.el,b=this.metrics[a.cid]||(this.metrics[a.cid]={}),b.outer=c[this.dirProp("offsetWidth","offsetHeight")],b.across=c[this.dirProp("offsetHeight","offsetWidth")],a.metrics?(b.before=a.metrics[this.dirProp("marginLeft","marginTop")],b.outer+=b.before,b.outer+=a.metrics[this.dirProp("marginRight","marginBottom")],b.inner=a.metrics.content[this.dirProp("width","height")],b.before+=a.metrics.content[this.dirProp("x","y")],b.after=b.outer-(b.inner+b.before)):(console.warn("%s::measureItemView view '%s' has no metrics",this.cid,a.cid),b.inner=b.outer,b.after=b.before=0),b},_delta:0,_scrolling:!1,_setScrolling:function(a){this._scrolling!=a&&(this._scrolling=a,this.el.classList.toggle("scrolling",a),this.trigger(a?"view:scrollstart":"view:scrollend"))},scrollBy:function(a,b){this._delta=a||0,this.skipTransitions=!!b,this.requestRender(h.LAYOUT_INVALID)},_scrollBy:function(a,b){var c,d,e;c=this.metrics[(this._scrollCandidateView||this._selectedView).cid],this.itemViews.each(function(b){d=this.metrics[b.cid],e=Math.floor(this._getScrollOffset(a,d,c)),b.metrics.translateX=this.direction&q?e:0,b.metrics.translateY=this.direction&q?0:e,b.metrics._transform=n(b.metrics.translateX,b.metrics.translateY),b.el.style[m]=b.metrics._transform},this),this.el.classList.toggle("skip-transitions",b),this.selectFromView()},_getScrollOffset:function(a,b,c){var d,e=0;return d=b.pos-c.pos+a,0>d?e+=Math.abs(d)<b.outer?-b.after/b.outer*d:b.after:d>=0&&(e-=Math.abs(d)<b.outer?b.before/b.outer*d:b.before),d+e},_onScrollTransitionEnd:function(a){a.propertyName===l&&this.scrolling&&this._setScrolling(!1)},_toggleTouchEvents:function(a){this._touchEventsEnabled!==a&&(this._touchEventsEnabled=a,a?this.touch.on("hpanstart hpanmove hpanend hpancancel tap",this._onTouchEvent):this.touch.off("hpanstart hpanmove hpanend hpancancel tap",this._onTouchEvent))},_onTouchEvent:function(a){switch(a.type){case"tap":return this._onTap(a);case"hpanstart":return this._onPanStart(a);case"hpanmove":return this._onPanMove(a);case"hpanend":return this._onPanFinal(a);case"hpancancel":return this._onPanFinal(a)}},_onPanStart:function(a){this.selectFromView(),this.el.classList.add("panning"),this._setScrolling(!0)},_onPanMove:function(a){var b=this.getViewAtPanDir(a.offsetDirection),c=this.direction&q?a.thresholdDeltaX:a.thresholdDeltaY;this._panCandidateView!==b&&(this._panCandidateView&&this._panCandidateView.el.classList.remove("candidate"),this._panCandidateView=b,this._panCandidateView&&this._panCandidateView.el.classList.add("candidate")),void 0===this._panCandidateView&&(c*=g.HPAN_OUT_DRAG),-1!==this._renderRafId?(this.scrollBy(c,t.IMMEDIATE),this.renderNow()):this._scrollBy(c,t.IMMEDIATE)},_onPanFinal:function(a){var b,c=this.direction&q?a.thresholdDeltaX:a.thresholdDeltaY;"hpanend"==a.type&&a.direction^a.offsetDirection^this.direction&&Math.abs(c)>this.selectThreshold&&(b=this.getViewAtPanDir(a.offsetDirection)),this._scrollCandidateView=b||void 0,this._panCandidateView&&this._panCandidateView!==b&&this._panCandidateView.el.classList.remove("candidate"),this._panCandidateView=void 0,this.el.classList.remove("panning"),this.scrollBy(0,t.ANIMATED),this.selectFromView()},getViewAtPanDir:function(a){return a&this._followingDir?this._precedingView:this._followingView},_tapGrow:10,getViewAtTapPos:function(a,b){if(this._tapAcrossBefore<b&&b<this._tapAcrossAfter){if(a<this._tapBefore)return this._precedingView;if(a>this._tapAfter)return this._followingView}return void 0},_onTap:function(a){var b=h.findByDescendant(a.target);do{if(this._selectedView===b)return;if(this===b)break}while(b=b.parentView);var c=this.el.getBoundingClientRect(),d=a.center.x-c.left,e=a.center.y-c.top,f=this.getViewAtTapPos(this.dirProp(d,e),this.dirProp(e,d));f&&(a.preventDefault(),this._scrollCandidateView=f,this._setScrolling(!0),this.scrollBy(0,t.ANIMATED),this.triggerSelectionEvents(f,!0))},triggerSelectionEvents:function(a,b){void 0===a||this._internalSelection||(this._internalSelection=!!b,a===this.emptyView?this.trigger("view:select:none"):this.trigger("view:select:one",a.model),this._internalSelection=!1)},selectFromView:function(){if(void 0!==this._scrollCandidateView){var a=this._scrollCandidateView;this._scrollCandidateView=void 0,a.el.classList.remove("candidate"),this.triggerSelectionEvents(a,!0)}},adjustToSelection:function(){var a,b=this.collection.selectedIndex;this.requireSelection?(-1==b&&b++,this._selectedView=(a=this.collection.at(b))&&this.itemViews.findByModel(a),this._precedingView=(a=this.collection.at(b-1))&&this.itemViews.findByModel(a),this._followingView=(a=this.collection.at(b+1))&&this.itemViews.findByModel(a)):(this._selectedView=(a=this.collection.at(b))?this.itemViews.findByModel(a):this.emptyView,this._precedingView=a&&((a=this.collection.at(b-1))?this.itemViews.findByModel(a):this.emptyView),this._followingView=(a=this.collection.at(b+1))&&this.itemViews.findByModel(a))},_onSelectOne:function(a){a!==this._selectedView.model&&this._onSelectAny(a)},_onSelectNone:function(){(this.requireSelection?this.itemViews.first():this.emptyView)!==this._selectedView&&this._onSelectAny()},_onSelectAny:function(a){this._selectedView.el.classList.remove("selected"),this.adjustToSelection(),this._selectedView.el.classList.add("selected"),this._internalSelection||(this._setScrolling(!0),this.scrollBy(0,t.ANIMATED))},_onReset:function(){this.requestRender(h.CHILDREN_INVALID|h.MODEL_INVALID)}};b.exports=t=h.extend(u,t)},{"app/control/Globals":41,"app/view/base/View":65,"app/view/render/CarouselRenderer":87,"backbone.babysitter":"backbone.babysitter",hammerjs:"hammerjs",underscore:"underscore","utils/prefixedProperty":118,"utils/prefixedStyleName":119}],71:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return a.escapeExpression((f=null!=(f=c.id||(null!=b?b.id:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"id",hash:{},data:e}):f))},useData:!0})},{"hbsfy/runtime":25}],72:[function(a,b,c){var d=a("app/view/base/View"),e=a("utils/setImmediate"),f=a("./CollectionStack.hbs");b.exports=d.extend({cidPrefix:"stack",tagName:"div",className:"stack",template:f,events:{transitionend:function(a){this._renderContent()}},initialize:function(a){this._enabled=!0,this._skipTransitions=!0,this._contentInvalid=!0,a.template&&(this.template=a.template),this.content=document.createElement("div"),this.content.className="stack-item",this.el.appendChild(this.content),this.listenTo(this.collection,"select:one select:none",this._onSelectChange)},setEnabled:function(a){this._enabled!==a&&(this._enabled=a,this.el.classList.toggle("disabled",!this._enabled))},_onSelectChange:function(a){if(this._renderedItem===this.collection.selected)throw new Error("change event received but item is identical");this._renderedItem=this.collection.selected,this._contentInvalid=!0,this.render()},render:function(){return this._skipTransitions?(this._skipTransitions=!1,this.el.classList.add("skip-transitions"),e(function(){this.el.classList.remove("skip-transitions")}.bind(this)),this._contentInvalid&&this._renderContent()):this._contentInvalid&&this.content.classList.remove("current"),this},_renderContent:function(){if(this._contentInvalid){this._contentInvalid=!1;var a=this.collection.selected;this.content.innerHTML=a?this.template(a.toJSON()):"",this.content.classList.add("current")}}})},{"./CollectionStack.hbs":71,"app/view/base/View":65,"utils/setImmediate":121}],73:[function(a,b,c){var d=a("underscore"),e=a("backbone.babysitter"),f=a("app/view/base/View"),g=a("app/view/render/ClickableRenderer"),h=a("utils/prefixedProperty"),i=a("utils/css/getBoxEdgeStyles"),j=function(a,b){return a.reduce(function(a,c,d,e){return-1==b.indexOf(c)&&a.push(c),a},[])},k=a("app/control/Globals").TRANSLATE_TEMPLATE,l=h("transform"),m=f.extend({cidPrefix:"filterableList",tagName:"ul",className:"list selectable filterable",defaults:{collapsed:!0,filterFn:function(){return!0},renderer:g.extend({cidPrefix:"listItem"})},properties:{collapsed:{get:function(){return this._collapsed},set:function(a){this._setCollapsed(a)}},filteredItems:{get:function(){return this._filteredItems}}},events:{"transitionend .list-item":function(a){this._collapsedTransitioning&&"visibility"===a.propertyName&&(this._collapsedTransitioning=!1,this.el.classList.remove("collapsed-changed"))}},initialize:function(a){this._metrics={},this._itemMetrics=[],this.itemViews=new e,d.defaults(a,this.defaults),this.renderer=a.renderer,this._filterFn=a.filterFn,this.collection.each(this.createItemView,this),this.refresh(),this._setSelection(this.collection.selected),this._setCollapsed(a.collapsed),this.listenTo(this,"view:attached",function(){this.skipTransitions=!0,this.requestRender(f.SIZE_INVALID|f.LAYOUT_INVALID)}),this.listenTo(this.collection,"select:one select:none",this._setSelection),this.listenTo(this.collection,"reset",function(){throw this._allItems=null,new Error("not implemented")})},renderFrame:function(a,b){this._collapsedTransitioning&&console.warn("%s::renderFrame collapsed transition interrupted",this.cid),this._collapsedTransitioning=!this.skipTransitions&&this._collapsedChanged,this.el.classList.toggle("collapsed-changed",this._collapsedTransitioning),this.el.classList.toggle("skip-transitions",this.skipTransitions),this.skipTransitions&&(this.skipTransitions=!1,this.setImmediate(function(){this.requestRender(f.LAYOUT_INVALID)})),this._collapsedChanged&&(b|=f.SIZE_INVALID,this.el.classList.toggle("collapsed",this._collapsed)),this._selectionChanged&&(b|=f.LAYOUT_INVALID,this.renderSelection(this.collection.selected,this.collection.lastSelected)),this._filterChanged&&(b|=f.LAYOUT_INVALID,this.renderFilterFn()),b&f.SIZE_INVALID&&this.measure(),b&(f.LAYOUT_INVALID|f.SIZE_INVALID)&&this.renderLayout(),this._collapsedChanged=this._selectionChanged=this._filterChanged=!1},measure:function(){this._metrics=i(this.el,this._metrics),this.itemViews.forEach(function(a){a._metrics||(a._metrics={}),a._metrics.offsetTop=a.el.offsetTop,a._metrics.offsetHeight=a.el.offsetHeight,a._metrics.offsetLeft=a.el.offsetLeft,a._metrics.offsetWidth=a.el.offsetWidth,!this._collapsed&&a.label?(a._metrics.textLeft=a.label.offsetLeft,a._metrics.textWidth=a.label.offsetWidth):(a._metrics.textLeft=a._metrics.offsetLeft,a._metrics.textWidth=a._metrics.offsetWidth)},this)},renderLayout:function(){var a,b;a=this._metrics.paddingLeft,b=this._metrics.paddingTop;for(var c=0,d=this.el.children.length;d>c;c++){var e=this.itemViews.findByCid(this.el.children[c].cid);(this.collection.selected&&!e.model.selected||e.el.classList.contains("excluded"))&&this._collapsed?(e.transform.tx=a,e.transform.ty=b):(0==e._metrics.offsetHeight&&(b-=e._metrics.offsetTop),e.transform.tx=a,e.transform.ty=b,b+=e._metrics.offsetHeight+e._metrics.offsetTop),e.el.style[l]=k(e.transform.tx,e.transform.ty)}b+=this._metrics.paddingBottom,this.el.style.height=b>0?b+"px":""},createItemView:function(a,b){var c=new this.renderer({model:a,el:this.el.querySelector('.list-item[data-id="'+a.id+'"]')});return a.set("excluded",!1,{silent:!0}),this.listenTo(c,"renderer:click",this._onRendererClick),c.listenTo(a,"change:excluded",function(a,b){this.el.classList.contains("excluded")!==b&&console.warn("%s:[change:excluded] m:%o css: %o",this.cid,b,this.el.classList.contains("excluded"))}),this.itemViews.add(c),c},_onRendererClick:function(a,b){this._collapsedTransitioning||this._collapsed&&a.get("excluded")||(this.collection.selected!==a?this.trigger("view:select:one",a):b.altKey?this.trigger("view:select:none"):this.trigger("view:select:same",a))},_collapsed:void 0,_setCollapsed:function(a){a!==this._collapsed&&(this._collapsed=a,this._collapsedChanged=!0,this.requestRender())},_selectedItem:void 0,_setSelection:function(a){this._selectedItem=a,this._selectionChanged=!0,this._requestRender()},renderSelection:function(a,b){var c;b&&(c=this.itemViews.findByModel(b),c.el.classList.remove("selected")),a&&(c=this.itemViews.findByModel(a),c.el.classList.add("selected"))},refresh:function(){this._filterFn&&(this._filterChanged=!0,this.requestRender())},renderFilterFn:function(){var a=this._filterFn?this.collection.filter(this._filterFn,this):this._getAllItems();this.renderFilters(a,this._filteredItems),this._filteredItems=a},renderFilters:function(a,b){var c=!(!a||!a.length),d=!(!b||!b.length);c&&j(d?b:this._getAllItems(),a).forEach(function(a){this.itemViews.findByModel(a).el.classList.add("excluded"),a.set("excluded",!0)},this),d&&j(c?a:this._getAllItems(),b).forEach(function(a){this.itemViews.findByModel(a).el.classList.remove("excluded"),a.set("excluded",!1)},this),this.el.classList.toggle("has-excluded",c)},_getAllItems:function(){return this._allItems||(this._allItems=this.collection.slice())}});b.exports=m},{"app/control/Globals":41,"app/view/base/View":65,"app/view/render/ClickableRenderer":88,"backbone.babysitter":"backbone.babysitter",underscore:"underscore","utils/css/getBoxEdgeStyles":112,"utils/prefixedProperty":118}],74:[function(a,b,c){function d(a,b){if("object"==typeof b)for(var c in b)switch(typeof a[c]){case"undefined":break;case"function":Array.isArray(b[c])?a[c].apply(a,b[c]):a[c].call(a,b[c]);break;default:a[c]=b[c]}}var e=a("underscore"),f=a("color"),g=a("app/view/base/CanvasView"),h=a("app/control/Globals"),i=a("utils/canvas/calcArcHConnector"),j=a("utils/geom/inflateRect"),k=a("utils/canvas/CanvasHelper"),l={lineCap:"butt",lineWidth:.75,lineDashOffset:0,setLineDash:[[]],radiusBase:14,radiusIncrement:3,outlineWidth:4.5},m=g.extend({cidPrefix:"graph",tagName:"canvas",className:"graph",defaultKey:"amount",defaults:{values:{amount:0},maxValues:{amount:1}},initialize:function(a){g.prototype.initialize.apply(this,arguments),this._listA=a.listA,this._listB=a.listB,this._a2b={srcView:a.listA,destView:a.listB,s:e.defaults({lineWidth:1.5},l),strokeStyleFn:function(a,b,c){return f(c).mix(b,.9).hexString()}},this._b2a={srcView:a.listB,destView:a.listA,s:e.defaults({lineWidth:.7},l),strokeStyleFn:function(a,b,c){return f(a).mix(b,.8).hexString()}},this.listenTo(this,"view:render:before",this._beforeViewRender)},updateCanvas:function(a){this._updateMetrics(),this._updateStyles()},_updateStyles:function(){var a,b,c;this.model.get("withBundle")?(a=this.model.get("bundle"),c=a.colors.lnColor.clone(),b=a.colors.bgColor.clone()):(b=f(h.DEFAULT_COLORS["background-color"]),c=f(h.DEFAULT_COLORS["--link-color"])),this._a2b.s.strokeStyle=this._a2b.s.fillStyle=this._a2b.strokeStyleFn(this._color,b,c),this._b2a.s.strokeStyle=this._b2a.s.fillStyle=this._b2a.strokeStyleFn(this._color,b,c)},_setStyle:function(a){"string"==typeof a&&(a=this._styleData[a]),d(this._ctx,a)},_updateMetrics:function(){var a=this.el.getBoundingClientRect();this._ctx.setTransform(this._canvasRatio,0,0,this._canvasRatio,-a.left*this._canvasRatio-.5,-a.top*this._canvasRatio-.5);var b,c,d,e,f,g,h;for(e=this._listA.el.getBoundingClientRect(),g=e.left,d=this._listA.el.querySelectorAll(".label"),b=0,c=d.length;c>b;b++)g=Math.max(g,d[b].getBoundingClientRect().right);for(f=this._listB.el.getBoundingClientRect(),h=f.left,d=this._listB.el.querySelectorAll(".label"),b=0,c=d.length;c>b;b++)h=Math.min(h,d[b].getBoundingClientRect().left);this._b2a.destRect=this._a2b.rect=e,this._b2a.destMinX=this._a2b.xMin=g,this._a2b.destRect=this._b2a.rect=f,this._a2b.destMinX=this._b2a.xMin=h},_beforeViewRender:function(a,b){b&(g.SIZE_INVALID|g.MODEL_INVALID)&&(this._a2b.pointsOut=this._a2b.points,this._a2b.maxLengthOut=this._a2b.maxLength,this._a2b.points=null,this._a2b.maxLength=null,this._b2a.pointsOut=this._b2a.points,this._b2a.maxLengthOut=this._b2a.maxLength,this._b2a.points=null,this._b2a.maxLength=null,this._groupRects=null)},redraw:function(a,b){this._clearCanvas(0,0,this._canvasWidth,this._canvasHeight),a.save(),this._redraw_fromElements(a,b),a.restore()},_drawConnectors:function(a,b,c,d,e){var f,g;if(a&&(g=a.length)&&d>0){var h=b.radiusIncrement+b.lineWidth,i=h+(b.outlineWidth-b.lineWidth);for(this._setStyle(b),1>d&&(this._ctx.lineDashOffset=c*(1+d),this._ctx.setLineDash([c,c])),f=0;g>f;f++)this._ctx.save(),this._ctx.globalCompositeOperation="destination-out",this._ctx.lineWidth=b.outlineWidth,this._drawConnector(a[f]),1==d&&k.arrowhead(this._ctx,a[f].x2,a[f].y2,i,Math.PI*e,!0,b),this._ctx.restore(),this._drawConnector(a[f]),1==d&&k.arrowhead(this._ctx,a[f].x2,a[f].y2,h,Math.PI*e,!0,b)}},_redraw_fromElements:function(a,b){null===this._b2a.points&&this._computeConnectors2(this._b2a),null===this._a2b.points&&this._computeConnectors2(this._a2b);var c=b._valueData.amount._renderedValue/b._valueData.amount._maxVal;if(this._drawConnectors(this._b2a.points,this._b2a.s,this._b2a.maxLength,c,1),this._drawConnectors(this._b2a.pointsOut,this._b2a.s,this._b2a.maxLengthOut,1-c,1),this._drawConnectors(this._a2b.points,this._a2b.s,this._a2b.maxLength,1,2),null===this._groupRects){this._groupRects=[];for(var d=this._listB.el.querySelectorAll(".list-group .label span"),e=0,f=d.length;f>e;e++)this._groupRects[e]=j(d[e].getBoundingClientRect(),-8.5,-4.5)}this._groupRects.forEach(function(a){this._ctx.clearRect(a.left,a.top,a.width-1,a.height-1)},this)},_computeConnectors2:function(a){var b,c,d,e,f,g,h=a.s.radiusBase,j=a.s.radiusIncrement,k=a.xMin,l=a.destMinX,m=0,n=[];c=a.rect.right<a.destRect.left?1:a.destRect.right<a.rect.left?-1:0;var o,p,q,r,s;if(a.srcView.collection.selected&&a.destView.filteredItems){for(o=a.srcView.itemViews.findByModel(a.srcView.collection.selected),d=a.rect.left+o.transform.tx+o._metrics.textLeft,e=a.rect.top+o.transform.ty+o._metrics.offsetHeight/2,c>0&&(d+=o._metrics.textWidth),q=a.destView.filteredItems,r=a.destView.filteredItems.length,s=0;r>s;s++)p=a.destView.itemViews.findByModel(q[s]),b={},b.x2=a.destRect.left+p.transform.tx+p._metrics.textLeft,b.y2=a.destRect.top+p.transform.ty+p._metrics.offsetHeight/2,0>c&&(b.x2+=p._metrics.textWidth),b.x1=d,b.y1=e,b.dx=d-b.x2,b.dy=e-b.y2,b.qx=c,n[s]=b;for(n.sort(function(a,b){return a.y2-b.y2}),g=0,s=0;r>s;s++)b=n[s],b.di=b.dy>0?s:r-(s+1),g=Math.max(g,b.di);var t,u=.5*r*j;for(s=0;r>s;s++)b=n[s],b.r1=b.di*j+h,b.r2=h,b.cx1=k,b.cx2=l-(g-b.di)*j*c,t=(s-(r-1)/2)*j,b.cy1=b.y1+t,b.cy2=b.y2,t=Math.abs(t),b.r0=t,b.cx0=b.x1+(u-t)*c,f=i(b.cx1,b.cy1,b.r1,b.cx2,b.cy2,b.r2,.8),f?(b.tx1=f[0],b.tx2=f[1]):(b.tx1=b.cx1,b.tx2=b.cx2),m=Math.max(m,Math.abs(b.x1-b.x2)+Math.abs(b.cy1-b.cy2));n.sort(function(a,b){return b.di-a.di})}a.points=n,a.maxLength=m,a.xDir=c},_drawConnector:function(a){this._ctx.beginPath(),this._ctx.moveTo(a.x2,a.cy2),this._ctx.arcTo(a.tx2,a.cy2,a.tx1,a.cy1,a.r2),this._ctx.arcTo(a.tx1,a.cy1,a.cx1,a.cy1,a.r1),this._ctx.arcTo(a.cx0,a.cy1,a.cx0,a.y1,a.r0),this._ctx.stroke()}});b.exports=m},{"app/control/Globals":41,"app/view/base/CanvasView":60,color:"color",underscore:"underscore","utils/canvas/CanvasHelper":110,"utils/canvas/calcArcHConnector":111,"utils/geom/inflateRect":115}],75:[function(a,b,c){var d=a("underscore"),e=a("app/view/component/FilterableListView"),f=a("app/view/render/ClickableRenderer"),g=a("app/view/render/LabelRenderer"),h=e.extend({cidPrefix:"groupingList",tagName:"dl",className:"grouped",_groupingFn:null,defaults:d.defaults({renderer:f.extend({cidPrefix:"groupingListItem",tagName:"dl",className:"list-item list-label"}),groupingRenderer:g.extend({cidPrefix:"groupingListGroup",tagName:"dt",className:"list-group list-label"}),groupingFn:null},e.prototype.defaults),properties:{groups:{get:function(){return this._groups}}},initialize:function(a){e.prototype.initialize.apply(this,arguments),this._groups=[],this._groupsByItemCid={},this._groupingFn=a.groupingFn,this.groupingRenderer=a.groupingRenderer,this._refreshGroups(),this._groupingFn&&this._groups.forEach(this.createGroupingView,this)},_refreshGroups:function(){this._groups.length=0,this._groupingFn?this.collection.forEach(function(a){var b,c=this._groupingFn.apply(null,arguments);c&&(b=this._groups.indexOf(c),-1==b&&(b=this._groups.length,this._groups[b]=c)),this._groupsByItemCid[a.cid]=c},this):this.collection.forEach(function(a){this._groupsByItemCid[a.cid]=null},this)},renderFilterFn:function(){if(e.prototype.renderFilterFn.apply(this,arguments),this._groupingFn)if(0==this._filteredItems.length)this._groups.forEach(function(a){this.itemViews.findByModel(a).el.classList.remove("excluded")},this);else{var a=this._filteredItems.map(function(a){return this._groupsByItemCid[a.cid]},this);this._groups.forEach(function(b){this.itemViews.findByModel(b).el.classList.toggle("excluded",-1==a.indexOf(b))},this)}},createGroupingView:function(a){var b=new this.groupingRenderer({model:a,el:this.el.querySelector('.list-group[data-id="'+a.id+'"]')});return this.itemViews.add(b),b}});b.exports=h},{"app/view/component/FilterableListView":73,"app/view/render/ClickableRenderer":88,"app/view/render/LabelRenderer":95,underscore:"underscore"}],76:[function(a,b,c){b.exports=a("app/view/component/progress/CanvasProgressMeter3")},{"app/view/component/progress/CanvasProgressMeter3":78}],77:[function(a,b,c){var d=a("backbone.babysitter"),e=a("app/view/base/View"),f=a("app/view/render/DefaultSelectableRenderer"),g=a("app/view/render/ClickableRenderer"),h=e.extend({cidPrefix:"selectableList",tagName:"ul",className:"list selectable",renderer:f,initialize:function(a){this._enabled=!0,this._childrenInvalid=!0,a.renderer&&(this.renderer=a.renderer),this.showEmpty=!!a.showEmpty,this.itemViews=new d,this.listenTo(this.collection,"add remove reset",this._onCollectionChange)},remove:function(){return this.removeChildren(),e.prototype.remove.apply(this,arguments),this},_onCollectionChange:function(a){this._childrenInvalid=!0,this.render()},render:function(){return this._childrenInvalid&&(this._childrenInvalid=!1,this.createChildren()),this},setEnabled:function(a){this._enabled!==a&&(this._enabled=a,this.el.classList.toggle("disabled",!this._enabled))},createChildren:function(){var a,b;this.removeChildren(),this.el.innerHTML="",this.collection.length&&(a=document.createDocumentFragment(),this.showEmpty&&(b=this.createEmptyView(),a.appendChild(b.render().el)),this.collection.each(function(c,d,e){b=this.createItemView(c,d),a.appendChild(b.render().el)},this),this.el.appendChild(a))},createItemView:function(a,b){var c=new this.renderer({model:a});return this.itemViews.add(c),this.listenTo(c,"renderer:click",this.onItemViewClick),c},removeChildren:function(){this.itemViews.each(this.removeItemView,this)},removeItemView:function(a){return this.stopListening(a),this.itemViews.remove(a),a.remove(),a},onItemViewClick:function(a){this.collection.selected!==a&&this._enabled&&this.trigger("view:select:one",a)},createEmptyView:function(){var a=new h.EmptyRenderer({model:this.collection});return this.itemViews.add(a),this.listenTo(a,"renderer:click",function(){this._enabled&&this.trigger("view:select:none")}),a}},{EmptyRenderer:g.extend({tagName:"li",className:"list-item empty-item",initialize:function(a){this.listenTo(this.model,"selected deselected",this.renderClassList),this.renderClassList()},render:function(){return this.el.innerHTML='<a href="#clear"><b> </b></a>',this.renderClassList(),this},renderClassList:function(){this.el.classList.toggle("selected",-1===this.model.selectedIndex)}})});b.exports=h},{"app/view/base/View":65,"app/view/render/ClickableRenderer":88,"app/view/render/DefaultSelectableRenderer":90,"backbone.babysitter":"backbone.babysitter"}],78:[function(a,b,c){var d=(a("underscore"),a("app/control/Globals"),a("app/view/base/CanvasView")),e=(Math.PI,2*Math.PI),f=e/48,g={amount:{lineWidth:.8,radiusOffset:0},"not-available":{lineWidth:1,lineDash:[.3,.7]},available:{lineWidth:.8,inverse:"not-available"}},h=d.extend({cidPrefix:"canvasProgressMeter",className:"progress-meter canvas-progress-meter",defaultKey:"amount",defaults:{values:{amount:0,available:0,_loop:0},maxValues:{amount:1,available:1},useOpaque:!0,labelFn:function(a,b){return a/b*100|0}},initialize:function(a){d.prototype.initialize.apply(this,arguments),this._labelFn=a.labelFn,this._valueStyles={},this._canvasSize=null,this._canvasOrigin=null},_updateCanvas:function(){d.prototype._updateCanvas.apply(this,arguments);var a,b,c,e=function(a){return a*this.radius*f},h=function(a,b){return a+b};this._canvasSize=Math.min(this._canvasWidth,this._canvasWidth),this._maxDashArc=0;for(a in g)c=g[a],b=this._valueStyles[a]={},b.inverse=c.inverse,b.lineWidth=c.lineWidth*this._canvasRatio,b.radius=(this._canvasSize-b.lineWidth)/2,c.radiusOffset&&(b.radius+=c.radiusOffset*this._canvasRatio),c.lineDash&&c.lineDash.length?(b.lineDash=c.lineDash.map(e,b),b.lineDashArc=c.lineDash[0]*f,b.lineDashLength=b.lineDash.reduce(h),this._maxDashArc=Math.max(this._maxDashArc,b.lineDashArc)):b.lineDashArc=0;var i=this._getFontMetrics(this._fontFamily);this._baselineShift=i?(i.ascent+i.descent)/i.unitsPerEm:.7,this._baselineShift*=.5*this._fontSize,this._baselineShift=Math.round(this._baselineShift),this._ctx.restore(),this._ctx.setTransform(1,0,0,1,this._canvasWidth/2,this._canvasHeight/2),this._ctx.save()},redraw:function(a,b){this._clearCanvas(-this._canvasWidth/2,-this._canvasHeight/2,this._canvasWidth,this._canvasHeight);var c=b._valueData._loop._renderedValue||0,d=b._valueData.amount,g=b._valueData.available,h=this._valueStyles.amount,i=this._valueStyles.available;this.drawLabel(this._labelFn(d._renderedValue,d._maxVal)),this._ctx.save(),b.renderedKeys&&-1!==b.renderedKeys.indexOf("amount")&&d._lastRenderedValue>d._renderedValue&&(b.valueTo(1,0,"_loop"),b.valueTo(0,750,"_loop"),b.updateValue("_loop")),this._ctx.rotate(e*(1-c-.25));var j=f,k=0,l=c+d._renderedValue/d._maxVal;l>0&&(k=this.drawArc(h,l,j,e-j),this.drawEndCap(h,k),k+=2*j);var m=g.length||1,n=e/m,o=n%f,p=f+(o-i.lineDashArc)/2;if(Array.isArray(g))for(var q,r=0;m>r;r++)q=g[r],this.drawArc(i,q._renderedValue/(q._maxVal/m),r*n+p,(r+1)*n-p,k);else this.drawArc(i,g._renderedValue/g._maxVal,p,e-p,k);this._ctx.restore()},drawArc:function(a,b,c,d,e){var f,g,h,i,j,k;return e||(e=0),f=d-c,i=c+f*b,h=Math.max(c,e),i>h&&(this._ctx.save(),this.applyValueStyle(a),this._ctx.beginPath(),this._ctx.arc(0,0,a.radius,i,h,!0),this._ctx.stroke(),this._ctx.restore()),void 0!==a.inverse&&(g=this._valueStyles[a.inverse],k=i+f*(1-b),j=Math.max(i,e),k>j&&(this._ctx.save(),this.applyValueStyle(g),this._ctx.beginPath(),this._ctx.arc(0,0,g.radius,k,j,!0),this._ctx.stroke(),this._ctx.restore())),i},applyValueStyle:function(a){this._ctx.lineWidth=a.lineWidth,a.lineDash&&this._ctx.setLineDash(a.lineDash),a.lineDashOffset&&(this._ctx.lineDashOffset=a.lineDashOffset)},drawLabel:function(a){var b=this._ctx.measureText(a).width;this._ctx.fillText(a,b*-.5,this._baselineShift,b)},drawEndCap:function(a,b){var c=a.radius;this._ctx.save(),this._ctx.lineWidth=a.lineWidth,this._ctx.rotate(b-1.5*f),this._ctx.beginPath(),this._ctx.arc(0,0,c,.5*f,2*f,!1),this._ctx.lineTo(c-f*c,0),this._ctx.closePath(),this._ctx.fill(),this._ctx.stroke(),this._ctx.restore()}});b.exports=h},{"app/control/Globals":41,"app/view/base/CanvasView":60,underscore:"underscore"}],79:[function(a,b,c){function d(a,b,c){var d="";for(var e in c)d+=e+":"+c[e]+";";a.insertRule(b+"{"+d+"}",a.cssRules.length)}function e(a,b){return a+" "+b+", "+a+b}function f(a,b,c,f,g,i,j){var k,m,n,o;k=h.pick(c,l),k["-webkit-font-smoothing"]=j?"antialiased":"auto",d(a,b,k),k={},k.color=i.rgbString(),d(a,b+" a",k),d(a,b+" .color-ln",k),k={},k.color=f.clone().mix(g,.5).rgbString(),k["border-color"]=f.clone().mix(g,.7).rgbString(),d(a,b+" .color-fg05",k),n=f.rgbString(),o=g.rgbString(),m=b+" .color-reverse",k={color:n},d(a,b+" .color-fg",k),k={"background-color":o},d(a,b+" .color-bg",k),k={color:o},k["-webkit-font-smoothing"]=j?"auto":"antialiased",d(a,e(m,".color-fg"),k),k={"background-color":n},d(a,e(m,".color-bg"),k),k={stroke:n},d(a,b+" .color-stroke",k),
k={fill:o},d(a,b+" .color-fill",k),k={stroke:o},d(a,e(m,".color-stroke"),k),k={fill:n},d(a,e(m,".color-fill"),k)}function g(a,b,c,e,f,g,i){var j=h.pick(c,m);d(a,b+" .media-item .content",j),j={},j["background-color"]=f.clone().mix(e,.95).rgbString(),d(a,b+" .media-item .color-bg09",j),j={},j["-webkit-font-smoothing"]=i?"auto":"antialiased",j.color=f.rgbString(),j["background-color"]=f.clone().mix(e,.95).rgbString(),"border-radius"in c&&(j["border-radius"]=c["border-radius"]),d(a,b+" .media-item .placeholder",j),j={},j["text-decoration-color"]=e.clone().mix(f,.3).rgbString(),d(a,b+" .empty-item A",j)}var h=a("underscore"),i=a("color"),j=a("app/control/Globals"),k=a("app/model/collection/BundleCollection"),l=["background","background-color","color","--link-color"],m=["box-shadow","border","border-radius"];b.exports=function(){var a,b,c,d,e;a=j.DEFAULT_COLORS,b=new i(j.DEFAULT_COLORS.color),c=new i(j.DEFAULT_COLORS["background-color"]),d=new i(j.DEFAULT_COLORS["--link-color"]),e=b.luminosity()>c.luminosity();var h=document.createElement("style");h.id="colors",h.type="text/css",document.head.appendChild(h),f(h.sheet,"BODY",a,b,c,d,e),g(h.sheet,".carousel",a,b,c,d,e),k.each(function(i){a=i.attrs(),b=i.colors.fgColor,c=i.colors.bgColor,d=i.colors.lnColor,e=i.colors.hasDarkBg,f(h.sheet,"BODY."+i.get("domid"),a,b,c,d,e),g(h.sheet,".carousel."+i.get("domid"),a,b,c,d,e)})}},{"app/control/Globals":41,"app/model/collection/BundleCollection":46,color:"color",underscore:"underscore"}],80:[function(a,b,c){a("underscore"),a("underscore.string/classify");window.XMLHttpRequest&&window.URL&&window.Blob?b.exports=function(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.open("GET",a,!0),e.responseType="blob",b&&(e.onprogress=function(a){b(a.loaded/a.total)}),e.onload=function(b){if(200==e.status)c(URL.createObjectURL(e.response));else{var f=new Error(("http_"+e.statusText.replace(/\s/g,"_")).toUpperCase());f.infoCode=e.status,f.infoSrc=a,f.logEvent=b,f.logMessage="_loadImageAsObjectURL::"+b.type+" [reject]",d(f)}},e.onerror=function(b){var c=new Error((b.type+"_event").toUpperCase());c.infoCode=-1,c.infoSrc=a,c.logEvent=b,c.logMessage="_loadImageAsObjectURL::"+b.type+" [reject]",d(c)},e.onabort=e.ontimeout=e.onerror,e.onloadend=function(){e.onabort=e.ontimeout=e.onerror=void 0,e.onload=e.onloadend=void 0,b&&(e.onprogress=void 0)},e.send()})}:b.exports=function(a){return Promise.resolve(a)}},{underscore:"underscore","underscore.string/classify":29}],81:[function(a,b,c){b.exports=function(a,b){return new Promise(function(c,d){if(a instanceof window.HTMLImageElement)if(a.complete&&(a.src.length>0||b))c(a);else{var e={load:function(b){f(),c(a)},error:function(b){var c=new Error("Loading failed ("+b.type+" event)");c.infoCode=-1,c.infoSrc=a.src,c.logEvent=b,c.logMessage="_whenImageLoads::"+b.type+" [reject]",f(),d(c)}};e.abort=e.error;var f=function(){for(var b in e)e.hasOwnProperty(b)&&a.removeEventListener(b,e[b],!1)};for(var g in e)e.hasOwnProperty(g)&&a.addEventListener(g,e[g],!1)}else d(new Error("not an HTMLImageElement"))})}},{}],82:[function(a,b,c){var d=a("underscore"),e=a("app/view/promise/_whenImageLoads"),f=a("app/view/promise/_loadImageAsObjectURL");b.exports=function(a){return new Promise(function(b,c){var g=a.model.get("source");if(g.has("prefetched"))a.defaultImage.src=g.get("prefetched"),e(a.defaultImage).then(function(c){b(a)});else{a.mediaState="pending";var h=g.get("original"),i=function(b){a.updateMediaProgress(b,h)};i=d.throttle(i,100,{leading:!0,trailing:!1}),f(h,i).then(function(b){return/^blob\:.*/.test(b)&&g.set("prefetched",b),a.defaultImage.src=b,a.defaultImage}).then(e).then(function(c){a.on("view:removed",function(){var a=g.get("prefetched");a&&/^blob\:/.test(a)&&(g.unset("prefetched",{silent:!0}),URL.revokeObjectURL(a))}),b(a)},function(a){c(a)})}})}},{"app/view/promise/_loadImageAsObjectURL":80,"app/view/promise/_whenImageLoads":81,underscore:"underscore"}],83:[function(a,b,c){function d(a){return new Promise(function(b,c){var d=a.parentView;if(null===d)console.error("%s::whenScrollingEnds [%s] (sync)",a.cid,"rejected",a.attached),c(new e(a,new Error("whenScrollingEnds: view has no parent")));else if(d.scrolling){var f=function(){d.off("view:scrollend",g),d.off("view:remove",h)},g=function(){f(),b(a)},h=function(){f(),c(new e(a,new Error("whenScrollingEnds: view was removed")))};d.on("view:scrollend",g),d.on("view:remove",h)}else b(a)})}var e=a("app/view/base/ViewError"),f=a("app/view/promise/whenViewIsAttached");b.exports=function(a){return Promise.resolve(a).then(f).then(d)}},{"app/view/base/ViewError":66,"app/view/promise/whenViewIsAttached":86}],84:[function(a,b,c){var d=a("app/view/base/ViewError");b.exports=function(a,b){return new Promise(function(c,e){var f=a.model,g=f.collection,h=function(a){return Math.abs(g.indexOf(f)-g.selectedIndex)<=b};if(h())c(a);else{var i=function(){g.off("select:one select:none",j),a.off("view:removed",k)},j=function(b){h()&&(i(),c(a))},k=function(a){i(),e(new d(a,new Error("whenSelectionDistanceIs: view was removed")))};g.on("select:one select:none",j),a.on("view:removed",k)}})}},{"app/view/base/ViewError":66}],85:[function(a,b,c){var d=(a("app/view/base/ViewError"),a("app/view/promise/whenSelectionDistanceIs"));b.exports=function(a){return d(a,1)}},{"app/view/base/ViewError":66,"app/view/promise/whenSelectionDistanceIs":84}],86:[function(a,b,c){b.exports=function(a){return new Promise(function(b,c){a.attached?b(a):a.on("view:attached",function(a){b(a)})})}},{}],87:[function(a,b,c){var d=a("underscore"),e=a("app/view/base/View"),f=a("utils/css/getBoxEdgeStyles"),g=a("utils/net/toAbsoluteURL"),h=g(a("app/control/Globals").APP_ROOT),i=e.extend({cidPrefix:"carouselRenderer",tagName:"div",className:"carousel-item",template:d.template('<div class="content sizing markdown-html"><%= name %></div>'),properties:{content:{get:function(){return this._content||(this._content=this.el.querySelector(".content"))}},sizing:{get:function(){return this._sizing||(this._sizing=this.el.querySelector(".sizing"))}}},initialize:function(a){if(void 0!==this.model.attr("@classname"))for(var b=this.model.attr("@classname").split(" "),c=0;c<b.length;c++)this.el.classList.add(b[c]);a.parentView&&(this.parentView=a.parentView),this.metrics={},this.metrics.content={},this.createChildren(),this.setEnabled(!!a.enabled)},createChildren:function(){this.el.innerHTML=this.template(this.model.toJSON()),this.el.querySelectorAll("a[href]").forEach(function(a){var b=g(a.getAttribute("href"));0!==b.indexOf(h)&&a.setAttribute("target","_blank")})},getSizingEl:function(){return this._sizing||(this._sizing=this.el.querySelector(".sizing"))},getContentEl:function(){return this._content||(this._content=this.el.querySelector(".content"))},measure:function(){var a=this.getSizingEl();return this.metrics=f(this.el,this.metrics),this.metrics.content=f(this.getContentEl(),this.metrics.content),a.style.maxWidth="",a.style.maxHeight="",this.metrics.content.x=a.offsetLeft+a.clientLeft,this.metrics.content.y=a.offsetTop+a.clientTop,this.metrics.content.width=a.clientWidth,this.metrics.content.height=a.clientHeight,this},render:function(){return this.measure(),this},getSelectionDistance:function(){return Math.abs(this.model.collection.indexOf(this.model)-this.model.collection.selectedIndex)}});b.exports=i},{"app/control/Globals":41,"app/view/base/View":65,underscore:"underscore","utils/css/getBoxEdgeStyles":112,"utils/net/toAbsoluteURL":116}],88:[function(a,b,c){var d=a("app/view/render/LabelRenderer"),e=d.extend({cidPrefix:"clickableRenderer",events:{click:function(a){this.trigger("renderer:click",this.model,a)},"click a":function(a){a.defaultPrevented||a.preventDefault()}}});b.exports=e},{"app/view/render/LabelRenderer":95}],89:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j="function";return'<a href="#'+a.escapeExpression((g=null!=(g=c.domid||(null!=b?b.domid:b))?g:i,typeof g===j?g.call(h,{name:"domid",hash:{},data:e}):g))+'"><span class="label">'+(null!=(g=null!=(g=c.name||(null!=b?b.name:b))?g:i,f=typeof g===j?g.call(h,{name:"name",hash:{},data:e}):g)?f:"")+"</span></a>"},useData:!0})},{"hbsfy/runtime":25}],90:[function(a,b,c){var d=a("app/view/render/ClickableRenderer"),e=d.extend({tagName:"li",className:"list-item",template:a("./DefaultSelectableRenderer.hbs"),initialize:function(a){this.listenTo(this.model,"selected deselected",this._renderClassList),this._renderClassList()},render:function(){return this.el.innerHTML=this.template(this.model.toJSON()),this._renderClassList(),this},_renderClassList:function(){this.el.classList.toggle("selected",this.model.selected)}});b.exports=e},{"./DefaultSelectableRenderer.hbs":89,"app/view/render/ClickableRenderer":88}],91:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i="function",j=a.escapeExpression;return'<span class="label">'+j((f=null!=(f=c.name||(null!=b?b.name:b))?f:h,typeof f===i?f.call(g,{name:"name",hash:{},data:e}):f))+'</span><a href="#'+j((f=null!=(f=c.domid||(null!=b?b.domid:b))?f:h,typeof f===i?f.call(g,{name:"domid",hash:{},data:e}):f))+'"><b> </b></a>'},useData:!0})},{"hbsfy/runtime":25}],92:[function(a,b,c){var d=a("./DotNavigationRenderer.hbs"),e=a("app/view/render/ClickableRenderer"),f=e.extend({cidPrefix:"dotRenderer",tagName:"li",className:"list-item",template:d,initialize:function(a){this.listenTo(this.model,"selected deselected",this.renderClassList),this.renderClassList()},render:function(){return this.el.innerHTML=this.template(this.model.toJSON()),this.renderClassList(),this},renderClassList:function(){this.el.classList.toggle("selected",this.model.selected)}});b.exports=f},{"./DotNavigationRenderer.hbs":91,"app/view/render/ClickableRenderer":88}],93:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i="function",j=a.escapeExpression;return'<div class="placeholder sizing"></div>\n<img class="content media-border default" alt="'+j((f=null!=(f=c.name||(null!=b?b.name:b))?f:h,typeof f===i?f.call(g,{name:"name",hash:{},data:e}):f))+'" longdesc="#desc_m'+j((f=null!=(f=c.id||(null!=b?b.id:b))?f:h,typeof f===i?f.call(g,{name:"id",hash:{},data:e}):f))+'" />'},useData:!0})},{"hbsfy/runtime":25}],94:[function(a,b,c){var d=a("./MediaRenderer"),e=a("./ImageRenderer.hbs"),f=d.extend({cidPrefix:"imageRenderer",className:d.prototype.className+" image-renderer",template:e,initialize:function(a){d.prototype.initialize.apply(this,arguments)},createChildren:function(){d.prototype.createChildren.apply(this,arguments),this.placeholder=this.el.querySelector(".placeholder")},render:function(){d.prototype.render.apply(this,arguments);var a=this.getDefaultImage();a.setAttribute("width",this.metrics.media.width),a.setAttribute("height",this.metrics.media.height);var b=this.getContentEl();return b.style.left=this.metrics.content.x+"px",b.style.top=this.metrics.content.y+"px",this},initializeAsync:function(){return d.prototype.initializeAsync.apply(this,arguments)}});b.exports=f},{"./ImageRenderer.hbs":93,"./MediaRenderer":96}],95:[function(a,b,c){var d=a("app/view/base/View"),e=d.extend({cidPrefix:"labelRenderer",properties:{label:{get:function(){return this._label||(this._label=this.el.querySelector(".label"))}}}});b.exports=e},{"app/view/base/View":65}],96:[function(a,b,c){var d=a("underscore"),e=a("underscore.string/lpad"),f=a("app/model/item/MediaItem"),g=a("app/view/render/CarouselRenderer"),h=a("../template/ErrorBlock.hbs"),i=g.extend({cidPrefix:"mediaRenderer",className:g.prototype.className+" media-item",model:f,properties:{defaultImage:{get:function(){return this._defaultImage||(this._defaultImage=this.el.querySelector("img.default"))}},mediaState:{get:function(){return this._mediaState},set:function(a){this._setMediaState(a)}}},initialize:function(a){g.prototype.initialize.apply(this,arguments),this.metrics.media={},this.mediaState="idle",this.initializeAsync().then(this.whenInitialized)["catch"](this.whenInitializeError.bind(this))},initializeAsync:function(){return Promise.resolve(this).then(i.whenSelectionIsContiguous).then(i.whenScrollingEnds).then(i.whenDefaultImageLoads)},whenInitialized:function(a){return a.mediaState="ready",a.placeholder.removeAttribute("data-progress"),a},whenInitializeError:function(a){a instanceof g.ViewError||(a instanceof Error&&console.error(a.stack),this.renderMediaError(a),this.placeholder.removeAttribute("data-progress"),this.mediaState="error",console.error("%s::initializeAsync [%s (caught)]: %s",this.cid,a.name,a.info&&a.info.logMessage||a.message),a.logEvent&&console.log(a.logEvent))},renderMediaError:function(a){this.placeholder.innerHTML=a?h(a):""},updateMediaProgress:function(a,b){d.isNumber(a)&&this.placeholder.setAttribute("data-progress",e(Math.floor(100*a),2,"0"))},getDefaultImage:function(){return this.defaultImage},createChildren:function(){this.el.innerHTML=this.template(this.model.toJSON())},measure:function(){g.prototype.measure.apply(this,arguments);var a,b,c,d,e,f,h,i,j,k,l,m;return m=this.metrics.content,e=m.x,f=m.y,c=m.width,d=m.height,k=m.paddingLeft+m.paddingRight+m.borderLeftWidth+m.borderRightWidth,l=m.paddingTop+m.paddingBottom+m.borderTopWidth+m.borderBottomWidth,c-=k,d-=l,a=this.model.get("source").get("w"),b=this.model.get("source").get("h"),c>a&&d>b?(j=1,h=a,i=b):a/b>c/d?(h=c,j=h/a,i=Math.round(j*b)):(i=d,j=i/b,h=Math.round(j*a)),this.metrics.content.x=e,this.metrics.content.y=f,this.metrics.content.width=h+k,this.metrics.content.height=i+l,this.metrics.media.x=e+m.paddingLeft+m.borderLeftWidth,this.metrics.media.y=f+m.paddingTop+m.borderTopWidth,this.metrics.media.width=h,this.metrics.media.height=i,this.metrics.media.scale=j,this},render:function(){this.measure();var a=this.getSizingEl();return a.style.maxWidth=this.metrics.content.width+"px",a.style.maxHeight=this.metrics.content.height+"px",this},_mediaStateEnum:["idle","pending","ready","error"],_setMediaState:function(a){if(-1===this._mediaStateEnum.indexOf(a))throw new Error("Argument "+a+" invalid. Must be one of: "+this._mediaStateEnum.join(", "));this._mediaState!==a&&(this._mediaState&&this.el.classList.remove(this._mediaState),this.el.classList.add(a),this._mediaState=a,this.trigger("media:"+a))}},{LOG_TO_SCREEN:!0,whenSelectionIsContiguous:a("app/view/promise/whenSelectionIsContiguous"),whenScrollingEnds:a("app/view/promise/whenScrollingEnds"),whenDefaultImageLoads:a("app/view/promise/whenDefaultImageLoads")});b.exports=i},{"../template/ErrorBlock.hbs":105,"app/model/item/MediaItem":53,"app/view/promise/whenDefaultImageLoads":82,"app/view/promise/whenScrollingEnds":83,"app/view/promise/whenSelectionIsContiguous":85,"app/view/render/CarouselRenderer":87,color:"color",underscore:"underscore","underscore.string/lpad":35}],97:[function(a,b,c){var d=a("underscore"),e=(a("color"),a("app/view/render/MediaRenderer")),f=a("utils/prefixedProperty"),g=a("utils/prefixedEvent"),h=f("visibilityState",document),i=g("visibilitychange",document,"hidden"),j=e.extend({cidPrefix:"playableRenderer",className:e.prototype.className+" playable-renderer",properties:{paused:{get:function(){return this._isMediaPaused()}},playbackRequested:{get:function(){return this._playbackRequested},set:function(a){this._setPlaybackRequested(a)}},playToggle:{get:function(){return this._playToggle||(this._playToggle=this.el.querySelector(".play-toggle"))}},overlay:{get:function(){return this._overlay||(this._overlay=this.el.querySelector(".overlay"))}}},initialize:function(a){e.prototype.initialize.apply(this,arguments),d.bindAll(this,"_onPlaybackToggle","_onVisibilityChange"),this._setPlaybackRequested(this._playbackRequested)},setEnabled:function(a){e.prototype.setEnabled.apply(this,arguments),this._validatePlayback()},addSelectionListeners:function(){if("initialized"!=this._viewPhase)throw new Error(this.cid+"::addSelectionListeners called while "+this._viewPhase);this.listenTo(this.model,"selected",this._onModelSelected),this.listenTo(this.model,"deselected",this._onModelDeselected),this.model.selected&&this._onModelSelected()},_onModelSelected:function(){this.listenTo(this,"view:parentChange",this._onParentChange),this.parentView&&this._onParentChange(this,this.parentView,null),this._addDOMListeners(),this._validatePlayback()},_onModelDeselected:function(){this.stopListening(this,"view:parentChange",this._onParentChange),this.parentView&&this._onParentChange(this,null,this.parentView),this._removeDOMListeners(),this.togglePlayback(!1)},_onParentChange:function(a,b,c){c&&this.stopListening(c,"view:scrollstart view:scrollend",this._onScrollChange),b&&this.listenTo(b,"view:scrollstart view:scrollend",this._onScrollChange)},_onScrollChange:function(){if(null===this.parentView)throw this.togglePlayback(!1),new Error(this.cid+"::_onScrollChange parentView is null");this._validatePlayback()},_addDOMListeners:function(){this.listenTo(this,"view:removed",this._removeDOMListeners),document.addEventListener(i,this._onVisibilityChange,!1),this.playToggle.addEventListener(this._toggleEvent,this._onPlaybackToggle,!0)},_removeDOMListeners:function(){this.stopListening(this,"view:removed",this._removeDOMListeners),document.removeEventListener(i,this._onVisibilityChange,!1),this.playToggle.removeEventListener(this._toggleEvent,this._onPlaybackToggle,!0)},_onVisibilityChange:function(a){this._validatePlayback()},_toggleEvent:window.hasOwnProperty("onpointerup")?"pointerup":"mouseup",_onPlaybackToggle:function(a){a.defaultPrevented||a.button||(a.preventDefault(),this.playbackRequested=!this.playbackRequested)},_playbackRequested:null,_setPlaybackRequested:function(a){this._playbackRequested=a;var b=this.content.classList;b.toggle("playing",a===!0),b.toggle("paused",a===!1),b.toggle("requested",a===!0||a===!1),this._validatePlayback()},togglePlayback:function(a){d.isBoolean(a)&&a!==this._isMediaPaused()||(a=this._isMediaPaused(),a?this._playMedia():this._pauseMedia())},_canResumePlayback:function(){return!(!(this.enabled&&this.model.selected&&this.playbackRequested&&"ready"===this.mediaState&&this.attached&&null!==this.parentView)||this.parentView.scrolling||"hidden"==document[h])},_validatePlayback:function(a){0==arguments.length||a?this.togglePlayback(this._canResumePlayback()):this.togglePlayback(!1)},_isMediaPaused:function(){return console.warn("%s::_isMediaPaused Not implemented",this.cid),!0},_playMedia:function(){console.warn("%s::_playMedia Not implemented",this.cid)},_pauseMedia:function(){console.warn("%s::_pauseMedia Not implemented",this.cid)},updateOverlay:function(a,b,c){},_drawMediaElement:function(a,b,c){b||(b=this.defaultImage),c||(c={x:0,y:0,width:this.metrics.media.width,height:this.metrics.media.height});var d=this.model.get("source").get("w"),e=this.model.get("source").get("h"),f=d/this.metrics.media.width,g=e/this.metrics.media.height,h={x:Math.max(0,c.x*f),y:Math.max(0,c.y*g),width:Math.min(d,c.width*f),height:Math.min(e,c.height*g)};return a.canvas.width=c.width,a.canvas.height=c.height,a.clearRect(0,0,c.width,c.height),a.drawImage(b,h.x,h.y,h.width,h.height,0,0,c.width,c.height),a}});b.exports=j},{"app/view/render/MediaRenderer":96,color:"color",underscore:"underscore","utils/prefixedEvent":117,"utils/prefixedProperty":118}],98:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i="function",j=a.escapeExpression;return'<div class="placeholder sizing"></div>\n<div class="content">\n	<div class="media-border content-size"></div>\n	<div class="controls content-size">\n		<div class="top-bar control-box">\n		</div>\n	</div>\n	<div class="sequence media-size">\n		<img class="sequence-step current default" alt="'+j((f=null!=(f=c.name||(null!=b?b.name:b))?f:h,typeof f===i?f.call(g,{name:"name",hash:{},data:e}):f))+'" longdesc="#desc_m'+j((f=null!=(f=c.id||(null!=b?b.id:b))?f:h,typeof f===i?f.call(g,{name:"id",hash:{},data:e}):f))+'" />\n	</div>\n	<div class="overlay media-size">\n		<div class="play-toggle-hitarea play-toggle">\n		</div>\n	</div>\n</div>'},useData:!0})},{"hbsfy/runtime":25}],99:[function(a,b,c){var d=a("underscore"),e=a("backbone.babysitter"),f=a("app/view/base/View"),g=a("app/view/render/PlayableRenderer"),h=a("app/control/Globals"),i=a("app/view/component/ProgressMeter"),j=a("utils/Timer"),k=a("app/view/promise/_whenImageLoads"),l=a("app/view/promise/_loadImageAsObjectURL"),m=a("app/view/promise/whenSelectionDistanceIs"),n=a("../template/ErrorBlock.hbs"),o=f.extend({cidPrefix:"sequenceStepRenderer",className:"sequence-step",tagName:"img",properties:{ready:{get:function(){return this._ready}}},initialize:function(a){this.model.has("prefetched")?this._renderPrefetched():this.listenTo(this.model,"change:prefetched",this._renderPrefetched),this.listenTo(this.model,"selected deselected",this._renderSelection),this._renderSelection()},_renderSelection:function(){this.el.classList.toggle("current",!!this.model.selected)},_renderPrefetched:function(){var a=this.model.get("prefetched");a!==this.el.src&&(this.el.src=a),k(this.el).then(function(a){this.requestAnimationFrame(function(a){this._setReady(!0)})}.bind(this),function(a){throw a instanceof Error||(a=new Error("cannot load prefetched url")),a}.bind(this))},_ready:!1,_setReady:function(a){this._ready!==a&&(this._ready=!!a,this.trigger("renderer:ready",this))},render:function(){return this}}),p=f.extend({className:"sequence-step error",cidPrefix:"sourceErrorRenderer",template:n,ready:!0,initialize:function(a){this.listenTo(this.model,"selected deselected",function(){this.el.classList.toggle("current",!!this.model.selected)})},render:function(){return this.el.classList.toggle("current",!!this.model.selected),this.el.innerHTML=this.template(this.model.get("error")),this}}),q=o,r=g.extend({cidPrefix:"sequenceRenderer",className:g.prototype.className+" sequence-renderer",template:a("./SequenceRenderer.hbs"),initialize:function(){this.sources=this.model.get("sources"),g.prototype.initialize.apply(this,arguments)},initializeAsync:function(){return g.prototype.initializeAsync.apply(this,arguments).then(function(a){return a.whenAttached()}).then(function(a){return a.initializePlayable(),a.updateOverlay(a.defaultImage,a.overlay),a.addSelectionListeners(),a})},whenInitialized:function(a){var b=g.prototype.whenInitialized.apply(this,arguments);return a._validatePlayback(),b},createChildren:function(){g.prototype.createChildren.apply(this,arguments),this.placeholder=this.el.querySelector(".placeholder"),this.sequence=this.content.querySelector(".sequence"),this.content.classList.add("started");var a,b=this.model.attrs();a=d.pick(b,"box-shadow","border","border-radius"),d.extend(this.content.querySelector(".media-border").style,a),a=d.pick(b,"border-radius"),d.extend(this.sequence.style,a),d.extend(this.placeholder.style,a),this.sources.select(this.model.get("source")),this.itemViews=new e,this.itemViews.add(new q({el:this.getDefaultImage(),model:this.sources.selected}))},render:function(){g.prototype.render.apply(this,arguments);var a,b,c,d,e,f=this.content;for(d=this.metrics.media.width+"px",e=this.metrics.media.height+"px",a=this.el.querySelectorAll(".media-size"),c=0;c<a.length;c++)b=a.item(c),b.style.width=d,b.style.height=e;f.style.width=d,f.style.height=e;var h,i;return h=this.metrics.content.x+"px",i=this.metrics.content.y+"px",f.style.left=h,f.style.top=i,b=this.el.querySelector(".controls"),b.style.width=this.metrics.content.width+"px",b.style.height=this.metrics.content.height+"px",this},initializePlayable:function(){m(this,0).then(this._preloadAllItems,function(a){return a instanceof f.ViewError?void 0:a}),this._sequenceInterval=parseInt(this.model.attr("@sequence-interval"))||2500,this.timer=new j,this.listenTo(this,"view:removed",function(){this.timer.stop(),this.stopListening(this.timer)}),this.listenTo(this.timer,{start:this._onTimerStart,resume:this._onTimerResume,pause:this._onTimerPause,end:this._onTimerEnd}),this._sourceProgressByIdx=this.sources.map(function(){return 0}),this._sourceProgressByIdx[0]=1,this.progressMeter=new i({values:{available:this._sourceProgressByIdx.concat()},maxValues:{amount:this.sources.length,available:this.sources.length},color:this.model.attr("color"),backgroundColor:this.model.attr("background-color"),labelFn:this._progressLabelFn.bind(this)}),this.el.querySelector(".top-bar").appendChild(this.progressMeter.render().el)},_progressLabelFn:function(){return this.playbackRequested===!1?h.PAUSE_CHAR:this.sources.selectedIndex+1+"/"+this.sources.length},_preloadAllItems:function(a){return a.once("view:remove",function(){var b={silent:!0};a.sources.forEach(function(a,c,d){var e=a.get("prefetched");e&&/^blob\:/.test(e)&&(a.unset("prefetched",b),a.set("progress",0,b),URL.revokeObjectURL(e))})}),a.sources.reduce(function(a,b,c,d){return a.then(function(a){return b.has("prefetched")?(a._updateItemProgress(1,c),a):l(b.get("original"),function(d){a._updateItemProgress(d,c),b.set("progress",d)}).then(function(d){return a._updateItemProgress(1,c),b.set({prefetched:d,progress:1}),a},function(d){return a._updateItemProgress(0,c),b.set({error:d,progress:0}),a})})},Promise.resolve(a))},_updateItemProgress:function(a,b){this._sourceProgressByIdx[b]=a,this.progressMeter&&this.progressMeter.valueTo(this._sourceProgressByIdx,300,"available")},_playbackRequested:!0,_paused:!0,_isMediaPaused:function(){return this._paused},_playMedia:function(){this._paused&&(this._paused=!1,this.timer.status==j.PAUSED?this.timer.start():this.timer.start(this._sequenceInterval))},_pauseMedia:function(){this._paused||(this._paused=!0,this.timer.status==j.STARTED&&this.timer.pause())},_onTimerStart:function(a){this.progressMeter.valueTo(this.sources.selectedIndex+1,a,"amount"),this._getItemRenderer(this.sources.followingOrFirst())},_onTimerResume:function(a){this.progressMeter.valueTo(this.sources.selectedIndex+1,a,"amount")},_onTimerPause:function(a){this.progressMeter.valueTo(this.progressMeter.getRenderedValue("amount"),0,"amount")},_onTimerEnd:function(){var a,b,c=this;a=this.sources.followingOrFirst(),b=this._getItemRenderer(a);var d=function(){c.requestAnimationFrame(function(){c.content.classList.remove("waiting"),c._paused||(c.content.classList.toggle("playback-error",a.has("error")),c.sources.select(a),c.timer.start(c._sequenceInterval))})};a.has("prefetched")||a.has("error")?k(b.el).then(d,d):(this.content.classList.add("waiting"),this.listenTo(a,"change:prefetched change:error",function(){this.stopListening(a,"change:prefetched change:error"),k(b.el).then(d,d)}))},_getItemRenderer:function(a){var b=this.itemViews.findByModel(a);if(!b){var c=a.has("error")?p:q;b=new c({model:a}),this.itemViews.add(b),this.sequence.appendChild(b.render().el)}return b}});b.exports=r},{"../template/ErrorBlock.hbs":105,"./SequenceRenderer.hbs":98,"app/control/Globals":41,"app/view/base/View":65,"app/view/component/ProgressMeter":76,"app/view/promise/_loadImageAsObjectURL":80,"app/view/promise/_whenImageLoads":81,"app/view/promise/whenSelectionDistanceIs":84,"app/view/render/PlayableRenderer":97,"backbone.babysitter":"backbone.babysitter",underscore:"underscore","underscore.string/lpad":35,"utils/Timer":107}],100:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return'<div class="placeholder sizing"></div>\n<div class="content media-border">\n	<div class="controls content-size">\n		<div class="top-bar control-box">\n			<a class="fullscreen-toggle" href="javascript:(void 0)">\n				<svg version="1.1" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="-21 -21 42 42" style="max-width:14px;max-height:14px">\n					<path d="M-5,5 L-20,20 M-7,20 L-20,20 L-20,7 M5,-5 L20,-20 M7,-20 L20,-20 L20,-7" class="color-stroke" style="stroke-width:1;fill:none;" vector-effect="non-scaling-stroke" />\n				</svg>\n			</a>\n		</div>\n	</div>\n	<div class="crop-box media-size">\n		<video preload="none"></video>\n		<img class="poster default" alt="'+a.escapeExpression((f=null!=(f=c.name||(null!=b?b.name:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"name",hash:{},data:e}):f))+'" />\n	</div>\n	<div class="overlay media-size">\n		<div class="play-toggle-hitarea play-toggle">\n		</div>\n	</div>\n</div>'},useData:!0})},{"hbsfy/runtime":25}],101:[function(a,b,c){var d=a("underscore"),e=a("app/control/Globals"),f=a("app/view/render/PlayableRenderer"),g=a("app/view/component/ProgressMeter"),h=a("utils/prefixedEvent"),i=h("fullscreenchange",document),j=(h("fullscreenerror",document),function(a){return isNaN(a)?"":a>=3600?(a/3600|0)+"H":a>=60?(a/60|0)+"M":(0|a)+"S"}),k=f.extend({cidPrefix:"videoRenderer",className:f.prototype.className+" video-renderer",template:a("./VideoRenderer.hbs"),events:function(){return window.hasOwnProperty("onpointerup")?{"pointerup .fullscreen-toggle":"_onFullscreenToggle"}:{"mouseup .fullscreen-toggle":"_onFullscreenToggle"}}(),initialize:function(a){f.prototype.initialize.apply(this,arguments),d.bindAll(this,"_updatePlaybackState","_updatePlayedValue","_updateBufferedValue","_onMediaError","_onMediaEnded","_onMediaPlayingOnce","_onFullscreenChange")},createChildren:function(){f.prototype.createChildren.apply(this,arguments),this.placeholder=this.el.querySelector(".placeholder"),this.video=this.content.querySelector("video"),this.video.loop=void 0!==this.model.attr("@video-loop"),this.video.src=this.findPlayableSource(this.video)},measure:function(){f.prototype.measure.apply(this,arguments),this.metrics.media.height-=2,this.metrics.content.height-=2},render:function(){f.prototype.render.apply(this,arguments);var a,b,c,d,e,g=this.defaultImage,h=this.content;for(d=this.metrics.media.width+"px",e=this.metrics.media.height+"px",a=this.el.querySelectorAll(".media-size"),c=0;c<a.length;c++)b=a.item(c),b.style.width=d,b.style.height=e;h.style.width=d,h.style.height=this.metrics.media.height-1+"px";var i,j;return i=this.metrics.content.x+"px",j=this.metrics.content.y+"px",h.style.left=i,h.style.top=j,b=this.el.querySelector(".controls"),b.style.width=this.metrics.content.width+"px",b.style.height=this.metrics.content.height+"px",this.video.setAttribute("width",this.metrics.media.width),this.video.setAttribute("height",this.metrics.media.height+2),g.setAttribute("width",this.metrics.media.width),g.setAttribute("height",this.metrics.media.height+2),this},initializeAsync:function(){return Promise.resolve(this).then(f.whenSelectionIsContiguous).then(f.whenScrollingEnds).then(function(a){return Promise.all([a.whenVideoHasMetadata(a),f.whenDefaultImageLoads(a)]).then(function(b){return Promise.resolve(a)},function(a){return Promise.reject(a)})}).then(function(a){return a.whenAttached()}).then(function(a){return a.initializePlayable(),a.updateOverlay(a.defaultImage,a.overlay),a.addSelectionListeners(),a})},initializePlayable:function(){this.addMediaListeners(),this.progressMeter=new g({maxValues:{amount:this.video.duration,available:this.video.duration},color:this.model.attr("color"),backgroundColor:this.model.attr("background-color"),labelFn:this._progressLabelFn.bind(this)});var a=this.el.querySelector(".top-bar");a.insertBefore(this.progressMeter.render().el,a.firstChild)},_progressLabelFn:function(a,b){return!this._started||this.video.ended||isNaN(a)?j(b):this.playbackRequested?j(b-a):e.PAUSE_CHAR},whenVideoHasMetadata:function(a){return new Promise(function(b,c){var e=a.video,g={loadedmetadata:function(c){c&&k(),b(a)},abort:function(b){b&&k(),c(new f.ViewError(a,new Error("whenVideoHasMetadata: view was removed")))},error:function(a){a&&k();var b;e.error?(b=new Error(d.invert(MediaError)[e.error.code]),b.infoCode=e.error.code):b=new Error("Unspecified error"),b.infoSrc=e.src,b.logMessage="whenVideoHasMetadata: "+b.name+" "+b.infoSrc,
b.logEvent=a,c(b)}};if(e.error)g.error();else if(e.readyState>=HTMLMediaElement.HAVE_METADATA)g.loadedmetadata();else{var h=e.querySelectorAll("source"),i=h.length>0?h.item(h.length-1):e,j=i===e,k=function(){i.removeEventListener("error",g.error,j);for(var a in g)"error"!==a&&g.hasOwnProperty(a)&&e.removeEventListener(a,g[a],!1)};i.addEventListener("error",g.error,j);for(var l in g)"error"!==l&&g.hasOwnProperty(l)&&e.addEventListener(l,g[l],!1);e.preload="metadata"}})},findPlayableSource:function(a){var b=this.model.get("sources").find(function(b){return/^video\//.test(b.get("mime"))&&""!=a.canPlayType(b.get("mime"))});return b?b.get("original"):""},_playbackRequested:!1,_isMediaPaused:function(){return this.video.paused},_playMedia:function(){this.video.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&0==this.video.seekable.length?(console.warn(this.cid,"WTF! got video data, but cannot seek, calling load()"),this.video.load()):this.video.ended&&(this.video.currentTime=this.video.seekable.start(0)),this.video.play()},_pauseMedia:function(){this.video.pause()},updatePlaybackEvents:"playing waiting pause",updateBufferedEvents:"progress canplay canplaythrough play playing",updatePlayedEvents:"timeupdate seeked",addMediaListeners:function(){this._started||this.video.addEventListener("playing",this._onMediaPlayingOnce,!1),this.addListener(this.video,this.updatePlaybackEvents,this._updatePlaybackState),this.addListener(this.video,this.updateBufferedEvents,this._updateBufferedValue),this.addListener(this.video,this.updatePlayedEvents,this._updatePlayedValue),this.video.addEventListener("ended",this._onMediaEnded,!1),this.video.addEventListener("error",this._onMediaError,!0),this.on("view:removed",this.removeMediaListeners,this)},removeMediaListeners:function(){this.off("view:removed",this.removeMediaListeners,this),this._started||this.video.removeEventListener("playing",this._onMediaPlayingOnce,!1),this.removeListener(this.video,this.updatePlaybackEvents,this._updatePlaybackState),this.removeListener(this.video,this.updateBufferedEvents,this._updateBufferedValue),this.removeListener(this.video,this.updatePlayedEvents,this._updatePlayedValue),this.video.removeEventListener("ended",this._onMediaEnded,!1),this.video.removeEventListener("error",this._onMediaError,!0)},_onMediaError:function(a){this.removeMediaListeners(),this.removeSelectionListeners(),this._onMediaEnded(a),this.content.classList.remove("ended"),this.content.classList.remove("waiting"),this.content.classList.remove("started"),this._started=!1,this.mediaState="error"},_onMediaPlayingOnce:function(a){this.video.removeEventListener("playing",this._onMediaPlayingOnce,!1),this._started||(this._started=!0,this.content.classList.add("started"))},_onMediaEnded:function(a){this.playbackRequested=!1,this.video.webkitDisplayingFullscreen&&this.video.webkitExitFullscreen(),document.fullscreenElement===this.video&&this.video.exitFullscreen()},_updatePlaybackState:function(a){var b=this.content.classList;if(this.playbackRequested)switch(a.type){case"pause":case"playing":b.remove("waiting");break;case"waiting":b.add("waiting")}else b.remove("waiting");b.toggle("ended",this.video.ended),this._updatePlayedValue(a)},_updatePlayedValue:function(a){this._currentTimeValue=this.video.currentTime,this.progressMeter&&this.progressMeter.valueTo(this._currentTimeValue,0,"amount")},_updateBufferedValue:function(a){var b=this.video.buffered;b.length>0&&(this._bufferedValue=b.end(b.length-1),this.progressMeter&&this.video.readyState==HTMLMediaElement.HAVE_ENOUGH_DATA&&this.progressMeter.valueTo(this._bufferedValue,300,"available"))},_onFullscreenToggle:function(a){if(!a.defaultPrevented&&!a.button&&this.model.selected)try{document.hasOwnProperty("fullscreenElement")&&document.fullscreenElement!==this.video?(document.addEventListener(i,this._onFullscreenChange,!1),this.video.requestFullscreen()):this.video.webkitSupportsFullscreen&&!this.video.webkitDisplayingFullscreen&&(this.video.addEventListener("webkitbeginfullscreen",this._onFullscreenChange,!1),this.video.webkitEnterFullScreen())}catch(b){this.video.controls=!1,console.error(b)}},_onFullscreenChange:function(a){switch(a.type){case i:var b=document.fullscreenElement===this.video;this.video.controls=b,b||document.removeEventListener(i,this._onFullscreenChange,!1);break;case"webkitbeginfullscreen":this.video.controls=!0,this.video.removeEventListener("webkitbeginfullscreen",this._onFullscreenChange,!1),this.video.addEventListener("webkitendfullscreen",this._onFullscreenChange,!1);break;case"webkitendfullscreen":this.video.controls=!1,this.video.removeEventListener("webkitendfullscreen",this._onFullscreenChange,!1)}},addListener:function(a,b,c,d){"string"==typeof b&&(b=b.split(" "));for(var e=0;e<b.length;e++)a.addEventListener(b[e],c,!!d)},removeListener:function(a,b,c,d){"string"==typeof b&&(b=b.split(" "));for(var e=0;e<b.length;e++)a.removeEventListener(b[e],c,!!d)}});b.exports=k},{"./VideoRenderer.hbs":100,"app/control/Globals":41,"app/view/component/ProgressMeter":76,"app/view/render/PlayableRenderer":97,color:"color",underscore:"underscore","underscore.string/lpad":35,"underscore.string/rpad":37,"utils/event/mediaEventsEnum":114,"utils/prefixedEvent":117}],102:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j="function";return'<div id="desc_b'+a.escapeExpression((g=null!=(g=c.id||(null!=b?b.id:b))?g:i,typeof g===j?g.call(h,{name:"id",hash:{},data:e}):g))+'" class="content sizing markdown-html">'+(null!=(g=null!=(g=c.desc||(null!=b?b.desc:b))?g:i,f=typeof g===j?g.call(h,{name:"desc",hash:{},data:e}):g)?f:"")+"</div>\n"},useData:!0})},{"hbsfy/runtime":25}],103:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j="function";return'<div id="desc_m'+a.escapeExpression((g=null!=(g=c.id||(null!=b?b.id:b))?g:i,typeof g===j?g.call(h,{name:"id",hash:{},data:e}):g))+'" class="content sizing">\n	<p>'+(null!=(g=null!=(g=c.name||(null!=b?b.name:b))?g:i,f=typeof g===j?g.call(h,{name:"name",hash:{},data:e}):g)?f:"")+"</p>\n</div>"},useData:!0})},{"hbsfy/runtime":25}],104:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({1:function(a,b,c,d,e){var f;return'	<dd id="select-layout">\n		<select size=1>\n'+(null!=(f=c.each.call(null!=b?b:{},null!=b?b.layouts:b,{name:"each",hash:{},fn:a.program(2,e,0),inverse:a.noop,data:e}))?f:"")+"		</select>\n	</dd>\n"},2:function(a,b,c,d,e){var f=a.lambda,g=a.escapeExpression;return'			<option value="'+g(f(b,b))+'">'+g(f(b,b))+"</option>\n"},4:function(a,b,c,d,e){var f,g,h=null!=b?b:{};return'	<li class="'+(null!=(f=c["if"].call(h,b,{name:"if",hash:{},fn:a.program(5,e,0),inverse:a.program(7,e,0),data:e}))?f:"")+'">'+a.escapeExpression((g=null!=(g=c.key||e&&e.key)?g:c.helperMissing,"function"==typeof g?g.call(h,{name:"key",hash:{},data:e}):g))+"</li>\n"},5:function(a,b,c,d,e){return"passed"},7:function(a,b,c,d,e){return"failed"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{},h=a.escapeExpression;return'<dl class="debug-links">\n	<dt id="links-toggle">\n		<svg class="icon" viewBox="-100 -100 200 200" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet">\n			<path id="cog" d="M11.754,-99.307c-7.809,-0.924 -15.699,-0.924 -23.508,0l-3.73,20.82c-6.254,1.234 -12.338,3.21 -18.123,5.888l-15.255,-14.651c-6.861,3.842 -13.244,8.48 -19.018,13.818l9.22,19.036c-4.335,4.674 -8.095,9.849 -11.201,15.416l-20.953,-2.886c-3.292,7.141 -5.731,14.645 -7.265,22.357l18.648,9.981c-0.759,6.329 -0.759,12.727 0,19.056l-18.648,9.981c1.534,7.712 3.973,15.216 7.265,22.357l20.953,-2.886c3.106,5.567 6.866,10.742 11.201,15.416l-9.22,19.036c5.774,5.338 12.157,9.976 19.018,13.818l15.255,-14.651c5.785,2.678 11.869,4.654 18.123,5.888l3.73,20.82c7.809,0.924 15.699,0.924 23.508,0l3.73,-20.82c6.254,-1.234 12.338,-3.21 18.123,-5.888l15.255,14.651c6.861,-3.842 13.244,-8.48 19.018,-13.818l-9.22,-19.036c4.335,-4.674 8.095,-9.849 11.201,-15.416l20.953,2.886c3.292,-7.141 5.731,-14.645 7.265,-22.357l-18.648,-9.981c0.759,-6.329 0.759,-12.727 0,-19.056l18.648,-9.981c-1.534,-7.712 -3.973,-15.216 -7.265,-22.357l-20.953,2.886c-3.106,-5.567 -6.866,-10.742 -11.201,-15.416l9.22,-19.036c-5.774,-5.338 -12.157,-9.976 -19.018,-13.818l-15.255,14.651c-5.785,-2.678 -11.869,-4.654 -18.123,-5.888l-3.73,-20.82ZM0,-33c18.213,0 33,14.787 33,33c0,18.213 -14.787,33 -33,33c-18.213,0 -33,-14.787 -33,-33c0,-18.213 14.787,-33 33,-33Z" style="fill:currentColor;fill-rule:evenodd;"/>\n		</svg>\n	</dt>\n	<dt id="app-state">\n		<span class="color-fg color-bg" data-prop="withBundle">b</span>\n		<span class="color-fg color-bg" data-prop="withMedia">m</span>\n		<span class="color-fg color-bg" data-prop="collapsed">c</span>\n	</dt>\n'+(null!=(f=c["if"].call(g,null!=b?b.layouts:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'	<dd id="edit-backend">\n		<a href="'+h((c.global||b&&b.global||c.helperMissing).call(g,"APP_ROOT",{name:"global",hash:{},data:e}))+'symphony/" class="color-fg color-bg" target="_blank">CMS</a>\n	</dd>\n	<dd id="toggle-tests">\n		<a href="#toggle-tests" class="color-fg color-bg">Tests</a>\n	</dd>\n	<dd id="toggle-blocks">\n		<a href="#toggle-blocks" class="color-fg color-bg">Blocks</a>\n	</dd>\n	<dd id="toggle-tx">\n		<a href="#toggle-blocks" class="color-fg color-bg">TX/FX</a>\n	</dd>\n	<dd id="toggle-grid-bg">\n		<a href="#toggle-grid-bg" class="color-fg color-bg">Grid</a>\n	</dd>\n	<dd id="toggle-markdown">\n		<a href="#toggle-markdown" class="color-fg color-bg">Markdown</a>\n	</dd>\n	<dd id="toggle-logs">\n		<a href="#toggle-logs" class="color-fg color-bg">Logs</a>\n	</dd>\n	<dd id="media-info">\n		<span></span>\n	</dd>\n	<dd id="viewport-info">\n		<span></span>\n	</dd>\n</dl>\n<div id="test-results">\n<h6>Tests <a id="toggle-passed" href="#toggle-passed">Passed</a></h6>\n<p>'+h(a.lambda(null!=(f=null!=b?b.navigator:b)?f.userAgent:f,b))+"</p>\n<ul>\n"+(null!=(f=c.each.call(g,null!=b?b.tests:b,{name:"each",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")+"</ul>\n</div>\n"},useData:!0})},{"hbsfy/runtime":25}],105:[function(a,b,c){var d=a("hbsfy/runtime");b.exports=d.template({1:function(a,b,c,d,e){var f;return"		<p><code>"+a.escapeExpression((f=null!=(f=c.infoSrc||(null!=b?b.infoSrc:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"infoSrc",hash:{},data:e}):f))+"</code></p>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j="function",k=a.escapeExpression;return'<div class="error-message color-fg">\n	<p><strong>'+k((g=null!=(g=c.name||(null!=b?b.name:b))?g:i,typeof g===j?g.call(h,{name:"name",hash:{},data:e}):g))+"</strong> <code>"+k((g=null!=(g=c.message||(null!=b?b.message:b))?g:i,typeof g===j?g.call(h,{name:"message",hash:{},data:e}):g))+"</code></p>\n"+(null!=(f=c["if"].call(h,null!=b?b.infoSrc:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"</div>"},useData:!0})},{"hbsfy/runtime":25}],106:[function(a,b,c){var d=a("hbsfy/runtime"),e=a("color"),f=a("app/control/Globals"),g={add:function(a,b){return a+b},subtract:function(a,b){return a-b},divide:function(a,b){return a/b},multiply:function(a,b){return a*b},floor:function(a){return Math.floor(a)},ceil:function(a){return Math.ceil(a)},round:function(a){return Math.round(a)},global:function(a){return f[a]},is:function(a,b,c){return a===b?c.fn(this):c.inverse(this)},isnot:function(a,b,c){return a!==b?c.fn(this):c.inverse(this)},isany:function(a){var b=0,c=arguments.length-2,d=arguments[c+1];do if(a===arguments[++b])return d.fn(this);while(c>b);return d.inverse(this)},contains:function(a,b,c){return-1!==a.indexOf(b)?c.fn(this):c.inverse(this)},ignore:function(){return""},mix:function(a,b,c){return new e(a).mix(new e(b),c).rgbString()},lighten:function(a,b){return new e(a).lighten(b).rgbString()},darken:function(a,b){return new e(a).darken(b).rgbString()}};for(var h in g)g.hasOwnProperty(h)&&d.registerHelper(h,g[h])},{"app/control/Globals":41,color:"color","hbsfy/runtime":25}],107:[function(a,b,c){function d(){e.call(this),this._status="stopped",this.trigger("end")}function e(a){window.clearTimeout(this._timeout),a===!0&&(this._duration=0)}var f=a("underscore"),g=a("backbone").Events,h=0,i=function(a){this._id=h++,this._duration=0,this._status="initialized",this._start=0};f.extend(i.prototype,g,{start:function(a){if(!f.isNumber(a)&&!this._duration)return this;if(this._timeout&&"started"===this._status)return this;var b="stopped"===this._status?"start":"resume";return this._duration=a||this._duration,this._timeout=window.setTimeout(d.bind(this),this._duration),this._start=j(),this._status="started",this.trigger(b,this.getDuration()),this},pause:function(){return"started"!==this._status?this:(this._duration-=j()-this._start,e.call(this,!1),this._status="paused",this.trigger("pause",this.getDuration()),this)},stop:function(){return/started|paused/.test(this._status)?(e.call(this,!0),this._status="stopped",this.trigger("stop"),this):this},getDuration:function(){return"started"===this._status?this._duration-(j()-this._start):"paused"===this._status?this._duration:0},getStatus:function(){return this._status}});var j=window.performance?window.performance.now.bind(window.performance):Date.now.bind(Date);Object.defineProperties(i.prototype,{duration:{enumerable:!0,get:function(){return this.getDuration()}},status:{enumerable:!0,get:function(){return this.getStatus()}}}),Object.defineProperties(i,{STOPPED:{enumerable:!0,value:"stopped"},STARTED:{enumerable:!0,value:"started"},PAUSED:{enumerable:!0,value:"paused"}}),b.exports=i},{backbone:"backbone",underscore:"underscore"}],108:[function(a,b,c){function d(){this.id=f++,this._items=[],this._itemsById={}}var e=(a("underscore"),a("./TransformItem")),f=0,g=100,h=Array.prototype.slice;d.prototype=Object.create({_get:function(a){return this.has(a)?this._itemsById[a.eid]:this._add(a)},_add:function(a){var b,c;return c=a.eid||a.cid||"elt"+g++,b=new e(a,c),this._itemsById[c]=b,this._items.push(b),b},_remove:function(a){if(this.has(a)){var b=this._itemsById[a.eid];this._items.splice(this._items.indexOf(b),1),b.destroy(),delete this._itemsById[a.eid]}},_invoke:function(a,b,c){var d,e,f,g,i,j,k,l=null;for(void 0!==c?l=h.call(b,0,c):c=0,d=c,e=b.length,k=[];e>d;++d)if(i=b[d],i.length)for(f=0,g=i.length;g>f;++f)j=this._get(i[f]),k.push(j[a].apply(j,l));else j=this._get(i),k.push(j[a].apply(j,l));return k},has:function(a){return a.eid&&void 0!==this._itemsById[a.eid]},getItems:function(){var a,b,c,d=[];for(a=0;a<arguments.length;++a)if(c=arguments[a],c.length)for(b=0;b<c.length;++b)d.push(this._get(c[b]));else d.push(this._get(c));return d},get:function(a){return this._get(a)},add:function(){var a,b,c;for(a=0;a<arguments.length;++a)if(c=arguments[a],c.length)for(b=0;b<c.length;++b)this._get(c[b]);else this._get(c)},remove:function(){var a,b,c;for(a=0;a<arguments.length;++a)if(c=arguments[a],c.length)for(b=0;b<c.length;++b)this._remove(c[b]);else this._remove(c)},hasOffset:function(a){return this.has(a)?this._itemsById[a.eid].hasOffset:void 0},capture:function(){this._invoke("capture",arguments)},captureAll:function(){for(var a=0,b=this._items.length;b>a;a++)this._items[a].capture()},clearCapture:function(){this._invoke("clearCapture",arguments)},clearAllCaptures:function(){for(var a=0,b=this._items.length;b>a;a++)this._items[a].clearCapture()},offset:function(a,b){this._invoke("offset",arguments,2)},offsetAll:function(a,b){for(var c=0,d=this._items.length;d>c;c++)this._items[c].offset(a,b)},clearOffset:function(){this._invoke("clearOffset",arguments)},clearAllOffsets:function(){for(var a=0,b=this._items.length;b>a;a++)this._items[a].clearOffset()},runTransition:function(a){this._invoke("runTransition",arguments,1)},runAllTransitions:function(a){for(var b=0,c=this._items.length;c>b;b++)this._items[b].runTransition(a)},clearTransition:function(){this._invoke("clearTransition",arguments)},clearAllTransitions:function(){for(var a=0,b=this._items.length;b>a;a++)this._items[a].clearTransition()},stopTransition:function(){this._invoke("stopTransition",arguments)},stopAllTransitions:function(){for(var a=0,b=this._items.length;b>a;a++)this._items[a].stopTransition()},whenTransitionEnds:function(){var a=this._invoke("whenTransitionEnds",arguments);return 0!=a.length?Promise.all(a):Promise.resolve(null)},whenAllTransitionsEnd:function(){return 0!=this._items.length?Promise.all(this._items.map(function(a){return a.whenTransitionEnds()})):Promise.resolve(null)},promise:function(){return 0==arguments.length?this.whenAllTransitionsEnd():this.whenTransitionEnds.call(this,arguments)},validate:function(){for(var a=0,b=this._items.length;b>a;a++)this._items[a].validate()}},{items:{get:function(){return this._items}}}),b.exports=d},{"./TransformItem":109,underscore:"underscore"}],109:[function(a,b,c){function d(a,b){e.bindAll(this,"_onTransitionEnd"),this.el=a,this.id=b,this.el.eid=b,this.el.addEventListener(i,this._onTransitionEnd,!1),this._captureInvalid=!1,this._capturedChanged=!1,this._capturedX=null,this._capturedY=null,this._currCapture={},this._lastCapture={},this._hasOffset=!1,this._offsetInvalid=!1,this._offsetX=null,this._offsetY=null,this._renderedX=null,this._renderedY=null,this._hasTransition=!1,this._transitionInvalid=!1,this._transitionRunning=!1,this._transition=e.extend({},m),this._promises=[],this._pendingPromises=[]}var e=a("underscore"),f=a("utils/prefixedProperty"),g=a("utils/prefixedStyleName"),h=a("utils/prefixedEvent"),i=h("transitionend"),j="none 0s step-start 0s",k=function(){var b=a("app/control/Globals").TRANSLATE_TEMPLATE;return function(a){return b(a._renderedX,a._renderedY)}}(),l=function(a){return a.property+" "+a.duration/1e3+"s "+a.easing+" "+a.delay/1e3+"s"},m={name:"unset",className:"tx-unset",property:"none",easing:"ease",delay:0,duration:0,cssText:"unset"},n={opacity:"1",visibility:"visible",transform:"matrix(1, 0, 0, 1, 0, 0)",transformStyle:"",transition:""},o=Object.keys(n),p=o.reduce(function(a,b){return a[b]=f(b),a},{}),q=a("utils/strings/camelToDashed"),r=o.map(q).reduce(function(a,b){return a[b]=g(b),a},{}),s=function(a,b){return 0!=a.length&&(a.forEach(function(a,c,d){a.resolve(b),d[c]=null}),a.length=0),a},t=function(a,b){return 0!=a.length&&(a.forEach(function(a,c,d){a.reject(b),d[c]=null}),a.length=0),a};d.prototype=Object.create({destroy:function(){this.el.removeEventListener(i,this._onTransitionEnd,!1),t(this._pendingPromises,this.el),t(this._promises,this.el)},capture:function(){return this._validateCapture(),this},clearCapture:function(){return this._captureInvalid=!0,this},offset:function(a,b){return this._hasOffset=!0,this._offsetInvalid=!0,this._offsetX=a||0,this._offsetY=b||0,this},clearOffset:function(){return this._hasOffset&&(this._hasOffset=!1,this._offsetInvalid=!0,this._offsetX=null,this._offsetY=null),this},runTransition:function(a){if(!a)return this.clearTransition();var b=this._transitionValue,c=this._transition.name;return this._transition.property=r.transform,this._transition=e.extend(this._transition,a),this._transitionValue=l(this._transition),this._transitionInvalid&&console.warn("tx[%s]::runTransition set over (%s:'%s' => %s:'%s')",this.id,c,b,this._transition.name,this._transitionValue),this._hasTransition=!0,this._transitionInvalid=!0,this},clearTransition:function(){return this._transition=e.extend(this._transition,m),this._transitionValue=j,this._hasTransition=!1,this._transitionInvalid=!0,this},stopTransition:function(){return this._transition=e.extend(this._transition,m),this._transitionValue=j,this._hasTransition=!1,this._transitionInvalid=!0,this},whenTransitionEnds:function(){var a,b,c;return this._transitionInvalid||this._transitionRunning?(a={},b=new Promise(function(b,c){a.resolve=b,a.reject=c}),c=this._transitionInvalid?this._pendingPromises:this._promises,c.push(a)):b=Promise.resolve(this.el),b},validate:function(){if(this._ignoreEvent=!0,this._captureInvalid){var a=null!==this._renderedX?this._renderedX:this._capturedX,b=null!==this._renderedY?this._renderedY:this._capturedY;this._validateCapture(),this._validateOffset();var c=null!==this._renderedX?this._renderedX:this._capturedX,d=null!==this._renderedY?this._renderedY:this._capturedY;a===c&&b===d&&(this._hasTransition&&console.warn("tx[%s]::validate unchanged: last:[%i,%i] curr:[%i,%i]",this.el.id||this.id,a,b,c,d),this.clearTransition()),this._validateTransition()}else this._validateTransition(),this._validateOffset();return this._ignoreEvent=!1,this._capturedChanged=!1,this},_validateCapture:function(){if(this._captureInvalid){var a=null;if(this._hasOffset&&!this._offsetInvalid&&(a=this._getCSSProp("transform"),""===a&&console.error('tx[%s]::_capture valid offset (%i,$i) but transformValue=""',this.id,this._offsetX,this._offsetY),this._removeCSSProp("transform")),this._lastCapture=this._currCapture,this._currCapture=this._getComputedCSSProps(),this._currCapture.transform!==this._lastCapture.transform){var b,c;c=this._currCapture.transform.match(/(matrix|matrix3d)\(([^\)]+)\)/),c?(b=c[2].split(","),"matrix"===c[1]?(this._capturedX=parseFloat(b[4]),this._capturedY=parseFloat(b[5])):(this._capturedX=parseFloat(b[12]),this._capturedY=parseFloat(b[13]))):(this._capturedX=0,this._capturedY=0),this._capturedChanged=!0}null!==a&&this._setCSSProp("transform",a),this._captureInvalid=!1}},_validateOffset:function(){if(this._offsetInvalid)if(this._offsetInvalid=!1,this._hasOffset){var a=this._offsetX+this._capturedX,b=this._offsetY+this._capturedY;(a!==this._renderedX||b!==this._renderedY)&&(this._renderedX=a,this._renderedY=b,this._setCSSProp("transform",k(this)))}else this._renderedX=null,this._renderedY=null,this._removeCSSProp("transform")},_validateTransition:function(){if(this._transitionInvalid){this._transitionInvalid=!1;var a=this._promises;this._promises=this._pendingPromises,this._pendingPromises=t(a,this.el),this._transitionRunning=this._hasTransition,this._setCSSProp("transition",this._transitionValue),this._hasTransition||s(this._promises,this.el)}},_onTransitionEnd:function(a){this._ignoreEvent||this._transitionRunning&&this.el===a.target&&this._transition.property==a.propertyName&&(this._hasTransition=!1,this._transitionRunning=!1,this._removeCSSProp("transition"),s(this._promises,this.el))},_getCSSProp:function(a){return this.el.style[p[a]]},_setCSSProp:function(a,b){"transition"===a&&b==j&&(b=""),null===b||void 0===b||""===b?this._removeCSSProp(a):this.el.style[p[a]]=b},_removeCSSProp:function(a){this.el.style[p[a]]=""},_getComputedCSSProps:function(){var a={},b=window.getComputedStyle(this.el);for(var c in p)a[c]=b[p[c]];return a}},{transition:{get:function(){return this._transition}},hasTransition:{get:function(){return this._hasTransition}},capturedChanged:{get:function(){return this._capturedChanged}},capturedX:{get:function(){return this._capturedX}},capturedY:{get:function(){return this._capturedY}},hasOffset:{get:function(){return this._hasOffset}},offsetX:{get:function(){return this._offsetX}},offsetY:{get:function(){return this._offsetY}}}),b.exports=d},{"app/control/Globals":41,underscore:"underscore","utils/prefixedEvent":117,"utils/prefixedProperty":118,"utils/prefixedStyleName":119,"utils/strings/camelToDashed":122}],110:[function(a,b,c){var d=2*Math.PI,e=function(a,b){if("object"==typeof b)for(var c in b)switch(typeof a[c]){case"undefined":break;case"function":Array.isArray(b[c])?a[c].apply(a,b[c]):a[c].call(a,b[c]);break;default:a[c]=b[c]}};b.exports={setStyle:e,vGuide:function(a,b,c){a.save(),c&&e(a,c),a.beginPath(),a.moveTo(b,a.canvas.offsetTop),a.lineTo(b,a.canvas.offsetHeight),a.stroke(),a.restore()},crosshair:function(a,b,c,d,f){a.save(),f&&e(a,f),a.translate(b,c),a.rotate(Math.PI/4),a.beginPath(),a.moveTo(0,-d),a.lineTo(0,d),a.moveTo(-d,0),a.lineTo(d,0),a.stroke(),a.restore()},circle:function(a,b,c,f,g,h){a.save(),h&&e(a,h),a.beginPath(),a.arc(b,c,f,0,d),a.closePath(),g?a.fill():a.stroke(),a.restore()},square:function(a,b,c,d,f,g){d=2*Math.floor(d/2),f&&(d+=.5),a.save(),g&&e(a,g),a.beginPath(),a.rect(b-d,c-d,2*d,2*d),f?a.fill():a.stroke(),a.restore()},arrowhead:function(a,b,c,d,f,g,h){a.save(),h&&e(a,h),10>d&&a.setLineDash([]),a.translate(b,c),a.rotate(f),a.translate(.5*d,0),a.beginPath(),a.moveTo(0,0),a.lineTo(-d*Math.SQRT2,d*Math.SQRT1_2),a.arcTo(0,0,-d*Math.SQRT2,-d*Math.SQRT1_2,d),a.lineTo(0,0),g?a.fill():a.stroke(),a.restore()}}},{}],111:[function(a,b,c){b.exports=function(a,b,c,d,e,f,g){var h,i,j,k,l,m=d>a?1:-1,n=Math.abs(e-b),o=Math.abs(d-a),p=c+f;if(1>n&&(h=0,i=o),n>=p&&o>=p)j=p,h=c,i=c;else{if(j=Math.sqrt(n*f*2+n*c*2-n*n),k=j*c/p,l=n*c/p,l>c||j>o)return;var q=(p-n)/j;h=k-l*q,i=n*q+h}return g>0&&(g>1?g=Math.min(o-p,g):g*=o-p,h+=g,i+=g),[h*m+a,i*m+a,h,i]}},{}],112:[function(a,b,c){var d=["boxSizing","position","objectFit"],e=["marginTop","marginBottom","marginLeft","marginRight","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","paddingTop","paddingBottom","paddingLeft","paddingRight"],f=["top","bottom","left","right"],g=["width","height","minWidth","minHeight","maxWidth","maxHeight"],h=e.concat(g,f),i=/^(-?[\d\.]+)(px|em|rem)$/;b.exports=function(a,b,c){a instanceof HTMLElement&&(a=getComputedStyle(a));var f,g,j,k,l,m;for(b||(b={}),l=b.fontSize=parseFloat(a.fontSize),j=0,k=d.length;k>j;j++)g=d[j],g in a&&(b[g]=a[g]);var n=c?e:h;for(j=0,k=n.length;k>j;j++)g=n[j],b["_"+g]=a[g],a[g]&&(f=i.exec(a[g]))&&("px"===f[2]?b[g]=parseFloat(f[1]):"em"===f[2]?b[g]=parseFloat(f[1])*l:"rem"===f[2]?(m||(m=parseFloat(getComputedStyle(document.documentElement).fontSize)),b[g]=parseFloat(f[1])*m):(console.warn("Ignoring value",g,f[1],f[2]),b[g]=null));return b}},{}],113:[function(a,b,c){var d=function(a,b,c,d){return c*a/d+b};b.exports=d},{}],114:[function(a,b,c){b.exports=["loadstart","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","paused","resize","ratechange","volumechange"]},{}],115:[function(a,b,c){b.exports=function(a,b,c){c||(c=b);var d={width:a.width+2*b,height:a.height+2*c};return d.width>=0?(d.left=a.left-b,d.right=d.left+d.width,d.x=d.left):(d.right=a.right+b,d.left=a.right-d.width,d.y=d.right),d.height>=0?(d.top=a.top-c,d.bottom=d.top+d.height,d.y=d.top):(d.bottom=a.bottom+c,d.top=a.bottom-d.height,d.y=d.bottom),d}},{}],116:[function(a,b,c){var d;b.exports=function(a){return d=d||document.createElement("a"),d.href=a,d.href}},{}],117:[function(a,b,c){var d=[""].concat(a("./prefixes")),e=d.map(function(a){return""===a?a:a.charAt(0).toUpperCase()+a.substr(1)}),f={},g={},h=function(a,b,c){var f=/^[A-Z]/.test(a)?e:d;b||(b=document);for(var g=0;g<f.length;g++){if(c&&f[g]+c in b)return f[g]+a;if("on"+f[g]+a in b)return f[g]+a}return null};f.transitionend=function(){var a,b=document.body.style,c={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd"};for(a in c)if(a in b)return c[a];return null},b.exports=function(a){return g.hasOwnProperty(a)||(g[a]=f.hasOwnProperty(a)?f[a]():h.apply(null,arguments),null===g[a]&&console.warn("Event '%s' not found",a)),g[a]}},{"./prefixes":120}],118:[function(a,b,c){var d=a("./prefixes"),e=d.length,f={},g=function(a,b){var c,f;if(a in b)return a;f=a[0].toUpperCase()+a.slice(1);for(var g=0;e>g;g++)if(c=d[g]+f,c in b)return c;return console.error("Property '%s' not found",a),null};b.exports=function(a,b){return f[a]||(f[a]=g(a,b||document.body.style))}},{"./prefixes":120}],119:[function(a,b,c){var d=a("./prefixes"),e=d.length,f={},g=function(a,b){var c;if(a in b)return a;for(var f=0;e>f;f++)if(c="-"+d[f]+"-"+a,c in b)return c;return console.warn("CSS style '%s' not found",a),null};b.exports=function(a,b){return f[a]||(f[a]=g(a,b||document.body.style))}},{"./prefixes":120}],120:[function(a,b,c){b.exports=["webkit","moz","ms","o"]},{}],121:[function(a,b,c){var d;if(/Trident|Edge/.test(navigator.userAgent))d=setTimeout;else if(window.setImmediate)d=window.setImmediate;else{var e=[],f=String(Math.random());window.addEventListener("message",function(a){if(a.data===f){var b=e;e=[],b.forEach(function(a){a()})}}),d=function(a){e.push(a),window.postMessage(f,"*")}}b.exports=d},{}],122:[function(a,b,c){b.exports=function(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}},{}],123:[function(a,b,c){b.exports=function(a){return a.replace(/<[^>]+>/g,"")}},{}],124:[function(a,b,c){function d(a){return a==f.DIRECTION_DOWN?"down":a==f.DIRECTION_UP?"up":a==f.DIRECTION_LEFT?"left":a==f.DIRECTION_RIGHT?"right":""}function e(){var a=f.Pan.apply(this,arguments);return this.thresholdOffsetX=null,this.thresholdOffsetY=null,this.thresholdOffset=null,a}var f=a("hammerjs");f.inherit(e,f.Pan,{emit:function(a){var b=this.options.threshold,c=a.direction;return this.state==f.STATE_BEGAN&&(this.thresholdOffsetX=c&f.DIRECTION_HORIZONTAL?c&f.DIRECTION_LEFT?b:-b:0,this.thresholdOffsetY=c&f.DIRECTION_VERTICAL?c&f.DIRECTION_UP?b:-b:0),a.thresholdOffsetX=this.thresholdOffsetX,a.thresholdOffsetY=this.thresholdOffsetY,a.thresholdDeltaX=a.deltaX+this.thresholdOffsetX,a.thresholdDeltaY=a.deltaY+this.thresholdOffsetY,this.pX=a.deltaX,this.pY=a.deltaY,c=d(c),c&&this.manager.emit(this.options.event+c,a),f.Recognizer.prototype.emit.apply(this,arguments)}}),b.exports=e},{hammerjs:"hammerjs"}],125:[function(a,b,c){b.exports={units:{hu_px:"20",vu_px:"12"},transitions:{min_delay_ms:"34",delay_interval_ms:"134",duration_ms:"400",ease:"ease"},breakpoints:{mobile:"not screen and (min-width: 704px) and (min-height: 540px)",unsupported:"not screen and (min-width: 704px)","desktop-small":"only screen and (min-width: 1024px)","desktop-medium":"only screen and (min-width: 1224px)","desktop-large":"only screen and (min-width: 1824px)"},default_colors:{color:"hsl(47, 5%, 15%)","background-color":"hsl(47, 5%, 95%)","--link-color":"hsl(10, 80%, 50%)","--alt-background-color":"unset"},layout_names:["left-layout","default-layout","right-layout"],temp:{collapse_offset:"360"}}},{}],"Backbone.Mutators":[function(a,b,c){!function(d,e,f){"use strict";"object"==typeof c?b.exports=e(a("underscore"),a("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],function(a,b){return a=a===f?d._:a,b=b===f?d.Backbone:b,d.returnExportsGlobal=e(a,b,d)}):d.returnExportsGlobal=e(d._,d.Backbone)}(this,function(a,b,c,d){"use strict";b=b===d?c.Backbone:b,a=a===d?c._:a;var e=function(){},f=b.Model.prototype.get,g=b.Model.prototype.set,h=b.Model.prototype.toJSON;return e.prototype.mutators={},e.prototype.get=function(b){var c=this.mutators!==d;return c===!0&&a.isFunction(this.mutators[b])===!0?this.mutators[b].call(this):c===!0&&a.isObject(this.mutators[b])===!0&&a.isFunction(this.mutators[b].get)===!0?this.mutators[b].get.call(this):f.call(this,b)},e.prototype.set=function(b,c,e){var f=this.mutators!==d,h=null,i=null;return h=g.call(this,b,c,e),a.isObject(b)||null===b?(i=b,e=c):(i={},i[b]=c),f===!0&&a.isObject(this.mutators[b])===!0&&(a.isFunction(this.mutators[b].set)===!0?h=this.mutators[b].set.call(this,b,i[b],e,a.bind(g,this)):a.isFunction(this.mutators[b])&&(h=this.mutators[b].call(this,b,i[b],e,a.bind(g,this)))),f===!0&&a.isObject(i)&&a.each(i,a.bind(function(b,c){if(a.isObject(this.mutators[c])===!0){var f=this.mutators[c];a.isFunction(f.set)&&(f=f.set),a.isFunction(f)&&((e===d||a.isObject(e)===!0&&e.silent!==!0&&e.mutators!==d&&e.mutators.silent!==!0)&&this.trigger("mutators:set:"+c),f.call(this,c,b,e,a.bind(g,this)))}},this)),h},e.prototype.toJSON=function(b){var c,d,e=h.call(this);return a.each(this.mutators,a.bind(function(f,g){a.isObject(this.mutators[g])===!0&&a.isFunction(this.mutators[g].get)?(c=this.isSaving?this.isSaving(b,f,g):a.has(b||{},"emulateHTTP"),
d=this.mutators[g]["transient"],c&&d||(e[g]=a.bind(this.mutators[g].get,this)())):a.isFunction(this.mutators[g])&&(e[g]=a.bind(this.mutators[g],this)())},this)),e},e.prototype.escape=function(b){var c=this.get(b);return a.escape(null==c?"":""+c)},a.extend(b.Model.prototype,e.prototype),b.Mutators=e,e})},{backbone:"backbone",underscore:"underscore"}],Modernizr:[function(a,b,c){a("modernizr-dist"),Modernizr._config.classPrefix="has-",Modernizr._config.enableClasses=!1,Modernizr.addTest("weakmap",function(){return void 0!==window.WeakMap}),Modernizr.addTest("strictmode",function(){try{undeclaredVar=1}catch(a){return!0}return!1}),b.exports=window.Modernizr},{"modernizr-dist":"modernizr-dist"}],"backbone.babysitter":[function(a,b,c){!function(d,e){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(a,b){return e(a,b)});else if("undefined"!=typeof c){var f=a("backbone"),g=a("underscore");b.exports=e(f,g)}else e(d.Backbone,d._)}(this,function(a,b){"use strict";var c=a.ChildViewContainer;return a.ChildViewContainer=function(a,b){var c=function(a){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),b.each(a,this.add,this)};b.extend(c.prototype,{add:function(a,b){var c=a.cid;return this._views[c]=a,a.model&&(this._indexByModel[a.model.cid]=c),b&&(this._indexByCustom[b]=c),this._updateLength(),this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){var b=this._indexByModel[a];return this.findByCid(b)},findByCustom:function(a){var b=this._indexByCustom[a];return this.findByCid(b)},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var c=a.cid;return a.model&&delete this._indexByModel[a.model.cid],b.any(this._indexByCustom,function(a,b){return a===c?(delete this._indexByCustom[b],!0):void 0},this),delete this._views[c],this._updateLength(),this},call:function(a){this.apply(a,b.tail(arguments))},apply:function(a,c){b.each(this._views,function(d){b.isFunction(d[a])&&d[a].apply(d,c||[])})},_updateLength:function(){this.length=b.size(this._views)}});var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return b.each(d,function(a){c.prototype[a]=function(){var c=b.values(this._views),d=[c].concat(b.toArray(arguments));return b[a].apply(b,d)}}),c}(a,b),a.ChildViewContainer.VERSION="0.1.11",a.ChildViewContainer.noConflict=function(){return a.ChildViewContainer=c,this},a.ChildViewContainer})},{backbone:"backbone",underscore:"underscore"}],"backbone.native":[function(a,b,c){(function(){"use strict";function a(a){a[j]||(a[j]=0===m.length?++k:m.pop());var b=a[j];return l[b]||(l[b]=[])}function d(a){var b=a[j];l[b]&&(l[b]=null,a[j]=null,m.push(b))}function e(b,c,d,e){"function"==typeof d&&(e=d,d=null);var f=h.exec(c);c=f[1]||null;var g=f[2]||null;if(c){var j=e,k=e;j=d?function(a){for(var c=a.target;c&&c!==b;c=c.parentElement)if(i.call(c,d)){var e=k.call(c,a,c);return e===!1&&(a.stopPropagation(),a.preventDefault()),e}}:function(a){var c=k.call(b,a,b);return c===!1&&(a.stopPropagation(),a.preventDefault()),c},b.addEventListener(c,j,!1),a(b).push({eventName:c,callback:e,handler:j,namespace:g,selector:d})}}function f(b,c,e,f){"function"==typeof e&&(f=e,e=null);var g=h.exec(c||"");c=g[1];var i=g[2],j=a(b)||[];if(c||i||e||f){var k=j.filter(function(a){return!(i&&a.namespace!==i||c&&a.eventName!==c||f&&a.callback!==f||e&&a.selector!==e)});k.forEach(function(a){b.removeEventListener(a.eventName,a.handler,!1),j.splice(j.indexOf(a),1)}),0===j.length&&d(b)}else j.forEach(function(a){b.removeEventListener(a.eventName,a.handler,!1)}),d(b)}function g(a,b){if(b=b||document,!(this instanceof g))return new g(a,b);if(a)if("string"==typeof a)if(/^\s*</.test(a)){var c=document.createElement("div");c.innerHTML=a,this[0]=c.firstChild,c.removeChild(c.firstChild),this.length=1}else this[0]=b.querySelector(a),this.length=1;else this[0]=a,this.length=1;else this.length=0}var h=/^([^.]+)?(?:\.([^.]+))?$/,i=Element.prototype.matchesSelector||null;i||["webkit","moz","o","ms"].forEach(function(a){var b=Element.prototype[a+"MatchesSelector"];b&&(i=b)});var j="backboneNativeKey"+Math.random(),k=1,l={},m=[];if(g.prototype={hide:null,appendTo:null,find:null,attr:function(a){return Object.keys(a).forEach(function(b){switch(b){case"html":this[0].innerHTML=a[b];break;case"text":this[0].textContent=a[b];break;case"class":this[0].className=a[b];break;default:this[0].setAttribute(b,a[b])}},this),this},html:function(a){return this[0].innerHTML=a,this},remove:function(){var a=this[0];return a.parentElement&&a.parentElement.removeChild(a),function b(a){f(a);for(var c=0,d=a.childNodes.length;d>c;c++)a.childNodes[c].nodeType!==Node.TEXT_NODE&&b(a.childNodes[c])}(a),this},on:function(a,b,c){return e(this[0],a,b,c),this},off:function(a,b,c){return f(this[0],a,b,c),this},bind:function(a,b){return this.on(a,b)},unbind:function(a,b){return this.off(a,b)},delegate:function(a,b,c){return this.on(b,a,c)},undelegate:function(a,b,c){return this.off(b,a,c)}},g.ajax=function(a){a=a||{};var b=a.type||"GET",c=a.url,d=void 0===a.processData?!0:!!a.processData,e=a.data;if(d&&"object"==typeof e){var f=Object.keys(e).map(function(a){return encodeURIComponent(a)+"="+encodeURIComponent(e[a])});e=f.join("&")}!e||"GET"!==b&&"HEAD"!==b||(c+=(-1===c.indexOf("?")?"?":"&")+e,e=void 0);var g=new XMLHttpRequest;return g.open(b,c,!0),a.contentType&&g.setRequestHeader("Content-Type",a.contentType),a.beforeSend&&a.beforeSend(g),g.onload=function(){var b=!1,c=g.responseText;if("json"===a.dataType)try{c=JSON.parse(c)}catch(d){b=!0}!b&&g.status>=200&&g.status<300?a.success&&a.success(c,g.statusText,g):a.error&&a.error(g)}.bind(this),g.onerror=g.onabort=function(){a.error&&a.error(g)},g.send(e),g},g.on=e,g.off=f,"undefined"!=typeof c)return b.exports=g;var n=this,o=n.Backbone?n.Backbone.Native:null,p=n.$;n.Backbone&&(n.Backbone.Native=g),n.$=g,g.noConflict=function(a){return n.$=p,a&&(n.Backbone.Native=o),g},n.Backbone&&(n.Backbone.setDomLibrary?n.Backbone.setDomLibrary(g):n.Backbone.$=g)}).call(this)},{}],backbone:[function(a,b,c){!function(b,d){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(a,c,e){b.Backbone=d(b,e,a,c)});else if("undefined"!=typeof c){var e=a("underscore");d(b,c,e)}else b.Backbone=d(b,{},b._,b.jQuery||b.Zepto||b.ender||b.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice;b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;k>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!o&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;f>e;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a,b){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b})},{underscore:"underscore"}],"classlist-polyfill":[function(a,b,c){"document"in window.self&&("classList"in document.createElement("_")?!function(){"use strict";var a=document.createElement("_");if(a.classList.add("c1","c2"),!a.classList.contains("c2")){var b=function(a){var b=DOMTokenList.prototype[a];DOMTokenList.prototype[a]=function(a){var c,d=arguments.length;for(c=0;d>c;c++)a=arguments[c],b.call(this,a)}};b("add"),b("remove")}if(a.classList.toggle("c3",!1),a.classList.contains("c3")){var c=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,b){return 1 in arguments&&!this.contains(a)==!b?b:c.call(this,a)}}a=null}():!function(a){"use strict";if("Element"in a){var b="classList",c="prototype",d=a.Element[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(""===b)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){for(var b=f.call(a.getAttribute("class")||""),c=b?b.split(/\s+/):[],d=0,e=c.length;e>d;d++)this.push(c[d]);this._updateClassName=function(){a.setAttribute("class",this.toString())}},k=j[c]=[],l=function(){return new j(this)};if(h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",-1!==i(this,a)},k.add=function(){var a,b=arguments,c=0,d=b.length,e=!1;do a=b[c]+"",-1===i(this,a)&&(this.push(a),e=!0);while(++c<d);e&&this._updateClassName()},k.remove=function(){var a,b,c=arguments,d=0,e=c.length,f=!1;do for(a=c[d]+"",b=i(this,a);-1!==b;)this.splice(b,1),f=!0,b=i(this,a);while(++d<e);f&&this._updateClassName()},k.toggle=function(a,b){a+="";var c=this.contains(a),d=c?b!==!0&&"remove":b!==!1&&"add";return d&&this[d](a),b===!0||b===!1?b:!c},k.toString=function(){return this.join(" ")},e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(n){-2146823252===n.number&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}}(window.self))},{}],color:[function(a,b,c){var d=a("color-convert"),e=a("color-string"),f=function(a){if(a instanceof f)return a;if(!(this instanceof f))return new f(a);if(this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},"string"==typeof a){var b=e.getRgba(a);if(b)this.setValues("rgb",b);else if(b=e.getHsla(a))this.setValues("hsl",b);else{if(!(b=e.getHwb(a)))throw new Error('Unable to parse color from string "'+a+'"');this.setValues("hwb",b)}}else if("object"==typeof a){var b=a;if(void 0!==b.r||void 0!==b.red)this.setValues("rgb",b);else if(void 0!==b.l||void 0!==b.lightness)this.setValues("hsl",b);else if(void 0!==b.v||void 0!==b.value)this.setValues("hsv",b);else if(void 0!==b.w||void 0!==b.whiteness)this.setValues("hwb",b);else{if(void 0===b.c&&void 0===b.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(a));this.setValues("cmyk",b)}}};f.prototype={rgb:function(a){return this.setSpace("rgb",arguments)},hsl:function(a){return this.setSpace("hsl",arguments)},hsv:function(a){return this.setSpace("hsv",arguments)},hwb:function(a){return this.setSpace("hwb",arguments)},cmyk:function(a){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){return 1!==this.values.alpha?this.values.hwb.concat([this.values.alpha]):this.values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var a=this.values.rgb;return a.concat([this.values.alpha])},hslaArray:function(){var a=this.values.hsl;return a.concat([this.values.alpha])},alpha:function(a){return void 0===a?this.values.alpha:(this.setValues("alpha",a),this)},red:function(a){return this.setChannel("rgb",0,a)},green:function(a){return this.setChannel("rgb",1,a)},blue:function(a){return this.setChannel("rgb",2,a)},hue:function(a){return this.setChannel("hsl",0,a)},saturation:function(a){return this.setChannel("hsl",1,a)},lightness:function(a){return this.setChannel("hsl",2,a)},saturationv:function(a){return this.setChannel("hsv",1,a)},whiteness:function(a){return this.setChannel("hwb",1,a)},blackness:function(a){return this.setChannel("hwb",2,a)},value:function(a){return this.setChannel("hsv",2,a)},cyan:function(a){return this.setChannel("cmyk",0,a)},magenta:function(a){return this.setChannel("cmyk",1,a)},yellow:function(a){return this.setChannel("cmyk",2,a)},black:function(a){return this.setChannel("cmyk",3,a)},hexString:function(){return e.hexString(this.values.rgb)},rgbString:function(){return e.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return e.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return e.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return e.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return e.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return e.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return e.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){return this.values.rgb[0]<<16|this.values.rgb[1]<<8|this.values.rgb[2]},luminosity:function(){for(var a=this.values.rgb,b=[],c=0;c<a.length;c++){var d=a[c]/255;b[c]=.03928>=d?d/12.92:Math.pow((d+.055)/1.055,2.4)}return.2126*b[0]+.7152*b[1]+.0722*b[2]},contrast:function(a){var b=this.luminosity(),c=a.luminosity();return b>c?(b+.05)/(c+.05):(c+.05)/(b+.05)},level:function(a){var b=this.contrast(a);return b>=7.1?"AAA":b>=4.5?"AA":""},dark:function(){var a=this.values.rgb,b=(299*a[0]+587*a[1]+114*a[2])/1e3;return 128>b},light:function(){return!this.dark()},negate:function(){for(var a=[],b=0;3>b;b++)a[b]=255-this.values.rgb[b];return this.setValues("rgb",a),this},lighten:function(a){return this.values.hsl[2]+=this.values.hsl[2]*a,this.setValues("hsl",this.values.hsl),this},darken:function(a){return this.values.hsl[2]-=this.values.hsl[2]*a,this.setValues("hsl",this.values.hsl),this},saturate:function(a){return this.values.hsl[1]+=this.values.hsl[1]*a,this.setValues("hsl",this.values.hsl),this},desaturate:function(a){return this.values.hsl[1]-=this.values.hsl[1]*a,this.setValues("hsl",this.values.hsl),
this},whiten:function(a){return this.values.hwb[1]+=this.values.hwb[1]*a,this.setValues("hwb",this.values.hwb),this},blacken:function(a){return this.values.hwb[2]+=this.values.hwb[2]*a,this.setValues("hwb",this.values.hwb),this},greyscale:function(){var a=this.values.rgb,b=.3*a[0]+.59*a[1]+.11*a[2];return this.setValues("rgb",[b,b,b]),this},clearer:function(a){return this.setValues("alpha",this.values.alpha-this.values.alpha*a),this},opaquer:function(a){return this.setValues("alpha",this.values.alpha+this.values.alpha*a),this},rotate:function(a){var b=this.values.hsl[0];return b=(b+a)%360,b=0>b?360+b:b,this.values.hsl[0]=b,this.setValues("hsl",this.values.hsl),this},mix:function(a,b){var c=this,d=a,e=void 0!==b?b:.5,f=2*e-1,g=c.alpha()-d.alpha(),h=((f*g==-1?f:(f+g)/(1+f*g))+1)/2,i=1-h;return this.rgb(h*c.red()+i*d.red(),h*c.green()+i*d.green(),h*c.blue()+i*d.blue()).alpha(c.alpha()*e+d.alpha()*(1-e))},toJSON:function(){return this.rgb()},clone:function(){return new f(this.rgb())}},f.prototype.getValues=function(a){for(var b={},c=0;c<a.length;c++)b[a.charAt(c)]=this.values[a][c];return 1!=this.values.alpha&&(b.a=this.values.alpha),b},f.prototype.setValues=function(a,b){var c={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},e={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},f=1;if("alpha"==a)f=b;else if(b.length)this.values[a]=b.slice(0,a.length),f=b[a.length];else if(void 0!==b[a.charAt(0)]){for(var g=0;g<a.length;g++)this.values[a][g]=b[a.charAt(g)];f=b.a}else if(void 0!==b[c[a][0]]){for(var h=c[a],g=0;g<a.length;g++)this.values[a][g]=b[h[g]];f=b.alpha}if(this.values.alpha=Math.max(0,Math.min(1,void 0!==f?f:this.values.alpha)),"alpha"!=a){for(var g=0;g<a.length;g++){var i=Math.max(0,Math.min(e[a][g],this.values[a][g]));this.values[a][g]=Math.round(i)}for(var j in c){j!=a&&(this.values[j]=d[a][j](this.values[a]));for(var g=0;g<j.length;g++){var i=Math.max(0,Math.min(e[j][g],this.values[j][g]));this.values[j][g]=Math.round(i)}}return!0}},f.prototype.setSpace=function(a,b){var c=b[0];return void 0===c?this.getValues(a):("number"==typeof c&&(c=Array.prototype.slice.call(b)),this.setValues(a,c),this)},f.prototype.setChannel=function(a,b,c){return void 0===c?this.values[a][b]:(this.values[a][b]=c,this.setValues(a,this.values[a]),this)},b.exports=f},{"color-convert":3,"color-string":4}],"cookies-js":[function(a,b,c){!function(a,d){"use strict";var e=function(a){if("object"!=typeof a.document)throw new Error("Cookies.js requires a `window` with a `document` object");var b=function(a,c,d){return 1===arguments.length?b.get(a):b.set(a,c,d)};return b._document=a.document,b._cacheKeyPrefix="cookey.",b._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),b.defaults={path:"/",secure:!1},b.get=function(a){b._cachedDocumentCookie!==b._document.cookie&&b._renewCache();var c=b._cache[b._cacheKeyPrefix+a];return c===d?d:decodeURIComponent(c)},b.set=function(a,c,e){return e=b._getExtendedOptions(e),e.expires=b._getExpiresDate(c===d?-1:e.expires),b._document.cookie=b._generateCookieString(a,c,e),b},b.expire=function(a,c){return b.set(a,d,c)},b._getExtendedOptions=function(a){return{path:a&&a.path||b.defaults.path,domain:a&&a.domain||b.defaults.domain,expires:a&&a.expires||b.defaults.expires,secure:a&&a.secure!==d?a.secure:b.defaults.secure}},b._isValidDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)&&!isNaN(a.getTime())},b._getExpiresDate=function(a,c){if(c=c||new Date,"number"==typeof a?a=a===1/0?b._maxExpireDate:new Date(c.getTime()+1e3*a):"string"==typeof a&&(a=new Date(a)),a&&!b._isValidDate(a))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return a},b._generateCookieString=function(a,b,c){a=a.replace(/[^#$&+\^`|]/g,encodeURIComponent),a=a.replace(/\(/g,"%28").replace(/\)/g,"%29"),b=(b+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),c=c||{};var d=a+"="+b;return d+=c.path?";path="+c.path:"",d+=c.domain?";domain="+c.domain:"",d+=c.expires?";expires="+c.expires.toUTCString():"",d+=c.secure?";secure":""},b._getCacheFromString=function(a){for(var c={},e=a?a.split("; "):[],f=0;f<e.length;f++){var g=b._getKeyValuePairFromCookieString(e[f]);c[b._cacheKeyPrefix+g.key]===d&&(c[b._cacheKeyPrefix+g.key]=g.value)}return c},b._getKeyValuePairFromCookieString=function(a){var b=a.indexOf("=");b=0>b?a.length:b;var c,d=a.substr(0,b);try{c=decodeURIComponent(d)}catch(e){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+d+'"',e)}return{key:c,value:a.substr(b+1)}},b._renewCache=function(){b._cache=b._getCacheFromString(b._document.cookie),b._cachedDocumentCookie=b._document.cookie},b._areEnabled=function(){var a="cookies.js",c="1"===b.set(a,1).get(a);return b.expire(a),c},b.enabled=b._areEnabled(),b},f="object"==typeof a.document?e(a):e;"function"==typeof define&&define.amd?define(function(){return f}):"object"==typeof c?("object"==typeof b&&"object"==typeof b.exports&&(c=b.exports=f),c.Cookies=f):a.Cookies=f}("undefined"==typeof window?this:window)},{}],"es6-promise":[function(a,b,c){(function(c,d){(function(){"use strict";function e(a){return"function"==typeof a||"object"==typeof a&&null!==a}function f(a){return"function"==typeof a}function g(a){T=a}function h(a){X=a}function i(){return function(){c.nextTick(n)}}function j(){return function(){S(n)}}function k(){var a=0,b=new $(n),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function l(){var a=new MessageChannel;return a.port1.onmessage=n,function(){a.port2.postMessage(0)}}function m(){return function(){setTimeout(n,1)}}function n(){for(var a=0;W>a;a+=2){var b=ba[a],c=ba[a+1];b(c),ba[a]=void 0,ba[a+1]=void 0}W=0}function o(){try{var b=a,c=b("vertx");return S=c.runOnLoop||c.runOnContext,j()}catch(d){return m()}}function p(a,b){var c=this,d=c._state;if(d===fa&&!a||d===ga&&!b)return this;var e=new this.constructor(r),f=c._result;if(d){var g=arguments[d-1];X(function(){H(d,e,g,f)})}else D(c,e,a,b);return e}function q(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(r);return z(c,a),c}function r(){}function s(){return new TypeError("You cannot resolve a promise with itself")}function t(){return new TypeError("A promises callback cannot return that same promise.")}function u(a){try{return a.then}catch(b){return ha.error=b,ha}}function v(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function w(a,b,c){X(function(a){var d=!1,e=v(c,b,function(c){d||(d=!0,b!==c?z(a,c):B(a,c))},function(b){d||(d=!0,C(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,C(a,e))},a)}function x(a,b){b._state===fa?B(a,b._result):b._state===ga?C(a,b._result):D(b,void 0,function(b){z(a,b)},function(b){C(a,b)})}function y(a,b,c){b.constructor===a.constructor&&c===ca&&constructor.resolve===da?x(a,b):c===ha?C(a,ha.error):void 0===c?B(a,b):f(c)?w(a,b,c):B(a,b)}function z(a,b){a===b?C(a,s()):e(b)?y(a,b,u(b)):B(a,b)}function A(a){a._onerror&&a._onerror(a._result),E(a)}function B(a,b){a._state===ea&&(a._result=b,a._state=fa,0!==a._subscribers.length&&X(E,a))}function C(a,b){a._state===ea&&(a._state=ga,a._result=b,X(A,a))}function D(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+fa]=c,e[f+ga]=d,0===f&&a._state&&X(E,a)}function E(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?H(c,d,e,f):e(f);a._subscribers.length=0}}function F(){this.error=null}function G(a,b){try{return a(b)}catch(c){return ia.error=c,ia}}function H(a,b,c,d){var e,g,h,i,j=f(c);if(j){if(e=G(c,d),e===ia?(i=!0,g=e.error,e=null):h=!0,b===e)return void C(b,t())}else e=d,h=!0;b._state!==ea||(j&&h?z(b,e):i?C(b,g):a===fa?B(b,e):a===ga&&C(b,e))}function I(a,b){try{b(function(b){z(a,b)},function(b){C(a,b)})}catch(c){C(a,c)}}function J(a){return new oa(this,a).promise}function K(a){function b(a){z(e,a)}function c(a){C(e,a)}var d=this,e=new d(r);if(!V(a))return C(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;e._state===ea&&f>g;g++)D(d.resolve(a[g]),void 0,b,c);return e}function L(a){var b=this,c=new b(r);return C(c,a),c}function M(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function O(a){this._id=ma++,this._state=void 0,this._result=void 0,this._subscribers=[],r!==a&&("function"!=typeof a&&M(),this instanceof O?I(this,a):N())}function P(a,b){this._instanceConstructor=a,this.promise=new a(r),Array.isArray(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?B(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&B(this.promise,this._result))):C(this.promise,this._validationError())}function Q(){var a;if("undefined"!=typeof d)a=d;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(b){throw new Error("polyfill failed because global object is unavailable in this environment")}var c=a.Promise;(!c||"[object Promise]"!==Object.prototype.toString.call(c.resolve())||c.cast)&&(a.Promise=na)}var R;R=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var S,T,U,V=R,W=0,X=function(a,b){ba[W]=a,ba[W+1]=b,W+=2,2===W&&(T?T(n):U())},Y="undefined"!=typeof window?window:void 0,Z=Y||{},$=Z.MutationObserver||Z.WebKitMutationObserver,_="undefined"!=typeof c&&"[object process]"==={}.toString.call(c),aa="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ba=new Array(1e3);U=_?i():$?k():aa?l():void 0===Y&&"function"==typeof a?o():m();var ca=p,da=q,ea=void 0,fa=1,ga=2,ha=new F,ia=new F,ja=J,ka=K,la=L,ma=0,na=O;O.all=ja,O.race=ka,O.resolve=da,O.reject=la,O._setScheduler=g,O._setAsap=h,O._asap=X,O.prototype={constructor:O,then:ca,"catch":function(a){return this.then(null,a)}};var oa=P;P.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},P.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===ea&&a>c;c++)this._eachEntry(b[c],c)},P.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===da){var e=u(a);if(e===ca&&a._state!==ea)this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=a;else if(c===na){var f=new c(r);y(f,a,e),this._willSettleAt(f,b)}else this._willSettleAt(new c(function(b){b(a)}),b)}else this._willSettleAt(d(a),b)},P.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===ea&&(this._remaining--,a===ga?C(d,c):this._result[b]=c),0===this._remaining&&B(d,this._result)},P.prototype._willSettleAt=function(a,b){var c=this;D(a,void 0,function(a){c._settledAt(fa,b,a)},function(a){c._settledAt(ga,b,a)})};var pa=Q,qa={Promise:na,polyfill:pa};"function"==typeof define&&define.amd?define(function(){return qa}):"undefined"!=typeof b&&b.exports?b.exports=qa:"undefined"!=typeof this&&(this.ES6Promise=qa),pa()}).call(this)}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],"fullscreen-polyfill":[function(a,b,c){!function(a){"use strict";function b(b,c){var d=a.createEvent("Event");d.initEvent(b,!0,!1),c.dispatchEvent(d)}function c(c){a[i.enabled]=a[e.enabled],a[i.element]=a[e.element],b(i.events.change,c.target)}function d(a){b(i.events.error,a.target)}var e,f,g=!0,h={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},i=h.w3;for(f in h)if(h[f].enabled in a){e=h[f];break}return!g||i.enabled in a||!e||(a.addEventListener(e.events.change,c,!1),a.addEventListener(e.events.error,d,!1),a[i.enabled]=a[e.enabled],a[i.element]=a[e.element],a[i.exit]=a[e.exit],Element.prototype[i.request]=function(){return this[e.request].apply(this,arguments)}),e}(document)},{}],hammerjs:[function(a,b,c){!function(a,c,d,e){"use strict";function f(a,b,c){return setTimeout(k(a,c),b)}function g(a,b,c){return Array.isArray(a)?(h(a,c[b],c),!0):!1}function h(a,b,c){var d;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==e)for(d=0;d<a.length;)b.call(c,a[d],d,a),d++;else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)}function i(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&ma(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==pa?a.apply(b?b[0]||e:e,b):a}function m(a,b){return a===e?b:a}function n(a,b,c){h(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){h(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,d,f=b[0].toUpperCase()+b.slice(1),g=0;g<na.length;){if(c=na[g],d=c?c+f:b,d in a)return d;g++}return e}function w(){return va++}function x(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var b,c=a.options.inputClass;return new(b=c?c:ya?N:za?Q:xa?S:M)(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Fa&&d-e===0,g=b&(Ha|Ia)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=sa(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY);var j=G(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=ra(j.x)>ra(j.y)?j.x:j.y,b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,D(c,b);var k=a.element;p(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===Fa||f.eventType===Ha)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,d,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ia&&(i>Ea||h.velocity===e)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=G(i,j,k);d=l.x,f=l.y,c=ra(l.x)>ra(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,d=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=d,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:qa(a.pointers[c].clientX),clientY:qa(a.pointers[c].clientY)},c++;return{timeStamp:sa(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:qa(a[0].clientX),y:qa(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:qa(c/b),y:qa(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Ja:ra(a)>=ra(b)?0>a?Ka:La:0>b?Ma:Na}function I(a,b,c){c||(c=Ra);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Ra);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],Sa)+J(a[1],a[0],Sa)}function L(a,b){return I(b[0],b[1],Sa)/I(a[0],a[1],Sa)}function M(){this.evEl=Ua,this.evWin=Va,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Ya,this.evWin=Za,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=_a,this.evWin=ab,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(Ha|Ia)&&(c=u(c.concat(d),"identifier",!0)),[c,d]}function Q(){this.evTarget=cb,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(Fa|Ga)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===Fa)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ha|Ia)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function T(a,b){a&Fa?(this.primaryTouch=b.changedPointers[0].identifier,U.call(this,b)):a&(Ha|Ia)&&U.call(this,b)}function U(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,db)}}function V(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(eb>=f&&eb>=g)return!0}return!1}function W(a,b){this.manager=a,this.set(b)}function X(a){if(q(a,kb))return kb;var b=q(a,lb),c=q(a,mb);return b&&c?kb:b||c?b?lb:mb:q(a,jb)?jb:ib}function Y(){if(!gb)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0}),b}function Z(a){this.options=ma({},this.defaults,a||{}),this.id=w(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=ob,this.simultaneous={},this.requireFail=[]}function $(a){return a&tb?"cancel":a&rb?"end":a&qb?"move":a&pb?"start":""}function _(a){return a==Na?"down":a==Ma?"up":a==Ka?"left":a==La?"right":""}function aa(a,b){var c=b.manager;return c?c.get(a):a}function ba(){Z.apply(this,arguments)}function ca(){ba.apply(this,arguments),this.pX=null,this.pY=null}function da(){ba.apply(this,arguments)}function ea(){Z.apply(this,arguments),this._timer=null,this._input=null}function fa(){ba.apply(this,arguments)}function ga(){ba.apply(this,arguments)}function ha(){Z.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ia(a,b){return b=b||{},b.recognizers=m(b.recognizers,ia.defaults.preset),new ja(a,b)}function ja(a,b){this.options=ma({},ia.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=z(this),this.touchAction=new W(this,this.options.touchAction),ka(this,!0),h(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ka(a,b){var c=a.element;if(c.style){var d;h(a.options.cssProps,function(e,f){d=v(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function la(a,b){var d=c.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=b,b.target.dispatchEvent(d)}var ma,na=["","webkit","Moz","MS","ms","o"],oa=c.createElement("div"),pa="function",qa=Math.round,ra=Math.abs,sa=Date.now;ma="function"!=typeof Object.assign?function(a){if(a===e||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(d!==e&&null!==d)for(var f in d)d.hasOwnProperty(f)&&(b[f]=d[f])}return b}:Object.assign;var ta=i(function(a,b,c){for(var d=Object.keys(b),f=0;f<d.length;)(!c||c&&a[d[f]]===e)&&(a[d[f]]=b[d[f]]),f++;return a},"extend","Use `assign`."),ua=i(function(a,b){return ta(a,b,!0)},"merge","Use `assign`."),va=1,wa=/mobile|tablet|ip(ad|hone|od)|android/i,xa="ontouchstart"in a,ya=v(a,"PointerEvent")!==e,za=xa&&wa.test(navigator.userAgent),Aa="touch",Ba="pen",Ca="mouse",Da="kinect",Ea=25,Fa=1,Ga=2,Ha=4,Ia=8,Ja=1,Ka=2,La=4,Ma=8,Na=16,Oa=Ka|La,Pa=Ma|Na,Qa=Oa|Pa,Ra=["x","y"],Sa=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Ta={mousedown:Fa,mousemove:Ga,mouseup:Ha},Ua="mousedown",Va="mousemove mouseup";j(M,y,{handler:function(a){var b=Ta[a.type];b&Fa&&0===a.button&&(this.pressed=!0),b&Ga&&1!==a.which&&(b=Ha),this.pressed&&(b&Ha&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ca,srcEvent:a}))}});var Wa={pointerdown:Fa,pointermove:Ga,pointerup:Ha,pointercancel:Ia,pointerout:Ia},Xa={2:Aa,3:Ba,4:Ca,5:Da},Ya="pointerdown",Za="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Ya="MSPointerDown",Za="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Wa[d],f=Xa[a.pointerType]||a.pointerType,g=f==Aa,h=s(b,a.pointerId,"pointerId");e&Fa&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ha|Ia)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var $a={touchstart:Fa,touchmove:Ga,touchend:Ha,touchcancel:Ia},_a="touchstart",ab="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=$a[a.type];if(b===Fa&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(Ha|Ia)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:Aa,srcEvent:a})}}});var bb={touchstart:Fa,touchmove:Ga,touchend:Ha,touchcancel:Ia},cb="touchstart touchmove touchend touchcancel";j(Q,y,{handler:function(a){var b=bb[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:Aa,srcEvent:a})}});var db=2500,eb=25;j(S,y,{handler:function(a,b,c){var d=c.pointerType==Aa,e=c.pointerType==Ca;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)T.call(this,b,c);else if(e&&V.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var fb=v(oa.style,"touchAction"),gb=fb!==e,hb="compute",ib="auto",jb="manipulation",kb="none",lb="pan-x",mb="pan-y",nb=Y();W.prototype={set:function(a){a==hb&&(a=this.compute()),gb&&this.manager.element.style&&nb[a]&&(this.manager.element.style[fb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return h(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),X(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,kb)&&!nb[kb],f=q(d,mb)&&!nb[mb],g=q(d,lb)&&!nb[lb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Oa||g&&c&Pa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var ob=1,pb=2,qb=4,rb=8,sb=rb,tb=16,ub=32;Z.prototype={defaults:{},set:function(a){return ma(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(g(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=aa(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return g(a,"dropRecognizeWith",this)?this:(a=aa(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(g(a,"requireFailure",this))return this;var b=this.requireFail;return a=aa(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(g(a,"dropRequireFailure",this))return this;a=aa(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;rb>d&&b(c.options.event+$(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=rb&&b(c.options.event+$(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=ub)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(ub|ob)))return!1;a++}return!0},recognize:function(a){var b=ma({},a);return l(this.options.enable,[this,b])?(this.state&(sb|tb|ub)&&(this.state=ob),this.state=this.process(b),void(this.state&(pb|qb|rb|tb)&&this.tryEmit(b))):(this.reset(),void(this.state=ub))},process:function(a){},getTouchAction:function(){},reset:function(){}},j(ba,Z,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(pb|qb),e=this.attrTest(a);return d&&(c&Ia||!e)?b|tb:d||e?c&Ha?b|rb:b&pb?b|qb:pb:ub}}),j(ca,ba,{defaults:{event:"pan",threshold:10,pointers:1,direction:Qa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Oa&&b.push(mb),a&Pa&&b.push(lb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Oa?(e=0===f?Ja:0>f?Ka:La,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ja:0>g?Ma:Na,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return ba.prototype.attrTest.call(this,a)&&(this.state&pb||!(this.state&pb)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=_(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),j(da,ba,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[kb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&pb)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),j(ea,Z,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,e=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ha|Ia)&&!e)this.reset();else if(a.eventType&Fa)this.reset(),this._timer=f(function(){this.state=sb,this.tryEmit()},b.time,this);else if(a.eventType&Ha)return sb;return ub},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===sb&&(a&&a.eventType&Ha?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=sa(),this.manager.emit(this.options.event,this._input)))}}),j(fa,ba,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[kb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&pb)}}),j(ga,ba,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Oa|Pa,pointers:1},getTouchAction:function(){return ca.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Oa|Pa)?b=a.overallVelocity:c&Oa?b=a.overallVelocityX:c&Pa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&ra(b)>this.options.velocity&&a.eventType&Ha},emit:function(a){var b=_(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(ha,Z,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[jb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,e=a.deltaTime<b.time;if(this.reset(),a.eventType&Fa&&0===this.count)return this.failTimeout();if(d&&e&&c){if(a.eventType!=Ha)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=f(function(){this.state=sb,this.tryEmit()},b.interval,this),pb):sb}return ub},failTimeout:function(){return this._timer=f(function(){this.state=ub},this.options.interval,this),ub},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==sb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ia.VERSION="2.0.7",ia.defaults={domEvents:!1,touchAction:hb,enable:!0,inputTarget:null,inputClass:null,preset:[[fa,{enable:!1}],[da,{enable:!1},["rotate"]],[ga,{direction:Oa}],[ca,{direction:Oa},["swipe"]],[ha],[ha,{event:"doubletap",taps:2},["tap"]],[ea]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var vb=1,wb=2;ja.prototype={set:function(a){return ma(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?wb:vb},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&sb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===wb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(pb|qb|rb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Z)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(g(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(g(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=s(b,a);-1!==c&&(b.splice(c,1),
this.touchAction.update())}return this},on:function(a,b){if(a!==e&&b!==e){var c=this.handlers;return h(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==e){var c=this.handlers;return h(r(a),function(a){b?c[a]&&c[a].splice(s(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&la(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ka(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ma(ia,{INPUT_START:Fa,INPUT_MOVE:Ga,INPUT_END:Ha,INPUT_CANCEL:Ia,STATE_POSSIBLE:ob,STATE_BEGAN:pb,STATE_CHANGED:qb,STATE_ENDED:rb,STATE_RECOGNIZED:sb,STATE_CANCELLED:tb,STATE_FAILED:ub,DIRECTION_NONE:Ja,DIRECTION_LEFT:Ka,DIRECTION_RIGHT:La,DIRECTION_UP:Ma,DIRECTION_DOWN:Na,DIRECTION_HORIZONTAL:Oa,DIRECTION_VERTICAL:Pa,DIRECTION_ALL:Qa,Manager:ja,Input:y,TouchAction:W,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:Z,AttrRecognizer:ba,Tap:ha,Pan:ca,Swipe:ga,Pinch:da,Rotate:fa,Press:ea,on:n,off:o,each:h,merge:ua,extend:ta,assign:ma,inherit:j,bindFn:k,prefixed:v});var xb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};xb.Hammer=ia,"function"==typeof define&&define.amd?define(function(){return ia}):"undefined"!=typeof b&&b.exports?b.exports=ia:a[d]=ia}(window,document,"Hammer")},{}],"matches-polyfill":[function(a,b,c){!function(a){var b=["ms","moz","webkit","o"],c=-1;for(c=0;c<b.length&&!a.matches;++c)a.matches=a[b[c]+"MatchesSelector"];a.matches||console.warn("No native Element.prototype.matches found"),a.matches||(a.matches=function(a){for(var b=this,c=(b.parentNode||b.document).querySelectorAll(a),d=-1;c[++d]&&c[d]!=b;);return!!c[d]})}(window.Element.prototype)},{}],"math-sign-polyfill":[function(a,b,c){!function(){Math.sign||(Math.sign=function(a){return(a>0)-(0>a)||+a})}()},{}],"modernizr-dist":[function(require,module,exports){!function(window,document,undefined){function is(a,b){return typeof a===b}function testRunner(){var a,b,c,d,e,f,g;for(var h in tests)if(tests.hasOwnProperty(h)){if(a=[],b=tests[h],b.name&&(a.push(b.name.toLowerCase()),b.options&&b.options.aliases&&b.options.aliases.length))for(c=0;c<b.options.aliases.length;c++)a.push(b.options.aliases[c].toLowerCase());for(d=is(b.fn,"function")?b.fn():b.fn,e=0;e<a.length;e++)f=a[e],g=f.split("."),1===g.length?Modernizr[g[0]]=d:(!Modernizr[g[0]]||Modernizr[g[0]]instanceof Boolean||(Modernizr[g[0]]=new Boolean(Modernizr[g[0]])),Modernizr[g[0]][g[1]]=d),classes.push((d?"":"no-")+g.join("-"))}}function createElement(){return"function"!=typeof document.createElement?document.createElement(arguments[0]):isSVG?document.createElementNS.call(document,"http://www.w3.org/2000/svg",arguments[0]):document.createElement.apply(document,arguments)}function getBody(){var a=document.body;return a||(a=createElement(isSVG?"svg":"body"),a.fake=!0),a}function injectElementWithStyles(a,b,c,d){var e,f,g,h,i="modernizr",j=createElement("div"),k=getBody();if(parseInt(c,10))for(;c--;)g=createElement("div"),g.id=d?d[c]:i+(c+1),j.appendChild(g);return e=createElement("style"),e.type="text/css",e.id="s"+i,(k.fake?k:j).appendChild(e),k.appendChild(j),e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a)),j.id=i,k.fake&&(k.style.background="",k.style.overflow="hidden",h=docElement.style.overflow,docElement.style.overflow="hidden",docElement.appendChild(k)),f=b(j,a),k.fake?(k.parentNode.removeChild(k),docElement.style.overflow=h,docElement.offsetHeight):j.parentNode.removeChild(j),!!f}function contains(a,b){return!!~(""+a).indexOf(b)}function domToCSS(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-")}function nativeTestProps(a,b){var c=a.length;if("CSS"in window&&"supports"in window.CSS){for(;c--;)if(window.CSS.supports(domToCSS(a[c]),b))return!0;return!1}if("CSSSupportsRule"in window){for(var d=[];c--;)d.push("("+domToCSS(a[c])+":"+b+")");return d=d.join(" or "),injectElementWithStyles("@supports ("+d+") { #modernizr { position: absolute; } }",function(a){return"absolute"==getComputedStyle(a,null).position})}return undefined}function cssToDOM(a){return a.replace(/([a-z])-([a-z])/g,function(a,b,c){return b+c.toUpperCase()}).replace(/^-/,"")}function testProps(a,b,c,d){function e(){g&&(delete mStyle.style,delete mStyle.modElem)}if(d=is(d,"undefined")?!1:d,!is(c,"undefined")){var f=nativeTestProps(a,c);if(!is(f,"undefined"))return f}for(var g,h,i,j,k,l=["modernizr","tspan"];!mStyle.style;)g=!0,mStyle.modElem=createElement(l.shift()),mStyle.style=mStyle.modElem.style;for(i=a.length,h=0;i>h;h++)if(j=a[h],k=mStyle.style[j],contains(j,"-")&&(j=cssToDOM(j)),mStyle.style[j]!==undefined){if(d||is(c,"undefined"))return e(),"pfx"==b?j:!0;try{mStyle.style[j]=c}catch(m){}if(mStyle.style[j]!=k)return e(),"pfx"==b?j:!0}return e(),!1}function fnBind(a,b){return function(){return a.apply(b,arguments)}}function testDOMProps(a,b,c){var d;for(var e in a)if(a[e]in b)return c===!1?a[e]:(d=b[a[e]],is(d,"function")?fnBind(d,c||b):d);return!1}function testPropsAll(a,b,c,d,e){var f=a.charAt(0).toUpperCase()+a.slice(1),g=(a+" "+cssomPrefixes.join(f+" ")+f).split(" ");return is(b,"string")||is(b,"undefined")?testProps(g,b,d,e):(g=(a+" "+domPrefixes.join(f+" ")+f).split(" "),testDOMProps(g,b,c))}function testAllProps(a,b,c){return testPropsAll(a,undefined,undefined,b,c)}function roundedEquals(a,b){return a-1===b||a===b||a+1===b}function setClasses(a){var b=docElement.className,c=Modernizr._config.classPrefix||"";if(isSVG&&(b=b.baseVal),Modernizr._config.enableJSClass){var d=new RegExp("(^|\\s)"+c+"no-js(\\s|$)");b=b.replace(d,"$1"+c+"js$2")}Modernizr._config.enableClasses&&(b+=" "+c+a.join(" "+c),isSVG?docElement.className.baseVal=b:docElement.className=b)}function addTest(a,b){if("object"==typeof a)for(var c in a)hasOwnProp(a,c)&&addTest(c,a[c]);else{a=a.toLowerCase();var d=a.split("."),e=Modernizr[d[0]];if(2==d.length&&(e=e[d[1]]),"undefined"!=typeof e)return Modernizr;b="function"==typeof b?b():b,1==d.length?Modernizr[d[0]]=b:(!Modernizr[d[0]]||Modernizr[d[0]]instanceof Boolean||(Modernizr[d[0]]=new Boolean(Modernizr[d[0]])),Modernizr[d[0]][d[1]]=b),setClasses([(b&&0!=b?"":"no-")+d.join("-")]),Modernizr._trigger(a,b)}return Modernizr}var tests=[],ModernizrProto={_version:"3.3.1",_config:{classPrefix:"has-",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(a,b){var c=this;setTimeout(function(){b(c[a])},0)},addTest:function(a,b,c){tests.push({name:a,fn:b,options:c})},addAsyncTest:function(a){tests.push({name:null,fn:a})}},Modernizr=function(){};Modernizr.prototype=ModernizrProto,Modernizr=new Modernizr;var classes=[],docElement=document.documentElement,isSVG="svg"===docElement.nodeName.toLowerCase(),hasEvent=function(){function a(a,c){var d;return a?(c&&"string"!=typeof c||(c=createElement(c||"div")),a="on"+a,d=a in c,!d&&b&&(c.setAttribute||(c=createElement("div")),c.setAttribute(a,""),d="function"==typeof c[a],c[a]!==undefined&&(c[a]=undefined),c.removeAttribute(a)),d):!1}var b=!("onblur"in document.documentElement);return a}();ModernizrProto.hasEvent=hasEvent;var mq=function(){var a=window.matchMedia||window.msMatchMedia;return a?function(b){var c=a(b);return c&&c.matches||!1}:function(a){var b=!1;return injectElementWithStyles("@media "+a+" { #modernizr { position: absolute; } }",function(a){b="absolute"==(window.getComputedStyle?window.getComputedStyle(a,null):a.currentStyle).position}),b}}();ModernizrProto.mq=mq;var omPrefixes="Moz O ms Webkit",cssomPrefixes=ModernizrProto._config.usePrefixes?omPrefixes.split(" "):[];ModernizrProto._cssomPrefixes=cssomPrefixes;var modElem={elem:createElement("modernizr")};Modernizr._q.push(function(){delete modElem.elem});var mStyle={style:modElem.elem.style};Modernizr._q.unshift(function(){delete mStyle.style});var domPrefixes=ModernizrProto._config.usePrefixes?omPrefixes.toLowerCase().split(" "):[];ModernizrProto._domPrefixes=domPrefixes,ModernizrProto.testAllProps=testPropsAll;var atRule=function(a){var b,c=prefixes.length,d=window.CSSRule;if("undefined"==typeof d)return undefined;if(!a)return!1;if(a=a.replace(/^@/,""),b=a.replace(/-/g,"_").toUpperCase()+"_RULE",b in d)return"@"+a;for(var e=0;c>e;e++){var f=prefixes[e],g=f.toUpperCase()+"_"+b;if(g in d)return"@-"+f.toLowerCase()+"-"+a}return!1};ModernizrProto.atRule=atRule;var prefixed=ModernizrProto.prefixed=function(a,b,c){return 0===a.indexOf("@")?atRule(a):(-1!=a.indexOf("-")&&(a=cssToDOM(a)),b?testPropsAll(a,b,c):testPropsAll(a,"pfx"))},prefixedCSS=ModernizrProto.prefixedCSS=function(a){var b=prefixed(a);return b&&domToCSS(b)};Modernizr.addTest("canvas",function(){var a=createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}),Modernizr.addTest("canvasblending",function(){if(Modernizr.canvas===!1)return!1;var a=createElement("canvas").getContext("2d");try{a.globalCompositeOperation="screen"}catch(b){}return"screen"===a.globalCompositeOperation});var canvas=createElement("canvas");Modernizr.addTest("todataurljpeg",function(){return!!Modernizr.canvas&&0===canvas.toDataURL("image/jpeg").indexOf("data:image/jpeg")}),Modernizr.addTest("todataurlpng",function(){return!!Modernizr.canvas&&0===canvas.toDataURL("image/png").indexOf("data:image/png")}),Modernizr.addTest("todataurlwebp",function(){var a=!1;try{a=!!Modernizr.canvas&&0===canvas.toDataURL("image/webp").indexOf("data:image/webp")}catch(b){}return a}),Modernizr.addTest("canvaswinding",function(){if(Modernizr.canvas===!1)return!1;var a=createElement("canvas").getContext("2d");return a.rect(0,0,10,10),a.rect(2,2,6,6),a.isPointInPath(5,5,"evenodd")===!1}),Modernizr.addTest("canvastext",function(){return Modernizr.canvas===!1?!1:"function"==typeof createElement("canvas").getContext("2d").fillText}),ModernizrProto.testAllProps=testAllProps,Modernizr.addTest("cssanimations",testAllProps("animationName","a",!0)),Modernizr.addTest("backgroundblendmode",prefixed("backgroundBlendMode","text")),Modernizr.addTest("backgroundcliptext",function(){return testAllProps("backgroundClip","text")}),Modernizr.addTest("bgpositionshorthand",function(){var a=createElement("a"),b=a.style,c="right 10px bottom 10px";return b.cssText="background-position: "+c+";",b.backgroundPosition===c}),Modernizr.addTest("bgpositionxy",function(){return testAllProps("backgroundPositionX","3px",!0)&&testAllProps("backgroundPositionY","5px",!0)}),Modernizr.addTest("bgrepeatround",testAllProps("backgroundRepeat","round")),Modernizr.addTest("bgrepeatspace",testAllProps("backgroundRepeat","space")),Modernizr.addTest("backgroundsize",testAllProps("backgroundSize","100%",!0)),Modernizr.addTest("bgsizecover",testAllProps("backgroundSize","cover")),Modernizr.addTest("borderradius",testAllProps("borderRadius","0px",!0)),Modernizr.addTest("boxshadow",testAllProps("boxShadow","1px 1px",!0)),Modernizr.addTest("boxsizing",testAllProps("boxSizing","border-box",!0)&&(document.documentMode===undefined||document.documentMode>7));var prefixes=ModernizrProto._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];ModernizrProto._prefixes=prefixes,Modernizr.addTest("csscalc",function(){var a="width:",b="calc(10px);",c=createElement("a");return c.style.cssText=a+prefixes.join(b+a),!!c.style.length}),Modernizr.addTest("csschunit",function(){var a,b=modElem.elem.style;try{b.fontSize="3ch",a=-1!==b.fontSize.indexOf("ch")}catch(c){a=!1}return a}),Modernizr.addTest("cubicbezierrange",function(){var a=createElement("a");return a.style.cssText=prefixes.join("transition-timing-function:cubic-bezier(1,0,0,1.1); "),!!a.style.length}),Modernizr.addTest("ellipsis",testAllProps("textOverflow","ellipsis")),Modernizr.addTest("cssexunit",function(){var a,b=modElem.elem.style;try{b.fontSize="3ex",a=-1!==b.fontSize.indexOf("ex")}catch(c){a=!1}return a}),Modernizr.addTest("flexbox",testAllProps("flexBasis","1px",!0)),Modernizr.addTest("flexwrap",testAllProps("flexWrap","wrap",!0));var testStyles=ModernizrProto.testStyles=injectElementWithStyles,blacklist=function(){var a=navigator.userAgent,b=a.match(/applewebkit\/([0-9]+)/gi)&&parseFloat(RegExp.$1),c=a.match(/w(eb)?osbrowser/gi),d=a.match(/windows phone/gi)&&a.match(/iemobile\/([0-9])+/gi)&&parseFloat(RegExp.$1)>=9,e=533>b&&a.match(/android/gi);return c||e||d}();blacklist?Modernizr.addTest("fontface",!1):testStyles('@font-face {font-family:"font";src:url("https://")}',function(a,b){var c=document.getElementById("smodernizr"),d=c.sheet||c.styleSheet,e=d?d.cssRules&&d.cssRules[0]?d.cssRules[0].cssText:d.cssText||"":"",f=/src/i.test(e)&&0===e.indexOf(b.split(" ")[0]);Modernizr.addTest("fontface",f)}),testStyles('#modernizr{font:0/0 a}#modernizr:after{content:":)";visibility:hidden;font:7px/1 a}',function(a){Modernizr.addTest("generatedcontent",a.offsetHeight>=7)}),Modernizr.addTest("cssgradients",function(){for(var a,b="background-image:",c="gradient(linear,left top,right bottom,from(#9f9),to(white));",d="",e=0,f=prefixes.length-1;f>e;e++)a=0===e?"to ":"",d+=b+prefixes[e]+"linear-gradient("+a+"left top, #9f9, white);";Modernizr._config.usePrefixes&&(d+=b+"-webkit-"+c);var g=createElement("a"),h=g.style;return h.cssText=d,(""+h.backgroundImage).indexOf("gradient")>-1}),Modernizr.addTest("hsla",function(){var a=createElement("a").style;return a.cssText="background-color:hsla(120,40%,100%,.5)",contains(a.backgroundColor,"rgba")||contains(a.backgroundColor,"hsla")}),testStyles("#modernizr div {width:100px} #modernizr :last-child{width:200px;display:block}",function(a){Modernizr.addTest("lastchild",a.lastChild.offsetWidth>a.firstChild.offsetWidth)},2),Modernizr.addTest("mediaqueries",mq("only all")),Modernizr.addTest("multiplebgs",function(){var a=createElement("a").style;return a.cssText="background:url(https://),url(https://),red url(https://)",/(url\s*\(.*?){3}/.test(a.background)}),testStyles("#modernizr div {width:1px} #modernizr div:nth-child(2n) {width:2px;}",function(a){for(var b=a.getElementsByTagName("div"),c=!0,d=0;5>d;d++)c=c&&b[d].offsetWidth===d%2+1;Modernizr.addTest("nthchild",c)},5),Modernizr.addTest("objectfit",!!prefixed("objectFit"),{aliases:["object-fit"]}),Modernizr.addTest("opacity",function(){var a=createElement("a").style;return a.cssText=prefixes.join("opacity:.55;"),/^0.55$/.test(a.opacity)}),Modernizr.addTest("csspointerevents",function(){var a=createElement("a").style;return a.cssText="pointer-events:auto","auto"===a.pointerEvents}),Modernizr.addTest("csspositionsticky",function(){var a="position:",b="sticky",c=createElement("a"),d=c.style;return d.cssText=a+prefixes.join(b+";"+a).slice(0,-a.length),-1!==d.position.indexOf(b)}),Modernizr.addTest("csspseudoanimations",function(){var a=!1;if(!Modernizr.cssanimations||!window.getComputedStyle)return a;var b=["@",Modernizr._prefixes.join("keyframes csspseudoanimations { from { font-size: 10px; } }@").replace(/\@$/,""),'#modernizr:before { content:" "; font-size:5px;',Modernizr._prefixes.join("animation:csspseudoanimations 1ms infinite;"),"}"].join("");return Modernizr.testStyles(b,function(b){a="10px"===window.getComputedStyle(b,":before").getPropertyValue("font-size")}),a}),Modernizr.addTest("csstransitions",testAllProps("transition","all",!0)),Modernizr.addTest("csspseudotransitions",function(){var a=!1;if(!Modernizr.csstransitions||!window.getComputedStyle)return a;var b='#modernizr:before { content:" "; font-size:5px;'+Modernizr._prefixes.join("transition:0s 100s;")+"}#modernizr.trigger:before { font-size:10px; }";return Modernizr.testStyles(b,function(b){window.getComputedStyle(b,":before").getPropertyValue("font-size"),b.className+="trigger",a="5px"===window.getComputedStyle(b,":before").getPropertyValue("font-size")}),a}),Modernizr.addTest("cssremunit",function(){var a=createElement("a").style;try{a.fontSize="3rem"}catch(b){}return/rem/.test(a.fontSize)}),Modernizr.addTest("cssresize",testAllProps("resize","both",!0)),Modernizr.addTest("rgba",function(){var a=createElement("a").style;return a.cssText="background-color:rgba(150,255,150,.5)",(""+a.backgroundColor).indexOf("rgba")>-1}),Modernizr.addTest("siblinggeneral",function(){return testStyles("#modernizr div {width:100px} #modernizr div ~ div {width:200px;display:block}",function(a){return 200==a.lastChild.offsetWidth},2)}),testStyles("#modernizr{position: absolute; top: -10em; visibility:hidden; font: normal 10px arial;}#subpixel{float: left; font-size: 33.3333%;}",function(a){var b=a.firstChild;b.innerHTML="This is a text written in Arial",Modernizr.addTest("subpixelfont",window.getComputedStyle?"44px"!==window.getComputedStyle(b,null).getPropertyValue("width"):!1)},1,["subpixel"]);var newSyntax="CSS"in window&&"supports"in window.CSS,oldSyntax="supportsCSS"in window;Modernizr.addTest("supports",newSyntax||oldSyntax),Modernizr.addTest("target",function(){var a=window.document;if(!("querySelectorAll"in a))return!1;try{return a.querySelectorAll(":target"),!0}catch(b){return!1}}),Modernizr.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&testAllProps("transform","scale(1)",!0)}),Modernizr.addTest("csstransforms3d",function(){var a=!!testAllProps("perspective","1px",!0),b=Modernizr._config.usePrefixes;if(a&&(!b||"webkitPerspective"in docElement.style)){var c,d="#modernizr{width:0;height:0}";Modernizr.supports?c="@supports (perspective: 1px)":(c="@media (transform-3d)",b&&(c+=",(-webkit-transform-3d)")),c+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",testStyles(d+c,function(b){a=7===b.offsetWidth&&18===b.offsetHeight})}return a}),Modernizr.addTest("preserve3d",testAllProps("transformStyle","preserve-3d")),Modernizr.addTest("userselect",testAllProps("userSelect","none",!0)),testStyles("#modernizr { height: 50vh; }",function(a){var b=parseInt(window.innerHeight/2,10),c=parseInt((window.getComputedStyle?getComputedStyle(a,null):a.currentStyle).height,10);Modernizr.addTest("cssvhunit",c==b)}),testStyles("#modernizr1{width: 50vmax}#modernizr2{width:50px;height:50px;overflow:scroll}#modernizr3{position:fixed;top:0;left:0;bottom:0;right:0}",function(a){var b=a.childNodes[2],c=a.childNodes[1],d=a.childNodes[0],e=parseInt((c.offsetWidth-c.clientWidth)/2,10),f=d.clientWidth/100,g=d.clientHeight/100,h=parseInt(50*Math.max(f,g),10),i=parseInt((window.getComputedStyle?getComputedStyle(b,null):b.currentStyle).width,10);Modernizr.addTest("cssvmaxunit",roundedEquals(h,i)||roundedEquals(h,i-e))},3),testStyles("#modernizr1{width: 50vm;width:50vmin}#modernizr2{width:50px;height:50px;overflow:scroll}#modernizr3{position:fixed;top:0;left:0;bottom:0;right:0}",function(a){var b=a.childNodes[2],c=a.childNodes[1],d=a.childNodes[0],e=parseInt((c.offsetWidth-c.clientWidth)/2,10),f=d.clientWidth/100,g=d.clientHeight/100,h=parseInt(50*Math.min(f,g),10),i=parseInt((window.getComputedStyle?getComputedStyle(b,null):b.currentStyle).width,10);Modernizr.addTest("cssvminunit",roundedEquals(h,i)||roundedEquals(h,i-e))},3),testStyles("#modernizr { width: 50vw; }",function(a){var b=parseInt(window.innerWidth/2,10),c=parseInt((window.getComputedStyle?getComputedStyle(a,null):a.currentStyle).width,10);Modernizr.addTest("cssvwunit",c==b)}),Modernizr.addTest("willchange","willChange"in docElement.style),Modernizr.addTest("classlist","classList"in docElement),Modernizr.addTest("documentfragment",function(){return"createDocumentFragment"in document&&"appendChild"in docElement}),Modernizr.addTest("mutationobserver",!!window.MutationObserver||!!window.WebKitMutationObserver),Modernizr.addTest("es6array",!!(Array.prototype&&Array.prototype.copyWithin&&Array.prototype.fill&&Array.prototype.find&&Array.prototype.findIndex&&Array.prototype.keys&&Array.prototype.entries&&Array.prototype.values&&Array.from&&Array.of)),Modernizr.addTest("contains",is(String.prototype.contains,"function")),Modernizr.addTest("generators",function(){try{new Function("function* test() {}")()}catch(a){return!1}return!0}),Modernizr.addTest("es6math",!!(Math&&Math.clz32&&Math.cbrt&&Math.imul&&Math.sign&&Math.log10&&Math.log2&&Math.log1p&&Math.expm1&&Math.cosh&&Math.sinh&&Math.tanh&&Math.acosh&&Math.asinh&&Math.atanh&&Math.hypot&&Math.trunc&&Math.fround)),Modernizr.addTest("es6number",!!(Number.isFinite&&Number.isInteger&&Number.isSafeInteger&&Number.isNaN&&Number.parseInt&&Number.parseFloat&&Number.isInteger(Number.MAX_SAFE_INTEGER)&&Number.isInteger(Number.MIN_SAFE_INTEGER)&&Number.isFinite(Number.EPSILON))),Modernizr.addTest("es6object",!!(Object.assign&&Object.is&&Object.setPrototypeOf)),Modernizr.addTest("promises",function(){return"Promise"in window&&"resolve"in window.Promise&&"reject"in window.Promise&&"all"in window.Promise&&"race"in window.Promise&&function(){var a;return new window.Promise(function(b){a=b}),"function"==typeof a}()}),Modernizr.addTest("es6string",!!(String.fromCodePoint&&String.raw&&String.prototype.codePointAt&&String.prototype.repeat&&String.prototype.startsWith&&String.prototype.endsWith&&String.prototype.contains)),Modernizr.addTest("devicemotion","DeviceMotionEvent"in window),Modernizr.addTest("deviceorientation","DeviceOrientationEvent"in window),Modernizr.addTest("fullscreen",!(!prefixed("exitFullscreen",document,!1)&&!prefixed("cancelFullScreen",document,!1))),Modernizr.addTest("hashchange",function(){return hasEvent("hashchange",window)===!1?!1:document.documentMode===undefined||document.documentMode>7}),Modernizr.addTest("hiddenscroll",function(){return testStyles("#modernizr {width:100px;height:100px;overflow:scroll}",function(a){return a.offsetWidth===a.clientWidth})}),Modernizr.addTest("history",function(){var a=navigator.userAgent;return-1===a.indexOf("Android 2.")&&-1===a.indexOf("Android 4.0")||-1===a.indexOf("Mobile Safari")||-1!==a.indexOf("Chrome")||-1!==a.indexOf("Windows Phone")?window.history&&"pushState"in window.history:!1});var hasOwnProp;!function(){var a={}.hasOwnProperty;hasOwnProp=is(a,"undefined")||is(a.call,"undefined")?function(a,b){return b in a&&is(a.constructor.prototype[b],"undefined")}:function(b,c){return a.call(b,c)}}(),ModernizrProto._l={},ModernizrProto.on=function(a,b){this._l[a]||(this._l[a]=[]),this._l[a].push(b),Modernizr.hasOwnProperty(a)&&setTimeout(function(){Modernizr._trigger(a,Modernizr[a])},0)},ModernizrProto._trigger=function(a,b){if(this._l[a]){var c=this._l[a];setTimeout(function(){var a,d;for(a=0;a<c.length;a++)(d=c[a])(b)},0),delete this._l[a]}},Modernizr._q.push(function(){ModernizrProto.addTest=addTest}),Modernizr.addAsyncTest(function(){var a,b,c,d=createElement("img"),e="sizes"in d;!e&&"srcset"in d?(b="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",a="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",c=function(){addTest("sizes",2==d.width)},d.onload=c,d.onerror=c,d.setAttribute("sizes","9px"),d.srcset=a+" 1w,"+b+" 8w",d.src=a):addTest("sizes",e)}),Modernizr.addTest("srcset","srcset"in createElement("img")),Modernizr.addTest("json","JSON"in window&&"parse"in JSON&&"stringify"in JSON),Modernizr.addTest("xhrresponsetype",function(){if("undefined"==typeof XMLHttpRequest)return!1;var a=new XMLHttpRequest;return a.open("get","/",!0),"response"in a}());var testXhrType=function(a){if("undefined"==typeof XMLHttpRequest)return!1;var b=new XMLHttpRequest;b.open("get","/",!0);try{b.responseType=a}catch(c){return!1}return"response"in b&&b.responseType==a};Modernizr.addTest("xhrresponsetypearraybuffer",testXhrType("arraybuffer")),Modernizr.addTest("xhrresponsetypeblob",testXhrType("blob")),Modernizr.addTest("xhr2","XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest),Modernizr.addTest("pagevisibility",!!prefixed("hidden",document,!1)),Modernizr.addTest("performance",!!prefixed("performance",window)),Modernizr.addTest("pointerevents",function(){var a=!1,b=domPrefixes.length;for(a=Modernizr.hasEvent("pointerdown");b--&&!a;)hasEvent(domPrefixes[b]+"pointerdown")&&(a=!0);return a}),Modernizr.addTest("postmessage","postMessage"in window),Modernizr.addTest("queryselector","querySelector"in document&&"querySelectorAll"in document),Modernizr.addTest("requestanimationframe",!!prefixed("requestAnimationFrame",window),{aliases:["raf"]}),Modernizr.addTest("scriptasync","async"in createElement("script")),Modernizr.addTest("scriptdefer","defer"in createElement("script")),Modernizr.addTest("svg",!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),Modernizr.addTest("svgasimg",document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"));var toStringFn={}.toString;Modernizr.addTest("svgclippaths",function(){return!!document.createElementNS&&/SVGClipPath/.test(toStringFn.call(document.createElementNS("http://www.w3.org/2000/svg","clipPath")))}),Modernizr.addTest("svgfilters",function(){var a=!1;try{a="SVGFEColorMatrixElement"in window&&2==SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE}catch(b){}return a}),Modernizr.addTest("svgforeignobject",function(){return!!document.createElementNS&&/SVGForeignObject/.test(toStringFn.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}),Modernizr.addTest("inlinesvg",function(){var a=createElement("div");return a.innerHTML="<svg/>","http://www.w3.org/2000/svg"==("undefined"!=typeof SVGRect&&a.firstChild&&a.firstChild.namespaceURI)}),Modernizr.addTest("smil",function(){return!!document.createElementNS&&/SVGAnimate/.test(toStringFn.call(document.createElementNS("http://www.w3.org/2000/svg","animate")))}),Modernizr.addTest("templatestrings",function(){var supports;try{eval("``"),supports=!0}catch(e){}return!!supports});var url=prefixed("URL",window,!1);url=url&&window[url],Modernizr.addTest("bloburls",url&&"revokeObjectURL"in url&&"createObjectURL"in url),Modernizr.addAsyncTest(function(){function a(){var a=new Image;a.onerror=function(){addTest("datauri",!0),Modernizr.datauri=new Boolean(!0),Modernizr.datauri.over32kb=!1},a.onload=function(){addTest("datauri",!0),Modernizr.datauri=new Boolean(!0),Modernizr.datauri.over32kb=1==a.width&&1==a.height};for(var b="R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";b.length<33e3;)b="\r\n"+b;a.src="data:image/gif;base64,"+b}-1!==navigator.userAgent.indexOf("MSIE 7.")&&setTimeout(function(){addTest("datauri",!1)},10);var b=new Image;b.onerror=function(){addTest("datauri",!1)},b.onload=function(){1==b.width&&1==b.height?a():addTest("datauri",!1)},b.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}),Modernizr.addTest("video",function(){var a=createElement("video"),b=!1;try{(b=!!a.canPlayType)&&(b=new Boolean(b),b.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),b.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),b.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),b.vp9=a.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),b.hls=a.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch(c){}return b}),Modernizr.addAsyncTest(function(){function a(c){clearTimeout(b),d.removeEventListener("playing",a,!1),addTest("videoautoplay",c&&"playing"===c.type||0!==d.currentTime),d.parentNode.removeChild(d)}var b,c=300,d=createElement("video"),e=d.style;if(!(Modernizr.video&&"autoplay"in d))return void addTest("videoautoplay",!1);e.position="absolute",e.height=0,e.width=0;try{if(Modernizr.video.ogg)d.src="data:video/ogg;base64,T2dnUwACAAAAAAAAAABmnCATAAAAAHDEixYBKoB0aGVvcmEDAgEAAQABAAAQAAAQAAAAAAAFAAAAAQAAAAAAAAAAAGIAYE9nZ1MAAAAAAAAAAAAAZpwgEwEAAAACrA7TDlj///////////////+QgXRoZW9yYSsAAABYaXBoLk9yZyBsaWJ0aGVvcmEgMS4xIDIwMDkwODIyIChUaHVzbmVsZGEpAQAAABoAAABFTkNPREVSPWZmbXBlZzJ0aGVvcmEtMC4yOYJ0aGVvcmG+zSj3uc1rGLWpSUoQc5zmMYxSlKQhCDGMYhCEIQhAAAAAAAAAAAAAEW2uU2eSyPxWEvx4OVts5ir1aKtUKBMpJFoQ/nk5m41mUwl4slUpk4kkghkIfDwdjgajQYC8VioUCQRiIQh8PBwMhgLBQIg4FRba5TZ5LI/FYS/Hg5W2zmKvVoq1QoEykkWhD+eTmbjWZTCXiyVSmTiSSCGQh8PB2OBqNBgLxWKhQJBGIhCHw8HAyGAsFAiDgUCw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDAwPEhQUFQ0NDhESFRUUDg4PEhQVFRUOEBETFBUVFRARFBUVFRUVEhMUFRUVFRUUFRUVFRUVFRUVFRUVFRUVEAwLEBQZGxwNDQ4SFRwcGw4NEBQZHBwcDhATFhsdHRwRExkcHB4eHRQYGxwdHh4dGxwdHR4eHh4dHR0dHh4eHRALChAYKDM9DAwOExo6PDcODRAYKDlFOA4RFh0zV1A+EhYlOkRtZ00YIzdAUWhxXDFATldneXhlSFxfYnBkZ2MTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTEhIVGRoaGhoSFBYaGhoaGhUWGRoaGhoaGRoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhESFh8kJCQkEhQYIiQkJCQWGCEkJCQkJB8iJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQREhgvY2NjYxIVGkJjY2NjGBo4Y2NjY2MvQmNjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRISEhUXGBkbEhIVFxgZGxwSFRcYGRscHRUXGBkbHB0dFxgZGxwdHR0YGRscHR0dHhkbHB0dHR4eGxwdHR0eHh4REREUFxocIBERFBcaHCAiERQXGhwgIiUUFxocICIlJRcaHCAiJSUlGhwgIiUlJSkcICIlJSUpKiAiJSUlKSoqEBAQFBgcICgQEBQYHCAoMBAUGBwgKDBAFBgcICgwQEAYHCAoMEBAQBwgKDBAQEBgICgwQEBAYIAoMEBAQGCAgAfF5cdH1e3Ow/L66wGmYnfIUbwdUTe3LMRbqON8B+5RJEvcGxkvrVUjTMrsXYhAnIwe0dTJfOYbWrDYyqUrz7dw/JO4hpmV2LsQQvkUeGq1BsZLx+cu5iV0e0eScJ91VIQYrmqfdVSK7GgjOU0oPaPOu5IcDK1mNvnD+K8LwS87f8Jx2mHtHnUkTGAurWZlNQa74ZLSFH9oF6FPGxzLsjQO5Qe0edcpttd7BXBSqMCL4k/4tFrHIPuEQ7m1/uIWkbDMWVoDdOSuRQ9286kvVUlQjzOE6VrNguN4oRXYGkgcnih7t13/9kxvLYKQezwLTrO44sVmMPgMqORo1E0sm1/9SludkcWHwfJwTSybR4LeAz6ugWVgRaY8mV/9SluQmtHrzsBtRF/wPY+X0JuYTs+ltgrXAmlk10xQHmTu9VSIAk1+vcvU4ml2oNzrNhEtQ3CysNP8UeR35wqpKUBdGdZMSjX4WVi8nJpdpHnbhzEIdx7mwf6W1FKAiucMXrWUWVjyRf23chNtR9mIzDoT/6ZLYailAjhFlZuvPtSeZ+2oREubDoWmT3TguY+JHPdRVSLKxfKH3vgNqJ/9emeEYikGXDFNzaLjvTeGAL61mogOoeG3y6oU4rW55ydoj0lUTSR/mmRhPmF86uwIfzp3FtiufQCmppaHDlGE0r2iTzXIw3zBq5hvaTldjG4CPb9wdxAme0SyedVKczJ9AtYbgPOzYKJvZZImsN7ecrxWZg5dR6ZLj/j4qpWsIA+vYwE+Tca9ounMIsrXMB4Stiib2SPQtZv+FVIpfEbzv8ncZoLBXc3YBqTG1HsskTTotZOYTG+oVUjLk6zhP8bg4RhMUNtfZdO7FdpBuXzhJ5Fh8IKlJG7wtD9ik8rWOJxy6iQ3NwzBpQ219mlyv+FLicYs2iJGSE0u2txzed++D61ZWCiHD/cZdQVCqkO2gJpdpNaObhnDfAPrT89RxdWFZ5hO3MseBSIlANppdZNIV/Rwe5eLTDvkfWKzFnH+QJ7m9QWV1KdwnuIwTNtZdJMoXBf74OhRnh2t+OTGL+AVUnIkyYY+QG7g9itHXyF3OIygG2s2kud679ZWKqSFa9n3IHD6MeLv1lZ0XyduRhiDRtrNnKoyiFVLcBm0ba5Yy3fQkDh4XsFE34isVpOzpa9nR8iCpS4HoxG2rJpnRhf3YboVa1PcRouh5LIJv/uQcPNd095ickTaiGBnWLKVWRc0OnYTSyex/n2FofEPnDG8y3PztHrzOLK1xo6RAml2k9owKajOC0Wr4D5x+3nA0UEhK2m198wuBHF3zlWWVKWLN1CHzLClUfuoYBcx4b1llpeBKmbayaR58njtE9onD66lUcsg0Spm2snsb+8HaJRn4dYcLbCuBuYwziB8/5U1C1DOOz2gZjSZtrLJk6vrLF3hwY4Io9xuT/ruUFRSBkNtUzTOWhjh26irLEPx4jPZL3Fo3QrReoGTTM21xYTT9oFdhTUIvjqTkfkvt0bzgVUjq/hOYY8j60IaO/0AzRBtqkTS6R5ellZd5uKdzzhb8BFlDdAcrwkE0rbXTOPB+7Y0FlZO96qFL4Ykg21StJs8qIW7h16H5hGiv8V2Cflau7QVDepTAHa6Lgt6feiEvJDM21StJsmOH/hynURrKxvUpQ8BH0JF7BiyG2qZpnL/7AOU66gt+reLEXY8pVOCQvSsBtqZTNM8bk9ohRcwD18o/WVkbvrceVKRb9I59IEKysjBeTMmmbA21xu/6iHadLRxuIzkLpi8wZYmmbbWi32RVAUjruxWlJ//iFxE38FI9hNKOoCdhwf5fDe4xZ81lgREhK2m1j78vW1CqkuMu/AjBNK210kzRUX/B+69cMMUG5bYrIeZxVSEZISmkzbXOi9yxwIfPgdsov7R71xuJ7rFcACjG/9PzApqFq7wEgzNJm2suWESPuwrQvejj7cbnQxMkxpm21lUYJL0fKmogPPqywn7e3FvB/FCNxPJ85iVUkCE9/tLKx31G4CgNtWTTPFhMvlu8G4/TrgaZttTChljfNJGgOT2X6EqpETy2tYd9cCBI4lIXJ1/3uVUllZEJz4baqGF64yxaZ+zPLYwde8Uqn1oKANtUrSaTOPHkhvuQP3bBlEJ/LFe4pqQOHUI8T8q7AXx3fLVBgSCVpMba55YxN3rv8U1Dv51bAPSOLlZWebkL8vSMGI21lJmmeVxPRwFlZF1CpqCN8uLwymaZyjbXHCRytogPN3o/n74CNykfT+qqRv5AQlHcRxYrC5KvGmbbUwmZY/29BvF6C1/93x4WVglXDLFpmbapmF89HKTogRwqqSlGbu+oiAkcWFbklC6Zhf+NtTLFpn8oWz+HsNRVSgIxZWON+yVyJlE5tq/+GWLTMutYX9ekTySEQPLVNQQ3OfycwJBM0zNtZcse7CvcKI0V/zh16Dr9OSA21MpmmcrHC+6pTAPHPwoit3LHHqs7jhFNRD6W8+EBGoSEoaZttTCZljfduH/fFisn+dRBGAZYtMzbVMwvul/T/crK1NQh8gN0SRRa9cOux6clC0/mDLFpmbarmF8/e6CopeOLCNW6S/IUUg3jJIYiAcDoMcGeRbOvuTPjXR/tyo79LK3kqqkbxkkMRAOB0GODPItnX3Jnxro/25Ud+llbyVVSN4ySGIgHA6DHBnkWzr7kz410f7cqO/Syt5KqpFVJwn6gBEvBM0zNtZcpGOEPiysW8vvRd2R0f7gtjhqUvXL+gWVwHm4XJDBiMpmmZtrLfPwd/IugP5+fKVSysH1EXreFAcEhelGmbbUmZY4Xdo1vQWVnK19P4RuEnbf0gQnR+lDCZlivNM22t1ESmopPIgfT0duOfQrsjgG4tPxli0zJmF5trdL1JDUIUT1ZXSqQDeR4B8mX3TrRro/2McGeUvLtwo6jIEKMkCUXWsLyZROd9P/rFYNtXPBli0z398iVUlVKAjFlY437JXImUTm2r/4ZYtMy61hf16RPJIU9nZ1MABAwAAAAAAAAAZpwgEwIAAABhp658BScAAAAAAADnUFBQXIDGXLhwtttNHDhw5OcpQRMETBEwRPduylKVB0HRdF0A";else{
if(!Modernizr.video.h264)return void addTest("videoautoplay",!1);d.src="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAs1tZGF0AAACrgYF//+q3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0OCByMjYwMSBhMGNkN2QzIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNSAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTEgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEwIHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAD2WIhAA3//728P4FNjuZQQAAAu5tb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAAZAABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACGHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAZAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAgAAAAIAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAGQAAAAAAAEAAAAAAZBtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAACgAAAAEAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAE7bWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAA+3N0YmwAAACXc3RzZAAAAAAAAAABAAAAh2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAgACAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAxYXZjQwFkAAr/4QAYZ2QACqzZX4iIhAAAAwAEAAADAFA8SJZYAQAGaOvjyyLAAAAAGHN0dHMAAAAAAAAAAQAAAAEAAAQAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAAsUAAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjU2LjQwLjEwMQ=="}}catch(f){return void addTest("videoautoplay",!1)}d.setAttribute("autoplay",""),d.style.cssText="display:none",docElement.appendChild(d),setTimeout(function(){d.addEventListener("playing",a,!1),b=setTimeout(a,c)},0)}),Modernizr.addTest("videoloop","loop"in createElement("video")),Modernizr.addTest("videopreload","preload"in createElement("video")),testRunner(),delete ModernizrProto.addTest,delete ModernizrProto.addAsyncTest;for(var i=0;i<Modernizr._q.length;i++)Modernizr._q[i]();window.Modernizr=Modernizr}(window,document)},{}],"raf-polyfill":[function(a,b,c){!function(){var a=["ms","moz","webkit","o"],b=-1;for(b=0;b<a.length&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[a[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[b]+"CancelAnimationFrame"]||window[a[b]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||console.warn("No native window.requestAnimationFrame found"),window.requestAnimationFrame||!function(){var a=0;window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}}(),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){window.clearTimeout(a)})}()},{}],underscore:[function(a,b,c){(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=v(d,f,4);var g=!C(c)&&u.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function d(a){return function(b,c,d){c=w(c,d);for(var e=B(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function e(a,b,c){return function(d,e,f){var g=0,h=B(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(m.call(d,g,h),u.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function f(a,b){var c=H.length,d=a.constructor,e=u.isFunction(d)&&d.prototype||j,f="constructor";for(u.has(a,f)&&!u.contains(b,f)&&b.push(f);c--;)f=H[c],f in a&&a[f]!==e[f]&&!u.contains(b,f)&&b.push(f)}var g=this,h=g._,i=Array.prototype,j=Object.prototype,k=Function.prototype,l=i.push,m=i.slice,n=j.toString,o=j.hasOwnProperty,p=Array.isArray,q=Object.keys,r=k.bind,s=Object.create,t=function(){},u=function(a){return a instanceof u?a:this instanceof u?void(this._wrapped=a):new u(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=u),c._=u):g._=u,u.VERSION="1.8.3";var v=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){return null==a?u.identity:u.isFunction(a)?v(a,b,c):u.isObject(a)?u.matcher(a):u.property(a)};u.iteratee=function(a,b){return w(a,b,1/0)};var x=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},y=function(a){if(!u.isObject(a))return{};if(s)return s(a);t.prototype=a;var b=new t;return t.prototype=null,b},z=function(a){return function(b){return null==b?void 0:b[a]}},A=Math.pow(2,53)-1,B=z("length"),C=function(a){var b=B(a);return"number"==typeof b&&b>=0&&A>=b};u.each=u.forEach=function(a,b,c){b=v(b,c);var d,e;if(C(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=u.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},u.map=u.collect=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},u.reduce=u.foldl=u.inject=a(1),u.reduceRight=u.foldr=a(-1),u.find=u.detect=function(a,b,c){var d;return d=C(a)?u.findIndex(a,b,c):u.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},u.filter=u.select=function(a,b,c){var d=[];return b=w(b,c),u.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},u.reject=function(a,b,c){return u.filter(a,u.negate(w(b)),c)},u.every=u.all=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},u.some=u.any=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},u.contains=u.includes=u.include=function(a,b,c,d){return C(a)||(a=u.values(a)),("number"!=typeof c||d)&&(c=0),u.indexOf(a,b,c)>=0},u.invoke=function(a,b){var c=m.call(arguments,2),d=u.isFunction(b);return u.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},u.pluck=function(a,b){return u.map(a,u.property(b))},u.where=function(a,b){return u.filter(a,u.matcher(b))},u.findWhere=function(a,b){return u.find(a,u.matcher(b))},u.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},u.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},u.shuffle=function(a){for(var b,c=C(a)?a:u.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=u.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},u.sample=function(a,b,c){return null==b||c?(C(a)||(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,Math.max(0,b))},u.sortBy=function(a,b,c){return b=w(b,c),u.pluck(u.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=w(c,d),u.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};u.groupBy=D(function(a,b,c){u.has(a,c)?a[c].push(b):a[c]=[b]}),u.indexBy=D(function(a,b,c){a[c]=b}),u.countBy=D(function(a,b,c){u.has(a,c)?a[c]++:a[c]=1}),u.toArray=function(a){return a?u.isArray(a)?m.call(a):C(a)?u.map(a,u.identity):u.values(a):[]},u.size=function(a){return null==a?0:C(a)?a.length:u.keys(a).length},u.partition=function(a,b,c){b=w(b,c);var d=[],e=[];return u.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},u.first=u.head=u.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:u.initial(a,a.length-b)},u.initial=function(a,b,c){return m.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},u.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:u.rest(a,Math.max(0,a.length-b))},u.rest=u.tail=u.drop=function(a,b,c){return m.call(a,null==b||c?1:b)},u.compact=function(a){return u.filter(a,u.identity)};var E=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=B(a);h>g;g++){var i=a[g];if(C(i)&&(u.isArray(i)||u.isArguments(i))){b||(i=E(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};u.flatten=function(a,b){return E(a,b,!1)},u.without=function(a){return u.difference(a,m.call(arguments,1))},u.uniq=u.unique=function(a,b,c,d){u.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=w(c,d));for(var e=[],f=[],g=0,h=B(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?u.contains(f,j)||(f.push(j),e.push(i)):u.contains(e,i)||e.push(i)}return e},u.union=function(){return u.uniq(E(arguments,!0,!0))},u.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=B(a);e>d;d++){var f=a[d];if(!u.contains(b,f)){for(var g=1;c>g&&u.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},u.difference=function(a){var b=E(arguments,!0,!0,1);return u.filter(a,function(a){return!u.contains(b,a)})},u.zip=function(){return u.unzip(arguments)},u.unzip=function(a){for(var b=a&&u.max(a,B).length||0,c=Array(b),d=0;b>d;d++)c[d]=u.pluck(a,d);return c},u.object=function(a,b){for(var c={},d=0,e=B(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},u.findIndex=d(1),u.findLastIndex=d(-1),u.sortedIndex=function(a,b,c,d){c=w(c,d,1);for(var e=c(b),f=0,g=B(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},u.indexOf=e(1,u.findIndex,u.sortedIndex),u.lastIndexOf=e(-1,u.findLastIndex),u.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var F=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=y(a.prototype),g=a.apply(f,e);return u.isObject(g)?g:f};u.bind=function(a,b){if(r&&a.bind===r)return r.apply(a,m.call(arguments,1));if(!u.isFunction(a))throw new TypeError("Bind must be called on a function");var c=m.call(arguments,2),d=function(){return F(a,d,b,this,c.concat(m.call(arguments)))};return d},u.partial=function(a){var b=m.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===u?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return F(a,c,this,this,f)};return c},u.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=u.bind(a[c],a);return a},u.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return u.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},u.delay=function(a,b){var c=m.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},u.defer=u.partial(u.delay,u,1),u.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:u.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=u.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},u.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=u.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=u.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},u.wrap=function(a,b){return u.partial(b,a)},u.negate=function(a){return function(){return!a.apply(this,arguments)}},u.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},u.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},u.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},u.once=u.partial(u.before,2);var G=!{toString:null}.propertyIsEnumerable("toString"),H=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];u.keys=function(a){if(!u.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)u.has(a,c)&&b.push(c);return G&&f(a,b),b},u.allKeys=function(a){if(!u.isObject(a))return[];var b=[];for(var c in a)b.push(c);return G&&f(a,b),b},u.values=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},u.mapObject=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},u.pairs=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},u.invert=function(a){for(var b={},c=u.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},u.functions=u.methods=function(a){var b=[];for(var c in a)u.isFunction(a[c])&&b.push(c);return b.sort()},u.extend=x(u.allKeys),u.extendOwn=u.assign=x(u.keys),u.findKey=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},u.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;u.isFunction(b)?(e=u.allKeys(g),d=v(b,c)):(e=E(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},u.omit=function(a,b,c){if(u.isFunction(b))b=u.negate(b);else{var d=u.map(E(arguments,!1,!1,1),String);b=function(a,b){return!u.contains(d,b)}}return u.pick(a,b,c)},u.defaults=x(u.allKeys,!0),u.create=function(a,b){var c=y(a);return b&&u.extendOwn(c,b),c},u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a},u.tap=function(a,b){return b(a),a},u.isMatch=function(a,b){var c=u.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof u&&(a=a._wrapped),b instanceof u&&(b=b._wrapped);var e=n.call(a);if(e!==n.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(u.isFunction(g)&&g instanceof g&&u.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!I(a[i],b[i],c,d))return!1}else{var j,k=u.keys(a);if(i=k.length,u.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!u.has(b,j)||!I(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};u.isEqual=function(a,b){return I(a,b)},u.isEmpty=function(a){return null==a?!0:C(a)&&(u.isArray(a)||u.isString(a)||u.isArguments(a))?0===a.length:0===u.keys(a).length},u.isElement=function(a){return!(!a||1!==a.nodeType)},u.isArray=p||function(a){return"[object Array]"===n.call(a)},u.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},u.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){u["is"+a]=function(b){return n.call(b)==="[object "+a+"]"}}),u.isArguments(arguments)||(u.isArguments=function(a){return u.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(u.isFunction=function(a){return"function"==typeof a||!1}),u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},u.isNaN=function(a){return u.isNumber(a)&&a!==+a},u.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===n.call(a)},u.isNull=function(a){return null===a},u.isUndefined=function(a){return void 0===a},u.has=function(a,b){return null!=a&&o.call(a,b)},u.noConflict=function(){return g._=h,this},u.identity=function(a){return a},u.constant=function(a){return function(){return a}},u.noop=function(){},u.property=z,u.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},u.matcher=u.matches=function(a){return a=u.extendOwn({},a),function(b){return u.isMatch(b,a)}},u.times=function(a,b,c){var d=Array(Math.max(0,a));b=v(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},u.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},u.now=Date.now||function(){return(new Date).getTime()};var J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=u.invert(J),L=function(a){var b=function(b){return a[b]},c="(?:"+u.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};u.escape=L(J),u.unescape=L(K),u.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),u.isFunction(d)?d.call(a):d};var M=0;u.uniqueId=function(a){var b=++M+"";return a?a+b:b},u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(a){return"\\"+O[a]};u.template=function(a,b,c){!b&&c&&(b=c),b=u.defaults({},b,u.templateSettings);var d=RegExp([(b.escape||N).source,(b.interpolate||N).source,(b.evaluate||N).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(P,Q),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,u)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},u.chain=function(a){var b=u(a);return b._chain=!0,b};var R=function(a,b){return a._chain?u(b).chain():b};u.mixin=function(a){u.each(u.functions(a),function(b){var c=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];return l.apply(a,arguments),R(this,c.apply(u,a))}})},u.mixin(u),u.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=i[a];u.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],R(this,c)}}),u.each(["concat","join","slice"],function(a){var b=i[a];u.prototype[a]=function(){return R(this,b.apply(this._wrapped,arguments))}}),u.prototype.value=function(){return this._wrapped},u.prototype.valueOf=u.prototype.toJSON=u.prototype.value,u.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return u})}).call(this)},{}],webfontloader:[function(a,b,c){!function(){function a(a,b,c){return a.call.apply(a.bind,arguments)}function c(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,d),a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function d(b,e,f){return d=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:c,d.apply(null,arguments)}function e(a,b){this.a=a,this.o=b||a,this.c=this.o.document}function f(a,b,c,d){if(b=a.c.createElement(b),c)for(var e in c)c.hasOwnProperty(e)&&("style"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));return d&&b.appendChild(a.c.createTextNode(d)),b}function g(a,b,c){a=a.c.getElementsByTagName(b)[0],a||(a=document.documentElement),a.insertBefore(c,a.lastChild)}function h(a){a.parentNode&&a.parentNode.removeChild(a)}function i(a,b,c){b=b||[],c=c||[];for(var d=a.className.split(/\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}for(b=[],e=0;e<d.length;e+=1){for(f=!1,g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function j(a,b){for(var c=a.className.split(/\s+/),d=0,e=c.length;e>d;d++)if(c[d]==b)return!0;return!1}function k(a){return a.o.location.hostname||a.a.location.hostname}function l(a,b,c){function d(){j&&e&&h&&(j(i),j=null)}b=f(a,"link",{rel:"stylesheet",href:b,media:"all"});var e=!1,h=!0,i=null,j=c||null;ca?(b.onload=function(){e=!0,d()},b.onerror=function(){e=!0,i=Error("Stylesheet failed to load"),d()}):setTimeout(function(){e=!0,d()},0),g(a,"head",b)}function m(a,b,c,d){var e=a.c.getElementsByTagName("head")[0];if(e){var g=f(a,"script",{src:b}),h=!1;return g.onload=g.onreadystatechange=function(){h||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(h=!0,c&&c(null),g.onload=g.onreadystatechange=null,"HEAD"==g.parentNode.tagName&&e.removeChild(g))},e.appendChild(g),setTimeout(function(){h||(h=!0,c&&c(Error("Script load timeout")))},d||5e3),g}return null}function n(){this.a=0,this.c=null}function o(a){return a.a++,function(){a.a--,q(a)}}function p(a,b){a.c=b,q(a)}function q(a){0==a.a&&a.c&&(a.c(),a.c=null)}function r(a){this.a=a||"-"}function s(a,b){this.c=a,this.f=4,this.a="n";var c=(b||"n4").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function t(a){return w(a)+" "+(a.f+"00")+" 300px "+u(a.c)}function u(a){var b=[];a=a.split(/,\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['"]/g,"");-1!=d.indexOf(" ")||/^\d/.test(d)?b.push("'"+d+"'"):b.push(d)}return b.join(",")}function v(a){return a.a+a.f}function w(a){var b="normal";return"o"===a.a?b="oblique":"i"===a.a&&(b="italic"),b}function x(a){var b=4,c="n",d=null;return a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10)))),c+b}function y(a,b){this.c=a,this.f=a.o.document.documentElement,this.h=b,this.a=new r("-"),this.j=!1!==b.events,this.g=!1!==b.classes}function z(a){a.g&&i(a.f,[a.a.c("wf","loading")]),B(a,"loading")}function A(a){if(a.g){var b=j(a.f,a.a.c("wf","active")),c=[],d=[a.a.c("wf","loading")];b||c.push(a.a.c("wf","inactive")),i(a.f,c,d)}B(a,"inactive")}function B(a,b,c){a.j&&a.h[b]&&(c?a.h[b](c.c,v(c)):a.h[b]())}function C(){this.c={}}function D(a,b,c){var d,e=[];for(d in b)if(b.hasOwnProperty(d)){var f=a.c[d];f&&e.push(f(b[d],c))}return e}function E(a,b){this.c=a,this.f=b,this.a=f(this.c,"span",{"aria-hidden":"true"},this.f)}function F(a){g(a.c,"body",a.a)}function G(a){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+u(a.c)+";"+("font-style:"+w(a)+";font-weight:"+(a.f+"00")+";")}function H(a,b,c,d,e,f){this.g=a,this.j=b,this.a=d,this.c=c,this.f=e||3e3,this.h=f||void 0}function I(a,b,c,d,e,f,g){this.v=a,this.B=b,this.c=c,this.a=d,this.s=g||"BESbswy",this.f={},this.w=e||3e3,this.u=f||null,this.m=this.j=this.h=this.g=null,this.g=new E(this.c,this.s),this.h=new E(this.c,this.s),this.j=new E(this.c,this.s),this.m=new E(this.c,this.s),a=new s(this.a.c+",serif",v(this.a)),a=G(a),this.g.a.style.cssText=a,a=new s(this.a.c+",sans-serif",v(this.a)),a=G(a),this.h.a.style.cssText=a,a=new s("serif",v(this.a)),a=G(a),this.j.a.style.cssText=a,a=new s("sans-serif",v(this.a)),a=G(a),this.m.a.style.cssText=a,F(this.g),F(this.h),F(this.j),F(this.m)}function J(){if(null===ea){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);ea=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return ea}function K(a,b,c){for(var d in da)if(da.hasOwnProperty(d)&&b===a.f[da[d]]&&c===a.f[da[d]])return!0;return!1}function L(a){var b,c=a.g.a.offsetWidth,d=a.h.a.offsetWidth;(b=c===a.f.serif&&d===a.f["sans-serif"])||(b=J()&&K(a,c,d)),b?ba()-a.A>=a.w?J()&&K(a,c,d)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?N(a,a.v):N(a,a.B):M(a):N(a,a.v)}function M(a){setTimeout(d(function(){L(this)},a),50)}function N(a,b){setTimeout(d(function(){h(this.g.a),h(this.h.a),h(this.j.a),h(this.m.a),b(this.a)},a),0)}function O(a,b,c){this.c=a,this.a=b,this.f=0,this.m=this.j=!1,this.s=c}function P(a){0==--a.f&&a.j&&(a.m?(a=a.a,a.g&&i(a.f,[a.a.c("wf","active")],[a.a.c("wf","loading"),a.a.c("wf","inactive")]),B(a,"active")):A(a.a))}function Q(a){this.j=a,this.a=new C,this.h=0,this.f=this.g=!0}function R(a,b,c,e,f){var g=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=f||null,h=e||null||{};if(0===c.length&&g)A(b.a);else{b.f+=c.length,g&&(b.j=g);var j,k=[];for(j=0;j<c.length;j++){var l=c[j],m=h[l.c],n=b.a,o=l;if(n.g&&i(n.f,[n.a.c("wf",o.c,v(o).toString(),"loading")]),B(n,"fontloading",o),n=null,null===fa)if(window.FontFace){var o=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),p=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);fa=o?42<parseInt(o[1],10):p?!1:!0}else fa=!1;n=fa?new H(d(b.g,b),d(b.h,b),b.c,l,b.s,m):new I(d(b.g,b),d(b.h,b),b.c,l,b.s,a,m),k.push(n)}for(j=0;j<k.length;j++)k[j].start()}},0)}function S(a,b,c){var d=[],e=c.timeout;z(b);var d=D(a.a,c,a.c),f=new O(a.c,b,e);for(a.h=d.length,b=0,c=d.length;c>b;b++)d[b].load(function(b,c,d){R(a,f,b,c,d)})}function T(a,b){this.c=a,this.a=b}function U(a,b){this.c=a,this.a=b}function V(a,b){a?this.c=a:this.c=ga,this.a=[],this.f=[],this.g=b||""}function W(a,b){for(var c=b.length,d=0;c>d;d++){var e=b[d].split(":");3==e.length&&a.f.push(e.pop());var f="";2==e.length&&""!=e[1]&&(f=":"),a.a.push(e.join(f))}}function X(a){if(0==a.a.length)throw Error("No fonts to load!");if(-1!=a.c.indexOf("kit="))return a.c;for(var b=a.a.length,c=[],d=0;b>d;d++)c.push(a.a[d].replace(/ /g,"+"));return b=a.c+"?family="+c.join("%7C"),0<a.f.length&&(b+="&subset="+a.f.join(",")),0<a.g.length&&(b+="&text="+encodeURIComponent(a.g)),b}function Y(a){this.f=a,this.a=[],this.c={}}function Z(a){for(var b=a.f.length,c=0;b>c;c++){var d=a.f[c].split(":"),e=d[0].replace(/\+/g," "),f=["n4"];if(2<=d.length){var g,h=d[1];if(g=[],h)for(var h=h.split(","),i=h.length,j=0;i>j;j++){var k;if(k=h[j],k.match(/^[\w-]+$/)){var l=ka.exec(k.toLowerCase());if(null==l)k="";else{if(k=l[2],k=null==k||""==k?"n":ja[k],l=l[1],null==l||""==l)l="4";else var m=ia[l],l=m?m:isNaN(l)?"4":l.substr(0,1);k=[k,l].join("")}}else k="";k&&g.push(k)}0<g.length&&(f=g),3==d.length&&(d=d[2],g=[],d=d?d.split(","):g,0<d.length&&(d=ha[d[0]])&&(a.c[e]=d))}for(a.c[e]||(d=ha[e])&&(a.c[e]=d),d=0;d<f.length;d+=1)a.a.push(new s(e,f[d]))}}function $(a,b){this.c=a,this.a=b}function _(a,b){this.c=a,this.a=b}function aa(a,b){this.c=a,this.f=b,this.a=[]}var ba=Date.now||function(){return+new Date},ca=!!window.FontFace;r.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\W_]+/g,"").toLowerCase());return b.join(this.a)},H.prototype.start=function(){var a=this.c.o.document,b=this,c=ba(),d=new Promise(function(d,e){function f(){ba()-c>=b.f?e():a.fonts.load(t(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=null,f=new Promise(function(a,c){e=setTimeout(c,b.f)});Promise.race([f,d]).then(function(){e&&(clearTimeout(e),e=null),b.g(b.a)},function(){b.j(b.a)})};var da={D:"serif",C:"sans-serif"},ea=null;I.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=ba(),L(this)};var fa=null;O.prototype.g=function(a){var b=this.a;b.g&&i(b.f,[b.a.c("wf",a.c,v(a).toString(),"active")],[b.a.c("wf",a.c,v(a).toString(),"loading"),b.a.c("wf",a.c,v(a).toString(),"inactive")]),B(b,"fontactive",a),this.m=!0,P(this)},O.prototype.h=function(a){var b=this.a;if(b.g){var c=j(b.f,b.a.c("wf",a.c,v(a).toString(),"active")),d=[],e=[b.a.c("wf",a.c,v(a).toString(),"loading")];c||d.push(b.a.c("wf",a.c,v(a).toString(),"inactive")),i(b.f,d,e)}B(b,"fontinactive",a),P(this)},Q.prototype.load=function(a){this.c=new e(this.j,a.context||this.j),this.g=!1!==a.events,this.f=!1!==a.classes,S(this,new y(this.c,a),a)},T.prototype.load=function(a){function b(){if(f["__mti_fntLst"+d]){var c,e=f["__mti_fntLst"+d](),g=[];if(e)for(var h=0;h<e.length;h++){var i=e[h].fontfamily;void 0!=e[h].fontStyle&&void 0!=e[h].fontWeight?(c=e[h].fontStyle+e[h].fontWeight,g.push(new s(i,c))):g.push(new s(i))}a(g)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.o;m(this.c,(c.a.api||"https://fast.fonts.net/jsapi")+"/"+d+".js"+(e?"?v="+e:""),function(e){e?a([]):(f["__MonotypeConfiguration__"+d]=function(){return c.a},b())}).id="__MonotypeAPIScript__"+d}else a([])},U.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new n;for(b=0,c=d.length;c>b;b++)l(this.c,d[b],o(g));var h=[];for(b=0,c=e.length;c>b;b++)if(d=e[b].split(":"),d[1])for(var i=d[1].split(","),j=0;j<i.length;j+=1)h.push(new s(d[0],i[j]));else h.push(new s(d[0]));p(g,function(){a(h,f)})};var ga="https://fonts.googleapis.com/css",ha={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},ia={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ja={i:"i",italic:"i",n:"n",normal:"n"},ka=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,la={Arimo:!0,Cousine:!0,Tinos:!0};$.prototype.load=function(a){var b=new n,c=this.c,d=new V(this.a.api,this.a.text),e=this.a.families;W(d,e);var f=new Y(e);Z(f),l(c,X(d),o(b)),p(b,function(){a(f.a,f.c,la)})},_.prototype.load=function(a){var b=this.a.id,c=this.c.o;b?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+b+".js",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var d=[],e=0;e<b.length;e+=2)for(var f=b[e],g=b[e+1],h=0;h<g.length;h++)d.push(new s(f,g[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(i){}a(d)}},2e3):a([])},aa.prototype.load=function(a){var b=this.f.id,c=this.c.o,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var e=0,f=c.fonts.length;f>e;++e){var g=c.fonts[e];d.a.push(new s(g.name,x("font-weight:"+g.weight+";font-style:"+g.style)))}a(d.a)},m(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+k(this.c)+"/"+b+".js",function(b){b&&a([])})):a([])};var ma=new Q(window);ma.a.c.custom=function(a,b){return new U(b,a)},ma.a.c.fontdeck=function(a,b){return new aa(b,a)},ma.a.c.monotype=function(a,b){return new T(b,a)},ma.a.c.typekit=function(a,b){return new _(b,a)},ma.a.c.google=function(a,b){return new $(b,a)};var na={load:d(ma.load,ma)};"function"==typeof define&&define.amd?define(function(){return na}):"undefined"!=typeof b&&b.exports?b.exports=na:(window.WebFont=na,window.WebFontConfig&&ma.load(window.WebFontConfig))}()},{}]},{},[39]);