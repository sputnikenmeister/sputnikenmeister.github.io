{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "node_modules/color-convert/conversions.js",
    "node_modules/color-convert/index.js",
    "node_modules/color-convert/route.js",
    "node_modules/color-name/index.js",
    "node_modules/color-string/index.js",
    "node_modules/handlebars/dist/cjs/handlebars.runtime.js",
    "node_modules/handlebars/dist/cjs/handlebars/base.js",
    "node_modules/handlebars/dist/cjs/handlebars/decorators.js",
    "node_modules/handlebars/dist/cjs/handlebars/decorators/inline.js",
    "node_modules/handlebars/dist/cjs/handlebars/exception.js",
    "node_modules/handlebars/dist/cjs/handlebars/helpers.js",
    "node_modules/handlebars/dist/cjs/handlebars/helpers/block-helper-missing.js",
    "node_modules/handlebars/dist/cjs/handlebars/helpers/each.js",
    "node_modules/handlebars/dist/cjs/handlebars/helpers/helper-missing.js",
    "node_modules/handlebars/dist/cjs/handlebars/helpers/if.js",
    "node_modules/handlebars/dist/cjs/handlebars/helpers/log.js",
    "node_modules/handlebars/dist/cjs/handlebars/helpers/lookup.js",
    "node_modules/handlebars/dist/cjs/handlebars/helpers/with.js",
    "node_modules/handlebars/dist/cjs/handlebars/logger.js",
    "node_modules/handlebars/dist/cjs/handlebars/no-conflict.js",
    "node_modules/handlebars/dist/cjs/handlebars/runtime.js",
    "node_modules/handlebars/dist/cjs/handlebars/safe-string.js",
    "node_modules/handlebars/dist/cjs/handlebars/utils.js",
    "node_modules/handlebars/runtime.js",
    "node_modules/simple-swizzle/index.js",
    "node_modules/simple-swizzle/node_modules/is-arrayish/index.js",
    "src/js/app/App.js",
    "src/js/app/control/Controller.js",
    "src/js/app/control/Globals.js",
    "src/js/app/model/AppState.js",
    "src/js/app/model/BaseItem.js",
    "src/js/app/model/BaseModel.js",
    "src/js/app/model/SelectableCollection.js",
    "src/js/app/model/collection/ArticleCollection.js",
    "src/js/app/model/collection/BundleCollection.js",
    "src/js/app/model/collection/KeywordCollection.js",
    "src/js/app/model/collection/TypeCollection.js",
    "src/js/app/model/helper/bootstrap.js",
    "src/js/app/model/item/ArticleItem.js",
    "src/js/app/model/item/BundleItem.js",
    "src/js/app/model/item/KeywordItem.js",
    "src/js/app/model/item/MediaItem.js",
    "src/js/app/model/item/SourceItem.js",
    "src/js/app/model/item/TypeItem.js",
    "src/js/app/view/AppView.js",
    "src/js/app/view/ContentView.js",
    "src/js/app/view/NavigationView.js",
    "src/js/app/view/base/CallbackQueue.js",
    "src/js/app/view/base/CanvasView.js",
    "src/js/app/view/base/Interpolator.js",
    "src/js/app/view/base/PrefixedEvents.js",
    "src/js/app/view/base/TouchManager.js",
    "src/js/app/view/base/View.js",
    "src/js/app/view/base/ViewError.js",
    "src/js/app/view/component/ArticleButton.hbs",
    "src/js/app/view/component/ArticleButton.js",
    "src/js/app/view/component/ArticleView.js",
    "src/js/app/view/component/CanvasProgressMeter.js",
    "src/js/app/view/component/Carousel.js",
    "src/js/app/view/component/CollectionStack.hbs",
    "src/js/app/view/component/CollectionStack.js",
    "src/js/app/view/component/FilterableListView.js",
    "src/js/app/view/component/GraphView.js",
    "src/js/app/view/component/GroupingListView.js",
    "src/js/app/view/component/PlayToggleSymbol.js",
    "src/js/app/view/component/SelectableListView.js",
    "src/js/app/view/helper/createColorStyleSheet.js",
    "src/js/app/view/promise/_loadImageAsObjectURL.js",
    "src/js/app/view/promise/_whenImageLoads.js",
    "src/js/app/view/promise/whenDefaultImageLoads.js",
    "src/js/app/view/promise/whenScrollingEnds.js",
    "src/js/app/view/promise/whenSelectionDistanceIs.js",
    "src/js/app/view/promise/whenSelectionIsContiguous.js",
    "src/js/app/view/promise/whenViewIsAttached.js",
    "src/js/app/view/promise/whenViewIsRendered.js",
    "src/js/app/view/render/CarouselRenderer.js",
    "src/js/app/view/render/ClickableRenderer.js",
    "src/js/app/view/render/DefaultSelectableRenderer.hbs",
    "src/js/app/view/render/DefaultSelectableRenderer.js",
    "src/js/app/view/render/DotNavigationRenderer.hbs",
    "src/js/app/view/render/DotNavigationRenderer.js",
    "src/js/app/view/render/ImageRenderer.hbs",
    "src/js/app/view/render/ImageRenderer.js",
    "src/js/app/view/render/LabelRenderer.js",
    "src/js/app/view/render/MediaRenderer.js",
    "src/js/app/view/render/PlayableRenderer.js",
    "src/js/app/view/render/SequenceRenderer.hbs",
    "src/js/app/view/render/SequenceRenderer.js",
    "src/js/app/view/render/VideoRenderer.hbs",
    "src/js/app/view/render/VideoRenderer.js",
    "src/js/app/view/template/Carousel.EmptyRenderer.Bundle.hbs",
    "src/js/app/view/template/CollectionStack.Media.hbs",
    "src/js/app/view/template/ErrorBlock.hbs",
    "src/js/app/view/template/_helpers.js",
    "src/js/app/view/template/svg/FullscreenSymbol.hbs",
    "src/js/utils/Timer.js",
    "src/js/utils/TransformHelper.js",
    "src/js/utils/TransformItem.js",
    "src/js/utils/array/difference.js",
    "src/js/utils/canvas/CanvasHelper.js",
    "src/js/utils/canvas/bitmap/BlurStack.js",
    "src/js/utils/canvas/bitmap/desaturate.js",
    "src/js/utils/canvas/bitmap/getAverageRGB.js",
    "src/js/utils/canvas/bitmap/mul_table.js",
    "src/js/utils/canvas/bitmap/multiply.js",
    "src/js/utils/canvas/bitmap/shg_table.js",
    "src/js/utils/canvas/bitmap/stackBlurRGB.js",
    "src/js/utils/canvas/calcArcHConnector.js",
    "src/js/utils/css/getBoxEdgeStyles.js",
    "src/js/utils/ease/fn/easeInQuad.js",
    "src/js/utils/ease/fn/easeOutQuad.js",
    "src/js/utils/ease/fn/linear.js",
    "src/js/utils/geom/inflateRect.js",
    "src/js/utils/prefixedEvent.js",
    "src/js/utils/prefixedProperty.js",
    "src/js/utils/prefixedStyleName.js",
    "src/js/utils/prefixes.js",
    "src/js/utils/promise/rejectAll.js",
    "src/js/utils/promise/resolveAll.js",
    "src/js/utils/strings/camelToDashed.js",
    "src/js/utils/strings/stripTags.js",
    "src/js/utils/touch/SmoothPanRecognizer.js",
    "src/sass/variables.json",
    "backbone.mutators.js",
    "src/js/shims/modernizr-shim.js",
    "backbone.babysitter.js",
    "backbone.native.js",
    "backbone.js",
    "index.js",
    "cookies.js",
    "hammer.js",
    "hbsfy/runtime.js",
    "build/target/modernizr-build/modernizr-dist.js",
    "underscore.js",
    "webfontloader.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": ".",
  "sourcesContent": [
    "(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",
    "/* MIT license */\nvar cssKeywords = require('color-name');\n\n// NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\nvar reverseKeywords = {};\nfor (var key in cssKeywords) {\n\tif (cssKeywords.hasOwnProperty(key)) {\n\t\treverseKeywords[cssKeywords[key]] = key;\n\t}\n}\n\nvar convert = module.exports = {\n\trgb: {channels: 3, labels: 'rgb'},\n\thsl: {channels: 3, labels: 'hsl'},\n\thsv: {channels: 3, labels: 'hsv'},\n\thwb: {channels: 3, labels: 'hwb'},\n\tcmyk: {channels: 4, labels: 'cmyk'},\n\txyz: {channels: 3, labels: 'xyz'},\n\tlab: {channels: 3, labels: 'lab'},\n\tlch: {channels: 3, labels: 'lch'},\n\thex: {channels: 1, labels: ['hex']},\n\tkeyword: {channels: 1, labels: ['keyword']},\n\tansi16: {channels: 1, labels: ['ansi16']},\n\tansi256: {channels: 1, labels: ['ansi256']},\n\thcg: {channels: 3, labels: ['h', 'c', 'g']},\n\tapple: {channels: 3, labels: ['r16', 'g16', 'b16']},\n\tgray: {channels: 1, labels: ['gray']}\n};\n\n// hide .channels and .labels properties\nfor (var model in convert) {\n\tif (convert.hasOwnProperty(model)) {\n\t\tif (!('channels' in convert[model])) {\n\t\t\tthrow new Error('missing channels property: ' + model);\n\t\t}\n\n\t\tif (!('labels' in convert[model])) {\n\t\t\tthrow new Error('missing channel labels property: ' + model);\n\t\t}\n\n\t\tif (convert[model].labels.length !== convert[model].channels) {\n\t\t\tthrow new Error('channel and label counts mismatch: ' + model);\n\t\t}\n\n\t\tvar channels = convert[model].channels;\n\t\tvar labels = convert[model].labels;\n\t\tdelete convert[model].channels;\n\t\tdelete convert[model].labels;\n\t\tObject.defineProperty(convert[model], 'channels', {value: channels});\n\t\tObject.defineProperty(convert[model], 'labels', {value: labels});\n\t}\n}\n\nconvert.rgb.hsl = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar min = Math.min(r, g, b);\n\tvar max = Math.max(r, g, b);\n\tvar delta = max - min;\n\tvar h;\n\tvar s;\n\tvar l;\n\n\tif (max === min) {\n\t\th = 0;\n\t} else if (r === max) {\n\t\th = (g - b) / delta;\n\t} else if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t} else if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t} else if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t} else {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n\tvar r = rgb[0];\n\tvar g = rgb[1];\n\tvar b = rgb[2];\n\tvar min = Math.min(r, g, b);\n\tvar max = Math.max(r, g, b);\n\tvar delta = max - min;\n\tvar h;\n\tvar s;\n\tvar v;\n\n\tif (max === 0) {\n\t\ts = 0;\n\t} else {\n\t\ts = (delta / max * 1000) / 10;\n\t}\n\n\tif (max === min) {\n\t\th = 0;\n\t} else if (r === max) {\n\t\th = (g - b) / delta;\n\t} else if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t} else if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tv = ((max / 255) * 1000) / 10;\n\n\treturn [h, s, v];\n};\n\nconvert.rgb.hwb = function (rgb) {\n\tvar r = rgb[0];\n\tvar g = rgb[1];\n\tvar b = rgb[2];\n\tvar h = convert.rgb.hsl(rgb)[0];\n\tvar w = 1 / 255 * Math.min(r, Math.min(g, b));\n\n\tb = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n\n\treturn [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar c;\n\tvar m;\n\tvar y;\n\tvar k;\n\n\tk = Math.min(1 - r, 1 - g, 1 - b);\n\tc = (1 - r - k) / (1 - k) || 0;\n\tm = (1 - g - k) / (1 - k) || 0;\n\ty = (1 - b - k) / (1 - k) || 0;\n\n\treturn [c * 100, m * 100, y * 100, k * 100];\n};\n\n/**\n * See https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n * */\nfunction comparativeDistance(x, y) {\n\treturn (\n\t\tMath.pow(x[0] - y[0], 2) +\n\t\tMath.pow(x[1] - y[1], 2) +\n\t\tMath.pow(x[2] - y[2], 2)\n\t);\n}\n\nconvert.rgb.keyword = function (rgb) {\n\tvar reversed = reverseKeywords[rgb];\n\tif (reversed) {\n\t\treturn reversed;\n\t}\n\n\tvar currentClosestDistance = Infinity;\n\tvar currentClosestKeyword;\n\n\tfor (var keyword in cssKeywords) {\n\t\tif (cssKeywords.hasOwnProperty(keyword)) {\n\t\t\tvar value = cssKeywords[keyword];\n\n\t\t\t// Compute comparative distance\n\t\t\tvar distance = comparativeDistance(rgb, value);\n\n\t\t\t// Check if its less, if so set as closest\n\t\t\tif (distance < currentClosestDistance) {\n\t\t\t\tcurrentClosestDistance = distance;\n\t\t\t\tcurrentClosestKeyword = keyword;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n\treturn cssKeywords[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tvar y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tvar z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n\tvar xyz = convert.rgb.xyz(rgb);\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n\tvar h = hsl[0] / 360;\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar t1;\n\tvar t2;\n\tvar t3;\n\tvar rgb;\n\tvar val;\n\n\tif (s === 0) {\n\t\tval = l * 255;\n\t\treturn [val, val, val];\n\t}\n\n\tif (l < 0.5) {\n\t\tt2 = l * (1 + s);\n\t} else {\n\t\tt2 = l + s - l * s;\n\t}\n\n\tt1 = 2 * l - t2;\n\n\trgb = [0, 0, 0];\n\tfor (var i = 0; i < 3; i++) {\n\t\tt3 = h + 1 / 3 * -(i - 1);\n\t\tif (t3 < 0) {\n\t\t\tt3++;\n\t\t}\n\t\tif (t3 > 1) {\n\t\t\tt3--;\n\t\t}\n\n\t\tif (6 * t3 < 1) {\n\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t} else if (2 * t3 < 1) {\n\t\t\tval = t2;\n\t\t} else if (3 * t3 < 2) {\n\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t} else {\n\t\t\tval = t1;\n\t\t}\n\n\t\trgb[i] = val * 255;\n\t}\n\n\treturn rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n\tvar h = hsl[0];\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar smin = s;\n\tvar lmin = Math.max(l, 0.01);\n\tvar sv;\n\tvar v;\n\n\tl *= 2;\n\ts *= (l <= 1) ? l : 2 - l;\n\tsmin *= lmin <= 1 ? lmin : 2 - lmin;\n\tv = (l + s) / 2;\n\tsv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);\n\n\treturn [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n\tvar h = hsv[0] / 60;\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar hi = Math.floor(h) % 6;\n\n\tvar f = h - Math.floor(h);\n\tvar p = 255 * v * (1 - s);\n\tvar q = 255 * v * (1 - (s * f));\n\tvar t = 255 * v * (1 - (s * (1 - f)));\n\tv *= 255;\n\n\tswitch (hi) {\n\t\tcase 0:\n\t\t\treturn [v, t, p];\n\t\tcase 1:\n\t\t\treturn [q, v, p];\n\t\tcase 2:\n\t\t\treturn [p, v, t];\n\t\tcase 3:\n\t\t\treturn [p, q, v];\n\t\tcase 4:\n\t\t\treturn [t, p, v];\n\t\tcase 5:\n\t\t\treturn [v, p, q];\n\t}\n};\n\nconvert.hsv.hsl = function (hsv) {\n\tvar h = hsv[0];\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar vmin = Math.max(v, 0.01);\n\tvar lmin;\n\tvar sl;\n\tvar l;\n\n\tl = (2 - s) * v;\n\tlmin = (2 - s) * vmin;\n\tsl = s * vmin;\n\tsl /= (lmin <= 1) ? lmin : 2 - lmin;\n\tsl = sl || 0;\n\tl /= 2;\n\n\treturn [h, sl * 100, l * 100];\n};\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nconvert.hwb.rgb = function (hwb) {\n\tvar h = hwb[0] / 360;\n\tvar wh = hwb[1] / 100;\n\tvar bl = hwb[2] / 100;\n\tvar ratio = wh + bl;\n\tvar i;\n\tvar v;\n\tvar f;\n\tvar n;\n\n\t// wh + bl cant be > 1\n\tif (ratio > 1) {\n\t\twh /= ratio;\n\t\tbl /= ratio;\n\t}\n\n\ti = Math.floor(6 * h);\n\tv = 1 - bl;\n\tf = 6 * h - i;\n\n\tif ((i & 0x01) !== 0) {\n\t\tf = 1 - f;\n\t}\n\n\tn = wh + f * (v - wh); // linear interpolation\n\n\tvar r;\n\tvar g;\n\tvar b;\n\tswitch (i) {\n\t\tdefault:\n\t\tcase 6:\n\t\tcase 0: r = v; g = n; b = wh; break;\n\t\tcase 1: r = n; g = v; b = wh; break;\n\t\tcase 2: r = wh; g = v; b = n; break;\n\t\tcase 3: r = wh; g = n; b = v; break;\n\t\tcase 4: r = n; g = wh; b = v; break;\n\t\tcase 5: r = v; g = wh; b = n; break;\n\t}\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n\tvar c = cmyk[0] / 100;\n\tvar m = cmyk[1] / 100;\n\tvar y = cmyk[2] / 100;\n\tvar k = cmyk[3] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = 1 - Math.min(1, c * (1 - k) + k);\n\tg = 1 - Math.min(1, m * (1 - k) + k);\n\tb = 1 - Math.min(1, y * (1 - k) + k);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n\tvar x = xyz[0] / 100;\n\tvar y = xyz[1] / 100;\n\tvar z = xyz[2] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n\tg = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n\tb = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n\t// assume sRGB\n\tr = r > 0.0031308\n\t\t? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r * 12.92;\n\n\tg = g > 0.0031308\n\t\t? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g * 12.92;\n\n\tb = b > 0.0031308\n\t\t? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b * 12.92;\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar x;\n\tvar y;\n\tvar z;\n\n\ty = (l + 16) / 116;\n\tx = a / 500 + y;\n\tz = y - b / 200;\n\n\tvar y2 = Math.pow(y, 3);\n\tvar x2 = Math.pow(x, 3);\n\tvar z2 = Math.pow(z, 3);\n\ty = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100;\n\tz *= 108.883;\n\n\treturn [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar hr;\n\tvar h;\n\tvar c;\n\n\thr = Math.atan2(b, a);\n\th = hr * 360 / 2 / Math.PI;\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tc = Math.sqrt(a * a + b * b);\n\n\treturn [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n\tvar l = lch[0];\n\tvar c = lch[1];\n\tvar h = lch[2];\n\tvar a;\n\tvar b;\n\tvar hr;\n\n\thr = h / 360 * 2 * Math.PI;\n\ta = c * Math.cos(hr);\n\tb = c * Math.sin(hr);\n\n\treturn [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\tvar value = 1 in arguments ? arguments[1] : convert.rgb.hsv(args)[2]; // hsv -> ansi16 optimization\n\n\tvalue = Math.round(value / 50);\n\n\tif (value === 0) {\n\t\treturn 30;\n\t}\n\n\tvar ansi = 30\n\t\t+ ((Math.round(b / 255) << 2)\n\t\t| (Math.round(g / 255) << 1)\n\t\t| Math.round(r / 255));\n\n\tif (value === 2) {\n\t\tansi += 60;\n\t}\n\n\treturn ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n\t// optimization here; we already know the value and don't need to get\n\t// it converted for us.\n\treturn convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\n\t// we use the extended greyscale palette here, with the exception of\n\t// black and white. normal palette only has 4 greyscale shades.\n\tif (r === g && g === b) {\n\t\tif (r < 8) {\n\t\t\treturn 16;\n\t\t}\n\n\t\tif (r > 248) {\n\t\t\treturn 231;\n\t\t}\n\n\t\treturn Math.round(((r - 8) / 247) * 24) + 232;\n\t}\n\n\tvar ansi = 16\n\t\t+ (36 * Math.round(r / 255 * 5))\n\t\t+ (6 * Math.round(g / 255 * 5))\n\t\t+ Math.round(b / 255 * 5);\n\n\treturn ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n\tvar color = args % 10;\n\n\t// handle greyscale\n\tif (color === 0 || color === 7) {\n\t\tif (args > 50) {\n\t\t\tcolor += 3.5;\n\t\t}\n\n\t\tcolor = color / 10.5 * 255;\n\n\t\treturn [color, color, color];\n\t}\n\n\tvar mult = (~~(args > 50) + 1) * 0.5;\n\tvar r = ((color & 1) * mult) * 255;\n\tvar g = (((color >> 1) & 1) * mult) * 255;\n\tvar b = (((color >> 2) & 1) * mult) * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n\t// handle greyscale\n\tif (args >= 232) {\n\t\tvar c = (args - 232) * 10 + 8;\n\t\treturn [c, c, c];\n\t}\n\n\targs -= 16;\n\n\tvar rem;\n\tvar r = Math.floor(args / 36) / 5 * 255;\n\tvar g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n\tvar b = (rem % 6) / 5 * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n\tvar integer = ((Math.round(args[0]) & 0xFF) << 16)\n\t\t+ ((Math.round(args[1]) & 0xFF) << 8)\n\t\t+ (Math.round(args[2]) & 0xFF);\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n\tvar match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\tif (!match) {\n\t\treturn [0, 0, 0];\n\t}\n\n\tvar colorString = match[0];\n\n\tif (match[0].length === 3) {\n\t\tcolorString = colorString.split('').map(function (char) {\n\t\t\treturn char + char;\n\t\t}).join('');\n\t}\n\n\tvar integer = parseInt(colorString, 16);\n\tvar r = (integer >> 16) & 0xFF;\n\tvar g = (integer >> 8) & 0xFF;\n\tvar b = integer & 0xFF;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar max = Math.max(Math.max(r, g), b);\n\tvar min = Math.min(Math.min(r, g), b);\n\tvar chroma = (max - min);\n\tvar grayscale;\n\tvar hue;\n\n\tif (chroma < 1) {\n\t\tgrayscale = min / (1 - chroma);\n\t} else {\n\t\tgrayscale = 0;\n\t}\n\n\tif (chroma <= 0) {\n\t\thue = 0;\n\t} else\n\tif (max === r) {\n\t\thue = ((g - b) / chroma) % 6;\n\t} else\n\tif (max === g) {\n\t\thue = 2 + (b - r) / chroma;\n\t} else {\n\t\thue = 4 + (r - g) / chroma + 4;\n\t}\n\n\thue /= 6;\n\thue %= 1;\n\n\treturn [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar c = 1;\n\tvar f = 0;\n\n\tif (l < 0.5) {\n\t\tc = 2.0 * s * l;\n\t} else {\n\t\tc = 2.0 * s * (1.0 - l);\n\t}\n\n\tif (c < 1.0) {\n\t\tf = (l - 0.5 * c) / (1.0 - c);\n\t}\n\n\treturn [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\n\tvar c = s * v;\n\tvar f = 0;\n\n\tif (c < 1.0) {\n\t\tf = (v - c) / (1 - c);\n\t}\n\n\treturn [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n\tvar h = hcg[0] / 360;\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tif (c === 0.0) {\n\t\treturn [g * 255, g * 255, g * 255];\n\t}\n\n\tvar pure = [0, 0, 0];\n\tvar hi = (h % 1) * 6;\n\tvar v = hi % 1;\n\tvar w = 1 - v;\n\tvar mg = 0;\n\n\tswitch (Math.floor(hi)) {\n\t\tcase 0:\n\t\t\tpure[0] = 1; pure[1] = v; pure[2] = 0; break;\n\t\tcase 1:\n\t\t\tpure[0] = w; pure[1] = 1; pure[2] = 0; break;\n\t\tcase 2:\n\t\t\tpure[0] = 0; pure[1] = 1; pure[2] = v; break;\n\t\tcase 3:\n\t\t\tpure[0] = 0; pure[1] = w; pure[2] = 1; break;\n\t\tcase 4:\n\t\t\tpure[0] = v; pure[1] = 0; pure[2] = 1; break;\n\t\tdefault:\n\t\t\tpure[0] = 1; pure[1] = 0; pure[2] = w;\n\t}\n\n\tmg = (1.0 - c) * g;\n\n\treturn [\n\t\t(c * pure[0] + mg) * 255,\n\t\t(c * pure[1] + mg) * 255,\n\t\t(c * pure[2] + mg) * 255\n\t];\n};\n\nconvert.hcg.hsv = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar v = c + g * (1.0 - c);\n\tvar f = 0;\n\n\tif (v > 0.0) {\n\t\tf = c / v;\n\t}\n\n\treturn [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar l = g * (1.0 - c) + 0.5 * c;\n\tvar s = 0;\n\n\tif (l > 0.0 && l < 0.5) {\n\t\ts = c / (2 * l);\n\t} else\n\tif (l >= 0.5 && l < 1.0) {\n\t\ts = c / (2 * (1 - l));\n\t}\n\n\treturn [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\tvar v = c + g * (1.0 - c);\n\treturn [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n\tvar w = hwb[1] / 100;\n\tvar b = hwb[2] / 100;\n\tvar v = 1 - b;\n\tvar c = v - w;\n\tvar g = 0;\n\n\tif (c < 1) {\n\t\tg = (v - c) / (1 - c);\n\t}\n\n\treturn [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n\treturn [(apple[0] / 65535) * 255, (apple[1] / 65535) * 255, (apple[2] / 65535) * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n\treturn [(rgb[0] / 255) * 65535, (rgb[1] / 255) * 65535, (rgb[2] / 255) * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n\treturn [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = convert.gray.hsv = function (args) {\n\treturn [0, 0, args[0]];\n};\n\nconvert.gray.hwb = function (gray) {\n\treturn [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n\treturn [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n\treturn [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n\tvar val = Math.round(gray[0] / 100 * 255) & 0xFF;\n\tvar integer = (val << 16) + (val << 8) + val;\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n\tvar val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n\treturn [val / 255 * 100];\n};\n",
    "var conversions = require('./conversions');\nvar route = require('./route');\n\nvar convert = {};\n\nvar models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\treturn fn(args);\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\tvar result = fn(args);\n\n\t\t// we're assuming the result is an array here.\n\t\t// see notice in conversions.js; don't use box types\n\t\t// in conversion functions.\n\t\tif (typeof result === 'object') {\n\t\t\tfor (var len = result.length, i = 0; i < len; i++) {\n\t\t\t\tresult[i] = Math.round(result[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nmodels.forEach(function (fromModel) {\n\tconvert[fromModel] = {};\n\n\tObject.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels});\n\tObject.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels});\n\n\tvar routes = route(fromModel);\n\tvar routeModels = Object.keys(routes);\n\n\trouteModels.forEach(function (toModel) {\n\t\tvar fn = routes[toModel];\n\n\t\tconvert[fromModel][toModel] = wrapRounded(fn);\n\t\tconvert[fromModel][toModel].raw = wrapRaw(fn);\n\t});\n});\n\nmodule.exports = convert;\n",
    "var conversions = require('./conversions');\n\n/*\n\tthis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\nfunction buildGraph() {\n\tvar graph = {};\n\t// https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\tvar models = Object.keys(conversions);\n\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tgraph[models[i]] = {\n\t\t\t// http://jsperf.com/1-vs-infinity\n\t\t\t// micro-opt, but this is simple.\n\t\t\tdistance: -1,\n\t\t\tparent: null\n\t\t};\n\t}\n\n\treturn graph;\n}\n\n// https://en.wikipedia.org/wiki/Breadth-first_search\nfunction deriveBFS(fromModel) {\n\tvar graph = buildGraph();\n\tvar queue = [fromModel]; // unshift -> queue -> pop\n\n\tgraph[fromModel].distance = 0;\n\n\twhile (queue.length) {\n\t\tvar current = queue.pop();\n\t\tvar adjacents = Object.keys(conversions[current]);\n\n\t\tfor (var len = adjacents.length, i = 0; i < len; i++) {\n\t\t\tvar adjacent = adjacents[i];\n\t\t\tvar node = graph[adjacent];\n\n\t\t\tif (node.distance === -1) {\n\t\t\t\tnode.distance = graph[current].distance + 1;\n\t\t\t\tnode.parent = current;\n\t\t\t\tqueue.unshift(adjacent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn graph;\n}\n\nfunction link(from, to) {\n\treturn function (args) {\n\t\treturn to(from(args));\n\t};\n}\n\nfunction wrapConversion(toModel, graph) {\n\tvar path = [graph[toModel].parent, toModel];\n\tvar fn = conversions[graph[toModel].parent][toModel];\n\n\tvar cur = graph[toModel].parent;\n\twhile (graph[cur].parent) {\n\t\tpath.unshift(graph[cur].parent);\n\t\tfn = link(conversions[graph[cur].parent][cur], fn);\n\t\tcur = graph[cur].parent;\n\t}\n\n\tfn.conversion = path;\n\treturn fn;\n}\n\nmodule.exports = function (fromModel) {\n\tvar graph = deriveBFS(fromModel);\n\tvar conversion = {};\n\n\tvar models = Object.keys(graph);\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tvar toModel = models[i];\n\t\tvar node = graph[toModel];\n\n\t\tif (node.parent === null) {\n\t\t\t// no possible conversion, or this node is the source model.\n\t\t\tcontinue;\n\t\t}\n\n\t\tconversion[toModel] = wrapConversion(toModel, graph);\n\t}\n\n\treturn conversion;\n};\n\n",
    "'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n",
    "/* MIT license */\nvar colorNames = require('color-name');\nvar swizzle = require('simple-swizzle');\n\nvar reverseNames = {};\n\n// create a list of reverse color names\nfor (var name in colorNames) {\n\tif (colorNames.hasOwnProperty(name)) {\n\t\treverseNames[colorNames[name]] = name;\n\t}\n}\n\nvar cs = module.exports = {\n\tto: {},\n\tget: {}\n};\n\ncs.get = function (string) {\n\tvar prefix = string.substring(0, 3).toLowerCase();\n\tvar val;\n\tvar model;\n\tswitch (prefix) {\n\t\tcase 'hsl':\n\t\t\tval = cs.get.hsl(string);\n\t\t\tmodel = 'hsl';\n\t\t\tbreak;\n\t\tcase 'hwb':\n\t\t\tval = cs.get.hwb(string);\n\t\t\tmodel = 'hwb';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tval = cs.get.rgb(string);\n\t\t\tmodel = 'rgb';\n\t\t\tbreak;\n\t}\n\n\tif (!val) {\n\t\treturn null;\n\t}\n\n\treturn {model: model, value: val};\n};\n\ncs.get.rgb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar abbr = /^#([a-f0-9]{3,4})$/i;\n\tvar hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n\tvar rgba = /^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar keyword = /(\\D+)/;\n\n\tvar rgb = [0, 0, 0, 1];\n\tvar match;\n\tvar i;\n\tvar hexAlpha;\n\n\tif (match = string.match(hex)) {\n\t\thexAlpha = match[2];\n\t\tmatch = match[1];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\t// https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n\t\t\tvar i2 = i * 2;\n\t\t\trgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = Math.round((parseInt(hexAlpha, 16) / 255) * 100) / 100;\n\t\t}\n\t} else if (match = string.match(abbr)) {\n\t\tmatch = match[1];\n\t\thexAlpha = match[3];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i] + match[i], 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = Math.round((parseInt(hexAlpha + hexAlpha, 16) / 255) * 100) / 100;\n\t\t}\n\t} else if (match = string.match(rgba)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i + 1], 0);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\trgb[3] = parseFloat(match[4]);\n\t\t}\n\t} else if (match = string.match(per)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\trgb[3] = parseFloat(match[4]);\n\t\t}\n\t} else if (match = string.match(keyword)) {\n\t\tif (match[1] === 'transparent') {\n\t\t\treturn [0, 0, 0, 0];\n\t\t}\n\n\t\trgb = colorNames[match[1]];\n\n\t\tif (!rgb) {\n\t\t\treturn null;\n\t\t}\n\n\t\trgb[3] = 1;\n\n\t\treturn rgb;\n\t} else {\n\t\treturn null;\n\t}\n\n\tfor (i = 0; i < 3; i++) {\n\t\trgb[i] = clamp(rgb[i], 0, 255);\n\t}\n\trgb[3] = clamp(rgb[3], 0, 1);\n\n\treturn rgb;\n};\n\ncs.get.hsl = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hsl = /^hsla?\\(\\s*([+-]?(?:\\d*\\.)?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar match = string.match(hsl);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = (parseFloat(match[1]) + 360) % 360;\n\t\tvar s = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar l = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\n\t\treturn [h, s, l, a];\n\t}\n\n\treturn null;\n};\n\ncs.get.hwb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hwb = /^hwb\\(\\s*([+-]?\\d*[\\.]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar match = string.match(hwb);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar w = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar b = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\t\treturn [h, w, b, a];\n\t}\n\n\treturn null;\n};\n\ncs.to.hex = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn (\n\t\t'#' +\n\t\thexDouble(rgba[0]) +\n\t\thexDouble(rgba[1]) +\n\t\thexDouble(rgba[2]) +\n\t\t(rgba[3] < 1\n\t\t\t? (hexDouble(Math.round(rgba[3] * 255)))\n\t\t\t: '')\n\t);\n};\n\ncs.to.rgb = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')'\n\t\t: 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';\n};\n\ncs.to.rgb.percent = function () {\n\tvar rgba = swizzle(arguments);\n\n\tvar r = Math.round(rgba[0] / 255 * 100);\n\tvar g = Math.round(rgba[1] / 255 * 100);\n\tvar b = Math.round(rgba[2] / 255 * 100);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)'\n\t\t: 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';\n};\n\ncs.to.hsl = function () {\n\tvar hsla = swizzle(arguments);\n\treturn hsla.length < 4 || hsla[3] === 1\n\t\t? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)'\n\t\t: 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';\n};\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\ncs.to.hwb = function () {\n\tvar hwba = swizzle(arguments);\n\n\tvar a = '';\n\tif (hwba.length >= 4 && hwba[3] !== 1) {\n\t\ta = ', ' + hwba[3];\n\t}\n\n\treturn 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';\n};\n\ncs.to.keyword = function (rgb) {\n\treturn reverseNames[rgb.slice(0, 3)];\n};\n\n// helpers\nfunction clamp(num, min, max) {\n\treturn Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n\tvar str = num.toString(16).toUpperCase();\n\treturn (str.length < 2) ? '0' + str : str;\n}\n",
    "import * as base from './handlebars/base';\n\n// Each of these augment the Handlebars object. No need to setup here.\n// (This is done to easily share code between commonjs and browse envs)\nimport SafeString from './handlebars/safe-string';\nimport Exception from './handlebars/exception';\nimport * as Utils from './handlebars/utils';\nimport * as runtime from './handlebars/runtime';\n\nimport noConflict from './handlebars/no-conflict';\n\n// For compatibility and usage outside of module systems, make the Handlebars object a namespace\nfunction create() {\n  let hb = new base.HandlebarsEnvironment();\n\n  Utils.extend(hb, base);\n  hb.SafeString = SafeString;\n  hb.Exception = Exception;\n  hb.Utils = Utils;\n  hb.escapeExpression = Utils.escapeExpression;\n\n  hb.VM = runtime;\n  hb.template = function(spec) {\n    return runtime.template(spec, hb);\n  };\n\n  return hb;\n}\n\nlet inst = create();\ninst.create = create;\n\nnoConflict(inst);\n\ninst['default'] = inst;\n\nexport default inst;\n",
    "import {createFrame, extend, toString} from './utils';\nimport Exception from './exception';\nimport {registerDefaultHelpers} from './helpers';\nimport {registerDefaultDecorators} from './decorators';\nimport logger from './logger';\n\nexport const VERSION = '4.0.12';\nexport const COMPILER_REVISION = 7;\n\nexport const REVISION_CHANGES = {\n  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it\n  2: '== 1.0.0-rc.3',\n  3: '== 1.0.0-rc.4',\n  4: '== 1.x.x',\n  5: '== 2.0.0-alpha.x',\n  6: '>= 2.0.0-beta.1',\n  7: '>= 4.0.0'\n};\n\nconst objectType = '[object Object]';\n\nexport function HandlebarsEnvironment(helpers, partials, decorators) {\n  this.helpers = helpers || {};\n  this.partials = partials || {};\n  this.decorators = decorators || {};\n\n  registerDefaultHelpers(this);\n  registerDefaultDecorators(this);\n}\n\nHandlebarsEnvironment.prototype = {\n  constructor: HandlebarsEnvironment,\n\n  logger: logger,\n  log: logger.log,\n\n  registerHelper: function(name, fn) {\n    if (toString.call(name) === objectType) {\n      if (fn) { throw new Exception('Arg not supported with multiple helpers'); }\n      extend(this.helpers, name);\n    } else {\n      this.helpers[name] = fn;\n    }\n  },\n  unregisterHelper: function(name) {\n    delete this.helpers[name];\n  },\n\n  registerPartial: function(name, partial) {\n    if (toString.call(name) === objectType) {\n      extend(this.partials, name);\n    } else {\n      if (typeof partial === 'undefined') {\n        throw new Exception(`Attempting to register a partial called \"${name}\" as undefined`);\n      }\n      this.partials[name] = partial;\n    }\n  },\n  unregisterPartial: function(name) {\n    delete this.partials[name];\n  },\n\n  registerDecorator: function(name, fn) {\n    if (toString.call(name) === objectType) {\n      if (fn) { throw new Exception('Arg not supported with multiple decorators'); }\n      extend(this.decorators, name);\n    } else {\n      this.decorators[name] = fn;\n    }\n  },\n  unregisterDecorator: function(name) {\n    delete this.decorators[name];\n  }\n};\n\nexport let log = logger.log;\n\nexport {createFrame, logger};\n",
    "import registerInline from './decorators/inline';\n\nexport function registerDefaultDecorators(instance) {\n  registerInline(instance);\n}\n\n",
    "import {extend} from '../utils';\n\nexport default function(instance) {\n  instance.registerDecorator('inline', function(fn, props, container, options) {\n    let ret = fn;\n    if (!props.partials) {\n      props.partials = {};\n      ret = function(context, options) {\n        // Create a new partials stack frame prior to exec.\n        let original = container.partials;\n        container.partials = extend({}, original, props.partials);\n        let ret = fn(context, options);\n        container.partials = original;\n        return ret;\n      };\n    }\n\n    props.partials[options.args[0]] = options.fn;\n\n    return ret;\n  });\n}\n",
    "\nconst errorProps = ['description', 'fileName', 'lineNumber', 'message', 'name', 'number', 'stack'];\n\nfunction Exception(message, node) {\n  let loc = node && node.loc,\n      line,\n      column;\n  if (loc) {\n    line = loc.start.line;\n    column = loc.start.column;\n\n    message += ' - ' + line + ':' + column;\n  }\n\n  let tmp = Error.prototype.constructor.call(this, message);\n\n  // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.\n  for (let idx = 0; idx < errorProps.length; idx++) {\n    this[errorProps[idx]] = tmp[errorProps[idx]];\n  }\n\n  /* istanbul ignore else */\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, Exception);\n  }\n\n  try {\n    if (loc) {\n      this.lineNumber = line;\n\n      // Work around issue under safari where we can't directly set the column value\n      /* istanbul ignore next */\n      if (Object.defineProperty) {\n        Object.defineProperty(this, 'column', {\n          value: column,\n          enumerable: true\n        });\n      } else {\n        this.column = column;\n      }\n    }\n  } catch (nop) {\n    /* Ignore if the browser is very particular */\n  }\n}\n\nException.prototype = new Error();\n\nexport default Exception;\n",
    "import registerBlockHelperMissing from './helpers/block-helper-missing';\nimport registerEach from './helpers/each';\nimport registerHelperMissing from './helpers/helper-missing';\nimport registerIf from './helpers/if';\nimport registerLog from './helpers/log';\nimport registerLookup from './helpers/lookup';\nimport registerWith from './helpers/with';\n\nexport function registerDefaultHelpers(instance) {\n  registerBlockHelperMissing(instance);\n  registerEach(instance);\n  registerHelperMissing(instance);\n  registerIf(instance);\n  registerLog(instance);\n  registerLookup(instance);\n  registerWith(instance);\n}\n",
    "import {appendContextPath, createFrame, isArray} from '../utils';\n\nexport default function(instance) {\n  instance.registerHelper('blockHelperMissing', function(context, options) {\n    let inverse = options.inverse,\n        fn = options.fn;\n\n    if (context === true) {\n      return fn(this);\n    } else if (context === false || context == null) {\n      return inverse(this);\n    } else if (isArray(context)) {\n      if (context.length > 0) {\n        if (options.ids) {\n          options.ids = [options.name];\n        }\n\n        return instance.helpers.each(context, options);\n      } else {\n        return inverse(this);\n      }\n    } else {\n      if (options.data && options.ids) {\n        let data = createFrame(options.data);\n        data.contextPath = appendContextPath(options.data.contextPath, options.name);\n        options = {data: data};\n      }\n\n      return fn(context, options);\n    }\n  });\n}\n",
    "import {appendContextPath, blockParams, createFrame, isArray, isFunction} from '../utils';\nimport Exception from '../exception';\n\nexport default function(instance) {\n  instance.registerHelper('each', function(context, options) {\n    if (!options) {\n      throw new Exception('Must pass iterator to #each');\n    }\n\n    let fn = options.fn,\n        inverse = options.inverse,\n        i = 0,\n        ret = '',\n        data,\n        contextPath;\n\n    if (options.data && options.ids) {\n      contextPath = appendContextPath(options.data.contextPath, options.ids[0]) + '.';\n    }\n\n    if (isFunction(context)) { context = context.call(this); }\n\n    if (options.data) {\n      data = createFrame(options.data);\n    }\n\n    function execIteration(field, index, last) {\n      if (data) {\n        data.key = field;\n        data.index = index;\n        data.first = index === 0;\n        data.last = !!last;\n\n        if (contextPath) {\n          data.contextPath = contextPath + field;\n        }\n      }\n\n      ret = ret + fn(context[field], {\n        data: data,\n        blockParams: blockParams([context[field], field], [contextPath + field, null])\n      });\n    }\n\n    if (context && typeof context === 'object') {\n      if (isArray(context)) {\n        for (let j = context.length; i < j; i++) {\n          if (i in context) {\n            execIteration(i, i, i === context.length - 1);\n          }\n        }\n      } else {\n        let priorKey;\n\n        for (let key in context) {\n          if (context.hasOwnProperty(key)) {\n            // We're running the iterations one step out of sync so we can detect\n            // the last iteration without have to scan the object twice and create\n            // an itermediate keys array.\n            if (priorKey !== undefined) {\n              execIteration(priorKey, i - 1);\n            }\n            priorKey = key;\n            i++;\n          }\n        }\n        if (priorKey !== undefined) {\n          execIteration(priorKey, i - 1, true);\n        }\n      }\n    }\n\n    if (i === 0) {\n      ret = inverse(this);\n    }\n\n    return ret;\n  });\n}\n",
    "import Exception from '../exception';\n\nexport default function(instance) {\n  instance.registerHelper('helperMissing', function(/* [args, ]options */) {\n    if (arguments.length === 1) {\n      // A missing field in a {{foo}} construct.\n      return undefined;\n    } else {\n      // Someone is actually trying to call something, blow up.\n      throw new Exception('Missing helper: \"' + arguments[arguments.length - 1].name + '\"');\n    }\n  });\n}\n",
    "import {isEmpty, isFunction} from '../utils';\n\nexport default function(instance) {\n  instance.registerHelper('if', function(conditional, options) {\n    if (isFunction(conditional)) { conditional = conditional.call(this); }\n\n    // Default behavior is to render the positive path if the value is truthy and not empty.\n    // The `includeZero` option may be set to treat the condtional as purely not empty based on the\n    // behavior of isEmpty. Effectively this determines if 0 is handled by the positive path or negative.\n    if ((!options.hash.includeZero && !conditional) || isEmpty(conditional)) {\n      return options.inverse(this);\n    } else {\n      return options.fn(this);\n    }\n  });\n\n  instance.registerHelper('unless', function(conditional, options) {\n    return instance.helpers['if'].call(this, conditional, {fn: options.inverse, inverse: options.fn, hash: options.hash});\n  });\n}\n",
    "export default function(instance) {\n  instance.registerHelper('log', function(/* message, options */) {\n    let args = [undefined],\n        options = arguments[arguments.length - 1];\n    for (let i = 0; i < arguments.length - 1; i++) {\n      args.push(arguments[i]);\n    }\n\n    let level = 1;\n    if (options.hash.level != null) {\n      level = options.hash.level;\n    } else if (options.data && options.data.level != null) {\n      level = options.data.level;\n    }\n    args[0] = level;\n\n    instance.log(... args);\n  });\n}\n",
    "export default function(instance) {\n  instance.registerHelper('lookup', function(obj, field) {\n    return obj && obj[field];\n  });\n}\n",
    "import {appendContextPath, blockParams, createFrame, isEmpty, isFunction} from '../utils';\n\nexport default function(instance) {\n  instance.registerHelper('with', function(context, options) {\n    if (isFunction(context)) { context = context.call(this); }\n\n    let fn = options.fn;\n\n    if (!isEmpty(context)) {\n      let data = options.data;\n      if (options.data && options.ids) {\n        data = createFrame(options.data);\n        data.contextPath = appendContextPath(options.data.contextPath, options.ids[0]);\n      }\n\n      return fn(context, {\n        data: data,\n        blockParams: blockParams([context], [data && data.contextPath])\n      });\n    } else {\n      return options.inverse(this);\n    }\n  });\n}\n",
    "import {indexOf} from './utils';\n\nlet logger = {\n  methodMap: ['debug', 'info', 'warn', 'error'],\n  level: 'info',\n\n  // Maps a given level value to the `methodMap` indexes above.\n  lookupLevel: function(level) {\n    if (typeof level === 'string') {\n      let levelMap = indexOf(logger.methodMap, level.toLowerCase());\n      if (levelMap >= 0) {\n        level = levelMap;\n      } else {\n        level = parseInt(level, 10);\n      }\n    }\n\n    return level;\n  },\n\n  // Can be overridden in the host environment\n  log: function(level, ...message) {\n    level = logger.lookupLevel(level);\n\n    if (typeof console !== 'undefined' && logger.lookupLevel(logger.level) <= level) {\n      let method = logger.methodMap[level];\n      if (!console[method]) { // eslint-disable-line no-console\n        method = 'log';\n      }\n      console[method](...message); // eslint-disable-line no-console\n    }\n  }\n};\n\nexport default logger;\n",
    "/* global window */\nexport default function(Handlebars) {\n  /* istanbul ignore next */\n  let root = typeof global !== 'undefined' ? global : window,\n      $Handlebars = root.Handlebars;\n  /* istanbul ignore next */\n  Handlebars.noConflict = function() {\n    if (root.Handlebars === Handlebars) {\n      root.Handlebars = $Handlebars;\n    }\n    return Handlebars;\n  };\n}\n",
    "import * as Utils from './utils';\nimport Exception from './exception';\nimport { COMPILER_REVISION, REVISION_CHANGES, createFrame } from './base';\n\nexport function checkRevision(compilerInfo) {\n  const compilerRevision = compilerInfo && compilerInfo[0] || 1,\n        currentRevision = COMPILER_REVISION;\n\n  if (compilerRevision !== currentRevision) {\n    if (compilerRevision < currentRevision) {\n      const runtimeVersions = REVISION_CHANGES[currentRevision],\n            compilerVersions = REVISION_CHANGES[compilerRevision];\n      throw new Exception('Template was precompiled with an older version of Handlebars than the current runtime. ' +\n            'Please update your precompiler to a newer version (' + runtimeVersions + ') or downgrade your runtime to an older version (' + compilerVersions + ').');\n    } else {\n      // Use the embedded version info since the runtime doesn't know about this revision yet\n      throw new Exception('Template was precompiled with a newer version of Handlebars than the current runtime. ' +\n            'Please update your runtime to a newer version (' + compilerInfo[1] + ').');\n    }\n  }\n}\n\nexport function template(templateSpec, env) {\n  /* istanbul ignore next */\n  if (!env) {\n    throw new Exception('No environment passed to template');\n  }\n  if (!templateSpec || !templateSpec.main) {\n    throw new Exception('Unknown template object: ' + typeof templateSpec);\n  }\n\n  templateSpec.main.decorator = templateSpec.main_d;\n\n  // Note: Using env.VM references rather than local var references throughout this section to allow\n  // for external users to override these as psuedo-supported APIs.\n  env.VM.checkRevision(templateSpec.compiler);\n\n  function invokePartialWrapper(partial, context, options) {\n    if (options.hash) {\n      context = Utils.extend({}, context, options.hash);\n      if (options.ids) {\n        options.ids[0] = true;\n      }\n    }\n\n    partial = env.VM.resolvePartial.call(this, partial, context, options);\n    let result = env.VM.invokePartial.call(this, partial, context, options);\n\n    if (result == null && env.compile) {\n      options.partials[options.name] = env.compile(partial, templateSpec.compilerOptions, env);\n      result = options.partials[options.name](context, options);\n    }\n    if (result != null) {\n      if (options.indent) {\n        let lines = result.split('\\n');\n        for (let i = 0, l = lines.length; i < l; i++) {\n          if (!lines[i] && i + 1 === l) {\n            break;\n          }\n\n          lines[i] = options.indent + lines[i];\n        }\n        result = lines.join('\\n');\n      }\n      return result;\n    } else {\n      throw new Exception('The partial ' + options.name + ' could not be compiled when running in runtime-only mode');\n    }\n  }\n\n  // Just add water\n  let container = {\n    strict: function(obj, name) {\n      if (!(name in obj)) {\n        throw new Exception('\"' + name + '\" not defined in ' + obj);\n      }\n      return obj[name];\n    },\n    lookup: function(depths, name) {\n      const len = depths.length;\n      for (let i = 0; i < len; i++) {\n        if (depths[i] && depths[i][name] != null) {\n          return depths[i][name];\n        }\n      }\n    },\n    lambda: function(current, context) {\n      return typeof current === 'function' ? current.call(context) : current;\n    },\n\n    escapeExpression: Utils.escapeExpression,\n    invokePartial: invokePartialWrapper,\n\n    fn: function(i) {\n      let ret = templateSpec[i];\n      ret.decorator = templateSpec[i + '_d'];\n      return ret;\n    },\n\n    programs: [],\n    program: function(i, data, declaredBlockParams, blockParams, depths) {\n      let programWrapper = this.programs[i],\n          fn = this.fn(i);\n      if (data || depths || blockParams || declaredBlockParams) {\n        programWrapper = wrapProgram(this, i, fn, data, declaredBlockParams, blockParams, depths);\n      } else if (!programWrapper) {\n        programWrapper = this.programs[i] = wrapProgram(this, i, fn);\n      }\n      return programWrapper;\n    },\n\n    data: function(value, depth) {\n      while (value && depth--) {\n        value = value._parent;\n      }\n      return value;\n    },\n    merge: function(param, common) {\n      let obj = param || common;\n\n      if (param && common && (param !== common)) {\n        obj = Utils.extend({}, common, param);\n      }\n\n      return obj;\n    },\n    // An empty object to use as replacement for null-contexts\n    nullContext: Object.seal({}),\n\n    noop: env.VM.noop,\n    compilerInfo: templateSpec.compiler\n  };\n\n  function ret(context, options = {}) {\n    let data = options.data;\n\n    ret._setup(options);\n    if (!options.partial && templateSpec.useData) {\n      data = initData(context, data);\n    }\n    let depths,\n        blockParams = templateSpec.useBlockParams ? [] : undefined;\n    if (templateSpec.useDepths) {\n      if (options.depths) {\n        depths = context != options.depths[0] ? [context].concat(options.depths) : options.depths;\n      } else {\n        depths = [context];\n      }\n    }\n\n    function main(context/*, options*/) {\n      return '' + templateSpec.main(container, context, container.helpers, container.partials, data, blockParams, depths);\n    }\n    main = executeDecorators(templateSpec.main, main, container, options.depths || [], data, blockParams);\n    return main(context, options);\n  }\n  ret.isTop = true;\n\n  ret._setup = function(options) {\n    if (!options.partial) {\n      container.helpers = container.merge(options.helpers, env.helpers);\n\n      if (templateSpec.usePartial) {\n        container.partials = container.merge(options.partials, env.partials);\n      }\n      if (templateSpec.usePartial || templateSpec.useDecorators) {\n        container.decorators = container.merge(options.decorators, env.decorators);\n      }\n    } else {\n      container.helpers = options.helpers;\n      container.partials = options.partials;\n      container.decorators = options.decorators;\n    }\n  };\n\n  ret._child = function(i, data, blockParams, depths) {\n    if (templateSpec.useBlockParams && !blockParams) {\n      throw new Exception('must pass block params');\n    }\n    if (templateSpec.useDepths && !depths) {\n      throw new Exception('must pass parent depths');\n    }\n\n    return wrapProgram(container, i, templateSpec[i], data, 0, blockParams, depths);\n  };\n  return ret;\n}\n\nexport function wrapProgram(container, i, fn, data, declaredBlockParams, blockParams, depths) {\n  function prog(context, options = {}) {\n    let currentDepths = depths;\n    if (depths && context != depths[0] && !(context === container.nullContext && depths[0] === null)) {\n      currentDepths = [context].concat(depths);\n    }\n\n    return fn(container,\n        context,\n        container.helpers, container.partials,\n        options.data || data,\n        blockParams && [options.blockParams].concat(blockParams),\n        currentDepths);\n  }\n\n  prog = executeDecorators(fn, prog, container, depths, data, blockParams);\n\n  prog.program = i;\n  prog.depth = depths ? depths.length : 0;\n  prog.blockParams = declaredBlockParams || 0;\n  return prog;\n}\n\nexport function resolvePartial(partial, context, options) {\n  if (!partial) {\n    if (options.name === '@partial-block') {\n      partial = options.data['partial-block'];\n    } else {\n      partial = options.partials[options.name];\n    }\n  } else if (!partial.call && !options.name) {\n    // This is a dynamic partial that returned a string\n    options.name = partial;\n    partial = options.partials[partial];\n  }\n  return partial;\n}\n\nexport function invokePartial(partial, context, options) {\n  // Use the current closure context to save the partial-block if this partial\n  const currentPartialBlock = options.data && options.data['partial-block'];\n  options.partial = true;\n  if (options.ids) {\n    options.data.contextPath = options.ids[0] || options.data.contextPath;\n  }\n\n  let partialBlock;\n  if (options.fn && options.fn !== noop) {\n    options.data = createFrame(options.data);\n    // Wrapper function to get access to currentPartialBlock from the closure\n    let fn = options.fn;\n    partialBlock = options.data['partial-block'] = function partialBlockWrapper(context, options = {}) {\n\n      // Restore the partial-block from the closure for the execution of the block\n      // i.e. the part inside the block of the partial call.\n      options.data = createFrame(options.data);\n      options.data['partial-block'] = currentPartialBlock;\n      return fn(context, options);\n    };\n    if (fn.partials) {\n      options.partials = Utils.extend({}, options.partials, fn.partials);\n    }\n  }\n\n  if (partial === undefined && partialBlock) {\n    partial = partialBlock;\n  }\n\n  if (partial === undefined) {\n    throw new Exception('The partial ' + options.name + ' could not be found');\n  } else if (partial instanceof Function) {\n    return partial(context, options);\n  }\n}\n\nexport function noop() { return ''; }\n\nfunction initData(context, data) {\n  if (!data || !('root' in data)) {\n    data = data ? createFrame(data) : {};\n    data.root = context;\n  }\n  return data;\n}\n\nfunction executeDecorators(fn, prog, container, depths, data, blockParams) {\n  if (fn.decorator) {\n    let props = {};\n    prog = fn.decorator(prog, props, container, depths && depths[0], data, blockParams, depths);\n    Utils.extend(prog, props);\n  }\n  return prog;\n}\n",
    "// Build out our basic SafeString type\nfunction SafeString(string) {\n  this.string = string;\n}\n\nSafeString.prototype.toString = SafeString.prototype.toHTML = function() {\n  return '' + this.string;\n};\n\nexport default SafeString;\n",
    "const escape = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;',\n  '=': '&#x3D;'\n};\n\nconst badChars = /[&<>\"'`=]/g,\n      possible = /[&<>\"'`=]/;\n\nfunction escapeChar(chr) {\n  return escape[chr];\n}\n\nexport function extend(obj/* , ...source */) {\n  for (let i = 1; i < arguments.length; i++) {\n    for (let key in arguments[i]) {\n      if (Object.prototype.hasOwnProperty.call(arguments[i], key)) {\n        obj[key] = arguments[i][key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nexport let toString = Object.prototype.toString;\n\n// Sourced from lodash\n// https://github.com/bestiejs/lodash/blob/master/LICENSE.txt\n/* eslint-disable func-style */\nlet isFunction = function(value) {\n  return typeof value === 'function';\n};\n// fallback for older versions of Chrome and Safari\n/* istanbul ignore next */\nif (isFunction(/x/)) {\n  isFunction = function(value) {\n    return typeof value === 'function' && toString.call(value) === '[object Function]';\n  };\n}\nexport {isFunction};\n/* eslint-enable func-style */\n\n/* istanbul ignore next */\nexport const isArray = Array.isArray || function(value) {\n  return (value && typeof value === 'object') ? toString.call(value) === '[object Array]' : false;\n};\n\n// Older IE versions do not directly support indexOf so we must implement our own, sadly.\nexport function indexOf(array, value) {\n  for (let i = 0, len = array.length; i < len; i++) {\n    if (array[i] === value) {\n      return i;\n    }\n  }\n  return -1;\n}\n\n\nexport function escapeExpression(string) {\n  if (typeof string !== 'string') {\n    // don't escape SafeStrings, since they're already safe\n    if (string && string.toHTML) {\n      return string.toHTML();\n    } else if (string == null) {\n      return '';\n    } else if (!string) {\n      return string + '';\n    }\n\n    // Force a string conversion as this will be done by the append regardless and\n    // the regex test will do this transparently behind the scenes, causing issues if\n    // an object's to string has escaped characters in it.\n    string = '' + string;\n  }\n\n  if (!possible.test(string)) { return string; }\n  return string.replace(badChars, escapeChar);\n}\n\nexport function isEmpty(value) {\n  if (!value && value !== 0) {\n    return true;\n  } else if (isArray(value) && value.length === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport function createFrame(object) {\n  let frame = extend({}, object);\n  frame._parent = object;\n  return frame;\n}\n\nexport function blockParams(params, ids) {\n  params.path = ids;\n  return params;\n}\n\nexport function appendContextPath(contextPath, id) {\n  return (contextPath ? contextPath + '.' : '') + id;\n}\n",
    "// Create a simple path alias to allow browserify to resolve\n// the runtime on a supported path.\nmodule.exports = require('./dist/cjs/handlebars.runtime')['default'];\n",
    "'use strict';\n\nvar isArrayish = require('is-arrayish');\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\nvar swizzle = module.exports = function swizzle(args) {\n\tvar results = [];\n\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (isArrayish(arg)) {\n\t\t\t// http://jsperf.com/javascript-array-concat-vs-push/98\n\t\t\tresults = concat.call(results, slice.call(arg));\n\t\t} else {\n\t\t\tresults.push(arg);\n\t\t}\n\t}\n\n\treturn results;\n};\n\nswizzle.wrap = function (fn) {\n\treturn function () {\n\t\treturn fn(swizzle(arguments));\n\t};\n};\n",
    "module.exports = function isArrayish(obj) {\n\tif (!obj || typeof obj === 'string') {\n\t\treturn false;\n\t}\n\n\treturn obj instanceof Array || Array.isArray(obj) ||\n\t\t(obj.length >= 0 && (obj.splice instanceof Function ||\n\t\t\t(Object.getOwnPropertyDescriptor(obj, (obj.length - 1)) && obj.constructor.name !== 'String')));\n};\n",
    "\"use strict\";\n/**\n * @module app/App\n */\n\"use strict\";\n\nconsole.info(`Portfolio App started GIT:${GIT_REV}`);\n\n// if (!DEBUG) {\n// \twindow.addEventListener(\"error\", function(ev) {\n// \t\tconsole.error(\"Uncaught Error\", ev);\n// \t});\n// }\n\n/*\nvar features = [\n\t'default-3.4',\n\t// 'Date.now',\n\t// 'Element.prototype.classList',\n\t// 'Element.prototype.matches',\n\t// 'Event.hashchange',\n\t// 'Function.prototype.bind',\n\t'IntersectionObserver',\n\t'IntersectionObserverEntry',\n\t'Math.sign',\n\t'MutationObserver',\n\t// 'Object.create',\n\t// 'Object.defineProperties',\n\t// 'Object.defineProperty',\n\t// 'Object.keys',\n\t'Promise',\n\t'Promise.prototype.finally',\n\t'devicePixelRatio',\n\t'document.head',\n\t// 'document.querySelector',\n\t// 'document.visibilityState',\n\t'getComputedStyle',\n\t'matchMedia',\n\t// 'requestAnimationFrame',\n\t'setImmediate',\n];\n\nif (features.length) {\n  var s = document.createElement('script');\n  s.src = 'https://cdn.polyfill.io/v2/polyfill.min.js?features='+features.join(',')+'&callback=main';\n  s.async = true;\n  document.head.appendChild(s);\n} else {\n\tmain();\n}\nfunction main() {\n\tconsole.log('Now to do the cool stuff...');\n}\n\nif (DEBUG) {\n\trequire(\"Modernizr\");\n}\nrequire(\"setimmediate\");\nrequire(\"es6-promise/auto\");\nrequire(\"classlist-polyfill\");\nrequire(\"raf-polyfill\");\nrequire(\"matches-polyfill\");\nrequire(\"fullscreen-polyfill\");\nrequire(\"math-sign-polyfill\");\nrequire(\"mutation-observer\");\n// require(\"path2d-polyfill\");\n*/\n\nrequire(\"backbone\").$ = require(\"backbone.native\");\nrequire(\"backbone.babysitter\");\nrequire(\"Backbone.Mutators\");\nrequire(\"hammerjs\");\n\n// document.addEventListener('DOMContentLoaded', function(ev) {\n// \tconsole.log(\"%s:[event %s]\", ev.target, ev.type);\n// });\n\nwindow.addEventListener(\"load\", function(ev) {\n\tconsole.log(\"%s:[event %s]\", ev.target, ev.type);\n\n\t// process bootstrap data, let errors go up the stack\n\ttry {\n\t\trequire(\"app/model/helper/bootstrap\")(window.bootstrap);\n\t} catch (err) {\n\t\tvar el = document.querySelector(\".app\");\n\t\tel.classList.remove(\"app-initial\");\n\t\tel.classList.add(\"app-error\");\n\t\tthrow new Error(\"bootstrap data error (\" + err.message + \")\", err.fileName, err.lineNumber);\n\t} finally { // detele global var\n\t\tdelete window.bootstrap;\n\t}\n\n\trequire(\"app/view/template/_helpers\");\n\n\t/** @type {module:app/view/helper/createColorStyleSheet} */\n\trequire(\"app/view/helper/createColorStyleSheet\").call(); /** @type {module:app/view/AppView} */\n\tvar AppView = require(\"app/view/AppView\");\n\t// var startApp = AppView.getInstance.bind(AppView);\n\n\t/** @type {module:webfontloader} */\n\tvar WebFont = require(\"webfontloader\");\n\tvar loadOpts = {\n\t\tasync: false,\n\t\tgroupName: \"\",\n\t\tclasses: false,\n\t\tloading: function() {\n\t\t\tconsole.log(\"WebFont:%s:loading\", this.groupName);\n\t\t},\n\t\tactive: function() {\n\t\t\tconsole.info(\"WebFont:%s:active\", this.groupName);\n\t\t},\n\t\tinactive: function() {\n\t\t\tconsole.warn(\"WebFont:%s:inactive\", this.groupName);\n\t\t},\n\t\tfontactive: function(familyName, variantFvd) {\n\t\t\tconsole.info(\"WebFont:%s:fontactive '%s' (%s)\", this.groupName, familyName, variantFvd);\n\t\t},\n\t\tfontinactive: function(familyName, variantFvd) {\n\t\t\tconsole.warn(\"WebFont:%s:fontinactive '%s' (%s)\", this.groupName, familyName, variantFvd);\n\t\t},\n\t\t// fontloading: function(familyName, variantDesc) {\n\t\t// \tconsole.log(\"WebFont::fontloading\", familyName, JSON.stringify(variantDesc, null, \" \"));\n\t\t// },\n\t};\n\n\tWebFont.load(_.defaults({\n\t\tasync: false,\n\t\tgroupName: \"required\",\n\t\tcustom: {\n\t\t\tfamilies: [\n\t\t\t\t\"FranklinGothicFS:n4,n6\",\n\t\t\t\t// \"FranklinGothicFS:i4,i6\"\n\t\t\t\t\"FolioFigures:n4\",\n\t\t\t],\n\t\t\ttestStrings: {\n\t\t\t\t\"FolioFigures\": \"hms\"\n\t\t\t},\n\t\t},\n\t\tactive: () => AppView.getInstance(),\n\t\tinactive: () => AppView.getInstance(),\n\t}, loadOpts));\n\n\tWebFont.load(_.defaults({}, loadOpts));\n\n\t// requestAnimationFrame(function(tstamp) {\n\t// \tAppView.getInstance();\n\t// });\n});\n\n\n// if (DEBUG) {\n// /** @type {module:underscore} */\n// var _ = require(\"underscore\");\n\n// var isFF = /Firefox/.test(window.navigator.userAgent);\n// var isIOS = /iPad|iPhone/.test(window.navigator.userAgent);\n/*\nif (/Firefox/.test(window.navigator.userAgent)) {\n\tconsole.prefix = \"# \";\n\tvar shift = [].shift;\n\tvar logWrapFn = function() {\n\t\tif (typeof arguments[1] == \"string\") arguments[1] = console.prefix + arguments[1];\n\t\treturn shift.apply(arguments).apply(console, arguments);\n\t};\n\tconsole.group = _.wrap(console.group, logWrapFn);\n\tconsole.log = _.wrap(console.log, logWrapFn);\n\tconsole.info = _.wrap(console.info, logWrapFn);\n\tconsole.warn = _.wrap(console.warn, logWrapFn);\n\tconsole.error = _.wrap(console.error, logWrapFn);\n}\n*/\n/*\nvar saveLogs = function() {\n\tvar logWrapFn = function(name, fn, msg) {\n\t\tdocument.documentElement.appendChild(\n\t\t\tdocument.createComment(\"[\" + name + \"] \" + msg));\n\t};\n\tconsole.group = _.wrap(console.group, _.partial(logWrapFn, \"group\"));\n\tconsole.log = _.wrap(console.log, _.partial(logWrapFn, \"log\"));\n\tconsole.info = _.wrap(console.info, _.partial(logWrapFn, \"info\"));\n\tconsole.warn = _.wrap(console.warn, _.partial(logWrapFn, \"warn\"));\n\tconsole.error = _.wrap(console.error, _.partial(logWrapFn, \"error\"));\n};\n*/\n\n// handle error events on some platforms and production\n/*\nif (isIOS) {\n\t// saveLogs();\n\twindow.addEventListener(\"error\", function() {\n\t\tvar args = Array.prototype.slice.apply(arguments),\n\t\t\tel = document.createElement(\"div\"),\n\t\t\thtml = \"\";\n\t\t_.extend(el.style, {\n\t\t\tfontfamily: \"monospace\",\n\t\t\tdisplay: \"block\",\n\t\t\tposition: \"absolute\",\n\t\t\tzIndex: \"999\",\n\t\t\tbackgroundColor: \"white\",\n\t\t\tcolor: \"black\",\n\t\t\twidth: \"calc(100% - 3em)\",\n\t\t\tbottom: \"0\",\n\t\t\tmargin: \"1em 1.5em\",\n\t\t\tpadding: \"1em 1.5em\",\n\t\t\toutline: \"0.5em solid red\",\n\t\t\toutlineOffset: \"0.5em\",\n\t\t\tboxSizing: \"border-box\",\n\t\t\toverflow: \"hidden\",\n\t\t});\n\t\thtml += \"<pre><b>location:<b> \" + window.location + \"</pre>\";\n\t\thtml += \"<pre><b>event:<b> \" + JSON.stringify(args.shift(), null, \" \") + \"</pre>\";\n\t\tif (args.length) html += \"<pre><b>rest:<b> \" + JSON.stringify(args, null, \" \") + \"</pre>\";\n\t\tel.innerHTML = html;\n\t\tdocument.body.appendChild(el);\n\t});\n}*/\n// }\n",
    "/**\n * @module app/control/Controller\n */\n\n/** @type {module:backbone} */\nconst Backbone = require(\"backbone\");\n\n// /** @type {module:app/model/collection/TypeCollection} */\n// var types = require(\"app/model/collection/TypeCollection\");\n// /** @type {module:app/model/collection/KeywordCollection} */\n// var keywords = require(\"app/model/collection/KeywordCollection\");\n/** @type {module:app/model/collection/ArticleCollection} */\nconst articles = require(\"app/model/collection/ArticleCollection\");\n/** @type {module:app/model/collection/BundleCollection} */\nconst bundles = require(\"app/model/collection/BundleCollection\");\n\n/* --------------------------- *\n/* Static private\n/* --------------------------- */\n\n/**\n/* @constructor\n/* @type {module:app/control/Controller}\n/*/\nvar Controller = Backbone.Router.extend({\n\n\t// /** @override */\n\t// routes: {},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tif (DEBUG) {\n\t\t\tthis._routeNames = [];\n\t\t\tthis.route = function(route, name, callback) {\n\t\t\t\tthis._routeNames.push(_.isString(name) ? name : '');\n\t\t\t\treturn Backbone.Router.prototype.route.apply(this, arguments);\n\t\t\t};\n\t\t\tthis.on(\"route\", function(routeName, args) {\n\t\t\t\tconsole.log(\"controller:[route] %s [%s]\", routeName, args.join());\n\t\t\t});\n\t\t}\n\n\t\t/*\n\t\t * Prefixed article regexp: /^article(?:\\/([^\\/]+))\\/?$/\n\t\t * Single bundle regexp: /^bundles(?:\\/([^\\/]+)(?:\\/(\\d+))?)?\\/?$/\n\t\t */\n\t\tthis.route(/(.*)/,\n\t\t\t\"notfound\", this.toNotFound);\n\t\tthis.route(/^([a-z][a-z0-9\\-]*)\\/?$/,\n\t\t\t\"article-item\", this.toArticleItem);\n\t\tthis.route(/^(?:bundles)?\\/?$/,\n\t\t\t\"root\", this.toRoot);\n\t\t// this.route(/^bundles\\/?$/,\n\t\t// \t\"bundle-list\", this.toBundleList);\n\n\t\t// this.route(/^bundles\\/([^\\/]+)\\/?$/,\n\t\t// \t\"bundle-item\", this.toBundleItem);\n\t\t// this.route(/^bundles\\/([^\\/]+)\\/(\\d+)\\/?$/,\n\t\t// \t\"media-item\", this.toMediaItem);\n\n\t\t// this.route(/^bundles(?:\\/([^\\/]+)(?:\\/(\\d+))?)?\\/?$/,\n\t\t// \t\"media-item\", this.toMediaItem);\n\n\t\tthis.route(/^bundles\\/([^\\/]+)(?:\\/(\\d+)?)?\\/?$/,\n\t\t\t\"media-item\", this.toMediaItem);\n\n\t\tif (DEBUG) {\n\t\t\tconsole.log(\"%s::initialize routes: %o\", \"controller\", this._routeNames);\n\t\t}\n\t},\n\n\n\n\t/* ---------------------------\n\t/* JS to URL: public command methods\n\t/* --------------------------- */\n\n\tselectMedia: function(media) {\n\t\tthis._goToLocation(media.get(\"bundle\"), media);\n\t},\n\n\tselectBundle: function(bundle) {\n\t\tif (bundle.attr(\"@no-desc\")) {\n\t\t\tthis._goToLocation(bundle,\n\t\t\t\tbundle.get(\"media\").at(0), {\n\t\t\t\t\treplace: true,\n\t\t\t\t\ttrigger: true\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tthis._goToLocation(bundle);\n\t\t}\n\t},\n\n\tdeselectMedia: function() {\n\t\tthis._goToLocation(bundles.selected);\n\t},\n\n\tdeselectBundle: function() {\n\t\tthis._goToLocation();\n\t},\n\n\tselectArticle: function(article) {\n\t\tthis.navigate(article.get(\"handle\"), { trigger: true });\n\t},\n\n\tdeselectArticle: function() {\n\t\tthis.navigate(\"\", { trigger: true });\n\t},\n\n\t/* ---------------------------\n\t/* JS to URL: private helpers\n\t/* --------------------------- */\n\n\t/** Update location when navigation happens internally */\n\t/*_updateLocation: function() {\n\t\tvar bundle, media;\n\t\tbundle = bundles.selected;\n\t\tif (bundle) {\n\t\t\tmedia = bundle.get(\"media\").selected;\n\t\t}\n\t\tthis.navigate(this._getLocation(bundle, media), {\n\t\t\ttrigger: false\n\t\t});\n\t},*/\n\n\t_getLocation: function(bundle, media) {\n\t\tvar mediaIndex, location = [];\n\t\tif (bundle) {\n\t\t\tlocation.push(\"bundles\");\n\t\t\tlocation.push(bundle.get(\"handle\"));\n\t\t\tif (media) {\n\t\t\t\tmediaIndex = bundle.get(\"media\").indexOf(media);\n\t\t\t\tif (mediaIndex >= 0) {\n\t\t\t\t\tlocation.push(mediaIndex);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// location.push(\"\");\n\t\treturn location.join(\"/\");\n\t},\n\n\t_goToLocation: function(bundle, media, opts) {\n\t\tthis.navigate(\n\t\t\tthis._getLocation(bundle, media),\n\t\t\t_.defaults(opts || {}, {\n\t\t\t\ttrigger: true\n\t\t\t})\n\t\t);\n\t},\n\n\t/* --------------------------- *\n\t * URL to JS: router handlers\n\t * --------------------------- */\n\n\ttoRoot: function() {\n\t\tthis.trigger(\"change:before\");\n\t\tif (bundles.selected) {\n\t\t\t// bundles.selected.get(\"media\").deselect();\n\t\t\tbundles.deselect();\n\t\t}\n\t\t// keywords.deselect();\n\t\tarticles.deselect();\n\t\tthis.trigger(\"change:after\");\n\t},\n\n\ttoNotFound: function(slug) {\n\t\tconsole.info(\"route:[*:%s]\", slug);\n\t},\n\n\t// toBundleList: function() {\n\t// \tthis.navigate(\"\", {\n\t// \t\ttrigger: true,\n\t// \t\treplace: true\n\t// \t});\n\t// },\n\n\ttoBundleItem: function(bundleHandle) {\n\t\tlet bundle = bundles.findWhere({ handle: bundleHandle });\n\t\tif (!bundle) {\n\t\t\tthrow new Error(`No bundle found with handle '${bundleHandle}'`);\n\t\t\t// } else if (bundle.attr(\"@no-desc\")) {\n\t\t\t// this._changeSelection(bundle, bundle.get(\"media\").at(0));\n\t\t\t// this.navigate(this._getLocation(bundle, bundle.get(\"media\").at(0)), { trigger: true, replace: false });\n\t\t}\n\t\tthis._changeSelection(bundle);\n\t},\n\n\ttoMediaItem: function(bundleHandle, mediaIndex) {\n\t\tlet bundle = bundles.findWhere({ handle: bundleHandle });\n\t\tif (!bundle) {\n\t\t\tthrow new Error(`No bundle found with handle '${bundleHandle}'`);\n\t\t}\n\t\tlet media = bundle.get(\"media\").at(mediaIndex ? mediaIndex : 0);\n\t\tif (!media) {\n\t\t\tthrow new Error(`No media found at index ${mediaIndex} in bundle '${bundleHandle}'`);\n\t\t}\n\t\tthis._changeSelection(bundle, media);\n\t},\n\n\ttoArticleItem: function(articleHandle) {\n\t\tlet article = articles.findWhere({ handle: articleHandle });\n\t\tif (!article) {\n\t\t\tthrow new Error(`No article found with handle '${articleHandle}'`);\n\t\t}\n\t\tthis.trigger(\"change:before\", article);\n\t\tbundles.deselect();\n\t\tarticles.select(article);\n\t\tthis.trigger(\"change:after\", article);\n\t},\n\n\t/* -------------------------------\n\t/* URL to JS: private helpers\n\t/* ------------------------------- */\n\n\t/*\n\t/* NOTE: Selection order\n\t/* - Apply media selection to *incoming bundle*, as not to trigger\n\t/*\tunneccesary events on an outgoing bundle. Outgoing bundle media selection\n\t/*\tremains untouched.\n\t/* - Apply media selection *before* selecting the incoming bundle. Views\n\t/*\tnormally listen to the selected bundle only, so if the bundle is changing,\n\t/*\tthey will not be listening to media selection changes yet.\n\t/*/\n\t_changeSelection: function(bundle, media) {\n\t\tvar lastBundle, lastMedia;\n\t\tif (bundle === void 0) bundle = null;\n\t\tif (media === void 0) media = null;\n\n\t\t// if (bundle !== null && media === null && bundle.attr(\"@no-desc\")) {\n\t\t// \tmedia = bundle.get(\"media\").at(0);\n\t\t// \tthis._goToLocation(bundle, media);\n\t\t// \treturn;\n\t\t// }\n\n\t\tlastBundle = bundles.selected;\n\t\tlastMedia = lastBundle ? lastBundle.get(\"media\").selected : null;\n\t\tconsole.log(\"controller::_changeSelection bundle:[%s -> %s] media:[%s -> %s]\",\n\t\t\t(lastBundle ? lastBundle.cid : lastBundle),\n\t\t\t(bundle ? bundle.cid : bundle),\n\t\t\t(lastMedia ? lastMedia.cid : lastMedia),\n\t\t\t(media ? media.cid : media)\n\t\t);\n\n\t\tif (!articles.selected\n\t\t\t&& (lastBundle === bundle)\n\t\t\t&& (lastMedia === media)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.trigger(\"change:before\", bundle, media);\n\t\tbundle && bundle.get(\"media\").select(media);\n\t\tbundles.select(bundle);\n\t\tarticles.deselect();\n\t\tthis.trigger(\"change:after\", bundle, media);\n\t},\n});\n\n\nmodule.exports = new Controller();\n",
    "/**\n * @module app/control/Globals\n */\n\nmodule.exports = (function() {\n\t// reusable vars\n\tvar o, s, so;\n\t// global hash\n\tvar g = {};\n\t// SASS <--> JS shared hash\n\tvar sass = require(\"../../../sass/variables.json\");\n\n\t// JUNK FIRST: Some app-wide defaults\n\t// - - - - - - - - - - - - - - - - -\n\tg.VPAN_DRAG = 0.95; // as factor of pointer delta\n\tg.HPAN_OUT_DRAG = 0.4; // factor\n\tg.VPAN_OUT_DRAG = 0.1; // factor\n\tg.PAN_THRESHOLD = 15; // px\n\tg.COLLAPSE_THRESHOLD = 75; // px\n\tg.COLLAPSE_OFFSET = parseInt(sass.temp[\"collapse_offset\"]);\n\t// g.CLICK_EVENT = \"click\"; //window.hasOwnProperty(\"onpointerup\") ? \"pointerup\" : \"mouseup\";\n\tg.VIDEO_CROP_PX = parseInt(sass[\"video_crop_px\"]);\n\n\t// breakpoints\n\t// - - - - - - - - - - - - - - - - -\n\tg.BREAKPOINTS = {};\n\tfor (s in sass.breakpoints) {\n\t\to = sass.breakpoints[s];\n\t\t/*if (Array.isArray(o)) {\n\t\t\tg.BREAKPOINTS[s] = Object.defineProperties({}, {\n\t\t\t\t\"matches\": {\n\t\t\t\t\tget: _.partial(_.some, o.map(window.matchMedia), _.property(\"matches\"))\n\t\t\t\t},\n\t\t\t\t\"media\": {\n\t\t\t\t\tvalue: o.join(\", \")\n\t\t\t\t},\n\t\t\t\t\"queries\": {\n\t\t\t\t\tvalue: o.map(window.matchMedia)\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tg.BREAKPOINTS[s] = window.matchMedia(o);\n\t\t}*/\n\t\to = Array.isArray(o) ? o.join(\", \") : o;\n\t\to = o.replace(/[\\'\\\"]/g, \"\");\n\t\to = window.matchMedia(o);\n\t\to.className = s;\n\t\tg.BREAKPOINTS[s] = o;\n\t}\n\tif (DEBUG) {\n\t\tconsole.groupCollapsed(\"Breakpoints\");\n\t\tfor (s in g.BREAKPOINTS) {\n\t\t\tconsole.log(\"%s: %o\", s, g.BREAKPOINTS[s].media);\n\t\t}\n\t\tconsole.groupEnd();\n\t}\n\n\t// base colors, dimensions\n\t// - - - - - - - - - - - - - - - - -\n\tg.DEFAULT_COLORS = _.clone(sass.default_colors);\n\t// g.HORIZONTAL_STEP = parseFloat(sass.units[\"hu_px\"]);\n\t// g.VERTICAL_STEP = parseFloat(sass.units[\"vu_px\"]);\n\n\n\t// paths, networking\n\t// - - - - - - - - - - - - - - - - -\n\t// var toAbsoluteURL = (function() {\n\t// \tvar a = null;\n\t// \treturn function(url) {\n\t// \t\ta = a || document.createElement('a');\n\t// \t\ta.href = url;\n\t// \t\treturn a.href;\n\t// \t};\n\t// })();\n\t// g.APP_ROOT = toAbsoluteURL(window.approot);\n\t// g.MEDIA_DIR = toAbsoluteURL(window.mediadir);\n\n\tg.APP_ROOT = window.approot;\n\tg.MEDIA_DIR = window.mediadir;\n\n\tdelete window.approot;\n\tdelete window.mediadir;\n\n\t// hardcoded font data\n\t// - - - - - - - - - - - - - - - - -\n\tg.FONT_METRICS = {\n\t\t\"FranklinGothicFS\": {\n\t\t\t\"unitsPerEm\": 1000,\n\t\t\t\"ascent\": 827,\n\t\t\t\"descent\": -173\n\t\t},\n\t\t\"ITCFranklinGothicStd\": {\n\t\t\t\"unitsPerEm\": 1000,\n\t\t\t\"ascent\": 686,\n\t\t\t\"descent\": -314\n\t\t},\n\t\t\"FolioFigures\": {\n\t\t\t\"unitsPerEm\": 1024,\n\t\t\t\"ascent\": 939,\n\t\t\t\"descent\": -256\n\t\t},\n\t};\n\n\tg.PAUSE_CHAR = String.fromCharCode(0x23F8);\n\tg.PLAY_CHAR = String.fromCharCode(0x23F5);\n\tg.STOP_CHAR = String.fromCharCode(0x23F9);\n\n\t// translate common template\n\tif (sass.transform_type == \"3d\") {\n\t\tg.TRANSLATE_TEMPLATE = function(x, y) {\n\t\t\treturn \"translate3d(\" + x + \"px, \" + y + \"px, 0px)\";\n\t\t};\n\t} else {\n\t\tg.TRANSLATE_TEMPLATE = function(x, y) {\n\t\t\treturn \"translate(\" + x + \"px, \" + y + \"px)\";\n\t\t};\n\t}\n\n\tg.TRANSLATE_TEMPLATE = function(x, y) {\n\t\treturn \"translate(\" + x + \"px, \" + y + \"px)\";\n\t\t// return \"translate3d(\" + x + \"px, \" + y + \"px ,0px)\";\n\t};\n\t// timing, easing\n\t// - - - - - - - - - - - - - - - - -\n\tvar ease = g.TRANSITION_EASE = sass.transitions[\"ease\"];\n\tvar duration = g.TRANSITION_DURATION = parseFloat(sass.transitions[\"duration_ms\"]);\n\tvar delayInterval = g.TRANSITION_DELAY_INTERVAL = parseFloat(sass.transitions[\"delay_interval_ms\"]);\n\tvar minDelay = g.TRANSITION_MIN_DELAY = parseFloat(sass.transitions[\"min_delay_ms\"]);\n\tvar delay = g.TRANSITION_DELAY = g.TRANSITION_DURATION + g.TRANSITION_DELAY_INTERVAL;\n\n\t// css transitions\n\t// - - - - - - - - - - - - - - - - -\n\to = {};\n\n\t// match tx() in _transitions.scss\n\t// - - - - - - - - - - - - - - - - -\n\to.tx = function tx(durationCount, delayCount, easeVal) {\n\t\t_.isNumber(durationCount) || (durationCount = 1);\n\t\t_.isNumber(delayCount) || (delayCount = -1);\n\t\t_.isString(easeVal) || (easeVal = ease);\n\n\t\tvar o = {};\n\t\tif (delayCount < 0) {\n\t\t\to.duration = (duration * durationCount) +\n\t\t\t\t(delayInterval * (durationCount - 1));\n\t\t\to.delay = 0;\n\t\t} else {\n\t\t\to.duration = (duration * durationCount) +\n\t\t\t\t(delayInterval * (durationCount - 1)) - minDelay;\n\t\t\to.delay = (delay * delayCount) - minDelay;\n\t\t}\n\t\to.easeing = easeVal;\n\t\treturn 0;\n\t}\n\n\t// transition presets\n\t// TODO: get rid of this\n\t// - - - - - - - - - - - - - - - - -\n\n\to.NONE = {\n\t\tdelay: 0,\n\t\tduration: 0,\n\t\teasing: \"step-start\"\n\t};\n\to.NOW = {\n\t\tdelay: 0,\n\t\tduration: duration,\n\t\teasing: ease\n\t};\n\to.UNSET = _.defaults({\n\t\tcssText: \"\"\n\t}, o.NONE);\n\n\tvar txAligned = _.defaults({\n\t\tduration: duration - minDelay\n\t}, o.NOW);\n\to.FIRST = _.defaults({\n\t\tdelay: delay * 0.0 + minDelay\n\t}, txAligned);\n\to.BETWEEN = _.defaults({\n\t\tdelay: delay * 1.0 + minDelay\n\t}, txAligned);\n\to.LAST = _.defaults({\n\t\tdelay: delay * 2.0 + minDelay\n\t}, txAligned);\n\to.AFTER = _.defaults({\n\t\tdelay: delay * 2.0 + minDelay\n\t}, txAligned);\n\n\to.BETWEEN_EARLY = _.defaults({\n\t\tdelay: delay * 1.0 + minDelay - 60\n\t}, txAligned);\n\to.BETWEEN_LATE = _.defaults({\n\t\tdelay: delay * 1.0 + minDelay + 60\n\t}, txAligned);\n\n\to.FIRST_LATE = _.defaults({\n\t\tdelay: delay * 0.5 + minDelay\n\t}, txAligned);\n\to.LAST_EARLY = _.defaults({\n\t\tdelay: delay * 1.5 + minDelay\n\t}, txAligned);\n\t// o.FIRST_LATE = \t\t_.defaults({delay: txDelay*0.0 + txMinDelay*2}, txAligned);\n\t// o.LAST_EARLY = \t\t_.defaults({delay: txDelay*2.0 + txMinDelay*0}, txAligned);\n\t// o.AFTER = \t\t\t_.defaults({delay: txDelay*2.0 + txMinDelay}, txAligned);\n\n\tconsole.groupCollapsed(\"Transitions\");\n\tfor (s in o) {\n\t\tif (!_.isFunction(o[s])) {\n\t\t\tso = o[s];\n\t\t\tso.name = s;\n\t\t\tso.className = \"tx-\" + s.replace(\"_\", \"-\").toLowerCase();\n\t\t\tif (!so.hasOwnProperty(\"cssText\")) {\n\t\t\t\tso.cssText = so.duration / 1000 + \"s \" + so.easing + \" \" + so.delay / 1000 + \"s\";\n\t\t\t}\n\t\t\tconsole.log(\"%s: %s\", so.name, so.cssText);\n\t\t}\n\t}\n\tconsole.groupEnd();\n\tg.transitions = o;\n\n\treturn g;\n}());\n",
    "/**\n * @module app/model/BaseItem\n * @requires module:backbone\n */\n/** @type {module:backbone} */\nconst BaseModel = require(\"backbone\").Model;\n// /** @type {module:app/model/BaseModel} */\n// var BaseModel = require(\"app/model/BaseModel\");\n\n// /** @type {module:utils/strings/stripTags} */\n// const stripTags = require(\"utils/strings/stripTags\");\n// /** @type {module:app/control/Globals} */\n// const Globals = require(\"app/control/Globals\");\n\nmodule.exports = BaseModel.extend({\n\n\tdefaults: {\n\t\trouteName: \"initial\",\n\t\tfromRouteName: \"\",\n\t\tpage: \"\",\n\t\tarticle: null,\n\t\tbundle: null,\n\t\tmedia: null,\n\t\twithArticle: false,\n\t\twithBundle: false,\n\t\twithMedia: false,\n\t\tcollapsed: false\n\t},\n\n\tgetters: [\n\t\t\"page\",\n\t\t\"routeName\",\n\t\t\"fromRouteName\",\n\t\t\"article\",\n\t\t\"bundle\",\n\t\t\"media\",\n\t\t\"withArticle\",\n\t\t\"withBundle\",\n\t\t\"withMedia\",\n\t\t\"collapsed\"\n\t],\n\n\t// mutators: {\n\t// \trouteName: {\n\t// \t\tset: function(key, value, opts, set) {\n\t// \t\t\t// Set fromRoute to avoid losing current \"changing\" state\n\t// \t\t\tthis._previousAttributes[\"fromRouteName\"] = this.attributes[\"fromRouteName\"];\n\t// \t\t\tthis.changed[\"fromRouteName\"] = this.attributes[\"fromRouteName\"] = this.previous(\"routeName\");\n\t// \t\t\t// set(\"fromRouteName\", this.previous(\"routeName\"), {\n\t// \t\t\t// \tsilent: true\n\t// \t\t\t// });\n\t// \t\t}\n\t// \t}\n\t// },\n\n\tinitialize: function() {\n\t\t// this.listenTo(this, {\n\t\t// \t\"change:routeName\": function() {\n\t\t// \t\tthis.set(\"fromRouteName\", this.previous(\"routeName\"));\n\t\t// \t},\n\t\t// \t\"change:article\": function(val) {\n\t\t// \t\tconsole.log(\"%s:[change] %o\", this.cid, arguments);\n\t\t// \t\tthis.set(\"withArticle\", (typeof val === 'object'));\n\t\t// \t},\n\t\t// \t\"change:bundle\": function(val) {\n\t\t// \t\tconsole.log(\"%s:[change] %o\", this.cid, arguments);\n\t\t// \t\tthis.set(\"withBundle\", (typeof val === 'object'));\n\t\t// \t},\n\t\t// \t\"change:media\": function(val) {\n\t\t// \t\tconsole.log(\"%s:[change] %o\", this.cid, arguments);\n\t\t// \t\tthis.set(\"withMedia\", (typeof val === 'object'));\n\t\t// \t},\n\t\t// });\n\n\t\t// this.set({\n\t\t// \tfromRouteName: \"\",\n\t\t// \t\twithArticle: false,\n\t\t// \t\twithBundle: false,\n\t\t// \t\twithMedia: false\n\t\t// });\n\t\tvar opts = { silent: false };\n\n\t\tthis.listenTo(this, \"change\", function(attrs) {\n\t\t\t// var opts = { silent: false };\n\t\t\tif (this.hasChanged(\"routeName\")) {\n\t\t\t\tthis.set(\"fromRouteName\", this.previous(\"routeName\"), opts);\n\t\t\t}\n\t\t\tif (this.hasChanged(\"article\")) {\n\t\t\t\tthis.set(\"withArticle\", this.has(\"article\"), opts);\n\t\t\t}\n\t\t\tif (this.hasChanged(\"bundle\")) {\n\t\t\t\tthis.set(\"withBundle\", this.has(\"bundle\"), opts);\n\t\t\t}\n\t\t\tif (this.hasChanged(\"media\")) {\n\t\t\t\tthis.set(\"withMedia\", this.has(\"media\"), opts);\n\t\t\t}\n\t\t\t// this.set(\"pageTitle\", this._getDocumentTitle(), { silent: true });\n\t\t});\n\n\t\tthis.listenTo(this, \"change:routeName\",\n\t\t\tfunction(val) {\n\t\t\t\tconsole.log(\"%s:[change:routeName] %o\", this.cid, val);\n\t\t\t\t// this.set(\"fromRouteName\", this.previous(\"routeName\"));\n\t\t\t});\n\t\tthis.listenTo(this, \"change:article\",\n\t\t\tfunction(val) {\n\t\t\t\tconsole.log(\"%s:[change:article] %o\", this.cid, val);\n\t\t\t\t// this.set(\"withArticle\", _.isObject(val));\n\t\t\t});\n\t\tthis.listenTo(this, \"change:bundle\",\n\t\t\tfunction(val) {\n\t\t\t\tconsole.log(\"%s:[change:bundle] %o\", this.cid, val);\n\t\t\t\t// this.set(\"withBundle\", _.isObject(val));\n\t\t\t});\n\t\tthis.listenTo(this, \"change:media\",\n\t\t\tfunction(val) {\n\t\t\t\tconsole.log(\"%s:[change:media] %o\", this.cid, val);\n\t\t\t\t// this.set(\"withMedia\", _.isObject(val));\n\t\t\t});\n\t},\n\n\thasAnyPrevious: function(attr) {\n\t\treturn this.previous(attr) != null;\n\t},\n\n\thasAnyChanged: function(attr) {\n\t\treturn this.hasChanged(attr) && (this.has(attr) != this.hasAnyPrevious(attr));\n\t},\n\n\t// _getDocumentTitle: function() {\n\t// \tlet docTitle = [];\n\t// \tdocTitle.push(Globals.APP_NAME);\n\t// \tif (this.get(\"bundle\")) {\n\t// \t\tdocTitle.push(stripTags(this.get(\"bundle\").get(\"name\")));\n\t// \t\tif (this.model.get(\"media\")) {\n\t// \t\t\tdocTitle.push(stripTags(this.get(\"media\").get(\"name\")));\n\t// \t\t}\n\t// \t} else if (this.get(\"article\")) {\n\t// \t\tdocTitle.push(stripTags(this.get(\"article\").get(\"name\")));\n\t// \t}\n\t// \treturn _.unescape(docTitle.join(\" / \"));\n\t// }\n\n\t// constructor: function() {\n\t// \tObject.keys(this.defaults).forEach(function(getterName) {\n\t// \t\tObject.defineProperty(this, getterName, {\n\t// \t\t\tenumerable: true,\n\t// \t\t\tget: function() {\n\t// \t\t\t\treturn this.get(getterName);\n\t// \t\t\t}\n\t// \t\t});\n\t// \t});\n\t// \tBaseModel.apply(this, arguments);\n\t// }\n});\n",
    "/**\n * @module app/model/BaseItem\n * @requires module:backbone\n */\n\n/** @type {module:app/model/BaseModel} */\nconst BaseModel = require(\"app/model/BaseModel\");\n\n// /** @type {module:app/control/Globals} */\n// var Globals = require(\"app/control/Globals\");\n// /** @type {module:app/utils/strings/stripTags} */\n// var stripTags = require(\"utils/strings/stripTags\");\n// /** @type {module:app/model/parseSymAttrs} */\n//var parseSymAttrs = require(\"app/model/parseSymAttrs\");\n\nvar parseSymAttrs = function(s) {\n\treturn s.replace(/(\\,|\\;)/g, function(m) {\n\t\treturn (m == \",\") ? \";\" : \",\";\n\t});\n};\nvar toAttrsHash = function(obj, attr) {\n\tif (_.isString(attr)) {\n\t\tvar idx = attr.indexOf(\":\");\n\t\tif (idx > 0) {\n\t\t\tobj[attr.substring(0, idx)] = parseSymAttrs(attr.substring(idx + 1));\n\t\t} else {\n\t\t\tobj[attr] = attr; // to match HTML5<>XHTML valueless attributes\n\t\t}\n\t} // else ignore non-string values\n\treturn obj;\n};\n/**\n * @constructor\n * @type {module:app/model/BaseItem}\n */\nmodule.exports = BaseModel.extend({\n\n\t_domPrefix: \"_\",\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\t// attrs: function() { return {}; },\n\t\tget attrs() {\n\t\t\treturn {};\n\t\t},\n\t},\n\n\tgetters: [\"domid\"],\n\n\tmutators: {\n\t\tdomid: function() {\n\t\t\tif (!this.hasOwnProperty(\"_domId\"))\n\t\t\t\tthis._domId = this._domPrefix + this.id;\n\t\t\treturn this._domId;\n\t\t},\n\t\tattrs: {\n\t\t\tset: function(key, value, options, set) {\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tvalue = value.reduce(toAttrsHash, {});\n\t\t\t\t}\n\t\t\t\tif (!_.isObject(value)) {\n\t\t\t\t\tconsole.error(\"%s::attrs value not an object or string array\", this.cid, value);\n\t\t\t\t\tvalue = {};\n\t\t\t\t}\n\t\t\t\tset(key, value, options);\n\t\t\t}\n\t\t},\n\t},\n\n\tattr: function(attr) {\n\t\treturn this.attrs()[attr];\n\t},\n\n\tattrs: function() {\n\t\treturn this.get(\"attrs\");\n\t},\n\n\ttoString: function() {\n\t\treturn this.get(\"domid\");\n\t},\n\n\tgetDistanceToSelected: function() {\n\t\tif (this.collection && this.collection.selectedIndex > 0) {\n\t\t\treturn this.collection.indexOf(this) - this.collection.selectedIndex;\n\t\t}\n\t\treturn -1;\n\t},\n\n\tgetIndex: function() {\n\t\tif (this.collection) {\n\t\t\treturn this.collection.indexOf(this);\n\t\t}\n\t\treturn -1;\n\t}\n});\n",
    "/**\n * @module app/model/BaseModel\n * @requires module:backbone\n */\n\n/** @type {module:backbone} */\nconst Backbone = require(\"backbone\");\n\nvar BaseModelProto = {\n\t// constructor: function() {\n\t// \tif (this.properties) {\n\t// \t\tObject.defineProperties(this, this.properties);\n\t// \t}\n\t// \tBackbone.Model.apply(this, arguments);\n\t// }\n};\n\nvar BaseModel = {\n\textend: function(proto, obj) {\n\t\tvar constr, propName; //, propDef;\n\t\tfor (propName in proto) {\n\t\t\tif (proto.hasOwnProperty(propName) && _.isObject(proto[propName])) { //(Object.getPrototypeOf(proto[propName]) === Object.prototype)) {\n\t\t\t\tproto[propName] = _.defaults(proto[propName], this.prototype[propName]);\n\t\t\t\t// console.log(\"BaseModel::extend '%s:%s' is Object\\n%s\", proto._domPrefix, propName, JSON.stringify(proto[propName]));\n\t\t\t}\n\t\t}\n\n\t\t// if (_.isObject(proto.properties)) {\n\t\t// \tif (Array.isArray(proto.getters)) {\n\t\t// \t\tproto.properties = _.omit(proto.properties, proto.getters);\n\t\t// \t}\n\t\t// }\n\t\t// if (proto.properties && this.prototype.properties) {\n\t\t// \t_.defaults(proto.properties, this.prototype.properties);\n\t\t// }\n\n\t\tconstr = Backbone.Model.extend.apply(this, arguments);\n\n\t\tif (Array.isArray(constr.prototype.getters)) {\n\t\t\tconstr.prototype.getters.forEach(function(getterName) {\n\t\t\t\tObject.defineProperty(constr.prototype, getterName, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tget: function() {\n\t\t\t\t\t\treturn this.get(getterName);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t// if (Array.isArray(constr.prototype.properties)) {\n\t\t// }\n\n\t\t// if (_.isObject(proto.properties)) {\n\t\t// \tfor (propName in proto.properties) {\n\t\t// \t\tif (proto.properties.hasOwnProperty(propName)) {\n\t\t// \t\t\tpropDef = proto.properties[propName];\n\t\t// \t\t\tif (_.isFunction(propDef)) {\n\t\t// \t\t\t\tproto.properties[propName] = {\n\t\t// \t\t\t\t\tenumerable: true, get: propDef\n\t\t// \t\t\t\t};\n\t\t// \t\t\t} else if (_.isObject(propDef)){\n\t\t// \t\t\t\tpropDef.enumerable = true;\n\t\t// \t\t\t} else {\n\t\t// \t\t\t\tdelete proto.properties[propName];\n\t\t// \t\t\t}\n\t\t// \t\t}\n\t\t// \t}\n\t\t// \tObject.defineProperties(proto, proto.properties);\n\t\t// \tdelete proto.properties;\n\t\t// }\n\t\treturn constr;\n\t}\n};\n\n/**\n * @constructor\n * @type {module:app/model/BaseModel}\n */\nmodule.exports = Backbone.Model.extend.call(Backbone.Model, BaseModelProto, BaseModel);\n// module.exports = Model.extend(BaseModelProto, BaseModel);\n",
    "/**\n * @module app/model/SelectableCollection\n */\n\n/** @type {module:backbone} */\nconst Backbone = require(\"backbone\");\n\n/**\n * @constructor\n * @type {module:app/model/SelectableCollection}\n */\nvar SelectableCollection = Backbone.Collection.extend({\n\n\tinitialize: function(models, options) {\n\t\toptions = _.defaults({}, options, {\n\t\t\tinitialSelection: \"none\",\n\t\t\tsilentInitial: true\n\t\t});\n\t\tthis.initialSelection = options.initialSelection;\n\t\tthis.initialOptions = {\n\t\t\tsilent: options.silentInitial\n\t\t};\n\t},\n\n\treset: function(models, options) {\n\t\tthis.deselect(this.initialOptions);\n\t\tBackbone.Collection.prototype.reset.apply(this, arguments);\n\t\tif (this.initialSelection === \"first\" && this.length) {\n\t\t\tthis.select(this.at(0), this.initialOptions);\n\t\t}\n\t},\n\n\tselect: function(newModel, options) {\n\t\tif (newModel === void 0) {\n\t\t\tnewModel = null;\n\t\t}\n\t\tif (this.selected === newModel) {\n\t\t\treturn;\n\t\t}\n\t\tvar triggerEvents = !(options && options.silent);\n\t\tvar oldModel = this.selected;\n\n\t\tthis.lastSelected = this.selected;\n\t\tthis.lastSelectedIndex = this.selectedIndex;\n\t\tthis.selected = newModel;\n\t\tthis.selectedIndex = this.indexOf(newModel);\n\n\t\tif (oldModel) {\n\t\t\tif (_.isFunction(oldModel.deselect)) {\n\t\t\t\toldModel.deselect(options);\n\t\t\t} else if (triggerEvents) {\n\t\t\t\toldModel.selected = void 0;\n\t\t\t\toldModel.trigger(\"deselected\", newModel, oldModel);\n\t\t\t}\n\t\t\tif (triggerEvents) this.trigger(\"deselect:one\", oldModel);\n\t\t} else {\n\t\t\tif (triggerEvents) this.trigger(\"deselect:none\", null);\n\t\t}\n\n\t\tif (newModel) {\n\t\t\tif (_.isFunction(newModel.select)) {\n\t\t\t\tnewModel.select(options);\n\t\t\t} else if (triggerEvents) {\n\t\t\t\tnewModel.selected = true;\n\t\t\t\tnewModel.trigger(\"selected\", newModel, oldModel);\n\t\t\t}\n\t\t\tif (triggerEvents) this.trigger(\"select:one\", newModel);\n\t\t} else {\n\t\t\tif (triggerEvents) this.trigger(\"select:none\", null);\n\t\t}\n\t},\n\n\tdeselect: function(options) {\n\t\tthis.select(null, options);\n\t},\n\n\tselectAt: function(index, options) {\n\t\tif (0 > index || index >= this.length) {\n\t\t\tnew RangeError(\"index is out of bounds\");\n\t\t}\n\t\tthis.select(this.at(index), options);\n\t},\n\n\tdistance: function(a, b) {\n\t\tvar aIdx, bIdx;\n\n\t\tif (!a) return NaN;\n\t\taIdx = this.indexOf(a);\n\t\tif (aIdx == -1) return NaN;\n\n\t\tif (arguments.length == 1) {\n\t\t\tbIdx = this.selectedIndex;\n\t\t} else {\n\t\t\tif (!b) return NaN;\n\t\t\tbIdx = this.indexOf(b);\n\t\t\tif (bIdx == -1) return NaN;\n\t\t}\n\t\treturn Math.abs(bIdx - aIdx);\n\t},\n\n\t/* TODO: MOVE INTO MIXIN */\n\n\t/** @return boolean\t/*/\n\thasFollowing: function(model) {\n\t\tmodel || (model = this.selected);\n\t\treturn this.indexOf(model) < (this.length - 1);\n\t},\n\n\t/** @return next model\t*/\n\tfollowing: function(model) {\n\t\tmodel || (model = this.selected);\n\t\treturn this.hasFollowing(model) ? this.at(this.indexOf(model) + 1) : null;\n\t},\n\n\t/** @return next model or the beginning if at the end */\n\tfollowingOrFirst: function(model) {\n\t\tmodel || (model = this.selected);\n\t\treturn this.at((this.indexOf(model) + 1) % this.length);\n\t},\n\n\t/** @return boolean\t/*/\n\thasPreceding: function(model) {\n\t\tmodel || (model = this.selected);\n\t\treturn this.indexOf(model) > 0;\n\t},\n\n\t/** @return the previous model */\n\tpreceding: function(model) {\n\t\tmodel || (model = this.selected);\n\t\treturn this.hasPreceding(model) ? this.at(this.indexOf(model) - 1) : null;\n\t},\n\n\t/** @return the previous model or the end if at the beginning */\n\tprecedingOrLast: function(model) {\n\t\tmodel || (model = this.selected);\n\t\tvar index = this.indexOf(model) - 1;\n\t\treturn this.at(index > -1 ? index : this.length - 1);\n\t},\n\n});\n\nmodule.exports = SelectableCollection;\n",
    "/**\n * @module app/model/collection/ArticleCollection\n */\n\n/** @type {module:app/model/SelectableCollection} */\nconst SelectableCollection = require(\"app/model/SelectableCollection\");\n\n/** @type {module:app/model/item/ArticleItem} */\nconst ArticleItem = require(\"app/model/item/ArticleItem\");\n\n/**\n * @constructor\n * @type {module:app/model/collection/ArticleCollection}\n */\nvar ArticleCollection = SelectableCollection.extend({\n\n\t/** @type {Backbone.Model} */\n\tmodel: ArticleItem\n\n});\n\nmodule.exports = new ArticleCollection();\n",
    "/**\n * @module app/model/collection/BundleCollection\n */\n\n/** @type {module:app/model/SelectableCollection} */\nconst SelectableCollection = require(\"app/model/SelectableCollection\");\n\n/** @type {module:app/model/item/BundleItem} */\nconst BundleItem = require(\"app/model/item/BundleItem\");\n\n/**\n * @constructor\n * @type {module:app/model/collection/BundleCollection}\n */\nvar BundleCollection = SelectableCollection.extend({\n\n\t/** @type {Backbone.Model} */\n\tmodel: BundleItem,\n\n\t/** @type {Function} */\n\tcomparator: function(oa, ob) {\n\t\tvar a = oa.get(\"completed\");\n\t\tvar b = ob.get(\"completed\");\n\t\tif (a > b) {\n\t\t\treturn -1;\n\t\t} else if (a < b) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t},\n\n\t/** @type {String} */\n\turl: \"/json/bundles/\",\n\n});\n\nmodule.exports = new BundleCollection();\n",
    "/**\n * @module app/model/collection/KeywordCollection\n * @requires module:backbone\n */\n\n/** @type {module:app/model/SelectableCollection} */\nconst SelectableCollection = require(\"app/model/SelectableCollection\");\n\n/** @type {module:app/model/item/KeywordItem} */\nconst KeywordItem = require(\"app/model/item/KeywordItem\");\n\n/**\n * @constructor\n * @type {module:app/model/collection/KeywordCollection}\n */\nvar KeywordCollection = SelectableCollection.extend({\n\n\t/** @type {Backbone.Model} */\n\tmodel: KeywordItem\n\n});\n\nmodule.exports = new KeywordCollection();\n",
    "/**\n * @module app/model/collection/TypeCollection\n * @requires module:backbone\n */\n\n/** @type {module:backbone} */\nconst Backbone = require(\"backbone\");\n\n/** @type {module:app/model/item/TypeItem} */\nconst TypeItem = require(\"app/model/item/TypeItem\");\n\n/**\n * @constructor\n * @type {module:app/model/collection/TypeCollection}\n */\nvar TypeCollection = Backbone.Collection.extend({\n\n\t/** @type {Backbone.Model} */\n\tmodel: TypeItem\n\n});\n\nmodule.exports = new TypeCollection();\n",
    "module.exports = function(bootstrap) {\n\n\t/** @type {module:app/control/Globals} */\n\tvar Globals = require(\"app/control/Globals\");\n\n\t// Globals.GA_TAGS = bootstrap[\"ga-tags\"];\n\t// Globals.PARAMS = bootstrap[\"params\"];\n\t// Globals.APP_ROOT = bootstrap[\"params\"][\"root\"];\n\t// Globals.MEDIA_DIR = bootstrap[\"params\"][\"uploads\"];\n\tGlobals.APP_NAME = bootstrap[\"params\"][\"website-name\"];\n\n\t/** @type {module:app/model/collection/TypeCollection} */\n\tvar typeList = require(\"app/model/collection/TypeCollection\");\n\t/** @type {module:app/model/collection/KeywordCollection} */\n\tvar keywordList = require(\"app/model/collection/KeywordCollection\");\n\t/** @type {module:app/model/collection/BundleCollection} */\n\tvar bundleList = require(\"app/model/collection/BundleCollection\");\n\t/** @type {module:app/model/collection/ArticleCollection} */\n\tvar articleList = require(\"app/model/collection/ArticleCollection\");\n\n\t// Fix-ups to bootstrap data.\n\tvar articles = bootstrap[\"articles-all\"];\n\tvar types = bootstrap[\"types-all\"];\n\tvar keywords = bootstrap[\"keywords-all\"];\n\tvar bundles = bootstrap[\"bundles-all\"];\n\tvar media = bootstrap[\"media-all\"];\n\n\t// Attach media to their bundles\n\tvar mediaByBundle = _.groupBy(media, \"bId\");\n\n\t// Fill-in back-references:\n\t// Create Keyword.bundleIds from existing Bundle.keywordIds,\n\t// then Bundle.typeIds from unique Keyword.typeId\n\n\t// _.each(bundles, function (bo, bi, ba) {\n\tbundles.forEach(function(bo, bi, ba) {\n\t\tbo.tIds = [];\n\t\tbo.media = mediaByBundle[bo.id];\n\t\t// _.each(keywords, function (ko, ki, ka) {\n\t\tkeywords.forEach(function(ko, ki, ka) {\n\t\t\tif (bi === 0) {\n\t\t\t\tko.bIds = [];\n\t\t\t}\n\t\t\t// if (_.contains(bo.kIds, ko.id)) {\n\t\t\tif (bo.kIds.indexOf(ko.id) != -1) {\n\t\t\t\tko.bIds.push(bo.id);\n\t\t\t\t// if (!_.contains(bo.tIds, ko.tId)) {\n\t\t\t\tif (bo.tIds.indexOf(ko.tId) == -1) {\n\t\t\t\t\tbo.tIds.push(ko.tId);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\t// Fill collection singletons\n\tarticleList.reset(articles);\n\ttypeList.reset(types);\n\tkeywordList.reset(keywords);\n\tbundleList.reset(bundles);\n\n\t// bootstrap[\"params\"] = bootstrap[\"articles-all\"] = bootstrap[\"types-all\"] = bootstrap[\"keywords-all\"] = bootstrap[\"bundles-all\"] = bootstrap[\"media-all\"] = null;\n};\n",
    "/**\n * @module app/model/item/ArticleItem\n */\n\n// /** @type {module:backbone} */\n// var Backbone = require(\"backbone\");\n/** @type {module:app/model/item/SourceItem} */\nconst BaseItem = require(\"app/model/BaseItem\");\n\n/**\n * @constructor\n * @type {module:app/model/item/ArticleItem}\n */\nmodule.exports = BaseItem.extend({\n\n\t_domPrefix: \"a\",\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\tname: \"\",\n\t\thandle: \"\",\n\t\ttext: \"\"\n\t},\n\n});\n",
    "/**\n * @module app/model/item/BundleItem\n * @requires module:backbone\n */\n\n// /** @type {module:backbone} */\n// var Backbone = require(\"backbone\");/** @type {Function} */\nconst Color = require(\"color\");\n\n/** @type {module:app/model/item/SourceItem} */\nconst BaseItem = require(\"app/model/BaseItem\");\n/** @type {module:app/model/item/MediaItem} */\nconst MediaItem = require(\"app/model/item/MediaItem\");\n/** @type {module:app/model/SelectableCollection} */\nconst SelectableCollection = require(\"app/model/SelectableCollection\");\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/utils/strings/stripTags} */\nconst stripTags = require(\"utils/strings/stripTags\");\n// /** @type {module:app/utils/strings/parseTaglist} */\n// var parseSymAttrs = require(\"app/model/parseSymAttrs\");\n\n// /** @type {module:app/model/collection/KeywordCollection} */\n// var keywords = require(\"app/model/collection/KeywordCollection\");\n\n// Globals.DEFAULT_COLORS[\"color\"];\n// Globals.DEFAULT_COLORS[\"background-color\"];\nvar attrsDefault = _.defaults({\n\t\"has-colors\": \"defaults\"\n}, Globals.DEFAULT_COLORS);\n\n/** @private */\nvar MediaCollection = SelectableCollection.extend({\n\tmodel: MediaItem,\n\tcomparator: \"o\"\n});\n\n/**\n * @constructor\n * @type {module:app/model/item/BundleItem}\n */\nmodule.exports = BaseItem.extend({\n\n\t_domPrefix: \"b\",\n\n\t/** @type {Object|Function} */\n\t// defaults: function() {\n\t// \treturn {\n\t// \t\tname: \"\",\n\t// \t\thandle: \"\",\n\t// \t\tdesc: \"\",\n\t// \t\tcompleted: 0,\n\t// \t\tkIds: [],\n\t// \t};\n\t// },\n\tdefaults: {\n\t\tname: \"\",\n\t\thandle: \"\",\n\t\tdesc: \"\",\n\t\tcompleted: 0,\n\t\tget kIds() {\n\t\t\treturn [];\n\t\t},\n\t\t// get keywords() { return []; },\n\t},\n\n\tgetters: [\"name\", \"media\"],\n\n\tmutators: {\n\t\ttext: function() {\n\t\t\treturn stripTags(this.get(\"desc\"));\n\t\t},\n\t\t// kIds: {\n\t\t// \tset: function (key, value, options, set) {\n\t\t// \t\tif (Array.isArray(value)) {\n\t\t// \t\t\tset(\"keywords\", value.map(function(id) {\n\t\t// \t\t\t\tvar obj = keywords.get(id);\n\t\t// \t\t\t\treturn obj;\n\t\t// \t\t\t}, this), options;\n\t\t// \t\t}\n\t\t// \t\tset(key, value, options);\n\t\t// \t},\n\t\t// },\n\t\tmedia: {\n\t\t\ttransient: true,\n\t\t\tset: function(key, value, options, set) {\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tvalue.forEach(function(o) {\n\t\t\t\t\t\to.bundle = this;\n\t\t\t\t\t}, this);\n\t\t\t\t\tvalue = new MediaCollection(value);\n\t\t\t\t}\n\t\t\t\tset(key, value, options);\n\t\t\t},\n\t\t},\n\t},\n\n\tinitialize: function(attrs, options) {\n\t\tthis.colors = {\n\t\t\tfgColor: new Color(this.attr(\"color\")),\n\t\t\tbgColor: new Color(this.attr(\"background-color\")),\n\t\t\tlnColor: new Color(this.attr(\"link-color\")),\n\t\t};\n\t\tthis.colors.hasDarkBg = this.colors.fgColor.luminosity() > this.colors.bgColor.luminosity();\n\t},\n\n\tattrs: function() {\n\t\treturn this._attrs || (this._attrs = _.defaults({}, this.get(\"attrs\"), attrsDefault));\n\t},\n});\n",
    "/**\n * @module app/model/item/KeywordItem\n * @requires module:app/model/BaseItem\n */\n\n/** @type {module:app/model/BaseItem} */\nconst BaseItem = require(\"app/model/BaseItem\");\n\n// /** @type {module:app/model/collection/TypeCollection} */\n// var types = require(\"app/model/collection/TypeCollection\");\n\n/**\n * @constructor\n * @type {module:app/model/item/KeywordItem}\n */\nmodule.exports = BaseItem.extend({\n\n\t_domPrefix: \"k\",\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\tname: \"\",\n\t\thandle: \"\",\n\t\ttId: -1,\n\t},\n\n\t// mutators: {\n\t// \ttId: {\n\t// \t\tset: function (key, value, options, set) {\n\t// \t\t\tvar type = types.get(value);\n\t// \t\t\tif (type) {\n\t// \t\t\t\ttype.get(\"keywords\").push(this);\n\t// \t\t\t\tset(\"type\", type, options);\n\t// \t\t\t}\n\t// \t\t\tset(key, value, options);\n\t// \t\t}\n\t// \t},\n\t// }\n});\n",
    "/**\n * @module app/model/item/MediaItem\n * @requires module:backbone\n */\n\n// /** @type {module:backbone} */\n// var Backbone = require(\"backbone\");/** @type {Function} */\nconst Color = require(\"color\");\n\n/** @type {module:app/model/item/SourceItem} */\nconst BaseItem = require(\"app/model/BaseItem\");\n/** @type {module:app/model/item/SourceItem} */\nconst SourceItem = require(\"app/model/item/SourceItem\");\n/** @type {module:app/model/SelectableCollection} */\nconst SelectableCollection = require(\"app/model/SelectableCollection\");\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/utils/strings/stripTags} */\nconst stripTags = require(\"utils/strings/stripTags\");\n// /** @type {module:app/model/parseSymAttrs} */\n// var parseSymAttrs = require(\"app/model/parseSymAttrs\");\n\n// console.log(Globals.PARAMS);\n\nvar urlTemplates = {\n\t\"original\": _.template(Globals.MEDIA_DIR + \"/<%= src %>\"),\n\t\"constrain-width\": _.template(Globals.APP_ROOT + \"image/1/<%= width %>/0/uploads/<%= src %>\"),\n\t\"constrain-height\": _.template(Globals.APP_ROOT + \"image/1/0/<%= height %>/uploads/<%= src %>\"),\n\t\"debug-bandwidth\": _.template(Globals.MEDIA_DIR.replace(/(https?\\:\\/\\/[^\\/]+)/, \"$1/slow/<%= kbps %>\") + \"/<%= src %>\"),\n};\n\n/**\n * @constructor\n * @type {module:app/model/item/MediaItem.SourceCollection}\n */\nvar SourceCollection = SelectableCollection.extend({\n\tmodel: SourceItem\n});\n\n/**\n * @constructor\n * @type {module:app/model/item/MediaItem}\n */\nmodule.exports = BaseItem.extend({\n\n\t_domPrefix: \"m\",\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\tname: \"<p><em>Untitled</em></p>\",\n\t\tsub: \"\",\n\t\to: 0,\n\t\tbId: -1,\n\t\tsrcIdx: 0,\n\t\tget srcset() {\n\t\t\treturn [];\n\t\t},\n\t\tget sources() {\n\t\t\treturn new SourceCollection();\n\t\t},\n\t},\n\n\tgetters: [\"name\", \"bundle\", \"source\", \"sources\"],\n\n\tmutators: {\n\t\t// desc: function() {\n\t\t// \treturn this.get(\"name\");\n\t\t// },\n\t\thandle: function() {\n\t\t\treturn this.get(\"src\");\n\t\t},\n\t\ttext: function() {\n\t\t\tif (!this.hasOwnProperty(\"_text\"))\n\t\t\t\tthis._text = _.unescape(stripTags(this.get(\"name\")));\n\t\t\treturn this._text;\n\t\t},\n\t\tattrs: {\n\t\t\tset: function(key, value, opts, set) {\n\t\t\t\tthis._attrs = null;\n\t\t\t\tBaseItem.prototype.mutators.attrs.set.apply(this, arguments);\n\t\t\t\tthis._updateSources();\n\t\t\t}\n\t\t},\n\t\tsrcset: {\n\t\t\tset: function(key, value, opts, set) {\n\t\t\t\tset(key, value, opts);\n\t\t\t\tthis.get(\"sources\").reset(value, opts);\n\t\t\t\tthis._updateSources();\n\t\t\t}\n\t\t},\n\t\tsource: {\n\t\t\ttransient: true,\n\t\t\tget: function() {\n\t\t\t\treturn this.get(\"sources\").at(this.get(\"srcIdx\"));\n\t\t\t},\n\t\t},\n\t},\n\n\tinitialize: function() {\n\t\tthis._updateColors();\n\t\tthis.listenTo(this, \"change:attrs change:bundle\", function() {\n\t\t\tthis._attrs = null;\n\t\t});\n\t},\n\n\tattrs: function() {\n\t\treturn this._attrs || (this._attrs = _.defaults({}, this.get(\"bundle\").attrs(), this.get(\"attrs\")));\n\t},\n\n\t_updateColors: function() {\n\t\tthis.colors = {\n\t\t\tfgColor: new Color(this.attr(\"color\")),\n\t\t\tbgColor: new Color(this.attr(\"background-color\"))\n\t\t};\n\t\tthis.colors.hasDarkBg = this.colors.fgColor.luminosity() > this.colors.bgColor.luminosity();\n\t},\n\n\t_updateSources: function() {\n\t\tvar srcObj = {\n\t\t\tkbps: this.attr(\"@debug-bandwidth\")\n\t\t};\n\t\tvar srcTpl = urlTemplates[srcObj.kbps ? \"debug-bandwidth\" : \"original\"];\n\t\tthis.get(\"sources\").forEach(function(item) {\n\t\t\tsrcObj.src = item.get(\"src\");\n\t\t\titem.set(\"original\", srcTpl(srcObj));\n\t\t});\n\t},\n\n\t// _updateSourcesArr: function() {\n\t// \tvar srcset = this.get(\"srcset\");\n\t// \tif (Array.isArray(srcset)) {\n\t// \t\tvar srcObj = { kbps: this.attr(\"@debug-bandwidth\") };\n\t// \t\tvar srcTpl = Globals.MEDIA_SRC_TPL[srcObj.kbps? \"debug-bandwidth\" : \"original\"];\n\t// \t\tsrcset.forEach(function(o) {\n\t// \t\t\tsrcObj.src = o.src;\n\t// \t\t\to.original = srcTpl(srcObj);\n\t// \t\t}, this);\n\t// \t}\n\t// \tthis.get(\"sources\").reset(srcset);\n\t// },\n\n});\n",
    "/**\n * @module app/model/item/SourceItem\n * @requires module:backbone\n */\n\n// /** @type {module:backbone} */\n// var Backbone = require(\"backbone\");\n// /** @type {module:app/control/Globals} */\n// var Globals = require(\"app/control/Globals\");\n/** @type {module:app/model/item/SourceItem} */\nconst BaseItem = require(\"app/model/BaseItem\");\n\n/** @type {String} */\nvar noCacheSuffix = \"?\" + Date.now();\n\n/**\n * @constructor\n * @type {module:app/model/item/SourceItem}\n */\n// module.exports = Backbone.Model.extend({\nmodule.exports = BaseItem.extend({\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\tsrc: null,\n\t\tmime: null,\n\t\tw: null,\n\t\th: null,\n\t},\n\n\tgetters: [\"src\", \"original\"],\n\n\tmutators: {\n\t\tsrc: {\n\t\t\tset: function(key, value, options, set) {\n\t\t\t\tif (DEBUG) {\n\t\t\t\t\tvalue += noCacheSuffix;\n\t\t\t\t}\n\t\t\t\tset(key, value, options);\n\t\t\t}\n\t\t},\n\t\t// original: { \n\t\t// \ttransient: true,\n\t\t// \tget: function (key, value, options, set) {\n\t\t// \t\treturn this.attributes.original || (this.attributes.original = this._composeOriginalSrc());\n\t\t// \t},\n\t\t// },\n\t\t// media: {\n\t\t// \ttransient: true,\n\t\t// \tget: function () {\n\t\t// \t\tvar retval;\n\t\t// \t\tif (this._noRecusion) {\n\t\t// \t\t\tconsole.log(\"%s::media returning null\", this.cid);\n\t\t// \t\t\tretval = null;//this.id;\n\t\t// \t\t} else {\n\t\t// \t\t\tconsole.log(\"%s::media returning Object\", this.cid);\n\t\t// \t\t\tthis._noRecusion = true;\n\t\t// \t\t\tretval = this.attributes.media;\n\t\t// \t\t\tthis._noRecusion = false;\n\t\t// \t\t}\n\t\t// \t\treturn retval;\n\t\t// \t},\n\t\t// \tset: function (key, value, options, set) {\n\t\t// \t\tif (value instanceof BaseItem) {\n\t\t// \t\t\tset(key, value, options);\n\t\t// \t\t}\n\t\t// \t},\n\t\t// },\n\t},\n\n\t// initialize: function() {\n\t// \tif (DEBUG) {\n\t// \t\tvar cb = function() {\n\t// \t\t\t// console.log(\"@debug-bandwidth:\", JSON.stringify(this.get(\"media\").attr(\"@debug-bandwidth\")));\n\t// \t\t\tconsole.log(\"media:\", JSON.stringify(this.toJSON()));\n\t// \t\t\t// if ((this.get(\"media\") instanceof BaseItem) && this.get(\"media\").attr(\"@debug-bandwidth\")) {\n\t// \t\t\t// \tconsole.log(\"original\", this.get(\"original\"));\n\t// \t\t\t// \tconsole.log(\"media:\", JSON.stringify(this.get(\"media\").toJSON()));\n\t// \t\t\t// }\n\t// \t\t}.bind(this);\n\t// \t\twindow.requestAnimationFrame(cb);\n\t// \t}\n\t// },\n\t// \n\t// _composeOriginalSrc: function() {\n\t// \tvar values = { src: this.get(\"src\") };\n\t// \tif (this.has(\"media\") && (values.kbps = this.get(\"media\").attr(\"@debug-bandwidth\"))) {\n\t// \t// if (this.has(\"media\") && this.get(\"media\").attrs().hasOwnProperty(\"@debug-bandwidth\")) {\n\t// \t// \tvalues.kbps = this.get(\"media\").attrs()[\"@debug-bandwidth\"];\n\t// \t\treturn Globals.MEDIA_SRC_TPL[\"debug-bandwidth\"](values);\n\t// \t}\n\t// \treturn Globals.MEDIA_SRC_TPL[\"original\"](values);\n\t// },\n});\n",
    "/**\n * @module app/model/item/TypeItem\n */\n\n// /** @type {module:backbone} */\n// var Backbone = require(\"backbone\");\n/** @type {module:app/model/item/SourceItem} */\nconst BaseItem = require(\"app/model/BaseItem\");\n\n/**\n * @constructor\n * @type {module:app/model/item/TypeItem}\n */\nmodule.exports = BaseItem.extend({\n\n\t_domPrefix: \"t\",\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\tname: \"\",\n\t\thandle: \"\",\n\t\t// get kIds() { return []; },\n\t\t// get keywords() { return []; },\n\t},\n\n});\n",
    "/**\n * @module app/view/AppView\n */\n\n/** @type {module:backbone} */\nconst Backbone = require(\"backbone\");\n\n/** @type {module:app/utils/debug/traceArgs} */\nconst stripTags = require(\"utils/strings/stripTags\");\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/control/Controller} */\nconst controller = require(\"app/control/Controller\");\n/** @type {module:app/model/AppState} */\nconst AppState = require(\"app/model/AppState\");\n/** @type {module:app/model/collection/BundleCollection} */\nconst bundles = require(\"app/model/collection/BundleCollection\");\n/** @type {module:app/model/collection/ArticleCollection} */\nconst articles = require(\"app/model/collection/ArticleCollection\");\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {module:app/view/NavigationView} */\nconst NavigationView = require(\"app/view/NavigationView\");\n/** @type {module:app/view/ContentView} */\nconst ContentView = require(\"app/view/ContentView\");\n/** @type {module:app/view/base/TouchManager} */\nconst TouchManager = require(\"app/view/base/TouchManager\");\n\n/**\n * @constructor\n * @type {module:app/view/AppView}\n */\nmodule.exports = View.extend({\n\n\t/** @override */\n\tcidPrefix: \"app\",\n\t/** @override */\n\tel: \"html\",\n\t// /** @override */\n\tclassName: \"app\", // without-bundle without-media without-article\",\n\t/** @override */\n\tmodel: AppState,\n\n\t/** @override */\n\tevents: {\n\t\t\"visibilitychange\": function(ev) {\n\t\t\tconsole.log(\"%s:[%s]\", this.cid, ev.type);\n\t\t},\n\t\t\"fullscreenchange\": function(ev) {\n\t\t\tconsole.log(\"%s:[%s] fullscreen: %o\", this.cid, ev.type, (document.fullscreenElement !== null), document.fullscreen);\n\t\t},\n\t\t\"dragstart\": function(ev) {\n\t\t\tif (ev.target.nodeName == \"IMG\" || ev.target.nodeName == \"A\") {\n\t\t\t\tev.defaultPrevented || ev.preventDefault();\n\t\t\t}\n\t\t},\n\t\t// \"touchmove body\": function(ev) {\n\t\t// \tev.defaultPrevented || ev.preventDefault();\n\t\t// },\n\t},\n\n\tproperties: {\n\t\tcontainer: {\n\t\t\tget: function() {\n\t\t\t\treturn this._container ||\n\t\t\t\t\t(this._container = document.getElementById(\"container\"));\n\t\t\t\t// (this._container = document.body);\n\t\t\t}\n\t\t},\n\t\tnavigation: {\n\t\t\tget: function() {\n\t\t\t\treturn this._navigation ||\n\t\t\t\t\t(this._navigation = document.getElementById(\"navigation\"));\n\t\t\t}\n\t\t},\n\t\tcontent: {\n\t\t\tget: function() {\n\t\t\t\treturn this._content ||\n\t\t\t\t\t(this._content = document.getElementById(\"content\"));\n\t\t\t}\n\t\t},\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\t/* elements */\n\t\t// this.routeEl = this.el;\n\t\t// this.stateEl = this.el\n\t\tthis.breakpointEl = this.el;\n\n\t\t/* init HammerJS handlers */\n\t\tvar vtouch, htouch;\n\t\tvar touchEl = this.content; //document.body;\n\t\tvtouch = htouch = TouchManager.init(touchEl);\n\n\t\t// this._vpanEnableFn = function(mc, ev) {\n\t\t// \tvar retval = !this._hasOverflowY(this.container);\n\t\t// \tvpanLogFn(\"%s::_vpanEnableFn -> %o\\n%o\", this.cid, retval, arguments);\n\t\t// \treturn retval;\n\t\t// }.bind(this);\n\t\t// vtouch.get(\"vpan\").set({ enable: this._vpanEnableFn });\n\n\t\t// this._hpanEnableFn = function(mc, ev) {\n\t\t// \tvar retval = this.model.get(\"withBundle\") && this.model.get(\"collapsed\");\n\t\t// \thpanLogFn(\"%s::_hpanEnableFn -> %o\\n%o\", this.cid, retval, arguments);\n\t\t// \treturn !!retval;\n\t\t// }.bind(this);\n\t\t// htouch.get(\"hpan\").set({ enable: this._hpanEnableFn });\n\n\t\t// this._afterRender = this._afterRender.bind(this);\n\t\tthis._onResize = this._onResize.bind(this);\n\n\t\t/* render on resize, onorientationchange, visibilitychange */\n\t\t// window.addEventListener(\"orientationchange\", this._onResize, false);\n\t\t// window.addEventListener(\"resize\", _.debounce(this._onResize.bind(this), 30, false), false);\n\t\twindow.addEventListener(\"resize\", this._onResize, false);\n\n\t\t// var h = function(ev) { console.log(ev.type, ev) };\n\t\t// window.addEventListener(\"scroll\", h, false);\n\t\t// window.addEventListener(\"wheel\", h, false);\n\n\t\t/* TODO: replace resize w/ mediaquery listeners. Caveat: some components\n\t\t(vg. Carousel) require update on resize */\n\t\t// this._onBreakpointChange = this._onBreakpointChange.bind(this);\n\t\t// Object.keys(Globals.BREAKPOINTS).forEach(function(s) {\n\t\t// \tGlobals.BREAKPOINTS[s].addListeners(this._onBreakpointChange);\n\t\t// }, this);\n\n\n\t\t/* initialize controller/model listeners BEFORE views register their own */\n\t\tthis.listenTo(controller, \"route\", this._onRoute);\n\t\t// this.listenTo(controller, \"change:after\", this._afterControllerChanged);\n\t\tthis.listenTo(this.model, \"change\", this._onModelChange); /* FIXME */\n\n\t\t/* initialize views */\n\t\tthis.navigationView = new NavigationView({\n\t\t\tel: this.navigation,\n\t\t\tmodel: this.model,\n\t\t\tvpan: vtouch,\n\t\t\thpan: htouch\n\t\t});\n\n\t\tthis.contentView = new ContentView({\n\t\t\tel: this.content,\n\t\t\tmodel: this.model,\n\t\t\tvpan: vtouch,\n\t\t\thpan: htouch,\n\t\t});\n\n\t\t/* TouchEvents fixups\n\t\t * ------------------------------- */\n\t\tvar touchOpts = { capture: false, passive: false };\n\t\tvar onTouchStart = (ev) => {\n\t\t\tthis.el.addEventListener(\"touchmove\", onTouchMove, touchOpts);\n\t\t\tthis.el.addEventListener(\"touchend\", onTouchEnd, touchOpts);\n\t\t\tthis.el.addEventListener(\"touchcancel\", onTouchEnd, touchOpts);\n\t\t};\n\t\tvar onTouchMove = (ev) => {\n\t\t\tif (!ev.defaultPrevented && (this.el.scrollHeight - 1) <= this.el.clientHeight) {\n\t\t\t\tev.preventDefault();\n\t\t\t}\n\t\t};\n\t\tvar onTouchEnd = (ev) => {\n\t\t\tthis.el.removeEventListener(\"touchmove\", onTouchMove, touchOpts);\n\t\t\tthis.el.removeEventListener(\"touchend\", onTouchEnd, touchOpts);\n\t\t\tthis.el.removeEventListener(\"touchcancel\", onTouchEnd, touchOpts);\n\t\t};\n\t\tthis.el.addEventListener(\"touchstart\", onTouchStart, { passive: true });\n\n\t\tvar onMeasured = (view) => {\n\t\t\tthis.setImmediate(() => {\n\t\t\t\tthis.requestAnimationFrame(() => {\n\t\t\t\t\tif ((this.el.scrollHeight - 1) <= this.el.clientHeight) {\n\t\t\t\t\t\tthis.el.style.overflowY = \"hidden\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.el.style.overflowY = \"\";\n\t\t\t\t\t}\n\t\t\t\t\tthis.el.scrollTop = 1;\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\tthis.listenTo(this.navigationView, \"view:collapsed:measured\", onMeasured);\n\n\t\t/* Startup listener, added last */\n\t\tthis.listenToOnce(controller, \"route\", this._appStart);\n\n\t\t/* start router, which will request appropiate state */\n\t\tBackbone.history.start({\n\t\t\tpushState: false,\n\t\t\thashChange: true,\n\t\t});\n\t},\n\n\t/* -------------------------------\n\t/* _appStart\n\t/* ------------------------------- */\n\n\t_appStart: function(name, args) {\n\t\tconsole.info(\"%s::_appStart(%s, %s)\", this.cid, name, args.join());\n\t\tthis.skipTransitions = true;\n\t\tthis.el.classList.add(\"skip-transitions\");\n\n\t\tif (window.ga && window.GTAG_ID) {\n\t\t\twindow.ga(\"create\", window.GTAG_ID, \"auto\");\n\t\t}\n\n\t\tthis.requestRender(View.MODEL_INVALID | View.SIZE_INVALID)\n\t\t\t.requestChildrenRender(View.MODEL_INVALID | View.SIZE_INVALID)\n\t\t\t.listenToOnce(this, \"view:render:after\", function(view, flags) {\n\t\t\t\t// this.setImmediate(function() {\n\t\t\t\tthis.requestAnimationFrame(function() {\n\t\t\t\t\tconsole.log(\"%s::_appStart[view:render:after][raf]\", this.cid);\n\t\t\t\t\tthis.skipTransitions = false;\n\t\t\t\t\tthis.el.classList.remove(\"skip-transitions\");\n\t\t\t\t\tthis.el.classList.remove(\"app-initial\");\n\t\t\t\t});\n\t\t\t});\n\t},\n\n\t/* --------------------------- *\n\t/* route changed\n\t/* --------------------------- */\n\n\t_onRoute: function(name, args) {\n\t\tconsole.info(\"%s::_onRoute %o -> %o\", this.cid, this.model.get(\"routeName\"), name);\n\t\t// var o = _.defaults({ routeName: name }, AppState.prototype.defaults);\n\t\tvar o = {\n\t\t\trouteName: name,\n\t\t\tbundle: null,\n\t\t\tmedia: null,\n\t\t\tarticle: null,\n\t\t\tpage: Backbone.history.getFragment().replace(/^(?!\\/)/, \"/\"),\n\t\t};\n\t\tswitch (name) {\n\t\t\tcase \"media-item\":\n\t\t\t\to.bundle = bundles.selected;\n\t\t\t\t// o.withBundle = true;\n\t\t\t\to.media = o.bundle.media.selected;\n\t\t\t\t// o.withMedia = true;\n\t\t\t\to.collapsed = true;\n\t\t\t\tbreak;\n\t\t\tcase \"bundle-item\":\n\t\t\t\to.bundle = bundles.selected;\n\t\t\t\t// o.withBundle = true;\n\t\t\t\to.collapsed = true;\n\t\t\t\tbreak;\n\t\t\tcase \"article-item\":\n\t\t\t\to.article = articles.selected;\n\t\t\t\t// o.withArticle = true;\n\t\t\t\to.collapsed = true;\n\t\t\t\tbreak;\n\t\t\tcase \"bundle-list\":\n\t\t\tcase \"notfound\":\n\t\t\tcase \"root\":\n\t\t\tdefault:\n\t\t\t\to.collapsed = false;\n\t\t\t\tbreak;\n\t\t}\n\t\t// console.log(\"%s::_onRoute args: %o\", this.cid, name, args);\n\t\tthis.model.set(o);\n\t},\n\n\t/* --------------------------- *\n\t/* model changed\n\t/* --------------------------- */\n\n\t_onModelChange: function() {\n\t\tif (DEBUG) {\n\t\t\tconsole.groupCollapsed(this.cid + \"::_onModelChange\");\n\t\t\tconsole.groupCollapsed(\"changes\");\n\t\t\tObject.keys(this.model.changedAttributes()).forEach(function(key) {\n\t\t\t\tconsole.info(\"%s::_onModelChange %s: %s -> %s\", this.cid, key,\n\t\t\t\t\tthis.model.previous(key),\n\t\t\t\t\tthis.model.get(key));\n\t\t\t}, this);\n\n\t\t\t[\"Article\", \"Bundle\", \"Media\"].forEach(function(name) {\n\t\t\t\tlet key = name.toLowerCase();\n\t\t\t\tlet wName = `with${name}`;\n\t\t\t\t// let logArgs = [\n\t\t\t\t// \t\"%s::_onModelChange with%s: %o with%sChanged: %o\", this.cid,\n\t\t\t\t// \twName, this.has(key), name, this.hasAnyChanged(key)\n\t\t\t\t// ];\n\t\t\t\t// if (this.hasChanged(wName) !== this.hasAnyChanged(key)) {\n\t\t\t\t// \tconsole.error.apply(console, logArgs);\n\t\t\t\t// } else {\n\t\t\t\t// \tconsole.log.apply(console, logArgs);\n\t\t\t\t// }\n\t\t\t\tconsole.assert(this.hasChanged(wName) === this.hasAnyChanged(key), this)\n\t\t\t}, this.model);\n\t\t\tconsole.groupEnd();\n\n\t\t\tthis.once(\"view:render:after\", function(view, flags) {\n\t\t\t\tconsole.info(\"%s::_onModelChange [view:render:after]\", view.cid);\n\t\t\t\tconsole.groupEnd();\n\t\t\t});\n\t\t}\n\n\t\tthis.requestRender(View.MODEL_INVALID);\n\t\t// this.requestChildrenRender(View.MODEL_INVALID);\n\t},\n\n\t/* -------------------------------\n\t/* resize\n\t/* ------------------------------- */\n\n\t_onResize: function(ev) {\n\t\tconsole.group(this.cid + \"::_onResize [event]\");\n\t\tthis.skipTransitions = true;\n\t\tthis.el.classList.add(\"skip-transitions\");\n\n\t\tthis.requestRender(View.SIZE_INVALID)\n\t\t\t// .whenRendered().then(function(view) {\n\t\t\t.once(\"view:render:after\", function(view, flags) {\n\t\t\t\t// this.requestChildrenRender(View.SIZE_INVALID, true);\n\t\t\t\t// this.setImmediate(function() {\n\t\t\t\tthis.requestAnimationFrame(function() {\n\t\t\t\t\tconsole.info(\"%s::_onResize [view:render:after][raf]\", view.cid);\n\t\t\t\t\tview.skipTransitions = false;\n\t\t\t\t\tthis.el.scrollTop = 1;\n\t\t\t\t\tview.el.classList.remove(\"skip-transitions\");\n\t\t\t\t\tconsole.groupEnd();\n\t\t\t\t})\n\t\t\t});\n\t\tif (document.fullscreenElement === null) this.renderNow();\n\t},\n\n\t/* -------------------------------\n\t/* render\n\t/* ------------------------------- */\n\n\trenderFrame: function(tstamp, flags) {\n\t\tconsole.log(\"%s::renderFrame [%s]\", this.cid, View.flagsToString(flags));\n\n\t\t/* model: set route & model id classes */\n\t\tif (flags & View.MODEL_INVALID) {\n\t\t\tthis.renderModelChange(flags);\n\t\t}\n\n\t\t/* size: check breakpoints and set classes*/\n\t\tif (flags & View.SIZE_INVALID) {\n\t\t\t_.each(Globals.BREAKPOINTS, function(o, s) {\n\t\t\t\tthis.toggle(s, o.matches);\n\t\t\t}, this.breakpointEl.classList);\n\t\t}\n\t\t/* request children render:  always render now */\n\t\tthis.requestChildrenRender(flags, true);\n\t\t/* request children render:  set 'now' flag if size is invalid */\n\t\t// this.requestChildrenRender(flags, flags & View.SIZE_INVALID);\n\t},\n\n\t/* -------------------------------\n\t/* body classes etc\n\t/* ------------------------------- */\n\n\trenderModelChange: function() {\n\t\tlet cls = this.el.classList;\n\t\tlet prevAttr = null;\n\t\tlet hasDarkBg = false;\n\t\tlet docTitle = [];\n\n\t\tdocTitle.push(Globals.APP_NAME);\n\t\tif (this.model.get(\"bundle\")) {\n\t\t\tdocTitle.push(stripTags(this.model.get(\"bundle\").get(\"name\")));\n\t\t\tif (this.model.get(\"media\")) {\n\t\t\t\tdocTitle.push(stripTags(this.model.get(\"media\").get(\"name\")));\n\t\t\t}\n\t\t} else if (this.model.get(\"article\")) {\n\t\t\tdocTitle.push(stripTags(this.model.get(\"article\").get(\"name\")));\n\t\t}\n\t\tdocTitle = _.unescape(docTitle.join(\" / \"))\n\t\tdocument.title = docTitle;\n\n\t\t/* meta update\n\t\t * ------------------------------- */\n\t\tlet metaTitle = docTitle;\n\t\tlet metaUrl = document.location.origin\n\t\t\t+ document.location.pathname\n\t\t\t+ document.location.hash;\n\n\t\tdocument.head.querySelector(\"meta[property='og:title']\")\n\t\t\t.setAttribute(\"content\", metaTitle);\n\t\tdocument.head.querySelector(\"meta[property='og:url']\")\n\t\t\t.setAttribute(\"content\", metaUrl);\n\t\tdocument.head.querySelector(\"link[rel='canonical']\")\n\t\t\t.setAttribute(\"href\", metaUrl);\n\n\t\t/* Google Analytics\n\t\t * ------------------------------- */\n\t\tif (window.ga && window.GTAG_ID) {\n\t\t\twindow.ga('send', {\n\t\t\t\t'hitType': 'pageview',\n\t\t\t\t'page': this.model.get(\"page\"),\n\t\t\t\t'title': docTitle\n\t\t\t});\n\t\t}\n\n\t\t/* Set route class */\n\t\tif (this.model.hasChanged(\"routeName\")) {\n\t\t\tprevAttr = this.model.previous(\"fromRouteName\");\n\t\t\tif (prevAttr) {\n\t\t\t\tcls.remove(\"from-route-\" + prevAttr);\n\t\t\t}\n\t\t\tcls.add(\"from-route-\" + this.model.get(\"fromRouteName\"));\n\t\t\tprevAttr = this.model.previous(\"routeName\");\n\t\t\tif (prevAttr) {\n\t\t\t\tcls.remove(\"route-\" + prevAttr);\n\t\t\t}\n\t\t\tcls.add(\"route-\" + this.model.get(\"routeName\"));\n\t\t}\n\n\t\t/* Set model id classes for color styles */\n\t\t[\"article\", \"bundle\", \"media\"].forEach(function(prop) {\n\t\t\tvar item = this.model.get(prop);\n\t\t\tif (this.model.hasChanged(prop)) {\n\t\t\t\tprevAttr = this.model.previous(prop);\n\t\t\t\tif (prevAttr) {\n\t\t\t\t\tcls.remove(prevAttr.get(\"domid\"));\n\t\t\t\t}\n\t\t\t\tif (item) {\n\t\t\t\t\tcls.add(item.get(\"domid\"));\n\t\t\t\t}\n\t\t\t}\n\t\t\tcls.toggle(\"with-\" + prop, !!item);\n\t\t\tcls.toggle(\"without-\" + prop, !item);\n\t\t\thasDarkBg |= (item && item.colors && item.colors.hasDarkBg);\n\t\t}.bind(this));\n\n\t\t/* flag dark background */\n\t\tcls.toggle(\"color-dark\", hasDarkBg);\n\t},\n}, {\n\tgetInstance: function() {\n\t\tif (!(window.app instanceof this)) {\n\t\t\twindow.app = new(this)({\n\t\t\t\tmodel: new AppState()\n\t\t\t});\n\t\t}\n\t\treturn window.app;\n\t}\n});\n\nif (DEBUG) {\n\tmodule.exports = (function(AppView) {\n\t\t/** @type {module:app/debug/DebugToolbar} */\n\t\tvar DebugToolbar = require(\"app/debug/DebugToolbar\");\n\n\t\treturn AppView.extend({\n\t\t\tinitialize: function() {\n\t\t\t\tvar retval;\n\t\t\t\tvar view = new DebugToolbar({\n\t\t\t\t\tid: \"debug-toolbar\",\n\t\t\t\t\tmodel: this.model\n\t\t\t\t});\n\t\t\t\tdocument.body.appendChild(view.render().el);\n\t\t\t\tretval = AppView.prototype.initialize.apply(this, arguments);\n\t\t\t\tthis._logFlags[\"view.trace\"] = true;\n\t\t\t\tthis.navigationView._logFlags[\"view.trace\"] = true;\n\t\t\t\treturn retval;\n\t\t\t},\n\t\t})\n\t})(module.exports);\n}\n",
    "/**\n * @module app/view/ContentView\n */\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:utils/TransformHelper} */\nconst TransformHelper = require(\"utils/TransformHelper\");\n// /** @type {module:app/view/base/TouchManager} */\n// var TouchManager = require(\"app/view/base/TouchManager\");\n\n/** @type {module:app/control/Controller} */\nconst controller = require(\"app/control/Controller\");\n/** @type {module:app/model/collection/BundleCollection} */\nconst bundles = require(\"app/model/collection/BundleCollection\");\n/** @type {module:app/model/collection/ArticleCollection} */\nconst articles = require(\"app/model/collection/ArticleCollection\");\n\n// /** @type {module:app/model/collection/BundleItem} */\n// var BundleItem = require(\"app/model/item/BundleItem\");\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {module:app/view/component/ArticleView} */\nconst ArticleView = require(\"app/view/component/ArticleView\");\n/** @type {module:app/view/component/CollectionStack} */\nconst CollectionStack = require(\"app/view/component/CollectionStack\");\n/** @type {module:app/view/component/CollectionStack} */\nconst SelectableListView = require(\"app/view/component/SelectableListView\");\n/** @type {module:app/view/render/DotNavigationRenderer} */\nconst DotNavigationRenderer = require(\"app/view/render/DotNavigationRenderer\");\n/** @type {module:app/view/component/Carousel} */\nconst Carousel = require(\"app/view/component/Carousel\");\n\n/** @type {module:app/view/render/CarouselRenderer} */\nconst CarouselRenderer = require(\"app/view/render/CarouselRenderer\");\n/** @type {module:app/view/render/ImageRenderer} */\nconst ImageRenderer = require(\"app/view/render/ImageRenderer\");\n/** @type {module:app/view/render/VideoRenderer} */\nconst VideoRenderer = require(\"app/view/render/VideoRenderer\");\n/** @type {module:app/view/render/SequenceRenderer} */\nconst SequenceRenderer = require(\"app/view/render/SequenceRenderer\");\n// /** @type {module:app/view/component/CanvasProgressMeter} */\n// var ProgressMeter = require(\"app/view/component/CanvasProgressMeter\");\n\n/** @type {Function} */\nconst carouselEmptyTemplate = require(\"./template/Carousel.EmptyRenderer.Bundle.hbs\");\n/** @type {Function} */\nconst mediaStackTemplate = require(\"./template/CollectionStack.Media.hbs\");\n\n// var transitionEnd = View.prefixedEvent(\"transitionend\");\nvar transformProp = View.prefixedProperty(\"transform\");\nvar transitionProp = View.prefixedProperty(\"transition\");\n\nvar tx = Globals.transitions;\n\n\n// var clickEvent = window.hasOwnProperty(\"onpointerup\") ? \"pointerup\" : \"mouseup\",\n\n/**\n * @constructor\n * @type {module:app/view/ContentView}\n */\nmodule.exports = View.extend({\n\n\t/** @override */\n\tcidPrefix: \"contentView\",\n\n\t/** @override */\n\tclassName: \"container-expanded\",\n\n\t/** @override */\n\tevents: {\n\t\t\"transitionend .adding-child\": \"_onAddedTransitionEnd\",\n\t\t\"transitionend .removing-child\": \"_onRemovedTransitionEnd\",\n\t\t// \"transitionend\": \"_onTransitionEnd\",\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\t_.bindAll(this, \"_onVPanStart\", \"_onVPanMove\", \"_onVPanFinal\", \"_onCollapsedEvent\");\n\n\t\tthis.transforms = new TransformHelper();\n\t\t// this.touch = options.touch || new Error(\"no touch\"); //TouchManager.getInstance();\n\t\tthis.vpan = options.vpan || new Error(\"no vpan\");\n\t\tthis.hpan = options.hpan || new Error(\"no hpan\");\n\n\t\tthis.listenTo(this.model, \"change\", this._onModelChange);\n\n\t\t// disconnect children before last change\n\t\t// this.listenTo(bundles, \"deselect:one\", this._onDeselectOneBundle);\n\n\t\tthis.skipTransitions = true;\n\t\tthis.itemViews = [];\n\n\t\t// this.progressWrapper = this.createProgressWrapper(),\n\t\t// this.el.appendChild(this.progressWrapper.el);\n\t},\n\n\t/* --------------------------- *\n\t/* Render\n\t/* --------------------------- */\n\n\trenderFrame: function(tstamp, flags) {\n\t\t// values\n\t\tvar collapsed = this.model.get(\"collapsed\");\n\t\tvar collapsedChanged = (flags & View.MODEL_INVALID)\n\t\t\t&& this.model.hasChanged(\"collapsed\");\n\t\tvar childrenChanged = (flags & View.MODEL_INVALID)\n\t\t\t&& (this.model.hasChanged(\"bundle\") || this.model.hasChanged(\"article\"));\n\n\t\t// flags\n\t\tvar sizeChanged = !!(flags & View.SIZE_INVALID);\n\t\tvar transformsChanged = !!(flags & (View.MODEL_INVALID | View.SIZE_INVALID | View.LAYOUT_INVALID));\n\t\ttransformsChanged = transformsChanged || this._transformsChanged || this.skipTransitions;\n\n\t\t// debug\n\t\t// - - - - - - - - - - - - - - - - -\n\t\t// if (flags & View.MODEL_INVALID) {\n\t\t// \tconsole.group(this.cid + \"::renderFrame model changed:\");\n\t\t// \tObject.keys(this.model.changed).forEach(function(key) {\n\t\t// \t\tconsole.log(\"\\t%s: %s -> %s\", key, this.model._previousAttributes[key], this.model.changed[key]);\n\t\t// \t}, this);\n\t\t// \tconsole.groupEnd();\n\t\t// }\n\n\t\t// model:children\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tif (childrenChanged) {\n\t\t\tthis.removeChildren();\n\t\t\tif (bundles.selected) {\n\t\t\t\tthis.createChildren(bundles.selected);\n\t\t\t} else\n\t\t\tif (articles.selected) {\n\t\t\t\tthis.createChildren(articles.selected);\n\t\t\t}\n\t\t}\n\n\t\t// model:collapsed\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tif (collapsedChanged) {\n\t\t\tthis.el.classList.toggle(\"container-collapsed\", collapsed);\n\t\t\tthis.el.classList.toggle(\"container-expanded\", !collapsed);\n\t\t}\n\n\t\t// size\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tif (sizeChanged) {\n\t\t\tthis.transforms.clearAllCaptures();\n\t\t}\n\n\t\t// transforms\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tif (transformsChanged) {\n\t\t\tthis.el.classList.remove(\"container-changing\");\n\t\t\tif (this.skipTransitions) {\n\t\t\t\tthis.transforms.stopAllTransitions();\n\t\t\t\tthis.el.classList.remove(\"container-changed\");\n\t\t\t\tif (!childrenChanged) {\n\t\t\t\t\t// this.transforms.clearAllOffsets();\n\t\t\t\t\tif (collapsedChanged) {\n\t\t\t\t\t\tthis._setChildrenEnabled(collapsed);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!childrenChanged) {\n\t\t\t\t\tif (collapsedChanged) {\n\t\t\t\t\t\tvar afterTransitionsFn;\n\t\t\t\t\t\tthis.el.classList.add(\"container-changed\");\n\t\t\t\t\t\t// this.transforms.clearAllOffsets();\n\t\t\t\t\t\tif (collapsed) {\n\t\t\t\t\t\t\t// container-collapsed, enable last\n\t\t\t\t\t\t\tafterTransitionsFn = function() {\n\t\t\t\t\t\t\t\tthis._setChildrenEnabled(true);\n\t\t\t\t\t\t\t\tthis.el.classList.remove(\"container-changed\");\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.transforms.runAllTransitions(tx.LAST);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// container-expanded, disable first\n\t\t\t\t\t\t\tafterTransitionsFn = function() {\n\t\t\t\t\t\t\t\tthis.el.classList.remove(\"container-changed\");\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis._setChildrenEnabled(false);\n\t\t\t\t\t\t\tthis.transforms.runAllTransitions(tx.FIRST);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tafterTransitionsFn = afterTransitionsFn.bind(this);\n\t\t\t\t\t\tthis.transforms.whenAllTransitionsEnd().then(afterTransitionsFn, afterTransitionsFn);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.transforms.items.forEach(function(o) {\n\t\t\t\t\t\t\tif (o.hasOffset) {\n\t\t\t\t\t\t\t\to.runTransition(tx.NOW);\n\t\t\t\t\t\t\t\t// o.clearOffset();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!childrenChanged) {\n\t\t\t\tthis.transforms.clearAllOffsets();\n\t\t\t}\n\t\t\tthis.transforms.validate();\n\t\t}\n\t\tif (sizeChanged) {\n\t\t\tthis.itemViews.forEach(function(view) {\n\t\t\t\tview.skipTransitions = this.skipTransitions;\n\t\t\t\tview.requestRender(View.SIZE_INVALID).renderNow();\n\t\t\t}, this);\n\t\t\t/*Promise.all(this.itemViews.map(function(view) {\n\t\t\t\t\tview.skipTransitions = this.skipTransitions;\n\t\t\t\t\treturn view.requestRender(View.SIZE_INVALID).whenRendered();\n\t\t\t\t}, this))\n\t\t\t\t.then(\n\t\t\t\t\tfunction(views) {\n\t\t\t\t\t\tvar nh = this.el.offsetParent.offsetHeight - this.el.offsetTop;\n\t\t\t\t\t\t// var oh = views.reduce(function(h, view) {\n\t\t\t\t\t\t// \treturn Math.max(h, view.el.offsetHeight);\n\t\t\t\t\t\t// }, nh);\n\t\t\t\t\t\t// oh++;\n\t\t\t\t\t\t// console.log(\"%s:[whenRendered] [result: %s %s] %o\", this.cid,\n\t\t\t\t\t\t// \tnh, oh, this.el.parent, views);\n\t\t\t\t\t\tthis.el.style.minHeight = nh + \"px\";\n\t\t\t\t\t\treturn views;\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\tfunction(reason) {\n\t\t\t\t\t\tconsole.warn(\"%s:[whenRendered] [rejected] %o\", this.cid, reason);\n\t\t\t\t\t\treturn reason;\n\t\t\t\t\t}.bind(this)\n\t\t\t\t);*/\n\t\t}\n\t\tthis.skipTransitions = this._transformsChanged = false;\n\t},\n\n\t_setChildrenEnabled: function(enabled) {\n\t\t// if (enabled) {\n\t\t// \tthis.el.removeEventListener(\"click\", this._onCollapsedClick, false);\n\t\t// } else {\n\t\t// \tthis.el.addEventListener(\"click\", this._onCollapsedClick, false);\n\t\t// }\n\t\tthis.itemViews.forEach(function(view) {\n\t\t\tview.setEnabled(enabled);\n\t\t});\n\t},\n\n\t/* -------------------------------\n\t/* Collapse UI gestures/events\n\t/* ------------------------------- */\n\n\t_onCollapsedEvent: function(ev) {\n\t\tconsole.log(\"%s:[%s -> _onCollapsedEvent] target: %s\", this.cid, ev.type, ev.target);\n\t\tif (!ev.defaultPrevented &&\n\t\t\tthis.model.has(\"bundle\") &&\n\t\t\t!this.model.get(\"collapsed\") &&\n\t\t\t!this.enabled) {\n\t\t\t// this.setImmediate(function() {\n\t\t\t// if (ev.type == \"click\") ev.stopPropagation();\n\t\t\tev.preventDefault();\n\t\t\tthis.setImmediate(function() {\n\t\t\t\t// if (ev.type == \"click\") ev.stopPropagation();\n\t\t\t\tthis.model.set(\"collapsed\", true);\n\t\t\t});\n\t\t\t// });\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* model changed\n\t/* --------------------------- */\n\n\t_onModelChange: function() {\n\t\tif (this.model.hasAnyChanged(\"bundle\")) {\n\t\t\tif (this.model.has(\"bundle\")) {\n\t\t\t\tthis.vpan.on(\"vpanstart\", this._onVPanStart);\n\t\t\t} else {\n\t\t\t\tthis.vpan.off(\"vpanstart\", this._onVPanStart);\n\t\t\t}\n\t\t}\n\t\t/*\n\t\tif (this.model.hasChanged(\"withBundle\") ||\n\t\t\tthis.model.hasChanged(\"collapsed\")) {\n\t\t\tif (this.model.get(\"withBundle\") &&\n\t\t\t\t!this.model.get(\"collapsed\")) {\n\t\t\t\tthis.hpan.on(\"hpanleft hpanright\", this._onCollapsedEvent);\n\t\t\t\tthis.el.addEventListener(View.CLICK_EVENT, this._onCollapsedEvent, false);\n\t\t\t} else {\n\t\t\t\tthis.hpan.off(\"hpanleft hpanright\", this._onCollapsedEvent);\n\t\t\t\tthis.el.removeEventListener(View.CLICK_EVENT, this._onCollapsedEvent, false);\n\t\t\t}\n\t\t}\n\t\t*/\n\t\tthis.requestRender(View.MODEL_INVALID);\n\t},\n\n\t/* -------------------------------\n\t/* Vertical touch/move (_onVPan*)\n\t/* ------------------------------- */\n\n\t_collapsedOffsetY: Globals.COLLAPSE_OFFSET,\n\n\t_onVPanStart: function(ev) {\n\t\tthis.vpan.on(\"vpanmove\", this._onVPanMove);\n\t\tthis.vpan.on(\"vpanend vpancancel\", this._onVPanFinal);\n\n\t\tthis.transforms.stopAllTransitions();\n\t\t// this.transforms.clearAllOffsets();\n\t\t// this.transforms.validate();\n\t\tthis.transforms.clearAllCaptures();\n\n\t\tthis.el.classList.add(\"container-changing\");\n\t\tthis._onVPanMove(ev);\n\t},\n\n\t_onVPanMove: function(ev) {\n\t\tvar collapsed = this.model.get(\"collapsed\");\n\t\tvar delta = ev.deltaY; //ev.thresholdDeltaY;\n\t\tvar maxDelta = this._collapsedOffsetY; // + Math.abs(ev.thresholdOffsetY);\n\n\t\t// check if direction is aligned with collapsed/expand\n\t\tvar isValidDir = collapsed ? (delta > 0) : (delta < 0);\n\t\tvar moveFactor = collapsed ? Globals.VPAN_DRAG : 1 - Globals.VPAN_DRAG;\n\n\t\tdelta = Math.abs(delta); // remove sign\n\t\tdelta *= moveFactor;\n\t\tmaxDelta *= moveFactor;\n\n\t\tif (isValidDir) {\n\t\t\tif (delta > maxDelta) { // overshooting\n\t\t\t\tdelta = ((delta - maxDelta) * Globals.VPAN_OUT_DRAG) + maxDelta;\n\t\t\t} else { // no overshooting\n\t\t\t\t// delta = delta;\n\t\t\t}\n\t\t} else {\n\t\t\tdelta = (-delta) * Globals.VPAN_OUT_DRAG; // delta is opposite\n\t\t}\n\t\tdelta *= collapsed ? 1 : -1; // reapply sign\n\n\t\tthis.transforms.offsetAll(0, delta);\n\t\tthis.transforms.validate();\n\t},\n\n\t_onVPanFinal: function(ev) {\n\t\tthis.vpan.off(\"vpanmove\", this._onVPanMove);\n\t\tthis.vpan.off(\"vpanend vpancancel\", this._onVPanFinal);\n\n\t\t// FIXME: model.collapsed may have already changed, _onVPanMove would run with wrong values:\n\t\t// model.collapsed is changed in a setImmediate callback from NavigationView.\n\n\t\tthis._onVPanMove(ev);\n\t\tthis.setImmediate(function() {\n\t\t\tthis._transformsChanged = true;\n\t\t\tthis.requestRender();\n\t\t});\n\t},\n\n\t// willCollapsedChange: function(ev) {\n\t// \tvar collapsed = this.model.get(\"collapsed\");\n\t// \treturn ev.type == \"vpanend\"? collapsed?\n\t// \t\tev.thresholdDeltaY > Globals.COLLAPSE_THRESHOLD :\n\t// \t\tev.thresholdDeltaY < -Globals.COLLAPSE_THRESHOLD :\n\t// \t\tfalse;\n\t// },\n\n\t/* -------------------------------\n\t/* create/remove children on bundle selection\n\t/* ------------------------------- */\n\n\t/** Create children on bundle select */\n\tcreateChildren: function(model) {\n\t\tvar view;\n\t\tif (model.__proto__.constructor === bundles.model) {\n\t\t\t// will be attached to dom in this order\n\t\t\tview = this.createMediaCaptionStack(model);\n\t\t\tthis.itemViews.push(view);\n\t\t\tthis.transforms.add(view.el);\n\t\t\tview = this.createMediaCarousel(model);\n\t\t\tthis.itemViews.push(view);\n\t\t\tthis.transforms.add(view.el);\n\t\t\tview = this.createMediaDotNavigation(model);\n\t\t\tthis.itemViews.push(view);\n\t\t} else\n\t\tif (model.__proto__.constructor === articles.model) {\n\t\t\tview = this.createArticleView(model);\n\t\t\tthis.itemViews.push(view);\n\t\t}\n\n\t\tthis.itemViews.forEach(function(view) {\n\t\t\tif (!this.skipTransitions) {\n\t\t\t\tview.el.classList.add(\"adding-child\");\n\t\t\t\tview.el.style.opacity = 0;\n\t\t\t}\n\t\t\tthis.el.appendChild(view.el);\n\t\t\tview.render();\n\t\t}, this);\n\n\t\tif (!this.skipTransitions) {\n\t\t\tthis.requestAnimationFrame(function() {\n\t\t\t\tconsole.log(\"%s::createChildren::[callback:requestAnimationFrame]\", this.cid);\n\t\t\t\tthis.itemViews.forEach(function(view) {\n\t\t\t\t\tif (!this.skipTransitions) {\n\t\t\t\t\t\tview.el.style[transitionProp] = \"opacity \" + tx.LAST.cssText;\n\t\t\t\t\t}\n\t\t\t\t\tview.el.style.removeProperty(\"opacity\");\n\t\t\t\t}, this);\n\t\t\t});\n\t\t}\n\t},\n\n\tremoveChildren: function() {\n\t\tthis.itemViews.forEach(function(view, i, arr) {\n\t\t\tthis.transforms.remove(view.el);\n\t\t\tif (this.skipTransitions) {\n\t\t\t\tview.remove();\n\t\t\t} else {\n\t\t\t\tvar s = window.getComputedStyle(view.el);\n\t\t\t\tif (s.opacity == \"0\" || s.visibility == \"hidden\") {\n\t\t\t\t\tconsole.log(\"%s::removeChildren [view:%s] removed immediately (invisible)\", this.cid, view.cid);\n\t\t\t\t\tview.remove();\n\t\t\t\t} else {\n\t\t\t\t\tview.el.classList.add(\"removing-child\");\n\t\t\t\t\tif (s[transformProp]) view.el.style[transformProp] = s[transformProp];\n\t\t\t\t\tview.el.style[transitionProp] = \"opacity \" + tx.FIRST.cssText;\n\t\t\t\t\tview.el.style.opacity = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tarr[i] = null;\n\t\t}, this);\n\t\tthis.itemViews.length = 0;\n\t},\n\n\t_onAddedTransitionEnd: function(ev) {\n\t\tif (ev.target.cid && this.childViews.hasOwnProperty(ev.target.cid)) {\n\t\t\tconsole.log(\"%s::_onAddedTransitionEnd [view:%s] [prop:%s] [ev:%s]\", this.cid, ev.target.cid, ev.propertyName, ev.type);\n\t\t\tvar view = this.childViews[ev.target.cid];\n\t\t\tview.el.classList.remove(\"adding-child\");\n\t\t\tview.el.style.removeProperty(transitionProp);\n\t\t}\n\t},\n\n\t_onRemovedTransitionEnd: function(ev) {\n\t\tif (ev.target.cid && this.childViews.hasOwnProperty(ev.target.cid)) {\n\t\t\tconsole.log(\"%s::_onRemovedTransitionEnd [view:%s] [prop:%s] [ev:%s]\", this.cid, ev.target.cid, ev.propertyName, ev.type);\n\t\t\tvar view = this.childViews[ev.target.cid];\n\t\t\tview.el.classList.remove(\"removing-child\");\n\t\t\tview.remove();\n\t\t}\n\t},\n\n\t// purgeChildren: function() {\n\t// \tvar i, el, els = this.el.querySelectorAll(\".removing-child\");\n\t// \tfor (i = 0; i < els.length; i++) {\n\t// \t\tel = els.item(i);\n\t// \t\tif (el.parentElement === this.el) {\n\t// \t\t\ttry {\n\t// \t\t\t\tconsole.error(\"%s::purgeChildren\", this.cid, el.getAttribute(\"data-cid\"));\n\t// \t\t\t\tView.findByElement(el).remove();\n\t// \t\t\t} catch (err) {\n\t// \t\t\t\tconsole.error(\"s::purgeChildren\", this.cid, \"orphaned element\", err);\n\t// \t\t\t\tthis.el.removeChild(el);\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t// },\n\n\t/* -------------------------------\n\t/* Components\n\t/* ------------------------------- */\n\n\n\t/**\n\t * media-carousel\n\t */\n\tcreateMediaCarousel: function(bundle) {\n\t\t// Create carousel\n\t\tvar EmptyRenderer = CarouselRenderer.extend({\n\t\t\tclassName: \"carousel-item empty-item\",\n\t\t\tmodel: bundle,\n\t\t\ttemplate: carouselEmptyTemplate,\n\t\t});\n\t\tvar rendererFunction = function(item, index, arr) {\n\t\t\tif (index === -1) {\n\t\t\t\treturn EmptyRenderer;\n\t\t\t}\n\t\t\tswitch (item.attr(\"@renderer\")) {\n\t\t\t\tcase \"video\":\n\t\t\t\t\treturn VideoRenderer;\n\t\t\t\tcase \"sequence\":\n\t\t\t\t\treturn SequenceRenderer;\n\t\t\t\tcase \"image\":\n\t\t\t\t\treturn ImageRenderer;\n\t\t\t\tdefault:\n\t\t\t\t\treturn ImageRenderer;\n\t\t\t}\n\t\t};\n\t\tvar view = new Carousel({\n\t\t\tclassName: \"media-carousel \" + bundle.get(\"domid\"),\n\t\t\tcollection: bundle.get(\"media\"),\n\t\t\trendererFunction: rendererFunction,\n\t\t\trequireSelection: !!(bundle.attr(\"@no-desc\")),\n\t\t\t// direction: Carousel.DIRECTION_HORIZONTAL,\n\t\t\ttouch: this.hpan,\n\t\t});\n\t\tcontroller.listenTo(view, {\n\t\t\t\"view:select:one\": (model) => {\n\t\t\t\tconsole.log(\"%s:[view:select:one] %s\", view.cid, model.cid);\n\t\t\t\tcontroller.selectMedia(model);\n\t\t\t},\n\t\t\t\"view:select:none\": controller.deselectMedia,\n\t\t\t// \"view:removed\": controller.stopListening\n\t\t});\n\t\tview.listenTo(bundle, \"deselected\", function() {\n\t\t\tthis.stopListening(this.collection);\n\t\t\tcontroller.stopListening(this);\n\t\t});\n\t\treturn view;\n\t},\n\n\t/**\n\t * media-caption-stack\n\t */\n\tcreateMediaCaptionStack: function(bundle) {\n\t\tvar view = new CollectionStack({\n\t\t\tclassName: \"media-caption-stack\",\n\t\t\tcollection: bundle.get(\"media\"),\n\t\t\ttemplate: mediaStackTemplate\n\t\t});\n\t\tview.listenTo(bundle, \"deselected\", function() {\n\t\t\tthis.stopListening(this.collection);\n\t\t});\n\t\treturn view;\n\t},\n\n\t/**\n\t * media-dotnav\n\t */\n\tcreateMediaDotNavigation: function(bundle) {\n\t\tvar view = new SelectableListView({\n\t\t\tclassName: \"media-dotnav dots-fontface color-fg05\",\n\t\t\tcollection: bundle.get(\"media\"),\n\t\t\trenderer: DotNavigationRenderer\n\t\t});\n\t\tcontroller.listenTo(view, {\n\t\t\t\"view:select:one\": controller.selectMedia,\n\t\t\t\"view:select:none\": controller.deselectMedia,\n\t\t\t// \"view:removed\": controller.stopListening\n\t\t});\n\t\tview.listenTo(bundle, \"deselected\", function() {\n\t\t\tthis.stopListening(this.collection);\n\t\t\tcontroller.stopListening(this);\n\t\t});\n\t\treturn view;\n\t},\n\n\t/**\n\t * @param el {module:app/model/item/ArticleView}\n\t * @return {module:app/view/base/View}\n\t */\n\tcreateArticleView: function(article) {\n\t\tvar view = new ArticleView({\n\t\t\tmodel: article,\n\t\t});\n\t\treturn view;\n\t},\n\n\t// createProgressWrapper: function() {\n\t// \t// var view = new ProgressMeter({\n\t// \t// \tid: \"media-progress-wrapper\",\n\t// \t// \t// className: \"color-bg color-fg05\",\n\t// \t// \tuseOpaque: false,\n\t// \t// \tlabelFn: function() { return \"0%\"; }\n\t// \t// });\n\t// \t// this.el.appendChild(this.progressWrapper.el);\n\t// \t// return view;\n\t// \treturn null;\n\t// },\n});\n",
    "/**\n * @module app/view/NavigationView\n */\n\n/** @type {module:hammerjs} */\nconst Hammer = require(\"hammerjs\");\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:utils/TransformHelper} */\nconst TransformHelper = require(\"utils/TransformHelper\");\n// /** @type {module:app/view/base/TouchManager} */\n// var TouchManager = require(\"app/view/base/TouchManager\");\n\n/** @type {module:app/control/Controller} */\nconst controller = require(\"app/control/Controller\");\n/** @type {module:app/model/collection/TypeCollection} */\nconst types = require(\"app/model/collection/TypeCollection\");\n/** @type {module:app/model/collection/KeywordCollection} */\nconst keywords = require(\"app/model/collection/KeywordCollection\");\n/** @type {module:app/model/collection/BundleCollection} */\nconst bundles = require(\"app/model/collection/BundleCollection\");\n/** @type {module:app/model/collection/ArticleCollection} */\nconst articles = require(\"app/model/collection/ArticleCollection\");\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {module:app/view/component/FilterableListView} */\nconst FilterableListView = require(\"app/view/component/FilterableListView\");\n/** @type {module:app/view/component/GroupingListView} */\nconst GroupingListView = require(\"app/view/component/GroupingListView\");\n// /** @type {module:app/view/component/CollectionPager} */\n// var CollectionPager = require(\"app/view/component/CollectionPager\");\n/** @type {module:app/view/component/GraphView} */\nconst GraphView = require(\"app/view/component/GraphView\");\n/** @type {module:app/view/component/ArticleButton} */\nconst ArticleButton = require(\"app/view/component/ArticleButton\");\n\n// /** @type {module:utils/prefixedProperty} */\n// var prefixedProperty = require(\"utils/prefixedProperty\");\n\n// var traceElement = require(\"utils/debug/traceElement\");\n\nvar tx = Globals.transitions;\n\nvar txNow = _.clone(tx.NOW);\ntxNow.easing = \"ease\";\n// var hTx = _.clone(collapsed ? tx.LAST : tx.FIRST);\n// hTx.easing = \"ease\";\n\n/**\n * @constructor\n * @type {module:app/view/NavigationView}\n */\nmodule.exports = View.extend({\n\n\t// /** @override */\n\t// tagName: \"div\",\n\t/** @override */\n\tcidPrefix: \"navigationView\",\n\t/** @override */\n\tclassName: \"navigation container-expanded\",\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\t_.bindAll(this, \"_onVPanStart\", \"_onVPanMove\", \"_onVPanFinal\");\n\t\t_.bindAll(this, \"_onHPanStart\", \"_onHPanMove\", \"_onHPanFinal\");\n\t\t_.bindAll(this, \"_onNavigationClick\");\n\t\t// _.bindAll(this, \"_whenTransitionsEnd\", \"_whenTransitionsAbort\");\n\t\t// _.bindAll(this, \"_whenListsRendered\");\n\n\t\t// this._metrics = {\n\t\t// \tminHeight: 0\n\t\t// };\n\t\tthis.itemViews = [];\n\t\tthis.transforms = new TransformHelper();\n\t\t// this.touch = options.touch || new Error(\"no touch\"); //TouchManager.getInstance();\n\t\tthis.vpan = options.vpan || new Error(\"no vpan\");\n\t\tthis.hpan = options.hpan || new Error(\"no hpan\");\n\n\t\tthis.listenTo(this.model, \"change\", this._onModelChange);\n\t\tthis.listenTo(keywords, \"select:one select:none\", this._onKeywordSelect);\n\t\t// this.listenTo(this.model, \"withBundle:change\", this._onwithBundleChange);\n\n\t\tthis.vpanGroup = this.el.querySelector(\"#vpan-group\");\n\t\t// this.el.style.touchAction = \"none\";\n\t\t// this.el.style.webkitUserSelect = \"none\";\n\t\t// this.el.style.webkitUserDrag = \"none\";\n\n\t\tthis.keywordList = this.createKeywordList();\n\t\tthis.bundleList = this.createBundleList();\n\t\tthis.itemViews.push(this.keywordList);\n\t\tthis.itemViews.push(this.bundleList);\n\n\t\tthis.graph = this.createGraphView(this.bundleList,\n\t\t\tthis.keywordList, this.vpanGroup);\n\n\t\tthis.sitename = this.createSitenameButton();\n\t\tthis.about = this.createAboutButton();\n\n\t\t/* NOTE: .list-group .label moves horizontally (cf. sass/layouts/*.scss) */\n\t\tthis.hGroupings = this.keywordList.el.querySelectorAll(\".list-group .label\");\n\n\t\tthis.transforms.add(\n\t\t\tthis.vpanGroup,\n\t\t\tthis.bundleList.wrapper,\n\t\t\tthis.keywordList.wrapper,\n\t\t\tthis.bundleList.el,\n\t\t\tthis.keywordList.el,\n\t\t\tthis.hGroupings,\n\t\t\tthis.sitename.wrapper,\n\t\t\tthis.about.wrapper,\n\t\t\tthis.sitename.el,\n\t\t\tthis.about.el,\n\t\t\tthis.graph.el\n\t\t);\n\t\t// this.itemViews.push(this.graph);\n\t\t// this.listenTo(this.graph, {\n\t\t// \t\"canvas:update\": this._onGraphUpdate,\n\t\t// \t\"canvas:redraw\": this._onGraphRedraw,\n\t\t// });\n\n\t\t/*this.listenTo(this.graph, \"view:render:before\", function(view, flags) {\n\t\t\tvar vmax;\n\t\t\tif (!view.el.style.height) {\n\t\t\t\t// if (flags & (View.SIZE_INVALID | View.MODEL_INVALID)) {\n\t\t\t\t// if ((this.bundleList.renderFlags | View.SIZE_INVALID) ||\n\t\t\t\t// \t(this.keywordList.renderFlags | View.SIZE_INVALID)) {\n\t\t\t\t// }\n\t\t\t\tvmax = Math.max(\n\t\t\t\t\tthis.bundleList._metrics.height,\n\t\t\t\t\tthis.keywordList._metrics.height\n\t\t\t\t);\n\t\t\t\tif (_.isNumber(vmax)) {\n\t\t\t\t\tview.el.style.height = vmax + \"px\";\n\t\t\t\t\tconsole.log(\"%s:[view:render:before][once]:%s [%s] heights:[%i, %i] (max %i)\",\n\t\t\t\t\t\tthis.cid, view.cid, View.flagsToString(flags),\n\t\t\t\t\t\tthis.bundleList._metrics.height,\n\t\t\t\t\t\tthis.keywordList._metrics.height,\n\t\t\t\t\t\tvmax);\n\t\t\t\t}\n\t\t\t}\n\t\t});*/\n\t\t// this.listenTo(this.bundleList, \"view:render:after\", function(view, flags) {\n\t\t// \tconsole.info(\"%s:[view:render:after %s]\", this.cid, view.cid, View.flagsToString(flags & View.SIZE_INVALID));\n\t\t// \t\tif (flags & View.SIZE_INVALID) {\n\t\t// \t\t\t// console.info(\"%s:[%s view:render:after] bundleList height\", this.cid, view.cid, this.bundleList.el.style.height);\n\t\t// \t\t\t// this.graph.el.style.height = this.bundleList.el.style.height;\n\t\t// \t\t\tthis.graph.el.style.opacity = this.bundleList.collapsed? 0 : 1;\n\t\t// \t\t\tthis.graph.requestRender(View.SIZE_INVALID).renderNow();\n\t\t// \t// \t}\n\t\t// });\n\t\t// this.listenTo(this.bundleList, \"view:render:after\", this._onListResize);\n\t\t// this.listenTo(this.keywordList, \"view:render:after\", this._onListResize);\n\t},\n\n\t/* --------------------------- *\n\t/* Render\n\t/* --------------------------- */\n\n\trenderFrame: function(tstamp, flags) {\n\t\tif (flags & View.MODEL_INVALID) {\n\t\t\tif (this.model.hasChanged(\"collapsed\")) {\n\t\t\t\tthis.el.classList.toggle(\"container-collapsed\", this.model.get(\"collapsed\"));\n\t\t\t\tthis.el.classList.toggle(\"container-expanded\", !this.model.get(\"collapsed\"));\n\t\t\t}\n\t\t\tif (this.model.hasChanged(\"collapsed\")\n\t\t\t\t|| this.model.hasChanged(\"withBundle\")) {\n\t\t\t\tthis.el.classList.add(\"container-changing\");\n\t\t\t}\n\t\t\tif (this.model.hasChanged(\"routeName\")) {\n\t\t\t\tthis.bundleList.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t\t\tthis.keywordList.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t\t}\n\t\t}\n\n\t\t// transforms\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tif (this.skipTransitions ||\n\t\t\t(flags & View.ALL_INVALID)) {\n\t\t\t// (flags & (View.MODEL_INVALID | View.SIZE_INVALID | View.LAYOUT_INVALID))) {\n\t\t\t// if (transformsChanged) {\n\t\t\tif (this.skipTransitions) {\n\t\t\t\tthis.transforms.stopAllTransitions();\n\t\t\t\tthis.transforms.validate();\n\t\t\t\tthis.transforms.clearAllOffsets();\n\t\t\t} else {\n\t\t\t\tthis.renderTransitions(flags);\n\t\t\t}\n\t\t\tthis.transforms.validate();\n\t\t\t// console.log(\"%s::renderFrame %o\", this.cid,\n\t\t\t// \tthis.transforms.items.map(function(o) {\n\t\t\t// \t\treturn traceElement(o.el) + \":\" +\n\t\t\t// \t\t\t(o.hasTransition ? o.transition.name : \"-\");\n\t\t\t// \t}));\n\t\t}\n\t\t// if (this.model.hasChanged(\"collapsed\") && this.model.get(\"collapsed\")) {\n\t\t// \tthis.el.style.height = \"\";\n\t\t// \t// this.el.style.minHeight = hval + \"px\";\n\t\t// \tthis.graph.el.style.height = \"\";\n\t\t// }\n\n\t\t// promise handlers\n\t\t// - - - - - - - - - - - - - - - - -\n\n\t\tvar measureRenderedLists = function(result) {\n\t\t\t// var hval = result.reduce(function(a, o) {\n\t\t\t// \treturn Math.max(a, o.metrics.height);\n\t\t\t// }, 0);\n\t\t\tvar hval = Math.max(\n\t\t\t\tthis.bundleList.metrics.height,\n\t\t\t\tthis.keywordList.metrics.height);\n\n\t\t\tif (this.model.get(\"collapsed\")) {\n\t\t\t\tthis.el.style.height = \"\";\n\t\t\t\t// this.el.style.minHeight = hval + \"px\";\n\t\t\t\tthis.graph.el.style.height = \"\";\n\t\t\t} else {\n\t\t\t\tthis.el.style.height = hval + \"px\";\n\t\t\t\t// this.el.style.minHeight = \"\";\n\t\t\t\tthis.graph.el.style.height = hval + \"px\";\n\t\t\t}\n\t\t\t// this.el.style.height = this.model.get(\"collapsed\") ? \"\" : \"100%\";\n\t\t\t// this.vpanGroup.style.height = hval;\n\t\t\tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t\tconsole.log(\"%s:[whenListsRenderedDone] height set to %s\", this.cid, this.model.get(\"collapsed\") ? hval + \"px\" : \"[not set]\", result);\n\t\t\tthis.trigger(\"view:collapsed:measured\", this);\n\t\t\treturn result;\n\t\t}.bind(this);\n\n\t\tvar toggleGraph = function(result) {\n\t\t\tthis.graph.enabled = !this.model.get(\"collapsed\");\n\t\t\tthis.graph.valueTo(\"a2b\", 0, 0);\n\t\t\tif (!this.model.get(\"collapsed\")) {\n\t\t\t\tthis.graph.valueTo(\"a2b\", 1, Globals.TRANSITION_DURATION);\n\t\t\t}\n\t\t\treturn result;\n\t\t}.bind(this);\n\n\t\tvar whenCollapsedChangeDone = function(result) {\n\t\t\tconsole.log(\"%s:[whenCollapsedChangeDone][flags: %s]\", this.cid, View.flagsToString(flags), result);\n\t\t\tthis.el.classList.remove(\"container-changing\");\n\t\t\tthis.trigger(\"view:collapsed:end\", this);\n\t\t\treturn result;\n\t\t}.bind(this);\n\n\t\t// promises\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tvar p;\n\t\t// p = Promise.all([\n\t\t// \t\tthis.bundleList.whenRendered(),\n\t\t// \t\tthis.keywordList.whenRendered(),\n\t\t// \t\tthis.bundleList.whenCollapseChangeEnds(),\n\t\t// \t\tthis.keywordList.whenCollapseChangeEnds(),\n\t\t// \t\tthis.transforms.whenAllTransitionsEnd(),\n\t\t// \t]);\n\n\t\tp = Promise.all([\n\t\t\t\tthis.bundleList.whenCollapseChangeEnds(),\n\t\t\t\tthis.keywordList.whenCollapseChangeEnds(),\n\t\t\t])\n\t\t\t.then(measureRenderedLists);\n\n\t\tif ((flags & View.MODEL_INVALID) && this.model.hasChanged(\"collapsed\")) {\n\t\t\tp = p.then(toggleGraph);\n\t\t}\n\t\tp\n\t\t\t.then(this.transforms.whenAllTransitionsEnd())\n\t\t\t.then(whenCollapsedChangeDone, function(reason) {\n\t\t\t\tconsole.error(reason);\n\t\t\t})\n\t\t\t.catch(function(reason) {\n\t\t\t\tconsole.warn(\"%s::renderFrame promise rejected\", this.cid);\n\t\t\t}.bind(this));\n\n\t\t/*\n\t\tvar whenListsRendered = Promise.all([\n\t\t\tthis.bundleList.whenRendered(),\n\t\t\tthis.keywordList.whenRendered()\n\t\t]);\n\n\t\tvar whenTransformsEnd = this.transforms.promise();\n\n\t\twhenListsRendered.then(\n\t\t\twhenListsRenderedDone,\n\t\t\tfunction(reason) {\n\t\t\t\tconsole.warn(\"%s:[whenListsRendered] failed: %o\", this.cid, reason);\n\t\t\t\treturn reason;\n\t\t\t}.bind(this)\n\t\t);\n\n\t\tPromise.all([\n\t\t\twhenListsRendered,\n\t\t\twhenTransformsEnd\n\t\t])\n\t\t\t.then(\n\t\t\t\tfunction(result) {\n\t\t\t\t\tconsole.log(\"%s:[whenListsRendered+whenTransformsEnd] [%s]\", this.cid, View.flagsToString(flags), result);\n\t\t\t\t\tthis.el.classList.remove(\"container-changing\");\n\t\t\t\t\tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction(reason) {\n\t\t\t\t\tconsole.warn(\"%s:[whenListsRendered+whenTransformsEnd] [%s]\", this.cid, View.flagsToString(flags), reason);\n\t\t\t\t\tthis.el.classList.remove(\"container-changing\");\n\t\t\t\t\tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t\t\t}.bind(this)\n\t\t\t);*/\n\n\n\t\t// trace result handlers\n\t\t// - - - - - - - - - - - - - - - - -\n\t\t/*if (this.model.hasChanged(\"collapsed\")) {\n\t\t\tvar msgBase = this.model.get(\"collapsed\") ? \"collaps\" : \"expand\";\n\t\t\tPromise.all([\n\t\t\t\tPromise.all([\n\t\t\t\t\t\tthis.bundleList.whenRendered(),\n\t\t\t\t\t\tthis.keywordList.whenRendered()\n\t\t\t\t\t])\n\t\t\t\t\t.then(\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tconsole.log(\"nav-tx:%sing\", msgBase, arguments);\n\t\t\t\t\t\t}),\n\t\t\t\tthis.transforms.promise()\n\t\t\t])\n\t\t\t\t.catch(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tconsole.warn(\"nav-tx:%sed [rejected]\", msgBase, arguments);\n\t\t\t\t\t})\n\t\t\t\t.finally(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tconsole.log(\"nav-tx:%sed\", msgBase, arguments);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t}*/\n\n\t\t// graph\n\t\t// - - - - - - - - - - - - - - - - -\n\t\t// if ((flags & (View.SIZE_INVALID | ~View.MODEL_INVALID))\n\t\t// \t/* collapsed has not changed, no bundle selected */\n\t\t// \t&& !this.model.hasChanged(\"collapsed\")\n\t\t// \t&& !this.model.get(\"withBundle\")) {\n\t\t// \tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t// \tif (!this.skipTransitions) {\n\t\t// \t\tthis.graph.renderNow();\n\t\t// \t}\n\t\t// }\n\t\t// else\n\t\t// if ((flags & View.SIZE_INVALID) && !this.model.get(\"collapsed\")) {\n\t\t// \t/* NavigationView has resized while uncollapsed,\n\t\t// \tbut model is unchanged */\n\t\t// \tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t// }\n\n\n\t\t// children loop\n\t\t// - - - - - - - - - - - - - - - - -\n\t\tthis.itemViews.forEach(function(view) {\n\t\t\t// view.skipTransitions = view.skipTransitions || this.skipTransitions;\n\t\t\tif (this.skipTransitions) {\n\t\t\t\tview.skipTransitions = true;\n\t\t\t}\n\t\t\tif (flags & View.SIZE_INVALID) {\n\t\t\t\tview.requestRender(View.SIZE_INVALID);\n\t\t\t}\n\t\t\t// if (!view.skipTransitions) {\n\t\t\tview.renderNow();\n\t\t\t// }\n\t\t}, this);\n\n\t\tthis.requestAnimationFrame(function() {\n\t\t\tthis.skipTransitions = false;\n\t\t});\n\t},\n\n\t/*_whenListsRendered: function(result) {\n\t\tvar hval;\n\t\tif (this.model.get(\"collapsed\")) {\n\t\t\tthis.el.style.height = \"\";\n\t\t\t// this.graph.el.style.height = \"100%\";\n\t\t} else {\n\t\t\t// hval = result.reduce(function(a, o) {\n\t\t\t// \treturn Math.max(a, o.metrics.height);\n\t\t\t// }, 0);\n\t\t\thval = Math.max(\n\t\t\t\tthis.bundleList.metrics.height,\n\t\t\t\tthis.keywordList.metrics.height);\n\t\t\tthis.el.style.height = hval + \"px\";\n\t\t\t// this.graph.el.style.height = hval + \"px\";\n\t\t}\n\t\tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID).renderNow();\n\t\tconsole.log(\"%s:[_whenListsRendered] height set to %opx\", this.cid, hval ? hval : \"[empty]\", arguments);\n\t\treturn result\n\t},\n\n\t_whenTransitionsEnd: function(result) {\n\t\tconsole.info(\"%s::_whenTransitionsEnd\", this.cid);\n\t\tthis.el.classList.remove(\"container-changing\");\n\t\t// if (!Globals.BREAKPOINTS[\"medium-wide\"].matches)\n\t\t// \treturn;\n\t\t// if (!this.model.get(\"collapsed\")) {\n\t\t// \tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID); //.renderNow();\n\t\t// }\n\t\treturn result;\n\t},\n\n\t_whenTransitionsAbort: function(reason) {\n\t\tconsole.warn(\"%s::_whenTransitionsAbort %o\", this.cid, reason);\n\t\tthis.el.classList.remove(\"container-changing\");\n\t\t// if (!Globals.BREAKPOINTS[\"medium-wide\"].matches)\n\t\t// \treturn;\n\t\t// if (!this.model.get(\"collapsed\")) {\n\t\t// \tthis.graph.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID); //.renderNow();\n\t\t// }\n\t\treturn result;\n\t},*/\n\n\t/* -------------------------------\n\t/* renderTransitions\n\t/* ------------------------------- */\n\n\trenderTransitions: function(flags) {\n\n\t\tvar modelChanged = (flags & View.MODEL_INVALID);\n\n\t\tvar fromRoute = this.model.get(\"fromRouteName\");\n\t\tvar toRoute = this.model.get(\"routeName\");\n\t\tvar routeChanged = modelChanged && this.model.hasChanged(\"routeName\");\n\n\t\t/* bundle */\n\t\tvar withBundle = this.model.has(\"bundle\");\n\t\tvar withBundleChanged = modelChanged && this.model.hasAnyChanged(\"bundle\");\n\t\tvar bundleChanged = modelChanged && this.model.hasChanged(\"bundle\");\n\t\t/* media */\n\t\tvar withMedia = this.model.has(\"media\");\n\t\tvar withMediaChanged = modelChanged && this.model.hasAnyChanged(\"media\");\n\t\t//var mediaChanged = modelChanged && this.model.hasChanged(\"media\");\n\t\t/* article */\n\t\t// var withArticle = this.model.has(\"article\");\n\t\tvar withArticleChanged = modelChanged && this.model.hasAnyChanged(\"article\");\n\t\t//var articleChanged = modelChanged && this.model.hasChanged(\"article\");\n\t\t/* collapsed */\n\t\tvar collapsed = this.model.get(\"collapsed\");\n\t\tvar collapsedChanged = modelChanged && this.model.hasChanged(\"collapsed\");\n\n\t\tvar tf;\n\t\t/* this.vpanGroup */\n\t\ttf = this.transforms.get(this.vpanGroup);\n\t\tif (tf && tf.hasOffset) {\n\t\t\ttf.runTransition(collapsedChanged ? tx.BETWEEN : tx.NOW);\n\t\t\ttf.clearOffset();\n\t\t}\n\t\t/* this.bundleList.el */\n\t\t// tf = this.transforms.get(this.bundleList.el);\n\t\t// if (tf.hasOffset) {\n\t\t// \ttf.runTransition(collapsedChanged ? tx.BETWEEN : tx.NOW);\n\t\t// \ttf.clearOffset();\n\t\t// }\n\t\t/* this.keywordList.el */\n\t\t// tf = this.transforms.get(this.keywordList.el);\n\t\t// if (tf.hasOffset) {\n\t\t// \ttf.runTransition(collapsedChanged ? tx.BETWEEN : tx.NOW);\n\t\t// \ttf.clearOffset();\n\t\t// }\n\t\t/* this.graph.el */\n\t\t// tf = this.transforms.get(this.graph.el);\n\t\t// if (tf && tf.hasOffset) {\n\t\t// \ttf.runTransition(collapsedChanged ? tx.BETWEEN : tx.NOW);\n\t\t// \ttf.clearOffset();\n\t\t// }\n\n\t\t/*\n\t\t * NOTE:\n\t\t * Vertical:\n\t\t *\t\tsite-name-wrapper,\n\t\t *\t\tarticle-list-wrapper\n\t\t * Horizontal:\n\t\t *\t\tsite-name,\n\t\t *\t\tarticle-buttons,\n\t\t *\t\tkeywordList.wrapper,\n\t\t *\t\tbundleList.wrapper,\n\t\t *\t\thGroupings\n\t\t */\n\t\tif (Globals.BREAKPOINTS[\"medium-wide\"].matches || Globals.BREAKPOINTS[\"medium-wide-stretch\"].matches) {\n\t\t\t/* HORIZONTAL: keywordList.wrapper */\n\t\t\ttf = this.transforms.get(this.keywordList.wrapper);\n\t\t\tif (collapsedChanged && !withArticleChanged) {\n\t\t\t\t// if (collapsedChanged) {\n\t\t\t\tif (withBundleChanged) {\n\t\t\t\t\tif (withMediaChanged)\n\t\t\t\t\t\ttf.runTransition(withBundle ? tx.LAST : tx.FIRST);\n\t\t\t\t} else {\n\t\t\t\t\tif (withMedia)\n\t\t\t\t\t\ttf.runTransition(collapsed ? tx.LAST : tx.FIRST);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!withBundleChanged && withMediaChanged)\n\t\t\t\t\ttf.runTransition(bundleChanged ? tx.BETWEEN : txNow); //tx.NOW);\n\t\t\t}\n\t\t\tif (tf.hasOffset)\n\t\t\t\ttf.clearOffset();\n\n\t\t\t/* HORIZONTAL: the rest */\n\t\t\tif (collapsedChanged ^ withArticleChanged) {\n\t\t\t\tthis.transforms.runTransition(collapsed ? tx.LAST : tx.FIRST,\n\t\t\t\t\tthis.sitename.el, this.about.el, this.bundleList.wrapper);\n\t\t\t\t// if (fromRoute != 'article-item' && toRoute != 'media-item') {\n\t\t\t\tthis.transforms.runTransition(collapsed ? tx.LAST : tx.FIRST, this.hGroupings);\n\t\t\t\t// }\n\t\t\t}\n\t\t\t/* VERTICAL */\n\t\t\tif (routeChanged && (fromRoute == 'root' || toRoute == 'root')) {\n\t\t\t\tthis.transforms.runTransition(tx.BETWEEN,\n\t\t\t\t\tthis.sitename.wrapper, this.about.wrapper);\n\t\t\t}\n\t\t\t/* this.hGroupings */\n\t\t\t// if (collapsedChanged ^ withArticleChanged) {\n\t\t\t// \t// if (collapsedChanged && !withArticleChanged) {\n\t\t\t// \tthis.transforms.runTransition(collapsed ? tx.LAST : tx.FIRST, this.hGroupings);\n\t\t\t// }\n\t\t\t// if (collapsedChanged) {\n\t\t\t// \tif (!withArticleChanged) {\n\t\t\t// \t\t// if (fromRoute == 'root' || toRoute == 'root') {\n\t\t\t// \t\tthis.transforms.runTransition(collapsed ? tx.LAST : tx.FIRST, this.bundleList.wrapper);\n\t\t\t// \t}\n\t\t\t// } else {\n\t\t\t// \tif (withArticleChanged && withBundleChanged) {\n\t\t\t// \t\tthis.transforms.runTransition(withArticle ? tx.BETWEEN : tx.LAST, this.bundleList.wrapper);\n\t\t\t// \t}\n\t\t\t// }\n\t\t} else if (Globals.BREAKPOINTS[\"small-stretch\"].matches) {\n\t\t\t// if (collapsedChanged ) {\n\t\t\tif (collapsedChanged ^ withArticleChanged) {\n\t\t\t\tthis.transforms.runTransition(collapsed ? tx.FIRST : tx.LAST,\n\t\t\t\t\tthis.sitename.el, this.about.el);\n\t\t\t}\n\t\t} else {\n\t\t\tif (withBundleChanged) {\n\t\t\t\tthis.transforms.runTransition(tx.BETWEEN,\n\t\t\t\t\tthis.sitename.el, this.about.el);\n\t\t\t}\n\t\t}\n\t\t// this.transforms.clearOffset(\n\t\t// \t// this.bundleList.el,\n\t\t// \t// this.keywordList.el,\n\t\t// \tthis.bundleList.wrapper);\n\t},\n\n\t/* --------------------------- *\n\t/* own model changed\n\t/* --------------------------- */\n\n\t_onModelChange: function() {\n\t\t// \tthis.setImmediate(this.commitModel);\n\t\t// },\n\t\t//\n\t\t// commitModel: function() {\n\t\t// this.requestRender(View.MODEL_INVALID | View.LAYOUT_INVALID);\n\t\tthis.requestRender(View.MODEL_INVALID);\n\t\t// keywords.deselect();\n\t\tif (this.model.hasChanged(\"collapsed\")) {\n\t\t\tif (this.model.get(\"collapsed\")) {\n\t\t\t\t// clear keyword selection\n\t\t\t\tkeywords.deselect();\n\t\t\t} // else {}\n\t\t\tthis.keywordList.collapsed = this.model.get(\"collapsed\");\n\t\t\tthis.bundleList.collapsed = this.model.get(\"collapsed\");\n\t\t}\n\t\tif (this.model.hasChanged(\"bundle\")) {\n\t\t\tthis.bundleList.selectedItem = this.model.get(\"bundle\");\n\t\t\tthis.keywordList.refreshFilter();\n\n\t\t\t// if (!this.model.get(\"collapsed\") && this.graph) {\n\t\t\t// \tthis.listenToOnce(this.keywordList, \"view:render:after\", function(view, flags) {\n\t\t\t// \t\tconsole.log(\"%s::_onBundleSelect -> %s:[view:render:after] flags:%s\", this.cid, view.cid, View.flagsToString(flags));\n\t\t\t// \t\tthis.graph.valueTo( \"a2b\", 0,  0);\n\t\t\t// \t\t// this.graph.renderNow();\n\t\t\t// \t\tthis.graph.valueTo( \"a2b\", 1,  Globals.TRANSITION_DURATION);\n\t\t\t// \t});\n\t\t\t// }\n\t\t\t// keywords.deselect();\n\t\t\t// this.graph && this.graph.requestRender(View.SIZE_INVALID);\n\t\t}\n\t\t// var clickEv = \"click\";//View.CLICK_EVENT\n\t\tif (this.model.hasChanged(\"withBundle\")) {\n\t\t\t// this.keywordList.refreshFilter()\n\t\t\tif (this.model.get(\"withBundle\")) {\n\n\t\t\t\tthis.el.addEventListener(View.CLICK_EVENT, this._onNavigationClick);\n\t\t\t\tthis.vpan.on(\"vpanstart\", this._onVPanStart);\n\t\t\t\tthis.hpan.on(\"hpanstart\", this._onHPanStart);\n\t\t\t\t// this.hpan.on(\"tap\", this._onTap);\n\t\t\t} else {\n\t\t\t\tthis.el.removeEventListener(View.CLICK_EVENT, this._onNavigationClick);\n\t\t\t\tthis.vpan.off(\"vpanstart\", this._onVPanStart);\n\t\t\t\tthis.hpan.off(\"hpanstart\", this._onHPanStart);\n\t\t\t\tkeywords.deselect();\n\t\t\t\t// this.hpan.off(\"tap\", this._onTap);\n\t\t\t}\n\t\t\t// this.graph.valueTo()\n\t\t}\n\t},\n\n\t// _onwithBundleChange: function(withBundle) {\n\t// \tif (withBundle) {\n\t// \t\tthis.listenTo(this.model, \"collapsed:change\", function(collapsed){\n\t//\n\t// \t\t});\n\t// \t} else {\n\t// \t\tthis.stopListening(this.model, \"collapsed:change\", function(collapsed){\n\t//\n\t// \t\t});\n\t// \t}\n\t// },\n\n\t/* --------------------------- *\n\t/* keyword collection changed\n\t/* --------------------------- */\n\n\t_onKeywordSelect: function(keyword) {\n\t\t// use collection listener to avoid redundant refreshFilter calls\n\t\tif (!this.model.get(\"collapsed\") && this.graph) {\n\t\t\tthis.listenToOnce(this.bundleList, \"view:render:after\", function(view, flags) {\n\t\t\t\t// console.log(\"%s::_onKeywordSelect -> %s:[view:render:after] flags:%s\", this.cid, view.cid, View.flagsToString(flags));\n\t\t\t\tthis.graph.valueTo(\"b2a\", 0, 0);\n\t\t\t\tthis.graph.valueTo(\"b2a\", 1, Globals.TRANSITION_DURATION);\n\t\t\t});\n\t\t}\n\t\tthis.bundleList.refreshFilter();\n\t},\n\n\t/* --------------------------- *\n\t/* UI Events: bundleList keywordList buttons\n\t/* --------------------------- */\n\n\t_onNavigationClick: function(ev) {\n\t\tconsole.log(\"%s::_onNavigationClick [%s] defaultPrevented:%s\", this.cid, ev.type, ev.defaultPrevented);\n\t\tif (ev.defaultPrevented) return;\n\t\t// if (ev.target !== this.graph.el && ev.target !== this.el) return;\n\n\t\tev.preventDefault();\n\t\tif (this.model.has(\"bundle\")) {\n\t\t\t// this.transforms.offset(0, 1, this.graph.el);\n\t\t\t// this.transforms.validate();\n\t\t\t// this._setCollapsed(!this.model.get(\"collapsed\"));\n\t\t\t// this.setImmediate(function() {\n\t\t\tthis.model.set(\"collapsed\", !this.model.get(\"collapsed\"));\n\t\t\t// });\n\t\t}\n\t},\n\n\t_setCollapsed: function(value) {\n\t\tif (value !== this.model.get(\"collapsed\")) {\n\t\t\t// this.transforms.offset(0, 1, this.graph.el);\n\t\t\t// this.transforms.validate();\n\t\t\tthis.setImmediate(function() {\n\t\t\t\t// console.log(\"%s::_setCollapsed -> %s (setImmediate)\", this.cid, value);\n\t\t\t\tthis.model.set(\"collapsed\", value);\n\t\t\t});\n\t\t}\n\t},\n\n\t/* -------------------------------\n\t/* Horizontal touch/move (HammerJS)\n\t/* ------------------------------- */\n\n\t_onHPanStart: function(ev) {\n\t\tthis.transforms.get(this.keywordList.wrapper)\n\t\t\t.stopTransition()\n\t\t\t.clearOffset()\n\t\t\t.validate();\n\t\t// if (this.model.get(\"layoutName\") != \"left-layout\"\n\t\t// \t&& this.model.get(\"layoutName\") != \"default-layout\") {\n\t\t// \treturn;\n\t\t// }\n\t\tif ((Globals.BREAKPOINTS[\"medium-wide\"].matches || Globals.BREAKPOINTS[\"medium-wide-stretch\"].matches)\n\t\t\t&& (this.model.get(\"routeName\") === \"bundleItem\")\n\t\t\t&& (this.model.get(\"bundle\").get(\"media\").selectedIndex <= 0)\n\t\t\t&& this.model.get(\"collapsed\")) {\n\t\t\tthis.transforms.get(this.keywordList.wrapper).clearCapture();\n\t\t\tthis._onHPanMove(ev);\n\n\t\t\tthis.hpan.on(\"hpanmove\", this._onHPanMove);\n\t\t\tthis.hpan.on(\"hpanend hpancancel\", this._onHPanFinal);\n\t\t}\n\t},\n\n\t_onHPanMove: function(ev) {\n\t\t// var HPAN_DRAG = 1;\n\t\t// var HPAN_DRAG = 0.75;\n\t\tvar HPAN_DRAG = 720 / 920;\n\t\tvar delta = ev.deltaX; //ev.thresholdDeltaX;\n\t\t// var mediaItems = this.model.get(\"bundle\").get(\"media\");\n\n\t\tif (this.model.has(\"media\")) {\n\t\t\tdelta *= (ev.offsetDirection & Hammer.DIRECTION_LEFT) ?\n\t\t\t\t0.0 : HPAN_DRAG;\n\t\t} else {\n\t\t\tdelta *= (ev.offsetDirection & Hammer.DIRECTION_LEFT) ?\n\t\t\t\tHPAN_DRAG : Globals.HPAN_OUT_DRAG;\n\t\t}\n\t\tthis.transforms.offset(delta, null, this.keywordList.wrapper);\n\t\tthis.transforms.validate();\n\t},\n\n\t_onHPanFinal: function(ev) {\n\t\tthis.hpan.off(\"hpanmove\", this._onHPanMove);\n\t\tthis.hpan.off(\"hpanend hpancancel\", this._onHPanFinal);\n\n\t\t/* NOTE: if there is no model change, set tx here. Otherwise just wait for render */\n\t\tvar kTf = this.transforms.get(this.keywordList.wrapper);\n\t\tif (!(this._renderFlags & View.MODEL_INVALID) && kTf.hasOffset) {\n\t\t\tif (kTf.offsetX != 0) {\n\t\t\t\tkTf.runTransition(tx.NOW);\n\t\t\t}\n\t\t\tkTf.clearOffset().validate();\n\t\t}\n\t},\n\n\t/* -------------------------------\n\t/* Vertical touch/move (_onVPan*)\n\t/* ------------------------------- */\n\n\t_collapsedOffsetY: Globals.COLLAPSE_OFFSET,\n\n\t_onVPanStart: function(ev) {\n\t\tthis.vpan.on(\"vpanmove\", this._onVPanMove);\n\t\tthis.vpan.on(\"vpanend vpancancel\", this._onVPanFinal);\n\n\n\t\tthis.transforms.stopTransition(this.vpanGroup);\n\t\tthis.transforms.clearCapture(this.vpanGroup);\n\t\t// this.transforms.stopTransition(this.bundleList.el, this.keywordList.el); //, this.graph.el);\n\t\t// // this.transforms.clearOffset(this.bundleList.el, this.keywordList.el);\n\t\t// // this.transforms.validate();\n\t\t// this.transforms.clearCapture(this.bundleList.el, this.keywordList.el); //, this.graph.el);\n\t\t//\n\t\t// if (!this.model.get(\"collapsed\")) {\n\t\t// \tthis.transforms.stopTransition(this.graph.el);\n\t\t// \tthis.transforms.clearCapture(this.graph.el);\n\t\t// }\n\t\t// // this.el.classList.add(\"container-changing\");\n\n\t\t// this._onVPanMove(ev);\n\t},\n\n\t_onVPanMove: function(ev) {\n\t\tvar delta = this._computeVPanDelta(ev.deltaY); //ev.thresholdDeltaY);\n\n\t\tthis.transforms.offset(0, delta, this.vpanGroup);\n\t\t// this.transforms.offset(0, delta,\n\t\t// \tthis.bundleList.el, this.keywordList.el);\n\t\t// if (!this.model.get(\"collapsed\")) {\n\t\t// \tthis.transforms.offset(0, delta, this.graph.el);\n\t\t// }\n\t\tthis.transforms.validate();\n\t},\n\n\t_onVPanFinal: function(ev) {\n\t\tthis.vpan.off(\"vpanmove\", this._onVPanMove);\n\t\tthis.vpan.off(\"vpanend vpancancel\", this._onVPanFinal);\n\n\t\t// this._onVPanMove(ev);\n\t\t// this.transforms.validate();\n\n\t\tthis.setImmediate(function() {\n\t\t\t// this.transforms.clearOffset(this.bundleList.el, this.keywordList.el, this.graph.el);\n\t\t\tif (this.willCollapsedChange(ev)) {\n\t\t\t\t// this._setCollapsed(!this.model.get(\"collapsed\"));\n\t\t\t\tthis.model.set(\"collapsed\", !this.model.get(\"collapsed\"));\n\t\t\t}\n\t\t\tthis.requestRender(View.LAYOUT_INVALID); //.renderNow();\n\t\t});\n\t},\n\n\twillCollapsedChange: function(ev) {\n\t\treturn ev.type == \"vpanend\" ? this.model.get(\"collapsed\") ?\n\t\t\tev.deltaY > Globals.COLLAPSE_THRESHOLD :\n\t\t\tev.deltaY < -Globals.COLLAPSE_THRESHOLD :\n\t\t\tfalse;\n\t},\n\n\t_computeVPanDelta: function(delta) {\n\t\tvar collapsed = this.model.get(\"collapsed\");\n\t\tvar maxDelta = this._collapsedOffsetY; // + Math.abs(ev.thresholdOffsetY);\n\t\t// check if direction is aligned with collapsed/expand\n\t\tvar isValidDir = collapsed ? (delta > 0) : (delta < 0);\n\t\tvar moveFactor = collapsed ? 1 - Globals.VPAN_DRAG : Globals.VPAN_DRAG;\n\n\t\tdelta = Math.abs(delta); // remove sign\n\t\tdelta *= moveFactor;\n\t\tmaxDelta *= moveFactor;\n\n\t\tif (isValidDir) {\n\t\t\tif (delta > maxDelta) { // overshooting\n\t\t\t\tdelta = ((delta - maxDelta) * Globals.VPAN_OUT_DRAG) + maxDelta;\n\t\t\t} else { // no overshooting\n\t\t\t\t// delta = delta;\n\t\t\t}\n\t\t} else {\n\t\t\tdelta = (-delta) * Globals.VPAN_OUT_DRAG; // delta is opposite\n\t\t}\n\t\tdelta *= collapsed ? 0.5 : -1; // reapply sign\n\t\treturn delta;\n\t},\n\n\t/* -------------------------------\n\t/* Create children components\n\t/* ------------------------------- */\n\n\t// -------------------------------\n\t// #site-name\n\t// -------------------------------\n\n\tcreateSitenameButton: function() {\n\t\tvar view = new View({\n\t\t\tel: \"#site-name\",\n\t\t\tevents: {\n\t\t\t\t\"click a\": function(domev) {\n\t\t\t\t\tdomev.defaultPrevented || domev.preventDefault();\n\t\t\t\t\tthis.trigger(\"view:click\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tview.wrapper = view.el.parentElement;\n\t\tthis.listenTo(view, \"view:click\", this._onSitenameClick);\n\t\treturn view;\n\t},\n\n\t_onSitenameClick: function() {\n\t\tswitch (this.model.get(\"routeName\")) {\n\t\t\tcase \"media-item\":\n\t\t\tcase \"bundle-item\":\n\t\t\t\t// if (this.model.get(\"collapsed\")) {\n\t\t\t\t// \tthis._setCollapsed(false);\n\t\t\t\t// } else {\n\t\t\t\tcontroller.deselectBundle();\n\t\t\t\t// }\n\t\t\t\tbreak;\n\t\t\tcase \"article-item\":\n\t\t\t\tcontroller.deselectArticle();\n\t\t\t\tbreak;\n\t\t}\n\t},\n\n\t// -------------------------------\n\t// .article-button\n\t// -------------------------------\n\n\tcreateArticleButton: function(articleItem) {\n\t\tvar view = new ArticleButton({\n\t\t\tel: \".article-button[data-handle='about']\",\n\t\t\tmodel: articleItem\n\t\t}).render();\n\t\tview.wrapper = view.el.parentElement;\n\t\tthis.listenTo(view, \"view:click\", this._onArticleClick);\n\t\treturn view;\n\t},\n\n\t_onArticleClick: function(item) {\n\t\tswitch (this.model.get(\"routeName\")) {\n\t\t\tcase \"article-item\":\n\t\t\t\tcontroller.deselectArticle();\n\t\t\t\tbreak;\n\t\t\tcase \"root\":\n\t\t\tdefault:\n\t\t\t\tcontroller.selectArticle(item);\n\t\t\t\tbreak;\n\t\t}\n\t},\n\n\tcreateAboutButton: function() {\n\t\treturn this.createArticleButton(articles.findWhere({ handle: \"about\" }));\n\t},\n\n\t// -------------------------------\n\t// #bundle-list\n\t// -------------------------------\n\n\t/**\n\t * @param el {HTMLElement}\n\t * @return {module:app/base/view/component/FilterableListView}\n\t */\n\tcreateBundleList: function(el) {\n\t\tvar view = new FilterableListView({\n\t\t\tel: \"#bundle-list\",\n\t\t\tcollection: bundles,\n\t\t\tcollapsed: false,\n\t\t\tfilterFn: function(bundle, index, arr) {\n\t\t\t\treturn keywords.selected ?\n\t\t\t\t\tbundle.get(\"kIds\").indexOf(keywords.selected.id) !== -1 : false;\n\t\t\t},\n\t\t});\n\t\tview.wrapper = view.el.parentElement;\n\t\tthis.listenTo(view, \"view:select:one view:select:none\", function(bundle) {\n\t\t\tthis.setImmediate(function() {\n\t\t\t\tcontroller.selectBundle(bundle);\n\t\t\t});\n\t\t})\n\t\tthis.listenTo(view, \"view:select:same\", this._onBundleListSame);\n\t\treturn view;\n\t},\n\n\t_onBundleListSame: function(bundle) {\n\t\t// this.transforms.offset(0, 1, this.graph.el);\n\t\t// this.transforms.validate();\n\t\t// this.setImmediate(function() {\n\t\tthis.model.set(\"collapsed\", !this.model.get(\"collapsed\"));\n\t\t// });\n\t},\n\n\t// -------------------------------\n\t// #keyword-list\n\t// -------------------------------\n\n\t/**\n\t * @param el {HTMLElement}\n\t * @return {module:app/base/view/component/GroupingListView}\n\t */\n\tcreateKeywordList: function(el) {\n\t\tvar view = new GroupingListView({\n\t\t\tel: \"#keyword-list\",\n\t\t\tcollection: keywords,\n\t\t\tcollapsed: false,\n\t\t\tfilterFn: function(item, idx, arr) {\n\t\t\t\treturn bundles.selected ?\n\t\t\t\t\t(bundles.selected.get(\"kIds\").indexOf(item.id) !== -1) : false;\n\t\t\t},\n\t\t\tgroupingFn: function(item, idx, arr) {\n\t\t\t\treturn types.get(item.get(\"tId\"));\n\t\t\t},\n\t\t});\n\t\tview.wrapper = view.el.parentElement;\n\t\tview.listenTo(keywords, \"select:one select:none\", function(item) {\n\t\t\tview.selectedItem = item;\n\t\t});\n\t\tthis.listenTo(view, \"view:select:one view:select:none\", this._onKeywordListChange);\n\t\treturn view;\n\t},\n\n\t_onKeywordListChange: function(keyword) {\n\t\tif (!this.model.get(\"collapsed\")) {\n\t\t\tkeywords.select(keyword);\n\t\t}\n\t},\n\n\t// -------------------------------\n\t// #nav-graph\n\t// -------------------------------\n\n\t/**\n\t * @param listA {module:app/base/view/component/FilterableListView}\n\t * @param listB {module:app/base/view/component/FilterableListView}\n\t * @param parentEl {HTMLElement}\n\t * @return {module:app/base/view/component/GraphView}\n\t */\n\tcreateGraphView: function(listA, listB, parentEl) {\n\t\tvar view = new GraphView({\n\t\t\tid: \"nav-graph\",\n\t\t\tlistA: listA,\n\t\t\tlistB: listB,\n\t\t\tmodel: this.model,\n\t\t\tuseOpaque: false\n\t\t});\n\t\tparentEl || (parentEl = this.el);\n\t\tparentEl.insertBefore(view.el, parentEl.firstElementChild);\n\t\treturn view;\n\t},\n\n\t/* -------------------------------\n\t/* Horizontal touch/move (MutationObserver)\n\t/* ------------------------------- */\n\n\t/*\n\t_beginTransformObserve: function() {\n\t\tif (!(Globals.BREAKPOINTS[\"medium-wide\"].matches && this.model.get(\"bundle\").get(\"media\").selectedIndex <= 0 && this.model.get(\"collapsed\"))) {\n\t\t\treturn;\n\t\t}\n\t\tvar target = document.querySelector(\".carousel > .empty-item\");\n\t\tif (target === null) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this._transformObserver) {\n\t\t\tthis._transformObserver = new MutationObserver(this._onTransformMutation);\n\t\t}\n\t\tthis._transformObserver.observe(target, { attributes: true, attributeFilter: [\"style\"] });\n\t\tthis.hpan.on(\"hpanend hpancancel\", this._endTransformObserve);\n\t\tthis.transforms.get(this.keywordList.wrapper)\n\t\t\t.stopTransition()\n\t\t\t.clearOffset()\n\t\t\t.clearCapture()\n\t\t\t.validate();\n\t},\n\n\t_endTransformObserve: function() {\n\t\tthis._transformObserver.disconnect();\n\t\tthis.hpan.off(\"hpanend hpancancel\", this._endTransformObserve);\n\t\tthis.transforms.get(this.keywordList.wrapper)\n\t\t\t.clearOffset()\n\t\t\t.runTransition(tx.NOW)\n\t\t\t.validate();\n\t},\n\n\t_onTransformMutation: function(mutations) {\n\t\tvar tView, tMetrics, tCss, dTxObj, pos;\n\n\t\t// this.keywordList.wrapper.style[prefixedProperty(\"transform\")];\n\t\t// transform = mutations[0].target.style.getPropertyValue(prefixedProperty(\"transform\"));\n\n\t\ttView = View.findByElement(mutations[0].target);\n\t\tif (tView) {\n\t\t\ttMetrics = tView.metrics;\n\t\t\tdTxObj = this.transforms.get(this.keywordList.wrapper);\n\t\t\tconsole.log(\"%s::_onTransformMutation [withMedia: %s] target: (%f\\+%f) %f wrapper: (%f) %f\", this.cid,\n\t\t\t\tthis.model.has(\"media\"),\n\t\t\t\ttMetrics.translateX, tMetrics.width, tMetrics.translateX + tMetrics.width,\n\t\t\t\tdTxObj.capturedX, tMetrics.translateX - dTxObj.capturedX,\n\t\t\t\ttMetrics\n\t\t\t);\n\n\t\t\tthis.transforms.offset(tMetrics.translateX - dTxObj.capturedX, void 0, this.keywordList.wrapper);\n\t\t\tthis.transforms.validate();\n\t\t}\n\t},\n\t*/\n});\n",
    "var PriorityQueue = function(offset) {\n\tthis._offset = offset | 0;\n\tthis._items = [];\n\tthis._priorities = [];\n\tthis._numItems = 0;\n};\n\nPriorityQueue.prototype = Object.create({\n\tenqueue: function(item, priority) {\n\t\tvar i = this._items.length;\n\t\tthis._items[i] = item;\n\t\tthis._priorities[i] = {\n\t\t\tpriority: (priority | 0),\n\t\t\tindex: i\n\t\t};\n\t\tthis._numItems++;\n\t\t// console.log(\"FrameQueue::RequestQueue::enqueue() [numItems:%i] ID:%i\", this._numItems, this._offset + i);\n\t\treturn this._offset + i;\n\t},\n\n\tcontains: function(index) {\n\t\tindex -= this.offset;\n\t\treturn 0 <= index && index < this._items.length;\n\t},\n\n\tskip: function(index) {\n\t\tvar i, item;\n\t\ti = index - this._offset;\n\t\tif (0 > i || i >= this._items.length) {\n\t\t\t// \tconsole.warn(\"FrameQueue::RequestQueue::skip(id:%i) out of range (%i-%i)\", index, this._offset, this._offset + (this._numItems - 1));\n\t\t\treturn void 0;\n\t\t}\n\t\titem = this._items[i];\n\t\tif (item !== null) {\n\t\t\t// if (item = this._items[i]) {\n\t\t\tthis._items[i] = null;\n\t\t\tthis._numItems--;\n\t\t}\n\t\treturn item;\n\t},\n\n\tindexes: function() {\n\t\tvar items = this._priorities.concat();\n\t\titems.sort(function(a, b) {\n\t\t\tif (a.priority > b.priority)\n\t\t\t\treturn 1;\n\t\t\tif (a.priority < b.priority)\n\t\t\t\treturn -1;\n\t\t\treturn 0;\n\t\t});\n\t\titems.forEach(function(o, i, a) {\n\t\t\ta[i] = o.index;\n\t\t}, this);\n\t\treturn items;\n\t},\n\n\titems: function() {\n\t\tvar items = this._priorities.concat();\n\t\titems.sort(function(a, b) {\n\t\t\tif (a.priority > b.priority)\n\t\t\t\treturn 1;\n\t\t\tif (a.priority < b.priority)\n\t\t\t\treturn -1;\n\t\t\treturn 0;\n\t\t});\n\t\titems.forEach(function(o, i, a) {\n\t\t\ta[i] = this._items[o.index];\n\t\t}, this);\n\t\treturn items;\n\t},\n\n\t_empty: function(offset) {\n\t\tthis._offset = offset;\n\t\tthis._items.length = 0;\n\t\tthis._priorities.length = 0;\n\t\tthis._numItems = 0;\n\t}\n}, {\n\n\toffset: {\n\t\tget: function() {\n\t\t\treturn this._offset;\n\t\t}\n\t},\n\n\tlength: {\n\t\tget: function() {\n\t\t\treturn this._items.length;\n\t\t}\n\t},\n\n\tnumItems: {\n\t\tget: function() {\n\t\t\treturn this._numItems;\n\t\t}\n\t},\n});\n\nvar CallbackQueue = function(requestFn, cancelFn) {\n\tthis._nextQueue = new PriorityQueue(0);\n\tthis._currQueue = null;\n\n\t// this._pending = false;\n\tthis._running = false;\n\tthis._runId = -1;\n\n\tthis._requestFn = requestFn;\n\tthis._cancelFn = cancelFn;\n\tthis._runQueue = this._runQueue.bind(this)\n};\n\nCallbackQueue.prototype = Object.create({\n\t/**\n\t * @param tstamp {int}\n\t */\n\t_runQueue: function() {\n\t\tif (this._running) throw new Error(\"wtf!!!\");\n\n\t\tthis._currQueue = this._nextQueue;\n\t\tthis._nextQueue = new PriorityQueue(this._currQueue.offset + this._currQueue.length);\n\n\t\tthis._runId = -1;\n\t\tthis._running = true;\n\n\t\tvar i, item;\n\t\tvar indexes = this._currQueue.indexes();\n\t\tvar items = this._currQueue._items;\n\t\tfor (i = 0; i < indexes.length; i++) {\n\t\t\titem = items[indexes[i]];\n\t\t\tif (item !== null) {\n\t\t\t\titem.apply(null, arguments);\n\t\t\t}\n\t\t}\n\n\t\t// var self = this;\n\t\t// this._currQueue.indexes().forEach(function(index) {\n\t\t// \tvar fn = self._currQueue._items[index];\n\t\t// \tif (fn !== null) {\n\t\t// \t\tfn.apply(null, arguments);\n\t\t// \t}\n\t\t// });\n\t\tthis._running = false;\n\t\tthis._currQueue = null;\n\n\t\tif (this._nextQueue.numItems > 0) {\n\t\t\tthis._runId = this._requestFn.call(null, this._runQueue);\n\t\t\t// this._runId = this._requestFn(this._runQueue);\n\t\t}\n\t},\n\n\t/**\n\t * @param fn {Function}\n\t * @param priority {int}\n\t * @return {int}\n\t */\n\trequest: function(fn, priority) {\n\t\t// if (!this._running && !this._pending) {\n\t\t// \tthis._pending = true;\n\t\t// \tconsole.warn(\"FrameQueue::request setImmediate: pending\");\n\t\t// \tsetImmediate(function() {\n\t\t// \t\tthis._pending = false;\n\t\t// \t\tif (this._nextQueue.numItems > 0) {\n\t\t// \t\t\tthis._runId = window.requestAnimationFrame(_runQueue);\n\t\t// \t\t\tconsole.warn(\"FrameQueue::request setImmediate: raf:%i for %i items\", this._runId, this._nextQueue.numItems);\n\t\t// \t\t} else {\n\t\t// \t\t\tconsole.warn(\"FrameQueue::request setImmediate: no items\");\n\t\t// \t\t}\n\t\t// \t});\n\t\t// }\n\t\tif (!this._running && this._runId === -1) {\n\t\t\tthis._runId = this._requestFn.call(null, this._runQueue);\n\t\t\t// this._runId = this._requestFn(this._runQueue);\n\t\t}\n\t\treturn this._nextQueue.enqueue(fn, priority);\n\t},\n\n\t/**\n\t * @param id {int}\n\t * @return {Function?}\n\t */\n\tcancel: function(id) {\n\t\tvar fn;\n\t\tif (this._running) {\n\t\t\tfn = this._currQueue.skip(id) || this._nextQueue.skip(id);\n\t\t} else {\n\t\t\tfn = this._nextQueue.skip(id);\n\t\t\tif ((this._runId !== -1) && (this._nextQueue.numItems === 0)) {\n\t\t\t\tthis._cancelFn.call(null, this._runId);\n\t\t\t\t// this._cancelFn(this._runId);\n\t\t\t\tthis._runId = -1;\n\t\t\t}\n\t\t}\n\t\treturn fn;\n\t},\n}, {\n\trunning: {\n\t\tget: function() {\n\t\t\treturn this._running;\n\t\t}\n\t}\n});\n\nmodule.exports = CallbackQueue;\n",
    "/* global Path2D */\n/**\n * @module app/view/component/progress/CanvasView\n */\n\n// /** @type {module:color} */\n// var Color = require(\"color\");\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/view/base/Interpolator} */\nconst Interpolator = require(\"app/view/base/Interpolator\");\n/** @type {module:utils/css/getBoxEdgeStyles} */\nconst getBoxEdgeStyles = require(\"utils/css/getBoxEdgeStyles\");\n\nvar MIN_CANVAS_RATIO = 1; // /Firefox/.test(window.navigator.userAgent)? 2 : 1;\n\n/**\n * @constructor\n * @type {module:app/view/component/progress/CanvasView}\n */\nvar CanvasView = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"canvasView\",\n\t/** @type {string} */\n\ttagName: \"canvas\",\n\t/** @type {string} */\n\tclassName: \"canvas-view\",\n\n\tproperties: {\n\t\tpaused: {\n\t\t\tget: function() {\n\t\t\t\treturn this._paused;\n\t\t\t},\n\t\t\tset: function(paused) {\n\t\t\t\tpaused = !!(paused);\n\t\t\t\tif (this._interpolator.paused !== paused) {\n\t\t\t\t\tthis._interpolator.paused = paused;\n\t\t\t\t\tif (!paused) {\n\t\t\t\t\t\tthis.requestRender();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcontext: {\n\t\t\tget: function() {\n\t\t\t\treturn this._ctx;\n\t\t\t}\n\t\t},\n\t\tinterpolator: {\n\t\t\tget: function() {\n\t\t\t\treturn this._interpolator;\n\t\t\t}\n\t\t},\n\t\tcanvasRatio: {\n\t\t\tget: function() {\n\t\t\t\treturn this._canvasRatio;\n\t\t\t}\n\t\t},\n\t},\n\n\t/** @type {Object} */\n\tdefaults: {\n\t\tvalues: {\n\t\t\tvalue: 0\n\t\t},\n\t\tmaxValues: {\n\t\t\tvalue: 1\n\t\t},\n\t\tpaused: false,\n\t\tuseOpaque: false,\n\t},\n\n\t/* --------------------------- *\n\t * children/layout\n\t * --------------------------- */\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\t// TODO: cleanup this options mess\n\t\toptions = _.defaults(options || {}, this.defaults);\n\t\toptions.values = _.defaults(options.values || {}, this.defaults.values);\n\t\toptions.maxValues = _.defaults(options.maxValues || {}, this.defaults.maxValues);\n\n\t\tthis._interpolator = new Interpolator(options.values, options.maxValues);\n\t\tthis._interpolator.paused = options.paused;\n\n\t\tthis._useOpaque = options.useOpaque;\n\t\tthis._options = _.pick(options, \"color\", \"backgroundColor\");\n\n\t\t// opaque background\n\t\t// --------------------------------\n\t\tvar ctxOpts = {};\n\t\t// if (this._useOpaque) {\n\t\t// \tthis._opaqueProp = Modernizr.prefixed(\"opaque\", this.el, false);\n\t\t// \tif (this._opaqueProp) {\n\t\t// \t\tthis.el[this._opaqueProp] = true;\n\t\t// \t} else {\n\t\t// \t\tctxOpts.alpha = true;\n\t\t// \t}\n\t\t// \tthis.el.classList.add(\"color-bg\");\n\t\t// }\n\n\t\t// canvas' context init\n\t\t// --------------------------------\n\t\tthis._ctx = this.el.getContext(\"2d\", ctxOpts);\n\n\t\t// adjust canvas size to pixel ratio\n\t\t// upscale the canvas if the two ratios don't match\n\t\t// --------------------------------\n\t\tvar ratio = MIN_CANVAS_RATIO;\n\t\tvar ctxRatio = this._ctx.webkitBackingStorePixelRatio || 1;\n\t\tif (window.devicePixelRatio !== ctxRatio) {\n\t\t\t// ratio = Math.max(window.devicePixelRatio / ctxRatio, MIN_CANVAS_RATIO);\n\t\t\tratio = window.devicePixelRatio / ctxRatio;\n\t\t\tratio = Math.max(ratio, MIN_CANVAS_RATIO);\n\t\t}\n\t\tthis._canvasRatio = ratio;\n\t\t// console.log(\"%s::init canvasRatio: %f\", this.cid, this._canvasRatio);\n\n\t\tthis.listenTo(this, \"view:attached\", function() {\n\t\t\t// this.invalidateSize();\n\t\t\t// this.renderNow();\n\t\t\tthis.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID).renderNow();\n\t\t});\n\t},\n\n\t// _computeCanvasRatio: function() {\n\t// \tvar ratio = MIN_CANVAS_RATIO;\n\t// \tvar ctxRatio = this._ctx.webkitBackingStorePixelRatio || 1;\n\t// \tif (window.devicePixelRatio !== ctxRatio) {\n\t// \t\t// ratio = Math.max(window.devicePixelRatio / ctxRatio, MIN_CANVAS_RATIO);\n\t// \t\tratio = window.devicePixelRatio / ctxRatio;\n\t// \t\tratio = Math.max(ratio, MIN_CANVAS_RATIO);\n\t// \t}\n\t// \tthis._canvasRatio = ratio;\n\t// },\n\n\t_updateCanvas: function() {\n\t\t// adjust canvas size to pixel ratio\n\t\t// upscale the canvas if the two ratios don't match\n\t\t// --------------------------------\n\n\t\tvar s = getComputedStyle(this.el);\n\n\t\t// this._canvasWidth = this.el.offsetWidth;\n\t\t// this._canvasHeight = this.el.offsetHeight;\n\t\tthis._canvasWidth = this.el.scrollWidth;\n\t\tthis._canvasHeight = this.el.scrollHeight;\n\n\t\tif (s.boxSizing === \"border-box\") {\n\t\t\tvar m = getBoxEdgeStyles(s);\n\t\t\tthis._canvasWidth -= m.paddingLeft + m.paddingRight + m.borderLeftWidth + m.borderRightWidth;\n\t\t\tthis._canvasHeight -= m.paddingTop + m.paddingBottom + m.borderTopWidth + m.borderBottomWidth;\n\t\t}\n\n\t\tthis._canvasWidth *= this._canvasRatio;\n\t\tthis._canvasHeight *= this._canvasRatio;\n\n\t\tthis.measureCanvas(this._canvasWidth, this._canvasHeight, s);\n\t\tthis.el.width = this._canvasWidth;\n\t\tthis.el.height = this._canvasHeight;\n\t\t// this.el.style.height = h + \"px\";\n\t\t// this.el.style.width = w + \"px\";\n\n\t\t// colors\n\t\t// --------------------------------\n\t\tthis._color = this._options.color ||\n\t\t\ts.color || Globals.DEFAULT_COLORS[\"color\"];\n\t\tthis._backgroundColor = this._options.backgroundColor ||\n\t\t\ts.backgroundColor || Globals.DEFAULT_COLORS[\"background-color\"];\n\n\t\t// mozOpaque\n\t\t// --------------------------------\n\t\tif (this._useOpaque && this._opaqueProp) {\n\t\t\t// this.el.style.backgroundColor = this._backgroundColor;\n\t\t\tthis.el[this._opaqueProp] = true;\n\t\t}\n\n\t\t// fontSize\n\t\t// --------------------------------\n\t\tthis._fontSize = parseFloat(s.fontSize) * this._canvasRatio;\n\t\tthis._fontFamily = s.fontFamily;\n\n\t\t// prepare canvas context\n\t\t// --------------------------------\n\t\tthis._ctx.restore();\n\n\t\tthis._ctx.font = [s.fontWeight, s.fontStyle, this._fontSize + \"px/1\", s.fontFamily].join(\" \");\n\t\tthis._ctx.textAlign = \"left\";\n\t\tthis._ctx.lineCap = \"butt\";\n\t\tthis._ctx.lineJoin = \"miter\";\n\t\tthis._ctx.strokeStyle = this._color;\n\t\tthis._ctx.fillStyle = this._color;\n\n\t\tthis.updateCanvas(this._ctx, s);\n\t\tthis._ctx.save();\n\n\t\t// console.group(this.cid+\"::_updateCanvas\");\n\t\t// console.log(\"ratio:    %f (min: %f, device: %f, context: %s)\", this._canvasRatio, MIN_CANVAS_RATIO, window.devicePixelRatio, this._ctx.webkitBackingStorePixelRatio || \"(webkit-only)\");\n\t\t// console.log(\"colors:   fg: %s bg: %s\", this._color, this._backgroundColor);\n\t\t// console.log(\"style:    %s, %s, padding: %s (%s)\", s.width, s.height, s.padding, s.boxSizing);\n\t\t// console.log(\"box:      %f x %f px\", m.width, m.height);\n\t\t// console.log(\"measured: %f x %f px\", w, h);\n\t\t// console.log(\"canvas:   %f x %f px\", this._canvasWidth, this._canvasHeight);\n\t\t// console.groupEnd();\n\t},\n\n\tmeasureCanvas: function(w, h, s) {\n\t\t/* abstract */\n\t},\n\n\tupdateCanvas: function(ctx, s) {\n\t\t/* abstract */\n\t},\n\n\t_getFontMetrics: function(str) {\n\t\tvar key, idx, mObj, mIdx = str.length;\n\t\tfor (key in Globals.FONT_METRICS) {\n\t\t\tidx = str.indexOf(key);\n\t\t\tif (idx !== -1 && idx < mIdx) {\n\t\t\t\tmIdx = idx;\n\t\t\t\tmObj = Globals.FONT_METRICS[key];\n\t\t\t}\n\t\t}\n\t\treturn mObj || {\n\t\t\t\"unitsPerEm\": 1024,\n\t\t\t\"ascent\": 939,\n\t\t\t\"descent\": -256\n\t\t};\n\t},\n\n\t_clearCanvas: function() {\n\t\tif (arguments.length == 4) {\n\t\t\tthis._clearCanvasRect.apply(this, arguments);\n\t\t} else {\n\t\t\tthis._ctx.save();\n\t\t\tthis._ctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\tthis._clearCanvasRect(0, 0, this.el.width, this.el.height);\n\t\t\tthis._ctx.restore();\n\t\t}\n\t},\n\n\t_clearCanvasRect: function(x, y, w, h) {\n\t\tthis._ctx.clearRect(x, y, w, h);\n\t\tif (this._useOpaque) {\n\t\t\tthis._ctx.save();\n\t\t\tthis._ctx.fillStyle = this._backgroundColor;\n\t\t\tthis._ctx.fillRect(x, y, w, h);\n\t\t\tthis._ctx.restore();\n\t\t}\n\t},\n\n\t_setStyle: function(s) {\n\t\tCanvasView.setStyle(this._ctx, s);\n\t},\n\n\t/* --------------------------- *\n\t * render\n\t * --------------------------- */\n\n\t/** @override */\n\trender: function() {\n\t\tif (this.attached) {\n\t\t\treturn this.renderNow();\n\t\t}\n\t\treturn this;\n\t},\n\n\t/** @override */\n\trenderFrame: function(tstamp, flags) {\n\t\tif (!this.attached) {\n\t\t\treturn flags;\n\t\t}\n\t\tif (flags & View.SIZE_INVALID) {\n\t\t\tthis._updateCanvas();\n\t\t}\n\t\tif (this._interpolator.valuesChanged) {\n\t\t\tflags |= View.LAYOUT_INVALID;\n\t\t\tthis._interpolator.interpolate(tstamp);\n\t\t}\n\t\tif (flags & (View.LAYOUT_INVALID | View.SIZE_INVALID)) {\n\t\t\tthis.redraw(this._ctx, this._interpolator, flags);\n\t\t\tif (this._interpolator.valuesChanged) {\n\t\t\t\tthis.requestRender();\n\t\t\t}\n\t\t}\n\t},\n\n\t// setEnabled: function(enabled) {\n\t// \tView.prototype.setEnabled.apply(this, arguments);\n\t// \tif (this.attached) {\n\t// \t\tconsole.info(\"[%s] %s::setEnabled\", this.parentView.cid, this.cid, this.enabled);\n\t// \t\t// if (this._enabled && this._interpolator.valuesChanged) {\n\t// \t\t// this.requestRender();\n\t// \t\t// this.requestRender(CanvasView.LAYOUT_INVALID);\n\t// \t\t// }\n\t// \t}\n\t// },\n\n\t/* --------------------------- *\n\t/* public\n\t/* --------------------------- */\n\n\tgetTargetValue: function(key) {\n\t\treturn this._interpolator.getTargetValue(key);\n\t},\n\n\tgetRenderedValue: function(key) {\n\t\treturn this._interpolator.getRenderedValue(key);\n\t},\n\n\tvalueTo: function(key, value, duration) {\n\t\tthis._interpolator.valueTo(key, value, duration);\n\t\tthis.requestRender(View.MODEL_INVALID | View.LAYOUT_INVALID);\n\t},\n\n\t// updateValue: function(key) {\n\t// \treturn this._interpolator.updateValue(key || this.defaultKey);\n\t// },\n\n\t/* --------------------------- *\n\t/* redraw\n\t/* --------------------------- */\n\n\tredraw: function(ctx, interp, flags) {},\n\n}, {\n\tsetStyle: function(ctx, s) {\n\t\tif (typeof s != \"object\") return;\n\t\tfor (var p in s) {\n\t\t\tswitch (typeof ctx[p]) {\n\t\t\t\tcase \"undefined\":\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"function\":\n\t\t\t\t\tif (Array.isArray(s[p])) ctx[p].apply(ctx, s[p]);\n\t\t\t\t\telse ctx[p].call(ctx, s[p]);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tctx[p] = s[p];\n\t\t\t}\n\t\t}\n\t}\n});\n\nif (DEBUG) {\n\tCanvasView.prototype._logFlags = \"\";\n}\n\nmodule.exports = CanvasView;\n",
    "/**\n * @module app/view/base/Interpolator\n */\n\n/** @type {module:utils/ease/fn/linear} */\nconst linear = require(\"utils/ease/fn/linear\");\n\n/**\n * @constructor\n * @type {module:app/view/base/Interpolator}\n */\nvar Interpolator = function(values, maxValues, easeValues) {\n\tthis._tstamp = 0;\n\n\t// gets thrown away by first interpolate() but avoid null access errors\n\tthis._renderableKeys = [];\n\tthis._renderedKeys = [];\n\n\tthis._paused = false;\n\tthis._pausedChanging = false;\n\t//this._pausedKeys = [];\n\n\tthis._maxValues = _.isObject(maxValues) ? _.extend({}, maxValues) : {};\n\tthis._easeFn = _.isObject(easeValues) ? _.extend({}, easeValues) : {};\n\tthis._valueData = {};\n\n\t// var key, val, maxVal, easeFn;\n\tfor (var key in values) {\n\t\t_.isNumber(this._maxValues[key]) || (this._maxValues[key] = null);\n\t\t_.isFunction(this._easeFn[key]) || (this._easeFn[key] = linear);\n\n\t\t// create value object and store it\n\t\tthis._valueData[key] = this._initValue(values[key], 0, this._maxValues[key]);\n\n\t\t// add to next render list\n\t\tthis._renderableKeys.push(key);\n\t}\n};\n\nInterpolator.prototype = Object.create({\n\n\t/* --------------------------- *\n\t/* public interface\n\t/* --------------------------- */\n\n\tisAtTarget: function(key) {\n\t\treturn this._renderableKeys.indexOf(key) === -1;\n\t},\n\n\tgetCurrentValue: function(key) {\n\t\treturn this._valueData[key]._renderedValue || this._valueData[key]._value;\n\t},\n\n\tgetTargetValue: function(key) {\n\t\treturn this._valueData[key]._value;\n\t},\n\n\tgetStartValue: function(key) {\n\t\treturn this._valueData[key]._startValue;\n\t},\n\n\tgetRenderedValue: function(key) {\n\t\treturn this._valueData[key]._renderedValue;\n\t},\n\n\tgetOption: function(key, opt) {\n\t\tif (opt === \"max\") return this._maxValues[key];\n\t\tif (opt === \"ease\") return this._easeFn[key];\n\t},\n\n\tvalueTo: function(key, value, duration, ease) {\n\t\tvar changed, dataObj = this._valueData[key];\n\t\tif (_.isFunction(ease)) {\n\t\t\tthis._easeFn[key] = ease;\n\t\t}\n\t\t// console.log(\"%s::valueTo [%s]\", \"[interpolator]\", key, value);\n\t\tif (Array.isArray(dataObj)) {\n\t\t\tchanged = value.reduce(function(prevChanged, itemValue, i) {\n\t\t\t\tif (dataObj[i]) {\n\t\t\t\t\tdataObj[i] = this._initNumber(itemValue, duration, this._maxValues[key]);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn this._setValue(dataObj[i], itemValue, duration) || prevChanged;\n\t\t\t}.bind(this), changed);\n\t\t} else {\n\t\t\tchanged = this._setValue(dataObj, value, duration);\n\t\t}\n\t\tif (changed) {\n\t\t\tthis._renderableKeys.indexOf(key) !== -1 || this._renderableKeys.push(key);\n\t\t}\n\t\treturn this;\n\t},\n\n\tupdateValue: function(key) {\n\t\t// Call _interpolateKey only if needed. _interpolateKey() returns false\n\t\t// once interpolation is done, in which case remove key from _renderableKeys.\n\t\tvar kIndex = this._renderableKeys.indexOf(key);\n\t\tif (kIndex !== -1 && !this._interpolateKey(key)) {\n\t\t\tthis._renderableKeys.splice(kIndex, 1);\n\t\t}\n\t\treturn this;\n\t},\n\n\t/* --------------------------- *\n\t/* private: valueData\n\t/* --------------------------- */\n\n\t_initValue: function(value, duration, maxVal) {\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(function(val) {\n\t\t\t\treturn this._initNumber(val, duration, maxVal);\n\t\t\t}, this);\n\t\t}\n\t\treturn this._initNumber(value, duration, maxVal);\n\t},\n\n\t_initNumber: function(value, duration, maxVal) {\n\t\tvar o = {};\n\t\to._value = value;\n\t\to._startValue = value;\n\t\to._valueDelta = 0;\n\n\t\to._duration = duration || 0;\n\t\to._startTime = NaN;\n\t\to._elapsedTime = NaN;\n\n\t\to._lastRenderedValue = null;\n\t\to._renderedValue = o._startValue;\n\n\t\to._maxVal = maxVal;\n\t\t// if (maxVal !== void 0) o._maxVal = maxVal;\n\t\t// o._maxVal = this._maxValues[key];\n\t\t// o._maxVal = this._maxVal;// FIXME\n\t\treturn o;\n\t},\n\n\t_setValue: function(o, value, duration) {\n\t\tif (o._value !== value) {\n\t\t\to._startValue = o._value;\n\t\t\to._valueDelta = value - o._value;\n\t\t\to._value = value;\n\n\t\t\to._duration = duration || 0;\n\t\t\to._startTime = NaN;\n\t\t\to._elapsedTime = NaN;\n\n\t\t\t// o._lastRenderedValue = o._renderedValue;\n\t\t\t// o._renderedValue = o._startValue;\n\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\t/* --------------------------- *\n\t/* private: interpolate\n\t/* --------------------------- */\n\n\t_tstamp: 0,\n\n\t/** @override */\n\tinterpolate: function(tstamp) {\n\t\tthis._tstamp = tstamp;\n\n\t\tif (this.valuesChanged) {\n\t\t\tif (this._pausedChanging) {\n\t\t\t\tthis._renderableKeys.forEach(function(key) {\n\t\t\t\t\tvar o = this._valueData[key];\n\t\t\t\t\tif (!isNaN(o._elapsedTime)) {\n\t\t\t\t\t\to._startTime = tstamp - o._elapsedTime;\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t\tthis._pausedChanging = false;\n\t\t\t}\n\t\t\tvar changedKeys = this._renderableKeys;\n\t\t\tthis._renderableKeys = changedKeys.filter(function(key) {\n\t\t\t\treturn this._interpolateValue(tstamp, this._valueData[key], this._easeFn[key]);\n\t\t\t}, this);\n\t\t\tthis._renderedKeys = changedKeys;\n\t\t}\n\t\treturn this;\n\t},\n\n\t_interpolateKey: function(key) {\n\t\treturn this._interpolateValue(this._tstamp, this._valueData[key], this._easeFn[key]);\n\t},\n\n\t_interpolateValue: function(tstamp, o, fn) {\n\t\tif (Array.isArray(o)) {\n\t\t\treturn o.reduce(function(changed, item, index, arr) {\n\t\t\t\treturn this._interpolateNumber(tstamp, item, fn) || changed;\n\t\t\t}.bind(this), false);\n\t\t}\n\t\treturn this._interpolateNumber(tstamp, o, fn);\n\t},\n\n\t_interpolateNumber: function(tstamp, o, fn) {\n\t\tif (isNaN(o._startTime)) {\n\t\t\to._startTime = tstamp;\n\t\t}\n\t\to._lastRenderedValue = o._renderedValue;\n\n\t\tvar elapsed = Math.max(0, tstamp - o._startTime);\n\t\tif (elapsed < o._duration) {\n\t\t\tif (o._maxVal && o._valueDelta < 0) {\n\t\t\t\t// upper-bound values\n\t\t\t\to._renderedValue = fn(elapsed, o._startValue,\n\t\t\t\t\to._valueDelta + o._maxVal, o._duration) - o._maxVal;\n\t\t\t} else {\n\t\t\t\t// unbound values\n\t\t\t\to._renderedValue = fn(elapsed, o._startValue,\n\t\t\t\t\to._valueDelta, o._duration);\n\t\t\t}\n\t\t\to._elapsedTime = elapsed;\n\t\t\treturn true;\n\t\t}\n\t\to._renderedValue = o._value;\n\t\to._elapsedTime = NaN;\n\t\to._startTime = NaN;\n\t\treturn false;\n\t},\n}, {\n\t/**\n\t * @type {boolean}\n\t */\n\tpaused: {\n\t\tget: function() {\n\t\t\treturn this._paused;\n\t\t},\n\t\tset: function(value) {\n\t\t\tvalue = !!(value); // Convert to boolean\n\t\t\tif (this._paused !== value) {\n\t\t\t\tthis._paused = value;\n\t\t\t\tthis._pausedChanging = true;\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * @type {boolean} Has any value been changed by valueTo() since last interpolate()\n\t */\n\tvaluesChanged: {\n\t\tget: function() {\n\t\t\treturn !this._paused && this._renderableKeys.length > 0;\n\t\t}\n\t},\n\t/**\n\t * @type {array} Keys that are not yet at target value\n\t */\n\trenderableKeys: {\n\t\tget: function() {\n\t\t\treturn this._renderableKeys;\n\t\t}\n\t},\n\t/**\n\t * @type {array} Keys that have been rendered in the last interpolate()\n\t */\n\trenderedKeys: {\n\t\tget: function() {\n\t\t\treturn this._renderedKeys;\n\t\t}\n\t},\n\t/**\n\t * @type {array} All keys\n\t */\n\tkeys: {\n\t\tget: function() {\n\t\t\treturn Object.keys(this._valueData);\n\t\t}\n\t},\n});\n\nmodule.exports = Interpolator;\n",
    "/** @type {module:utils/prefixedEvent} */\nconst prefixedEvent = require(\"utils/prefixedEvent\");\n\nvar eventMap = {\n\t\"transitionend\": prefixedEvent(\"transitionend\"),\n\t\"fullscreenchange\": prefixedEvent(\"fullscreenchange\", document),\n\t\"fullscreenerror\": prefixedEvent(\"fullscreenerror\", document),\n\t\"visibilitychange\": prefixedEvent(\"visibilitychange\", document, \"hidden\")\n};\n\nvar eventNum = 0;\nfor (var eventName in eventMap) {\n\tif (eventName === eventMap[eventName]) {\n\t\tdelete eventMap[eventName];\n\t} else {\n\t\tObject.defineProperty(eventMap, eventName, {\n\t\t\tvalue: eventMap[eventName],\n\t\t\tenumerable: true\n\t\t});\n\t\tObject.defineProperty(eventMap, eventNum, {\n\t\t\tvalue: eventName,\n\t\t\tenumerable: false\n\t\t});\n\t\teventNum++;\n\t}\n}\nObject.defineProperty(eventMap, \"length\", {\n\tvalue: eventNum\n});\n\nif (DEBUG) {\n\tconsole.log(\"prefixes enabled for %i events\", eventMap.length, Object.keys(eventMap));\n}\n\nmodule.exports = eventMap;\n\n// module.exports = eventNum > 0? eventMap : null;\n",
    "/**\n * @module app/view/base/TouchManager\n */\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:hammerjs} */\nconst Hammer = require(\"hammerjs\");\n// /** @type {module:hammerjs.Tap} */\n// const Tap = Hammer.Tap;\n/** @type {module:utils/touch/SmoothPanRecognizer} */\nconst Pan = require(\"utils/touch/SmoothPanRecognizer\");\n/** @type {module:hammerjs.Pan} */\n// const Pan = Hammer.Pan;\n\n/* -------------------------------\n/* Static private\n/* ------------------------------- */\n\n// let vpan = new Hammer(this.navigation, {\n// \trecognizers: [\n// \t\t[Pan, {\n// \t\t\tevent: 'vpan',\n// \t\t\ttouchAction: \"pan-y\",\n// \t\t\tdirection: Hammer.DIRECTION_VERTICAL,\n// \t\t\tenable: vpanEnableFn\n// \t\t}],\n// \t]\n// });\n// let hpan = new Hammer(this.content, {\n// \trecognizers: [\n// \t\t[Pan, {\n// \t\t\tevent: 'hpan',\n// \t\t\ttouchAction: \"pan-x\",\n// \t\t\tdirection: Hammer.DIRECTION_HORIZONTAL,\n// \t\t\tenable: hpanEnableFn\n// \t\t}],\n// \t\t[Tap]\n// \t]\n// });\n// hpan.get(\"hpan\").requireFailure(vpan.get(\"vpan\"));\n\n/**\n * @param el HTMLElement\n * @return {Hammer.Manager}\n */\nfunction createInstance(el) {\n\tlet manager = new Hammer.Manager(el);\n\t// manager.set({ domevents: true });\n\n\t// let tap = new Hammer.Tap({\n\t// \tthreshold: Globals.PAN_THRESHOLD - 1\n\t// });\n\t// manager.add(tap);\n\tlet hpan = new Pan({\n\t\tevent: \"hpan\",\n\t\tdirection: Hammer.DIRECTION_HORIZONTAL,\n\t\tthreshold: Globals.PAN_THRESHOLD,\n\t\t// touchAction: \"pan-y\",\n\t});\n\tmanager.add(hpan);\n\n\t// let vpan = new Pan({\n\t// \tevent: \"vpan\",\n\t// \tdirection: Hammer.DIRECTION_VERTICAL,\n\t// \t// threshold: Globals.PAN_THRESHOLD,\n\t// \t// touchAction: \"pan-x\",\n\t// });\n\t// manager.add(vpan);\n\t// vpan.requireFailure(hpan);\n\n\treturn manager;\n}\n\n/* -------------------------------\n * hammerjs fixup handlers\n * ------------------------------- */\n\n/* eslint-disable no-unused-vars */\nconst PANEND_THRES_MS = 300; // millisecs\nconst PANEND_THRES_PX = 25; // pixels\nconst UP_EVENT = window.hasOwnProperty(\"onpointerup\") ? \"pointerup\" : \"mouseup\";\n\nlet touchHandlers = {};\nlet captureHandlers = {};\nlet bubblingHandlers = {};\n\n/*https://gist.githubusercontent.com/jtangelder/361052976f044200ea17/raw/f54c2cef78d59da3f38286fad683471e1c976072/PreventGhostClick.js*/\nvar lastTimeStamp = NaN;\nvar panSessionOpened = false;\n\nlet saveTimeStamp = function(hev) {\n\tpanSessionOpened = !hev.isFinal;\n\tif (hev.isFinal) {\n\t\tlastTimeStamp = hev.srcEvent.timeStamp;\n\t}\n\tif (DEBUG) {\n\t\tlogPanEvent(hev);\n\t}\n};\n\n// let preventSrcEvent = function(hev) {\n// \t//console.log(hev.type, \"preventDefault\");\n// \thev.srcEvent.preventDefault();\n// };\n\n// let preventWhilePanning = function(domev) {\n// \tpanSessionOpened && domev.preventDefault();\n// };\n\n// let preventWhileNotPanning = function(domev) {\n// \t!panSessionOpened && domev.preventDefault();\n// };\n\nlet stopEventAfterPan = function(domev) {\n\tif ((domev.timeStamp - lastTimeStamp) < PANEND_THRES_MS) {\n\t\t// domev.defaultPrevented ||\n\t\tdomev.preventDefault();\n\t\tdomev.stopPropagation();\n\t}\n\tif (DEBUG) {\n\t\tlogEvent(domev, (domev.timeStamp - lastTimeStamp).toFixed(3));\n\t}\n\tlastTimeStamp = NaN;\n};\n\ntouchHandlers[\"hpanstart hpanend hpancancel\"] = saveTimeStamp;\n// touchHandlers[\"vpanstart vpanend vpancancel\"] = saveTimeStamp;\n// touchHandlers[\"hpanmove hpanend hpancancel\"] = preventSrcEvent;\n// touchHandlers[\"vpanmove vpanend vpancancel\"] = preventSrcEvent;\n\ncaptureHandlers[\"click\"] = stopEventAfterPan;\n// bubblingHandlers[\"click\"] = stopEventAfterPan;\n\n// touchHandlers[[\n// \t\"vpanstart\", \"vpanend\", \"vpancancel\", \"vpanmove\",\n// \t\"hpanstart\", \"hpanend\", \"hpancancel\", \"hpanmove\"\n// ].join(\" \")] = logHammerEvent;\n\n/* -------------------------------\n/* DOM event handlers\n/* ------------------------------- */\n\n\n// captureHandlers[UP_EVENT] = preventWhilePanning;\n// captureHandlers[\"touchmove\"] = captureHandlers[\"mousemove\"] = logDOMEvent;\n\nif (DEBUG) {\n\tvar logPanEvent = function(hev) {\n\t\tlogEvent(hev.srcEvent, `[${hev.type}]`);\n\t};\n\tvar logEvent = function(domev, msg) {\n\t\tlet msgs = [];\n\t\tif (domev.defaultPrevented)\n\t\t\tmsgs.push(\"prevented\");\n\t\tif (msg)\n\t\t\tmsgs.push(msg);\n\t\tmsgs.push(`${panSessionOpened ? \"panning\" : \"pan ended\"} ${(domev.timeStamp - lastTimeStamp).toFixed(3)}`);\n\t\tconsole.log(\"TouchManager %s [%s]\",\n\t\t\tdomev.timeStamp.toFixed(3),\n\t\t\tdomev.type,\n\t\t\tmsgs.join(\", \")\n\t\t);\n\t};\n}\n\n/* eslint-enable no-unsused-vars */\n\n// -------------------------------\n//\n// -------------------------------\n\nfunction addHandlers() {\n\tlet eventName;\n\tconst el = instance.element;\n\tfor (eventName in touchHandlers)\n\t\tif (touchHandlers.hasOwnProperty(eventName))\n\t\t\tinstance.on(eventName, touchHandlers[eventName]);\n\tfor (eventName in captureHandlers)\n\t\tif (captureHandlers.hasOwnProperty(eventName))\n\t\t\tel.addEventListener(eventName, captureHandlers[eventName], true);\n\tfor (eventName in bubblingHandlers)\n\t\tif (bubblingHandlers.hasOwnProperty(eventName))\n\t\t\tel.addEventListener(eventName, bubblingHandlers[eventName], false);\n\t// document.addEventListener(\"touchmove\", preventWhileNotPanning, false);\n}\n\nfunction removeHandlers() {\n\tlet eventName;\n\tconst el = instance.element;\n\tfor (eventName in captureHandlers)\n\t\tif (captureHandlers.hasOwnProperty(eventName))\n\t\t\tel.removeEventListener(eventName, captureHandlers[eventName], true);\n\tfor (eventName in bubblingHandlers)\n\t\tif (captureHandlers.hasOwnProperty(eventName))\n\t\t\tel.removeEventListener(eventName, bubblingHandlers[eventName], true);\n\t// document.removeEventListener(\"touchmove\", preventWhileNotPanning, false);\n}\n\n/** @type {Hammer.Manager} */\nlet instance = null;\n\n/* -------------------------------\n/* Static public\n/* ------------------------------- */\n\nlet TouchManager = {\n\tinit: function(target) {\n\t\tif (instance === null) {\n\t\t\tinstance = createInstance(target);\n\t\t\taddHandlers();\n\t\t} else if (instance.element !== target) {\n\t\t\tconsole.warn(\"TouchManager already initialized with another element\");\n\t\t}\n\t\treturn instance;\n\t},\n\n\tdestroy: function() {\n\t\tif (instance !== null) {\n\t\t\tremoveHandlers();\n\t\t\tinstance.destroy();\n\t\t\tinstance = null;\n\t\t} else {\n\t\t\tconsole.warn(\"no instance to destroy\");\n\t\t}\n\t},\n\n\tgetInstance: function() {\n\t\tif (instance === null) {\n\t\t\tconsole.error(\"TouchManager has not been initialized\");\n\t\t}\n\t\treturn instance;\n\t}\n};\n\nmodule.exports = TouchManager;\n\n/*\n// alt syntax\nfunction createInstance(el) {\n\treturn new Hammer(el, {\n\t\trecognizers: [\n\t\t\t[Tap],\n\t\t\t[Pan, {\n\t\t\t\tevent: 'hpan',\n\t\t\t\tdirection: Hammer.DIRECTION_HORIZONTAL,\n\t\t\t\tthreshold: Globals.THRESHOLD\n\t\t\t}],\n\t\t\t[Pan, {\n\t\t\t\tevent: 'vpan',\n\t\t\t\tdirection: Hammer.DIRECTION_VERTICAL,\n\t\t\t\tthreshold: Globals.THRESHOLD\n\t\t\t}, ['hpan']]\n\t\t]\n\t});\n}\n*/\n",
    "/* global HTMLElement, MutationObserver */\n/**\n * @module app/view/base/View\n */\n\n// /** @type {module:setimmediate} */\n// require(\"setimmediate\");\n\n/** @type {module:backbone} */\nconst Backbone = require(\"backbone\");\n\n/* -------------------------------\n/* MutationObserver\n/* ------------------------------- */\n\nvar _cidSeed = 1;\nvar _viewsByCid = {};\n\nfunction addChildViews(el) {\n\tvar view, els = el.querySelectorAll(\"*[data-cid]\");\n\tfor (var i = 0, ii = els.length; i < ii; i++) {\n\t\tview = View.findByElement(els.item(i));\n\t\tif (view) {\n\t\t\tif (!view.attached) {\n\t\t\t\t// console.log(\"View::[attached (parent)] %s\", view.cid);\n\t\t\t\tview._elementAttached();\n\t\t\t\t// } else {\n\t\t\t\t// \tconsole.warn(\"View::[attached (parent)] %s (ignored)\", view.cid);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction removeChildViews(el) {\n\tvar view, els = el.querySelectorAll(\"*[data-cid]\");\n\tfor (var i = 0, ii = els.length; i < ii; i++) {\n\t\tview = View.findByElement(els.item(i));\n\t\tif (view) {\n\t\t\tif (view.attached) {\n\t\t\t\tconsole.log(\"View::[detached (parent)] %s\", view.cid);\n\t\t\t\tview._elementDetached();\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"View::[detached (parent)] %s (ignored)\", view.cid);\n\t\t\t}\n\t\t}\n\t}\n}\n\nvar observer = new MutationObserver(function(mm) {\n\t// console.log(\"View::mutations %s\", JSON.stringify(mm, null, \" \"));\n\tvar i, ii, m;\n\tvar j, jj, e;\n\tvar view;\n\tfor (i = 0, ii = mm.length; i < ii; i++) {\n\t\tm = mm[i];\n\t\tif (m.type == \"childList\") {\n\t\t\tfor (j = 0, jj = m.addedNodes.length; j < jj; j++) {\n\t\t\t\te = m.addedNodes.item(j);\n\t\t\t\tview = View.findByElement(e);\n\t\t\t\tif (view) {\n\t\t\t\t\tif (!view.attached) {\n\t\t\t\t\t\t// console.log(\"View::[attached (childList)] %s\", view.cid);\n\t\t\t\t\t\tview._elementAttached();\n\t\t\t\t\t\t// } else {\n\t\t\t\t\t\t// \tconsole.warn(\"View::[attached (childList)] %s (ignored)\", view.cid);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (e instanceof HTMLElement) addChildViews(e);\n\t\t\t}\n\t\t\tfor (j = 0, jj = m.removedNodes.length; j < jj; j++) {\n\t\t\t\te = m.removedNodes.item(j);\n\t\t\t\t// console.log(\"View::[detached (childList)] %s\", e.cid);\n\t\t\t\tview = View.findByElement(e);\n\t\t\t\tif (view) {\n\t\t\t\t\tif (view.attached) {\n\t\t\t\t\t\tconsole.log(\"View::[detached (childList)] %s\", view.cid, view.attached);\n\t\t\t\t\t\tview._elementDetached();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"View::[detached (childList)] %s (ignored)\", view.cid, view.attached);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (e instanceof HTMLElement) removeChildViews(e);\n\t\t\t}\n\t\t} else if (m.type == \"attributes\") {\n\t\t\tview = View.findByElement(m.target);\n\t\t\tif (view) {\n\t\t\t\tif (!view.attached) {\n\t\t\t\t\t// console.log(\"View::[attached (attribute)] %s\", view.cid);\n\t\t\t\t\tview._elementAttached();\n\t\t\t\t\t// } else {\n\t\t\t\t\t// \tconsole.warn(\"View::[attached (attribute)] %s (ignored)\", view.cid);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// else {\n\t\t\t// \tconsole.warn(\"View::[attributes] target has no cid (%s='%s')\", m.attributeName, m.target.getAttribute(m.attributeName), m);\n\t\t\t// }\n\t\t}\n\t}\n});\n\nobserver.observe(document.body, {\n\tattributes: true,\n\tchildList: true,\n\tsubtree: true,\n\tattributeFilter: [\"data-cid\"]\n});\n\n/* -------------------------------\n/* static private\n/* ------------------------------- */\n\nvar _now = window.performance ?\n\twindow.performance.now.bind(window.performance) :\n\tDate.now.bind(Date);\n// var _now = window.performance?\n// \tfunction() { return window.performance.now(); }:\n// \tfunction() { return Date.now(); };\n\n// /** @type {module:app/view/base/renderQueue} */\n// var renderQueue = require(\"app/view/base/renderQueue\");\n//\n/** @type {module:app/view/base/CallbackQueue} */\nvar renderQueue = (function(CallbackQueue) {\n\treturn new CallbackQueue(\n\t\tfunction(callback) {\n\t\t\treturn window.requestAnimationFrame(callback);\n\t\t},\n\t\tfunction(id) {\n\t\t\treturn window.cancelAnimationFrame(id);\n\t\t}\n\t);\n})(require(\"app/view/base/CallbackQueue\"));\n\n/** @type {module:app/view/base/CallbackQueue} */\nvar modelQueue = (function(CallbackQueue) {\n\treturn new CallbackQueue(\n\t\tfunction(callback) {\n\t\t\treturn window.setImmediate(function() {\n\t\t\t\tcallback.call(null, _now());\n\t\t\t});\n\t\t},\n\t\tfunction(id) {\n\t\t\treturn window.clearImmediate(id);\n\t\t}\n\t);\n})(require(\"app/view/base/CallbackQueue\"));\n\n/** @type {module:app/view/base/PrefixedEvents} */\nconst PrefixedEvents = require(\"app/view/base/PrefixedEvents\");\n\nvar applyEventPrefixes = function(events) {\n\tvar selector, unprefixed;\n\tfor (selector in events) {\n\t\tunprefixed = selector.match(/^\\w+/i)[0];\n\t\tif (PrefixedEvents.hasOwnProperty(unprefixed)) {\n\t\t\tevents[selector.replace(unprefixed, PrefixedEvents[unprefixed])] = events[selector];\n\t\t\t// console.log(\"applyEventPrefixes\", unprefixed, prefixedEvents[unprefixed]);\n\t\t\tdelete events[selector];\n\t\t}\n\t}\n\treturn events;\n};\n\nvar getViewDepth = function(view) {\n\tif (!view) {\n\t\treturn null;\n\t}\n\tif (!view.attached) {\n\t\treturn NaN;\n\t}\n\tif (view.parentView === null) {\n\t\treturn 0;\n\t}\n\treturn view.parentView.viewDepth + 1;\n};\n\nfunction logAttachInfo(view, name, level) {\n\tif ([\"log\", \"info\", \"warn\", \"error\"].indexOf(level) != -1) {\n\t\tlevel = \"log\";\n\t}\n\tconsole[level].call(console, \"%s::%s [parent:%s %s %s depth:%s]\", view.cid, name, view.parentView && view.parentView.cid, view.attached ? \"attached\" : \"detached\", view._viewPhase, view.viewDepth);\n}\n\n/* -------------------------------\n/* static public\n/* ------------------------------- */\n\n\nvar View = {\n\n\t/** @const */\n\tNONE_INVALID: 0,\n\t/** @const */\n\tALL_INVALID: ~0 >>> 1,\n\n\t/** @const */\n\tCHILDREN_INVALID: 1,\n\t/** @const */\n\tMODEL_INVALID: 2,\n\t/** @const */\n\tSTYLES_INVALID: 4,\n\t/** @const */\n\tSIZE_INVALID: 8,\n\t/** @const */\n\tLAYOUT_INVALID: 16,\n\n\t/** @const */\n\tCLICK_EVENT: \"click\", //window.hasOwnProperty(\"onpointerup\") ? \"pointerup\" : \"mouseup\",\n\n\t/** @type {module:app/view/base/ViewError} */\n\tViewError: require(\"app/view/base/ViewError\"),\n\n\t/** @type {module:utils/prefixedProperty} */\n\tprefixedProperty: require(\"utils/prefixedProperty\"),\n\n\t/** @type {module:utils/prefixedStyleName} */\n\tprefixedStyleName: require(\"utils/prefixedStyleName\"),\n\n\t/** @type {module:utils/prefixedEvent} */\n\tprefixedEvent: require(\"utils/prefixedEvent\"),\n\n\t/** @type {module:app/view/promise/whenViewIsAttached} */\n\twhenViewIsAttached: require(\"app/view/promise/whenViewIsAttached\"),\n\n\t/** @type {module:app/view/promise/whenViewIsRendered} */\n\twhenViewIsRendered: require(\"app/view/promise/whenViewIsRendered\"),\n\n\t/**\n\t/* @param el {HTMLElement}\n\t/* @return {module:app/view/base/View}\n\t/*/\n\tfindByElement: function(el) {\n\t\tif (_viewsByCid[el.cid]) {\n\t\t\treturn _viewsByCid[el.cid];\n\t\t}\n\t\treturn null;\n\t},\n\n\t/**\n\t/* @param el {HTMLElement}\n\t/* @return {module:app/view/base/View}\n\t/*/\n\tfindByDescendant: function(el) {\n\t\tdo {\n\t\t\tif (_viewsByCid[el.cid]) {\n\t\t\t\treturn _viewsByCid[el.cid];\n\t\t\t}\n\t\t} while ((el = el.parentElement || el.parentNode));\n\t\treturn null;\n\t},\n\n\t/** @override */\n\textend: function(proto, obj) {\n\t\tif (PrefixedEvents.length && proto.events) {\n\t\t\tif (_.isFunction(proto.events)) {\n\t\t\t\tproto.events = _.wrap(proto.events, function(fn) {\n\t\t\t\t\treturn applyEventPrefixes(fn.apply(this));\n\t\t\t\t});\n\t\t\t} else\n\t\t\tif (_.isObject(proto.events)) {\n\t\t\t\tproto.events = applyEventPrefixes(proto.events);\n\t\t\t}\n\t\t}\n\t\tif (proto.properties && this.prototype.properties) {\n\t\t\t_.defaults(proto.properties, this.prototype.properties);\n\t\t}\n\t\treturn Backbone.View.extend.apply(this, arguments);\n\t},\n\n\t_flagsToStrings: [\"-\"],\n\n\tflagsToString: function(flags) {\n\t\tvar s = View._flagsToStrings[flags | 0];\n\t\tif (!s) {\n\t\t\ts = [];\n\t\t\tif (flags & View.CHILDREN_INVALID) s.push(\"children\");\n\t\t\tif (flags & View.MODEL_INVALID) s.push(\"model\");\n\t\t\tif (flags & View.STYLES_INVALID) s.push(\"styles\");\n\t\t\tif (flags & View.SIZE_INVALID) s.push(\"size\");\n\t\t\tif (flags & View.LAYOUT_INVALID) s.push(\"layout\");\n\t\t\tView._flagsToStrings[flags] = s = s.join(\" \");\n\t\t}\n\t\treturn s;\n\t\t// return (flags | 0).toString(2);\n\t},\n};\n\nObject.defineProperty(View, \"instances\", {\n\tvalue: _viewsByCid,\n\tenumerable: true\n});\n\n/* -------------------------------\n/* prototype\n/* ------------------------------- */\n\n// module.exports = Backbone.View.extend({\nvar ViewProto = {\n\n\t/** @type {string} */\n\tcidPrefix: \"view\",\n\t/** @type {Boolean} */\n\t_attached: false,\n\t/** @type {HTMLElement|null} */\n\t_parentView: null,\n\t/** @type {int|null} */\n\t_viewDepth: null,\n\t/** @type {string} initializing > initialized > disposing > disposed */\n\t_viewPhase: \"initializing\",\n\t/** @type {int} */\n\t_renderQueueId: -1,\n\t/** @type {int} */\n\t_renderFlags: 0,\n\t/** @type {Boolean} */\n\t_enabled: null,\n\n\t/** @type {object} */\n\tproperties: {\n\t\tcid: {\n\t\t\tget: function() {\n\t\t\t\treturn this._cid || (this._cid = this.cidPrefix + _cidSeed++);\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\t// ignored\n\t\t\t}\n\t\t},\n\t\tattached: {\n\t\t\tget: function() {\n\t\t\t\treturn this._attached;\n\t\t\t}\n\t\t},\n\t\tparentView: {\n\t\t\tget: function() {\n\t\t\t\treturn this._parentView;\n\t\t\t}\n\t\t},\n\t\tviewDepth: {\n\t\t\tget: function() {\n\t\t\t\treturn this._getViewDepth();\n\t\t\t}\n\t\t},\n\t\tinvalidated: {\n\t\t\tget: function() {\n\t\t\t\treturn this._renderQueueId !== -1;\n\t\t\t}\n\t\t},\n\t\tenabled: {\n\t\t\tget: function() {\n\t\t\t\treturn this._enabled;\n\t\t\t},\n\t\t\tset: function(enabled) {\n\t\t\t\tthis.setEnabled(enabled);\n\t\t\t}\n\t\t},\n\t\trenderFlags: {\n\t\t\tget: function() {\n\t\t\t\treturn this._renderFlags;\n\t\t\t}\n\t\t}\n\t},\n\n\t$: Backbone.$,\n\n\t/**\n\t * @constructor\n\t * @type {module:app/view/base/View}\n\t */\n\tconstructor: function(options) {\n\t\tthis.transform = {};\n\t\tthis.childViews = {};\n\t\tthis._applyRender = this._applyRender.bind(this);\n\n\t\tif (this.properties) {\n\t\t\t// Object.defineProperties(this, getPrototypeChainValue(this, \"properties\", Backbone.View));\n\t\t\tObject.defineProperties(this, this.properties);\n\t\t}\n\t\tif (options && options.className && this.className) {\n\t\t\toptions.className += \" \" + _.result(this, \"className\");\n\t\t}\n\t\tif (options && options.parentView) {\n\t\t\tthis._setParentView(options.parentView, true);\n\t\t}\n\t\tBackbone.View.apply(this, arguments);\n\n\t\t// console.log(\"%s::initialize viewPhase:[%s => initialized]\", this.cid, this._viewPhase);\n\t\tthis._viewPhase = \"initialized\";\n\n\t\tif (this.parentView !== null) {\n\t\t\tthis.trigger(\"view:parentChange\", this.parentView, null);\n\t\t}\n\t\tif (this.attached) {\n\t\t\tthis.trigger(\"view:attached\", this);\n\t\t}\n\t},\n\n\t/* -------------------------------\n\t/* remove\n\t/* ------------------------------- */\n\n\t/** @override */\n\tremove: function() {\n\t\tif (this._viewPhase == \"disposing\") {\n\t\t\tlogAttachInfo(this, \"remove\", \"warn\");\n\t\t} else {\n\t\t\t// logAttachInfo(this, \"remove\", \"log\");\n\t\t}\n\n\t\t// before removal\n\t\tthis._viewPhase = \"disposing\";\n\t\tthis._cancelRender();\n\n\t\t// call Backbone impl\n\t\t// Backbone.View.prototype.remove.apply(this, arguments);\n\n\t\t// NOTE: from Backbone impl\n\t\tthis.$el.remove(); // from Backbone impl\n\n\t\tthis._attached = false;\n\t\tthis.trigger(\"view:removed\", this);\n\n\t\t// remove parent/child references\n\t\tthis._setParentView(null);\n\n\t\t// NOTE: from Backbone impl. No more events after this\n\t\tthis.stopListening();\n\n\t\t// check for invalidations that may have been triggered by \"view:removed\"\n\t\tif (this.invalidated) {\n\t\t\tconsole.warn(\"%s::remove invalidated after remove()\", this.cid);\n\t\t\tthis._cancelRender();\n\t\t}\n\t\t// // check for children still here\n\t\t// var ccids = Object.keys(this.childViews);\n\t\t// if (ccids.length) {\n\t\t// \tconsole.warn(\"%s::remove %i children not removed [%s]\", this.cid, ccids.length, ccids.join(\", \"), this.childViews);\n\t\t// }\n\t\t// // remove childViews\n\t\t// for (var cid in this.childViews) {\n\t\t// \tthis.childViews[cid].remove();\n\t\t// }\n\t\t// clear reference in view map\n\t\tdelete _viewsByCid[this.cid];\n\t\t// delete this.el.cid;\n\t\t// update phase\n\t\tthis._viewPhase = \"disposed\";\n\t\treturn this;\n\t},\n\n\t/* -------------------------------\n\t/* _elementAttached _elementDetached\n\t/* ------------------------------- */\n\n\t_elementAttached: function() {\n\t\t// this._addToParentView();\n\t\tthis._attached = true;\n\t\tthis._viewDepth = null;\n\t\tthis.setEnabled(true);\n\t\tthis._setParentView(View.findByDescendant(this.el.parentElement));\n\n\t\t// if (this.parentView) {\n\t\t// \tconsole.log(\"[attach] [%i] %s > %s::_elementAttached\", this.viewDepth, this.parentView.cid, this.cid);\n\t\t// } else {\n\t\t// \tconsole.log(\"[attach] [%i] %s::_elementAttached\", this.viewDepth, this.cid);\n\t\t// }\n\n\t\t// if (this._viewPhase == \"initializing\") {\n\t\t// \t// this.trigger(\"view:attached\", this);\n\t\t// } else\n\t\tif (this._viewPhase == \"initialized\") {\n\t\t\tthis.trigger(\"view:attached\", this);\n\t\t} else\n\t\tif (this._viewPhase == \"replacing\") {\n\t\t\tthis._viewPhase = \"initialized\";\n\t\t\tthis.trigger(\"view:replaced\", this);\n\t\t}\n\t},\n\n\t_elementDetached: function() {\n\t\tif (!this.attached || (this._viewPhase == \"disposing\") || (this._viewPhase == \"disposed\")) {\n\t\t\tlogAttachInfo(this, \"_elementDetached\", \"error\");\n\t\t\t// } else {\n\t\t\t// \tlogAttachInfo(this, \"_elementDetached\", \"log\");\n\t\t}\n\t\tthis._attached = false;\n\t\tthis._viewDepth = null;\n\t\tthis.setEnabled(false);\n\n\t\tif (this._viewPhase != \"disposing\" || this._viewPhase == \"disposed\") {\n\t\t\tthis.remove();\n\t\t}\n\t},\n\n\t/* -------------------------------\n\t/* parentView\n\t/* ------------------------------- */\n\n\t_setParentView: function(newParent, silent) {\n\t\tif (newParent === void 0) {\n\t\t\tconsole.warn(\"$s::_setParentView invalid value '%s'\", this.cid, newParent);\n\t\t\tnewParent = null;\n\t\t}\n\t\tvar oldParent = this._parentView;\n\t\tthis._parentView = newParent;\n\n\t\t// force update of _viewDepth\n\t\tthis._viewDepth = null; //getViewDepth(this);\n\n\t\t// skip the rest if arg is the same\n\t\tif (newParent === oldParent) {\n\t\t\treturn;\n\t\t}\n\t\tif (oldParent !== null) {\n\t\t\tif (this.cid in oldParent.childViews) {\n\t\t\t\tdelete oldParent.childViews[this.cid];\n\t\t\t}\n\t\t}\n\t\tif (newParent !== null) {\n\t\t\tnewParent.childViews[this.cid] = this;\n\t\t}\n\t\tif (!silent)\n\t\t\tthis.trigger(\"view:parentChange\", this, newParent, oldParent);\n\t},\n\n\twhenAttached: function() {\n\t\treturn View.whenViewIsAttached(this);\n\t},\n\n\t_getViewDepth: function() {\n\t\tif (this._viewDepth === null) {\n\t\t\tthis._viewDepth = getViewDepth(this);\n\t\t}\n\t\treturn this._viewDepth;\n\t},\n\n\t/* -------------------------------\n\t/* Backbone.View overrides\n\t/* ------------------------------- */\n\n\t/** @override */\n\tsetElement: function(element, delegate) {\n\t\t// setElement always initializes this.el, so check it to be non-null before calling super\n\t\tif (this.el) {\n\t\t\tif (this.el !== element && this.el.parentElement) {\n\t\t\t\t// Element is being replaced\n\t\t\t\tif (this.attached) {\n\t\t\t\t\t// Since old element is attached to document tree, _elementAttached will be\n\t\t\t\t\t// triggered by replaceChild: set _viewPhase = \"replacing\" to flag this\n\t\t\t\t\t// change and trigger 'view:replaced' instead of 'view:added'.\n\t\t\t\t\tthis._viewPhase = \"replacing\";\n\t\t\t\t}\n\t\t\t\tthis.el.parentElement.replaceChild(element, this.el);\n\t\t\t}\n\t\t\tBackbone.View.prototype.setElement.apply(this, arguments);\n\t\t\t// Merge classes specified by this view with the ones already in the element,\n\t\t\t// as backbone will not:\n\t\t\tif (this.className) {\n\t\t\t\t_.result(this, \"className\").split(\" \").forEach(function(item) {\n\t\t\t\t\tthis.el.classList.add(item);\n\t\t\t\t}, this);\n\t\t\t}\n\t\t} else {\n\t\t\tBackbone.View.prototype.setElement.apply(this, arguments);\n\t\t}\n\n\t\tif (this.el === void 0) {\n\t\t\tthrow new Error(\"Backbone view has no element\");\n\t\t}\n\t\t_viewsByCid[this.cid] = this;\n\t\tthis.el.cid = this.cid;\n\t\tthis.el.setAttribute(\"data-cid\", this.cid);\n\t\tif (this.model) {\n\t\t\tthis.el.setAttribute(\"data-mcid\", this.model.cid);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/* ---------------------------\n\t/* event helpers\n\t/* --------------------------- */\n\n\taddListeners: function(target, events, handler, useCapture) {\n\t\tif (!_.isObject(useCapture)) useCapture = !!useCapture;\n\t\tif (typeof events === \"string\") { events = events.split(\" \"); }\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\ttarget.addEventListener(events[i], handler, useCapture);\n\t\t}\n\t\treturn this;\n\t},\n\n\tremoveListeners: function(target, events, handler, useCapture) {\n\t\tif (!_.isObject(useCapture)) useCapture = !!useCapture;\n\t\tif (typeof events === \"string\") { events = events.split(\" \"); }\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\ttarget.removeEventListener(events[i], handler, useCapture);\n\t\t}\n\t\treturn this;\n\t},\n\n\tlistenToElement: function(target, events, handler) {\n\t\ttarget = Backbone.$(target);\n\t\tif (typeof events === \"string\") { events = events.split(\" \"); }\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tthis.listenTo(target, events[i], handler);\n\t\t}\n\t},\n\tstopListeningToElement: function(target, events, handler) {\n\t\ttarget = Backbone.$(target);\n\t\tif (typeof events === \"string\") { events = events.split(\" \"); }\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tthis.stopListening(target, events[i], handler);\n\t\t}\n\t},\n\n\t// listenToElementOnce: function(target, event, handler, useCapture) {\n\t// \tthis.listenToOnce(this.$(target), event, handler);\n\t// },\n\t// stopListenToElement: function(target, event, handler, useCapture) {\n\t// \tthis.stopListening(Backbone.$(target), event, handler);\n\t// },\n\n\tlistenToElementOnce: function(target, event, handler, useCapture) {\n\t\tif (!_.isObject(useCapture)) useCapture = !!useCapture;\n\t\tvar cleanup, wrapper, ctx;\n\t\tctx = this;\n\t\tcleanup = function() {\n\t\t\tctx.off(\"view:remove\", cleanup);\n\t\t\ttarget.removeEventListener(event, wrapper, useCapture);\n\t\t};\n\t\twrapper = function(ev) {\n\t\t\tcleanup();\n\t\t\thandler.call(ctx, ev);\n\t\t};\n\t\tctx.on(\"view:remove\", cleanup);\n\t\ttarget.addEventListener(event, wrapper, useCapture);\n\t\treturn this;\n\t},\n\n\t/* -------------------------------\n\t/* requestAnimationFrame\n\t/* ------------------------------- */\n\n\trequestAnimationFrame: function(callback, priority, ctx) {\n\t\treturn renderQueue.request(callback.bind(ctx || this), priority);\n\t},\n\n\tcancelAnimationFrame: function(id) {\n\t\treturn renderQueue.cancel(id);\n\t},\n\n\tsetImmediate: function(callback, priority, ctx) {\n\t\treturn modelQueue.request(callback.bind(ctx || this), priority);\n\t},\n\n\tclearImmediate: function(id) {\n\t\treturn modelQueue.cancel(id);\n\t\t// return window.clearImmediate(id);\n\t},\n\n\t/* -------------------------------\n\t/* deferred render: private methods\n\t/* ------------------------------- */\n\n\t_traceRenderStatus: function() {\n\t\treturn [\n\t\t\t(this._renderQueueId != -1 ? \"async id:\" + this._renderQueueId : \"sync\"),\n\t\t\tView.flagsToString(this._renderFlags),\n\t\t\t(this.attached ? \"attached\" : \"detached\"),\n\t\t\t(this.skipTransitions ? \"skip\" : \"run\") + \"-tx\"\n\t\t].join(\", \");\n\t},\n\n\t/** @private */\n\t_applyRender: function(tstamp) {\n\t\tif (DEBUG) {\n\t\t\tif (this._logFlags[\"view.render\"]) {\n\t\t\t\tconsole.log(\"%s::_applyRender [%s]\",\n\t\t\t\t\tthis.cid, this._traceRenderStatus(),\n\t\t\t\t\tthis._logFlags[\"view.trace\"] ?\n\t\t\t\t\tthis._logRenderCallers.join(\"\\n\") : \"\");\n\t\t\t}\n\t\t\tthis._logRenderCallers.length = 0;\n\t\t}\n\n\t\tvar flags = this._renderFlags;\n\t\tthis.trigger(\"view:render:before\", this, flags);\n\t\tthis._renderFlags = 0;\n\t\tthis._renderQueueId = -1;\n\t\tthis._renderFlags |= this.renderFrame(tstamp, flags);\n\t\tthis.trigger(\"view:render:after\", this, flags);\n\n\t\tif (this._renderFlags != 0) {\n\t\t\tconsole.warn(\"%s::_applyRender [returned] phase: %s flags: %s (%s)\", this.cid, this._viewPhase, View.flagsToString(this._renderFlags), this._renderFlags);\n\t\t}\n\t},\n\n\t_cancelRender: function() {\n\t\tif (this._renderQueueId != -1) {\n\t\t\tvar cancelId, cancelFn;\n\n\t\t\tcancelId = this._renderQueueId;\n\t\t\tthis._renderQueueId = -1;\n\t\t\tcancelFn = renderQueue.cancel(cancelId);\n\n\t\t\tif (cancelFn === void 0) {\n\t\t\t\tconsole.warn(\"%s::_cancelRender [id:%i] not found\", this.cid, cancelId);\n\t\t\t} else if (cancelFn === null) {\n\t\t\t\tconsole.warn(\"%s::_cancelRender [id:%i] already cancelled\", this.cid, cancelId);\n\t\t\t\t// } else {\n\t\t\t\t// \tif (this._logFlags[\"view.render\"] && !renderQueue.running)\n\t\t\t\t// \t\tconsole.log(\"%s::_cancelRender ID:%i cancelled\", this.cid, cancelId);\n\t\t\t}\n\t\t}\n\t},\n\n\t_requestRender: function() {\n\t\tif (renderQueue.running) {\n\t\t\tthis._cancelRender();\n\t\t\t// if (DEBUG) {\n\t\t\t// \tif (this._logFlags[\"view.render\"]) {\n\t\t\t// \t\tconsole.info(\"%s::_requestRender rescheduled [%s (%s)]\", this.cid, View.flagsToString(this._renderFlags), this._renderFlags);\n\t\t\t// \t}\n\t\t\t// }\n\t\t}\n\t\tif (this._renderQueueId == -1) {\n\t\t\tthis._renderQueueId = renderQueue.request(this._applyRender, isNaN(this.viewDepth) ? Number.MAX_VALUE : this.viewDepth);\n\t\t}\n\t\tif (DEBUG) {\n\t\t\tif (this._logFlags[\"view.trace\"]) {\n\t\t\t\t// if (this._logFlags[\"view.trace\"]) {\n\t\t\t\t// \tconsole.groupCollapsed(this.cid + \"::_requestRender [\" + this._traceRenderStatus() + \"] trace\");\n\t\t\t\t// \tconsole.trace();\n\t\t\t\t// \tconsole.groupEnd();\n\t\t\t\t// } else {\n\t\t\t\tconsole.log(\"%s::_requestRender %s [%s]\", this.cid,\n\t\t\t\t\t(renderQueue.running ? \"rescheduled \" : \"\"),\n\t\t\t\t\tthis._traceRenderStatus()\n\t\t\t\t);\n\t\t\t\t// }\n\t\t\t}\n\t\t}\n\t},\n\n\t/* -------------------------------\n\t/* render: public / abstract methods\n\t/* ------------------------------- */\n\n\tinvalidate: function(flags) {\n\t\tif (flags !== void 0) {\n\t\t\t/*if (DEBUG) {\n\t\t\t\tif (this._logFlags[\"view.render\"]) {\n\t\t\t\t\tif (this._renderFlags > 0) {\n\t\t\t\t\t\tconsole.log(\"%s::invalidate [%s (%s)] + [%s (%s)]\", this.cid, View.flagsToString(this._renderFlags), this._renderFlags, View.flagsToString(flags), flags);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"%s::invalidate [%s (%s)]\", this.cid, View.flagsToString(flags), flags);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}*/\n\t\t\tthis._renderFlags |= flags;\n\t\t}\n\t\treturn this;\n\t},\n\n\trequestRender: function(flags) {\n\t\t// if (DEBUG) {\n\t\t// \tif (this._logFlags[\"view.trace\"]) {\n\t\t// \t\tvar fnPath = [];\n\t\t// \t\tvar fn = arguments.callee.caller;\n\t\t// \t\twhile (fn) {\n\t\t// \t\t\tif (fnPath.length > 5) break;\n\t\t// \t\t\tfnPath.push(fn.name);\n\t\t// \t\t\tfn = fn.caller;\n\t\t// \t\t}\n\t\t// \t\t// this._logRenderCallers.push(fnPath.join(\"\\n\\t->\"));\n\t\t// \t\tthis._logRenderCallers.push(fnPath.join(\" -> \"));\n\t\t// \t}\n\t\t// }\n\t\t// if (flags !== void 0) {\n\t\t// \tthis._renderFlags |= flags;\n\t\t// }\n\t\tthis.invalidate(flags);\n\t\tthis._requestRender();\n\t\treturn this;\n\t},\n\n\t/** @abstract */\n\trenderFrame: function(tstamp, flags) {\n\t\t// subclasses should override this method\n\t\treturn View.NONE_INVALID;\n\t},\n\n\trenderNow: function(alwaysRun) {\n\t\tif (this._renderQueueId != -1) {\n\t\t\tthis._cancelRender();\n\t\t\talwaysRun = true;\n\t\t}\n\t\t// if (alwaysRun === true) {\n\t\tif (alwaysRun) {\n\t\t\tthis._applyRender(_now());\n\t\t}\n\t\treturn this;\n\t},\n\n\twhenRendered: function() {\n\t\treturn View.whenViewIsRendered(this);\n\t},\n\n\t/* -------------------------------\n\t/* render bitwise flags\n\t/* - check: this._renderFlags & flags\n\t/* - add: this._renderFlags |= flags\n\t/* - remove: this._renderFlags &= ~flags\n\t/* ------------------------------- */\n\n\t/* helpers ------------------ */\n\n\trequestChildrenRender: function(flags, now, force) {\n\t\tvar ccid, view;\n\t\tfor (ccid in this.childViews) {\n\t\t\tview = this.childViews[ccid];\n\t\t\tview.skipTransitions = view.skipTransitions || this.skipTransitions;\n\t\t\tview.requestRender(flags);\n\t\t\tif (now) {\n\t\t\t\tview.renderNow(force);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\trender: function() {\n\t\treturn this.renderNow(true);\n\t},\n\n\t/* -------------------------------\n\t/* common abstract\n\t/* ------------------------------- */\n\n\t/**\n\t/* @param {Boolean}\n\t/*/\n\tsetEnabled: function(enable) {\n\t\tif (this._enabled == enable) return;\n\t\tthis._enabled = !!(enable);\n\t\tif (this._enabled) {\n\t\t\tthis.delegateEvents();\n\t\t} else {\n\t\t\tthis.undelegateEvents();\n\t\t}\n\t},\n};\n//, View);\n\nif (DEBUG) {\n\tViewProto._logFlags = [\n\t\t\"view.render\",\n\t\t// \"view.trace\"\n\t].join(\" \");\n\n\tViewProto.constructor = (function(fn) {\n\t\treturn function() {\n\t\t\tvar retval;\n\t\t\tthis._logRenderCallers = [];\n\t\t\tthis._logFlags = this._logFlags.split(\" \").reduce(function(r, o) {\n\t\t\t\tr[o] = true;\n\t\t\t\treturn r;\n\t\t\t}, {});\n\t\t\tretval = fn.apply(this, arguments);\n\t\t\t// console.log(\"------ %s %o\", this.cid, this._logFlags);\n\t\t\treturn retval;\n\t\t};\n\t})(ViewProto.constructor);\n}\n\nmodule.exports = Backbone.View.extend(ViewProto, View);\n",
    "function ViewError(view, err) {\n\tthis.view = view;\n\tthis.err = err;\n\tthis.message = err.message;\n}\nViewError.prototype = Object.create(Error.prototype);\nViewError.prototype.constructor = ViewError;\nViewError.prototype.name = \"ViewError\";\n\nmodule.exports = ViewError;\n",
    "\"use strict\";\n// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=container.escapeExpression, alias4=\"function\";\n\n  return \"<a href=\\\"\"\n    + alias3((helpers.global || (depth0 && depth0.global) || alias2).call(alias1,\"APP_ROOT\",{\"name\":\"global\",\"hash\":{},\"data\":data}))\n    + \"#\"\n    + alias3(((helper = (helper = helpers.handle || (depth0 != null ? depth0.handle : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{\"name\":\"handle\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"><span class=\\\"label\\\">\"\n    + ((stack1 = ((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias4 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</span></a>\\n\";\n},\"useData\":true});\n",
    "/**\n/* @module app/view/component/ArticleView\n/*/\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {Function} */\nconst viewTemplate = require(\"./ArticleButton.hbs\");\n\n/**\n/* @constructor\n/* @type {module:app/view/component/ArticleButton}\n/*/\nvar ArticleButton = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"articleButton\",\n\t/** @override */\n\ttagName: \"h2\",\n\t/** @override */\n\tclassName: \"article-button\",\n\t/** @type {Function} */\n\ttemplate: viewTemplate,\n\n\tevents: {\n\t\t\"click a\": function(domev) {\n\t\t\tdomev.defaultPrevented || domev.preventDefault();\n\t\t\tthis.trigger(\"view:click\", this.model);\n\t\t}\n\t},\n\n\t// /** @override */\n\t// initialize: function(options) {},\n\n\t/* --------------------------- *\n\t/* Render\n\t/* --------------------------- */\n\n\trenderFrame: function(tstamp, flags) {\n\t\tthis.el.innerHTML = this.template(this.model.toJSON());\n\t},\n});\nmodule.exports = ArticleButton;\n",
    "/**\n/* @module app/view/component/ArticleView\n/*/\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n\n// /** @type {module:utils/net/toAbsoluteURL} */\n// var toAbsoluteURL = require(\"utils/net/toAbsoluteURL\");\n//\n// /** @type {string} */\n// var ABS_APP_ROOT = toAbsoluteURL(require(\"app/control/Globals\").APP_ROOT);\n\nconst RECAPTCHA_KEYS = {\n\t'canillas.name': '6LcaPHwUAAAAAAfzEnqRchIx8jY1YkUEpuswJDHx'\n};\nconst RECAPTCHA_URL = (key) => `https://www.google.com/recaptcha/api.js?render=${RECAPTCHA_KEYS[key]}`;\n\n/**\n/* @constructor\n/* @type {module:app/view/component/ArticleView}\n/*/\nvar ArticleView = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"articleView\",\n\t/** @override */\n\ttagName: \"article\",\n\t/** @override */\n\tclassName: \"article-view mdown\",\n\n\t/** @override */\n\tinitialize: function(options) {},\n\n\t/* --------------------------- *\n\t/* Render\n\t/* --------------------------- */\n\n\trenderFrame: function(tstamp, flags) {\n\t\tthis.el.innerHTML = this.model.get(\"text\");\n\n\t\t// let linkEls = this.el.querySelectorAll(\"a[href]\");\n\t\t// if (linkEls.length) {\n\t\t// \tRECAPTCHA_URL('canillas.name');\n\t\t// }\n\t\t// linkEls.forEach(el => {\n\t\t// });\n\n\t\t// FIXME: now done in xslt\n\t\t// this.el.querySelectorAll(\"a[href]\").forEach(function(el) {\n\t\t// \tvar url = toAbsoluteURL(el.getAttribute(\"href\"));\n\t\t// \tif (url.indexOf(ABS_APP_ROOT) !== 0) {\n\t\t// \t\tel.setAttribute(\"target\", \"_blank\");\n\t\t// \t}\n\t\t// });\n\t},\n});\nmodule.exports = ArticleView;\n",
    "/**\n * @module app/view/component/progress/CanvasProgressMeter\n */\n\n/** @type {module:app/view/base/CanvasView} */\nconst CanvasView = require(\"app/view/base/CanvasView\");\n\nvar PI2 = Math.PI * 2;\n/* NOTE: avoid negative rotations */\nvar BASE_ROTATION = 1 - 0.25; // of PI2 (-90 degrees)\nvar GAP_ARC = PI2 / 48;\n\n/** @type {module:utils/ease/fn/easeInQuad} */\nconst easeIn = require(\"utils/ease/fn/easeInQuad\");\n/** @type {module:utils/ease/fn/easeOutQuad} */\nconst easeOut = require(\"utils/ease/fn/easeOutQuad\");\n\nvar LOOP_OFFSET = 1.833333;\nvar STEP_MS = 400; // tween time base\n\nvar ARC_DEFAULTS = {\n\t\"amount\": {\n\t\tlineWidth: 0.75,\n\t\tradiusOffset: 0\n\t},\n\t\"available\": {\n\t\tlineWidth: 0.75,\n\t\t// lineDash: [1.3, 0.7],\n\t\tinverse: \"not-available\"\n\t},\n\t\"not-available\": {\n\t\tlineWidth: 0.8,\n\t\tlineDash: [0.3, 0.7],\n\t\tlineDashOffset: 0\n\t},\n\t\"indeterminate\": {\n\t\tlineWidth: 2.0, //0.8,\n\t\tlineDash: [0.3, 1.7],\n\t\t// lineDash: [0.6, 1.4],\n\t\tlineDashOffset: 0\n\t},\n};\n\n/**\n * @constructor\n * @type {module:app/view/component/progress/CanvasProgressMeter}\n */\nmodule.exports = CanvasView.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"canvasProgressMeter\",\n\t/** @type {string} */\n\tclassName: \"progress-meter canvas-progress-meter\",\n\n\tdefaultKey: \"amount\",\n\n\tdefaults: {\n\t\tvalues: {\n\t\t\tamount: 0,\n\t\t\tavailable: 0,\n\t\t\t_loop: 0,\n\t\t\t_stalled_arc: 0,\n\t\t\t_stalled_loop: 0,\n\t\t},\n\t\tmaxValues: {\n\t\t\tamount: 1,\n\t\t\tavailable: 1,\n\t\t\t_stalled_loop: 1,\n\t\t},\n\t\tuseOpaque: true,\n\t\tlabelFn: function(value, max) {\n\t\t\treturn ((value / max) * 100) | 0;\n\t\t},\n\t},\n\n\tproperties: {\n\t\tstalled: {\n\t\t\tget: function() {\n\t\t\t\treturn false; //this._stalled;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\t// this._setStalled(value)\n\t\t\t}\n\t\t}\n\t},\n\n\t_setStalled: function(value) {\n\t\tif (this._stalled !== value) {\n\t\t\tthis._stalled = value;\n\t\t\tthis.requestRender(CanvasView.MODEL_INVALID | CanvasView.LAYOUT_INVALID);\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* children/layout\n\t/* --------------------------- */\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\t// TODO: cleanup options mess in CanvasView\n\t\tCanvasView.prototype.initialize.apply(this, arguments);\n\t\t// options = _.defaults(options, this.defaults);\n\n\t\tthis._labelFn = options.labelFn;\n\t\tthis._stalled = !!(options.stalled);\n\t\tthis._valueStyles = {};\n\t\tthis._canvasSize = null;\n\t\tthis._canvasOrigin = null;\n\t},\n\n\t_needsLoop: false,\n\n\t/** @override */\n\tvalueTo: function(key, value, duration) {\n\t\tif (key === \"amount\" && value < this.interpolator.getCurrentValue(\"amount\")) {\n\t\t\tthis._needsLoop = true;\n\t\t}\n\t\tCanvasView.prototype.valueTo.apply(this, arguments);\n\t},\n\n\t/* --------------------------- *\n\t/* private\n\t/* --------------------------- */\n\n\t/** @override */\n\tmeasureCanvas: function(w, h, s) {\n\t\t// make canvas square\n\t\tthis._canvasHeight = this._canvasWidth = Math.min(w, h);\n\t},\n\n\t/** @override */\n\tupdateCanvas: function() {\n\t\t// CanvasView.prototype._updateCanvas.apply(this, arguments);\n\n\t\t// size, lines, gaps, dashes (this._valueStyles, GAP_ARC, this._arcRadius)\n\t\t// --------------------------------\n\t\t// var arcName, s, arcDefault;\n\t\t// var mapLineDash = function(n) {\n\t\t// \treturn n * this.radius * GAP_ARC;\n\t\t// };\n\t\t// var sumFn = function(s, n) {\n\t\t// \treturn s + n;\n\t\t// };\n\n\t\t// this._canvasSize = Math.min(this._canvasWidth, this._canvasHeight);\n\n\t\tvar s;\n\t\t// this._maxDashArc = 0\n\t\tfor (var styleName in ARC_DEFAULTS) {\n\t\t\ts = _.defaults({}, ARC_DEFAULTS[styleName]);\n\t\t\ts.lineWidth *= this._canvasRatio;\n\t\t\ts.radius = (this._canvasWidth - s.lineWidth) / 2;\n\t\t\tif (s.radiusOffset) {\n\t\t\t\ts.radius += s.radiusOffset * this._canvasRatio;\n\t\t\t}\n\t\t\tif (_.isArray(s.lineDash)) {\n\t\t\t\ts.lineDash = s.lineDash.map(function(val, i, arr) {\n\t\t\t\t\treturn val * this.radius * GAP_ARC;\n\t\t\t\t}, s);\n\t\t\t\ts.lineDashLength = s.lineDash.reduce(function(res, val, i, arr) {\n\t\t\t\t\treturn res + val;\n\t\t\t\t}, 0);\n\t\t\t\ts.lineDashArc = s.lineDash[0] * GAP_ARC;\n\t\t\t\t// this._maxDashArc = Math.max(this._maxDashArc, s.lineDashArc);\n\t\t\t} else {\n\t\t\t\ts.lineDashArc = 0;\n\t\t\t}\n\t\t\tthis._valueStyles[styleName] = s;\n\t\t}\n\n\t\t// baselineShift\n\t\t// --------------------------------\n\t\t// NOTE: Center baseline: use ascent data to center to x-height, or sort-of.\n\t\t// with ascent/descent values (0.7, -0.3), x-height is 0.4\n\t\tvar mObj = this._getFontMetrics(this._fontFamily);\n\t\tthis._baselineShift = mObj ? (mObj.ascent + mObj.descent) / mObj.unitsPerEm : 0.7; // default value\n\t\tthis._baselineShift *= this._fontSize * 0.5; // apply to font-size, halve it\n\t\tthis._baselineShift = Math.round(this._baselineShift);\n\n\t\t// save canvas context\n\t\t// --------------------------------\n\t\t// reset matrix and translate 0,0 to center\n\t\tthis._ctx.restore();\n\t\tthis._ctx.setTransform(1, 0, 0, 1, this._canvasWidth / 2, this._canvasHeight / 2);\n\t\tthis._ctx.save();\n\t},\n\n\t/** @override */\n\tredraw: function(ctx, intrp, flags) {\n\t\tthis._clearCanvas(-this._canvasWidth / 2, -this._canvasHeight / 2,\n\t\t\tthis._canvasWidth, this._canvasHeight\n\t\t);\n\n\t\tvar s, // reused style objects\n\t\t\tvalData, // reused for interpolated data\n\t\t\tarcVal; // reused arc values\n\n\t\t// amount label\n\t\t// --------------------------------\n\t\tvalData = intrp._valueData[\"amount\"];\n\t\tthis.drawLabel(this._labelFn(valData._renderedValue, valData._maxVal));\n\n\t\t// indeterminate\n\t\t// --------------------------------\n\n\t\t/*\n\t\tvar indVal;\n\t\tif (this.stalled) {\n\t\t\t// _ind loop indefinitely while indeterminate: restart if at end\n\t\t\tif (intrp.isAtTarget(\"_ind\")) {\n\t\t\t\t// if (intrp.renderedKeys && (intrp.renderedKeys.indexOf(\"_ind\") === -1)) {\n\t\t\t\tintrp.valueTo(\"_ind\", 0, 0);\n\t\t\t\tintrp.valueTo(\"_ind\", 1, 1000);\n\t\t\t\tintrp.updateValue(\"_ind\");\n\t\t\t}\n\t\t\tindVal = intrp.getCurrentValue(\"_ind\");\n\t\t\t//indVal = intrp._valueData[\"_ind\"]._renderedValue || 0;\n\n\t\t\t// draw spinning arc\n\t\t\t// --------------------------------\n\t\t\t// s = this._valueStyles[\"amount\"];\n\t\t\t// ctx.save();\n\t\t\t// ctx.rotate(PI2 * (BASE_ROTATION + (indVal))); // + GAP_ARC);\n\t\t\t// lastEndArc = this.drawArc(1,\n\t\t\t// \tGAP_ARC,\n\t\t\t// \tPI2 - GAP_ARC,\n\t\t\t// \t0, s);\n\t\t\t// ctx.restore();\n\t\t\t// return;\n\n\t\t\t// lineDashOffset animation\n\t\t\t// --------------------------------\n\t\t\ts = this._valueStyles[\"indeterminate\"];\n\t\t\ts.lineDashOffset = s.lineDashLength * ((1 - indVal) % 3) * 3;\n\t\t\tthis._valueStyles[\"available\"].inverse = \"indeterminate\";\n\n\t\t\t// console.log(\"%s::redraw indVal:%o s.lineDashOffset:%o s.lineDash:%o\", this.cid, indVal, s.lineDashOffset, s.lineDash[0]);\n\n\t\t\t// draw spinning wheel\n\t\t\t// --------------------------------\n\t\t\t// ctx.save();\n\t\t\t// ctx.rotate((PI2 / WHEEL_NUM) * indVal); // + GAP_ARC);\n\t\t\t// this.drawWheel(this._valueStyles[\"amount\"], 2 / 5, 3 / 5);\n\t\t\t// ctx.restore();\n\n\t\t} else {\n\t\t\tif (!intrp.isAtTarget(\"_ind\")) {\n\t\t\t\t// if (intrp.renderedKeys && (intrp.renderedKeys.indexOf(\"_ind\") !== -1)) {\n\t\t\t\tintrp.valueTo(\"_ind\", 0, 0);\n\t\t\t\tintrp.updateValue(\"_ind\");\n\t\t\t}\n\t\t\t// lineDashOffset animation\n\t\t\t// --------------------------------\n\t\t\tthis._valueStyles[\"available\"].inverse = \"not-available\";\n\t\t}*/\n\n\t\t// save ctx before drawing arcs\n\t\tctx.save();\n\n\t\t// loop (amount)\n\t\t// --------------------------------\n\t\tvar loopVal;\n\t\t/*\n\t\tNOTE: If value \"amount\" has changed (with valueTo()) but no yet\n\t\tinterpolated, and its last rendered value is less, then its been reset\n\t\t(a reload, a loop, etc): we trigger a 'loop' of the whole arc.\n\t\t*/\n\t\t// if ((intrp.renderedKeys.indexOf(\"amount\") !== -1) && (valData._lastRenderedValue > valData._renderedValue)) {\n\t\tif (this._needsLoop) {\n\t\t\tthis._needsLoop = false;\n\t\t\t// trigger loop\n\t\t\tintrp.valueTo(\"_loop\", 1, 0);\n\t\t\tintrp.valueTo(\"_loop\", 0, 750);\n\t\t\tintrp.updateValue(\"_loop\");\n\t\t}\n\t\t// loopVal = intrp._valueData[\"_loop\"]._renderedValue || 0;\n\t\tloopVal = intrp.getCurrentValue(\"_loop\");\n\t\tctx.rotate((PI2 * (BASE_ROTATION + (1 - loopVal)))); // + GAP_ARC);\n\n\t\t// amount arc\n\t\t// --------------------------------\n\t\t// var amountGapArc = GAP_ARC;\n\t\tvar lastEndArc = 0;\n\n\t\ts = this._valueStyles[\"amount\"];\n\t\tarcVal = loopVal + valData._renderedValue / valData._maxVal;\n\n\t\tif (arcVal > 0) {\n\t\t\tlastEndArc = this.drawArc(arcVal,\n\t\t\t\tGAP_ARC,\n\t\t\t\tPI2 - GAP_ARC,\n\t\t\t\tlastEndArc, s);\n\t\t\tthis.drawEndCap(lastEndArc, s);\n\t\t\tlastEndArc = lastEndArc + GAP_ARC * 2;\n\t\t}\n\n\t\t// available arc\n\t\t// --------------------------------\n\t\ts = this._valueStyles[\"available\"];\n\t\tvalData = intrp._valueData[\"available\"];\n\n\t\tvar stepsNum = valData.length || 1;\n\t\tvar stepBaseArc = PI2 / stepsNum;\n\t\tvar stepAdjustArc = stepBaseArc % GAP_ARC;\n\t\tvar stepGapArc = GAP_ARC + (stepAdjustArc - s.lineDashArc) / 2;\n\n\t\tif (Array.isArray(valData)) {\n\t\t\tfor (var i = 0; i < stepsNum; i++) {\n\t\t\t\tarcVal = valData[i]._renderedValue / (valData[i]._maxVal / stepsNum);\n\t\t\t\tthis.drawArc(arcVal,\n\t\t\t\t\t(i * stepBaseArc) + stepGapArc,\n\t\t\t\t\t((i + 1) * stepBaseArc) - stepGapArc,\n\t\t\t\t\tlastEndArc, s);\n\t\t\t}\n\t\t} else {\n\t\t\tarcVal = valData._renderedValue / valData._maxVal;\n\t\t\tthis.drawArc(arcVal,\n\t\t\t\tstepGapArc,\n\t\t\t\tPI2 - stepGapArc,\n\t\t\t\tlastEndArc, s);\n\t\t}\n\t\t// restore ctx after drawing arcs\n\t\t// keep rotation transform\n\t\t//ctx.restore();\n\n\t\tif (this._stalled) {\n\t\t\tif (intrp.getTargetValue('_stalled_arc') === 0) {\n\t\t\t\tintrp.valueTo('_stalled_arc', 1, 1 * STEP_MS, easeIn).updateValue('_stalled_arc');\n\t\t\t}\n\t\t} else {\n\t\t\tif (intrp.getTargetValue('_stalled_arc') === 1) {\n\t\t\t\tintrp.valueTo('_stalled_arc', 0, 1 * STEP_MS, easeOut).updateValue('_stalled_arc');\n\t\t\t}\n\t\t}\n\t\tvar a = intrp.getRenderedValue(\"_stalled_arc\");\n\t\t// while arc is > 0, loop indefinitely while spinning and restart\n\t\t// if at end. Otherwise let interp exhaust arc duration\n\t\tif (a > 0) {\n\t\t\tif (!intrp.paused && intrp.isAtTarget('_stalled_loop')) {\n\t\t\t\tintrp\n\t\t\t\t\t.valueTo('_stalled_loop', 0, 0)\n\t\t\t\t\t.valueTo('_stalled_loop', 1, 2 * STEP_MS)\n\t\t\t\t\t.updateValue('_stalled_loop');\n\t\t\t}\n\t\t}\n\t\tvar l = intrp.getRenderedValue(\"_stalled_loop\");\n\t\t// always render while arc is > 0\n\t\tif (a > 0) {\n\t\t\t// arc span bounce\n\t\t\tvar b = (l < 0.5 ? (l % 0.5) : 0.5 - (l % 0.5)) * 2;\n\t\t\t// bounce + main arc span\n\t\t\tvar aa = (a * b * 0.25) + (a * 0.125) + .0001;\n\t\t\t// rotation loop\n\t\t\tvar ll = l + LOOP_OFFSET;\n\n\t\t\tctx.save();\n\t\t\tctx.lineWidth = 10 * this._canvasRatio;\n\t\t\tctx.globalAlpha = 1;\n\t\t\tctx.globalCompositeOperation = \"destination-out\";\n\t\t\tctx.strokeColor = 'red';\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(0, 0, (this._canvasWidth) / 2, ((1 - aa) + ll) * PI2, (aa + ll) * PI2, false);\n\t\t\tctx.stroke();\n\t\t\tctx.restore();\n\t\t}\n\t\tctx.restore();\n\t},\n\n\tdrawArc: function(value, startArc, endArc, prevArc, style) {\n\t\tvar valArc,\n\t\t\tvalStartArc,\n\t\t\tvalEndArc,\n\t\t\tinvStyle,\n\t\t\tinvStartArc,\n\t\t\tinvEndArc;\n\n\t\tprevArc || (prevArc = 0);\n\n\t\tvalArc = endArc - startArc;\n\t\tvalEndArc = startArc + (valArc * value);\n\t\tvalStartArc = Math.max(startArc, prevArc);\n\t\tif (valEndArc > valStartArc) {\n\t\t\tthis._ctx.save();\n\t\t\tthis.applyValueStyle(style);\n\t\t\tthis._ctx.beginPath();\n\t\t\tthis._ctx.arc(0, 0, style.radius, valEndArc, valStartArc, true);\n\t\t\tthis._ctx.stroke();\n\t\t\tthis._ctx.restore();\n\t\t}\n\n\t\t// if there's valueStyle, draw rest of span, minus prevArc overlap too\n\t\tif (style.inverse !== void 0) {\n\t\t\tinvStyle = this._valueStyles[style.inverse];\n\n\t\t\tinvEndArc = valEndArc + (valArc * (1 - value));\n\t\t\tinvStartArc = Math.max(valEndArc, prevArc);\n\t\t\tif (invEndArc > invStartArc) {\n\t\t\t\tthis._ctx.save();\n\t\t\t\tthis.applyValueStyle(invStyle);\n\t\t\t\tthis._ctx.beginPath();\n\t\t\t\tthis._ctx.arc(0, 0, invStyle.radius, invEndArc, invStartArc, true);\n\t\t\t\tthis._ctx.stroke();\n\t\t\t\tthis._ctx.restore();\n\t\t\t}\n\t\t}\n\n\t\treturn valEndArc;\n\t},\n\n\tapplyValueStyle: function(s) {\n\t\tthis._ctx.lineWidth = s.lineWidth;\n\t\tif (_.isArray(s.lineDash)) {\n\t\t\tthis._ctx.setLineDash(s.lineDash);\n\t\t}\n\t\tif (_.isNumber(s.lineDashOffset)) {\n\t\t\tthis._ctx.lineDashOffset = s.lineDashOffset;\n\t\t}\n\t},\n\n\n\tdrawNotch: function(arcPos, length, s) {\n\t\tvar ex, ey, ec1, ec2;\n\n\t\tex = Math.cos(arcPos);\n\t\tey = Math.sin(arcPos);\n\t\tec1 = s.radius;\n\t\tec2 = s.radius - length;\n\n\t\tthis._ctx.save();\n\t\tthis.applyValueStyle(s);\n\t\tthis._ctx.lineCap = \"square\";\n\t\tthis._ctx.beginPath();\n\t\tthis._ctx.moveTo(ec1 * ex, ec1 * ey);\n\t\tthis._ctx.lineTo(ec2 * ex, ec2 * ey);\n\t\tthis._ctx.stroke();\n\t\tthis._ctx.restore();\n\t},\n\n\tdrawEndCap: function(arcPos, s) {\n\t\tvar radius = s.radius;\n\t\tthis._ctx.save();\n\t\tthis._ctx.lineWidth = s.lineWidth;\n\n\t\tthis._ctx.rotate(arcPos - GAP_ARC * 2); // 1.5);\n\t\tthis._ctx.beginPath();\n\t\tthis._ctx.arc(0, 0, radius, GAP_ARC * 0.5, GAP_ARC * 2, false);\n\t\tthis._ctx.lineTo(radius - (GAP_ARC * radius), 0);\n\t\tthis._ctx.closePath();\n\n\t\tthis._ctx.fill();\n\t\tthis._ctx.stroke();\n\t\tthis._ctx.restore();\n\t},\n\n\tdrawLabel: function(s) {\n\t\tif (this._labelText !== s) {\n\t\t\tthis._labelText = s;\n\t\t\tthis._labelWidth = this._ctx.measureText(s).width;\n\t\t}\n\t\tthis._ctx.fillText(s, this._labelWidth * -0.5, this._baselineShift, this._labelWidth);\n\t},\n});\n\nif (DEBUG) {\n\tmodule.exports.prototype._logFlags = \"\";\n}\n",
    "/**\n * @module app/view/component/Carousel\n */\n\n/** @type {module:backbone.babysitter} */\nconst Container = require(\"backbone.babysitter\");\n\n/** @type {module:hammerjs} */\nconst Hammer = require(\"hammerjs\");\n/** @type {module:utils/touch/SmoothPanRecognizer} */\nconst Pan = require(\"utils/touch/SmoothPanRecognizer\");\n/** @type {module:hammerjs.Tap} */\nvar Tap = Hammer.Tap;\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n// /** @type {module:app/view/base/DeferredView} */\n// var View = require(\"app/view/base/DeferredView\");\n\n/** @type {module:app/view/render/CarouselRenderer} */\nconst CarouselRenderer = require(\"app/view/render/CarouselRenderer\");\n\n/** @type {module:utils/prefixedProperty} */\nconst prefixedProperty = require(\"utils/prefixedProperty\");\n/** @type {module:utils/prefixedStyleName} */\nconst prefixedStyleName = require(\"utils/prefixedStyleName\");\n\nvar transformStyleName = prefixedStyleName(\"transform\");\nvar transformProperty = prefixedProperty(\"transform\");\nvar translateTemplate = Globals.TRANSLATE_TEMPLATE;\n\n// var cssToPx = function(cssVal, el) {\n// \treturn parseInt(cssVal);\n// };\n\n// var defaultRendererFunction = (function() {\n// \tvar defaultRenderer = CarouselRenderer.extend({ className: \"carousel-item default-renderer\"}),\n// \t\temptyRenderer = CarouselRenderer.extend({ className: \"carousel-item empty-renderer\"});\n// \treturn function(item, index, arr) {\n// \t\treturn (index === -1)? emptyRenderer: defaultRenderer;\n// \t};\n// })();\n\n/** @const */\nvar MAX_SELECT_THRESHOLD = 20;\n\n// /** @const */\n// var CHILDREN_INVALID = View.CHILDREN_INVALID,\n// \tSTYLES_INVALID = View.STYLES_INVALID,\n// \tMODEL_INVALID = View.MODEL_INVALID,\n// \tSIZE_INVALID = View.SIZE_INVALID,\n// \tLAYOUT_INVALID = View.LAYOUT_INVALID;\n\nvar VERTICAL = Hammer.DIRECTION_VERTICAL,\n\tHORIZONTAL = Hammer.DIRECTION_HORIZONTAL;\n\n// x: [\"x\", \"y\"],\n// y: [\"y\", \"x\"],\n// offsetLeft: [\"offsetLeft\", \"offsetTop\"],\n// offsetTop: [\"offsetTop\", \"offsetLeft\"],\n// offsetWidth: [\"offsetWidth\", \"offsetHeight\"],\n// offsetHeight: [\"offsetHeight\", \"offsetWidth\"],\n// width: [\"width\",\"height\"],\n// height: [\"height\",\"width\"],\n// marginLeft: [\"marginLeft\",\"marginTop\"],\n// marginRight: [\"marginRight\",\"marginBottom\"],\n\n/*\nvar HORIZONTAL_PROPS = {\n\tpos: \"x\",\n\tsize: \"width\",\n\toffsetPos: \"offsetLeft\",\n\toffsetSize: \"offsetWidth\",\n\tmarginBefore: \"marginLeft\",\n\tmarginAfter: \"marginRight\",\n};\nvar VERTICAL_PROPS = {\n\tpos: \"y\",\n\tsize: \"height\",\n\toffsetPos: \"offsetTop\",\n\toffsetSize: \"offsetHeight\",\n\tmarginBefore: \"marginTop\",\n\tmarginAfter: \"marginBottom\",\n};\n*/\n\n// var DIRECTION_NONE = 1;\n// var DIRECTION_LEFT = 2;\n// var DIRECTION_RIGHT = 4;\n// var DIRECTION_UP = 8;\n// var DIRECTION_DOWN = 16;\n\nvar dirToStr = function(dir) {\n\tif (dir === Hammer.DIRECTION_NONE) return 'NONE';\n\tif (dir === Hammer.DIRECTION_LEFT) return 'LEFT';\n\tif (dir === Hammer.DIRECTION_RIGHT) return 'RIGHT';\n\tif (dir === Hammer.DIRECTION_UP) return 'UP';\n\tif (dir === Hammer.DIRECTION_DOWN) return 'DOWN';\n\tif (dir === Hammer.DIRECTION_HORIZONTAL) return 'HOR'; //IZONTAL';\n\tif (dir === Hammer.DIRECTION_VERTICAL) return 'VER'; //TICAL';\n\tif (dir === Hammer.DIRECTION_ALL) return 'ALL';\n\treturn 'UNREC'; //OGNIZED';\n}\n\nvar isValidTouchManager = function(touch, direction) {\n\t// var retval;\n\ttry {\n\t\treturn touch.get(\"hpan\").options.direction == direction;\n\t} catch (err) {\n\t\treturn false;\n\t}\n\t// return retval;\n};\n\n// /** @type {int} In pixels */\n// var panThreshold: 15;\n\nvar createTouchManager = function(el, dir, thres) {\n\tvar touch = new Hammer.Manager(el);\n\tvar pan = new Pan({\n\t\tevent: \"hpan\",\n\t\tthreshold: Globals.THRESHOLD,\n\t\tdirection: Hammer.DIRECTION_HORIZONTAL,\n\t});\n\tvar tap = new Tap({\n\t\tthreshold: Globals.THRESHOLD - 1,\n\t\tinterval: 50,\n\t\ttime: 200,\n\t});\n\ttap.recognizeWith(pan);\n\ttouch.add([pan, tap]);\n\treturn touch;\n};\n\n\nvar Carousel = {\n\t/** const */\n\tANIMATED: false,\n\t/** const */\n\tIMMEDIATE: true,\n\n\t/** copy of Hammer.DIRECTION_VERTICAL */\n\tDIRECTION_VERTICAL: VERTICAL,\n\t/** copy of Hammer.DIRECTION_HORIZONTAL */\n\tDIRECTION_HORIZONTAL: HORIZONTAL,\n\t/** @type {Object} */\n\tdefaults: {\n\t\t/** @type {boolean} */\n\t\tselectOnScrollEnd: false,\n\t\t/** @type {boolean} */\n\t\trequireSelection: false,\n\t\t/** @type {int} */\n\t\tdirection: HORIZONTAL,\n\t\t/** @type {int} In pixels */\n\t\tselectThreshold: 20,\n\t\t/** @type {Function} */\n\t\trendererFunction: (function() {\n\t\t\tvar defaultRenderer = CarouselRenderer.extend({\n\t\t\t\t\tclassName: \"carousel-item default-renderer\"\n\t\t\t\t}),\n\t\t\t\temptyRenderer = CarouselRenderer.extend({\n\t\t\t\t\tclassName: \"carousel-item empty-renderer\"\n\t\t\t\t});\n\t\t\treturn function(item, index, arr) {\n\t\t\t\treturn (index === -1) ? emptyRenderer : defaultRenderer;\n\t\t\t};\n\t\t})(),\n\t},\n};\nCarousel.validOptions = _.keys(Carousel.defaults);\n\n/**\n/* @constructor\n/* @type {module:app/view/component/Carousel}\n/*/\nvar CarouselProto = {\n\n\t/** @override */\n\tcidPrefix: \"carousel\",\n\t/** @override */\n\ttagName: \"div\",\n\t/** @override */\n\tclassName: \"carousel skip-transitions\",\n\n\t/* --------------------------- *\n\t/* properties\n\t/* --------------------------- */\n\n\tproperties: {\n\t\tscrolling: {\n\t\t\tget: function() {\n\t\t\t\treturn this._scrolling;\n\t\t\t}\n\t\t},\n\t\tselectedItem: {\n\t\t\tget: function() {\n\t\t\t\treturn this._selectedView.model;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tif (value)\n\t\t\t\t\tthis._onSelectOne(value)\n\t\t\t\telse\n\t\t\t\t\tthis._onSelectNone();\n\t\t\t}\n\t\t},\n\t},\n\n\tevents: {\n\t\t// \"mousedown\": \"_onMouseDown\", \"mouseup\": \"_onMouseUp\",\n\t\t\"transitionend .carousel-item.selected\": \"_onScrollTransitionEnd\",\n\t\t\"click .carousel-item:not(.selected)\": \"_onClick\",\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\t_.bindAll(this, \"_onPointerEvent\", \"_onClick\");\n\n\t\tthis.itemViews = new Container();\n\t\tthis.metrics = {};\n\n\t\t_.extend(this, _.defaults(_.pick(options, Carousel.validOptions), Carousel.defaults));\n\n\t\t// this.childGap = 0; //this.dirProp(20, 18);\n\t\tthis._precedingDir = (Hammer.DIRECTION_LEFT | Hammer.DIRECTION_UP) & this.direction;\n\t\tthis._followingDir = (Hammer.DIRECTION_RIGHT | Hammer.DIRECTION_DOWN) & this.direction;\n\n\t\t// use supplied touch mgr or create private\n\t\tif (isValidTouchManager(options.touch, this.direction)) {\n\t\t\tthis.touch = options.touch;\n\t\t} else {\n\t\t\tconsole.warn(\"%s::initialize creating Hammer instance\", this.cid);\n\t\t\tthis.touch = createTouchManager(this.el, this.direction);\n\t\t\t// this.on(\"view:removed\", this.touch.destroy, this.touch);\n\t\t\tthis.listenTo(this, \"view:removed\", function() {\n\t\t\t\tthis.touch.destroy();\n\t\t\t});\n\t\t}\n\n\t\t/* create children and props */\n\t\tthis.setEnabled(true);\n\t\tthis.skipTransitions = true;\n\t\tthis._renderFlags = View.CHILDREN_INVALID;\n\t\t// this.invalidateChildren();\n\n\t\tthis.listenTo(this, \"view:attached\", function() {\n\t\t\tthis.skipTransitions = true;\n\t\t\t// this.invalidateSize();\n\t\t\t// this.renderNow();\n\t\t\t// this.requestRender();\n\t\t\tthis.requestRender(View.SIZE_INVALID | View.LAYOUT_INVALID);\n\t\t});\n\n\t\t/* collection listeners */\n\t\tthis.listenTo(this.collection, {\n\t\t\t\"reset\": this._onReset,\n\t\t\t\"select:one\": this._onSelectOne,\n\t\t\t\"select:none\": this._onSelectNone,\n\t\t\t\"deselect:one\": this._onDeselectAny,\n\t\t\t\"deselect:none\": this._onDeselectAny,\n\t\t});\n\t},\n\t/* --------------------------- *\n\t/* Hammer init\n\t/* --------------------------- */\n\n\t// validateTouchManager: function(touch, direction) {\n\t// \ttry {\n\t// \t\treturn touch.get(\"pan\").options.direction === direction);\n\t// \t} catch (err) {\n\t// \t\treturn false;\n\t// \t}\n\t// },\n\n\t// initializeHammer: function(options) {\n\t// \t// direction from opts/defaults\n\t// \tif (options.direction === VERTICAL) {\n\t// \t\tthis.direction = VERTICAL;\n\t// \t} // do nothing: the default is horizontal\n\t//\n\t// \t// validate hammer instance or create local\n\t// \tif ((touch = options.touch) && (pan = touch.get(\"pan\"))) {\n\t// \t\t// Override direction only if specific\n\t// \t\tif (pan.options.direction !== Hammer.DIRECTION_ALL) {\n\t// \t\t\tthis.direction = pan.options.direction;\n\t// \t\t}\n\t// \t\tthis.panThreshold = pan.options.threshold;\n\t// \t} else {\n\t// \t\tconsole.warn(\"%s::initializeHammer using private Hammer instance\", this.cid);\n\t// \t\ttouch = createHammerInstance(this.el, this.panThreshold, this.direction);\n\t// \t\tthis.on(\"view:removed\", touch.destroy, touch);\n\t// \t}\n\t// \tthis.touch = touch;\n\t// },\n\n\tremove: function() {\n\t\t// this._scrollPendingAction && this._scrollPendingAction(true);\n\t\t// if (this._enabled) {\n\t\t// \tthis.touch.off(\"tap\", this._onTap);\n\t\t// \tthis.touch.off(\"hpanstart hpanmove hpanend hpancancel\", this._onPan);\n\t\t// }\n\t\tthis._togglePointerEvents(false);\n\t\tthis.removeChildren();\n\t\tView.prototype.remove.apply(this, arguments);\n\t\treturn this;\n\t},\n\n\n\t/* --------------------------- *\n\t/* helper functions\n\t/* --------------------------- */\n\n\tdirProp: function(hProp, vProp) {\n\t\treturn (this.direction & HORIZONTAL) ? hProp : vProp;\n\t},\n\n\t/* --------------------------- *\n\t/* Render\n\t/* --------------------------- */\n\n\t// render: function() {\n\t// \tif (this.attached) {\n\t// \t\tthis.skipTransitions = true;\n\t// \t\t// this.invalidateSize();\n\t// \t\tthis.renderNow(true);\n\t// \t}\n\t// },\n\n\t// /** @override */\n\t// render: function () {\n\t// \tif (!this.attached) {\n\t// \t\tif (!this._renderPending) {\n\t// \t\t\tthis._renderPending = true;\n\t// \t\t\tthis.listenTo(this, \"view:attached\", this.render);\n\t// \t\t}\n\t// \t} else {\n\t// \t\tif (this._renderPending) {\n\t// \t\t\tthis._renderPending = false;\n\t// \t\t\tthis.stopListening(this, \"view:attached\", this.render);\n\t// \t\t}\n\t// \t\tthis._delta = 0;\n\t// \t\tthis.skipTransitions = true;\n\t// \t\tthis.invalidateSize();\n\t// \t\t// this.invalidateLayout();\n\t// \t\tthis.renderNow();\n\t// \t}\n\t// \treturn this;\n\t// },\n\n\t// render: function () {\n\t// \tthis.measureLater();\n\t// \tthis.scrollBy(0, Carousel.IMMEDIATE);\n\t//\n\t// \tif (this.el.parentElement) {\n\t// \t\tthis.renderNow();\n\t// \t}\n\t// \treturn this;\n\t// },\n\n\t/** @override */\n\trenderFrame: function(tstamp, flags) {\n\t\tif (flags & View.CHILDREN_INVALID) {\n\t\t\tthis._createChildren();\n\t\t\t// clear this flag now: render may be deferred until attached\n\t\t\tflags &= ~View.CHILDREN_INVALID;\n\t\t}\n\t\tif (this.attached) {\n\t\t\tif (flags & View.SIZE_INVALID) {\n\t\t\t\tthis._measure();\n\t\t\t}\n\t\t\tif (flags & (View.LAYOUT_INVALID | View.SIZE_INVALID)) {\n\t\t\t\tthis._scrollBy(this._delta, this.skipTransitions);\n\t\t\t}\n\t\t} else if (flags) {\n\t\t\tthis.listenToOnce(this, \"view:attached\", function() {\n\t\t\t\tthis.requestRender(flags);\n\t\t\t});\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* enabled\n\t/* --------------------------- */\n\n\t// /** @override */\n\t// _enabled: undefined,\n\n\t/** @override */\n\tsetEnabled: function(enabled) {\n\t\tif (this._enabled !== enabled) {\n\t\t\tthis._enabled = enabled;\n\t\t\t// toggle events immediately\n\t\t\tthis._togglePointerEvents(enabled);\n\t\t\t// dom manipulation on render (_renderEnabled)\n\t\t\t// this._renderFlags |= View.STYLES_INVALID;\n\t\t\t// this.requestRender();\n\t\t\tthis.setImmediate(this._renderEnabled);\n\t\t\t// this._renderEnabled();\n\t\t}\n\t},\n\n\t_renderEnabled: function() {\n\t\tthis.el.classList.toggle(\"disabled\", !this.enabled);\n\t\tthis.itemViews.each(function(view) {\n\t\t\tview.setEnabled(this.enabled);\n\t\t}, this);\n\t},\n\n\t/* --------------------------- *\n\t/* Create children\n\t/* --------------------------- */\n\n\t_createChildren: function() {\n\t\t// var sIndex;\n\t\tvar buffer, renderer, view, viewOpts;\n\n\t\tthis.removeChildren();\n\n\t\tif (this.collection.length) {\n\t\t\tviewOpts = {\n\t\t\t\t// viewDepth: this.viewDepth + 1,\n\t\t\t\t// parentView: this,\n\t\t\t\tenabled: this.enabled\n\t\t\t};\n\t\t\tbuffer = document.createDocumentFragment();\n\t\t\t// buffer = this.el;\n\n\t\t\tif (!this.requireSelection) {\n\t\t\t\trenderer = this.rendererFunction(null, -1, this.collection);\n\t\t\t\tview = new renderer(viewOpts);\n\t\t\t\tthis.itemViews.add(view);\n\t\t\t\tbuffer.appendChild(view.el);\n\t\t\t\tthis.emptyView = view;\n\t\t\t}\n\n\t\t\tthis.collection.each(function(item, index, arr) {\n\t\t\t\tviewOpts.model = item;\n\t\t\t\trenderer = this.rendererFunction(item, index, arr);\n\t\t\t\tview = new renderer(viewOpts);\n\t\t\t\tthis.itemViews.add(view);\n\t\t\t\tbuffer.appendChild(view.el);\n\t\t\t}, this);\n\n\t\t\t// if (!this.requireSelection) {\n\t\t\t// \tbuffer = this.appendItemView(buffer, this.model, -1, this.collection);\n\t\t\t// \tthis.emptyView = this.itemViews.first();\n\t\t\t// }\n\t\t\t// buffer = this.collection.reduce(this.appendItemView, buffer, this);\n\n\t\t\tthis.adjustToSelection();\n\t\t\tthis._selectedView.el.classList.add(\"selected\");\n\n\t\t\tthis.el.appendChild(buffer);\n\t\t}\n\t},\n\n\t// appendItemView: function (parentEl, model, index, arr) {\n\t// \tvar renderer = this.rendererFunction(model, index, arr);\n\t// \tvar view = new renderer({\n\t// \t\tmodel: model,\n\t// \t\tparentView: this,\n\t// \t\tenabled: this.enabled\n\t// \t});\n\t// \tthis.itemViews.add(view);\n\t// \tparentEl.appendChild(view.el);\n\t// \treturn parentEl;\n\t// },\n\n\t// createItemView: function (renderer, opts) {\n\t// \tvar view = new renderer(opts);\n\t// \tthis.itemViews.add(view);\n\t// \treturn view;\n\t// },\n\n\tremoveChildren: function() {\n\t\tthis.itemViews.each(this.removeItemView, this);\n\t\tthis.emptyView = (void 0);\n\t},\n\n\tremoveItemView: function(view) {\n\t\tthis.itemViews.remove(view);\n\t\tview.remove();\n\t\treturn view;\n\t},\n\n\t/* --------------------------- *\n\t/* measure\n\t/* --------------------------- */\n\n\t_measure: function() {\n\t\tvar m, mm;\n\t\tvar pos = 0,\n\t\t\tposInner = 0;\n\t\tvar maxAcross = 0,\n\t\t\tmaxOuter = 0;\n\t\tvar maxOuterView, maxAcrossView;\n\n\t\tmaxOuterView = maxAcrossView = this.emptyView || this.itemViews.first();\n\n\t\t// chidren metrics\n\t\tthis.itemViews.each(function(view) {\n\t\t\tview.render();\n\t\t});\n\n\t\tthis.itemViews.each(function(view) {\n\t\t\tm = this.measureItemView(view);\n\t\t\tm.pos = pos;\n\t\t\tpos += m.outer; // + this.childGap;\n\t\t\tm.posInner = posInner;\n\t\t\tposInner += m.inner; //+ this.childGap;\n\t\t\tif (view !== this.emptyView) {\n\t\t\t\tif (m.across > maxAcross) {\n\t\t\t\t\tmaxAcross = m.across;\n\t\t\t\t\tmaxAcrossView = view;\n\t\t\t\t}\n\t\t\t\tif (m.outer > maxOuter) {\n\t\t\t\t\tmaxOuter = m.outer;\n\t\t\t\t\tmaxOuterView = view;\n\t\t\t\t}\n\t\t\t}\n\t\t}, this);\n\n\t\t// measure self + max child metrics\n\t\tmm = this.metrics[this.cid] || (this.metrics[this.cid] = {});\n\t\tmm.outer = this.el[this.dirProp(\"offsetWidth\", \"offsetHeight\")];\n\t\tmm.before = maxOuterView.el[this.dirProp(\"offsetLeft\", \"offsetTop\")];\n\t\tmm.inner = maxOuterView.el[this.dirProp(\"offsetWidth\", \"offsetHeight\")];\n\t\tmm.after = mm.outer - (mm.inner + mm.before);\n\t\tmm.across = maxAcross;\n\n\t\t// m = this.metrics[maxOuterView.cid];\n\t\t// mm.inner = m.inner;\n\n\t\t// tap area\n\t\tthis._tapAcrossBefore = maxAcrossView.el[this.dirProp(\"offsetTop\", \"offsetLeft\")];\n\t\tthis._tapAcrossAfter = this._tapAcrossBefore + maxAcross;\n\t\tthis._tapBefore = mm.before + this._tapGrow;\n\t\tthis._tapAfter = mm.before + mm.inner - this._tapGrow;\n\n\t\tthis.selectThreshold = Math.min(MAX_SELECT_THRESHOLD, mm.outer * 0.1);\n\t},\n\n\tmeasureItemView: function(view) {\n\t\tvar m, viewEl;\n\t\t// var s, sizeEl;\n\n\t\tviewEl = view.el;\n\t\tm = this.metrics[view.cid] || (this.metrics[view.cid] = {});\n\n\t\tm.outer = viewEl[this.dirProp(\"offsetWidth\", \"offsetHeight\")];\n\t\tm.across = viewEl[this.dirProp(\"offsetHeight\", \"offsetWidth\")];\n\n\t\tif (view.metrics) {\n\t\t\tm.before = view.metrics[this.dirProp(\"marginLeft\", \"marginTop\")];\n\t\t\tm.outer += m.before;\n\t\t\tm.outer += view.metrics[this.dirProp(\"marginRight\", \"marginBottom\")];\n\t\t\tm.inner = view.metrics.content[this.dirProp(\"width\", \"height\")];\n\t\t\tm.before += view.metrics.content[this.dirProp(\"x\", \"y\")];\n\t\t\tm.after = m.outer - (m.inner + m.before);\n\n\t\t\t// var marginBefore = view.metrics[this.dirProp(\"marginLeft\",\"marginTop\")];\n\t\t\t// var marginAfter = view.metrics[this.dirProp(\"marginRight\",\"marginBottom\")];\n\t\t\t// var pos = view.metrics.content[this.dirProp(\"x\",\"y\")];\n\t\t\t//\n\t\t\t// m.inner = view.metrics.content[this.dirProp(\"width\",\"height\")];\n\t\t\t// m.before = marginBefore + pos;\n\t\t\t// m.outer += marginBefore + marginAfter;\n\t\t\t// m.after = m.outer - (m.inner + m.before);\n\t\t} else {\n\t\t\t// throw new Error(\"renderer has no metrics\");\n\t\t\tconsole.warn(\"%s::measureItemView view '%s' has no metrics\", this.cid, view.cid);\n\t\t\tm.inner = m.outer;\n\t\t\tm.after = m.before = 0;\n\t\t}\n\n\t\treturn m;\n\t},\n\n\t/* --------------------------- *\n\t/* scrolling property\n\t/* --------------------------- */\n\n\t_delta: 0,\n\n\t_scrolling: false,\n\n\t_setScrolling: function(scrolling) {\n\t\t// console.warn(\"_setScrolling current/requested\", this._scrolling, scrolling);\n\t\tif (this._scrolling != scrolling) {\n\t\t\tthis._scrolling = scrolling;\n\t\t\tthis.el.classList.toggle(\"scrolling\", scrolling);\n\t\t\tthis.trigger(scrolling ? \"view:scrollstart\" : \"view:scrollend\");\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Scroll/layout\n\t/* --------------------------- */\n\n\tscrollBy: function(delta, skipTransitions) {\n\t\tthis._delta = delta || 0;\n\t\tthis.skipTransitions = !!skipTransitions;\n\t\t// this.invalidateLayout();\n\t\tthis.requestRender(View.LAYOUT_INVALID);\n\t},\n\n\t_scrollBy: function(delta, skipTransitions) {\n\t\tvar sMetrics, metrics, pos;\n\n\t\tsMetrics = this.metrics[(this._scrollCandidateView || this._selectedView).cid];\n\t\tthis.itemViews.each(function(view) {\n\t\t\tmetrics = this.metrics[view.cid];\n\t\t\tpos = Math.floor(this._getScrollOffset(delta, metrics, sMetrics));\n\t\t\tview.metrics.translateX = (this.direction & HORIZONTAL) ? pos : 0;\n\t\t\tview.metrics.translateY = (this.direction & HORIZONTAL) ? 0 : pos;\n\t\t\tview.metrics._transform = translateTemplate(view.metrics.translateX, view.metrics.translateY);\n\t\t\tview.el.style[transformProperty] = view.metrics._transform;\n\t\t\t// view.el.style[transformProperty] = (this.direction & HORIZONTAL)?\n\t\t\t// \t\"translate3d(\" + pos + \"px,0,0)\":\n\t\t\t// \t\"translate3d(0,\" + pos + \"px,0)\";\n\t\t}, this);\n\n\t\tthis.el.classList.toggle(\"skip-transitions\", skipTransitions);\n\t\tthis.selectFromView();\n\t},\n\n\t_getScrollOffset: function(delta, mCurr, mSel) {\n\t\tvar pos, offset = 0;\n\n\t\tpos = mCurr.pos - mSel.pos + delta;\n\t\tif (pos < 0) {\n\t\t\tif (Math.abs(pos) < mSel.outer) {\n\t\t\t\toffset += (-mCurr.after) / mSel.outer * pos;\n\t\t\t} else {\n\t\t\t\toffset += mCurr.after;\n\t\t\t}\n\t\t} else\n\t\tif (0 <= pos) {\n\t\t\tif (Math.abs(pos) < mSel.outer) {\n\t\t\t\toffset -= mCurr.before / mSel.outer * pos;\n\t\t\t} else {\n\t\t\t\toffset -= mCurr.before;\n\t\t\t}\n\t\t}\n\t\treturn pos + offset;\n\t},\n\n\t_onScrollTransitionEnd: function(ev) {\n\t\tif (ev.propertyName === transformStyleName && this.scrolling) {\n\t\t\tconsole.log(\"%s::_onScrollTransitionEnd selected: %s\", this.cid, ev.target.cid);\n\t\t\tthis._setScrolling(false);\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* toggle touch events\n\t/* --------------------------- */\n\n\t_togglePointerEvents: function(enable) {\n\t\t// console.log(\"%s::_togglePointerEvents\", this.cid, enable);\n\t\tif (this._pointerEventsEnabled == enable) return;\n\n\t\tthis._pointerEventsEnabled = enable;\n\t\tif (enable) {\n\t\t\tthis.touch.on(\"hpanstart hpanmove hpanend hpancancel\", this._onPointerEvent);\n\t\t\tthis.el.addEventListener(View.CLICK_EVENT, this._onClick, true);\n\t\t} else {\n\t\t\tthis.touch.off(\"hpanstart hpanmove hpanend hpancancel\", this._onPointerEvent);\n\t\t\tthis.el.removeEventListener(View.CLICK_EVENT, this._onClick, true);\n\t\t}\n\t},\n\n\t_onPointerEvent: function(ev) {\n\t\t// NOTE: https://github.com/hammerjs/hammer.js/pull/1118\n\t\tif (ev.srcEvent.type === 'pointercancel')\n\t\t\treturn;\n\n\t\tconsole.log(\"%s:[%s (%s)]:_onPointerEvent offs:%s [%s|%s==%s] [%s]\", this.cid, ev.type, ev.srcEvent.type,\n\t\t\tdirToStr(ev.offsetDirection),\n\t\t\tdirToStr(ev.direction),\n\t\t\tdirToStr(this.direction),\n\t\t\tdirToStr(ev.direction | this.direction),\n\t\t\t(ev.srcEvent.defaultPrevented ? \"prevented\" : \"-\"));\n\n\t\t// if (ev.direction & this.direction) {\n\t\tswitch (ev.type) {\n\t\t\t// case View.CLICK_EVENT:\n\t\t\t// \treturn this._onClick(ev);\n\t\t\t// case \"tap\":\n\t\t\t// \treturn this._onTap(ev);\n\t\t\tcase \"hpanstart\":\n\t\t\t\treturn this._onPanStart(ev);\n\t\t\tcase \"hpanmove\":\n\t\t\t\treturn this._onPanMove(ev);\n\t\t\tcase \"hpanend\":\n\t\t\t\treturn this._onPanFinal(ev);\n\t\t\tcase \"hpancancel\":\n\t\t\t\treturn this._onPanFinal(ev);\n\t\t}\n\t\t// }\n\t},\n\n\t/* --------------------------- *\n\t/* touch event: pan\n\t/* --------------------------- */\n\n\tgetViewAtPanDir: function(dir) {\n\t\t// return (dir & this._precedingDir) ? this._precedingView : this._followingView;\n\t\treturn (dir & this._followingDir) ? this._precedingView : this._followingView;\n\t},\n\n\t// _panCapturedOffset: 0,\n\n\t/** @param {Object} ev */\n\t_onPanStart: function(ev) {\n\t\tthis.selectFromView();\n\t\tthis.el.classList.add(\"panning\");\n\t\tthis._setScrolling(true);\n\t},\n\n\t/** @param {Object} ev */\n\t_onPanMove: function(ev) {\n\t\t// var delta = (this.direction & HORIZONTAL) ? ev.thresholdDeltaX : ev.thresholdDeltaY;\n\t\tvar delta = (this.direction & HORIZONTAL) ? ev.deltaX : ev.deltaY;\n\t\tvar view = this.getViewAtPanDir(ev.offsetDirection);\n\t\tvar cView = this._panCandidateView;\n\n\t\tif (cView !== view) {\n\t\t\tcView && cView.el.classList.remove(\"candidate\");\n\t\t\tview && view.el.classList.add(\"candidate\");\n\t\t\tthis._panCandidateView = view;\n\t\t}\n\t\tif (cView === (void 0)) {\n\t\t\tdelta *= Globals.HPAN_OUT_DRAG;\n\t\t}\n\n\t\tif (this._renderRafId !== -1) {\n\t\t\tthis.scrollBy(delta, Carousel.IMMEDIATE);\n\t\t\tthis.renderNow();\n\t\t} else {\n\t\t\tthis._scrollBy(delta, Carousel.IMMEDIATE);\n\t\t}\n\t},\n\n\t/** @param {Object} ev */\n\t_onPanFinal: function(ev) {\n\t\tvar scrollCandidate;\n\t\t// NOTE: this delta is used for determining selection, NOT for layout\n\t\t// var delta = (this.direction & HORIZONTAL) ? ev.thresholdDeltaX : ev.thresholdDeltaY;\n\t\tvar delta = (this.direction & HORIZONTAL) ? ev.deltaX : ev.deltaY;\n\n\t\tif ((ev.type == \"hpanend\")\n\t\t\t/* pan direction (current event) and offsetDirection (whole gesture) must match */\n\t\t\t&& (ev.direction ^ ev.offsetDirection ^ this.direction)\n\t\t\t// && (ev.direction & ev.offsetDirection & this.direction)\n\t\t\t/* gesture must overshoot selectThreshold */\n\t\t\t&& (Math.abs(delta) > this.selectThreshold)) {\n\t\t\t/* choose next scroll target */\n\t\t\tscrollCandidate = this.getViewAtPanDir(ev.offsetDirection);\n\t\t}\n\t\tthis._scrollCandidateView = scrollCandidate || (void 0);\n\n\t\tif (this._panCandidateView && (this._panCandidateView !== scrollCandidate)) {\n\t\t\tthis._panCandidateView.el.classList.remove(\"candidate\");\n\t\t}\n\t\tthis._panCandidateView = (void 0);\n\t\tthis.el.classList.remove(\"panning\");\n\n\t\tconsole.log(\"%s:[%s]:_onPanFinal thres:(%s>%s) dir:(e:%s o:%s c:%s)=%s\\n\", this.cid, ev.type,\n\t\t\tMath.abs(delta), this.selectThreshold,\n\t\t\tdirToStr(ev.direction),\n\t\t\tdirToStr(ev.offsetDirection),\n\t\t\tdirToStr(this.direction),\n\t\t\tdirToStr(ev.direction ^ ev.offsetDirection ^ this.direction),\n\t\t\tscrollCandidate ? (scrollCandidate.cid + \":\" + scrollCandidate.model.cid) : \"none\");\n\t\t// console.log(\"%s::_onPanFinal\", this.cid, ev);\n\n\t\tthis.scrollBy(0, Carousel.ANIMATED);\n\t\tthis.selectFromView();\n\n\t\t// if (this._renderRafId !== -1) {\n\t\t// \tthis.scrollBy(0, Carousel.ANIMATED);\n\t\t// \tthis.renderNow();\n\t\t// } else {\n\t\t// \tthis._scrollBy(0, Carousel.ANIMATED);\n\t\t// }\n\t},\n\n\t/* --------------------------- *\n\t/* touch event: tap\n\t/* --------------------------- */\n\n\t/** @type {int} In pixels */\n\t_tapGrow: 10,\n\n\tgetViewAtTapPos: function(posAlong, posAcross) {\n\t\tif ((this._tapAcrossBefore < posAcross) && (posAcross < this._tapAcrossAfter)) {\n\t\t\tif (posAlong < this._tapBefore) {\n\t\t\t\treturn this._precedingView;\n\t\t\t} else\n\t\t\tif (posAlong > this._tapAfter) {\n\t\t\t\treturn this._followingView;\n\t\t\t}\n\t\t}\n\t\treturn (void 0);\n\t},\n\n\t_onClick: function(ev) {\n\t\tconsole.log(\"%s::_onClick [%s]\", this.cid, ev.type, ev.defaultPrevented ? \"prevented\" : \"not-prevented\");\n\t\tthis._onTap(ev);\n\t},\n\n\t_onTap: function(ev) {\n\t\tif (ev.defaultPrevented) return;\n\n\t\tvar tapCandidate;\n\t\tvar targetView = View.findByDescendant(ev.target);\n\t\t// console.log(\"%s::_onTap %o\", this.cid, targetView.cid, ev.target);\n\t\t// if (!this.itemViews.contains(targetView)) {\n\t\t// \treturn;\n\t\t// }\n\t\tdo {\n\t\t\tif (this._selectedView === targetView) {\n\t\t\t\ttapCandidate = null;\n\t\t\t\tbreak;\n\t\t\t} else if (this === targetView.parentView) {\n\t\t\t\ttapCandidate = targetView;\n\t\t\t\tbreak;\n\t\t\t} else if (this === targetView) {\n\t\t\t\tvar bounds, tapX, tapY;\n\t\t\t\tbounds = this.el.getBoundingClientRect();\n\t\t\t\ttapX = (ev.type === \"tap\" ? ev.center.x : ev.clientX) - bounds.left;\n\t\t\t\ttapY = (ev.type === \"tap\" ? ev.center.y : ev.clientY) - bounds.top;\n\t\t\t\ttapCandidate = this.getViewAtTapPos(\n\t\t\t\t\tthis.dirProp(tapX, tapY),\n\t\t\t\t\tthis.dirProp(tapY, tapX)\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} while ((targetView = targetView.parentView))\n\n\t\tif (tapCandidate) {\n\t\t\tev.preventDefault();\n\t\t\t// ev.stopPropagation();\n\n\t\t\t// this._scrollCandidateView = tapCandidate;\n\t\t\t// this._setScrolling(true);\n\t\t\t// this.scrollBy(0, Carousel.ANIMATED);\n\t\t\t// this._scrollCandidateView.el.classList.add(\"candidate\");\n\t\t\t// this.selectFromView();\n\n\t\t\t//// NOT using internalSelection\n\t\t\t// this.triggerSelectionEvents(tapCandidate, false);\n\n\t\t\t// using internalSelection\n\t\t\tthis._scrollCandidateView = tapCandidate;\n\t\t\tthis._setScrolling(true);\n\t\t\tthis.scrollBy(0, Carousel.ANIMATED);\n\n\t\t\tthis.triggerSelectionEvents(tapCandidate, true);\n\t\t\t// this.renderNow();\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Private\n\t/* --------------------------- */\n\n\ttriggerSelectionEvents: function(view, internal) {\n\t\tif (view === (void 0) || this._internalSelection) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._internalSelection = !!internal;\n\t\tif (view === this.emptyView) {\n\t\t\tthis.trigger(\"view:select:none\");\n\t\t} else {\n\t\t\tthis.trigger(\"view:select:one\", view.model);\n\t\t}\n\t\tthis._internalSelection = false;\n\t},\n\n\tselectFromView: function() {\n\t\tif (this._scrollCandidateView) {\n\t\t\tthis.triggerSelectionEvents(this._scrollCandidateView, true);\n\t\t}\n\t\t// if (this._scrollCandidateView === (void 0)) {\n\t\t// \treturn;\n\t\t// }\n\t\t// var view = this._scrollCandidateView;\n\t\t// this.triggerSelectionEvents(view, true);\n\t},\n\n\tadjustToSelection: function() {\n\t\tvar m, i = this.collection.selectedIndex;\n\t\t// assume -1 < index < this.collection.length\n\t\tif (this.requireSelection) {\n\t\t\t(i == -1) && i++; // if selection is null (index -1), set _selectedView to first item (index 0)\n\t\t\tthis._selectedView = (m = this.collection.at(i)) && this.itemViews.findByModel(m);\n\t\t\tthis._precedingView = (m = this.collection.at(i - 1)) && this.itemViews.findByModel(m);\n\t\t\tthis._followingView = (m = this.collection.at(i + 1)) && this.itemViews.findByModel(m);\n\t\t} else {\n\t\t\tthis._selectedView = (m = this.collection.at(i)) ? this.itemViews.findByModel(m) : this.emptyView;\n\t\t\tthis._precedingView = m && ((m = this.collection.at(i - 1)) ? this.itemViews.findByModel(m) : this.emptyView);\n\t\t\tthis._followingView = (m = this.collection.at(i + 1)) && this.itemViews.findByModel(m);\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Model listeners\n\t/* --------------------------- */\n\n\t/** @private */\n\t_onSelectOne: function(model) {\n\t\tif (model === this._selectedView.model) {\n\t\t\t// console.info(\"INTERNAL\");\n\t\t\treturn;\n\t\t}\n\t\tthis._onSelectAny(model);\n\t},\n\n\t/** @private */\n\t_onSelectNone: function() {\n\t\tif ((this.requireSelection ? this.itemViews.first() : this.emptyView) === this._selectedView) {\n\t\t\t// console.info(\"INTERNAL\");\n\t\t\treturn;\n\t\t}\n\t\tthis._onSelectAny();\n\t},\n\n\t/** @private */\n\t_onSelectAny: function(model) {\n\t\tthis._selectedView.el.classList.remove(\"selected\");\n\t\tthis.adjustToSelection();\n\t\tthis._selectedView.el.classList.add(\"selected\");\n\t\tif (this._scrollCandidateView) {\n\t\t\tthis._scrollCandidateView.el.classList.remove(\"candidate\");\n\t\t\tthis._scrollCandidateView = (void 0);\n\t\t}\n\n\t\tif (!this._internalSelection) {\n\t\t\tthis._setScrolling(true);\n\t\t\tthis.scrollBy(0, Carousel.ANIMATED);\n\t\t}\n\t},\n\n\t// _onDeselectAny: function (model) {},\n\n\t/** @private */\n\t_onReset: function() {\n\t\t// this._createChildren();\n\t\t// this.invalidateChildren();\n\t\tthis.requestRender(View.CHILDREN_INVALID | View.MODEL_INVALID);\n\t},\n\n\n\t/* --------------------------- *\n\t/* TEMP\n\t/* --------------------------- */\n\n\t// _scrollBy2: function (delta, skipTransitions) {\n\t// \tvar metrics, pos;\n\t// \tvar sMetrics = this.metrics[(this._scrollCandidateView || this._selectedView).cid];\n\t// \tvar cMetrics = this.metrics[(this._panCandidateView || this._selectedView).cid];\n\t//\n\t// \tthis.itemViews.each(function (view) {\n\t// \t\tmetrics = this.metrics[view.cid];\n\t// \t\tpos = Math.floor(this._getScrollOffset(delta, metrics, sMetrics, cMetrics));\n\t// \t\tview.el.style[transformProperty] = (this.direction & HORIZONTAL)?\n\t// \t\t\t\t\"translate3d(\" + pos + \"px,0,0)\" : \"translate3d(0,\" + pos + \"px,0)\";\n\t// \t\t\t\t// \"translate(\" + pos + \"px,0)\" : \"translate(0,\" + pos + \"px)\";\n\t// \t\t\t\t// \"translateX(\" + pos + \"px)\" : \"translateY(\" + pos + \"px)\";\n\t// \t}, this);\n\t// \tthis.el.classList.toggle(\"skip-transitions\", skipTransitions);\n\t// \tthis.selectFromView();\n\t// },\n\n\t// _getScrollOffset2: function (delta, mCurr, mSel, mCan) {\n\t// \tvar offset = 0;\n\t// \tvar posInner = mCurr.posInner - mSel.posInner + delta;\n\t//\n\t// \tif (posInner < -mSel.inner) {\n\t// \t\toffset = -(mCurr.before);\n\t// \t} else if (posInner > mSel.inner) {\n\t// \t\toffset = (mSel.after);\n\t// \t} else {\n\t// \t\tif (posInner < 0) {\n\t// \t\t\toffset = (mCurr.before) / (mCurr.inner) * posInner;\n\t// \t\t} else {\n\t// \t\t\toffset = (mSel.after) / (mCan.inner) * posInner;\n\t// \t\t}\n\t// \t}\n\t// \treturn posInner + offset;\n\t// },\n\n\t// captureSelectedOffset: function() {\n\t// \tvar val, view, cssval, m, mm;\n\t//\n\t// \tval = 0;\n\t// \tview = this._scrollCandidateView || this._selectedView;\n\t// \tcssval = getComputedStyle(view.el)[transformProperty];\n\t//\n\t// \tmm = cssval.match(/(matrix|matrix3d)\\(([^\\)]+)\\)/);\n\t// \tif (mm) {\n\t// \t\tm = mm[2].split(\",\");\n\t// \t\tif (this.direction & HORIZONTAL) {\n\t// \t\t\tval = m[mm[1]==\"matrix\"? 4 : 12];\n\t// \t\t} else {\n\t// \t\t\tval = m[mm[1]==\"matrix\"? 5 : 13];\n\t// \t\t}\n\t// \t\tval = parseFloat(val);\n\t// \t}\n\t//\n\t// \tconsole.log(\"%s::captureSelectedOffset\", this.cid, cssval, val, cssval.match(/matrix\\((?:\\d\\,){3}(\\d)\\,(\\d)|matrix3d\\((?:\\d\\,){11}(\\d)\\,(\\d)/));\n\t//\n\t// \treturn val;\n\t// },\n\n\t// _onScrollEnd: function(exec) {\n\t// \tthis._scrollEndCancellable = (void 0);\n\t// \t// this.el.classList.remove(\"disabled-changing\");\n\t// \tif (exec) {\n\t// \t\tthis._setScrolling(false);\n\t// \t\t// this.el.classList.remove(\"scrolling\");\n\t// \t\t// this.trigger(\"view:scrollend\");\n\t// \t\tconsole.log(\"%s::_onScrollEnd\", this.cid);\n\t// \t}\n\t// },\n\t// _onMouseDown: function(ev) {\n\t// \tif (this._scrolling) {\n\t// \t\tthis._panCapturedOffset = this.captureSelectedOffset();\n\t// \t\tconsole.log(\"%s::events[mousedown] scrolling interrupted (pos %f)\", this.cid, this._panCapturedOffset);\n\t// \t}\n\t// },\n\t// _onMouseUp:function(ev) {\n\t// \tthis._panCapturedOffset = 0;\n\t// },\n\n};\n\nif (DEBUG) {\n\tCarouselProto._logFlags = \"\";\n}\n\nmodule.exports = Carousel = View.extend(CarouselProto, Carousel);\n",
    "\"use strict\";\n// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return container.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)));\n},\"useData\":true});\n",
    "/**\n * @module app/view/component/CollectionStack\n */\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n\n/** @type {string} */\nconst viewTemplate = require(\"./CollectionStack.hbs\");\n\n/**\n * @constructor\n * @type {module:app/component/CollectionStack}\n */\nmodule.exports = View.extend({\n\n\t/** @override */\n\tcidPrefix: \"stack\",\n\t/** @override */\n\ttagName: \"div\",\n\t/** @override */\n\tclassName: \"stack\",\n\t/** @override */\n\ttemplate: viewTemplate,\n\n\tevents: {\n\t\t\"transitionend\": function(ev) {\n\t\t\t// console.log(\"%s::transitionend [invalid: %s] [transition: %s]\", this.cid, this._contentInvalid, (this._skipTransitions? \"skip\": \"run\"), ev.target.id, ev.target.className);\n\t\t\tthis._renderContent();\n\t\t}\n\t},\n\n\tinitialize: function(options) {\n\t\tthis._enabled = true;\n\t\tthis._skipTransitions = true;\n\t\tthis._contentInvalid = true;\n\n\t\toptions.template && (this.template = options.template);\n\t\tthis.content = document.createElement(\"div\");\n\t\tthis.content.className = \"stack-item\";\n\t\tthis.el.appendChild(this.content);\n\n\t\tthis.listenTo(this.collection, \"select:one select:none\", this._onSelectChange);\n\t},\n\n\tsetEnabled: function(enabled) {\n\t\tif (this._enabled !== enabled) {\n\t\t\tthis._enabled = enabled;\n\t\t\tthis.el.classList.toggle(\"disabled\", !this._enabled);\n\t\t}\n\t},\n\n\t_onSelectChange: function(item) {\n\t\tif (this._renderedItem === this.collection.selected) {\n\t\t\tthrow new Error(\"change event received but item is identical\");\n\t\t}\n\t\tthis._renderedItem = this.collection.selected;\n\n\t\tthis._contentInvalid = true;\n\t\tthis.render();\n\t},\n\n\t/* --------------------------- *\n\t/* render\n\t/* --------------------------- */\n\n\trender: function() {\n\t\tif (this._skipTransitions) {\n\t\t\t// execute even if content has not changed to apply styles immediately\n\t\t\tthis._skipTransitions = false;\n\t\t\tthis.el.classList.add(\"skip-transitions\");\n\t\t\tthis.setImmediate(function() {\n\t\t\t\tthis.el.classList.remove(\"skip-transitions\");\n\t\t\t});\n\n\t\t\t// render changed content immediately\n\t\t\tif (this._contentInvalid) {\n\t\t\t\tthis._renderContent();\n\t\t\t}\n\t\t} else {\n\t\t\t// else remove 'current' class and render on transitionend\n\t\t\tif (this._contentInvalid) {\n\t\t\t\tthis.content.classList.remove(\"current\");\n\t\t\t\t// this.content.className = \"stack-item\";\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\n\t_renderContent: function() {\n\t\tif (this._contentInvalid) {\n\t\t\tthis._contentInvalid = false;\n\t\t\tvar item = this.collection.selected;\n\t\t\tthis.content.innerHTML = item ? this.template(item.toJSON()) : \"\";\n\t\t\tthis.content.classList.add(\"current\");\n\t\t\t// this.content.className = \"stack-item current\";\n\t\t}\n\t},\n});\n",
    "/**\n/* @module app/view/component/FilterableListView\n/*/\n\n/** @type {module:backbone.babysitter} */\nconst Container = require(\"backbone.babysitter\");\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {module:app/view/component/ClickableRenderer} */\nconst ClickableRenderer = require(\"app/view/render/ClickableRenderer\");\n/** @type {module:utils/prefixedProperty} */\nconst prefixedProperty = require(\"utils/prefixedProperty\");\n/** @type {module:utils/css/getBoxEdgeStyles} */\nconst getBoxEdgeStyles = require(\"utils/css/getBoxEdgeStyles\");\n/** @type {module:utils/array/difference} */\nconst diff = require(\"utils/array/difference\");\n/** @type {module:utils/promise/resolveAll} */\nconst resolveAll = require(\"utils/promise/resolveAll\");\n/** @type {module:utils/promise/rejectAll} */\nconst rejectAll = require(\"utils/promise/rejectAll\");\n\n// var resolveAll = function(pp, result) {\n// \tif (pp.length != 0) {\n// \t\tpp.forEach(function(p, i, a) {\n// \t\t\tp.resolve(result);\n// \t\t\ta[i] = null;\n// \t\t});\n// \t\tpp.length = 0;\n// \t}\n// \treturn pp;\n// };\n\n// var rejectAll = function(pp, reason) {\n// \tif (pp.length != 0) {\n// \t\tpp.forEach(function(p, i, a) {\n// \t\t\tp.reject(reason);\n// \t\t\ta[i] = null;\n// \t\t});\n// \t\tpp.length = 0;\n// \t}\n// \treturn pp;\n// };\n\n/** @type {module:app/control/Globals.TRANSLATE_TEMPLATE} */\nconst translateCssValue = require(\"app/control/Globals\").TRANSLATE_TEMPLATE;\n\n/** @const */\nvar transformProp = prefixedProperty(\"transform\");\n\n/**\n/* @constructor\n/* @type {module:app/view/component/FilterableListView}\n/*/\nvar FilterableListView = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"filterableList\",\n\t/** @override */\n\ttagName: \"ul\",\n\t/** @override */\n\tclassName: \"list selectable filterable\",\n\n\t/** @override */\n\tdefaults: {\n\t\tcollapsed: true,\n\t\tfilterFn: function() {\n\t\t\treturn true;\n\t\t},\n\t\trenderer: ClickableRenderer.extend({\n\t\t\t/** @override */\n\t\t\tcidPrefix: \"listItem\",\n\t\t\t/** @override */\n\t\t\tclassName: \"list-item list-node\",\n\t\t}),\n\t},\n\n\t/** @override */\n\tproperties: {\n\t\tcollapsed: {\n\t\t\tget: function() {\n\t\t\t\treturn this._collapsed;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tthis._setCollapsed(value);\n\t\t\t}\n\t\t},\n\t\tselectedItem: {\n\t\t\tget: function() {\n\t\t\t\treturn this._selectedItem;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tthis._setSelection(value);\n\t\t\t}\n\t\t},\n\t\tfilteredItems: {\n\t\t\tget: function() {\n\t\t\t\treturn this._filteredItems;\n\t\t\t}\n\t\t},\n\t\tmetrics: {\n\t\t\tget: function() {\n\t\t\t\treturn this._metrics;\n\t\t\t}\n\t\t}\n\t},\n\n\t/** @override */\n\tevents: {\n\t\t\"transitionend .list-node\": function(ev) {\n\t\t\t// if (!ev.target.classList.contains(\"list-node\")) {}\n\t\t\tif (ev.propertyName == transformProp\n\t\t\t\t&& ev.target.parentElement === this.el) {\n\t\t\t\tthis._changedPosNum--;\n\t\t\t\t// console.log(\"%s:[%s (%s)] [%s]\", this.cid, ev.type, ev.target.className, ev.propertyName, this._changedPosNum, ev);\n\t\t\t}\n\t\t\tif (!this._collapsedChanging) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._changedPosNum == 0) {\n\t\t\t\t// if ((ev.propertyName == transformProp) ||\n\t\t\t\t// \t(ev.propertyName == \"visibility\")) {\n\t\t\t\tconsole.log(\"%s:[%s .list-item] [%s] collapsed-changing end (resolving %s promises)\", this.cid, ev.type, ev.propertyName, this._collapsePromises.length);\n\t\t\t\tthis._collapsedChanging = false;\n\t\t\t\tthis.el.classList.remove(\"collapsed-changing\");\n\t\t\t\tresolveAll(this._collapsePromises, this);\n\t\t\t}\n\t\t},\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tthis._filteredItems = [];\n\t\tthis._filteredIncoming = [];\n\t\tthis._filteredOutgoing = [];\n\n\t\tthis._metrics = {};\n\t\tthis._itemMetrics = [];\n\t\tthis._collapsePromises = [];\n\t\tthis.itemViews = new Container();\n\n\t\t_.defaults(options, this.defaults);\n\t\tthis.renderer = options.renderer;\n\t\tthis._filterFn = options.filterFn;\n\n\t\t// this.computeFilter();\n\t\t// this.collection.each(this.createItemView, this);\n\n\t\tthis.collection.each(this.createItemView, this);\n\t\tthis._setSelection(this.collection.selected);\n\t\tthis._setCollapsed(options.collapsed);\n\t\tthis.refreshFilter();\n\t\t// this.skipTransitions = true;\n\t\t// this.renderNow();\n\n\t\t// this.listenTo(this.collection, \"select:one select:none\", this._setSelection);\n\t\tthis.listenTo(this.collection, \"reset\", function() {\n\t\t\tthis._allItems = null;\n\t\t\tthrow new Error(\"not implemented\");\n\t\t});\n\n\t\t// will trigger on return if this.el is already attached\n\t\t// this.skipTransitions = true;\n\t\t// this.el.classList.add(\"skip-transitions\");\n\t\t// this.requestRender(View.ALL_INVALID);\n\n\t\tconsole.log(\"%s::initialize attached: %o\", this.cid, this.attached);\n\n\t\tthis.once(\"view:attached\", function(view) {\n\t\t\tconsole.log(\"%s::initialize -> [view:attached] attached: %o\", view.cid, view.attached);\n\t\t\t// view.requestRender(View.ALL_INVALID).renderNow();\n\t\t\tview.skipTransitions = true;\n\t\t\tview.el.classList.add(\"skip-transitions\");\n\t\t\tview.setImmediate(function() {\n\t\t\t\t// this.skipTransitions = true;\n\t\t\t\tview.renderNow();\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Get an array with a collection contens\n\t * @private\n\t */\n\t_getAllItems: function() {\n\t\treturn this._allItems || (this._allItems = this.collection.slice());\n\t},\n\n\t/* --------------------------- *\n\t/* Transition promises\n\t/* --------------------------- */\n\n\t_whenCollapseChangeEnds: function() {\n\t\tif (this._collapsedChanged) {\n\t\t\tvar view = this;\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\tview.on(\"view:render:after\", resolve);\n\t\t\t})\n\t\t} else {\n\t\t\treturn Promise.resolve(this);\n\t\t}\n\t},\n\n\twhenCollapseChangeEnds: function() {\n\t\tvar d, p, pp;\n\t\tif (this._collapsedChanging || this._collapsedChanged) {\n\t\t\td = {};\n\t\t\tp = new Promise(function(resolve, reject) {\n\t\t\t\td.resolve = resolve;\n\t\t\t\td.reject = reject;\n\t\t\t});\n\t\t\tpp = this._collapsePromises;\n\t\t\tpp.push(d);\n\t\t} else {\n\t\t\tp = Promise.resolve(this);\n\t\t}\n\t\treturn p;\n\t},\n\n\t/* --------------------------- *\n\t/* Render\n\t/* --------------------------- */\n\n\t/** @override */\n\trenderFrame: function(tstamp, flags) {\n\t\t// if (DEBUG) {\n\t\t// \tvar changed = [];\n\t\t// \tthis._collapsedChanged && changed.push(\"collapsed\");\n\t\t// \tthis._selectionChanged && changed.push(\"selection\");\n\t\t// \tthis._filterChanged && changed.push(\"filter\");\n\t\t// \tconsole.log(\"%s::renderFrame [%s]\", this.cid, changed.join(\" \"));\n\t\t// }\n\n\t\t// collapsed transition flag\n\t\tif (this._collapsedChanging) {\n\t\t\tconsole.warn(\"%s::renderFrame collapsed tx interrupted\", this.cid);\n\t\t\tthis._collapsedChanging = false;\n\t\t\tthis.el.classList.remove(\"collapsed-changing\");\n\t\t\trejectAll(this._collapsePromises, this);\n\t\t}\n\t\tif (this.skipTransitions) {\n\t\t\tthis.el.classList.add(\"skip-transitions\");\n\t\t\t// this.requestAnimationFrame(function() {\n\t\t\tthis.setImmediate(function() {\n\t\t\t\tthis.skipTransitions = false;\n\t\t\t\tthis.el.classList.remove(\"skip-transitions\");\n\t\t\t});\n\t\t}\n\n\t\tif (this._collapsedChanged) {\n\t\t\tthis._collapsedChanged = false;\n\t\t\tflags |= View.SIZE_INVALID;\n\t\t\tthis.el.classList.toggle(\"collapsed\", this._collapsed);\n\n\t\t\tif (this.skipTransitions) {\n\t\t\t\tthis._collapsedChanging = false;\n\t\t\t\t// resolveAll(this._collapsePromises, this.el);\n\t\t\t\tthis.once(\"view:render:after\", function(view) {\n\t\t\t\t\tthis._changedPosNum = 0;\n\t\t\t\t\tresolveAll(view._collapsePromises, view);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis._collapsedChanging = true;\n\t\t\t\tthis.el.classList.add(\"collapsed-changing\");\n\t\t\t\t// this will be resolved on transitionend\n\t\t\t}\n\t\t\tconsole.log(\"%s:[collapse changed] %s promises\", this.cid,\n\t\t\t\tthis._collapsePromises.length,\n\t\t\t\tthis._collapsedChanging ? \"resolving now\" : \"resolving on transitionend\"\n\t\t\t);\n\t\t}\n\n\t\tif (this._selectionChanged) {\n\t\t\tthis._selectionChanged = false;\n\t\t\tflags |= View.LAYOUT_INVALID;\n\t\t\tthis.renderSelection(this.collection.selected, this.collection.lastSelected);\n\t\t}\n\n\t\tif (this._filterChanged) {\n\t\t\tthis._filterChanged = false;\n\t\t\tflags |= View.LAYOUT_INVALID;\n\t\t\tvar lastFilteredItems = this.filteredItems;\n\t\t\t// this._printStats(lastFilteredItems);\n\t\t\tthis.computeFilter();\n\t\t\tthis.applyFilter();\n\t\t\tif (DEBUG) {\n\t\t\t\tthis._printStats(lastFilteredItems);\n\t\t\t}\n\t\t}\n\n\t\tif (flags & View.SIZE_INVALID) {\n\t\t\tthis.measure(); // NOTE: measures children\n\t\t}\n\n\t\tif (flags & (View.LAYOUT_INVALID | View.SIZE_INVALID)) {\n\t\t\tthis.renderLayout();\n\t\t}\n\t},\n\n\tmeasure: function() {\n\t\t// var i, ii, el, els, m, mm;\n\t\t// els = this.el.children;\n\t\t// ii = els.length;\n\t\t// mm = this._itemMetrics;\n\t\t// for (i = 0; i < ii; i++) {\n\t\t// \tmm[i] = _.pick(els[i], \"offsetTop\", \"offsetHeight\");\n\t\t// }\n\n\t\tthis._metrics = getBoxEdgeStyles(this.el, this._metrics);\n\n\t\t// var itemEl, itemView, baseline = 0;\n\t\t// if (itemEl = this.el.querySelector(\".list-item:not(.excluded) .label\")) {\n\t\t// \t// itemView = this.itemViews.findByCid(itemEl.cid);\n\t\t// \tvar elA = itemEl, elB = itemEl.parentElement;\n\t\t// \tvar yA = elA.offsetTop,\n\t\t// \t\thA = elA.offsetHeight,\n\t\t// \t\tyB = elB.offsetTop,\n\t\t// \t\thB = elB.offsetHeight;\n\t\t// \tbaseline = ((yA + hA) - (yB + hB));\n\t\t// \tconsole.log(\"%s::measure fontSize: %spx (%s+%s)-(%s+%s)=%s\", this.cid, this._metrics.fontSize,\n\t\t// \t\tyA, hA, yB, hB, baseline\n\t\t// \t);\n\t\t// }\n\n\t\tthis.itemViews.forEach(function(view) {\n\t\t\tif (!view._metrics) view._metrics = {};\n\t\t\t// view._metrics.baseline = this._metrics.fontSize - baseline;\n\t\t\tview._metrics.offsetTop = view.el.offsetTop;\n\t\t\tview._metrics.offsetHeight = view.el.offsetHeight;\n\t\t\tview._metrics.offsetLeft = view.el.offsetLeft;\n\t\t\tview._metrics.offsetWidth = view.el.offsetWidth;\n\t\t\tif (!this._collapsed && view.label) {\n\t\t\t\tview._metrics.textLeft = view.label.offsetLeft;\n\t\t\t\tview._metrics.textWidth = view.label.offsetWidth;\n\t\t\t} else {\n\t\t\t\tview._metrics.textLeft = view._metrics.offsetLeft;\n\t\t\t\tview._metrics.textWidth = view._metrics.offsetWidth;\n\t\t\t}\n\t\t}, this);\n\n\t\t// this._metrics.baseline = this._metrics.fontSize - baseline;\n\t},\n\n\trenderLayout: function() {\n\t\tvar posX, posY, lastX, lastY;\n\t\tposX = this._metrics.paddingLeft;\n\t\tposY = this._metrics.paddingTop;\n\n\t\tthis._changedPosNum = 0;\n\t\t// use HTMLElement.children to keep layout order\n\t\tfor (var i = 0, ii = this.el.children.length; i < ii; i++) {\n\t\t\tvar view = this.itemViews.findByCid(this.el.children[i].cid);\n\t\t\tlastX = view.transform.tx;\n\t\t\tlastY = view.transform.ty;\n\t\t\tif (((this.collection.selected && !view.model.selected) ||\n\t\t\t\t\tview.el.classList.contains(\"excluded\")) && this._collapsed) {\n\t\t\t\tview.transform.tx = posX;\n\t\t\t\tview.transform.ty = posY;\n\t\t\t} else {\n\t\t\t\tif (view._metrics.offsetHeight == 0) {\n\t\t\t\t\tposY -= view._metrics.offsetTop;\n\t\t\t\t}\n\t\t\t\tview.transform.tx = posX;\n\t\t\t\tview.transform.ty = posY;\n\t\t\t\tposY += view._metrics.offsetHeight + view._metrics.offsetTop;\n\t\t\t}\n\t\t\tview.el.style[transformProp] = translateCssValue(view.transform.tx, view.transform.ty);\n\t\t\tif (view.transform.tx != lastX || view.transform.ty != lastY) {\n\t\t\t\tthis._changedPosNum++;\n\t\t\t}\n\t\t}\n\n\t\t// posY += this._metrics.paddingBottom;\n\t\tthis._metrics.height = Math.max(0, posY + this._metrics.paddingBottom);\n\t\tthis.el.style.height = this._metrics.height + \"px\";\n\t\t// this.el.style.height = (posY > 0) ? posY + \"px\" : \"\";\n\t},\n\n\t/* --------------------------- *\n\t/* Child views\n\t/* --------------------------- */\n\n\t/** @private */\n\tcreateItemView: function(item, index) {\n\t\tvar view = new this.renderer({\n\t\t\tmodel: item,\n\t\t\tel: this.el.querySelector(\".list-item[data-id=\\\"\" + item.id + \"\\\"]\")\n\t\t});\n\t\t// item.set(\"excluded\", false, { silent: true });\n\t\t// view.listenTo(item, \"change:excluded\", function(item, newVal) {\n\t\t// \t// console.log(arguments);\n\t\t// \tif (this.el.classList.contains(\"excluded\") !== newVal) {\n\t\t// \t\tconsole.warn(\"%s:[change:excluded] m:%o css: %o\", this.cid, newVal, this.el.classList.contains(\"excluded\"));\n\t\t// \t}\n\t\t// \t// this.el.classList.toggle(\"excluded\", excluded);\n\t\t// });\n\t\tthis.listenTo(view, \"renderer:click\", this._onRendererClick);\n\t\tthis.itemViews.add(view);\n\t\treturn view;\n\t},\n\n\t/** @private */\n\t_onRendererClick: function(item, ev) {\n\t\tif (this._collapsedChanging\n\t\t\t|| (this._collapsed && item.get(\"excluded\"))) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.collection.selected !== item) {\n\t\t\tthis.trigger(\"view:select:one\", item);\n\t\t} else {\n\t\t\tif (ev.altKey) {\n\t\t\t\tthis.trigger(\"view:select:none\");\n\t\t\t} else {\n\t\t\t\tthis.trigger(\"view:select:same\", item);\n\t\t\t}\n\t\t\t// this.trigger(\"view:select:none\");\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Collapsed\n\t/* --------------------------- */\n\n\t/** @private */\n\t_collapsed: undefined,\n\n\t/**\n\t * @param {Boolean}\n\t */\n\t_setCollapsed: function(collapsed) {\n\t\tif (collapsed !== this._collapsed) {\n\t\t\tthis._collapsed = collapsed;\n\t\t\tthis._collapsedChanged = true;\n\t\t\tthis.requestRender();\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Selection\n\t/* --------------------------- */\n\n\t/** @private */\n\t_selectedItem: undefined,\n\n\t/** @param {Backbone.Model|null} */\n\t_setSelection: function(item) {\n\t\tif (item !== this._selectedItem) {\n\t\t\tthis._selectedItem = item;\n\t\t\tthis._selectionChanged = true;\n\t\t\tthis.requestRender(View.MODEL_INVALID);\n\t\t}\n\t},\n\n\t/** @private */\n\trenderSelection: function(newItem, oldItem) {\n\t\tvar view;\n\t\tif (oldItem) {\n\t\t\tview = this.itemViews.findByModel(oldItem);\n\t\t\tview.el.classList.remove(\"selected\");\n\t\t\t// view.label.classList.remove(\"color-fg\");\n\t\t\t// view.label.classList.remove(\"color-reverse\");\n\t\t}\n\t\tif (newItem) {\n\t\t\tview = this.itemViews.findByModel(newItem);\n\t\t\tview.el.classList.add(\"selected\");\n\t\t\t// view.label.classList.add(\"color-fg\");\n\t\t\t// view.label.classList.add(\"color-reverse\");\n\t\t}\n\t\tthis.el.classList.toggle(\"has-selected\", this.selectedItem !== null);\n\t},\n\n\t/* --------------------------- *\n\t/* Filter\n\t/* --------------------------- */\n\n\trefreshFilter: function() {\n\t\tif (this._filterFn) {\n\t\t\tthis._filterChanged = true;\n\t\t\tthis.requestRender(View.MODEL_INVALID);\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Filter impl 2\n\t/* --------------------------- */\n\n\tcomputeFilter: function() {\n\t\tvar newItems, oldItems;\n\t\tvar hasNew, hasOld;\n\t\tthis._filteredIncoming.length = 0;\n\t\tthis._filteredOutgoing.length = 0;\n\n\t\tnewItems = this._filterFn ? this.collection.filter(this._filterFn, this) : this._getAllItems();\n\t\toldItems = this._filteredItems;\n\t\thasNew = !!(newItems && newItems.length);\n\t\thasOld = !!(oldItems && oldItems.length);\n\t\t// NOTE: diff third arg is destination array\n\t\tif (hasNew) {\n\t\t\t// incoming exclusions\n\t\t\tdiff((hasOld ? oldItems : this._getAllItems()), newItems, this._filteredIncoming);\n\t\t\t// this._filteredIncoming.forEach(function(item) {\n\t\t\t// \titem.set(\"excluded\", true);\n\t\t\t// });\n\t\t}\n\t\tif (hasOld) {\n\t\t\t// outgoing exclusions\n\t\t\tdiff((hasNew ? newItems : this._getAllItems()), oldItems, this._filteredOutgoing);\n\t\t\t// this._filteredOutgoing.forEach(function(item) {\n\t\t\t// \titem.set(\"excluded\", false);\n\t\t\t// });\n\t\t}\n\t\t// console.log(\"%s::renderFilterFn\", this.cid, newItems);\n\t\tthis._filteredItems = newItems;\n\t},\n\n\tapplyFilter: function() {\n\t\t// this.itemViews.forEach(function(view) {\n\t\t// \tview.el.classList.toggle(\"excluded\", view.model.get(\"excluded\"));\n\t\t// });\n\t\tthis._filteredIncoming.forEach(function(item) {\n\t\t\tthis.itemViews.findByModel(item).el.classList.add(\"excluded\");\n\t\t\titem.set(\"excluded\", true);\n\t\t}, this);\n\t\tthis._filteredOutgoing.forEach(function(item) {\n\t\t\tthis.itemViews.findByModel(item).el.classList.remove(\"excluded\");\n\t\t\titem.set(\"excluded\", false);\n\t\t}, this);\n\n\t\tthis.el.classList.toggle(\"has-excluded\", this.filteredItems.length > 0);\n\t},\n\n\t/* --------------------------- *\n\t/* Filter impl 1\n\t/* --------------------------- */\n\n\t/*\n\tcomputeFilter_1: function() {\n\t\tvar items = this._filterFn ? this.collection.filter(this._filterFn, this) : this._getAllItems();\n\t\tthis.renderFilters(items, this._filteredItems);\n\t\tthis._filteredItems = items;\n\t},\n\n\trenderFilters: function(newItems, oldItems) {\n\t\tvar hasNew = !!(newItems && newItems.length);\n\t\tvar hasOld = !!(oldItems && oldItems.length);\n\t\tvar inExcl = [];\n\t\tvar outExcl = [];\n\n\t\t// console.log(\"%s::renderFilterFn\", this.cid, newItems);\n\t\t// NOTE: diff third arg is destination array\n\t\tif (hasNew) {\n\t\t\tdiff((hasOld ? oldItems : this._getAllItems()), newItems, inExcl)\n\t\t\t// .forEach(function(item) {\n\t\t\t// \tthis.itemViews.findByModel(item).el.classList.add(\"excluded\");\n\t\t\t// \titem.set(\"excluded\", true);\n\t\t\t// }, this);\n\t\t}\n\t\tif (hasOld) {\n\t\t\tdiff((hasNew ? newItems : this._getAllItems()), oldItems, outExcl)\n\t\t\t// .forEach(function(item) {\n\t\t\t// \tthis.itemViews.findByModel(item).el.classList.remove(\"excluded\");\n\t\t\t// \titem.set(\"excluded\", false);\n\t\t\t// }, this);\n\t\t}\n\t\tthis._filteredIncoming = inExcl;\n\t\tthis._filteredOutgoing = outExcl;\n\t\t// this.el.classList.toggle(\"has-excluded\", hasNew);\n\t\t// this.applyFilter();\n\t},\n\t*/\n\n\t// computeFiltered: function() {\n\t// \tthis._filterResult = this.collection.map(this._filterFn, this);\n\t// },\n\t//\n\t// renderFiltered: function() {\n\t// \tthis.collection.forEach(function(item, index) {\n\t// \t\tthis.itemViews.findByModel(item).el.classList.toggle(\"excluded\", !this._filterResult[index]);\n\t// \t}, this);\n\t// },\n\n});\n\nif (DEBUG) {\n\tFilterableListView.prototype._logFlags = [\n\t\t\"view.render\",\n\t\t// \"view.trace\"\n\t].join(\" \");\n\n\tFilterableListView.prototype._printStats = function(lastFilteredItems) {\n\t\tif (this._logFlags[\"view.trace\"]) console.log(\"%s::renderFrame %s filtered:%o(=%o)/%o (changed:%o, in:%o, out:%o)\", this.cid,\n\t\t\tthis.filteredItems.length > 0 ? \"has\" : \"has not\",\n\t\t\tthis.filteredItems.length,\n\t\t\tlastFilteredItems ? (this.filteredItems.length + this._filteredIncoming.length) - this._filteredOutgoing.length : this.filteredItems.length,\n\t\t\tthis.collection.length,\n\t\t\t(this._filteredIncoming.length + this._filteredOutgoing.length),\n\t\t\tthis._filteredIncoming.length,\n\t\t\tthis._filteredOutgoing.length);\n\t};\n}\n\nmodule.exports = FilterableListView;\n",
    "/**\n * @module app/view/component/GraphView\n */\n\n/** @type {Function} */\nconst Color = require(\"color\");\n\n/** @type {module:app/view/base/CanvasView} */\nconst CanvasView = require(\"app/view/base/CanvasView\");\n\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n\n/** @type {module:utils/canvas/calcArcHConnector} */\nconst calcArcHConnector = require(\"utils/canvas/calcArcHConnector\");\n\n/** @type {module:utils/canvas/CanvasHelper} */\nconst CanvasHelper = require(\"utils/canvas/CanvasHelper\");\n\n/** @type {module:utils/geom/inflateRect} */\nconst inflateRect = require(\"utils/geom/inflateRect\");\n\n// /** @type {module:utils/dom/getAbsoluteClientRect} */\n// var getAbsoluteClientRect = require(\"utils/dom/getAbsoluteClientRect\");\n\n\n// var BEZIER_CIRCLE = 0.551915024494;\n// var MIN_CANVAS_RATIO = 2;\n// var PI2 = Math.PI * 2;\n\nvar styleBase = {\n\tlineCap: \"butt\", // round, butt, square\n\tlineWidth: 0.75,\n\tlineDashOffset: 0,\n\tsetLineDash: [[]],\n\t// radiusBase: 2,\n\t// /* factored to rem unit */ //6,\n\t// radiusIncrement: 0.21, //3, //0.25,\n\t// /* uses lineWidth multiplier */\n\t// outlineWidth: 3,\n\t// /* uses lineWidth multiplier */\n\t// arrowSize: 0.3,\n};\nvar paramsBase = {\n\tradiusBase: 1.25,\n\t/* factored to rem unit */ //6,\n\tradiusIncrement: 0.21, //3, //0.25,\n\t/* uses lineWidth multiplier */\n\toutlineWidth: 3,\n\t/* factored to rem unit */\n\tarrowSize: 0.4, //0.3,\n};\n\n// var overlayStyleBase = {\n// \tglobalAlpha: 0.75,\n// \tglobalCompositeOperation: \"destination-out\",\n// \tlineWidth: 4,\n// \tlineJoin: \"round\",\n// \ttextBaseline: \"top\",\n// \ttextAlign: \"left\",\n// };\n\nif (DEBUG) {\n\t/* eslint-disable no-unused-vars */\n\tvar _dStyles = {\n\t\tdefaults: {\n\t\t\tglobalAlpha: 0.66,\n\t\t\tlineWidth: 0,\n\t\t\tfillStyle: \"transparent\",\n\t\t\tstrokeStyle: \"transparent\",\n\t\t\tlineDashOffset: 0,\n\t\t\tsetLineDash: [[]]\n\t\t}\n\t};\n\n\t/* Stroke */\n\t[\n\t\t\"red\", \"salmon\", \"sienna\",\n\t\t\"green\", \"yellowgreen\", \"olive\",\n\t\t\"blue\", \"lightskyblue\", \"midnightblue\",\n\t\t\"grey\", \"silver\"\n\t]\n\t.forEach(function(colorName) {\n\t\tvar rgbaValue = Color(colorName).alpha(0.75).string();\n\n\t\t_dStyles[colorName] = _.defaults({\n\t\t\tlineWidth: 0.75,\n\t\t\tstrokeStyle: rgbaValue,\n\t\t}, _dStyles[\"defaults\"]);\n\n\t\t_dStyles[colorName + \"_dashed\"] = _.defaults({\n\t\t\tsetLineDash: [[4, 2]],\n\t\t\tstrokeStyle: rgbaValue,\n\t\t}, _dStyles[\"defaults\"]);\n\n\t\t_dStyles[colorName + \"_thick\"] = _.defaults({\n\t\t\tlineWidth: 5,\n\t\t\tstrokeStyle: rgbaValue,\n\t\t}, _dStyles[\"defaults\"]);\n\n\t\t_dStyles[colorName + \"_fill\"] = _.defaults({\n\t\t\tfillStyle: rgbaValue\n\t\t}, _dStyles[\"defaults\"]);\n\t})\n\t/* eslint-enable no-unused-vars */\n}\n\nvar getRectDirX = function(r1, r2) {\n\tif (r1.right < r2.left) {\n\t\treturn 1;\n\t}\n\tif (r2.right < r1.left) {\n\t\treturn -1;\n\t}\n\treturn 0;\n};\n\n/**\n * @constructor\n * @type {module:app/view/component/GraphView}\n */\nvar GraphView = CanvasView.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"graph\",\n\t/** @override */\n\ttagName: \"canvas\",\n\t/** @override */\n\tclassName: \"graph\",\n\n\tdefaultKey: \"a2b\",\n\n\tdefaults: {\n\t\tvalues: {\n\t\t\ta2b: 0,\n\t\t\tb2a: 0,\n\t\t},\n\t\tmaxValues: {\n\t\t\ta2b: 1,\n\t\t\tb2a: 1,\n\t\t},\n\t\t// useOpaque: true,\n\t\t// labelFn: function(value, max) {\n\t\t// \treturn ((value / max) * 100) | 0;\n\t\t// },\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tCanvasView.prototype.initialize.apply(this, arguments);\n\n\t\tthis._listA = options.listA;\n\t\tthis._listB = options.listB;\n\t\tthis._a2b = {\n\t\t\tsrcView: options.listA,\n\t\t\tdestView: options.listB,\n\t\t\ts: _.defaults({\n\t\t\t\tlineWidth: 0.7, //1.25\n\t\t\t\t// radiusIncrement: 0.25,\n\t\t\t}, styleBase, paramsBase),\n\t\t\tp: _.defaults({}, paramsBase),\n\t\t\tstrokeStyleFn: (fg, bg, ln) => Color(ln).mix(bg, 0.1).hex()\n\t\t};\n\t\tthis._b2a = {\n\t\t\tsrcView: options.listB,\n\t\t\tdestView: options.listA,\n\t\t\ts: _.defaults({\n\t\t\t\tlineWidth: 0.7,\n\t\t\t\t// arrowSize: 0.25,\n\t\t\t\t// radiusIncrement: 0,\n\t\t\t\t// outlineWidth: 0,\n\t\t\t}, styleBase, paramsBase),\n\t\t\tp: _.defaults({}, paramsBase),\n\t\t\tstrokeStyleFn: (fg, bg, ln) => Color(fg).mix(bg, 0.4).hex()\n\t\t};\n\n\t\t// this.listenTo(this._a2b.srcView.collection, \"view:select:one view:select:none\", function(item) {\n\t\t// \tthis._a2b.connectorsOut = this._a2b.connectors;\n\t\t// \tthis._a2b.connectors = null;\n\t\t// });\n\t\t//\n\t\t// this.listenTo(this._b2a.srcView.collection, \"view:select:one view:select:none\", function(item) {\n\t\t// \tthis._b2a.connectorsOut = this._b2a.connectors;\n\t\t// \tthis._b2a.connectors = null;\n\t\t// });\n\n\t\t// this.listenTo(this, \"view:render:before\", this._beforeViewRender);\n\n\t\t// this._traceScroll = _.debounce(this.__raceScroll, 100, false);\n\n\t\t// var viewportChanged = function(ev) {\n\t\t// \tconsole.log(\"%s:[%s]\", this.cid, ev.type);\n\t\t//\n\t\t// \t// this._traceScroll(ev.type);\n\t\t// \t// this._labelOverlays = null;\n\t\t// \tthis.invalidate(CanvasView.LAYOUT_INVALID | CanvasView.SIZE_INVALID);\n\t\t// \t// this.requestRender(CanvasView.LAYOUT_INVALID | CanvasView.SIZE_INVALID);\n\t\t// \t// this.requestRender().renderNow();\n\t\t// }.bind(this);\n\t\t// viewportChanged = _.debounce(viewportChanged, 60, false);\n\n\t\t// window.addEventListener(\"scroll\",\n\t\t// \t\t_.debounce(viewportChanged, 100, false), false);\n\t\t// window.addEventListener(\"wheel\",\n\t\t// \t_.debounce(viewportChanged, 100, false), false);\n\t\t// window.addEventListener(\"scroll\", viewportChanged, false);\n\t\t// window.addEventListener(\"wheel\", viewportChanged, false);\n\t\t// window.addEventListener(\"resize\", viewportChanged, false);\n\t\t// window.addEventListener(\"orientationchange\", viewportChanged, false);\n\n\t\t// this._addListListeners(this._a2b);\n\t\t// this._addListListeners(this._b2a);\n\t},\n\n\t/** @override */\n\tmeasureCanvas: function(w, h, s) {\n\t\tconsole.log(\"%s::measureCanvas style:%o scroll:%o offset:%o client:%o arg:%o\", this.cid, s.height, this.el.offsetHeight, this.el.scrollHeight, this.el.clientHeight, h);\n\t},\n\n\t/** @override */\n\tupdateCanvas: function() {\n\t\tthis._updateMetrics();\n\t\tthis._updateStyles();\n\t},\n\n\t/* --------------------------- *\n\t/* styles\n\t/* --------------------------- */\n\n\t_updateStyles: function() {\n\t\tvar b, bgColor, lnColor;\n\t\tif (this.model.has(\"bundle\")) {\n\t\t\tb = this.model.get(\"bundle\");\n\t\t\tlnColor = Color(b.colors.lnColor); //.clone();\n\t\t\tbgColor = Color(b.colors.bgColor); //.clone();\n\t\t} else {\n\t\t\tbgColor = Color(Globals.DEFAULT_COLORS[\"background-color\"]);\n\t\t\tlnColor = Color(Globals.DEFAULT_COLORS[\"link-color\"]);\n\t\t}\n\n\t\tthis._a2b.s.strokeStyle = this._a2b.s.fillStyle =\n\t\t\tthis._a2b.strokeStyleFn(this._color, bgColor, lnColor);\n\t\tthis._b2a.s.strokeStyle = this._b2a.s.fillStyle =\n\t\t\tthis._b2a.strokeStyleFn(this._color, bgColor, lnColor);\n\n\t\tif (DEBUG) {\n\t\t\tthis._debugBlocks = this.el.matches(\".debug-blocks .\" + this.className);\n\t\t\tthis._debugGraph = this.el.matches(\".debug-graph .\" + this.className);\n\t\t}\n\t},\n\n\t_setStyle: function(s) {\n\t\tif (typeof s == \"string\") {\n\t\t\ts = this._styleData[s];\n\t\t}\n\t\tCanvasView.setStyle(this._ctx, s);\n\t},\n\n\t/* --------------------------- *\n\t/* metrics\n\t/* --------------------------- */\n\n\t_updateMetrics: function() {\n\t\tvar bounds;\n\n\t\tthis._rootFontSize = parseFloat(\n\t\t\tgetComputedStyle(document.documentElement).fontSize);\n\n\t\tbounds = this.el.getBoundingClientRect();\n\t\t// bounds = getAbsoluteClientRect(this.el);\n\t\tthis._ctx.setTransform(this._canvasRatio, 0, 0, this._canvasRatio,\n\t\t\t(-(bounds.left + window.pageXOffset) * this._canvasRatio) - 0.5,\n\t\t\t(-(bounds.top + window.pageYOffset) * this._canvasRatio) - 0.5\n\t\t);\n\n\t\tvar i, ii, els;\n\t\tvar srcRect, destRect;\n\t\tvar srcMin, destMin;\n\n\t\tsrcRect = this._a2b.srcView.el.getBoundingClientRect();\n\t\tdestRect = this._a2b.destView.el.getBoundingClientRect();\n\t\tthis._a2b.qx = getRectDirX(srcRect, destRect);\n\n\t\tels = this._listA.el.querySelectorAll(\".label\");\n\t\tsrcMin = srcRect.left + window.pageXOffset;\n\t\tfor (i = 0, ii = els.length; i < ii; i++) {\n\t\t\tsrcMin = Math.max(srcMin,\n\t\t\t\tels[i].getBoundingClientRect().right + window.pageXOffset);\n\t\t}\n\t\tthis._a2b.xMin = srcMin;\n\n\t\tels = this._listB.el.querySelectorAll(\".label\");\n\t\tdestMin = destRect.left + window.pageXOffset;\n\t\tfor (i = 0, ii = els.length; i < ii; i++) {\n\t\t\tdestMin = Math.min(destMin,\n\t\t\t\tels[i].getBoundingClientRect().left + window.pageXOffset);\n\t\t}\n\t\tthis._a2b.destMinX = destMin;\n\n\t\tthis._b2a.qx = -this._a2b.qx;\n\t\tthis._b2a.xMin = this._a2b.destMinX;\n\t\tthis._b2a.destMinX = this._a2b.xMin;\n\n\t\t// var s = getComputedStyle(document.documentElement);\n\t\t// this._rootFontSize = parseFloat(s.fontSize); // * this._canvasRatio;\n\t\t// console.log(\"%s::_updateMetrics _rootFontSize: %s %o\", this.cid, this._rootFontSize, s);\n\n\t\t// var c = Math.abs(sData.xMin - dData.xMin) / 6;\n\t\t// sMin = sData.xMin + c * qx;\n\t\t// dMin = dData.xMin - c * qx;\n\n\t\t// this._a2b.targets = this._measureListItems(listView);\n\t\t// this._b2a.targets = this._measureListItems(listView);\n\n\t\t// // connector minimum branch x2\n\t\t// listView = this._listB;\n\t\t// for (i = 0, ii = listView.groups.length; i < ii; i++) {\n\t\t// \titemView = listView.itemViews.findByModel(listView.groups[i]);\n\t\t// \titemRect = (itemView.label || itemView.el).getBoundingClientRect();\n\t\t// \tthis._b2a.xMin = Math.min(this._b2a.xMin, itemRect.left);\n\t\t// \t// if (itemView._metrics) this._b2a.rect.left + itemView.transform.tx + itemView._metrics.textLeft;\n\t\t// }\n\t},\n\n\t/* --------------------------- *\n\t/* redraw\n\t/* --------------------------- */\n\n\tredraw: function(ctx, interp, flags) {\n\t\tthis._clearCanvas(0, 0, this._canvasWidth, this._canvasHeight);\n\t\tctx.save();\n\t\tthis._redraw_fromElements(ctx, interp, flags);\n\t\t// this._redraw_fromViews(ctx, interp);\n\t\tctx.restore();\n\t},\n\n\t_redraw_fromElements: function(ctx, interp, flags) {\n\t\t// b2a: keyword to bundles, right to left\n\t\t// a2b: bundle to keywords, left to right\n\t\tif (flags & (CanvasView.SIZE_INVALID | CanvasView.MODEL_INVALID)) {\n\t\t\tconsole.log(\"%s::redraw [valuesChanged: %s] [flags: %s]\", this.cid, interp.valuesChanged, CanvasView.flagsToString(flags));\n\t\t\tthis._a2b.connectorsOut = this._a2b.connectors;\n\t\t\tthis._b2a.connectorsOut = this._b2a.connectors;\n\t\t\tthis._b2a.connectors = this._computeConnectors(this._b2a);\n\t\t\tthis._a2b.connectors = this._computeConnectors(this._a2b);\n\t\t\tthis._labelOverlays = this._computeLabelOverlays(this._listB);\n\t\t}\n\n\t\t/* line dash value interpolation */\n\t\tvar b2aVal, a2bVal;\n\t\tb2aVal = interp.getRenderedValue(\"b2a\") / interp.getOption(\"b2a\", \"max\"); //_valueData[\"b2a\"]._maxVal;\n\t\t// b2aVal = interp._valueData[\"b2a\"]._renderedValue / interp._valueData[\"b2a\"]._maxVal;\n\t\ta2bVal = interp.getRenderedValue(\"a2b\") / interp.getOption(\"a2b\", \"max\"); //interp._valueData[\"a2b\"]._maxVal;\n\t\t// a2bVal = interp._valueData[\"a2b\"]._renderedValue / interp._valueData[\"a2b\"]._maxVal;\n\n\t\t/* draw */\n\t\tthis._drawConnectors(this._b2a.connectors, this._b2a.s, b2aVal, 1);\n\t\tthis._drawConnectors(this._b2a.connectorsOut, this._b2a.s, 1 - b2aVal, 1);\n\t\tthis._drawConnectors(this._a2b.connectors, this._a2b.s, a2bVal, 2);\n\t\t// this._drawConnectors(this._a2b.connectorsOut, this._a2b.s, 1 - a2bVal, 2);\n\t\tthis._drawLabelOverlays(this._labelOverlays);\n\t},\n\n\t/* --------------------------- *\n\t * label overlays\n\t * --------------------------- */\n\n\t_computeLabelOverlays: function(list) {\n\t\tvar data = { rects: [] };\n\t\tvar els = list.el.querySelectorAll(\".list-group .label span\");\n\n\t\tvar i, ii, r;\n\t\tfor (i = 0, ii = els.length; i < ii; i++) {\n\t\t\t// r = inflateRect(els[i].getBoundingClientRect(), 0, 0);\n\t\t\tr = _.clone(els[i].getBoundingClientRect());\n\t\t\tr.top += window.pageYOffset; // - 0.5;\n\t\t\tr.left += window.pageXOffset; // - 0.5;\n\t\t\t// r.innerText = els[i].innerText;\n\t\t\tdata.rects[i] = r;\n\t\t}\n\t\t// data.cssStyle = getComputedStyle(els[0]);\n\t\t// data.boxStyle = getBoxEdgeStyles(overlayData.cssStyle);\n\t\t// data.ctxStyle = {\n\t\t// \tfont: [s.fontWeight, s.fontStyle, s.fontSize + \"/\" + s.lineHeight, s.fontFamily].join(\" \")\n\t\t// };\n\t\treturn data;\n\t},\n\n\t_drawLabelOverlays: function(data) {\n\t\tthis._ctx.save();\n\t\t// CanvasView.setStyle(this._ctx, s);\n\t\tthis._ctx.globalAlpha = 0.85;\n\t\tthis._ctx.globalCompositeOperation = \"destination-out\";\n\t\t// this._ctx.canvas.style.letterSpacing = overlayData.cssStyle.letterSpacing;\n\n\t\tdata.rects.forEach(function(r) {\n\t\t\t// this._ctx.clearRect(r.left, r.top, r.width, r.height);\n\t\t\tthis._ctx.fillRect(r.left, r.top, r.width, r.height);\n\t\t\t// this._ctx.strokeText(r.innerText, r.left, r.top);\n\t\t}, this);\n\t\tthis._ctx.restore();\n\n\t\tif (DEBUG) {\n\t\t\tif (this._debugGraph || this._debugBlocks) {\n\t\t\t\tdata.rects.forEach(function(r) {\n\t\t\t\t\tr = inflateRect(r, 0, 0);\n\t\t\t\t\tCanvasHelper.drawRect(this._ctx, _dStyles[\"silver_dashed\"],\n\t\t\t\t\t\tr.left, r.top, r.width, r.height);\n\t\t\t\t}, this);\n\t\t\t}\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t * connectors\n\t * --------------------------- */\n\n\t_computeConnectors: function(d) {\n\t\tvar sMin = d.xMin;\n\t\tvar dMin = d.destMinX;\n\t\tvar qx = d.qx;\n\n\t\tvar rBase, rInc;\n\t\trBase = this._roundTo(d.s.radiusBase * this._rootFontSize, 0.5);\n\t\trInc = this._roundTo(d.s.radiusIncrement * this._rootFontSize, 0.5);\n\n\t\t// var root = {};\n\t\tvar i, p, ddNum, connectors = [];\n\t\tvar x1, y1, tx;\n\n\t\tvar sView, ddView, ddItems;\n\t\tif (d.srcView.collection.selected && d.destView.filteredItems) {\n\t\t\tsView = d.srcView.itemViews.findByModel(d.srcView.collection.selected);\n\n\t\t\tvar rect = sView.label.getBoundingClientRect();\n\t\t\tx1 = rect.left;\n\t\t\ty1 = rect.top + rect.height / 2;\n\t\t\tif (qx > 0) x1 += rect.width;\n\t\t\tx1 += window.pageXOffset;\n\t\t\ty1 += window.pageYOffset;\n\n\t\t\t// if (!sView._metrics) return;\n\t\t\t// x1 = d.rect.left + sView.transform.tx\n\t\t\t// \t+ sView._metrics.textLeft;\n\t\t\t// y1 = d.rect.top + sView.transform.ty\n\t\t\t// \t+ sView._metrics.offsetHeight / 2;\n\t\t\t// if (qx > 0) x1 += sView._metrics.textWidth;\n\n\t\t\tddItems = d.destView.filteredItems;\n\t\t\tddNum = d.destView.filteredItems.length;\n\n\t\t\tfor (i = 0; i < ddNum; i++) {\n\t\t\t\tp = {};\n\t\t\t\tddView = d.destView.itemViews.findByModel(ddItems[i]);\n\n\t\t\t\trect = ddView.label.getBoundingClientRect();\n\t\t\t\tp.x2 = rect.left;\n\t\t\t\tp.y2 = rect.top + rect.height / 2;\n\t\t\t\tif (qx < 0) p.x2 += rect.width;\n\t\t\t\tp.x2 += window.pageXOffset;\n\t\t\t\tp.y2 += window.pageYOffset;\n\n\t\t\t\t// p.x2 = d.destRect.left + ddView.transform.tx\n\t\t\t\t// \t+ ddView._metrics.textLeft;\n\t\t\t\t// p.y2 = d.destRect.top + ddView.transform.ty\n\t\t\t\t// \t+ ddView._metrics.offsetHeight / 2;\n\t\t\t\t// if (qx < 0) p.x2 += ddView._metrics.textWidth;\n\n\t\t\t\tp.x1 = x1;\n\t\t\t\tp.y1 = y1;\n\t\t\t\tp.qx = qx;\n\t\t\t\tconnectors[i] = p;\n\t\t\t}\n\t\t\tconnectors.sort((a, b) => a.y2 - b.y2);\n\t\t\t// ssEl's number of items above in the Y axis\n\t\t\tvar si = 0;\n\t\t\t// Node first arc (r0) max radius (cx0)\n\t\t\t// They are centered to the label, so halve it\n\t\t\tvar rMax0 = ddNum * rInc * 0.5;\n\t\t\t// cy1 offset from y1\n\t\t\tvar a;\n\n\t\t\t// First pass, calc first radius (r0, at the source of the connector),\n\t\t\t// and the amount of dest connectors vertically closer to the source (di)\n\t\t\tfor (i = 0; i < ddNum; i++) {\n\t\t\t\tp = connectors[i];\n\n\t\t\t\ta = (i - (ddNum - 1) / 2) * rInc;\n\t\t\t\tp.cy1 = p.y1 + a;\n\t\t\t\tp.cy2 = p.y2;\n\t\t\t\tp.r0 = Math.abs(a);\n\t\t\t\tp.cx0 = p.x1 + (rMax0 - p.r0) * qx;\n\n\t\t\t\t// If src (cy1) is above dest (y2), decrease index diff (di)\n\t\t\t\tp.di = ((p.cy1 - p.y2) > 0) ? i : ddNum - (i + 1);\n\t\t\t\tsi = Math.max(si, p.di);\n\n\t\t\t\t// p.dx = x1 - p.x2;\n\t\t\t\t// p.dy = y1 - p.y2;\n\t\t\t}\n\n\t\t\t// Calc max radius that fits sMin to dMin:\n\t\t\t// from space btw sMin to dMin, remove first arc and max arc increase,\n\t\t\t// then halve (there's two arcs left)\n\t\t\tvar rBaseMax = (Math.abs(dMin - sMin) - (rMax0 + (si * rInc))) / 2;\n\t\t\t// Ensure 0 > rBase > rBaseMax\n\t\t\trBase = Math.max(0, Math.min(rBase, rBaseMax));\n\t\t\t// console.log(\"%s::_computeConnectors 1rem = %spx rBase:%s rBaseMax:%s\", this.cid, this._rootFontSize, rBase, rBaseMax);\n\n\t\t\tfor (i = 0; i < ddNum; i++) {\n\t\t\t\tp = connectors[i];\n\t\t\t\tp.r1 = p.di * rInc + rBase;\n\t\t\t\tp.r2 = rBase;\n\n\t\t\t\t// p.r1 = p.di * rInc + rBase;\n\t\t\t\t// p.r2 = (si - p.di) * rInc + rBase;\n\n\t\t\t\tp.cx1 = sMin + (rMax0 * qx);\n\t\t\t\tp.cx2 = dMin - ((si - p.di) * rInc) * qx;\n\t\t\t\t//\n\t\t\t\t// p.cx1 = sMin + (rMax0 * qx);\n\t\t\t\t// p.cx2 = dMin;\n\n\t\t\t\ttx = calcArcHConnector(p.cx1, p.cy1, p.r1, p.cx2, p.cy2, p.r2, 0.7);\n\t\t\t\tif (tx) {\n\t\t\t\t\tp.tx1 = tx[0];\n\t\t\t\t\tp.tx2 = tx[1];\n\t\t\t\t} else {\n\t\t\t\t\tp.tx1 = p.cx1;\n\t\t\t\t\tp.tx2 = p.cx2;\n\t\t\t\t}\n\t\t\t\tp.length = Math.abs(p.x1 - p.x2) + Math.abs(p.cy1 - p.cy2);\n\n\t\t\t\t// Find out longest node connection for setLineDash\n\t\t\t\t// root.maxLength = Math.max(root.maxLength, p.length);\n\t\t\t}\n\t\t\tconnectors.sort((a, b) =>\n\t\t\t\ta.di - b.di // Sort by index distance to from source point\n\t\t\t\t// a.r0 - b.r0 // Sort by first arc (centered)\n\t\t\t\t// (a.r1 + a.r2) - (b.r1 + b.r2)\n\t\t\t\t// a.tx2 - b.tx2\n\t\t\t);\n\n\t\t\tconnectors.si = si;\n\t\t\tconnectors.qx = qx;\n\t\t\tconnectors.sMin = sMin;\n\t\t\tconnectors.dMin = dMin;\n\t\t\t// root.x = x1;\n\t\t\t// root.y = y1;\n\t\t\t// root.qx = qx;\n\t\t\t// root.r0 = si * rInc;\n\t\t}\n\t\t// d.connectors = connectors;\n\t\t// d.root = root;\n\t\t// return d;\n\t\treturn connectors;\n\t},\n\n\t_drawConnectors: function(pp, s, lVal, dir) {\n\t\tvar i, ii, p;\n\t\tvar ow, ra1, ra2, ta;\n\n\t\tif (!(pp && pp.length && lVal)) return;\n\n\t\tii = pp.length;\n\n\t\t/* outline width */\n\t\tow = s.lineWidth + s.outlineWidth;\n\t\t// ow = Math.min(\n\t\t// \tthis._roundTo(s.radiusIncrement * this._rootFontSize, 0.5),\n\t\t// \tthis._roundTo(s.lineWidth * (1 + s.outlineWidth), 0.5)\n\t\t// );\n\n\t\t/* arrow radiuses, direction */\n\t\t// ra1 = (s.radiusIncrement * this._rootFontSize) + s.lineWidth;\n\t\tra1 = s.arrowSize * this._rootFontSize;\n\t\tra2 = ra1 + (ow - s.lineWidth);\n\t\tta = Math.PI * dir;\n\t\t// dir -= 2;\n\n\t\tthis._setStyle(s);\n\n\t\t// if (lVal < 1) {\n\t\t// \tthis._ctx.lineDashOffset = lMax * (1 + lVal);\n\t\t// \tthis._ctx.setLineDash([lMax, lMax])\n\t\t// \t// this._ctx.lineDashOffset = lMax * (1 + lVal);;\n\t\t// \t// this._ctx.setLineDash([lMax * (1 - lVal), lMax]);\n\t\t// }\n\n\t\t// for (i = 0; i < ii; i++) {\n\t\t// p = pp[i];\n\t\tif (s.outlineWidth) {\n\t\t\tthis._ctx.save();\n\t\t\tthis._ctx.globalCompositeOperation = \"destination-out\";\n\t\t\tthis._ctx.lineWidth = ow;\n\t\t\tfor (i = 0; i < ii; i++) {\n\t\t\t\tp = pp[i];\n\n\t\t\t\tif (lVal < 1) {\n\t\t\t\t\tthis._ctx.lineDashOffset = p.length * (1 + lVal);\n\t\t\t\t\tthis._ctx.setLineDash([p.length, p.length])\n\t\t\t\t}\n\t\t\t\tthis._drawConnector(p, i, pp);\n\t\t\t\tif (lVal == 1) {\n\t\t\t\t\tthis._drawArrowhead(p.x2, p.y2, ra2, dir * ta);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._ctx.restore();\n\t\t}\n\n\t\tfor (i = 0; i < ii; i++) {\n\t\t\tp = pp[i];\n\t\t\tif (lVal < 1) {\n\t\t\t\tthis._ctx.lineDashOffset = p.length * (1 + lVal);\n\t\t\t\tthis._ctx.setLineDash([p.length, p.length])\n\t\t\t}\n\t\t\tthis._drawConnector(p, i, pp);\n\t\t\tif (lVal == 1) {\n\t\t\t\tthis._drawArrowhead(p.x2, p.y2, ra1, dir * ta);\n\t\t\t}\n\t\t}\n\t},\n\n\t_drawArrowhead: function(x, y, r, t) {\n\t\t// this._ctx.save();\n\t\t// this._ctx.lineDashOffset = 0;\n\t\t// this._ctx.setLineDash([]);\n\t\tCanvasHelper.arrowhead2(this._ctx, x, y, r, t);\n\t\tthis._ctx.stroke();\n\t\t// this._ctx.restore();\n\t},\n\n\t_drawArrowhead2: function(x, y, r, t) {\n\t\tCanvasHelper.arrowhead(this._ctx, x, y, r, t);\n\t\tthis._ctx.fill();\n\t},\n\n\t// _drawArrowheadH: function(x, y, r, a) {\n\t// \tthis._ctx.save();\n\t// \tthis._ctx.lineDashOffset = 0;\n\t// \tthis._ctx.setLineDash([]);\n\t// \tthis._ctx.beginPath();\n\t// \tthis._ctx.moveTo(x + r * 1 / dir, y - r);\n\t// \tthis._ctx.lineTo(x, y);\n\t// \tthis._ctx.lineTo(x + r * 1 / dir, y + r);\n\t// \tthis._ctx.stroke();\n\t// \tthis._ctx.restore();\n\t// },\n\n\t_drawConnector: function(p, i, pp) {\n\t\tthis._ctx.beginPath();\n\t\tthis._ctx.moveTo(p.x2, p.cy2);\n\t\tthis._ctx.arcTo(p.tx2, p.cy2, p.tx1, p.cy1, p.r2);\n\t\tthis._ctx.arcTo(p.tx1, p.cy1, p.cx1, p.cy1, p.r1);\n\t\tthis._ctx.arcTo(p.cx0, p.cy1, p.cx0, p.y1, p.r0);\n\n\t\t// p.cx00 = p.x1 + ((p.r0 + p.di) * p.qx);\n\t\t// p.cy00 = (p.cy1 + p.y1) / 2;\n\t\t// this._ctx.arcTo(p.cx00, p.cy1, p.cx00, p.cy00, p.r0 / 2);\n\t\t// this._ctx.arcTo(p.cx00, p.y1, p.x1, p.y1, p.r0 / 2);\n\t\t// this._ctx.lineTo(p.x1, p.y1);\n\n\t\t// p.cx00 = p.x1 + (p.r0 * p.qx * 2);\n\t\t// this._ctx.lineTo(p.cx00, p.cy1);\n\t\t// this._ctx.quadraticCurveTo(p.cx0, p.cy1, p.cx0, p.y1);\n\n\t\t// this._ctx.lineTo(p.cx0, p.y1);\n\t\tthis._ctx.stroke();\n\t},\n\n\t_roundTo: function(n, p) {\n\t\tif (p > 1) p = 1 / p;\n\t\treturn Math.round(n / p) * p;\n\t},\n\n\t/*\n\t_computeConnectors: function(d) {\n\t\tvar rBase = d.s.radiusBase;\n\t\tvar rInc = d.s.radiusIncrement;\n\t\tvar sMin = d.xMin;\n\t\tvar dMin = d.destMinX;\n\n\t\tvar lMax = 0;\n\t\tvar p, connectors = [];\n\t\tvar qx, x1, y1, tx;\n\t\tvar si; // ssEl's number of items above in the Y axis\n\n\t\tif (d.rect.right < d.destRect.left) {\n\t\t\tqx = 1;\n\t\t} else if (d.destRect.right < d.rect.left) {\n\t\t\tqx = -1;\n\t\t} else {\n\t\t\tqx = 0;\n\t\t}\n\n\t\tvar ssEl, ddEls, ddNum, ssRect, ddRect, i;\n\t\tssEl = d.srcView.el.querySelector(\".list-item.selected .label\");\n\t\tif (ssEl) {\n\t\t\tssRect = ssEl.getBoundingClientRect();\n\t\t\tx1 = ssRect.left;\n\t\t\tif (qx > 0) x1 += ssRect.width;\n\t\t\ty1 = ssRect.top + ssRect.height / 2;\n\t\t\t// r2 = rBase;\n\t\t\t// cx1 = d.xMin;\n\n\t\t\tsi = 0;\n\t\t\tddEls = d.destView.el.querySelectorAll(\".list-item:not(.excluded) .label\");\n\t\t\tddNum = ddEls.length;\n\t\t\t// dx = Math.abs(d.xMin - dData.xMin);\n\n\t\t\tfor (i = 0; i < ddNum; i++) {\n\t\t\t\tp = {};\n\t\t\t\tddRect = ddEls[i].getBoundingClientRect();\n\t\t\t\tp.x2 = ddRect.left;\n\t\t\t\tif (qx < 0) p.x2 += ddRect.width;\n\t\t\t\tp.y2 = ddRect.top + ddRect.height / 2;\n\t\t\t\tp.x1 = x1;\n\t\t\t\tp.y1 = y1;\n\t\t\t\tp.dx = p.x1 - p.x2;\n\t\t\t\tp.dy = p.y1 - p.y2;\n\t\t\t\tp.qx = qx;\n\t\t\t\tp.qy = Math.sign(p.dy);\n\t\t\t\t// p.dLength = Math.abs(p.x) + Math.abs(p.y);\n\t\t\t\tp.di = p.dy > 0 ? i : ddNum - (i + 1);\n\t\t\t\tsi = Math.max(si, p.di);\n\t\t\t\tconnectors[i] = p;\n\t\t\t}\n\n\t\t\tvar a, rMax0 = ddNum * 0.5 * rInc;\n\t\t\tfor (i = 0; i < ddNum; i++) {\n\t\t\t\tp = connectors[i];\n\t\t\t\tp.r1 = p.di * rInc + rBase;\n\t\t\t\tp.r2 = rBase;\n\t\t\t\t// p.r2 = (si - p.di) * rInc + rBase;\n\n\t\t\t\tp.cx1 = sMin;\n\t\t\t\tp.cx2 = dMin - ((si - p.di) * rInc) * qx;\n\t\t\t\t// p.cx2 = dMin;\n\n\t\t\t\ta = (i - (ddNum - 1) / 2) * rInc;\n\t\t\t\tp.cy1 = p.y1 + a;\n\t\t\t\tp.cy2 = p.y2;\n\n\t\t\t\ta = Math.abs(a);\n\t\t\t\tp.r0 = a;\n\t\t\t\tp.cx0 = p.x1 + (rMax0 - a) * qx;\n\n\t\t\t\ttx = calcArcHConnector(p.cx1, p.cy1, p.r1, p.cx2, p.cy2, p.r2, 0.8);\n\t\t\t\tp.tx1 = tx[0];\n\t\t\t\tp.tx2 = tx[1];\n\n\t\t\t\t// Find out longest node connection for setLineDash\n\t\t\t\tlMax = Math.max(lMax, Math.abs(p.x1 - p.x2) + Math.abs(p.cy1 - p.cy2));\n\t\t\t}\n\t\t\t// Sort by distance y1 (original) > cy1 (rInc offset) distance\n\t\t\tconnectors.sort(function(a, b) {\n\t\t\t\t// return Math.abs(b.y1 - b.cy1) - Math.abs(a.y1 - a.cy1);\n\t\t\t\t// return a.r0 - b.r0;\n\t\t\t\treturn b.di - a.di;\n\t\t\t});\n\t\t}\n\t\td.connectors = connectors;\n\t\td.maxLength = lMax;\n\t\td.maxLength = qx;\n\t}, */\n\n});\n\nif (DEBUG) {\n\t// GraphView.prototype._logFlags = \"\";\n\n\tvar applyFn = function(context, args) {\n\t\treturn Array.prototype.shift.apply(args).apply(context, args);\n\t}\n\n\tGraphView.prototype._drawConnector = _.wrap(GraphView.prototype._drawConnector, function(fn, p, i, pp) {\n\t\tif (!this._debugGraph) {\n\t\t\t// visual debug aids are off\n\t\t\treturn fn.call(this, p, i, pp);\n\t\t}\n\n\t\t// var isRtl = p.qx < 0;\n\t\tvar isFirst = i == 0;\n\t\tvar isLast = i == (pp.length - 1);\n\t\t// guide color\n\t\tvar gs = _dStyles[isFirst ? \"salmon_dashed\" : \"lightskyblue_dashed\"];\n\n\t\tif (isFirst) {\n\t\t\tCanvasHelper.drawVGuide(this._ctx, _dStyles[\"grey\"], pp.sMin);\n\t\t\tCanvasHelper.drawVGuide(this._ctx, _dStyles[\"grey\"], pp.dMin);\n\t\t}\n\n\t\tif (isFirst) {\n\t\t\tCanvasHelper.drawHGuide(this._ctx, _dStyles[\"silver_dashed\"], p.y1);\n\t\t\tCanvasHelper.drawVGuide(this._ctx, _dStyles[\"silver_dashed\"], p.x1);\n\t\t\tCanvasHelper.drawCircle(this._ctx, _dStyles[\"midnightblue\"], p.x1, p.y1, 10);\n\t\t}\n\t\tif (isFirst || isLast) {\n\t\t\t// CanvasHelper.drawVGuide(this._ctx, gs, p.cx1 + (p.r1 * p.qx));\n\t\t\tCanvasHelper.drawVGuide(this._ctx, gs, p.tx2);\n\t\t\tCanvasHelper.drawVGuide(this._ctx, gs, p.cx2 - (p.r2 * p.qx));\n\t\t\t// CanvasHelper.drawVGuide(this._ctx, gs, p.cx2);\n\t\t\t// CanvasHelper.drawHGuide(this._ctx, gs, p.cy2);\n\t\t}\n\t\tif (isFirst || isLast) {\n\t\t\tthis._ctx.save();\n\t\t\tthis._ctx.strokeStyle = _dStyles[(isFirst ? \"red\" : \"blue\")].strokeStyle;\n\t\t\tthis._ctx.lineWidth *= 1.5;\n\t\t}\n\t\t// }\n\n\t\tfn.call(this, p, i, pp);\n\n\t\t// if (isRtl) {\n\t\tif (isFirst || isLast) {\n\t\t\tthis._ctx.restore();\n\t\t}\n\t\t// point color\n\t\tvar pCol = isLast ? \"midnightblue\" : isFirst ? \"sienna\" : \"grey\";\n\t\tvar ps = _dStyles[pCol];\n\t\tvar pf = _dStyles[pCol + \"_fill\"];\n\n\t\t// CanvasHelper.drawCrosshair(this._ctx, ps, p.x1 + ((p.r0 + p.di) * p.qx), p.cy1, 3);\n\n\n\t\tif (isFirst || isLast) {\n\t\t\t// moveTo(p.x2, p.cy2)\n\t\t\tCanvasHelper.drawCrosshair(this._ctx, ps, p.x2, p.cy2, 10);\n\t\t\tCanvasHelper.drawCircle(this._ctx, ps, p.x2, p.cy2, 3);\n\n\t\t\t// arcTo #1: (p.tx2, p.cy2, p.tx1, p.cy1, p.r2)\n\t\t\tCanvasHelper.drawSquare(this._ctx, ps, p.tx2, p.cy2, 4); // p1\n\t\t\tCanvasHelper.drawCircle(this._ctx, pf, p.tx1, p.cy1, 2); // p2\n\n\t\t\t// arcTo #2: (p.tx1, p.cy1, p.cx1, p.cy1, p.r1)\n\t\t\tCanvasHelper.drawSquare(this._ctx, ps, p.tx1, p.cy1, 4); // p1\n\t\t\tCanvasHelper.drawCircle(this._ctx, pf, p.cx1, p.cy1, 2); // p2\n\n\t\t\t// arcTo #2: (p.cx0, p.cy1, p.cx0, p.y1, p.r0)\n\t\t\tCanvasHelper.drawSquare(this._ctx, ps, p.cx0, p.cy1, 4); // p1\n\t\t\tCanvasHelper.drawCircle(this._ctx, pf, p.cx0, p.y1, 2); // p2\n\n\t\t\tCanvasHelper.drawCircle(this._ctx, _dStyles[\"green\"], p.tx1, p.cy1, 4);\n\t\t\tCanvasHelper.drawCircle(this._ctx, _dStyles[\"green\"], p.cx1, p.cy1, 4);\n\t\t\tCanvasHelper.drawCircle(this._ctx, _dStyles[\"green\"], p.cx2, p.cy2, 4);\n\t\t}\n\t\t// }\n\t});\n\n\n\tGraphView.prototype._traceScroll = function(type) {\n\t\tvar tpl = \"%s:[%s] DPR:%i \" +\n\t\t\t\"[window: %i %i] \" +\n\t\t\t\"[html: %i %i %i] \" +\n\t\t\t\"[body: %i %i %i] \" +\n\t\t\t\"[container: %i %i %i] \" +\n\t\t\t\"[graph: %i %i %i]\";\n\t\tconsole.log(tpl, this.cid, type, this._canvasRatio,\n\t\t\twindow.pageYOffset,\n\t\t\twindow.pageYOffset,\n\t\t\tdocument.documentElement.clientHeight,\n\t\t\tdocument.documentElement.scrollTop,\n\t\t\tdocument.documentElement.scrollHeight,\n\t\t\tdocument.body.clientHeight,\n\t\t\tdocument.body.scrollTop,\n\t\t\tdocument.body.scrollHeight,\n\t\t\tdocument.body.firstElementChild.clientHeight,\n\t\t\tdocument.body.firstElementChild.scrollTop,\n\t\t\tdocument.body.firstElementChild.scrollHeight,\n\t\t\tthis.el.clientHeight,\n\t\t\tthis.el.scrollTop,\n\t\t\tthis.el.scrollHeight\n\t\t);\n\t};\n\n\tif (GraphView.prototype._logFlags.split(\" \")[\"view.render\"]) {\n\t\t// GraphView.prototype._requestRender = _.wrap(CanvasView.prototype._requestRender, function(fn) {\n\t\t// \tdebouncedLog(\"%s::_requestRender\", this.cid);\n\t\t// \treturn applyMethod(this, arguments);\n\t\t// });\n\t\tvar debouncedLog = _.debounce(_.bind(console.log, console), 500, true);\n\n\t\tGraphView.prototype._applyRender = _.wrap(CanvasView.prototype._applyRender, function(fn) {\n\t\t\tvar retval;\n\t\t\tthis._logFlags[\"view.render\"] = false;\n\t\t\tdebouncedLog(\"%s::_applyRender [debounced]\", this.cid);\n\t\t\tretval = applyFn(this, arguments);\n\t\t\tthis._logFlags[\"view.render\"] = true;\n\t\t\treturn retval;\n\t\t});\n\t}\n}\n\nmodule.exports = GraphView;\n",
    "/**\n * @module app/view/component/GroupingListView\n */\n\n/** @type {module:app/view/component/FilterableListView} */\nconst FilterableListView = require(\"app/view/component/FilterableListView\");\n/** @type {module:app/view/component/ClickableRenderer} */\nconst ClickableRenderer = require(\"app/view/render/ClickableRenderer\");\n/** @type {module:app/view/render/LabelRenderer} */\nconst LabelRenderer = require(\"app/view/render/LabelRenderer\");\n// /** @type {module:utils/array/difference} */\n// var diff = require(\"utils/array/difference\");\n\n/**\n * @constructor\n * @type {module:app/view/component/GroupingListView}\n */\nvar GroupingListView = FilterableListView.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"groupingList\",\n\n\t/** @override */\n\ttagName: \"dl\",\n\n\t/** @override */\n\tclassName: \"grouped\",\n\n\t/** @type {Function|null} empty array */\n\t_groupingFn: null, //function() { return null; },\n\n\t/** @override */\n\tdefaults: _.defaults({\n\t\t// defaults: {\n\t\trenderer: ClickableRenderer.extend({\n\t\t\t/** @override */\n\t\t\tcidPrefix: \"groupingListItem\",\n\t\t\t/** @override */\n\t\t\ttagName: \"dl\",\n\t\t\t/** @override */\n\t\t\tclassName: \"list-item list-node\",\n\t\t}),\n\t\tgroupingRenderer: LabelRenderer.extend({\n\t\t\t/** @override */\n\t\t\tcidPrefix: \"groupingListGroup\",\n\t\t\t/** @override */\n\t\t\ttagName: \"dt\",\n\t\t\t/** @override */\n\t\t\tclassName: \"list-group list-node\",\n\t\t}),\n\t\tgroupingFn: null,\n\t\t// },\n\t}, FilterableListView.prototype.defaults),\n\n\tproperties: {\n\t\tgroups: {\n\t\t\tget: function() {\n\t\t\t\treturn this._groups;\n\t\t\t}\n\t\t},\n\t\tfilteredGroups: {\n\t\t\tget: function() {\n\t\t\t\treturn this._filteredGroups;\n\t\t\t}\n\t\t},\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tFilterableListView.prototype.initialize.apply(this, arguments);\n\n\t\tthis._groups = [];\n\t\tthis._filteredGroups = [];\n\t\tthis._changedFilteredGroups = [];\n\t\tthis._groupsByItemCid = {};\n\n\t\tthis._groupingFn = options.groupingFn;\n\t\tthis.groupingRenderer = options.groupingRenderer;\n\t\tthis._computeGroups();\n\t\tif (this._groupingFn) {\n\t\t\tthis._groups.forEach(this.createGroupingView, this);\n\t\t}\n\t},\n\n\t/**\n\t * Called once on collection change\n\t * @private\n\t */\n\t_computeGroups: function() {\n\t\t// this._groups = _.uniq(this.collection.map(this._groupingFn, this));\n\t\tthis._groups.length = 0;\n\t\t// this._groupItems.length = 0;\n\t\tif (this._groupingFn) {\n\t\t\tthis.collection.forEach(function(item) {\n\t\t\t\tvar gIdx, gObj;\n\t\t\t\tgObj = this._groupingFn.apply(null, arguments);\n\t\t\t\tif (gObj) {\n\t\t\t\t\tgIdx = this._groups.indexOf(gObj);\n\t\t\t\t\tif (gIdx == -1) {\n\t\t\t\t\t\tgIdx = this._groups.length;\n\t\t\t\t\t\tthis._groups[gIdx] = gObj;\n\t\t\t\t\t\t// this._groupItems[gIdx] = [];\n\t\t\t\t\t}\n\t\t\t\t\t// this._groupItems[gIdx].push(item);\n\t\t\t\t}\n\t\t\t\tthis._groupsByItemCid[item.cid] = gObj;\n\t\t\t}, this);\n\t\t} else {\n\t\t\tthis.collection.forEach(function(item) {\n\t\t\t\tthis._groupsByItemCid[item.cid] = null;\n\t\t\t}, this);\n\t\t}\n\t},\n\n\t/** @private Create children views */\n\tcreateGroupingView: function(item) {\n\t\tvar view = new this.groupingRenderer({\n\t\t\tmodel: item,\n\t\t\tel: this.el.querySelector(\".list-group[data-id=\\\"\" + item.id + \"\\\"]\")\n\t\t});\n\t\tthis.itemViews.add(view);\n\t\treturn view;\n\t},\n\n\t/* --------------------------- *\n\t/* Filter impl 1\n\t/* --------------------------- */\n\n\t/** @override */\n\t/*\n\tcomputeFilter_1: function() {\n\t\tFilterableListView.prototype.computeFilter_1.apply(this, arguments);\n\n\t\tif (this._groupingFn) {\n\t\t\tif (this._filteredItems.length == 0) {\n\t\t\t\tthis._filteredGroups = [];\n\t\t\t} else {\n\t\t\t\tthis._filteredGroups = _.uniq(this._filteredItems.map(function(item) {\n\t\t\t\t\treturn this._groupsByItemCid[item.cid];\n\t\t\t\t}, this));\n\t\t\t}\n\t\t}\n\t\t// if (this._groupingFn) {\n\t\t// \tif (this._filteredItems.length == 0) {\n\t\t// \t\tthis._filteredGroups = [];\n\t\t// \t\tthis._groups.forEach(function(group) {\n\t\t// \t\t\tthis.itemViews.findByModel(group).el.classList.remove(\"excluded\");\n\t\t// \t\t}, this);\n\t\t// \t} else {\n\t\t// \t\tthis._filteredGroups = _.uniq(this._filteredItems.map(function(item) {\n\t\t// \t\t\treturn this._groupsByItemCid[item.cid];\n\t\t// \t\t}, this));\n\t\t// \t\tthis._groups.forEach(function(group) {\n\t\t// \t\t\tthis.itemViews.findByModel(group).el.classList.toggle(\"excluded\", this._filteredGroups.indexOf(group) == -1);\n\t\t// \t\t}, this);\n\t\t// \t}\n\t\t// }\n\t},\n\t*/\n\n\t/* --------------------------- *\n\t/* Filter impl 2\n\t/* --------------------------- */\n\n\t// /** @override */\n\t// renderFilterFn_2: function() {\n\t// \tFilterableListView.prototype.renderFilterFn_2.apply(this, arguments);\n\t// },\n\n\t/** @override */\n\tcomputeFilter: function() {\n\t\tFilterableListView.prototype.computeFilter.apply(this, arguments);\n\n\t\tif (this._groupingFn) {\n\t\t\tif (this._filteredItems.length == 0) {\n\t\t\t\tthis._filteredGroups = this._groups.concat(); //[];\n\t\t\t} else {\n\t\t\t\tthis._filteredGroups = _.uniq(this._filteredItems.map(function(item) {\n\t\t\t\t\treturn this._groupsByItemCid[item.cid];\n\t\t\t\t}, this));\n\t\t\t}\n\t\t}\n\t},\n\n\t/** @override */\n\tapplyFilter: function() {\n\t\tFilterableListView.prototype.applyFilter.apply(this, arguments);\n\n\t\tthis._groups.forEach(function(group) {\n\t\t\tthis.itemViews.findByModel(group).el.classList.toggle(\"excluded\", (this._filteredGroups.indexOf(group) == -1));\n\t\t}, this);\n\t},\n\n\t// computeFiltered: function() {\n\t// \tFilterableListView.prototype.computeFiltered.apply(this, arguments);\n\t// },\n\t//\n\t// renderFiltered: function() {\n\t// \tFilterableListView.prototype.renderFiltered.apply(this, arguments);\n\t// },\n\n});\n\nmodule.exports = GroupingListView;\n",
    "/**\n * @module app/view/component/PlayToggleSymbol\n */\n\n// /** @type {module:app/control/Globals} */\n// var Globals = require(\"app/control/Globals\");\n/** @type {module:app/view/base/CanvasView} */\nconst CanvasView = require(\"app/view/base/CanvasView\");\n\n/** @type {Function} */\nconst Color = require(\"color\");\n/** @type {module:utils/canvas/bitmap/stackBlurRGB} */\nconst stackBlurRGB = require(\"utils/canvas/bitmap/stackBlurRGB\");\n/** @type {module:utils/canvas/bitmap/getAverageRGB} */\nconst getAverageRGB = require(\"utils/canvas/bitmap/getAverageRGB\");\n/** @type {module:utils/canvas/bitmap/multiply} */\nconst multiply = require(\"utils/canvas/bitmap/multiply\");\n/** @type {module:utils/canvas/bitmap/desaturate} */\nconst desaturate = require(\"utils/canvas/bitmap/desaturate\");\n/** @type {module:utils/canvas/CanvasHelper} */\nconst roundRect = require(\"utils/canvas/CanvasHelper\").roundRect;\n\n/** @type {module:utils/ease/fn/easeInQuad} */\nconst easeIn = require(\"utils/ease/fn/easeInQuad\");\n/** @type {module:utils/ease/fn/easeOutQuad} */\nconst easeOut = require(\"utils/ease/fn/easeOutQuad\");\n\nvar PI2 = Math.PI * 2;\nvar LOOP_OFFSET = 1.833333;\nconst INTEP_MS = require(\"app/control/Globals\").TRANSITION_DURATION;\nvar FILTER_REFRESH_THRESHOLD = 0.5; //seconds elapsed\nvar FILTER_SCALE = 1.5;\nvar FILTER_RADIUS = 30; //pixels\nvar FILTER_MULTIPLY = 0.1;\n\nvar PlayToggleSymbol = {\n\tPLAY: \"playing\",\n\tPAUSE: \"paused\",\n\tWAITING: \"waiting\",\n\tENDED: \"ended\",\n};\n\nmodule.exports = CanvasView.extend({\n\n\t\t/** @type {string} */\n\t\tcidPrefix: \"playToggleSymbol\",\n\t\t/** @type {string} */\n\t\tclassName: \"play-toggle\",\n\n\t\tdefaults: {\n\t\t\tvalues: {\n\t\t\t\t_loop: 0,\n\t\t\t\t_arc: 0,\n\t\t\t},\n\t\t\tmaxValues: {\n\t\t\t\t_loop: 1\n\t\t\t},\n\t\t\tcolor: \"rgba(255,255,255,1.0)\",\n\t\t\tbackgroundColor: \"rgba(0,0,0,0.25)\",\n\t\t\tpaused: true,\n\t\t\tsymbolName: \"\",\n\t\t\t// borderRadius: 3,\n\t\t\t// borderWidth: 3,\n\t\t},\n\n\t\tproperties: {\n\t\t\tsymbolName: {\n\t\t\t\tget: function() {\n\t\t\t\t\treturn this._symbolName;\n\t\t\t\t},\n\t\t\t\tset: function(value) {\n\t\t\t\t\tthis._setSymbolName(value);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\t/** @override */\n\t\tinitialize: function(options) {\n\t\t\t// TODO: cleanup options mess in CanvasView\n\t\t\tCanvasView.prototype.initialize.apply(this, arguments);\n\t\t\tthis._options = _.extend(this._options, _.pick(options, \"symbolName\", \"borderRadius\", \"borderWidth\"));\n\t\t\tthis.symbolName = this._options.symbolName;\n\t\t},\n\n\t\t/** @override */\n\t\tmeasureCanvas: function(w, h, s) {\n\t\t\t// make canvas square\n\t\t\tthis._canvasHeight = this._canvasWidth = Math.min(w, h);\n\t\t},\n\n\t\t/** @override */\n\t\tupdateCanvas: function(ctx, s) {\n\t\t\tvar mObj = this._getFontMetrics(this._fontFamily);\n\t\t\tthis._baselineShift = mObj ? (mObj.ascent + mObj.descent) / mObj.unitsPerEm : 0.7; // default value\n\t\t\tthis._baselineShift *= this._fontSize * 0.5; // apply to font-size, halve it\n\t\t\tthis._baselineShift = Math.round(this._baselineShift);\n\n\t\t\tthis._canvasOffsetX = this._canvasOffsetY = this._canvasWidth / 2;\n\t\t\t// double SQRT1_2: square within circle within square\n\t\t\tthis._radius = (this._canvasWidth / 2) * Math.SQRT1_2 * Math.SQRT1_2 * Math.SQRT1_2;\n\t\t\tthis._side = this._radius; // * Math.SQRT1_2; // * Math.SQRT1_2;\n\t\t\t// this._borderWidth = this._options.borderWidth * this._canvasRatio;\n\t\t\t// this._borderRadius = this._canvasWidth * this._canvasRatio / 2; //this._options.borderRadius * this._canvasRatio;\n\n\t\t\t// reset matrix and translate 0,0 to center\n\t\t\tthis._ctx.setTransform(1, 0, 0, 1, this._canvasOffsetX, this._canvasOffsetY);\n\t\t\t// this._ctx.restore();\n\t\t\t// this._ctx.textBaseline = \"middle\";\n\t\t\tthis._ctx.lineWidth = this._radius * (1 - Math.SQRT1_2);\n\t\t\t// this._ctx.fillStyle = \"#FFF\";\n\t\t\tthis._ctx.shadowColor = \"rgba(0,0,0,0.75)\";\n\t\t\tthis._ctx.shadowBlur = 1;\n\t\t\tthis._ctx.shadowOffsetX = 2;\n\t\t\tthis._ctx.shadowOffsetY = 2;\n\t\t\t// this._ctx.save();\n\n\t\t\tthis._isImageDataInvalid = true;\n\t\t\t//console.log(\"%s::updateCanvas %s\", this.cid, this._backgroundColor);\n\t\t},\n\n\t\t/* --------------------------- *\n\t\t * symbolName\n\t\t * --------------------------- */\n\n\t\t_symbolName: \"\",\n\t\t_setSymbolName: function(value) {\n\t\t\tif (this._symbolName !== value) {\n\t\t\t\tthis._lastSymbolName = this._symbolName;\n\t\t\t\tthis._symbolName = value;\n\n\t\t\t\tthis.refreshImageSource();\n\t\t\t\tthis.requestRender(CanvasView.LAYOUT_INVALID);\n\t\t\t\tconsole.log(\"%s::[set] symbol %o (from %o)\", this.attached ? this.parentView.cid : this.cid, this._symbolName, this._lastSymbolName, this.paused ? \"paused\" : \"\");\n\t\t\t}\n\t\t},\n\n\t\t/* --------------------------- *\n\t\t * setImageSource/refreshImageSource\n\t\t * --------------------------- */\n\n\t\t_imageSource: null,\n\t\tsetImageSource: function(imageSource) {\n\t\t\tif (this._imageSource !== imageSource) {\n\t\t\t\tthis._imageSource = imageSource;\n\t\t\t\tthis._isImageDataInvalid = true;\n\t\t\t\tthis.requestRender(CanvasView.SIZE_INVALID);\n\t\t\t}\n\t\t},\n\n\t\t_imageDataTC: null,\n\t\trefreshImageSource: function(threshold) {\n\t\t\tif (this._isImageDataInvalid || !(this._imageSource instanceof HTMLVideoElement)) {\n\t\t\t\treturn; // data is marked for refresh already, or not a video\n\t\t\t}\n\t\t\tif (!_.isNumber(threshold)) {\n\t\t\t\tthreshold = FILTER_REFRESH_THRESHOLD;\n\t\t\t}\n\t\t\tif (threshold < Math.abs(this._imageDataTC - this._imageSource.currentTime)) {\n\t\t\t\tthis._isImageDataInvalid = true;\n\t\t\t\tthis.requestRender(CanvasView.SIZE_INVALID);\n\t\t\t}\n\t\t},\n\n\t\t_imageData: null,\n\t\t_updateImageData: function() {\n\t\t\tif (this._imageSource === null) {\n\t\t\t\tthis._imageData = null;\n\t\t\t\tthis._imageDataTC = null;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// source scale, source rect, dest scale, dest rect, current timecode\n\t\t\tvar s, sr, d, dr, tc;\n\n\t\t\t// Get source/dest offsets, intrinsic scale and timecode\n\t\t\t// ---------------------------------\n\t\t\tsr = this._imageSource.getBoundingClientRect();\n\t\t\tdr = this.el.getBoundingClientRect();\n\n\t\t\tif (this._imageSource instanceof HTMLVideoElement) {\n\t\t\t\ts = this._imageSource.videoWidth / sr.width;\n\t\t\t\ttc = this._imageSource.currentTime;\n\t\t\t} else {\n\t\t\t\ts = this._imageSource.naturalWidth / sr.width;\n\t\t\t\ttc = 0;\n\t\t\t}\n\t\t\td = s * FILTER_SCALE;\n\n\t\t\t// draw source canvas maintaining position\n\t\t\t// ---------------------------------\n\t\t\tthis._ctx.save();\n\t\t\tthis._ctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\tthis._ctx.drawImage(this._imageSource,\n\t\t\t\t(dr.left - sr.left) * s + (dr.width / 2) * s - (dr.width / 2) * d,\n\t\t\t\t(dr.top - sr.top) * s + (dr.height / 2) * s - (dr.height / 2) * d,\n\t\t\t\tdr.width * d, dr.height * d,\n\t\t\t\t0, 0, this.el.width, this.el.height\n\t\t\t);\n\t\t\t// if (d == s)\n\t\t\t// this._ctx.drawImage(this._imageSource,\n\t\t\t// \t(dr.left - sr.left) * s, (dr.top - sr.top) * s,\n\t\t\t// \tdr.width * s, dr.height * s,\n\t\t\t// \t0, 0, this.el.width, this.el.height\n\t\t\t// );\n\n\t\t\t// get ImageData\n\t\t\t// find luminosity threshold form average color\n\t\t\t// ---------------------------------\n\t\t\tvar imgdata, isDark;\n\n\t\t\timgdata = this._ctx.getImageData(0, 0, this.el.width, this.el.height);\n\t\t\t// isDark = !Color().rgb(getAverageRGB(imgdata)).dark();\n\n\t\t\t// this._ctx.globalCompositeOperation = \"luminosity\";\n\t\t\t// this._ctx.globalAlpha = 0.25;\n\t\t\t// this._ctx.fillStyle = (isDark ? \"black\" : \"white\");\n\t\t\t// this._ctx.fillRect(0, 0, this.el.width, this.el.height);\n\n\t\t\tthis._ctx.clearRect(0, 0, this.el.width, this.el.height);\n\t\t\tthis._ctx.restore();\n\n\t\t\t// Store appropiate color values\n\t\t\t// ---------------------------------\n\t\t\tthis._color = isDark ? \"white\" : \"black\";\n\t\t\t// this._color = isDark ? \"rgba(255,255,255,0.75)\" : \"rgba(0,0,0,0.75)\";\n\t\t\t// this._backgroundColor = isDark ? \"rgba(0,0,0,0.75)\" : \"rgba(255,255,255,0.74)\";\n\n\t\t\t// this.el.style.color =\n\t\t\t// \tthis._ctx.fillStyle =\n\t\t\t// \tthis._ctx.strokeStyle =\n\t\t\t// \tthis._color;\n\t\t\t// this.el.style.backgroundColor =\n\t\t\t// \tthis._ctx.shadowColor =\n\t\t\t// \tthis._backgroundColor;\n\n\t\t\t// this.el.classList.toggle(\"lod\", isDark);\n\t\t\t// this.el.classList.toggle(\"dol\", !isDark);\n\n\t\t\t// Apply filters and save results\n\t\t\t// ---------------------------------\n\t\t\t// imgdata = this._ctx.getImageData(0, 0, this.el.width, this.el.height);\n\t\t\t// imgdata = multiply(imgdata, (isDark ? 1 - FILTER_MULTIPLY : 1 + FILTER_MULTIPLY));\n\t\t\t// imgdata = desaturate(imgdata, 0.5);\n\n\t\t\timgdata = multiply(imgdata, 1 + FILTER_MULTIPLY);\n\t\t\timgdata = stackBlurRGB(imgdata, FILTER_RADIUS);\n\t\t\t// imgdata = null;\n\n\t\t\tthis._imageData = imgdata;\n\t\t\tthis._imageDataTC = tc;\n\t\t},\n\n\t\t/** @override */\n\t\tredraw: function(ctx, intrp, flags) {\n\t\t\tthis._clearCanvas();\n\n\t\t\tif (this._symbolName === 'waiting') {\n\t\t\t\tif (intrp.getTargetValue('_arc') === 0) {\n\t\t\t\t\tintrp.valueTo('_arc', 1, 0 * INTEP_MS, easeIn)\n\t\t\t\t\t\t.updateValue('_arc');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (intrp.getTargetValue('_arc') === 1) {\n\t\t\t\t\tintrp.valueTo('_arc', 0, 0 * INTEP_MS, easeOut)\n\t\t\t\t\t\t.updateValue('_arc');\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar a = intrp.getRenderedValue(\"_arc\");\n\t\t\t// while arc is > 0, loop indefinitely while spinning and restart\n\t\t\t// if at end. Otherwise let interp exhaust arc duration\n\t\t\tif (a > 0) {\n\t\t\t\tif (!intrp.paused && intrp.isAtTarget('_loop')) {\n\t\t\t\t\t// console.log(\"%s::redraw [loop]\", this.cid, this.parentView.cid);\n\t\t\t\t\tintrp\n\t\t\t\t\t\t.valueTo('_loop', 0, 0)\n\t\t\t\t\t\t.valueTo('_loop', 1, 2 * INTEP_MS)\n\t\t\t\t\t\t.updateValue('_loop');\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar l = intrp.getRenderedValue(\"_loop\");\n\n\t\t\t// if (this._isImageDataInvalid) {\n\t\t\t// \tthis._isImageDataInvalid = false;\n\t\t\t// \tthis._updateImageData();\n\t\t\t// }\n\t\t\t// if (this._imageData !== null) {\n\t\t\t// \tctx.putImageData(this._imageData, 0, 0);\n\t\t\t// }\n\n\t\t\t// always render while arc is > 0\n\t\t\tif (a > 0) {\n\t\t\t\t// arc span bounce\n\t\t\t\tvar b = (l < 0.5 ? (l % 0.5) : 0.5 - (l % 0.5)) * 2;\n\t\t\t\t// bounce + main arc span\n\t\t\t\tvar aa = (a * b * 0.25) + (a * 0.125) + .0001;\n\t\t\t\t// rotation loop\n\t\t\t\tvar ll = l + LOOP_OFFSET;\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(0, 0, this._radius, ((1 - aa) + ll) * PI2, (aa + ll) * PI2, false);\n\t\t\t\tctx.stroke();\n\t\t\t}\n\n\t\t\tswitch (this._symbolName) {\n\t\t\t\tcase \"replay\":\n\t\t\t\tcase \"ended\":\n\t\t\t\tcase \"play\":\n\t\t\t\t\t// this.drawPlay(ctx, (1 - a) * s);\n\t\t\t\t\tthis.drawPlay(ctx, this._side);\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"pause\":\n\t\t\t\t\t// this.drawPause(ctx, (1 - a) * s);\n\t\t\t\t\tthis.drawPause(ctx, this._side);\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"waiting\":\n\t\t\t\t\tswitch (this._lastSymbolName) {\n\t\t\t\t\t\tcase \"replay\":\n\t\t\t\t\t\tcase \"ended\":\n\t\t\t\t\t\tcase \"play\":\n\t\t\t\t\t\t\tthis.drawPlay(ctx, (1 - a) * this._side);\n\t\t\t\t\t\t\tctx.fill();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"pause\":\n\t\t\t\t\t\t\tthis.drawPause(ctx, (1 - a) * this._side);\n\t\t\t\t\t\t\tctx.fill();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\tdrawPlay: function(ctx, r) {\n\t\t\tvar tx = (1 - Math.SQRT1_2) * r;\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(tx + r, 0);\n\t\t\tctx.lineTo(tx - r, -r);\n\t\t\tctx.lineTo(tx - r, r);\n\t\t\tctx.closePath();\n\t\t},\n\n\t\tdrawPause: function(ctx, r) {\n\t\t\tvar w = r * 0.75;\n\t\t\tvar h = r * 2;\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(-r, -r, w, h);\n\t\t\tctx.rect(r - w, -r, w, h);\n\t\t\tctx.closePath();\n\t\t},\n\n\t\tdrawLabel: function(labelString) {\n\t\t\tvar labelWidth = this._ctx.measureText(labelString).width;\n\t\t\tthis._ctx.fillText(labelString,\n\t\t\t\tlabelWidth * -0.5,\n\t\t\t\t// 0, labelWidth);\n\t\t\t\tthis._baselineShift, labelWidth);\n\t\t},\n\t},\n\tPlayToggleSymbol);\n",
    "/**\n * @module app/view/component/SelectableListView\n */\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n\n/** @type {module:backbone.babysitter} */\nconst Container = require(\"backbone.babysitter\");\n/** @type {module:app/view/component/DefaultSelectableRenderer} */\nconst DefaultSelectableRenderer = require(\"app/view/render/DefaultSelectableRenderer\");\n/** @type {module:app/view/component/ClickableRenderer} */\nconst ClickableRenderer = require(\"app/view/render/ClickableRenderer\");\n\nvar SelectableListView = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"selectableList\",\n\n\t/** @override */\n\ttagName: \"ul\",\n\n\t/** @override */\n\tclassName: \"list selectable\",\n\n\t/** @type {module:app/view/component/DefaultSelectableRenderer} */\n\trenderer: DefaultSelectableRenderer,\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tthis._enabled = true;\n\t\tthis._childrenInvalid = true;\n\n\t\toptions.renderer && (this.renderer = options.renderer);\n\t\tthis.showEmpty = !!options.showEmpty;\n\t\tthis.itemViews = new Container();\n\n\t\tthis.listenTo(this.collection, \"add remove reset\", this._onCollectionChange);\n\t},\n\n\t/** @override */\n\tremove: function() {\n\t\tthis.removeChildren();\n\t\tView.prototype.remove.apply(this, arguments);\n\t\treturn this;\n\t},\n\n\t_onCollectionChange: function(ev) {\n\t\tthis._childrenInvalid = true;\n\t\tthis.render();\n\t},\n\n\t/** @override */\n\trender: function() {\n\t\tif (this._childrenInvalid) {\n\t\t\tthis._childrenInvalid = false;\n\t\t\tthis.createChildren();\n\t\t}\n\t\treturn this;\n\t},\n\n\t/** @override */\n\tsetEnabled: function(enabled) {\n\t\tif (this._enabled !== enabled) {\n\t\t\tthis._enabled = enabled;\n\t\t\tthis.el.classList.toggle(\"disabled\", !this._enabled);\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Child views\n\t/* --------------------------- */\n\n\tcreateChildren: function() {\n\t\tvar eltBuffer, view;\n\n\t\tthis.removeChildren();\n\t\tthis.el.innerHTML = \"\";\n\n\t\tif (this.collection.length) {\n\t\t\teltBuffer = document.createDocumentFragment();\n\t\t\tif (this.showEmpty) {\n\t\t\t\tview = this.createEmptyView();\n\t\t\t\teltBuffer.appendChild(view.render().el);\n\t\t\t}\n\t\t\tthis.collection.each(function(model, index, arr) {\n\t\t\t\tview = this.createItemView(model, index);\n\t\t\t\teltBuffer.appendChild(view.render().el);\n\t\t\t}, this);\n\t\t\tthis.el.appendChild(eltBuffer);\n\t\t}\n\t},\n\n\tcreateItemView: function(model, index) {\n\t\tvar view = new(this.renderer)({\n\t\t\tmodel: model\n\t\t});\n\t\tthis.itemViews.add(view);\n\t\tthis.listenTo(view, \"renderer:click\", this.onItemViewClick);\n\t\treturn view;\n\t},\n\n\tremoveChildren: function() {\n\t\tthis.itemViews.each(this.removeItemView, this);\n\t},\n\n\tremoveItemView: function(view) {\n\t\tthis.stopListening(view);\n\t\tthis.itemViews.remove(view);\n\t\tview.remove();\n\t\treturn view;\n\t},\n\n\t/* --------------------------- *\n\t/* Child event handlers\n\t/* --------------------------- */\n\n\t/** @private */\n\tonItemViewClick: function(item) {\n\t\tif (this.collection.selected !== item && this._enabled) {\n\t\t\tthis.trigger(\"view:select:one\", item);\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* Empty view\n\t/* --------------------------- */\n\n\tcreateEmptyView: function() {\n\t\tvar view = new SelectableListView.EmptyRenderer({\n\t\t\tmodel: this.collection\n\t\t});\n\t\tthis.itemViews.add(view);\n\t\tthis.listenTo(view, \"renderer:click\", function() {\n\t\t\tthis._enabled && this.trigger(\"view:select:none\");\n\t\t});\n\t\treturn view;\n\t},\n}, {\n\tEmptyRenderer: ClickableRenderer.extend({\n\n\t\t/** @override */\n\t\ttagName: \"li\",\n\t\t/** @override */\n\t\tclassName: \"list-item empty-item\",\n\n\t\t/** @override */\n\t\tinitialize: function(options) {\n\t\t\tthis.listenTo(this.model, \"selected deselected\", this.renderClassList);\n\t\t\tthis.renderClassList();\n\t\t},\n\n\t\t/** @override */\n\t\trender: function() {\n\t\t\tthis.el.innerHTML = \"<a href=\\\"#clear\\\"><b> </b></a>\";\n\t\t\tthis.renderClassList();\n\t\t\treturn this;\n\t\t},\n\n\t\trenderClassList: function() {\n\t\t\tthis.el.classList.toggle(\"selected\", this.model.selectedIndex === -1);\n\t\t},\n\t})\n});\n\nmodule.exports = SelectableListView;\n",
    "/** @type {Function} */\nconst Color = require(\"color\");\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/model/collection/BundleCollection} */\nconst bundles = require(\"app/model/collection/BundleCollection\");\n\n// - - - - - - - - - - - - - - - -\n//  utils\n// - - - - - - - - - - - - - - - -\n\nfunction insertCSSRule(sheet, selector, style) {\n\tvar cssText = \"\";\n\tfor (var prop in style) {\n\t\tcssText += prop + \":\" + style[prop] + \";\";\n\t}\n\tsheet.insertRule(selector + \"{\" + cssText + \"}\", sheet.cssRules.length);\n}\n\nfunction selfAndDescendant(selfCls, cls) {\n\treturn selfCls + \" \" + cls + \", \" + selfCls + cls;\n}\n\n// - - - - - - - - - - - - - - - -\n//  root rules\n// - - - - - - - - - - - - - - - -\n\nvar rootStyles = [\n\t\"color\",\n\t\"background\",\n\t\"background-color\",\n\t// \"--link-color\"\n];\n\nfunction initRootStyles(sheet, rootSelector, attrs, fgColor, bgColor, lnColor, hasDarkBg) {\n\tvar s, revSelector, fgColorVal, bgColorVal;\n\t// var revFgColorVal, revBgColorVal;\n\n\ts = _.pick(attrs, rootStyles);\n\t// s[\"-webkit-font-smoothing\"] = (hasDarkBg ? \"antialiased\" : \"auto\");\n\t/* NOTE: In Firefox '-moz-osx-font-smoothing: grayscale;'\n\t/* works both in light over dark and dark over light, hardcoded in _base.scss */\n\t//s[\"-moz-osx-font-smoothing\"] = (hasDarkBg? \"grayscale\" : \"auto\");\n\tinsertCSSRule(sheet, rootSelector, s);\n\n\t// A element\n\t// - - - - - - - - - - - - - - - -\n\ts = {}\n\ts[\"color\"] = lnColor.rgb().string();\n\tinsertCSSRule(sheet, rootSelector + \" a\", s);\n\tinsertCSSRule(sheet, rootSelector + \" .color-ln\", s);\n\n\t// .color-fg05\n\t// - - - - - - - - - - - - - - - -\n\ts = {};\n\ts[\"color\"] = Color(fgColor).mix(bgColor, 0.5).rgb().string();\n\ts[\"border-color\"] = Color(fgColor).mix(bgColor, 0.3).rgb().string();\n\tinsertCSSRule(sheet, rootSelector + \" .color-fg05\", s);\n\n\tfgColorVal = fgColor.rgb().string();\n\tbgColorVal = bgColor.rgb().string();\n\t// revFgColorVal = Color(bgColor).mix(fgColor, 0.9).rgb().string();\n\t// revBgColorVal = Color(fgColor).mix(bgColor, 0.6).rgb().string();\n\trevSelector = rootSelector + \" .color-reverse\";\n\n\t// .color-fg .color-bg\n\t// - - - - - - - - - - - - - - - -\n\ts = {\n\t\t\"color\": fgColorVal\n\t};\n\tinsertCSSRule(sheet, rootSelector + \" .color-fg\", s);\n\ts = {\n\t\t\"background-color\": bgColorVal\n\t};\n\tinsertCSSRule(sheet, rootSelector + \" .color-bg\", s);\n\t// html inverted text/background\n\ts = {\n\t\t\"color\": bgColorVal\n\t}; // s = { \"color\" : revFgColorVal };\n\t// s[\"-webkit-font-smoothing\"] = (hasDarkBg ? \"auto\" : \"antialiased\");\n\t// insertCSSRule(sheet, revSelector + \" .color-fg\", s);\n\t// insertCSSRule(sheet, revSelector + \".color-fg\", s);\n\tinsertCSSRule(sheet, selfAndDescendant(revSelector, \".color-fg\"), s);\n\n\ts = {\n\t\t\"background-color\": fgColorVal\n\t};\n\t// s = { \"background-color\" : revBgColorVal };\n\t// insertCSSRule(sheet, revSelector + \" .color-bg\", s);\n\t// insertCSSRule(sheet, revSelector + \".color-bg\", s);\n\tinsertCSSRule(sheet, selfAndDescendant(revSelector, \".color-bg\"), s);\n\n\t// .color-stroke .color-fill (SVG)\n\t// - - - - - - - - - - - - - - - -\n\ts = {\n\t\t\"stroke\": fgColorVal\n\t};\n\tinsertCSSRule(sheet, rootSelector + \" .color-stroke\", s);\n\ts = {\n\t\t\"fill\": bgColorVal\n\t};\n\tinsertCSSRule(sheet, rootSelector + \" .color-fill\", s);\n\t// svg inverted fill/stroke\n\ts = {\n\t\t\"stroke\": bgColorVal\n\t};\n\t// insertCSSRule(sheet, revSelector + \" .color-stroke\", s);\n\t// insertCSSRule(sheet, revSelector + \".color-stroke\", s);\n\tinsertCSSRule(sheet, selfAndDescendant(revSelector, \".color-stroke\"), s);\n\ts = {\n\t\t\"fill\": fgColorVal\n\t};\n\t// insertCSSRule(sheet, revSelector + \" .color-fill\", s);\n\t// insertCSSRule(sheet, revSelector + \".color-fill\", s);\n\tinsertCSSRule(sheet, selfAndDescendant(revSelector, \".color-fill\"), s);\n\n\t// .text-outline\n\t// - - - - - - - - - - - - - - - -\n\t// s = {\n\t// \t\"text-shadow\": \"-1px -1px 0 \" + bgColorVal +\n\t// \t\t\", 1px -1px 0 \" + bgColorVal +\n\t// \t\t\", -1px 1px 0 \" + bgColorVal +\n\t// \t\t\", 1px 1px 0 \" + bgColorVal\n\t// };\n\t// insertCSSRule(sheet, rootSelector + \" :not(..collapsed-changing) .text-outline-bg\", s);\n\n}\n\n// - - - - - - - - - - - - - - - -\n// carousel styles\n// - - - - - - - - - - - - - - - -\n\nvar carouselStyles = [\"box-shadow\", \"border\", \"border-radius\"];\n\nfunction initCarouselStyles(sheet, carouselSelector, attrs, fgColor, bgColor, lnColor, hasDarkBg) {\n\tvar s = _.pick(attrs, carouselStyles); //, \"background-color\"]);\n\tinsertCSSRule(sheet, carouselSelector + \" .media-item .content\", s);\n\n\t// .media-item .color-bg09\n\t// - - - - - - - - - - - - - - - -\n\ts = {};\n\ts[\"background-color\"] = Color(bgColor).mix(fgColor, 0.05).rgb().string();\n\t// s[\"background-color\"] = Color(bgColor)[hasDarkBg ? \"darken\" : \"lighten\"](0.045).rgb().string();\n\t// s[\"background-color\"] = Color(bgColor)[hasDarkBg ? \"lighten\" : \"darken\"](0.03).rgb().string();\n\tinsertCSSRule(sheet, carouselSelector + \" .media-item .color-bg09\", s);\n\n\t// .media-item .placeholder\n\t// - - - - - - - - - - - - - - - -\n\ts = {};\n\t// s[\"-webkit-font-smoothing\"] = (hasDarkBg ? \"auto\" : \"antialiased\");\n\t// text color luminosity is inverse from body, apply oposite rendering mode\n\ts[\"color\"] = bgColor.rgb().string();\n\t// s[\"color\"] = Color(bgColor)[hasDarkBg ? \"darken\" : \"lighten\"](0.045).rgb().string();\n\ts[\"background-color\"] = Color(bgColor).mix(fgColor, 0.05).rgb().string();\n\t// s[\"background-color\"] = Color(bgColor).mix(fgColor, 0.8).alpha(0.3).rgba().string();\n\t// s[\"background-color\"] = Color(bgColor)[hasDarkBg ? \"lighten\" : \"darken\"](0.03).rgb().string();\n\t(\"border-radius\" in attrs) && (s[\"border-radius\"] = attrs[\"border-radius\"]);\n\tinsertCSSRule(sheet, carouselSelector + \" .media-item .placeholder\", s);\n\n\t// .image-item img\n\t// .sequence-item .sequence-step\n\t// - - - - - - - - - - - - - - - -\n\ts = {};\n\ts[\"background-color\"] = bgColor.rgb().string();\n\tinsertCSSRule(sheet, carouselSelector + \" .image-item img\", s);\n\tinsertCSSRule(sheet, carouselSelector + \" .sequence-item .sequence-step\", s);\n\n\t// .empty-item A\n\t// - - - - - - - - - - - - - - - -\n\ts = {};\n\ts[\"text-decoration-color\"] = Color(fgColor).mix(bgColor, 0.7).rgb().string();\n\tinsertCSSRule(sheet, carouselSelector + \" .empty-item A\", s);\n\t// // .color-gradient\n\t// // - - - - - - - - - - - - - - - -\n\t// s = {};\n\t// s[\"background-color\"] = \"transparent\";\n\t// s[\"background\"] = \"linear-gradient(to bottom, \" +\n\t// \t\tColor(bgColor).alpha(0.00).rgba().string() + \" 0%, \" +\n\t// \t\tColor(bgColor).alpha(0.11).rgba().string() + \" 100%)\";\n\t// insertCSSRule(sheet, rootSelector + \" .color-gradient\", s);\n\t// s = {};\n\t// s[\"background-color\"] = \"transparent\";\n\t// s[\"background\"] = \"linear-gradient(to bottom, \" +\n\t// \t\tColor(fgColor).alpha(0.00).rgba().string() + \" 0%, \" +\n\t// \t\tColor(fgColor).alpha(0.11).rgba().string() + \" 100%)\";\n\t// insertCSSRule(sheet, revSelector + \" .color-gradient\", s);\n\t// insertCSSRule(sheet, revSelector + \".color-gradient\", s);\n}\n\nmodule.exports = function() {\n\tvar attrs, fgColor, bgColor, lnColor, hasDarkBg;\n\n\tattrs = Globals.DEFAULT_COLORS;\n\tfgColor = new Color(Globals.DEFAULT_COLORS[\"color\"]);\n\tbgColor = new Color(Globals.DEFAULT_COLORS[\"background-color\"]);\n\tlnColor = new Color(Globals.DEFAULT_COLORS[\"link-color\"])\n\thasDarkBg = fgColor.luminosity() > bgColor.luminosity();\n\n\tvar colorStyles = document.createElement(\"style\");\n\tcolorStyles.id = \"colors\";\n\tcolorStyles.type = \"text/css\";\n\tdocument.head.appendChild(colorStyles);\n\t// var colorStyles = document.querySelector(\"link#folio\");\n\n\tinitRootStyles(colorStyles.sheet, \".app\",\n\t\tattrs, fgColor, bgColor, lnColor, hasDarkBg);\n\tinitCarouselStyles(colorStyles.sheet, \".carousel\",\n\t\tattrs, fgColor, bgColor, lnColor, hasDarkBg);\n\n\t// - - - - - - - - - - - - - - - -\n\t// per-bundle rules\n\t// - - - - - - - - - - - - - - - -\n\tbundles.each(function(bundle) {\n\t\tattrs = bundle.attrs(); //get(\"attrs\");\n\t\tfgColor = bundle.colors.fgColor;\n\t\tbgColor = bundle.colors.bgColor;\n\t\tlnColor = bundle.colors.lnColor;\n\t\thasDarkBg = bundle.colors.hasDarkBg;\n\n\t\tinitRootStyles(colorStyles.sheet,\n\t\t\t\".app.\" + bundle.get(\"domid\"),\n\t\t\tattrs, fgColor, bgColor, lnColor, hasDarkBg);\n\t\tinitCarouselStyles(colorStyles.sheet,\n\t\t\t\".carousel.\" + bundle.get(\"domid\"),\n\t\t\tattrs, fgColor, bgColor, lnColor, hasDarkBg);\n\t});\n};\n",
    "// /** @type {module:underscore.string/lpad} */\n// var classify = require(\"underscore.string/classify\");\n\n// var statusMsg = _.template(\"<%= status %> received from <%= url %> (<%= statusText %>)\");\n// var errMsg = _.template(\"'<%= errName %>' ocurred during request <%= url %>\");\n\nif (window.XMLHttpRequest && window.URL && window.Blob) {\n\tmodule.exports = function(url, progressFn) {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tvar request = new XMLHttpRequest();\n\t\t\trequest.open(\"GET\", url, true);\n\t\t\t// request.timeout = 10000; // in milliseconds\n\t\t\trequest.responseType = \"blob\";\n\n\t\t\tvar errorFromEvent = function(ev) {\n\t\t\t\tvar err = new Error((ev.target.status > 0 ?\n\t\t\t\t\t\"http_\" + request.statusText.replace(/\\s/g, \"_\") :\n\t\t\t\t\tev.type + \"_event\").toUpperCase());\n\t\t\t\terr.logMessage = \"_loadImageAsObjectURL::\" + ev.type + \" [reject]\";\n\t\t\t\terr.infoCode = ev.target.status;\n\t\t\t\terr.infoSrc = url;\n\t\t\t\terr.logEvent = ev;\n\t\t\t\treturn err;\n\t\t\t};\n\t\t\t// if progressFn is supplied\n\t\t\t// - - - - - - - - - - - - - - - - - -\n\t\t\tif (progressFn) {\n\t\t\t\trequest.onprogress = function(ev) {\n\t\t\t\t\tprogressFn(ev.loaded / ev.total, request);\n\t\t\t\t};\n\t\t\t}\n\t\t\t// resolved/success\n\t\t\t// - - - - - - - - - - - - - - - - - -\n\t\t\trequest.onload = function(ev) {\n\t\t\t\t// When the request loads, check whether it was successful\n\t\t\t\tif (request.status == 200) {\n\t\t\t\t\t// If successful, resolve the promise by passing back a reference url\n\t\t\t\t\tresolve(URL.createObjectURL(request.response));\n\t\t\t\t} else {\n\t\t\t\t\treject(errorFromEvent(ev));\n\t\t\t\t}\n\t\t\t};\n\t\t\t// normal abort\n\t\t\t// - - - - - - - - - - - - - - - - - -\n\t\t\trequest.onabort = function(ev) {\n\t\t\t\tresolve(void 0);\n\t\t\t};\n\t\t\t// reject/failure\n\t\t\t// - - - - - - - - - - - - - - - - - -\n\t\t\trequest.onerror = function(ev) {\n\t\t\t\treject(errorFromEvent(ev));\n\t\t\t};\n\t\t\trequest.ontimeout = request.onerror;\n\n\t\t\t// finally\n\t\t\t// - - - - - - - - - - - - - - - - - -\n\t\t\trequest.onloadend = function(ev) {\n\t\t\t\t//console.log(\"_loadImageAsObjectURL::%s [cleanup] (%s)\", ev ? ev.type : \"no event\", url);\n\t\t\t\trequest.onabort = request.ontimeout = request.onerror = void 0;\n\t\t\t\trequest.onload = request.onloadend = void 0;\n\t\t\t\tif (progressFn) {\n\t\t\t\t\trequest.onprogress = void 0;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\trequest.send();\n\t\t});\n\t};\n} else {\n\tmodule.exports = function(url, progressFn) {\n\t\treturn Promise.resolve(url);\n\t};\n}\n",
    "module.exports = function(image, resolveEmpty) {\n\treturn new Promise(function(resolve, reject) {\n\t\tif (!(image instanceof window.HTMLImageElement)) {\n\t\t\t//reject(new Error(\"not an HTMLImageElement\"));\n\t\t\treject(\"Error: not an HTMLImageElement\");\n\t\t} else if (image.complete && (image.src.length > 0 || resolveEmpty)) {\n\t\t\t// if (image.src === \"\") console.warn(\"_whenImageLoads resolved with empty src\");\n\t\t\t// else console.log(\"_whenImageLoads resolve-sync\", image.src);\n\t\t\tresolve(image);\n\t\t} else {\n\t\t\tvar handlers = {\n\t\t\t\tload: function(ev) {\n\t\t\t\t\t// console.log(\"_whenImageLoads_dom resolve-async\", ev.type, image.src);\n\t\t\t\t\tremoveEventListeners();\n\t\t\t\t\tresolve(image);\n\t\t\t\t},\n\t\t\t\terror: function(ev) {\n\t\t\t\t\tvar err = new Error(\"Loading failed (\" + ev.type + \" event)\");\n\t\t\t\t\terr.infoCode = -1;\n\t\t\t\t\terr.infoSrc = image.src;\n\t\t\t\t\terr.logEvent = ev;\n\t\t\t\t\terr.logMessage = \"_whenImageLoads::\" + ev.type + \" [reject]\";\n\t\t\t\t\tremoveEventListeners();\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t};\n\t\t\thandlers.abort = handlers.error;\n\t\t\tvar removeEventListeners = function() {\n\t\t\t\tfor (var event in handlers) {\n\t\t\t\t\tif (handlers.hasOwnProperty(event)) {\n\t\t\t\t\t\timage.removeEventListener(event, handlers[event], false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tfor (var event in handlers) {\n\t\t\t\tif (handlers.hasOwnProperty(event)) {\n\t\t\t\t\timage.addEventListener(event, handlers[event], false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n};\n",
    "/** @type {module:app/view/promise/_whenImageLoads} */\nconst _whenImageLoads = require(\"app/view/promise/_whenImageLoads\");\n/** @type {module:app/view/promise/_loadImageAsObjectURL} */\nconst _loadImageAsObjectURL = require(\"app/view/promise/_loadImageAsObjectURL\");\n\n// var isBlobRE = /^blob\\:.*/;\n\n// var logMessage = \"%s::whenDefaultImageLoads [%s]: %s\";\n\nmodule.exports = function(view) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar source = view.model.get(\"source\");\n\t\tif (source.has(\"prefetched\")) {\n\t\t\tview.defaultImage.src = source.get(\"prefetched\");\n\t\t\t_whenImageLoads(view.defaultImage)\n\t\t\t\t.then(\n\t\t\t\t\tfunction(targetEl) {\n\t\t\t\t\t\tresolve(view);\n\t\t\t\t\t});\n\t\t} else {\n\t\t\tview.mediaState = \"pending\";\n\n\t\t\tvar sUrl = source.get(\"original\");\n\t\t\tvar progressFn = function(progress, ev) {\n\t\t\t\t// console.log(logMessage, view.cid, \"progress\", progress);\n\t\t\t\tview.updateMediaProgress(progress, sUrl);\n\t\t\t};\n\t\t\tprogressFn = _.throttle(progressFn, 100, {\n\t\t\t\tleading: true,\n\t\t\t\ttrailing: false\n\t\t\t});\n\t\t\t_loadImageAsObjectURL(sUrl, progressFn)\n\t\t\t\t.then(\n\t\t\t\t\tfunction(url) {\n\t\t\t\t\t\tif (/^blob\\:.*/.test(url)) {\n\t\t\t\t\t\t\tsource.set(\"prefetched\", url);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tview.defaultImage.src = url;\n\t\t\t\t\t\treturn view.defaultImage;\n\t\t\t\t\t})\n\t\t\t\t.then(_whenImageLoads)\n\t\t\t\t.then(\n\t\t\t\t\tfunction(targetEl) {\n\t\t\t\t\t\tview.on(\"view:removed\", function() {\n\t\t\t\t\t\t\tvar prefetched = source.get(\"prefetched\");\n\t\t\t\t\t\t\tif (prefetched && /^blob\\:/.test(prefetched)) {\n\t\t\t\t\t\t\t\tsource.unset(\"prefetched\", { silent: true });\n\t\t\t\t\t\t\t\tURL.revokeObjectURL(prefetched);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresolve(view);\n\t\t\t\t\t},\n\t\t\t\t\tfunction(err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t});\n\t\t}\n\t});\n};\n",
    "/* global Promise */\n/** @type {module:app/view/base/ViewError} */\nconst ViewError = require(\"app/view/base/ViewError\");\n\n/** @type {module:app/view/base/ViewError} */\nconst whenViewIsAttached = require(\"app/view/promise/whenViewIsAttached\");\n\nfunction whenScrollingEnds(view) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar parent = view.parentView;\n\t\tif (parent === null) {\n\t\t\tconsole.error(\"%s::whenScrollingEnds [%s] (sync)\", view.cid, \"rejected\", view.attached);\n\t\t\treject(new ViewError(view, new Error(\"whenScrollingEnds: view has no parent\")));\n\t\t} else if (!parent.scrolling) {\n\t\t\t// console.log(\"%s::whenScrollingEnds [%s] (sync)\", view.cid, \"resolved\", view.attached);\n\t\t\tresolve(view);\n\t\t} else {\n\t\t\tvar cleanup = function() {\n\t\t\t\tparent.off(\"view:scrollend\", onScrollend);\n\t\t\t\tparent.off(\"view:remove\", onRemove);\n\t\t\t};\n\t\t\tvar onScrollend = function() {\n\t\t\t\t// console.log(\"%s::whenScrollingEnds [%s]\", view.cid, \"resolved\", view.attached);\n\t\t\t\tcleanup();\n\t\t\t\tresolve(view);\n\t\t\t};\n\t\t\tvar onRemove = function() {\n\t\t\t\t// console.log(\"%s::whenScrollingEnds [%s]\", view.cid, \"rejected\", view.attached);\n\t\t\t\tcleanup();\n\t\t\t\treject(new ViewError(view, new Error(\"whenScrollingEnds: view was removed\")));\n\t\t\t};\n\t\t\tparent.on(\"view:scrollend\", onScrollend);\n\t\t\tparent.on(\"view:remove\", onRemove);\n\t\t}\n\t});\n}\n\nmodule.exports = function(view) {\n\treturn Promise.resolve(view)\n\t\t.then(whenViewIsAttached)\n\t\t.then(whenScrollingEnds);\n};\n\n/*\nmodule.exports = function(view) {\n\treturn Promise.resolve(view)\n\t\t.then(function(view) {\n\t\t\tif (view.attached) {\n\t\t\t\treturn view;\n\t\t\t} else {\n\t\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t\tview.once(\"view:attached\", function(view) {\n\t\t\t\t\t\tresolve(view);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t\t.then(function(view) {\n\t\t\tif (!view.parentView.scrolling) {\n\t\t\t\treturn view;\n\t\t\t} else {\n\t\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t\tvar resolveOnScrollend = function() {\n\t\t\t\t\t\t// console.log(\"%s::whenScrollingEnds [%s]\", view.cid, \"resolved\");\n\t\t\t\t\t\tview.off(\"view:remove\", rejectOnRemove);\n\t\t\t\t\t\tresolve(view);\n\t\t\t\t\t};\n\t\t\t\t\tvar rejectOnRemove = function(view) {\n\t\t\t\t\t\t// console.log(\"%s::whenScrollingEnds [%s]\", view.cid, \"rejected\");\n\t\t\t\t\t\tview.parentView.off(\"view:scrollend\", resolveOnScrollend);\n\t\t\t\t\t\treject(new ViewError(view,\n\t\t\t\t\t\t\tnew Error(\"whenSelectScrollingEnds: view was removed (\"+ view.cid +\")\")));\n\t\t\t\t\t};\n\t\t\t\t\tview.parentView.once(\"view:scrollend\", resolveOnScrollend);\n\t\t\t\t\tview.once(\"view:remove\", rejectOnRemove);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n};\n*/\n",
    "/** @type {module:app/view/base/ViewError} */\nconst ViewError = require(\"app/view/base/ViewError\");\n\n// var logMessage = \"%s::whenSelectionDistanceIs [%s]: %s\";\n\n/**\n * @param {module:app/view/base/View}\n * @param {number} distance\n */\nmodule.exports = function(view, distance) {\n\treturn new Promise(function(resolve, reject) {\n\t\t// if (!(view.model && view.model.collection)) {\n\t\t// \treject(new ViewError(view, new Error(\"whenSelectionIsContiguous: model.collection is empty\")));\n\t\t// }\n\t\tvar model = view.model;\n\t\tvar collection = model.collection;\n\n\t\tvar check = function(n) { // Check indices for contiguity\n\t\t\treturn Math.abs(collection.indexOf(model) - collection.selectedIndex) <= distance;\n\t\t};\n\n\t\tif (check()) {\n\t\t\t// console.log(logMessage, view.cid, \"resolve\", \"sync\");\n\t\t\tresolve(view);\n\t\t} else {\n\t\t\tvar cleanupOnSettle = function() {\n\t\t\t\t// console.log(logMessage, view.cid, \"cleanup\", \"async\");\n\t\t\t\tcollection.off(\"select:one select:none\", resolveOnSelect);\n\t\t\t\tview.off(\"view:removed\", rejectOnRemove);\n\t\t\t};\n\t\t\tvar resolveOnSelect = function(model) {\n\t\t\t\tif (check()) {\n\t\t\t\t\t// console.log(logMessage, view.cid, \"resolve\", \"async\");\n\t\t\t\t\tcleanupOnSettle();\n\t\t\t\t\tresolve(view);\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar rejectOnRemove = function(view) {\n\t\t\t\tcleanupOnSettle();\n\t\t\t\treject(new ViewError(view, new Error(\"whenSelectionDistanceIs: view was removed\")));\n\t\t\t};\n\t\t\tcollection.on(\"select:one select:none\", resolveOnSelect);\n\t\t\tview.on(\"view:removed\", rejectOnRemove);\n\t\t}\n\t});\n};\n",
    "// /** @type {module:app/view/base/ViewError} */\n// var ViewError = require(\"app/view/base/ViewError\");\n\n/** @type {module:app/view/promise/whenSelectionDistanceIs} */\nconst whenSelectionDistanceIs = require(\"app/view/promise/whenSelectionDistanceIs\");\n\n/** @param {module:app/view/base/View} */\nmodule.exports = function(view) {\n\treturn whenSelectionDistanceIs(view, 1);\n};\n",
    "module.exports = function(view) {\n\treturn new Promise(function(resolve, reject) {\n\t\tif (view.attached) {\n\t\t\tresolve(view);\n\t\t} else {\n\t\t\tview.on(\"view:attached\", function(view) {\n\t\t\t\tresolve(view);\n\t\t\t});\n\t\t}\n\t});\n};\n",
    "module.exports = function(view) {\n\treturn new Promise(function(resolve, reject) {\n\t\tif (!view.invalidated) {\n\t\t\tresolve(view);\n\t\t} else {\n\t\t\tview.once(\"view:render:after\", function(view, flags) {\n\t\t\t\tresolve(view);\n\t\t\t});\n\t\t}\n\t});\n};\n",
    "/**\n * @module app/view/render/CarouselRenderer\n */\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n\n/** @type {module:underscore} */\nconst getBoxEdgeStyles = require(\"utils/css/getBoxEdgeStyles\");\n\n// FIXME: this fixup should not be done here\n// /** @type {module:utils/net/toAbsoluteURL} */\n// var toAbsoluteURL = require(\"utils/net/toAbsoluteURL\");\n// /** @type {string} */\n// var ABS_APP_ROOT = toAbsoluteURL(require(\"app/control/Globals\").APP_ROOT);\n\n/**\n * @constructor\n * @type {module:app/view/render/CarouselRenderer}\n */\nvar CarouselRenderer = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"carouselRenderer\",\n\t/** @override */\n\ttagName: \"div\",\n\t/** @override */\n\tclassName: \"carousel-item\",\n\t/** @override */\n\ttemplate: _.template(\"<div class=\\\"content sizing\\\"><%= name %></div>\"),\n\n\tproperties: {\n\t\tcontent: {\n\t\t\tget: function() {\n\t\t\t\treturn this._content || (this._content = this.el.querySelector(\".content\"));\n\t\t\t},\n\t\t},\n\t\tsizing: {\n\t\t\tget: function() {\n\t\t\t\treturn this._sizing || (this._sizing = this.el.querySelector(\".sizing\"));\n\t\t\t},\n\t\t}\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tif (this.model.attr(\"@classname\") !== void 0) {\n\t\t\tvar clsAttr = this.model.attr(\"@classname\").split(\" \");\n\t\t\tfor (var i = 0; i < clsAttr.length; i++) {\n\t\t\t\tthis.el.classList.add(clsAttr[i]);\n\t\t\t}\n\t\t}\n\t\toptions.parentView && (this.parentView = options.parentView);\n\t\tthis.metrics = {};\n\t\tthis.metrics.content = {};\n\t\tthis.createChildren();\n\t\t// this.enabled = !!options.enabled; // force bool\n\t\tthis.setEnabled(!!options.enabled);\n\t},\n\n\tcreateChildren: function() {\n\t\tthis.el.innerHTML = this.template(this.model.toJSON());\n\t\t// FIXME: this fixup should not be done here\n\t\t// FIXED: now done in xslt\n\t\t/*this.el.querySelectorAll(\"a[href]\").forEach(function(el) {\n\t\t\tvar url = toAbsoluteURL(el.getAttribute(\"href\"));\n\t\t\tif (url.indexOf(ABS_APP_ROOT) !== 0) {\n\t\t\t\tel.setAttribute(\"target\", \"_blank\");\n\t\t\t}\n\t\t});*/\n\t},\n\n\t/** @return {HTMLElement} */\n\tgetSizingEl: function() {\n\t\treturn this._sizing || (this._sizing = this.el.querySelector(\".sizing\"));\n\t},\n\n\t/** @return {HTMLElement} */\n\tgetContentEl: function() {\n\t\treturn this._content || (this._content = this.el.querySelector(\".content\"));\n\t},\n\n\t/** @return {this} */\n\tmeasure: function() {\n\t\tvar sizing = this.getSizingEl();\n\n\t\tthis.metrics = getBoxEdgeStyles(this.el, this.metrics);\n\t\tthis.metrics.content = getBoxEdgeStyles(this.getContentEl(), this.metrics.content);\n\n\t\tsizing.style.maxWidth = \"\";\n\t\tsizing.style.maxHeight = \"\";\n\n\t\tthis.metrics.content.x = sizing.offsetLeft + sizing.clientLeft;\n\t\tthis.metrics.content.y = sizing.offsetTop + sizing.clientTop;\n\t\tthis.metrics.content.width = sizing.clientWidth;\n\t\tthis.metrics.content.height = sizing.clientHeight;\n\n\t\treturn this;\n\t},\n\n\t/** @override */\n\trender: function() {\n\t\tthis.measure();\n\t\treturn this;\n\t},\n\n\tgetSelectionDistance: function() {\n\t\treturn Math.abs(this.model.collection.indexOf(this.model) - this.model.collection.selectedIndex);\n\t},\n});\n\nmodule.exports = CarouselRenderer;\n",
    "/**\n * @module app/view/render/ClickableRenderer\n */\n\n/** @type {module:app/view/render/LabelRenderer} */\nconst LabelRenderer = require(\"app/view/render/LabelRenderer\");\n\n/**\n * @constructor\n * @type {module:app/view/render/ClickableRenderer}\n */\nvar ClickableRenderer = LabelRenderer.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"clickableRenderer\",\n\n\t// defaults: {\n\t// \ttarget: \".label\"\n\t// },\n\n\t/** @override */\n\tevents: {\n\t\t\"click .label\": function(ev) {\n\t\t\tif (ev.defaultPrevented) return;\n\n\t\t\tev.preventDefault();\n\t\t\tthis.trigger(\"renderer:click\", this.model, ev);\n\t\t},\n\t\t\"click a\": function(ev) {\n\t\t\tev.defaultPrevented || ev.preventDefault();\n\t\t}\n\t},\n\n\t// initialize: function(options) {\n\t// \toptions || (options = {});\n\t// \t// if (options) {\n\t// \toptions = _.defaults({}, options, _.result(this, 'defaults'));\n\t// \t// } else {\n\t// \t// \t _.defaults({}, _.result(this, 'defaults'));\n\t// \t// }\n\t// \tthis.events[\"click \" + options.target] = this.clickHandler;\n\t// },\n\t//\n\t// clickHandler: function(ev) {\n\t// \tif (ev.defaultPrevented) return;\n\t//\n\t// \tev.preventDefault();\n\t// \tthis.trigger(\"renderer:click\", this.model, ev);\n\t// }\n});\n\nmodule.exports = ClickableRenderer;\n",
    "\"use strict\";\n// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\";\n\n  return \"<a href=\\\"#\"\n    + container.escapeExpression(((helper = (helper = helpers.domid || (depth0 != null ? depth0.domid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"domid\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"><span class=\\\"label\\\">\"\n    + ((stack1 = ((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</span></a>\";\n},\"useData\":true});\n",
    "/**\n * @module app/view/render/DefaultSelectableRenderer\n */\n\n/** @type {module:app/view/component/ClickableRenderer} */\nconst ClickableRenderer = require(\"app/view/render/ClickableRenderer\");\n\n/**\n * @constructor\n * @type {module:app/view/render/DefaultSelectableRenderer}\n */\nvar DefaultSelectableRenderer = ClickableRenderer.extend({\n\n\t/** @override */\n\ttagName: \"li\",\n\t/** @override */\n\tclassName: \"list-item\",\n\t/** @override */\n\ttemplate: require(\"./DefaultSelectableRenderer.hbs\"),\n\n\tinitialize: function(options) {\n\t\tthis.listenTo(this.model, \"selected deselected\", this._renderClassList);\n\t\tthis._renderClassList();\n\t},\n\n\t/** @override */\n\trender: function() {\n\t\tthis.el.innerHTML = this.template(this.model.toJSON());\n\t\tthis._renderClassList();\n\t\treturn this;\n\t},\n\n\t_renderClassList: function() {\n\t\tthis.el.classList.toggle(\"selected\", this.model.selected);\n\t},\n});\n\nmodule.exports = DefaultSelectableRenderer;\n",
    "\"use strict\";\n// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<span class=\\\"label\\\">\"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span><a href=\\\"#\"\n    + alias4(((helper = (helper = helpers.domid || (depth0 != null ? depth0.domid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"domid\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"><b> </b></a>\";\n},\"useData\":true});\n",
    "/**\n * @module app/view/render/DotNavigationRenderer\n */\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n\n// /** @type {module:app/view/component/ClickableRenderer} */\n// var ClickableRenderer = require(\"app/view/render/LabelRenderer\");\n/** @type {string} */\nconst viewTemplate = require(\"./DotNavigationRenderer.hbs\");\n\n/**\n * @constructor\n * @type {module:app/view/render/DotNavigationRenderer}\n */\nvar DotNavigationRenderer = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"dotRenderer\",\n\t/** @override */\n\ttagName: \"li\",\n\t/** @override */\n\tclassName: \"list-item\",\n\t/** @override */\n\ttemplate: viewTemplate,\n\n\t/** @override */\n\tevents: {\n\t\t\"click\": function(ev) {\n\t\t\tif (ev.defaultPrevented) return;\n\n\t\t\tev.preventDefault();\n\t\t\tthis.trigger(\"renderer:click\", this.model, ev);\n\t\t},\n\t\t\"click a\": function(ev) {\n\t\t\tev.defaultPrevented || ev.preventDefault();\n\t\t}\n\t},\n\n\t/** @override */\n\tinitialize: function(options) {\n\t\tthis.listenTo(this.model, \"selected deselected\", this.renderClassList);\n\t\tthis.renderClassList();\n\t},\n\n\t/** @override */\n\trender: function() {\n\t\tthis.el.innerHTML = this.template(this.model.toJSON());\n\t\tthis.renderClassList();\n\t\treturn this;\n\t},\n\n\trenderClassList: function() {\n\t\tthis.el.classList.toggle(\"selected\", this.model.selected);\n\t},\n});\n\nmodule.exports = DotNavigationRenderer;\n",
    "\"use strict\";\n// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"placeholder sizing\\\"></div>\\n<img class=\\\"content media-border default\\\" alt=\\\"\"\n    + alias4(((helper = (helper = helpers.text || (depth0 != null ? depth0.text : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"text\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" longdesc=\\\"#desc_m\"\n    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" />\\n\";\n},\"useData\":true});\n",
    "/**\n * @module app/view/render/ImageRenderer\n */\n\n/** @type {module:app/view/MediaRenderer} */\nconst MediaRenderer = require(\"./MediaRenderer\");\n\n/** @type {Function} */\nconst viewTemplate = require(\"./ImageRenderer.hbs\");\n\n/**\n * @constructor\n * @type {module:app/view/render/ImageRenderer}\n */\nvar ImageRenderer = MediaRenderer.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"imageRenderer\",\n\t/** @type {string} */\n\tclassName: MediaRenderer.prototype.className + \" image-item\",\n\t/** @type {Function} */\n\ttemplate: viewTemplate,\n\n\t/** @override */\n\tinitialize: function(opts) {\n\t\tMediaRenderer.prototype.initialize.apply(this, arguments);\n\t\t// this.createChildren();\n\t\t// this.initializeAsync();\n\t},\n\n\t/* --------------------------- *\n\t/* children/layout\n\t/* --------------------------- */\n\n\t/** @override */\n\tcreateChildren: function() {\n\t\tMediaRenderer.prototype.createChildren.apply(this, arguments);\n\t\t// this.el.innerHTML = this.template(this.model.toJSON());\n\t\tthis.placeholder = this.el.querySelector(\".placeholder\");\n\t},\n\n\t/** @override */\n\trender: function() {\n\t\tMediaRenderer.prototype.render.apply(this, arguments);\n\n\t\t// this.measure();\n\n\t\tvar img = this.getDefaultImage();\n\t\tif (this.metrics.media.width) {\n\t\t\timg.setAttribute(\"width\", this.metrics.media.width);\n\t\t}\n\t\tif (this.metrics.media.height) {\n\t\t\timg.setAttribute(\"height\", this.metrics.media.height);\n\t\t}\n\n\t\tvar content = this.getContentEl();\n\t\tcontent.style.left = this.metrics.content.x + \"px\";\n\t\tcontent.style.top = this.metrics.content.y + \"px\";\n\n\t\t// var sizing = this.getSizingEl();\n\t\t// sizing.style.maxWidth = this.metrics.content.width + \"px\";\n\t\t// sizing.style.maxHeight = this.metrics.content.height + \"px\";\n\n\t\treturn this;\n\t},\n\n\t/* --------------------------- *\n\t/* initializeAsync\n\t/* --------------------------- */\n\n\tinitializeAsync: function() {\n\t\treturn MediaRenderer.prototype.initializeAsync.apply(this, arguments)\n\t\t// return MediaRenderer.whenSelectionIsContiguous(this)\n\t\t// // return Promise.resolve(this)\n\t\t// // \t.then(MediaRenderer.whenSelectionIsContiguous)\n\t\t// \t.then(MediaRenderer.whenSelectTransitionEnds)\n\t\t// \t.then(MediaRenderer.whenDefaultImageLoads)\n\t\t// .then(\n\t\t// \tfunction(view) {\n\t\t// \t\tview.mediaState = \"ready\";\n\t\t// \t})\n\t\t// .catch(\n\t\t// \tfunction(err) {\n\t\t// \t\tif (err instanceof ViewError) {\n\t\t// \t\t\t// NOTE: ignore ViewError type\n\t\t// \t\t\t// console.log(err.view.cid, err.view.model.cid, \"ImageRenderer: \" + err.message);\n\t\t// \t\t} else {\n\t\t// \t\t\tconsole.error(this.cid, err.name, err);\n\t\t// \t\t\tthis.placeholder.innerHTML = \"<p class=\\\"color-fg\\\" style=\\\"position:absolute;bottom:0;padding:3rem;\\\"><strong>\" + err.name + \"</strong> \" + err.message + \"</p>\";\n\t\t// \t\t\tthis.mediaState = \"error\";\n\t\t// \t\t}\n\t\t// \t}.bind(this))\n\t\t;\n\t},\n});\n\nmodule.exports = ImageRenderer;\n",
    "/**\n * @module app/view/render/LabelRenderer\n */\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n\n/**\n * @constructor\n * @type {module:app/view/render/LabelRenderer}\n */\nvar LabelRenderer = View.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"labelRenderer\",\n\n\tproperties: {\n\t\tlabel: {\n\t\t\tget: function() {\n\t\t\t\treturn this._label || (this._label = this.el.querySelector(\".label\"));\n\t\t\t}\n\t\t}\n\t\t// measuredWidth: {\n\t\t// \tget: function() {\n\t\t// \t\treturn this._measuredWidth;\n\t\t// \t}\n\t\t// },\n\t\t// measuredHeight: {\n\t\t// \tget: function() {\n\t\t// \t\treturn this._measuredHeight;\n\t\t// \t}\n\t\t// },\n\t},\n\n\t/* -------------------------------\n\t/* measure\n\t/* ------------------------------- */\n\n\t// _measuredWidth: null,\n\t// _measuredHeight: null,\n\t// measure: function() {},\n});\n\nmodule.exports = LabelRenderer;\n",
    "\"use strict\";\n/*global XMLHttpRequest, HTMLMediaElement, MediaError*/\n/**\n * @module app/view/render/MediaRenderer\n */\n\n// /** @type {module:underscore.strings/lpad} */\n// const lpad = require(\"underscore.string/lpad\");\n\n/** @type {module:app/model/item/MediaItem} */\nconst MediaItem = require(\"app/model/item/MediaItem\");\n/** @type {module:app/view/CarouselRenderer} */\nconst CarouselRenderer = require(\"app/view/render/CarouselRenderer\");\n\n// var errorTemplate = require(\"../template/ErrorBlock.hbs\");\n// /** @type {module:utils/css/getBoxEdgeStyles} */\n// var getBoxEdgeStyles = require(\"utils/css/getBoxEdgeStyles\");\n\nvar MediaRenderer = CarouselRenderer.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"mediaRenderer\",\n\t/** @type {string} */\n\tclassName: CarouselRenderer.prototype.className + \" media-item\",\n\t/** @type {module:app/model/MediaItem} */\n\tmodel: MediaItem,\n\n\tproperties: {\n\t\tdefaultImage: {\n\t\t\tget: function() {\n\t\t\t\treturn this._defaultImage || (this._defaultImage = this.el.querySelector(\"img.default\"));\n\t\t\t}\n\t\t},\n\t\tmediaState: {\n\t\t\tget: function() {\n\t\t\t\treturn this._mediaState;\n\t\t\t},\n\t\t\tset: function(state) {\n\t\t\t\tthis._setMediaState(state);\n\t\t\t}\n\t\t}\n\t},\n\n\t/** @override */\n\tinitialize: function(opts) {\n\t\t// if (this.model.attrs().hasOwnProperty(\"@classname\")) {\n\t\t// \tthis.el.className += \" \" + this.model.attr(\"@classname\");\n\t\t// }\n\n\t\t// NOTE: @classname attr handling moved to CarouselRenderer\n\t\t// if (this.model.attr(\"@classname\") !== void 0) {\n\t\t// \tvar clsAttr = this.model.attr(\"@classname\").split(\" \");\n\t\t// \tfor (var i = 0; i < clsAttr.length; i++) {\n\t\t// \t\tthis.el.classList.add(clsAttr[i]);\n\t\t// \t}\n\t\t// }\n\t\tCarouselRenderer.prototype.initialize.apply(this, arguments);\n\n\t\tthis.metrics.media = {};\n\t\tthis.mediaState = \"idle\";\n\n\t\tthis.initializeAsync()\n\t\t\t.then(this.whenInitialized)\n\t\t\t.catch(this.whenInitializeError.bind(this));\n\t},\n\n\tinitializeAsync: function() {\n\t\t// var MediaRenderer = Object.getPrototypeOf(this).constructor;\n\t\treturn Promise.resolve(this)\n\t\t\t.then(MediaRenderer.whenSelectionIsContiguous)\n\t\t\t.then(MediaRenderer.whenScrollingEnds)\n\t\t\t.then(MediaRenderer.whenDefaultImageLoads);\n\t},\n\n\twhenInitialized: function(view) {\n\t\t// console.log(\"%s::whenInitialized [%s]\", view.cid, \"resolved\");\n\t\tview.mediaState = \"ready\";\n\t\tview.placeholder.removeAttribute(\"data-progress\");\n\t\treturn view;\n\t},\n\n\twhenInitializeError: function(err) {\n\t\tif (err instanceof CarouselRenderer.ViewError) {\n\t\t\t// NOTE: ignore ViewError type\n\t\t\treturn;\n\t\t} else if (err instanceof Error) {\n\t\t\tconsole.error(err.stack);\n\t\t}\n\t\tthis.placeholder.removeAttribute(\"data-progress\");\n\t\tthis.mediaState = \"error\";\n\t},\n\n\tupdateMediaProgress: function(progress, id) {\n\t\tif (_.isNumber(progress)) {\n\t\t\tthis.placeholder.setAttribute(\"data-progress\",\n\t\t\t\tString(Math.floor(progress * 100)).padStart(2, '0'));\n\t\t}\n\t\t// else if (progress === \"complete\") {\n\t\t// \tthis.placeholder.removeAttribute(\"data-progress\");\n\t\t// }\n\t},\n\n\t// whenMediaIsReady: function(view) {\n\t// \treturn MediaRenderer.whenDefaultImageLoads(this, this.updateMediaProgress.bind(this));\n\t// },\n\n\t/* --------------------------- *\n\t/* child getters\n\t/* --------------------------- */\n\n\t/** @return {HTMLElement} */\n\tgetDefaultImage: function() {\n\t\treturn this.defaultImage;\n\t},\n\n\t/* --------------------------- *\n\t/* children/layout\n\t/* --------------------------- */\n\n\tcreateChildren: function() {\n\t\tthis.el.innerHTML = this.template(this.model.toJSON());\n\t},\n\n\t/** @override */\n\tmeasure: function() {\n\t\tCarouselRenderer.prototype.measure.apply(this, arguments);\n\n\t\tvar sw, sh; // source dimensions\n\t\tvar pcw, pch; // measured values\n\t\tvar cx, cy, cw, ch, cs; // computed values\n\t\tvar ew, eh; // content edge totals\n\t\tvar cm; // content metrics\n\n\t\tcm = this.metrics.content;\n\t\tcx = cm.x;\n\t\tcy = cm.y;\n\t\tpcw = cm.width;\n\t\tpch = cm.height;\n\n\t\tew = (cm.paddingLeft + cm.paddingRight + cm.borderLeftWidth + cm.borderRightWidth);\n\t\teh = (cm.paddingTop + cm.paddingBottom + cm.borderTopWidth + cm.borderBottomWidth);\n\t\tpcw -= ew;\n\t\tpch -= eh;\n\n\t\tsw = this.model.get(\"source\").get(\"w\");\n\t\t// || this.defaultImage.naturalWidth || pcw;\n\t\tsh = this.model.get(\"source\").get(\"h\");\n\t\t// || this.defaultImage.naturalHeight || pch;\n\n\t\t// if (!(sw && sh)) {\n\t\t// \tsw = pcw;\n\t\t// \tsh = pch;\n\t\t// }\n\n\t\t// Unless both client dimensions are larger than the source's\n\t\t// choose constraint direction by aspect ratio\n\t\tif (sw < pcw && sh < pch) {\n\t\t\tcs = 1;\n\t\t\tcw = sw;\n\t\t\tch = sh;\n\t\t\tthis.metrics.fitDirection = \"both\";\n\t\t} else if ((pcw / pch) < (sw / sh)) {\n\t\t\t// fit width\n\t\t\tcw = pcw;\n\t\t\tcs = cw / sw;\n\t\t\t// ch = cs * sh;\n\t\t\tch = Math.round(cs * sh);\n\t\t\tthis.metrics.fitDirection = \"width\";\n\t\t} else {\n\t\t\t// fit height\n\t\t\tch = pch;\n\t\t\tcs = ch / sh;\n\t\t\t// cw = cs * sw;\n\t\t\tcw = Math.round(cs * sw);\n\t\t\tthis.metrics.fitDirection = \"height\";\n\t\t}\n\n\t\tthis.metrics.content.x = cx;\n\t\tthis.metrics.content.y = cy;\n\t\tthis.metrics.content.width = cw + ew;\n\t\tthis.metrics.content.height = ch + eh;\n\n\t\tthis.metrics.media.x = cx + cm.paddingLeft + cm.borderLeftWidth;\n\t\tthis.metrics.media.y = cy + cm.paddingTop + cm.borderTopWidth;\n\t\tthis.metrics.media.width = cw;\n\t\tthis.metrics.media.height = ch;\n\t\tthis.metrics.media.scale = cs;\n\n\t\t// console.log(\"%s::measure mw:%s mh:%s fit: %s metrics: %o\", this.cid, pcw, pch, this.metrics.fitDirection, this.metrics);\n\t\t// var sizing = this.getSizingEl();\n\t\t// sizing.style.maxWidth = (cw + ew) + \"px\";\n\t\t// sizing.style.maxHeight = (ch + eh) + \"px\";\n\n\t\treturn this;\n\t},\n\n\trender: function() {\n\t\t// NOTE: not calling super.render, calling measure ourselves\n\t\tthis.measure();\n\n\t\tvar sizing = this.getSizingEl();\n\t\tsizing.style.maxWidth = this.metrics.content.width + \"px\";\n\t\tsizing.style.maxHeight = this.metrics.content.height + \"px\";\n\n\t\tthis.el.setAttribute(\"data-fit-dir\", this.metrics.fitDirection);\n\n\t\treturn this;\n\t},\n\n\t/* --------------------------- *\n\t/* mediaState\n\t/* --------------------------- */\n\n\t_mediaStateEnum: [\"idle\", \"pending\", \"ready\", \"error\"],\n\n\t_setMediaState: function(key) {\n\t\tif (this._mediaStateEnum.indexOf(key) === -1) {\n\t\t\tthrow new Error(\"Argument \" + key + \" invalid. Must be one of: \" + this._mediaStateEnum.join(\", \"));\n\t\t}\n\t\tif (this._mediaState !== key) {\n\t\t\tif (this._mediaState) {\n\t\t\t\tthis.el.classList.remove(this._mediaState);\n\t\t\t}\n\t\t\tthis.el.classList.add(key);\n\t\t\tthis._mediaState = key;\n\t\t\tthis.trigger(\"media:\" + key);\n\t\t}\n\t},\n}, {\n\tLOG_TO_SCREEN: true,\n\t/** @type {module:app/view/promise/whenSelectionDistanceIs} */\n\twhenSelectionDistanceIs: require(\"app/view/promise/whenSelectionDistanceIs\"),\n\n\t/** @type {module:app/view/promise/whenSelectionIsContiguous} */\n\twhenSelectionIsContiguous: require(\"app/view/promise/whenSelectionIsContiguous\"),\n\n\t// /** @type {module:app/view/promise/whenSelectTransitionEnds} */\n\t// whenSelectTransitionEnds: require(\"app/view/promise/whenSelectTransitionEnds\"),\n\n\t/** @type {module:app/view/promise/whenScrollingEnds} */\n\twhenScrollingEnds: require(\"app/view/promise/whenScrollingEnds\"),\n\n\t/** @type {module:app/view/promise/whenDefaultImageLoads} */\n\twhenDefaultImageLoads: require(\"app/view/promise/whenDefaultImageLoads\"),\n});\n\n/* ---------------------------\n/* log to screen\n/* --------------------------- */\nif (DEBUG) {\n\n\tMediaRenderer = (function(MediaRenderer) {\n\t\tif (!MediaRenderer.LOG_TO_SCREEN) return MediaRenderer;\n\n\t\t/** @type {Function} */\n\t\tvar Color = require(\"color\");\n\n\t\treturn MediaRenderer.extend({\n\n\t\t\t/** @override */\n\t\t\tinitialize: function() {\n\n\t\t\t\tvar fgColor = new Color(this.model.attr(\"color\"));\n\t\t\t\tvar bgColor = new Color(this.model.attr(\"background-color\"));\n\t\t\t\tthis.__logColors = {\n\t\t\t\t\tnormal: Color(fgColor).mix(bgColor, 0.75).hsl().string(),\n\t\t\t\t\tignored: Color(fgColor).mix(bgColor, 0.25).hsl().string(),\n\t\t\t\t\terror: \"brown\",\n\t\t\t\t\tabort: \"orange\"\n\t\t\t\t};\n\t\t\t\tthis.__logFrameStyle = \"1px dashed \" + Color(fgColor).mix(bgColor, 0.5).hsl().string();\n\t\t\t\tthis.__logStartTime = Date.now();\n\t\t\t\tthis.__rafId = -1;\n\t\t\t\tthis.__onFrame = this.__onFrame.bind(this);\n\t\t\t\tMediaRenderer.prototype.initialize.apply(this, arguments);\n\t\t\t},\n\n\t\t\tinitializeAsync: function() {\n\t\t\t\treturn MediaRenderer.prototype.initializeAsync.apply(this, arguments).catch(function(err) {\n\t\t\t\t\tif (!(err instanceof MediaRenderer.ViewError)) {\n\t\t\t\t\t\tthis.__logMessage(err.message, err.name, this.__logColors[\"error\"]);\n\t\t\t\t\t}\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t}.bind(this));\n\t\t\t},\n\n\t\t\t/** @override */\n\t\t\tcreateChildren: function() {\n\t\t\t\tvar ret = MediaRenderer.prototype.createChildren.apply(this, arguments);\n\n\t\t\t\tthis.__logElement = document.createElement(\"div\");\n\t\t\t\tthis.__logElement.className = \"debug-log\";\n\t\t\t\t// this.__logElement.style.touchAction = \"pan-y\";\n\t\t\t\tthis.__logHeaderEl = document.createElement(\"pre\");\n\t\t\t\tthis.__logHeaderEl.className = \"log-header color-bg\";\n\t\t\t\t// Color(this.model.colors.fgColor).mix(fgColor, 0.9).rgb().string()\n\t\t\t\t// Color(this.model.colors.fgColor).alpha\n\t\t\t\tthis.__logHeaderEl.textContent = this.__getHeaderText();\n\t\t\t\tthis.__logElement.appendChild(this.__logHeaderEl);\n\t\t\t\tthis.el.insertBefore(this.__logElement, this.el.firstElementChild);\n\t\t\t\treturn ret;\n\t\t\t},\n\n\t\t\t/** @override */\n\t\t\trender: function() {\n\t\t\t\tvar ret = MediaRenderer.prototype.render.apply(this, arguments);\n\n\t\t\t\tthis.__logElement.style.top = (this.metrics.content.height + this.metrics.content.y) + \"px\";\n\t\t\t\tthis.__logElement.style.left = this.metrics.content.x + \"px\";\n\t\t\t\tthis.__logElement.style.width = this.metrics.content.width + \"px\";\n\t\t\t\tthis.__logElement.scrollTop = this.__logElement.scrollHeight;\n\n\t\t\t\treturn ret;\n\t\t\t},\n\n\t\t\twhenInitializeError: function(err) {\n\t\t\t\t// NOTE: not calling super\n\t\t\t\t// MediaRenderer.prototype.whenInitializeError.apply(this, arguments);\n\t\t\t\tif (err instanceof CarouselRenderer.ViewError) {\n\t\t\t\t\t// NOTE: ignore ViewError type\n\t\t\t\t\t// console.warn(\"%s::whenInitializeError \", err.view.cid, err.message);\n\t\t\t\t\treturn;\n\t\t\t\t} else if (err instanceof Error) {\n\t\t\t\t\tconsole.warn(err.stack);\n\t\t\t\t}\n\t\t\t\t// this.placeholder.innerHTML = err ? errorTemplate(err) : \"\";\n\t\t\t\tthis.placeholder.removeAttribute(\"data-progress\");\n\t\t\t\tthis.mediaState = \"error\";\n\n\t\t\t\t// console.error(\"%s::initializeAsync [%s (caught)]: %s\", this.cid, err.name, (err.info && err.info.logMessage) || err.message);\n\t\t\t\t// err.logEvent && console.log(err.logEvent);\n\t\t\t},\n\n\t\t\t/* --------------------------- *\n\t\t\t/* log methods\n\t\t\t/* --------------------------- */\n\n\t\t\t__logMessage: function(msg, logtype, color) {\n\t\t\t\tvar logEntryEl = document.createElement(\"pre\");\n\n\t\t\t\tlogtype || (logtype = \"-\")\n\t\t\t\tlogEntryEl.textContent = this.__getTStamp() + \" \" + msg;\n\t\t\t\tlogEntryEl.setAttribute(\"data-logtype\", logtype);\n\t\t\t\tlogEntryEl.style.color = color || this.__logColors[logtype] || this.__logColors.normal;\n\n\t\t\t\tthis.__logElement.appendChild(logEntryEl);\n\t\t\t\tthis.__logElement.scrollTop = this.__logElement.scrollHeight;\n\n\t\t\t\tif (this.__rafId == -1) {\n\t\t\t\t\tthis.__rafId = this.requestAnimationFrame(this.__onFrame);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t__onFrame: function(tstamp) {\n\t\t\t\tthis.__rafId = -1;\n\t\t\t\tthis.__logElement.lastElementChild.style.borderBottom = this.__logFrameStyle;\n\t\t\t\tthis.__logElement.lastElementChild.style.paddingBottom = \"2px\";\n\t\t\t\tthis.__logElement.lastElementChild.style.marginBottom = \"2px\";\n\t\t\t},\n\n\t\t\t__getTStamp: function() {\n\t\t\t\t// return new Date(Date.now() - this.__logStartTime).toISOString().substr(11, 12);\n\t\t\t\treturn String(((Date.now() - this.__logStartTime) / 1000).toFixed(3)).padStart(8, \"0\");\n\t\t\t},\n\n\t\t\t__getHeaderText: function() {\n\t\t\t\treturn '';\n\t\t\t},\n\t\t});\n\t})(MediaRenderer);\n\n} // end debug\n\n/**\n * @constructor\n * @type {module:app/view/render/MediaRenderer}\n */\nmodule.exports = MediaRenderer;\n",
    "/**\n * @module app/view/render/PlayableRenderer\n */\n\n/** @type {module:app/view/MediaRenderer} */\nconst MediaRenderer = require(\"app/view/render/MediaRenderer\");\n// /** @type {module:app/view/component/CanvasProgressMeter} */\n// var ProgressMeter = require(\"app/view/component/CanvasProgressMeter\");\n\n/** @type {Function} */\nconst prefixedProperty = require(\"utils/prefixedProperty\");\n/** @type {Function} */\nconst prefixedEvent = require(\"utils/prefixedEvent\");\n\n// var visibilityHiddenProp = prefixedProperty(\"hidden\", document);\n/** @type {String} */\nvar visibilityStateProp = prefixedProperty(\"visibilityState\", document);\n/** @type {String} */\nvar visibilityChangeEvent = prefixedEvent(\"visibilitychange\", document, \"hidden\");\n\n// /** @type {Function} */\n// var Color = require(\"color\");\n//\n// /** @type {Function} */\n// // var duotone = require(\"utils/canvas/bitmap/duotone\");\n// // var stackBlurMono = require(\"utils/canvas/bitmap/stackBlurMono\");\n// var stackBlurRGB = require(\"utils/canvas/bitmap/stackBlurRGB\");\n// // var getAverageRGBA = require(\"utils/canvas/bitmap/getAverageRGBA\");\n// var getAverageRGB = require(\"utils/canvas/bitmap/getAverageRGB\");\n// // var inflateRect = require(\"utils/geom/inflateRect\");\n//\n\n// var WAIT_DEBOUNCE_MS = require(\"app/control/Globals\").TRANSITION_DURATION;\n\n// /** @type {HTMLCanvasElement} */\n// var _sharedCanvas = null;\n// /** @return {HTMLCanvasElement} */\n// var getSharedCanvas = function() {\n// \tif (_sharedCanvas === null) {\n// \t\t_sharedCanvas = document.createElement(\"canvas\");\n// \t}\n// \treturn _sharedCanvas;\n// };\n\n// var SVG_NS = \"http://www.w3.org/2000/svg\";\n// var XLINK_NS = \"http://www.w3.org/1999/xlink\";\n//\n// var useIdSeed = 0\n// var createSVGUseElement = function() {\n// \tvar svgEl = document.createElementNS(SVG_NS, \"use\");\n// \tsvgEl.setAttributeNS(null, \"id\", name + (useIdSeed++));\n// \tsvgEl.setAttributeNS(null, \"class\", [name, \"symbol\"].join(\" \"));\n// \tsvgEl.setAttributeNS(XLINK_NS, \"xlink:href\", \"#\" + name);\n// \treturn svgEl;\n// };\n\n// function logAttachInfo(view, name, level) {\n// \tif ([\"log\", \"info\", \"warn\", \"error\"].indexOf(level) != -1) {\n// \t\tlevel = \"log\";\n// \t}\n// \tconsole[level].call(console, \"%s::%s [parent:%s %s %s depth:%s]\", view.cid, name, view.parentView && view.parentView.cid, view.attached ? \"attached\" : \"detached\", view._viewPhase, view.viewDepth);\n// }\n\n/**\n * @constructor\n * @type {module:app/view/render/PlayableRenderer}\n */\nvar PlayableRenderer = MediaRenderer.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"playableRenderer\",\n\n\t/** @type {string|Function} */\n\tclassName: MediaRenderer.prototype.className + \" playable-item\",\n\n\tproperties: {\n\t\tmediaPaused: {\n\t\t\t/** @return {Boolean} */\n\t\t\tget: function() {\n\t\t\t\treturn this._isMediaPaused();\n\t\t\t}\n\t\t},\n\t\tmediaWaiting: {\n\t\t\t/** @return {Boolean} */\n\t\t\tget: function() {\n\t\t\t\treturn this._isMediaWaiting();\n\t\t\t}\n\t\t},\n\t\tplaybackRequested: {\n\t\t\t/** @return {Boolean} */\n\t\t\tget: function() {\n\t\t\t\treturn this._playbackRequested;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\tthis._setPlaybackRequested(value);\n\t\t\t}\n\t\t},\n\t\toverlay: {\n\t\t\t/** @return {HTMLElement} */\n\t\t\tget: function() {\n\t\t\t\treturn this._overlay || (this._overlay = this.el.querySelector(\".overlay\"));\n\t\t\t}\n\t\t},\n\t\t// playToggle: {\n\t\t// \t/** @return {HTMLElement} */\n\t\t// \tget: function() {\n\t\t// \t\treturn this._playToggle || (this._playToggle = this.el.querySelector(\".play-toggle\"));\n\t\t// \t}\n\t\t// },\n\t\t// playToggleSymbol: {\n\t\t// \t/** @return {HTMLElement} */\n\t\t// \tget: function() {\n\t\t// \t\treturn this._playToggleSymbol || (this._playToggleSymbol = this.el.querySelector(\".play-toggle-symbol\"));\n\t\t// \t}\n\t\t// },\n\t\tplayToggleHitarea: {\n\t\t\t/** @return {HTMLElement} */\n\t\t\tget: function() {\n\t\t\t\treturn this._playToggleHitarea || (this._playToggleHitarea = this.el.querySelector(\".play-toggle-hitarea\"));\n\t\t\t}\n\t\t},\n\t},\n\n\t/** @override */\n\tinitialize: function(opts) {\n\t\tthis._playToggleSymbol = {};\n\t\t// this._toggleWaiting = _.debounce(this._toggleWaiting, 500);\n\t\t// this._toggleWaiting = _.throttle(this._toggleWaiting, WAIT_DEBOUNCE_MS, { leading: true, trailing: true });\n\n\t\t_.bindAll(this,\n\t\t\t\"_onPlaybackToggle\",\n\t\t\t\"_onVisibilityChange\"\n\t\t);\n\t\tMediaRenderer.prototype.initialize.apply(this, arguments);\n\t\tthis._setPlaybackRequested(this._playbackRequested);\n\n\t\t// this.listenTo(this, \"view:parentChange\", function(childView, newParent, oldParent) {\n\t\t// \t// logAttachInfo(this, \"[view:parentChange]\", \"info\");\n\t\t// \tconsole.info(\"%s::[view:parentChange] '%s' to '%s'\", this.cid, oldParent && oldParent.cid, newParent && newParent.cid);\n\t\t// });\n\t},\n\n\t// /** @override */\n\t// initializeAsync: function() {\n\t// \treturn MediaRenderer.prototype.initialize.initializeAsync.apply(this, arguments);\n\t// },\n\n\t// /** @override */\n\t// remove: function() {\n\t// \tMediaRenderer.prototype.remove.apply(this, arguments);\n\t// \treturn this;\n\t// },\n\n\t/* --------------------------- *\n\t/* children/layout\n\t/* --------------------------- */\n\n\t// createChildren: function() {\n\t// },\n\n\t/* --------------------------- *\n\t/* setEnabled\n\t/* --------------------------- */\n\n\t/** @override */\n\tsetEnabled: function(enabled) {\n\t\tMediaRenderer.prototype.setEnabled.apply(this, arguments);\n\t\t// this._validatePlayback(enabled);\n\t\t// if (enabled) {\n\t\tthis._validatePlayback();\n\t\t// } else {\n\t\t// \t// if selected, pause media\n\t\t// \tthis.model.selected && this._togglePlayback(false);\n\t\t// \t// this._togglePlayback(false);\n\t\t// }\n\t\t// console.log(\"%s::setEnabled\", this.cid, this.enabled);\n\t\t// this._playToggleSymbol.paused = (this.enabled && this.model.selected);\n\t\t//}\n\t},\n\n\t/* ---------------------------\n\t/* selection handlers\n\t/* --------------------------- */\n\n\tlistenToSelection: function() {\n\t\tif (this._viewPhase != \"initialized\")\n\t\t\tthrow new Error(this.cid + \"::listenToSelection called while \" + this._viewPhase);\n\n\t\t// logAttachInfo(this, \"listenToSelection\", \"log\");\n\t\t// this.listenTo(this, \"view:removed\", this.removeSelectionListeners);\n\t\tthis.listenTo(this.model, \"selected\", this._onModelSelected);\n\t\tthis.listenTo(this.model, \"deselected\", this._onModelDeselected);\n\t\tif (this.model.selected) {\n\t\t\tthis._onModelSelected();\n\t\t}\n\t},\n\n\t/* model selected handlers:\n\t/* model selection toggles playback\n\t/* --------------------------- */\n\n\t_onModelSelected: function() {\n\t\tconsole.log(\"%s::_onModelSelected _playbackRequested: %s, event: %s\", this.cid, this._playbackRequested, this._toggleEvent);\n\t\tthis.listenTo(this, \"view:parentChange\", this._onParentChange);\n\t\tif (this.parentView) this._onParentChange(this, this.parentView, null);\n\n\t\t// this.enabled = true;\n\t\tthis._playToggleSymbol.paused = !this.enabled;\n\n\t\tthis._listenWhileSelected();\n\t\tthis._validatePlayback();\n\t},\n\n\t_onModelDeselected: function() {\n\t\tconsole.log(\"%s::_onModelDeselected _playbackRequested: %s, event: %s\", this.cid, this._playbackRequested, this._toggleEvent);\n\t\tthis.stopListening(this, \"view:parentChange\", this._onParentChange);\n\t\tif (this.parentView) this._onParentChange(this, null, this.parentView);\n\n\t\tthis._playToggleSymbol.paused = true;\n\n\t\tthis._stopListeningWhileSelected();\n\t\tthis._validatePlayback(false);\n\t\t// this._togglePlayback(false);\n\t},\n\n\t/* view:parentChange handlers 3\n\t/* --------------------------- */\n\t_onParentChange: function(childView, newParent, oldParent) {\n\t\t// console.log(\"[scroll] %s::_onParentChange '%s' to '%s'\", this.cid, oldParent && oldParent.cid, newParent && newParent.cid);\n\t\tif (oldParent) this.stopListening(oldParent, \"view:scrollstart view:scrollend\", this._onScrollChange);\n\t\tif (newParent) this.listenTo(newParent, \"view:scrollstart view:scrollend\", this._onScrollChange);\n\t},\n\n\t_onScrollChange: function() {\n\t\tif (this.parentView === null) {\n\t\t\tthrow new Error(this.cid + \"::_onScrollChange parentView is null\");\n\t\t}\n\t\tthis._validatePlayback();\n\t},\n\n\t/* visibility dom event\n\t/* --------------------------- */\n\t_onVisibilityChange: function(ev) {\n\t\tthis._validatePlayback();\n\t},\n\n\t/* listen to DOM events\n\t * --------------------------- */\n\n\t_listenWhileSelected: function() {\n\t\tthis.listenTo(this, \"view:removed\", this._stopListeningWhileSelected);\n\t\tdocument.addEventListener(visibilityChangeEvent, this._onVisibilityChange, false);\n\t\tthis.playToggleHitarea.addEventListener(this._toggleEvent, this._onPlaybackToggle, false);\n\t},\n\n\t_stopListeningWhileSelected: function() {\n\t\tthis.stopListening(this, \"view:removed\", this._stopListeningWhileSelected);\n\t\tdocument.removeEventListener(visibilityChangeEvent, this._onVisibilityChange, false);\n\t\tthis.playToggleHitarea.removeEventListener(this._toggleEvent, this._onPlaybackToggle, false);\n\t},\n\n\t/* --------------------------- *\n\t/* play-toggle\n\t/* --------------------------- */\n\n\t/** @type {String} */\n\t_toggleEvent: MediaRenderer.CLICK_EVENT, //window.hasOwnProperty(\"onpointerup\") ? \"pointerup\" : \"mouseup\",\n\n\t_onPlaybackToggle: function(ev) {\n\t\t//console.log(\"%s[%sabled]::_onPlaybackToggle[%s] defaultPrevented: %s\", this.cid, this.enabled ? \"en\" : \"dis\", ev.type, ev.defaultPrevented);\n\t\t// NOTE: Perform action if MouseEvent.button is 0 or undefined (0: left-button)\n\t\tif (this.enabled && !ev.defaultPrevented && !ev.button) {\n\t\t\tev.preventDefault();\n\t\t\tthis.playbackRequested = !this.playbackRequested;\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* playbackRequested\n\t/* --------------------------- */\n\n\t_playbackCount: 0,\n\n\t/** @type {Boolean?} */\n\t_playbackRequested: null,\n\n\t_setPlaybackRequested: function(value) {\n\t\tthis._playbackRequested = value;\n\n\t\tvar classList = this.content.classList;\n\t\tclassList.toggle(\"playing\", value === true);\n\t\tclassList.toggle(\"paused\", value === false);\n\t\tclassList.toggle(\"requested\", value === true || value === false);\n\n\t\tthis._renderPlaybackState();\n\n\t\t// this._validatePlayback(this.playbackRequested);\n\t\t// if (this.playbackRequested) {\n\t\tthis._validatePlayback();\n\t\t// } else {\n\t\t// \tthis._togglePlayback(false);\n\t\t// }\n\t},\n\n\t/* --------------------------- *\n\t/* _togglePlayback\n\t/* --------------------------- */\n\n\t/** @param {Boolean} */\n\t_togglePlayback: function(newPlayState) {\n\t\tif (DEBUG) this.__logMessage([\n\t\t\t\t\"args:\", Array.prototype.join.apply(arguments),\n\t\t\t\t\"paused:\", (this._isMediaPaused() ? \"pause\" : \"play\"),\n\t\t\t\t\"media-state:\", this.mediaState,\n\t\t\t\t].join(\" \"),\n\t\t\t\"toggle-playback\");\n\n\t\tif (_.isBoolean(newPlayState) && newPlayState !== this._isMediaPaused()) {\n\t\t\treturn; // requested state is current, do nothing\n\t\t} else {\n\t\t\tnewPlayState = this._isMediaPaused();\n\t\t}\n\t\tif (newPlayState) { // changing to what?\n\t\t\t// this._playbackCount++;\n\t\t\tthis._playMedia();\n\t\t} else {\n\t\t\tthis._pauseMedia();\n\t\t}\n\t\t/* NOTE: called from _setPlaybackRequested */\n\t\t// this._renderPlaybackState();\n\t},\n\n\t_canResumePlayback: function() {\n\t\treturn !!(\n\t\t\tthis.enabled &&\n\t\t\tthis.model.selected &&\n\t\t\tthis.playbackRequested &&\n\t\t\t(this.mediaState === \"ready\") &&\n\t\t\tthis.attached &&\n\t\t\t(this.parentView !== null) &&\n\t\t\t(!this.parentView.scrolling) &&\n\t\t\t(document[visibilityStateProp] != \"hidden\")\n\t\t);\n\t},\n\n\t_validatePlayback: function(shortcircuit) {\n\t\t// a 'shortcircuit' boolean argument can be passed, and if false,\n\t\t// skip _canResumePlayback and pause playback right away\n\t\tif (arguments.length !== 0 && !shortcircuit) {\n\t\t\tthis._togglePlayback(false);\n\t\t} else {\n\t\t\tthis._togglePlayback(this._canResumePlayback());\n\t\t}\n\t\tthis._playToggleSymbol.paused = !(this.attached && this.enabled && this.model.selected);\n\t},\n\n\t/* ---------------------------\n\t/* _setPlayToggleSymbol\n\t/* --------------------------- */\n\n\t_renderPlaybackState: function() {\n\t\tif (!this.attached) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.progressMeter) {\n\t\t\tthis.progressMeter.stalled = this._isMediaWaiting();\n\t\t}\n\t\t// this._setPlayToggleSymbol(\"waiting\");\n\t\t// this.content.classList.toggle(\"waiting\", true);\n\n\t\t// if (!this.content.classList.contains(\"started\")) {\n\t\t// \tthis._setPlayToggleSymbol(\"play\");\n\t\t// } else\n\t\tvar waiting = !this.parentView.scrolling && this._isMediaWaiting();\n\n\t\tif (this.playbackRequested) {\n\t\t\tif (waiting) {\n\t\t\t\tthis._setPlayToggleSymbol(\"waiting\");\n\t\t\t} else {\n\t\t\t\tthis._setPlayToggleSymbol(\"play\");\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.content.classList.contains(\"started\")) {\n\t\t\t\tthis._setPlayToggleSymbol(\"pause\");\n\t\t\t} else {\n\t\t\t\tthis._setPlayToggleSymbol(\"play\");\n\t\t\t}\n\t\t}\n\t\tvar cls = this.content.classList;\n\t\tcls.toggle(\"playing\", this.playbackRequested);\n\t\tcls.toggle(\"paused\", !this.playbackRequested);\n\t\tcls.toggle(\"waiting\", waiting);\n\n\t\t//console.log(\"%s::_renderPlaybackState [play: %s] [wait: %s] [symbol: %s]\", this.cid, this.playbackRequested, this._isMediaWaiting(), this._playToggleSymbol.symbolName);\n\t},\n\n\t_setPlayToggleSymbol: function(symbolName) {\n\t\t//console.log(\"%s::_setPlayToggleSymbol [enabled: %s] [selected: %s] [symbol: %s]\", this.cid, this.enabled, !!(this.model.selected), symbolName);\n\n\t\t// this._playToggleSymbol.paused = !(this.attached && this.enabled && !!(this.model.selected));\n\t\tthis._playToggleSymbol.symbolName = symbolName;\n\t\tif (this.mediaState === \"ready\") { //this._playToggleSymbol.renderFlags) {\n\t\t\tthis._playToggleSymbol.renderNow();\n\t\t}\n\t},\n\n\t// _playToggleSymbolSvg: null,\n\t// _playToggleSymbolName: null,\n\t// _setPlayToggleSymbol_svg: function(symbolName) {\n\t// \tif (this._playToggleSymbolName !== symbolName) {\n\t// \t\tvar svgDoc = this.el.querySelector(\"svg.play-toggle-symbol\");\n\t// \t\tif (this._playToggleSymbolSvg) {\n\t// \t\t\tsvgDoc.removeChild(this._playToggleSymbolSvg);\n\t// \t\t}\n\t// \t\tvar svgSym = document.createElementNS(\"http://www.w3.org/2000/svg\", \"use\");\n\t// \t\tsvgSym.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"xlink:href\", \"#\" + symbolName);\n\t// \t\tsvgDoc.appendChild(svgSym);\n\t// \t\tsvgDoc.setAttributeNS(null, \"class\", symbolName + \"-symbol play-toggle-symbol\");\n\t//\n\t// \t\tthis._playToggleSymbolSvg = svgSym;\n\t// \t\tthis._playToggleSymbolName = symbolName;\n\t// \t}\n\t// },\n\n\t/* --------------------------- *\n\t/* waiting\n\t/* --------------------------- */\n\n\t_isWaiting: false,\n\n\t_isMediaWaiting: function() {\n\t\treturn this._isWaiting;\n\t},\n\n\t_toggleWaiting: function(waiting) {\n\t\tif (arguments.length === 0) {\n\t\t\twaiting = !this._isWaiting;\n\t\t}\n\t\t// if (this._isMediaPaused()) {\n\t\t// \twaiting = false;\n\t\t// }\n\t\tif (this._isWaiting !== waiting) {\n\t\t\tthis._isWaiting = waiting;\n\t\t\tthis._renderPlaybackState();\n\t\t}\n\t},\n\n\t/* --------------------------- *\n\t/* abstract\n\t/* --------------------------- */\n\n\t_isMediaPaused: function() {\n\t\tconsole.warn(\"%s::_isMediaPaused Not implemented\", this.cid);\n\t\treturn true;\n\t},\n\n\t_playMedia: function() {\n\t\tconsole.warn(\"%s::_playMedia Not implemented\", this.cid);\n\t},\n\n\t_pauseMedia: function() {\n\t\tconsole.warn(\"%s::_pauseMedia Not implemented\", this.cid);\n\t},\n\n\t/* --------------------------- *\n\t/* util\n\t/* --------------------------- */\n\n\tupdateOverlay: function(mediaEl, targetEl, rectEl) {\n\t\t// this method is not critical, just catch and log all errors\n\t\t// try {\n\t\t// \tthis._updateOverlay(mediaEl, targetEl, rectEl)\n\t\t// } catch (err) {\n\t\t// \tconsole.error(\"%s::updateOverlay\", this.cid, err);\n\t\t// }\n\t},\n\n\t/**\\/\n\t_drawMediaElement: function(ctx, mediaEl, dest) {\n\t\t// destination rect\n\t\t// NOTE: mediaEl is expected to have the same dimensions in this.metrics.media\n\t\tmediaEl || (mediaEl = this.defaultImage);\n\t\tdest || (dest = {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\twidth: this.metrics.media.width,\n\t\t\theight: this.metrics.media.height\n\t\t});\n\n\t\t// native/display scale\n\t\tvar sW = this.model.get(\"source\").get(\"w\"),\n\t\t\tsH = this.model.get(\"source\").get(\"h\"),\n\t\t\trsX = sW / this.metrics.media.width,\n\t\t\trsY = sH / this.metrics.media.height;\n\n\t\t// dest, scaled to native\n\t\tvar src = {\n\t\t\tx: Math.max(0, dest.x * rsX),\n\t\t\ty: Math.max(0, dest.y * rsY),\n\t\t\twidth: Math.min(sW, dest.width * rsX),\n\t\t\theight: Math.min(sH, dest.height * rsY)\n\t\t};\n\n\t\t// resize canvas\n\t\t// var canvas = ctx.canvas;\n\t\t// if (canvas.width !== dest.width || canvas.height !== dest.height) {\n\t\t// \tcanvas.width = dest.width;\n\t\t// \tcanvas.height = dest.height;\n\t\t// }\n\t\tctx.canvas.width = dest.width;\n\t\tctx.canvas.height = dest.height;\n\n\t\t// copy image to canvas\n\t\tctx.clearRect(0, 0, dest.width, dest.height);\n\t\tctx.drawImage(mediaEl,\n\t\t\tsrc.x, src.y, src.width, src.height,\n\t\t\t0, 0, dest.width, dest.height // destination rect\n\t\t);\n\n\t\treturn ctx;\n\t},\n\n\t_getImageData: function(mediaEl, targetEl, rectEl) {\n\t\t// src/dest rects\n\t\t// ------------------------------\n\t\trectEl || (rectEl = targetEl);\n\n\t\t// NOTE: does not work with svg element\n\t\t// var tRect = rectEl.getBoundingClientRect();\n\t\t// var cRect = mediaEl.getBoundingClientRect();\n\t\t// var tX = tRect.x - cRect.x,\n\t\t// \ttY = tRect.y - cRect.y,\n\t\t// \ttW = tRect.width,\n\t\t// \ttH = tRect.height;\n\n\t\t// target bounds\n\t\tvar tX = rectEl.offsetLeft,\n\t\t\ttY = rectEl.offsetTop,\n\t\t\ttW = rectEl.offsetWidth,\n\t\t\ttH = rectEl.offsetHeight;\n\n\t\tif (tX === void 0 || tY === void 0 || tW === void 0 || tH === void 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// destination rect\n\t\tvar RECT_GROW = 0;\n\t\tvar dest = {\n\t\t\tx: tX - RECT_GROW,\n\t\t\ty: tY - RECT_GROW,\n\t\t\twidth: tW + RECT_GROW * 2,\n\t\t\theight: tH + RECT_GROW * 2\n\t\t};\n\n\t\t// native/display scale\n\t\tvar sW = this.model.get(\"source\").get(\"w\"),\n\t\t\tsH = this.model.get(\"source\").get(\"h\"),\n\t\t\trsX = sW / this.metrics.media.width,\n\t\t\trsY = sH / this.metrics.media.height;\n\n\t\t// dest, scaled to native\n\t\tvar src = {\n\t\t\tx: Math.max(0, dest.x * rsX),\n\t\t\ty: Math.max(0, dest.y * rsY),\n\t\t\twidth: Math.min(sW, dest.width * rsX),\n\t\t\theight: Math.min(sH, dest.height * rsY)\n\t\t};\n\n\t\t// Copy image to canvas\n\t\t// ------------------------------\n\t\t// canvas = document.createElement(\"canvas\");\n\t\t// canvas.style.width  = dest.width + \"px\";\n\t\t// canvas.style.height = dest.height + \"px\";\n\n\t\tvar canvas = getSharedCanvas();\n\t\tif (canvas.width !== dest.width || canvas.height !== dest.height) {\n\t\t\tcanvas.width = dest.width;\n\t\t\tcanvas.height = dest.height;\n\t\t}\n\t\tvar ctx = canvas.getContext(\"2d\");\n\t\tctx.clearRect(0, 0, dest.width, dest.height);\n\t\tctx.drawImage(mediaEl,\n\t\t\tsrc.x, src.y, src.width, src.height,\n\t\t\t0, 0, dest.width, dest.height // destination rect\n\t\t);\n\t\treturn ctx.getImageData(0, 0, dest.width, dest.height);\n\t},\n\n\t_updateOverlay: function(mediaEl, targetEl, rectEl) {\n\t\tvar canvas, ctx;\n\t\tvar imageData = this._getImageData(mediaEl, targetEl, rectEl);\n\t\tvar avgColor = Color().rgb(getAverageRGB(imageData));\n\n\t\t// var avgHex = avgColor.hex().string(), els = this.el.querySelectorAll(\"img, video\");\n\t\t// for (var i = 0; i < els.length; i++) {\n\t\t// \tels.item(i).style.backgroundColor = avgHex;\n\t\t// }\n\n\t\ttargetEl.classList.toggle(\"over-dark\", avgColor.dark());\n\n\t\t// console.log(\"%s::updateOverlay() avgColor:%s (%s)\", this.cid, avgColor.rgb().string(), avgColor.dark()?\"dark\":\"light\", targetEl);\n\n\t\t// Color, filter opts\n\t\t// ------------------------------\n\n\t\tthis.fgColor || (this.fgColor = new Color(this.model.attr(\"color\")));\n\t\tthis.bgColor || (this.bgColor = new Color(this.model.attr(\"background-color\")));\n\n\t\tvar opts = { radius: 20 };\n\t\tvar isFgDark = this.fgColor.luminosity() < this.bgColor.luminosity();\n\t\topts.x00 = isFgDark ? Color(this.fgColor).lighten(0.5) : Color(this.bgColor).darken(0.5);\n\t\topts.xFF = isFgDark ? Color(this.bgColor).lighten(0.5) : Color(this.fgColor).darken(0.5);\n\n\t\tstackBlurRGB(imageData, { radius: 40 });\n\t\t// stackBlurMono(imageData, opts);\n\t\t// duotone(imageData, opts);\n\n\t\tctx = getSharedCanvas();\n\t\tif (canvas.width !== imageData.width || canvas.height !== imageData.height) {\n\t\t\tcanvas.width = imageData.width;\n\t\t\tcanvas.height = imageData.height;\n\t\t}\n\t\tctx = canvas.getContext(\"2d\");\n\t\tctx.putImageData(imageData, 0, 0);\n\t\ttargetEl.style.backgroundOrigin = \"border-box\";\n\t\ttargetEl.style.backgroundClip = \"content-box\";\n\t\ttargetEl.style.backgroundSize = \"100%\";\n\t\t// targetEl.style.padding = \"0 0 5rem 0\";\n\t\ttargetEl.style.backgroundImage = \"url(\" + canvas.toDataURL() + \")\";\n\t} /**/\n});\n\n/* ---------------------------\n/* Google Analytics\n/* --------------------------- */\n// if (window.GTAG_ENABLED && window.ga) {\nif (window.ga) {\n\tPlayableRenderer = (function(PlayableRenderer) {\n\n\t\t// /** @type {module:underscore.strings/dasherize} */\n\t\t// var dasherize = require(\"underscore.string/dasherize\");\n\n\t\tvar dasherize = function(s) {\n\t\t\tString(s).trim().replace(/([A-Z])/g, '-$1').replace(/[-_\\s]+/g, '-').toLowerCase()\n\t\t};\n\n\t\t// var readyEvents = [\"playing\", \"waiting\", \"ended\"];\n\t\t// var userEvents = [\"play\", \"pause\"];\n\n\t\treturn PlayableRenderer.extend({\n\n\t\t\t/** @override */\n\t\t\tinitialize: function() {\n\t\t\t\tvar retval = PlayableRenderer.prototype.initialize.apply(this, arguments);\n\t\t\t\tthis._gaEventSuffix = this.playbackRequested ? \"-autoplay\" : \"\";\n\t\t\t\treturn retval;\n\t\t\t},\n\n\t\t\t/** @override */\n\t\t\t_onPlaybackToggle: function(ev) {\n\t\t\t\tvar retval = PlayableRenderer.prototype._onPlaybackToggle.apply(this, arguments);\n\t\t\t\tif (window.ga) {\n\t\t\t\t\twindow.ga(\"send\", {\n\t\t\t\t\t\thitType: \"event\",\n\t\t\t\t\t\teventCategory: dasherize(this.cidPrefix),\n\t\t\t\t\t\teventAction: (this.playbackRequested ? \"play\" : \"pause\") + this._gaEventSuffix,\n\t\t\t\t\t\teventLabel: this.model.get(\"text\"),\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"%s::_onPlaybackToggle window.ga is %s\", this.cid, window.ga);\n\t\t\t\t}\n\t\t\t\treturn retval;\n\t\t\t},\n\n\t\t\t// /** @override */\n\t\t\t// _togglePlayback: function(newPlayState) {\n\t\t\t// \tvar retval = PlayableRenderer.prototype._togglePlayback.apply(this, arguments);\n\t\t\t// \twindow.ga(\"send\", {\n\t\t\t// \t\thitType: \"event\",\n\t\t\t// \t\teventCategory: \"Playable\",\n\t\t\t// \t\teventAction: this.playbackRequested ? \"play\" : \"pause\",\n\t\t\t// \t\teventLabel: this.model.get(\"text\"),\n\t\t\t// \t});\n\t\t\t// \treturn retval;\n\t\t\t// },\n\t\t});\n\t})(PlayableRenderer);\n}\n\n// if (DEBUG) {\n// \tPlayableRenderer.prototype._logFlags = \"\";\n//\n// \tPlayableRenderer = (function(PlayableRenderer) {\n// \t\tif (!PlayableRenderer.LOG_TO_SCREEN) return PlayableRenderer;\n//\n// \t\t/** @type {module:underscore.strings/lpad} */\n// \t\tvar lpad = require(\"underscore.string/lpad\");\n//\n// \t\treturn PlayableRenderer.extend({\n// \t\t\t_canResumePlayback: function() {\n// \t\t\t\tvar retval = PlayableRenderer.prototype._canResumePlayback.apply(this.arguments);\n// \t\t\t\tconsole.log(\"[scroll] %s::_canResumePlayback():%s\", this.cid, retval, {\n// \t\t\t\t\t\"enabled\": this.enabled,\n// \t\t\t\t\t\"selected\": (!!this.model.selected),\n// \t\t\t\t\t\"playbackRequested\": this.playbackRequested,\n// \t\t\t\t\t\"attached\": this.attached,\n// \t\t\t\t\t\"parentView\": (this.parentView && this.parentView.cid),\n// \t\t\t\t\t\"!scrolling\": (this.parentView && !this.parentView.scrolling),\n// \t\t\t\t\t\"mediaState\": this.mediaState,\n// \t\t\t\t\t// \"!document.hidden\": !document[visibilityHiddenProp],\n// \t\t\t\t\t\"visibilityState\": document[visibilityStateProp]\n// \t\t\t\t});\n// \t\t\t\treturn retval;\n// \t\t\t},\n// \t\t});\n// \t})(PlayableRenderer);\n// }\n\nmodule.exports = PlayableRenderer;\n",
    "\"use strict\";\n// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"placeholder sizing\\\"></div>\\n<div class=\\\"content\\\">\\n\t<div class=\\\"media-border content-size\\\"></div>\\n\t<div class=\\\"controls content-size\\\">\\n\t\t<canvas class=\\\"progress-meter\\\"></canvas>\\n\t</div>\\n\t<div class=\\\"sequence media-size\\\">\\n\t\t<img class=\\\"sequence-step current default\\\" alt=\\\"\"\n    + alias4(((helper = (helper = helpers.text || (depth0 != null ? depth0.text : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"text\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" longdesc=\\\"#desc_m\"\n    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" />\\n\t</div>\\n\t<div class=\\\"overlay media-size play-toggle-hitarea\\\">\\n\t\t<canvas class=\\\"play-toggle\\\"/>\\n\t</div>\\n</div>\\n\";\n},\"useData\":true});\n",
    "/**\n * @module app/view/render/SequenceRenderer\n */\n\n/* --------------------------- *\n * Imports\n * --------------------------- */\n\n/** @type {module:backbone.babysitter} */\nconst Container = require(\"backbone.babysitter\");\n\n/** @type {module:app/view/base/View} */\nconst View = require(\"app/view/base/View\");\n/** @type {module:app/view/render/PlayableRenderer} */\nconst PlayableRenderer = require(\"app/view/render/PlayableRenderer\");\n// /** @type {module:app/model/SelectableCollection} */\n// var SelectableCollection = require(\"app/model/SelectableCollection\");\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n\n/** @type {module:app/view/component/CanvasProgressMeter} */\nconst ProgressMeter = require(\"app/view/component/CanvasProgressMeter\");\n/** @type {module:app/view/component/PlayToggleSymbol} */\nconst PlayToggleSymbol = require(\"app/view/component/PlayToggleSymbol\");\n\n/** @type {module:utils/Timer} */\nconst Timer = require(\"utils/Timer\");\n// /** @type {Function} */\n// var transitionEnd = require(\"utils/event/transitionEnd\");\n// /** @type {module:utils/prefixedProperty} */\n// var prefixed = require(\"utils/prefixedProperty\");\n\n/** @type {Function} */\nconst _whenImageLoads = require(\"app/view/promise/_whenImageLoads\");\n/** @type {module:app/view/promise/_loadImageAsObjectURL} */\nconst _loadImageAsObjectURL = require(\"app/view/promise/_loadImageAsObjectURL\");\n// /** @type {Function} */\n// var whenSelectionDistanceIs = require(\"app/view/promise/whenSelectionDistanceIs\");\n// var whenSelectTransitionEnds = require(\"app/view/promise/whenSelectTransitionEnds\");\n// var whenDefaultImageLoads = require(\"app/view/promise/whenDefaultImageLoads\");\n\n// /** @type {Function} */\n// var Color = require(\"color\");\n// var duotone = require(\"utils/canvas/bitmap/duotone\");\n// var stackBlurRGB = require(\"utils/canvas/bitmap/stackBlurRGB\");\n// var stackBlurMono = require(\"utils/canvas/bitmap/stackBlurMono\");\n// var getAverageRGBA = require(\"utils/canvas/bitmap/getAverageRGBA\");\n\nconst errorTemplate = require(\"../template/ErrorBlock.hbs\");\n\nvar MIN_STEP_INTERVAL = 2 * Globals.TRANSITION_DURATION + Globals.TRANSITION_DELAY_INTERVAL;\nvar DEFAULT_STEP_INTERVAL = 6 * Globals.TRANSITION_DURATION + Globals.TRANSITION_DELAY_INTERVAL;\n\n\n/* --------------------------- *\n * Private classes\n * --------------------------- */\n\n/**\n * @constructor\n * @type {module:app/view/render/SequenceRenderer.PrefetechedSourceRenderer}\n */\nvar PrefetechedSourceRenderer = View.extend({\n\n\tcidPrefix: \"sequenceStepRenderer\",\n\t/** @type {string} */\n\tclassName: \"sequence-step\",\n\t/** @type {string} */\n\ttagName: \"img\",\n\n\tproperties: {\n\t\tready: {\n\t\t\tget: function() {\n\t\t\t\treturn this._ready;\n\t\t\t}\n\t\t}\n\t},\n\n\t/** @override */\n\tinitialize: function(opts) {\n\t\t!this.el.hasAttribute(\"alt\") && this.el.setAttribute(\"alt\", this.model.get(\"src\"));\n\t\t// this.el.setAttribute(\"longdesc\", this.model.get(\"original\"));\n\n\t\tif (this.model.has(\"prefetched\")) {\n\t\t\tthis._renderPrefetched();\n\t\t} else {\n\t\t\tthis.listenTo(this.model, \"change:prefetched\", this._renderPrefetched);\n\t\t}\n\t\tthis.listenTo(this.model, \"selected deselected\", this._renderSelection);\n\t\tthis._renderSelection();\n\t},\n\n\t_renderSelection: function() {\n\t\tthis.el.classList.toggle(\"current\", !!this.model.selected);\n\t},\n\n\t_renderPrefetched: function() {\n\t\tvar prefetched = this.model.get(\"prefetched\");\n\t\tif (prefetched !== this.el.src) {\n\t\t\tthis.el.src = prefetched;\n\t\t}\n\t\t_whenImageLoads(this.el).then(\n\t\t\tfunction(el) {\n\t\t\t\tthis.requestAnimationFrame(function(tstamp) {\n\t\t\t\t\tthis._setReady(true);\n\t\t\t\t});\n\t\t\t}.bind(this),\n\t\t\tfunction(err) {\n\t\t\t\t// this._setReady(false);\n\t\t\t\t(err instanceof Error) || (err = new Error(\"cannot load prefetched url\"));\n\t\t\t\tthrow err;\n\t\t\t}.bind(this)\n\t\t);\n\t},\n\n\t/** @type {boolean} */\n\t_ready: false,\n\n\t_setReady: function(ready) {\n\t\tif (this._ready !== ready) {\n\t\t\tthis._ready = !!(ready); // make bool\n\t\t\tthis.trigger(\"renderer:ready\", this);\n\t\t}\n\t},\n\n\trender: function() {\n\t\t// if (this.model.has(\"prefetched\")) {\n\t\t// \tthis._renderPrefetched();\n\t\t// }\n\t\t// this.el.classList.toggle(\"current\", !!this.model.selected);\n\t\tconsole.log(\"%s::render\", this.cid);\n\t\treturn this;\n\t},\n});\n\n/**\n * @constructor\n * @type {module:app/view/render/SequenceRenderer.SimpleSourceRenderer}\n */\n// var SimpleSourceRenderer = View.extend({\n//\n// \tcidPrefix: \"sequenceStepRenderer\",\n// \t/** @type {string} */\n// \tclassName: \"sequence-step\",\n// \t/** @type {string} */\n// \ttagName: \"img\",\n//\n// \t/** @override */\n// \tinitialize: function (options) {\n// \t\t// this.el.classList.toggle(\"current\", this.model.hasOwnProperty(\"selected\"));\n// \t\tthis.el.classList.toggle(\"current\", !!this.model.selected);\n// \t\tthis.listenTo(this.model, {\n// \t\t\t\"selected\": function () {\n// \t\t\t\tthis.el.classList.add(\"current\");\n// \t\t\t},\n// \t\t\t\"deselected\": function () {\n// \t\t\t\tthis.el.classList.remove(\"current\");\n// \t\t\t}\n// \t\t});\n// \t\tif (this.el.src === \"\") {\n// \t\t\tthis.el.src = Globals.MEDIA_DIR + \"/\" + this.model.get(\"src\");\n// \t\t}\n//\n// \t\tif (this.model.has(\"error\")) {\n// \t\t\tthis._onModelError();\n// \t\t} else {\n// \t\t\tthis.listenToOnce(this.model, \"change:error\", this._onModelError);\n// \t\t\t// this.listenToOnce(this.model, {\n// \t\t\t// \t\"change:source\": this._onModelSource,\n// \t\t\t// \t\"change:error\": this._onModelError,\n// \t\t\t// });\n// \t\t}\n// \t},\n//\n// \t// _onModelSource: function() {\n// \t// \tthis.el.src = Globals.MEDIA_DIR + \"/\" + this.model.get(\"src\");\n// \t// \t// console.log(\"%s::change:src\", this.cid, this.model.get(\"src\"));\n// \t// },\n//\n// \t_onModelError: function() {\n// \t\tvar err = this.model.get(\"error\");\n// \t\tvar errEl = document.createElement(\"div\");\n// \t\terrEl.className = \"error color-bg\" + (this.model.selected? \" current\" : \"\");\n// \t\terrEl.innerHTML = errorTemplate(err);\n// \t\tthis.setElement(errEl, true);\n// \t\tconsole.log(\"%s::change:error\", this.cid, err.message, err.infoSrc);\n// \t},\n// });\n\nvar SourceErrorRenderer = View.extend({\n\n\t/** @type {string} */\n\tclassName: \"sequence-step error\",\n\t/** @override */\n\tcidPrefix: \"sourceErrorRenderer\",\n\t/** @override */\n\ttemplate: errorTemplate,\n\t/** @type {boolean} */\n\tready: true,\n\n\tinitialize: function(opts) {\n\t\t// var handleSelectionChange = function onSelectionChange () {\n\t\t// \tthis.el.classList.toggle(\"current\", !!this.model.selected);\n\t\t// };\n\t\t// this.listenTo(this.model, \"selected deselected\", handleSelectionChange);\n\t\t// // this.el.classList.toggle(\"current\", !!this.model.selected);\n\t\t// handleSelectionChange.call(this);\n\t\tthis.listenTo(this.model, \"selected deselected\", function() {\n\t\t\tthis.el.classList.toggle(\"current\", !!this.model.selected);\n\t\t});\n\t},\n\n\trender: function() {\n\t\tthis.el.classList.toggle(\"current\", !!this.model.selected);\n\t\tthis.el.innerHTML = this.template(this.model.get(\"error\"));\n\t\treturn this;\n\t},\n});\n\nvar SequenceStepRenderer = PrefetechedSourceRenderer;\n// var SequenceStepRenderer = SimpleSourceRenderer;\n\n/**\n * @constructor\n * @type {module:app/view/render/SequenceRenderer}\n */\nvar SequenceRenderer = PlayableRenderer.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"sequenceRenderer\",\n\t/** @type {string} */\n\tclassName: PlayableRenderer.prototype.className + \" sequence-item\",\n\t/** @type {Function} */\n\ttemplate: require(\"./SequenceRenderer.hbs\"),\n\n\t/* --------------------------- *\n\t/* initialize\n\t/* --------------------------- */\n\n\tinitialize: function(opts) {\n\t\tthis.sources = this.model.get(\"sources\");\n\t\tPlayableRenderer.prototype.initialize.apply(this, arguments);\n\t},\n\n\t/* --------------------------- *\n\t * children\n\t * --------------------------- */\n\n\t/** @override */\n\tcreateChildren: function() {\n\t\tPlayableRenderer.prototype.createChildren.apply(this, arguments);\n\n\t\tthis.placeholder = this.el.querySelector(\".placeholder\");\n\t\tthis.sequence = this.content.querySelector(\".sequence\");\n\n\t\t// styles\n\t\t// ---------------------------------\n\t\tvar s, attrs = this.model.attrs();\n\t\t// var s, attrs = this.model.get(\"attrs\");\n\t\ts = _.pick(attrs, \"box-shadow\", \"border\", \"border-radius\");\n\t\t_.extend(this.content.querySelector(\".media-border\").style, s);\n\t\ts = _.pick(attrs, \"border-radius\");\n\t\t_.extend(this.sequence.style, s);\n\t\t_.extend(this.placeholder.style, s);\n\n\t\t// model\n\t\t// ---------------------------------\n\t\tthis.sources.select(this.model.get(\"source\"));\n\n\t\t// itemViews\n\t\t// ---------------------------------\n\t\tthis.itemViews = new Container();\n\t\t// add default image as renderer (already in DOM)\n\t\tthis.itemViews.add(new SequenceStepRenderer({\n\t\t\tel: this.getDefaultImage(),\n\t\t\tmodel: this.model.get(\"source\")\n\t\t}));\n\t},\n\n\t/* --------------------------- *\n\t * layout/render\n\t * --------------------------- */\n\n\t/** @override */\n\trender: function() {\n\t\tPlayableRenderer.prototype.render.apply(this, arguments);\n\n\t\tvar els, el, i, cssW, cssH;\n\t\tvar content = this.content;\n\n\t\t// media-size\n\t\t// ---------------------------------\n\t\tcssW = this.metrics.media.width + \"px\";\n\t\tcssH = this.metrics.media.height + \"px\";\n\n\t\tels = this.el.querySelectorAll(\".media-size\");\n\t\tfor (i = 0; i < els.length; i++) {\n\t\t\tel = els.item(i);\n\t\t\tel.style.width = cssW;\n\t\t\tel.style.height = cssH;\n\t\t}\n\t\tcontent.style.width = cssW;\n\t\tcontent.style.height = cssH;\n\n\t\t// content-position\n\t\t// ---------------------------------\n\t\tvar cssX, cssY;\n\t\tcssX = this.metrics.content.x + \"px\";\n\t\tcssY = this.metrics.content.y + \"px\";\n\t\tcontent.style.left = cssX;\n\t\tcontent.style.top = cssY;\n\n\t\tel = this.el.querySelector(\".controls\");\n\t\t// el.style.left = cssX;\n\t\t// el.style.top = cssY;\n\t\tel.style.width = this.metrics.content.width + \"px\";\n\t\tel.style.height = this.metrics.content.height + \"px\";\n\n\t\t// // content-size\n\t\t// // ---------------------------------\n\t\t// cssW = this.metrics.content.width + \"px\";\n\t\t// cssH = this.metrics.content.height + \"px\";\n\t\t//\n\t\t// els = this.el.querySelectorAll(\".content-size\");\n\t\t// for (i = 0; i < els.length; i++) {\n\t\t// \tel = els.item(i);\n\t\t// \tel.style.width = cssW;\n\t\t// \tel.style.height = cssH;\n\t\t// }\n\n\t\treturn this;\n\t},\n\n\t/* --------------------------- *\n\t * initializeAsync\n\t * --------------------------- */\n\n\tinitializePlayable: function() {\n\t\t// model\n\t\t// ---------------------------------\n\t\t// this.sources.select(this.model.get(\"source\"));\n\t\tthis.content.classList.add(\"started\");\n\n\t\t// Sequence model\n\t\t// ---------------------------------\n\t\tPlayableRenderer.whenSelectionDistanceIs(this, 0)\n\t\t\t// .then(function(view) {\n\t\t\t// \t/* defaultImage is loaded, add `started` rightaway */\n\t\t\t// \tview.content.classList.add(\"started\");\n\t\t\t// \treturn view;\n\t\t\t// })\n\t\t\t.then(this._preloadAllItems, function(err) {\n\t\t\t\treturn (err instanceof View.ViewError) ? (void 0) : err; // Ignore ViewError\n\t\t\t});\n\n\t\tthis._sequenceInterval = Math.max(parseInt(this.model.attr(\"@sequence-interval\")), MIN_STEP_INTERVAL) || DEFAULT_STEP_INTERVAL;\n\n\t\t// timer\n\t\t// ---------------------------------\n\t\t/* timer will be started when _validatePlayback is called from _onModelSelected */\n\t\tthis.timer = new Timer();\n\t\tthis.listenTo(this, \"view:removed\", function() {\n\t\t\tthis.timer.stop();\n\t\t\tthis.stopListening(this.timer);\n\t\t});\n\n\t\tthis.listenTo(this.timer, {\n\t\t\t\"start\": this._onTimerStart,\n\t\t\t\"resume\": this._onTimerResume,\n\t\t\t\"pause\": this._onTimerPause,\n\t\t\t\"end\": this._onTimerEnd,\n\t\t\t// \"stop\": function () {}, // stop is only called on view remove\n\t\t});\n\n\t\t// play-toggle-symbol\n\t\t// ---------------------------------\n\t\tthis._playToggleSymbol = new PlayToggleSymbol(_.extend({\n\t\t\tel: this.el.querySelector(\".play-toggle\")\n\t\t}, this._playToggleSymbol || {}));\n\n\t\t// progress-meter model\n\t\t// ---------------------------------\n\t\tthis._sourceProgressByIdx = this.sources.map(function() {\n\t\t\treturn 0;\n\t\t});\n\t\tthis._sourceProgressByIdx[0] = 1; // first item is already loaded\n\n\t\t// progress-meter\n\t\t// ---------------------------------\n\t\tthis.progressMeter = new ProgressMeter({\n\t\t\tel: this.el.querySelector(\".progress-meter\"),\n\t\t\tcolor: this.model.attr(\"color\"),\n\t\t\t// backgroundColor: this.model.attr(\"background-color\"),\n\t\t\tvalues: {\n\t\t\t\tavailable: this._sourceProgressByIdx.concat(),\n\t\t\t},\n\t\t\tmaxValues: {\n\t\t\t\tamount: this.sources.length,\n\t\t\t\tavailable: this.sources.length,\n\t\t\t},\n\t\t\tlabelFn: (function() {\n\t\t\t\tif (this.playbackRequested === false) return Globals.PAUSE_CHAR;\n\t\t\t\treturn (this.sources.selectedIndex + 1) + \"/\" + this.sources.length;\n\t\t\t}).bind(this)\n\t\t});\n\t\t// this.el.querySelector(\".top-bar\")\n\t\t//\t\t.appendChild(this.progressMeter.render().el);\n\t},\n\n\tinitializeAsync: function() {\n\t\treturn PlayableRenderer.prototype.initializeAsync.apply(this, arguments)\n\t\t\t.then(\n\t\t\t\tfunction(view) {\n\t\t\t\t\treturn view.whenAttached();\n\t\t\t\t})\n\t\t\t.then(function(view) {\n\t\t\t\tview.initializePlayable();\n\t\t\t\t// view.updateOverlay(view.defaultImage, view.playToggle); //view.overlay);\n\t\t\t\tview.listenToSelection();\n\t\t\t\treturn view;\n\t\t\t});\n\t},\n\n\twhenInitialized: function(view) {\n\t\tvar retval = PlayableRenderer.prototype.whenInitialized.apply(this, arguments);\n\t\tview._validatePlayback();\n\t\treturn retval;\n\t},\n\n\t/* --------------------------- *\n\t * _preloadAllItems\n\t * --------------------------- */\n\n\t_preloadAllItems: function(view) {\n\t\tview.once(\"view:remove\", function() {\n\t\t\tvar silent = { silent: true };\n\t\t\tview.sources.forEach(function(item, index, sources) {\n\t\t\t\t// view.stopListening(item, \"change:progress\");\n\t\t\t\tvar prefetched = item.get(\"prefetched\");\n\t\t\t\tif (prefetched) {\n\t\t\t\t\titem.set(\"progress\", 0, silent);\n\t\t\t\t\titem.unset(\"prefetched\", silent);\n\t\t\t\t\tif (/^blob\\:/.test(prefetched)) {\n\t\t\t\t\t\tURL.revokeObjectURL(prefetched);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn view.sources.reduce(function(lastPromise, item, index, sources) {\n\t\t\treturn lastPromise.then(function(view) {\n\t\t\t\tif (view._viewPhase === \"disposed\") {\n\t\t\t\t\t/** do nothing */\n\t\t\t\t\treturn view;\n\t\t\t\t} else\n\t\t\t\tif (item.has(\"prefetched\")) {\n\t\t\t\t\tview._updateItemProgress(1, index);\n\t\t\t\t\treturn view;\n\t\t\t\t} else {\n\t\t\t\t\tvar onItemProgress = function(item, progress) {\n\t\t\t\t\t\tview._updateItemProgress(progress, index);\n\t\t\t\t\t};\n\t\t\t\t\tview.listenTo(item, \"change:progress\", onItemProgress);\n\t\t\t\t\tview.once(\"view:remove\", function(view) {\n\t\t\t\t\t\tview.stopListening(item, \"change:progress\", onItemProgress);\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log(\"%s:_preloadAllItems\", view.cid, item.get(\"original\"), item.get(\"mime\"));\n\t\t\t\t\treturn _loadImageAsObjectURL(item.get(\"original\"),\n\t\t\t\t\t\t\tfunction(progress, request) {\n\t\t\t\t\t\t\t\t/* NOTE: Since we are calling URL.revokeObjectURL when view is removed, also abort incomplete requests. Otherwise, clear the callback reference from XMLHttpRequest.onprogress  */\n\t\t\t\t\t\t\t\tif (view._viewPhase === \"disposed\") {\n\t\t\t\t\t\t\t\t\t//console.warn(\"%s::_preloadAllItems aborting XHR [%s %s] (%s)\", view.cid, request.status, request.readyState, item.get(\"original\"), request);\n\t\t\t\t\t\t\t\t\trequest.abort();\n\t\t\t\t\t\t\t\t\t// request.onprogress = void 0;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\titem.set(\"progress\", progress);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\tfunction(pUrl) {\n\t\t\t\t\t\t\t\titem.set({\n\t\t\t\t\t\t\t\t\t\"progress\": pUrl ? 1 : 0,\n\t\t\t\t\t\t\t\t\t\"prefetched\": pUrl\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn view;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfunction(err) {\n\t\t\t\t\t\t\t\titem.set({\n\t\t\t\t\t\t\t\t\t\"progress\": 0,\n\t\t\t\t\t\t\t\t\t\"error\": err\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn view;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}, Promise.resolve(view));\n\t},\n\n\t// _preloadAllItems2: function(view) {\n\t// \treturn view.sources.reduce(function(lastPromise, item, index, sources) {\n\t// \t\treturn lastPromise.then(function(view) {\n\t// \t\t\tvar itemView = view._getItemView(item);\n\t// \t\t\treturn _whenImageLoads(itemView.el).then(function(url){\n\t// \t\t\t\tview._updateItemProgress(1, index);\n\t// \t\t\t\treturn view;\n\t// \t\t\t}, function(err) {\n\t// \t\t\t\tview._updateItemProgress(0, index);\n\t// \t\t\t\titem.set(\"error\", err);\n\t// \t\t\t\treturn view;\n\t// \t\t\t});\n\t// \t\t});\n\t// \t}, Promise.resolve(view));\n\t// },\n\n\t_updateItemProgress: function(progress, index) {\n\t\tthis._sourceProgressByIdx[index] = progress;\n\t\tif (this.progressMeter) {\n\t\t\tthis.progressMeter.valueTo(\"available\", this._sourceProgressByIdx, 300);\n\t\t}\n\t},\n\n\t/* ---------------------------\n\t * PlayableRenderer implementation\n\t * --------------------------- */\n\n\t/** @override initial value */\n\t_playbackRequested: true,\n\n\t/** @type {Boolean} internal store */\n\t_paused: true,\n\n\t/** @override */\n\t_isMediaPaused: function() {\n\t\treturn this._paused;\n\t},\n\n\t/** @override */\n\t_playMedia: function() {\n\t\tif (!this._paused) return;\n\t\tthis._paused = false;\n\n\t\tif (!this._isMediaWaiting()) {\n\t\t\tif (this.timer.status === Timer.PAUSED) {\n\t\t\t\tthis.timer.start(); // resume, actually\n\t\t\t} else {\n\t\t\t\tthis.timer.start(this._sequenceInterval);\n\t\t\t}\n\t\t}\n\t},\n\n\t/** @override */\n\t_pauseMedia: function() {\n\t\tif (this._paused) return;\n\t\tthis._paused = true;\n\t\tif (this.timer.status === Timer.STARTED) {\n\t\t\tthis.timer.pause();\n\t\t}\n\t},\n\n\t// /** @override */\n\t// _renderPlaybackState: function() {\n\t// \t// if (!this.content.classList.contains(\"started\")) {\n\t// \t// \tthis.content.classList.add(\"started\");\n\t// \t// }\n\t// \tPlayableRenderer.prototype._renderPlaybackState.apply(this, arguments);\n\t// },\n\n\t/* --------------------------- *\n\t/* sequence private\n\t/* --------------------------- */\n\n\t_onTimerStart: function(duration) {\n\t\tvar item;\n\t\tif (this.sources.selectedIndex === -1) {\n\t\t\titem = this.model.get(\"source\");\n\t\t} else {\n\t\t\titem = this.sources.followingOrFirst();\n\t\t}\n\t\tthis.sources.select(item);\n\t\tthis.progressMeter.valueTo(\"amount\", this.sources.selectedIndex + 1, duration);\n\t\tthis.content.classList.toggle(\"playback-error\", item.has(\"error\"));\n\n\t\t// var currView = this.itemViews.findByModel(item);\n\t\t// if (!item.has(\"error\") && currView !== null) {\n\t\t// \tthis._playToggleSymbol.setImageSource(currView.el);\n\t\t// \t// this.updateOverlay(currView.el, this.playToggle);\n\t\t// } else {\n\t\t// \tthis._playToggleSymbol.setImageSource(null);\n\t\t// }\n\n\t\t// // init next renderer now to have smoother transitions\n\t\t// this._getItemView(this.sources.followingOrFirst());\n\t},\n\n\t_onTimerResume: function(duration) {\n\t\tthis.progressMeter.valueTo(\"amount\", this.sources.selectedIndex + 1, duration);\n\t},\n\n\t_onTimerPause: function(duration) {\n\t\tthis.progressMeter.valueTo(\"amount\", this.progressMeter.getRenderedValue(\"amount\"), 0);\n\t},\n\n\t/* last completely played sequence index */\n\t// _lastPlayedIndex: -1,\n\n\t_onTimerEnd: function() {\n\t\tvar nextItem, nextView;\n\n\t\tvar showNextView = function(result) {\n\t\t\t// console.log(\"%s::showNextView %sms %s\", context.cid, context._sequenceInterval, nextItem.cid)\n\t\t\tthis.setImmediate(function() {\n\t\t\t\tif (!this.mediaPaused) {\n\t\t\t\t\tthis.timer.start(this._sequenceInterval);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t}.bind(this);\n\n\t\t// get next item init next renderer\n\t\tnextItem = this.sources.followingOrFirst();\n\t\tnextView = this._getItemView(nextItem);\n\n\t\tif (nextItem.has(\"error\")) {\n\t\t\tshowNextView();\n\t\t} else if (nextItem.has(\"prefetched\")) {\n\t\t\t_whenImageLoads(nextView.el).then(showNextView, showNextView);\n\t\t} else {\n\t\t\t/* TODO: add ga event 'media-waiting' */\n\t\t\t// window.ga(\"send\", \"event\", \"sequence-item\", \"waiting\", this.model.get(\"text\"));\n\t\t\t// console.log(\"%s:[waiting] %sms %s\", context.cid, nextItem.cid);\n\t\t\tthis._toggleWaiting(true);\n\t\t\tthis.listenToOnce(nextItem, \"change:prefetched change:error\", function(model) {\n\t\t\t\t// console.log(\"%s:[playing] %sms %s\", context.cid, nextItem.cid);\n\t\t\t\tthis._toggleWaiting(false);\n\t\t\t\t_whenImageLoads(nextView.el).then(showNextView, showNextView);\n\t\t\t});\n\t\t}\n\t},\n\n\t_getItemView: function(item) {\n\t\tvar view = this.itemViews.findByModel(item);\n\t\tif (!view) {\n\t\t\tview = new(item.has(\"error\") ? SourceErrorRenderer : SequenceStepRenderer)({\n\t\t\t\tmodel: item\n\t\t\t});\n\t\t\tthis.itemViews.add(view);\n\t\t\tthis.sequence.appendChild(view.render().el);\n\t\t}\n\t\treturn view;\n\t},\n\n\t/* --------------------------- *\n\t/* progress meter\n\t/* --------------------------- */\n\n\t// _createDefaultItemData: function() {\n\t// \tvar canvas = document.createElement(\"canvas\");\n\t// \tvar context = canvas.getContext(\"2d\");\n\t// \tvar imageData = this._drawMediaElement(context).getImageData(0, 0, canvas.width, canvas.height);\n\t//\n\t// \tvar opts = { radius: 20 };\n\t// \tvar fgColor = new Color(this.model.attr(\"color\"));\n\t// \tvar bgColor = new Color(this.model.attr(\"background-color\"));\n\t// \tvar isFgDark = fgColor.luminosity() < bgColor.luminosity();\n\t// \topts.x00 = isFgDark? Color(fgColor).lighten(0.33) : Color(bgColor).darken(0.33);\n\t// \topts.xFF = isFgDark? Color(bgColor).lighten(0.33) : Color(fgColor).darken(0.33);\n\t//\n\t// \tstackBlurMono(imageData, opts);\n\t// \tduotone(imageData, opts);\n\t// \t// stackBlurRGB(imageData, opts);\n\t//\n\t// \tcontext.putImageData(imageData, 0, 0);\n\t// \treturn canvas.toDataURL();\n\t// },\n});\n\nif (DEBUG) {\n\tSequenceRenderer = (function(SequenceRenderer) {\n\t\tif (!SequenceRenderer.LOG_TO_SCREEN) return SequenceRenderer;\n\n\t\t// /** @type {module:underscore.strings/lpad} */\n\t\t// var rpad = require(\"underscore.string/rpad\");\n\t\t// /** @type {module:underscore.strings/lpad} */\n\t\t// var lpad = require(\"underscore.string/lpad\");\n\t\t// /** @type {module:underscore.strings/capitalize} */\n\t\t// var caps = require(\"underscore.string/capitalize\");\n\n\t\treturn SequenceRenderer.extend({\n\t\t\t/** @override */\n\t\t\tinitialize: function() {\n\t\t\t\tSequenceRenderer.prototype.initialize.apply(this, arguments);\n\n\t\t\t\tthis.__logColors = _.extend({\n\t\t\t\t\t\"media:play\": \"darkred\",\n\t\t\t\t\t\"media:pause\": \"darkred\",\n\n\t\t\t\t\t\"timer:start\": \"darkgreen\",\n\t\t\t\t\t\"timer:end\": \"darkgreen\",\n\t\t\t\t\t\"timer:resume\": \"green\",\n\t\t\t\t\t\"timer:pause\": \"green\",\n\n\t\t\t\t\t\"load:progress\": \"blue\",\n\t\t\t\t\t\"load:complete\": \"darkblue\"\n\t\t\t\t}, this.__logColors);\n\t\t\t},\n\n\t\t\t// __getHeaderText: function() {\n\t\t\t// \tvar fmt1 = function(s) {\n\t\t\t// \t\treturn lpad(caps(s), 8).substr(0, 8).toUpperCase();\n\t\t\t// \t};\n\t\t\t// \tvar fmt2 = function(s) {\n\t\t\t// \t\treturn lpad(caps(s), 8).substr(0, 8).toUpperCase();\n\t\t\t// \t};\n\t\t\t// \tvar o = {\n\t\t\t// \t\t\"tstamp\": fmt1,\n\t\t\t// \t\t\"index\": fmt2,\n\t\t\t// \t\t\"duration\": fmt1,\n\t\t\t// \t\t\"playback\": fmt1,\n\t\t\t// \t\t\"media\": fmt1,\n\t\t\t// \t\t\"timer\": fmt1,\n\t\t\t// \t\t\"next\": fmt1,\n\t\t\t// \t};\n\t\t\t// \treturn Object.keys(o).map(function(s, i, a) {\n\t\t\t// \t\treturn o[s](s);\n\t\t\t// \t}).join(\" \");\n\t\t\t// \t// Object.keys(o).reduce(function(ss, s, i, a) {\n\t\t\t// \t// \treturn ss + \" \" + lpad(caps(s), 8).substr(0, 8).toUpperCase();\n\t\t\t// \t// }, \"\");\n\t\t\t// },\n\n\t\t\t__getHeaderText: function() {\n\t\t\t\treturn [\n\t\t\t\t\t\"tstamp\",\n\t\t\t\t\t\"index\",\n\t\t\t\t\t\"duration\",\n\t\t\t\t\t\"playback\",\n\t\t\t\t\t\"media\",\n\t\t\t\t\t\"timer\",\n\t\t\t\t\t\"next\",\n\t\t\t\t].map(function(s, i, a) {\n\t\t\t\t\treturn String(s).padStart(8).substr(0, 8).toUpperCase();\n\t\t\t\t}).join(\" \");\n\t\t\t},\n\n\t\t\t__logTimerEvent: function(evname, msg) {\n\t\t\t\tvar logMsg = [\n\t\t\t\t\tthis.sources.selectedIndex,\n\t\t\t\t\t(this.timer.getDuration() * .001).toFixed(3),\n\t\t\t\t\tthis.playbackRequested ? \">>\" : \"::\",\n\t\t\t\t\tthis.mediaPaused ? \"paused\" :\n\t\t\t\t\t(this.mediaWaiting ? \"waiting\" : \"playing\"),\n\t\t\t\t\tthis.timer.getStatus(),\n\t\t\t\t\tthis.sources.followingOrFirst().has(\"prefetched\") ? \"ready\" : \"pending\"\n\t\t\t\t].map(function(s, i, a) {\n\t\t\t\t\treturn String(s).padStart(8).substr(0, 8).toUpperCase();\n\t\t\t\t});\n\t\t\t\tmsg && logMsg.push(msg);\n\t\t\t\tlogMsg = logMsg.join(\" \");\n\n\t\t\t\tthis.__logMessage(logMsg, evname);\n\t\t\t\t// console.log(\"%s::[%s] %s\", this.cid, evname, logMsg);\n\t\t\t},\n\t\t\t_playMedia: function() {\n\t\t\t\tthis.__logTimerEvent(\"media:play\");\n\t\t\t\tSequenceRenderer.prototype._playMedia.apply(this, arguments);\n\t\t\t\t// this.__logTimerEvent(\"< media:play\");\n\t\t\t\t// console.log(\"%s::_playMedia()\", this.cid);\n\t\t\t},\n\t\t\t_pauseMedia: function() {\n\t\t\t\tthis.__logTimerEvent(\"media:pause\");\n\t\t\t\tSequenceRenderer.prototype._pauseMedia.apply(this, arguments);\n\t\t\t\t// this.__logTimerEvent(\"< media:pause\");\n\t\t\t\t// console.log(\"%s::_pauseMedia()\", this.cid);\n\t\t\t},\n\n\t\t\t_onTimerStart: function() {\n\t\t\t\tthis.__logTimerEvent(\"timer:start\");\n\t\t\t\tSequenceRenderer.prototype._onTimerStart.apply(this, arguments);\n\t\t\t},\n\t\t\t_onTimerResume: function() {\n\t\t\t\tthis.__logTimerEvent(\"timer:resume\");\n\t\t\t\tSequenceRenderer.prototype._onTimerResume.apply(this, arguments);\n\t\t\t},\n\t\t\t_onTimerPause: function() {\n\t\t\t\tthis.__logTimerEvent(\"timer:pause\");\n\t\t\t\tSequenceRenderer.prototype._onTimerPause.apply(this, arguments);\n\t\t\t},\n\t\t\t_onTimerEnd: function() {\n\t\t\t\tthis.__logTimerEvent(\"timer:end\");\n\t\t\t\tSequenceRenderer.prototype._onTimerEnd.apply(this, arguments);\n\t\t\t},\n\n\t\t\t_updateItemProgress: function(progress, srcIdx) {\n\t\t\t\tif (progress == 1) {\n\t\t\t\t\tthis.__logTimerEvent(\"load:complete\", \"item \" + srcIdx + \": complete\");\n\t\t\t\t} else\n\t\t\t\tif (srcIdx === this.sources.selectedIndex) {\n\t\t\t\t\tthis.__logTimerEvent(\"load:progress\", \"item \" + srcIdx + \": \" + progress);\n\t\t\t\t}\n\t\t\t\tSequenceRenderer.prototype._updateItemProgress.apply(this, arguments);\n\t\t\t},\n\n\t\t\t_preloadAllItems: function(view) {\n\t\t\t\tview.__logMessage(view.cid + \"::_preloadAllItems\", \"load:start\");\n\t\t\t\tSequenceRenderer.prototype._preloadAllItems.apply(view, arguments);\n\t\t\t},\n\t\t});\n\t})(SequenceRenderer);\n}\n\nmodule.exports = SequenceRenderer;\n",
    "\"use strict\";\n// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nvar partial$0 = require('../template/svg/FullscreenSymbol.hbs');\nHandlebarsCompiler.registerPartial('../template/svg/FullscreenSymbol.hbs', partial$0);\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<div class=\\\"placeholder sizing\\\"></div>\\n<div class=\\\"content media-border\\\">\\n\t<div class=\\\"controls content-size\\\">\\n\t\t<canvas class=\\\"progress-meter\\\"></canvas>\\n\t</div>\\n\t<div class=\\\"crop-box media-size\\\">\\n\t\t<video width=\\\"240\\\" height=\\\"180\\\" muted playsinline></video>\\n\t\t<img class=\\\"poster default\\\" alt=\\\"\"\n    + container.escapeExpression(((helper = (helper = helpers.text || (depth0 != null ? depth0.text : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"text\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" width=\\\"240\\\" height=\\\"180\\\" />\\n\t</div>\\n\t<div class=\\\"overlay media-size play-toggle-hitarea\\\">\\n\t\t\t<canvas class=\\\"play-toggle\\\"></canvas>\\n\t\t<a class=\\\"fullscreen-toggle\\\" href=\\\"javascript:(void 0)\\\">\\n\"\n    + ((stack1 = container.invokePartial(partials[\"../template/svg/FullscreenSymbol.hbs\"],depth0,{\"name\":\"../template/svg/FullscreenSymbol.hbs\",\"data\":data,\"indent\":\"\\t\\t\\t\",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"\t\t</a>\\n\t</div>\\n</div>\\n\";\n},\"usePartial\":true,\"useData\":true});\n",
    "/*global HTMLMediaElement, MediaError*/\n/**\n * @module app/view/render/VideoRenderer\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video\n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement\n * @see https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Media_events\n * @see https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_HTML5_audio_and_video\n */\n\n/* --------------------------- *\n * Imports\n * --------------------------- */\n\n// /** @type {module:backbone} */\n// var Backbone = require(\"backbone\");\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n/** @type {module:app/view/render/PlayableRenderer} */\nconst PlayableRenderer = require(\"app/view/render/PlayableRenderer\");\n/** @type {module:app/view/component/CanvasProgressMeter} */\nconst ProgressMeter = require(\"app/view/component/CanvasProgressMeter\");\n// /** @type {module:app/view/component/PlayToggleSymbol} */\nconst PlayToggleSymbol = require(\"app/view/component/PlayToggleSymbol\");\n\n// var stackBlurMono = require(\"utils/canvas/bitmap/stackBlurMono\");\n// var stackBlurRGB = require(\"utils/canvas/bitmap/stackBlurRGB\");\n\n// /** @type {module:utils/prefixedStyleName} */\n// var prefixedStyleName = require(\"utils/prefixedStyleName\");\n/** @type {module:utils/prefixedEvent} */\nconst prefixedEvent = require(\"utils/prefixedEvent\");\n\n// var whenViewIsAttached = require(\"app/view/promise/whenViewIsAttached\");\n// /** @type {Function} */\n// var whenSelectionDistanceIs = require(\"app/view/promise/whenSelectionDistanceIs\");\n\n/* --------------------------- *\n * private static\n * --------------------------- */\n\nvar fullscreenChangeEvent = prefixedEvent(\"fullscreenchange\", document);\n// var fullscreenErrorEvent = prefixedEvent(\"fullscreenerror\", document);\n\nvar formatTimecode = function(value) {\n\tif (isNaN(value)) return \"\"; //value = 0;\n\tif (value >= 3600) return ((value / 3600) | 0) + \"H\";\n\tif (value >= 60) return ((value / 60) | 0) + \"M\";\n\t// if (value >= 10) return \"0\" + (value | 0) + \"S\";\n\treturn (value | 0) + \"S\";\n};\n\nvar VIDEO_CROP_PX = Globals.VIDEO_CROP_PX;\nvar SYNC_TIMEOUT_MS = 1200;\nvar SYNC_THRESHOLD_MS = 100;\n\n/**\n * @constructor\n * @type {module:app/view/render/VideoRenderer}\n */\nvar VideoRenderer = PlayableRenderer.extend({\n\n\t/** @type {string} */\n\tcidPrefix: \"videoRenderer\",\n\t/** @type {string} */\n\tclassName: PlayableRenderer.prototype.className + \" video-item\",\n\t/** @type {Function} */\n\ttemplate: require(\"./VideoRenderer.hbs\"),\n\n\t// events: (function() {\n\t// \tvar ret = {};\n\t// \tret[PlayableRenderer.CLICK_EVENT + \" .fullscreen-toggle\"] = \"_onFullscreenToggle\";\n\t// \treturn ret;\n\t// }()),\n\n\t// events: function() {\n\t// \tvar events = {};\n\t// \tevents[PlayableRenderer.CLICK_EVENT + \" .fullscreen-toggle\"] = \"_onFullscreenToggle\";\n\t// \treturn _.extend(events, _.result(this, PlayableRenderer.prototype.events));\n\t// },\n\t// events: {\n\t// \t\"click .fullscreen-toggle\": \"_onFullscreenToggle\",\n\t// },\n\n\tproperties: {\n\t\tfullscreenToggle: {\n\t\t\t/** @return {HTMLElement} */\n\t\t\tget: function() {\n\t\t\t\treturn this._fullscreenToggle || (this._fullscreenToggle = this.el.querySelector(\".fullscreen-toggle\"));\n\t\t\t}\n\t\t},\n\t},\n\n\t/** @override */\n\tinitialize: function(opts) {\n\t\tPlayableRenderer.prototype.initialize.apply(this, arguments);\n\t\t_.bindAll(this,\n\t\t\t\"_updatePlaybackState\",\n\t\t\t\"_updateCurrTimeValue\",\n\t\t\t\"_updateBufferedValue\",\n\t\t\t\"_onMediaError\",\n\t\t\t\"_onMediaEnded\",\n\t\t\t// \"_onMediaPlayingOnce\",\n\t\t\t\"_onFullscreenChange\",\n\t\t\t\"_onFullscreenToggle\"\n\t\t);\n\t\t_.bindAll(this,\n\t\t\t\"_playbackTimeoutFn_playing\",\n\t\t\t\"_playbackTimeoutFn_waiting\"\n\t\t);\n\t\t// var onPeerSelect = function() {\n\t\t// \tthis.content.style.display = (this.getSelectionDistance() > 1)? \"none\": \"\";\n\t\t// };\n\t\t// this.listenTo(this.model.collection, \"select:one select:none\", onPeerSelect);\n\t\t// onPeerSelect();\n\t},\n\n\t/* --------------------------- *\n\t * children\n\t * --------------------------- */\n\n\t/** @override */\n\tcreateChildren: function() {\n\t\tPlayableRenderer.prototype.createChildren.apply(this, arguments);\n\n\t\tthis.placeholder = this.el.querySelector(\".placeholder\");\n\t\t// this.overlay = this.content.querySelector(\".overlay\");\n\t\tthis.video = this.content.querySelector(\"video\");\n\t\t// this.video.loop = this.model.attrs().hasOwnProperty(\"@video-loop\");\n\n\t\t// this.video.setAttribute(\"muted\", \"muted\");\n\t\t// this.video.setAttribute(\"playsinline\", \"playsinline\");\n\t\t// if (this.model.attr(\"@video-loop\") !== void 0) {\n\t\t// \tthis.video.setAttribute(\"loop\", \"loop\");\n\t\t// }\n\t\tthis.video.setAttribute(\"preload\", \"none\");\n\t\tif (this.video.controlList) this.video.controlList.add(\"nodownload\");\n\n\t\t// this.video.muted = true;\n\t\t// this.video.playsinline = true;\n\t\t// this.video.preload = \"auto\";\n\t\tthis.video.loop = this.model.attr(\"@video-loop\") !== void 0;\n\t\tthis.video.src = this.findPlayableSource(this.video);\n\t},\n\n\t/* --------------------------- *\n\t * layout/render\n\t * --------------------------- */\n\n\tmeasure: function() {\n\t\tPlayableRenderer.prototype.measure.apply(this, arguments);\n\n\t\t// NOTE: Vertical 1px video crop\n\t\t// - Cropped in CSS: video, .poster { margin-top: -1px; margin-bottom: -1px;}\n\t\t// - Cropped height is adjusted in metrics obj\n\t\t// - Crop amount added back to actual video on render()\n\t\tthis.metrics.media.height += VIDEO_CROP_PX * 2;\n\t\tthis.metrics.content.height += VIDEO_CROP_PX * 2;\n\t},\n\n\t/** @override */\n\trender: function() {\n\t\tPlayableRenderer.prototype.render.apply(this, arguments);\n\n\t\tvar els, el, i, cssW, cssH;\n\t\tvar img = this.defaultImage;\n\t\tvar content = this.content;\n\n\t\t// media-size\n\t\t// ---------------------------------\n\t\tcssW = this.metrics.media.width + \"px\";\n\t\tcssH = this.metrics.media.height + \"px\";\n\n\t\tels = this.el.querySelectorAll(\".media-size\");\n\t\tfor (i = 0; i < els.length; i++) {\n\t\t\tel = els.item(i);\n\t\t\tel.style.width = cssW;\n\t\t\tel.style.height = cssH;\n\t\t}\n\n\t\tcontent.style.width = cssW;\n\t\tcontent.style.height = (this.metrics.media.height + VIDEO_CROP_PX) + \"px\";\n\n\t\t// content-position\n\t\t// ---------------------------------\n\t\tvar cssX, cssY;\n\t\tcssX = this.metrics.content.x + \"px\";\n\t\tcssY = this.metrics.content.y + \"px\";\n\t\tcontent.style.left = cssX;\n\t\tcontent.style.top = cssY;\n\n\t\tel = this.el.querySelector(\".controls\");\n\t\t// el.style.left = cssX;\n\t\t// controls.style.top = cssY;\n\t\tel.style.width = this.metrics.content.width + \"px\";\n\t\tel.style.height = this.metrics.content.height + \"px\";\n\n\t\t// // content-size\n\t\t// // ---------------------------------\n\t\t// cssW = this.metrics.content.width + \"px\";\n\t\t// cssH = this.metrics.content.height + \"px\";\n\t\t//\n\t\t// els = this.el.querySelectorAll(\".content-size\");\n\t\t// for (i = 0; i < els.length; i++) {\n\t\t// \tel = els.item(i);\n\t\t// \tel.style.width = cssW;\n\t\t// \tel.style.height = cssH;\n\t\t// }\n\n\t\t// NOTE: elements below must use video's UNCROPPED height, so +2px\n\t\tthis.video.setAttribute(\"width\", this.metrics.media.width);\n\t\tthis.video.setAttribute(\"height\", this.metrics.media.height - VIDEO_CROP_PX * 2);\n\t\timg.setAttribute(\"width\", this.metrics.media.width);\n\t\timg.setAttribute(\"height\", this.metrics.media.height - VIDEO_CROP_PX * 2);\n\n\t\treturn this;\n\t},\n\n\t/* --------------------------- *\n\t * initializeAsync\n\t * --------------------------- */\n\n\tinitializeAsync: function() {\n\t\treturn Promise.resolve(this)\n\t\t\t.then(PlayableRenderer.whenSelectionIsContiguous)\n\t\t\t.then(PlayableRenderer.whenScrollingEnds)\n\t\t\t.then(PlayableRenderer.whenViewIsAttached)\n\t\t\t.then(\n\t\t\t\tfunction(view) {\n\t\t\t\t\t// console.log(\"%s::initializeAsync [attached, scrollend, selected > %o, preload:%s] ('%o')\", view.cid, view.model.getDistanceToSelected(), view.video.preload, view.model.get(\"name\"));\n\t\t\t\t\treturn Promise.all([\n\t\t\t\t\t\tPlayableRenderer.whenDefaultImageLoads(view),\n\t\t\t\t\t\tview.whenVideoHasMetadata(view),\n\t\t\t\t\t]).then(function() {\n\t\t\t\t\t\treturn view;\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t.then(\n\t\t\t\tfunction(view) {\n\t\t\t\t\t// console.log(\"%s::initializeAsync [defaultImage, preload:%s] ('%o')\", view.cid, view.video.preload, view.model.get(\"name\"));\n\t\t\t\t\tview.initializePlayable();\n\t\t\t\t\t// view.updateOverlay(view.defaultImage, view.playToggle); //view.overlay);\n\t\t\t\t\tview.listenToSelection();\n\t\t\t\t\treturn view;\n\t\t\t\t});\n\n\t\t// videoEl.setAttribute(\"preload\", \"metadata\");\n\t},\n\n\tinitializePlayable: function() {\n\t\t// When selected for the first time\n\t\t// ---------------------------------\n\t\tPlayableRenderer.whenSelectionDistanceIs(this, 0)\n\t\t\t.then(function(view) {\n\t\t\t\tview.video.setAttribute(\"preload\", \"auto\");\n\t\t\t\tview.video.preload = \"auto\";\n\t\t\t\t// console.log(\"%s::initializeAsync [selected, preload:%s] ('%o')\", view.cid, view.video.preload, view.model.get(\"name\"));\n\t\t\t\treturn view;\n\t\t\t})\n\t\t\t.catch(function(reason) {\n\t\t\t\tif (reason instanceof PlayableRenderer.ViewError) {\n\t\t\t\t\tconsole.log(\"%s::%s\", reason.view.cid, reason.message);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(reason);\n\t\t\t\t\t// return Promise.reject(reason);\n\t\t\t\t}\n\t\t\t});\n\t\t// play-toggle-symbol\n\t\t// ---------------------------------\n\t\tthis._playToggleSymbol = new PlayToggleSymbol(_.extend({\n\t\t\tel: this.el.querySelector(\".play-toggle\")\n\t\t}, this._playToggleSymbol || {}));\n\n\t\t// this._playToggleSymbol.setImageSource(this.defaultImage, 0, 0);\n\t\t// this.listenToElementOnce(this.video, \"timeupdate\", function(ev) {\n\t\t// \tthis._playToggleSymbol.setImageSource(this.video);\n\t\t// });\n\n\t\t// progress-meter\n\t\t// ---------------------------------\n\t\tthis.progressMeter = new ProgressMeter({\n\t\t\tel: this.el.querySelector(\".progress-meter\"),\n\t\t\tcolor: this.model.attr(\"color\"),\n\t\t\t// backgroundColor: this.model.attr(\"background-color\"),\n\t\t\tmaxValues: {\n\t\t\t\tamount: this.video.duration,\n\t\t\t\tavailable: this.video.duration,\n\t\t\t},\n\t\t\tlabelFn: (function(value, total) {\n\t\t\t\tif (!this._started || this.video.ended || isNaN(value)) {\n\t\t\t\t\treturn formatTimecode(total);\n\t\t\t\t} else if (!this.playbackRequested) {\n\t\t\t\t\treturn Globals.PAUSE_CHAR;\n\t\t\t\t} else {\n\t\t\t\t\treturn formatTimecode(total - value);\n\t\t\t\t}\n\t\t\t}).bind(this)\n\t\t});\n\t\t// this.el.querySelector(\".controls\").appendChild(this.progressMeter.el);\n\t\t// var el = this.el.querySelector(\".progress-meter\");\n\t\t// el.parentNode.replaceChild(this.progressMeter.el, el);\n\t\t// var parentEl = this.el.querySelector(\".controls\");\n\t\t// parentEl.insertBefore(this.progressMeter.el, parentEl.firstChild);\n\n\t\t// this._setPlayToggleSymbol(\"play-symbol\");\n\t\tthis._renderPlaybackState();\n\n\t\t// listen to video events\n\t\t// ---------------------------------\n\t\t// this.video.poster = this.model.get(\"source\").get(\"original\");\n\t\tthis.addMediaListeners();\n\t},\n\n\t/* --------------------------- *\n\t * whenVideoHasMetadata promise\n\t * --------------------------- */\n\n\twhenVideoHasMetadata: function(view) {\n\t\t// NOTE: not pretty !!!\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tvar videoEl = view.video;\n\t\t\tvar eventHandlers = {\n\t\t\t\tloadedmetadata: function(ev) {\n\t\t\t\t\tif (ev) removeEventListeners();\n\t\t\t\t\t// console.log(\"%s::whenVideoHasMetadata [%s] %s\", view.cid, \"resolved\", ev ? ev.type : \"sync\");\n\t\t\t\t\tresolve(view);\n\t\t\t\t},\n\t\t\t\tabort: function(ev) {\n\t\t\t\t\tif (ev) removeEventListeners();\n\t\t\t\t\treject(new PlayableRenderer.ViewError(view, new Error(\"whenVideoHasMetadata: view was removed\")));\n\t\t\t\t},\n\t\t\t\terror: function(ev) {\n\t\t\t\t\tif (ev) removeEventListeners();\n\t\t\t\t\tvar err;\n\t\t\t\t\tif (videoEl.error) {\n\t\t\t\t\t\terr = new Error(_.invert(MediaError)[videoEl.error.code]);\n\t\t\t\t\t\terr.infoCode = videoEl.error.code;\n\t\t\t\t\t} else {\n\t\t\t\t\t\terr = new Error(\"Unspecified error\");\n\t\t\t\t\t}\n\t\t\t\t\terr.infoSrc = videoEl.src;\n\t\t\t\t\terr.logMessage = \"whenVideoHasMetadata: \" + err.name + \" \" + err.infoSrc;\n\t\t\t\t\terr.logEvent = ev;\n\t\t\t\t\treject(err);\n\t\t\t\t},\n\t\t\t};\n\n\t\t\t//  (videoEl.preload == \"auto\" && videoEl.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA)\n\t\t\t// \t(videoEl.preload == \"metadata\" && videoEl.readyState >= HTMLMediaElement.HAVE_METADATA)\n\n\t\t\tif (videoEl.error) {\n\t\t\t\teventHandlers.error();\n\t\t\t} else if (videoEl.readyState >= HTMLMediaElement.HAVE_METADATA) {\n\t\t\t\teventHandlers.loadedmetadata();\n\t\t\t} else {\n\t\t\t\tvar sources = videoEl.querySelectorAll(\"source\");\n\t\t\t\tvar errTarget = sources.length > 0 ? sources.item(sources.length - 1) : videoEl;\n\t\t\t\tvar errCapture = errTarget === videoEl; // use capture with HTMLMediaElement\n\n\t\t\t\tvar removeEventListeners = function() {\n\t\t\t\t\terrTarget.removeEventListener(\"error\", eventHandlers.error, errCapture);\n\t\t\t\t\tfor (var ev in eventHandlers) {\n\t\t\t\t\t\tif (ev !== \"error\" && eventHandlers.hasOwnProperty(ev)) {\n\t\t\t\t\t\t\tvideoEl.removeEventListener(ev, eventHandlers[ev], false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\terrTarget.addEventListener(\"error\", eventHandlers.error, errCapture);\n\t\t\t\tfor (var ev in eventHandlers) {\n\t\t\t\t\tif (ev !== \"error\" && eventHandlers.hasOwnProperty(ev)) {\n\t\t\t\t\t\tvideoEl.addEventListener(ev, eventHandlers[ev], false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t/* NOTE: MS Edge ignores js property, using setAttribute */\n\t\t\t\tvideoEl.setAttribute(\"preload\", \"metadata\");\n\t\t\t\tvideoEl.preload = \"metadata\";\n\n\t\t\t\t// videoEl.setAttribute(\"poster\", view.get(\"source\").get(\"original\"));\n\t\t\t\t// videoEl.setAttribute(\"preload\", \"metadata\");\n\t\t\t\t// videoEl.poster = view.model.get(\"source\").get(\"original\");\n\t\t\t\t// videoEl.loop = view.model.attr(\"@video-loop\") !== void 0;\n\t\t\t\t// videoEl.src = view.findPlayableSource(videoEl);\n\t\t\t\t// videoEl.load();\n\n\t\t\t\t// console.log(\"%s::whenVideoHasMetadata [preload:%s]\", view.cid, videoEl.preload);\n\t\t\t}\n\t\t});\n\t},\n\n\tfindPlayableSource: function(video) {\n\t\tvar playable = this.model.get(\"sources\").find(function(source) {\n\t\t\treturn /^video\\//.test(source.get(\"mime\")) && video.canPlayType(source.get(\"mime\")) != \"\";\n\t\t});\n\t\treturn playable ? playable.get(\"original\") : \"\";\n\t},\n\n\t/* ---------------------------\n\t * PlayableRenderer implementation\n\t * --------------------------- */\n\n\t// /** @override */\n\t// _canResumePlayback: function() {\n\t// \treturn PlayableRenderer.prototype._canResumePlayback.apply(this, arguments) && this.video.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA;\n\t// },\n\n\t/** @override initial value */\n\t_playbackRequested: false,\n\n\t/** @override */\n\t_isMediaPaused: function() {\n\t\treturn this.video.paused;\n\t},\n\n\t/** @override */\n\t_playMedia: function() {\n\t\tif (this.video.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA && this.video.seekable.length == 0) {\n\t\t\tconsole.warn(this.cid, \"WTF! got video data, but cannot seek, calling load()\");\n\t\t\t// this._logMessage(\"call:load\", \"got video data, but cannot seek, calling load()\", \"orange\");\n\t\t\tif (_.isFunction(this.video.load)) {\n\t\t\t\tthis.video.load();\n\t\t\t}\n\t\t}\n\t\t/* NOTE: loop is false, restart from end on request */\n\t\telse if (this.video.ended) {\n\t\t\tthis.video.currentTime = this.video.seekable.start(0);\n\t\t}\n\n\t\t/* if not enough data */\n\t\tif (this.video.readyState < HTMLMediaElement.HAVE_ENOUGH_DATA) {\n\t\t\tif (this.video.networkState == HTMLMediaElement.NETWORK_IDLE) {\n\t\t\t\tthis.video.load();\n\t\t\t} //else {\n\t\t\t// var _playStamp = this._playbackCount;\n\t\t\t// console.log(\"%s::_playMedia %s waiting [#%s]\", this.cid, this._isMediaWaiting() ? \"continue\" : \"begin\", _playStamp);\n\t\t\t//\n\t\t\t// this.listenToElementOnce(this.video, \"canplaythrough\", function(ev) {\n\t\t\t// \tconsole.log(\"%s::_playMedia end waiting [#%s]\", this.cid, _playStamp);\n\t\t\t//\n\t\t\t// \tthis._toggleWaiting(false);\n\t\t\t// \t// this.playbackRequested && this.video.play();\n\t\t\t// \tthis._validatePlayback();\n\t\t\t// });\n\t\t\t//}\n\t\t\t/* NOTE: on \"canplaythrough\" _playMedia() will be called again if still required */\n\t\t\tthis._toggleWaiting(true);\n\t\t}\n\t\t/* play */\n\t\telse {\n\t\t\t/* NOTE: current browsers return a promise */\n\t\t\tthis.video.play();\n\t\t}\n\t},\n\n\t/** @override */\n\t_pauseMedia: function() {\n\t\t// this._setPlayToggleSymbol(\"play-symbol\");\n\t\tthis.video.pause();\n\t\t// this._renderPlaybackState();\n\t},\n\n\t/* ---------------------------\n\t/* DOM events\n\t/* --------------------------- */\n\n\t_listenWhileSelected: function() {\n\t\tPlayableRenderer.prototype._listenWhileSelected.apply(this, arguments);\n\t\tthis.fullscreenToggle.addEventListener(\n\t\t\tthis._toggleEvent, this._onFullscreenToggle, false);\n\t},\n\n\t_stopListeningWhileSelected: function() {\n\t\tPlayableRenderer.prototype._stopListeningWhileSelected.apply(this, arguments);\n\t\tthis.fullscreenToggle.removeEventListener(\n\t\t\tthis._toggleEvent, this._onFullscreenToggle, false);\n\t},\n\n\t/* ---------------------------\n\t/* media events\n\t/* --------------------------- */\n\n\taddMediaListeners: function() {\n\t\t// if (!this._started) {\n\t\t// \tthis.addListeners(this.video, this.playingOnceEvents, this._onMediaPlayingOnce);\n\t\t// }\n\t\tthis.addListeners(this.video, this.updatePlaybackEvents, this._updatePlaybackState);\n\t\tthis.addListeners(this.video, this.updateBufferedEvents, this._updateBufferedValue);\n\t\tthis.addListeners(this.video, this.updateCurrTimeEvents, this._updateCurrTimeValue);\n\t\tthis.video.addEventListener(\"ended\", this._onMediaEnded, false);\n\t\tthis.video.addEventListener(\"error\", this._onMediaError, true);\n\n\t\tthis.on(\"view:removed\", this.removeMediaListeners, this);\n\t},\n\n\tremoveMediaListeners: function() {\n\t\tthis.off(\"view:removed\", this.removeMediaListeners, this);\n\n\t\t// if (!this._started) {\n\t\t// \tthis.removeListeners(this.video, this.playingOnceEvents, this._onMediaPlayingOnce);\n\t\t// }\n\t\tthis.removeListeners(this.video, this.updatePlaybackEvents, this._updatePlaybackState);\n\t\tthis.removeListeners(this.video, this.updateBufferedEvents, this._updateBufferedValue);\n\t\tthis.removeListeners(this.video, this.updateCurrTimeEvents, this._updateCurrTimeValue);\n\t\tthis.video.removeEventListener(\"ended\", this._onMediaEnded, false);\n\t\tthis.video.removeEventListener(\"error\", this._onMediaError, true);\n\t},\n\n\t/* ---------------------------\n\t/* media event handlers\n\t/* --------------------------- */\n\n\t_onMediaError: function(ev) {\n\t\tthis.removeMediaListeners();\n\t\tthis.removeSelectionListeners();\n\n\t\tthis._started = false;\n\t\tthis.content.classList.remove(\"started\");\n\n\t\tthis.mediaState = \"error\";\n\t\tthis.playbackRequested = false;\n\t\t// this.content.classList.remove(\"ended\");\n\t\t// this.content.classList.remove(\"waiting\");\n\t\tthis._exitFullscreen();\n\t},\n\n\t_onMediaEnded: function(ev) {\n\t\tthis.playbackRequested = false;\n\t\tthis._exitFullscreen();\n\t},\n\n\t_exitFullscreen: function() {\n\t\t/* NOTE: polyfill should handle this on iOS? */\n\t\tif (this.video.webkitDisplayingFullscreen) {\n\t\t\tthis.video.webkitExitFullscreen();\n\t\t}\n\t\tif (document.fullscreenElement === this.video) {\n\t\t\tthis.video.exitFullscreen();\n\t\t}\n\t},\n\n\t/* ---------------------------\n\t/* _onMediaPlayingOnce\n\t/* --------------------------- */\n\n\t// playingOnceEvents: \"playing waiting\",\n\t//\n\t// _onMediaPlayingOnce: function(ev) {\n\t// \tthis.removeListeners(this.video, this.playingOnceEvents, this._onMediaPlayingOnce);\n\t// \tif (!this._started) {\n\t// \t\tthis._started = true;\n\t// \t\tthis.content.classList.add(\"started\");\n\t// \t}\n\t// },\n\n\t/* ---------------------------\n\t/* _updateCurrTimeValue\n\t/* --------------------------- */\n\n\tupdateCurrTimeEvents: \"playing waiting pause timeupdate seeked\", //.split(\" \"),\n\n\t_updateCurrTimeValue: function(ev) {\n\t\tif (this.video.played.length) {\n\t\t\tthis.content.classList.add(\"started\");\n\t\t}\n\t\tif (this.progressMeter) {\n\t\t\tthis.progressMeter.valueTo(\"amount\", this.video.currentTime, 0);\n\t\t}\n\t},\n\n\t/* ---------------------------\n\t/* _updatePlaybackState\n\t/* --------------------------- */\n\n\t// updatePlaybackEvents: \"playing play waiting pause seeking seeked ended\",\n\tupdatePlaybackEvents: \"timeupdate playing pause waiting canplaythrough seeked\",\n\n\t_isPlaybackWaiting: false,\n\t_playbackStartTS: -1,\n\t_playbackStartTC: -1,\n\n\t_updatePlaybackState: function(ev) {\n\t\t// var isWaiting = false;\n\t\t// var symbolName = \"play-symbol\";\n\n\t\t// NOTE: clearTimeout will cancel both setTimeout and setInterval IDs\n\t\twindow.clearTimeout(this._playbackTimeoutID);\n\t\tthis._playbackTimeoutID = -1;\n\n\t\tif (this.playbackRequested) {\n\t\t\tif (ev.type !== \"timeupdate\") {\n\t\t\t\tthis._playbackStartTS = ev.timeStamp;\n\t\t\t\tthis._playbackStartTC = this.video.currentTime;\n\t\t\t}\n\t\t\tswitch (ev.type) {\n\t\t\t\tcase \"timeupdate\":\n\t\t\t\t\tif (SYNC_THRESHOLD_MS < Math.abs((ev.timeStamp - this._playbackStartTS) -\n\t\t\t\t\t\t\t((this.video.currentTime - this._playbackStartTC) * 1000))) {\n\t\t\t\t\t\tthis._playbackStartTS = ev.timeStamp;\n\t\t\t\t\t\tthis._playbackStartTC = this.video.currentTime;\n\t\t\t\t\t\tthis._playbackTimeoutID =\n\t\t\t\t\t\t\twindow.setTimeout(this._playbackTimeoutFn_waiting, SYNC_TIMEOUT_MS);\n\t\t\t\t\t\tthis._toggleWaiting(true);\n\t\t\t\t\t\t// break;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._playbackTimeoutID =\n\t\t\t\t\t\t\twindow.setTimeout(this._playbackTimeoutFn_playing, SYNC_TIMEOUT_MS);\n\t\t\t\t\t\tthis._toggleWaiting(false);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"playing\":\n\t\t\t\t\tthis._playbackStartTS = ev.timeStamp;\n\t\t\t\t\tthis._playbackStartTC = this.video.currentTime;\n\t\t\t\t\tthis._playbackTimeoutID = window.setTimeout(this._playbackTimeoutFn_playing, SYNC_TIMEOUT_MS);\n\t\t\t\t\tthis._toggleWaiting(false);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"pause\":\n\t\t\t\t\t/* NOTE: this.playbackRequested is true, the pause wasn't triggered\n\t\t\t\t\t * from UI, but by the waiting handler below, so we treat it as\n\t\t\t\t\t * waiting */\n\t\t\t\t\t// if (!this.playbackRequested) {\n\t\t\t\t\t// \tthis._toggleWaiting(false);\n\t\t\t\t\t// }\n\t\t\t\t\tthis._toggleWaiting(this.playbackRequested);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"canplaythrough\":\n\t\t\t\t\tthis._toggleWaiting(false);\n\t\t\t\t\tthis._validatePlayback();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"waiting\":\n\t\t\t\t\t/* NOTE: if the video is seeking, give it a chance to resume, so do\n\t\t\t\t\t * nothing, and handle things on seeked/playing */\n\t\t\t\t\tif (!this.video.seeking) {\n\t\t\t\t\t\t/* if not enough data */\n\t\t\t\t\t\tif (this.video.readyState < HTMLMediaElement.HAVE_ENOUGH_DATA) {\n\t\t\t\t\t\t\tthis.video.pause();\n\n\t\t\t\t\t\t\t// this.listenToElementOnce(this.video, \"canplaythrough\", function() {\n\t\t\t\t\t\t\t// \tthis._toggleWaiting(false);\n\t\t\t\t\t\t\t// \tthis._validatePlayback();\n\t\t\t\t\t\t\t// this.playbackRequested && this.video.play();\n\t\t\t\t\t\t\t// });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._toggleWaiting(true);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis._toggleWaiting(false);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tthis._toggleWaiting(false);\n\t\t}\n\t},\n\n\t_playbackTimeoutID: -1,\n\t_playbackTimeoutFn_playing: function() {\n\t\tthis._playbackTimeoutID = -1;\n\n\t\tthis._toggleWaiting(true);\n\t\t// this._renderPlaybackState();\n\n\t\t// this._setPlayToggleSymbol(\"waiting-symbol\");\n\t\t// this.content.classList.add(\"waiting\");\n\t\t// this.progressMeter.stalled = true;\n\t\t// this._isPlaybackWaiting = true;\n\t},\n\n\t_playbackTimeoutFn_waiting: function() {\n\t\tif (SYNC_THRESHOLD_MS < (this.video.currentTime - this._playbackStartTC) * 1000) {\n\t\t\tthis._playbackTimeoutID =\n\t\t\t\twindow.setTimeout(this._playbackTimeoutFn_waiting, SYNC_TIMEOUT_MS);\n\t\t} else {\n\t\t\t// since there is no event.timeStamp\n\t\t\t// var delta = this.video.currentTime - this._playbackStartTC;\n\t\t\t// this._playbackStartTS += delta * 1000;\n\t\t\t// this._playbackStartTS = window.performance.now();\n\t\t\tthis._playbackStartTS += SYNC_TIMEOUT_MS;\n\t\t\tthis._playbackStartTC = this.video.currentTime;\n\t\t\tthis._playbackTimeoutID =\n\t\t\t\twindow.setTimeout(this._playbackTimeoutFn_playing, SYNC_TIMEOUT_MS);\n\n\t\t\tthis._toggleWaiting(false);\n\t\t\t// this._renderPlaybackState();\n\n\t\t\t// this._setPlayToggleSymbol(\"pause-symbol\");\n\t\t\t// this.content.classList.remove(\"waiting\");\n\t\t\t// this.progressMeter.stalled = false;\n\t\t\t// this._isPlaybackWaiting = false;\n\t\t}\n\t},\n\n\t/** @override */\n\t_renderPlaybackState: function() {\n\t\t// if (DEBUG) {\n\t\t// \tthis.__logMessage([\n\t\t// \t\"mediaState:\", this.mediaState,\n\t\t// \t\"played:\", this.video.played.length,\n\t\t// \t\"ended:\", this.video.ended,\n\t\t// \t\"toggle.paused:\", this._playToggleSymbol.paused\n\t\t// ].join(\" \"), \"_renderPlaybackState\");\n\t\t// }\n\t\t// console.log(\"%s::_renderPlaybackState mediaState:%s played:%o ended:%o\",\n\t\t// \tthis.cid, this.mediaState, this.video.played.length, this.video.ended);\n\t\t//\n\t\t// if (this.mediaState === \"ready\") {\n\t\t// \tthis.updateOverlay(this.video, this.playToggle);\n\t\t// }\n\n\t\tvar cls = this.content.classList;\n\t\t// if (!this._started && this.playbackRequested &&\n\t\t// \t\tthis.video.readyState === HTMLMediaElement.HAVE_ENOUGH_DATA) {\n\t\t// \tthis._started = true;\n\t\t// \tcls.add(\"started\");\n\t\t// }\n\t\t// cls.toggle(\"started\", (this.video.played.length > 0));\n\t\tcls.toggle(\"ended\", this.video.ended);\n\n\t\tPlayableRenderer.prototype._renderPlaybackState.apply(this, arguments);\n\t},\n\n\t_setPlayToggleSymbol: function(symbolName) {\n\t\t// if (this.video.ended) {\n\t\t// \tconsole.log(\"%s::_setPlayToggleSymbol %s -> ended\", this.cid, symbolName);\n\t\t// }\n\t\t// if (this.mediaState === \"ready\") {\n\t\t// \tif (this.playbackRequested && !this._isMediaWaiting()) {\n\t\t// \t\tthis._playToggleSymbol.setImageSource(null);\n\t\t// \t} else {\n\t\t// \t\tthis._playToggleSymbol.setImageSource(this.video);\n\t\t// \t}\n\t\t// \tthis._playToggleSymbol.refreshImageSource();\n\t\t// }\n\t\treturn PlayableRenderer.prototype._setPlayToggleSymbol.call(this, this.video.ended ? \"ended\" : symbolName);\n\t},\n\n\t/* ---------------------------\n\t/* _updateBufferedValue\n\t/* --------------------------- */\n\n\t// updateBufferedEvents: \"progress canplay canplaythrough playing timeupdate\",//loadeddata\n\tupdateBufferedEvents: \"progress canplay canplaythrough play playing\",\n\n\t_updateBufferedValue: function(ev) {\n\t\t// if (!this._started) return;\n\t\tvar bRanges = this.video.buffered;\n\t\tif (bRanges.length > 0) {\n\t\t\tthis._bufferedValue = bRanges.end(bRanges.length - 1);\n\t\t\tif (this.progressMeter && ((this.video.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA) /*|| (this.video.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA && this.video.networkState == HTMLMediaElement.NETWORK_LOADING)*/ )) {\n\t\t\t\tthis.progressMeter.valueTo(\"available\", this._bufferedValue, 300);\n\t\t\t\t// this.progressMeter.valueTo(\"available\", this._bufferedValue, Math.max(0, 1000 * (this._bufferedValue - (this.progressMeter.getTargetValue(\"available\") | 0))));\n\t\t\t}\n\t\t}\n\t},\n\n\t/* ---------------------------\n\t/* fullscreen api\n\t/* --------------------------- */\n\n\t_onFullscreenToggle: function(ev) {\n\t\t// NOTE: Ignore if MouseEvent.button is 0 or undefined (0: left-button)\n\t\tif (!ev.defaultPrevented && !ev.button && this.model.selected) {\n\t\t\tev.preventDefault();\n\t\t\ttry {\n\t\t\t\tif (document.hasOwnProperty(\"fullscreenElement\") &&\n\t\t\t\t\tdocument.fullscreenElement !== this.video) {\n\t\t\t\t\tdocument.addEventListener(fullscreenChangeEvent, this._onFullscreenChange, false);\n\t\t\t\t\tthis.video.requestFullscreen();\n\t\t\t\t} else\n\t\t\t\tif (this.video.webkitSupportsFullscreen && !this.video.webkitDisplayingFullscreen) {\n\t\t\t\t\tthis.video.addEventListener(\"webkitbeginfullscreen\", this._onFullscreenChange, false);\n\t\t\t\t\tthis.video.webkitEnterFullScreen();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tthis.video.controls = false;\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t}\n\t},\n\n\t_onFullscreenChange: function(ev) {\n\t\tswitch (ev.type) {\n\t\t\tcase fullscreenChangeEvent:\n\t\t\t\t// var isOwnFullscreen = Modernizr.prefixed(\"fullscreenElement\", document) === this.video;\n\t\t\t\tvar isOwnFullscreen = document.fullscreenElement === this.video;\n\t\t\t\tthis.video.controls = isOwnFullscreen;\n\t\t\t\tif (!isOwnFullscreen) {\n\t\t\t\t\tdocument.removeEventListener(fullscreenChangeEvent, this._onFullscreenChange, false);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"webkitbeginfullscreen\":\n\t\t\t\tthis.video.controls = true;\n\t\t\t\tthis.video.removeEventListener(\"webkitbeginfullscreen\", this._onFullscreenChange, false);\n\t\t\t\tthis.video.addEventListener(\"webkitendfullscreen\", this._onFullscreenChange, false);\n\t\t\t\tbreak;\n\t\t\tcase \"webkitendfullscreen\":\n\t\t\t\tthis.video.removeEventListener(\"webkitendfullscreen\", this._onFullscreenChange, false);\n\t\t\t\tthis.video.controls = false;\n\t\t\t\tbreak;\n\t\t}\n\t},\n});\nmodule.exports = VideoRenderer;\n\n/* ---------------------------\n/* log to screen\n/* --------------------------- */\nif (DEBUG) {\n\tmodule.exports = (function(VideoRenderer) {\n\t\tif (!VideoRenderer.LOG_TO_SCREEN) return VideoRenderer;\n\n\t\t/** @type {Function} */\n\t\tvar Color = require(\"color\");\n\t\t// /** @type {module:underscore.strings/lpad} */\n\t\t// var lpad = require(\"underscore.string/lpad\");\n\t\t// /** @type {module:underscore.strings/rpad} */\n\t\t// var rpad = require(\"underscore.string/rpad\");\n\n\t\t// var fullscreenEvents = [\n\t\t// \tfullscreenChangeEvent, fullscreenErrorEvent,\n\t\t// \t\"webkitbeginfullscreen\", \"webkitendfullscreen\",\n\t\t// ];\n\n\t\tvar mediaEvents = require(\"utils/event/mediaEventsEnum\");\n\t\tvar logPlaybackStateEvents, logBufferedEvents, logPlayedEvents;\n\n\t\t// logPlaybackStateEvents = [\"playing\", \"waiting\", \"ended\", \"pause\", \"seeking\", \"seeked\"];\n\t\t// logBufferedEvents = [\"progress\", \"durationchange\", \"canplay\", \"play\"];\n\t\t// logPlayedEvents = [\"playing\", \"timeupdate\"];\n\n\t\tlogPlaybackStateEvents = [\n\t\t\t\"loadstart\",\n\t\t\t\"progress\",\n\t\t\t\"suspend\",\n\t\t\t\"abort\",\n\t\t\t\"error\",\n\t\t\t\"emptied\",\n\t\t\t\"stalled\",\n\t\t];\n\t\tlogBufferedEvents = [\n\t\t\t\"loadedmetadata\",\n\t\t\t\"loadeddata\",\n\t\t\t\"canplay\",\n\t\t\t\"canplaythrough\",\n\t\t\t\"playing\",\n\t\t\t\"waiting\",\n\t\t\t\"seeking\", // seeking changed to true\n\t\t\t\"seeked\", // seeking changed to false\n\t\t\t\"ended\", // ended is true\n\t\t];\n\t\tlogPlayedEvents = [\n\t\t\t\"play\",\n\t\t\t\"pause\"\n\t\t];\n\n\t\t// Exclude some events from log\n\t\tmediaEvents = _.without(mediaEvents, \"resize\", \"error\");\n\t\t// Make sure event subsets exist in the main set\n\t\tlogPlaybackStateEvents = _.intersection(mediaEvents, logPlaybackStateEvents);\n\t\tlogBufferedEvents = _.intersection(mediaEvents, logBufferedEvents);\n\t\tlogPlayedEvents = _.intersection(mediaEvents, logPlayedEvents);\n\n\t\tvar readyStateSymbols = _.invert(_.pick(HTMLMediaElement,\n\t\t\tfunction(val, key, obj) {\n\t\t\t\treturn /^HAVE_/.test(key);\n\t\t\t}));\n\t\tvar readyStateToString = function(el) {\n\t\t\treturn readyStateSymbols[el.readyState] + \"(\" + el.readyState + \")\";\n\t\t};\n\n\t\tvar networkStateSymbols = _.invert(_.pick(HTMLMediaElement,\n\t\t\tfunction(val, key, obj) {\n\t\t\t\treturn /^NETWORK_/.test(key);\n\t\t\t}));\n\t\tvar networkStateToString = function(el) {\n\t\t\treturn networkStateSymbols[el.networkState] + \"(\" + el.networkState + \")\";\n\t\t};\n\n\t\tvar mediaErrorSymbols = _.invert(MediaError);\n\t\tvar mediaErrorToString = function(el) {\n\t\t\treturn el.error ? mediaErrorSymbols[el.error.code] + \"(\" + el.error.code + \")\" : \"[MediaError null]\";\n\t\t};\n\n\t\tvar findRangeIndex = function(range, currTime) {\n\t\t\tfor (var i = 0, ii = range.length; i < ii; i++) {\n\t\t\t\tif (range.start(i) <= currTime && currTime <= range.end(i)) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\n\t\tvar formatVideoError = function(video) {\n\t\t\treturn [\n\t\t\t\tmediaErrorToString(video),\n\t\t\t\tnetworkStateToString(video),\n\t\t\t\treadyStateToString(video),\n\t\t\t].join(\" \");\n\t\t};\n\n\t\tvar getVideoStatsCols = function() {\n\t\t\treturn \"0000.000 [Curr/Total] [Seekable]  [Buffered]  networkState readyState      Playback\";\n\t\t\t// return \"0000.620 [t:  0.0  27.4] [s: 27.4 0/1] [b:  0.5 0/1] LOADING(2)   FUTURE_DATA(3)  :: (::)\";\n\t\t}\n\n\t\tvar formatVideoStats = function(video) {\n\t\t\tvar currTime = video.currentTime,\n\t\t\t\tdurTime = video.duration,\n\t\t\t\tbRanges = video.buffered,\n\t\t\t\tbRangeIdx,\n\t\t\t\tsRanges = video.seekable,\n\t\t\t\tsRangeIdx;\n\n\t\t\tbRangeIdx = findRangeIndex(bRanges, currTime);\n\t\t\tsRangeIdx = findRangeIndex(sRanges, currTime);\n\t\t\treturn [\n\t\t\t\t\"[\" + String(currTime.toFixed(1)).padStart(5) +\n\t\t\t\t\t\" \" + String(!isNaN(durTime) ? durTime.toFixed(1) : \"-\").padStart(4) + \"]\",\n\t\t\t\t\"[\" + String(sRangeIdx >= 0 ? sRanges.end(sRangeIdx).toFixed(1) : \"-\").padStart(5) +\n\t\t\t\t\t\" \" + (sRangeIdx >= 0 ? sRangeIdx : \"-\") + \"/\" + sRanges.length + \"]\",\n\t\t\t\t\"[\" + String(bRangeIdx >= 0 ? bRanges.end(bRangeIdx).toFixed(1) : \"-\").padStart(5) +\n\t\t\t\t\t\" \" + (bRangeIdx >= 0 ? bRangeIdx : \"-\") + \"/\" + bRanges.length + \"]\",\n\t\t\t\tnetworkStateToString(video).substr(8).padEnd(12),\n\t\t\t\treadyStateToString(video).substr(5).padEnd(15),\n\t\t\t\t(video.ended ? \">:\" : (video.paused ? \"::\" : \">>\"))\n\t\t\t\t// video.playbackRate.toFixed(2) + \" (\" + video.defaultPlaybackRate.toFixed(2) + \")\"\n\t\t\t]; //.join(\" \");\n\t\t};\n\n\t\treturn VideoRenderer.extend({\n\n\t\t\t/** @override */\n\t\t\tinitialize: function() {\n\t\t\t\tVideoRenderer.prototype.initialize.apply(this, arguments);\n\n\t\t\t\t_.bindAll(this, \"__handleMediaEvent\");\n\n\t\t\t\tvar fgColor = this.model.attr(\"color\"),\n\t\t\t\t\tred = new Color(\"red\"),\n\t\t\t\t\tblue = new Color(\"blue\"),\n\t\t\t\t\tgreen = new Color(\"green\");\n\n\t\t\t\tfor (var i = 0; i < mediaEvents.length; i++) {\n\t\t\t\t\tvar ev = mediaEvents[i];\n\t\t\t\t\tthis.video.addEventListener(ev, this.__handleMediaEvent, false);\n\n\t\t\t\t\tvar c = new Color(fgColor),\n\t\t\t\t\t\tcc = 1;\n\t\t\t\t\tif (logBufferedEvents.indexOf(ev) != -1) c.mix(green, (cc /= 2));\n\t\t\t\t\tif (logPlayedEvents.indexOf(ev) != -1) c.mix(red, (cc /= 2));\n\t\t\t\t\tif (logPlaybackStateEvents.indexOf(ev) != -1) c.mix(blue, (cc /= 2));\n\t\t\t\t\tthis.__logColors[ev] = c.rgb().string();\n\t\t\t\t}\n\t\t\t\tthis.video.addEventListener(\"error\", this.__handleMediaEvent, true);\n\t\t\t},\n\n\t\t\t/** @override */\n\t\t\tremove: function() {\n\t\t\t\tVideoRenderer.prototype.remove.apply(this, arguments);\n\t\t\t\tfor (var i = 0; i < mediaEvents.length; i++) {\n\t\t\t\t\tif (mediaEvents[i] == \"error\") continue;\n\t\t\t\t\tthis.video.removeEventListener(mediaEvents[i], this.__handleMediaEvent, false);\n\t\t\t\t}\n\t\t\t\tthis.video.removeEventListener(\"error\", this.__handleMediaEvent, true);\n\t\t\t},\n\n\t\t\t// /** @override */\n\t\t\t// _onVisibilityChange: function(ev) {\n\t\t\t// \tVideoRenderer.prototype._onVisibilityChange.apply(this, arguments);\n\t\t\t// \tvar stateVal = Modernizr.prefixed(\"visibilityState\", document);\n\t\t\t// \tthis.__logEvent(\"visibilityState:\" + stateVal, ev.type + \":\" + stateVal);\n\t\t\t// },\n\t\t\t//\n\t\t\t// /** @override */\n\t\t\t// _onFullscreenChange: function(ev) {\n\t\t\t// \tVideoRenderer.prototype._onFullscreenChange.apply(this, arguments);\n\t\t\t// \tvar logtype = (document.fullscreenElement === this.video ? \"enter:\" : \"exit:\") + ev.type;\n\t\t\t// \tthis.__logEvent(\"document.fullscreenElement: \" + this.cid, logtype);\n\t\t\t// },\n\n\t\t\t/** @override */\n\t\t\t_onFullscreenToggle: function(ev) {\n\t\t\t\tif (!ev.defaultPrevented && this.model.selected) {\n\t\t\t\t\tthis.__logEvent(\"fullscreen-toggle\", ev.type);\n\t\t\t\t}\n\t\t\t\tVideoRenderer.prototype._onFullscreenToggle.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/** @override */\n\t\t\t_playbackTimeoutFn_playing: function() {\n\t\t\t\tVideoRenderer.prototype._playbackTimeoutFn_playing.apply(this, arguments);\n\t\t\t\t// this.__logEvent(formatVideoStats(this.video).join(\" \"), \"timeout-play\");\n\t\t\t\tthis.__handleMediaEvent({\n\t\t\t\t\ttype: \"timeout-play\",\n\t\t\t\t\ttimeStamp: null,\n\t\t\t\t\tisTimeout: true\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/** @override */\n\t\t\t_playbackTimeoutFn_waiting: function() {\n\t\t\t\tVideoRenderer.prototype._playbackTimeoutFn_waiting.apply(this, arguments);\n\t\t\t\t// this.__logEvent(formatVideoStats(this.video).join(\" \"), \"timeout-wait\");\n\t\t\t\tthis.__handleMediaEvent({\n\t\t\t\t\ttype: \"timeout-wait\",\n\t\t\t\t\ttimeStamp: null,\n\t\t\t\t\tisTimeout: true\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t__handleMediaEvent: function(ev) {\n\t\t\t\tvar evmsg = formatVideoStats(this.video);\n\n\t\t\t\tif (this.playbackRequested === true) {\n\t\t\t\t\tevmsg.push(\"(>>)\");\n\t\t\t\t} else if (this.playbackRequested === false) {\n\t\t\t\t\tevmsg.push(\"(::)\");\n\t\t\t\t} else {\n\t\t\t\t\tevmsg.push(\"(--)\");\n\t\t\t\t}\n\n\t\t\t\tif (this.playbackRequested) {\n\t\t\t\t\tevmsg.push(this._playbackTimeoutID !== -1 ? \"W\" : \"-\");\n\t\t\t\t} else {\n\t\t\t\t\tevmsg.push(this._playbackTimeoutID !== -1 ? \"?\" : \"!\");\n\t\t\t\t}\n\t\t\t\t// evmsg.push(this._playToggleSymbol.symbolName);\n\n\t\t\t\tvar ts, tc;\n\t\t\t\tif ((this.updatePlaybackEvents.indexOf(ev.type) > -1) || ev.isTimeout) {\n\t\t\t\t\t// evmsg.push(this._playbackStartTS.toFixed(2));\n\t\t\t\t\tts = ev.timeStamp - this._playbackStartTS;\n\t\t\t\t\ttc = this.video.currentTime - this._playbackStartTC;\n\t\t\t\t\tts *= .001; // s to ms\n\t\t\t\t\tevmsg.push(Math.abs(tc - ts).toFixed(3));\n\t\t\t\t}\n\t\t\t\t// else {\n\t\t\t\t// \tts = this._playbackStartTS;\n\t\t\t\t// \ttc = this._playbackStartTC;\n\t\t\t\t// }\n\t\t\t\t// ts *= .001; // s to ms\n\t\t\t\t// evmsg.push(Math.abs(tc - ts).toFixed(3));\n\t\t\t\t// evmsg.push(\"TC:\" + tc.toFixed(3));\n\t\t\t\t// evmsg.push(\"TS:\" + ts.toFixed(3));\n\n\t\t\t\tthis.__logEvent(evmsg.join(\" \"), ev.type);\n\t\t\t\tif (ev.type === \"error\" || ev.type === \"abort\") {\n\t\t\t\t\tthis.__logMessage(formatVideoError(this.video), ev.type);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t__logEvent: function(msg, logtype, color) {\n\t\t\t\tvar logEntryEl = this.__logElement.lastElementChild;\n\t\t\t\tif ((logEntryEl && logEntryEl.getAttribute(\"data-logtype\") == logtype) &&\n\t\t\t\t\t((logtype === \"timeupdate\") || (logtype === \"progress\"))) {\n\t\t\t\t\tvar logRepeatVal = parseInt(logEntryEl.getAttribute(\"data-logrepeat\"));\n\t\t\t\t\tlogEntryEl.textContent = this.__getTStamp() + \" \" + msg;\n\t\t\t\t\tlogEntryEl.setAttribute(\"data-logrepeat\", isNaN(logRepeatVal) ? 2 : ++logRepeatVal);\n\t\t\t\t} else {\n\t\t\t\t\tthis.__logMessage(msg, logtype, color);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t__getHeaderText: function() {\n\t\t\t\treturn getVideoStatsCols();\n\t\t\t},\n\t\t});\n\t})(module.exports);\n}\n",
    "\"use strict\";\n// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\";\n\n  return \"<div id=\\\"desc_b\"\n    + container.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" class=\\\"content sizing mdown\\\">\"\n    + ((stack1 = ((helper = (helper = helpers.desc || (depth0 != null ? depth0.desc : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"desc\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n",
    "\"use strict\";\n// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\";\n\n  return \"<div id=\\\"desc_m\"\n    + container.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" class=\\\"content sizing\\\"><p>\"\n    + ((stack1 = ((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</p>\"\n    + ((stack1 = ((helper = (helper = helpers.sub || (depth0 != null ? depth0.sub : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"sub\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n",
    "\"use strict\";\n// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\t\t<p><code>\"\n    + container.escapeExpression(((helper = (helper = helpers.infoSrc || (depth0 != null ? depth0.infoSrc : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"infoSrc\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</code></p>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"error-title color-fg color-reverse\\\">\"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n<div class=\\\"error-message color-fg\\\">\\n\t<p><strong>\"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</strong> <code>\"\n    + alias4(((helper = (helper = helpers.message || (depth0 != null ? depth0.message : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"message\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</code></p>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.infoSrc : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n",
    "// var Handlebars = require(\"handlebars\")[\"default\"];\nconst Handlebars = require(\"hbsfy/runtime\");\n/** @type {Function} */\nconst Color = require(\"color\");\n/** @type {module:app/control/Globals} */\nconst Globals = require(\"app/control/Globals\");\n\n// (function() {\nvar helpers = {\n\t/*\n\t/* Arithmetic helpers\n\t/*/\n\tadd: function(value, addition) {\n\t\treturn value + addition;\n\t},\n\tsubtract: function(value, substraction) {\n\t\treturn value - substraction;\n\t},\n\tdivide: function(value, divisor) {\n\t\treturn value / divisor;\n\t},\n\tmultiply: function(value, multiplier) {\n\t\treturn value * multiplier;\n\t},\n\tfloor: function(value) {\n\t\treturn Math.floor(value);\n\t},\n\tceil: function(value) {\n\t\treturn Math.ceil(value);\n\t},\n\tround: function(value) {\n\t\treturn Math.round(value);\n\t},\n\tglobal: function(value) {\n\t\treturn Globals[value];\n\t},\n\n\t/*\n\t/* Flow control helpers\n\t/*/\n\tis: function(a, b, opts) {\n\t\treturn (a === b) ? opts.fn(this) : opts.inverse(this);\n\t},\n\tisnot: function(a, b, opts) {\n\t\treturn (a !== b) ? opts.fn(this) : opts.inverse(this);\n\t},\n\tisany: function(value) {\n\t\tvar i = 0,\n\t\t\tii = arguments.length - 2,\n\t\t\topts = arguments[ii + 1];\n\t\tdo\n\t\t\tif (value === arguments[++i]) {\n\t\t\t\treturn opts.fn(this);\n\t\t\t}\n\t\twhile (i < ii);\n\t\treturn opts.inverse(this);\n\t},\n\tcontains: function(a, b, opts) {\n\t\treturn (a.indexOf(b) !== -1) ? opts.fn(this) : opts.inverse(this);\n\t},\n\tignore: function() {\n\t\treturn \"\";\n\t},\n\n\t/*\n\t/* Color helpers\n\t/*/\n\tmix: function(colora, colorb, amount) {\n\t\treturn new Color(colora).mix(new Color(colorb), amount).rgb().string();\n\t},\n\tlighten: function(color, amount) {\n\t\treturn new Color(color).lighten(amount).rgb().string();\n\t},\n\tdarken: function(color, amount) {\n\t\treturn new Color(color).darken(amount).rgb().string();\n\t},\n\t// colorFormat: function(color, fmt) {\n\t// \tswitch (fmt) {\n\t// \t\tcase \"rgb\":\n\t// \t\t\treturn new Color(color).rgb().string();\n\t// \t\tcase \"hsl\":\n\t// \t\t\treturn new Color(color).hsl().string();\n\t// \t\tcase \"hex\": default:\n\t// \t\t\treturn new Color(color).hex().string();\n\t// \t}\n\t// },\n};\nfor (var helper in helpers) {\n\tif (helpers.hasOwnProperty(helper)) {\n\t\tHandlebars.registerHelper(helper, helpers[helper]);\n\t}\n}\n// })();\n\n// module.exports = Handlebars;\n",
    "\"use strict\";\n// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg class=\\\"fullscreen-symbol\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" preserveAspectRatio=\\\"xMidYMid meet\\\" viewBox=\\\"-21 -21 42 42\\\">\\n\t<path id=\\\"fullscreen-shadow\\\" d=\\\"M-5,5 L-20,20 M-7,20 L-20,20 L-20,7 M5,-5 L20,-20 M7,-20 L20,-20 L20,-7\\\" class=\\\"bg-color-stroke\\\" style=\\\"fill:none\\\" vector-effect=\\\"non-scaling-stroke\\\" transform=\\\"translate(2 2)\\\"/>\\n\t<path id=\\\"fullscreen-path\\\" d=\\\"M-5,5 L-20,20 M-7,20 L-20,20 L-20,7 M5,-5 L20,-20 M7,-20 L20,-20 L20,-7\\\" class=\\\"color-stroke\\\" style=\\\"fill:none\\\" vector-effect=\\\"non-scaling-stroke\\\" />\\n</svg>\\n\";\n},\"useData\":true});\n",
    "/** @type {module:backbone} */\nconst Events = require(\"backbone\").Events;\n\n\n// var defaultOptions = {\n// \ttick: 1,\n// \tonstart: null,\n// \tontick: null,\n// \tonpause: null,\n// \tonstop: null,\n// \tonend: null\n// }\nvar idSeed = 0;\n\nvar Timer = function(options) {\n\t// if (!(this instanceof Timer)) {\n\t// \treturn new Timer(options);\n\t// }\n\tthis._id = idSeed++;\n\t// this._options = {};\n\tthis._duration = 0;\n\tthis._status = \"initialized\";\n\tthis._start = 0;\n\t// this._measures = [];\n\n\t// for (var prop in defaultOptions) {\n\t// \tthis._options[prop] = defaultOptions[prop];\n\t// }\n\t// this.options(options);\n};\n\n_.extend(Timer.prototype, Events, {\n\n\tstart: function(duration) {\n\t\tif (!_.isNumber(duration) && !this._duration) {\n\t\t\treturn this;\n\t\t}\n\t\t// duration && (duration *= 1000)\n\t\tif (this._timeout && this._status === \"started\") {\n\t\t\treturn this;\n\t\t}\n\t\tvar evName = (this._status === \"stopped\") ? \"start\" : \"resume\";\n\t\tthis._duration = duration || this._duration;\n\t\tthis._timeout = window.setTimeout(end.bind(this), this._duration);\n\t\t// if (typeof this._options.ontick === \"function\") {\n\t\t// \tthis._interval = setInterval(function() {\n\t\t// \t\tthis.trigger(\"tick\", this.getDuration())\n\t\t// \t}.bind(this), +this._options.tick * 1000)\n\t\t// }\n\t\tthis._start = _now();\n\t\tthis._status = \"started\";\n\t\tthis.trigger(evName, this.getDuration());\n\t\treturn this;\n\t},\n\n\tpause: function() {\n\t\tif (this._status !== \"started\") {\n\t\t\treturn this;\n\t\t}\n\t\tthis._duration -= (_now() - this._start);\n\t\tclear.call(this, false);\n\t\tthis._status = \"paused\";\n\t\tthis.trigger(\"pause\", this.getDuration());\n\t\treturn this;\n\t},\n\n\tstop: function() {\n\t\tif (!/started|paused/.test(this._status)) {\n\t\t\treturn this;\n\t\t}\n\t\tclear.call(this, true);\n\t\tthis._status = \"stopped\";\n\t\tthis.trigger(\"stop\");\n\t\treturn this;\n\t},\n\n\tgetDuration: function() {\n\t\tif (this._status === \"started\") {\n\t\t\treturn this._duration - (_now() - this._start);\n\t\t}\n\t\tif (this._status === \"paused\") {\n\t\t\treturn this._duration;\n\t\t}\n\t\treturn 0;\n\t},\n\n\tgetStatus: function() {\n\t\treturn this._status;\n\t},\n});\n\nvar _now = window.performance ?\n\twindow.performance.now.bind(window.performance) :\n\tDate.now.bind(Date);\n\nfunction end() {\n\tclear.call(this);\n\tthis._status = \"stopped\";\n\tthis.trigger(\"end\");\n}\n\nfunction clear(clearDuration) {\n\twindow.clearTimeout(this._timeout);\n\t// window.clearInterval(this._interval);\n\tif (clearDuration === true) {\n\t\tthis._duration = 0;\n\t}\n}\n\nObject.defineProperties(Timer.prototype, {\n\tduration: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.getDuration();\n\t\t}\n\t},\n\tstatus: {\n\t\tenumerable: true,\n\t\tget: function() {\n\t\t\treturn this.getStatus();\n\t\t}\n\t}\n});\n\nObject.defineProperties(Timer, {\n\tSTOPPED: {\n\t\tenumerable: true,\n\t\tvalue: \"stopped\"\n\t},\n\tSTARTED: {\n\t\tenumerable: true,\n\t\tvalue: \"started\"\n\t},\n\tPAUSED: {\n\t\tenumerable: true,\n\t\tvalue: \"paused\"\n\t},\n});\n\nmodule.exports = Timer;\n",
    "/* -------------------------------\n/* Imports\n/* ------------------------------- */\n/** @type {module:utils/TransformItem} */\nconst TransformItem = require(\"./TransformItem\");\n\nvar idSeed = 0;\nvar cidSeed = 100;\nvar slice = Array.prototype.slice;\n\n/**\n * @constructor\n * @type {module:app/helper/TransformHelper}\n */\nfunction TransformHelper() {\n\tthis.id = idSeed++;\n\tthis._items = [];\n\tthis._itemsById = {};\n}\n\nTransformHelper.prototype = Object.create({\n\n\t/* -------------------------------\n\t/* Private\n\t/* ------------------------------- */\n\n\t_get: function(el) {\n\t\tif (this.has(el)) {\n\t\t\treturn this._itemsById[el.eid];\n\t\t} else {\n\t\t\treturn this._add(el);\n\t\t}\n\t},\n\n\t_add: function(el) {\n\t\tvar item, id;\n\t\t// id = el.eid || el.cid || el.id;\n\t\t// if (!id || (this._itemsById[id] && (this._itemsById[id].el !== el))) {\n\t\t// \tid = \"elt\" + cidSeed++;\n\t\t// }\n\t\t// if (!el.eid) {\n\t\t// \tid = el.eid || el.cid || (\"elt\" + cidSeed++);\n\t\t// }\n\t\tid = el.eid || el.cid || (\"elt\" + cidSeed++);\n\t\titem = new TransformItem(el, id);\n\t\tthis._itemsById[id] = item;\n\t\tthis._items.push(item);\n\t\treturn item;\n\t},\n\n\t_remove: function(el) {\n\t\tif (this.has(el)) {\n\t\t\tvar o = this._itemsById[el.eid];\n\t\t\tthis._items.splice(this._items.indexOf(o), 1);\n\t\t\to.destroy();\n\t\t\tdelete this._itemsById[el.eid];\n\t\t}\n\t},\n\n\t_invoke: function(funcName, args, startIndex) {\n\t\tvar i, ii, j, jj, el, o, rr;\n\t\tvar funcArgs = null;\n\t\tif (startIndex !== void 0) {\n\t\t\tfuncArgs = slice.call(args, 0, startIndex);\n\t\t} else {\n\t\t\tstartIndex = 0;\n\t\t}\n\t\tfor (i = startIndex, ii = args.length, rr = []; i < ii; ++i) {\n\t\t\tel = args[i];\n\t\t\t// iterate on NodeList, Arguments, Array...\n\t\t\tif (el.length) {\n\t\t\t\tfor (j = 0, jj = el.length; j < jj; ++j) {\n\t\t\t\t\to = this._get(el[j]);\n\t\t\t\t\trr.push(o[funcName].apply(o, funcArgs));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\to = this._get(el);\n\t\t\t\trr.push(o[funcName].apply(o, funcArgs));\n\t\t\t}\n\t\t}\n\t\treturn rr;\n\t},\n\n\t/* -------------------------------\n\t/* Public\n\t/* ------------------------------- */\n\n\thas: function(el) {\n\t\treturn el.eid && this._itemsById[el.eid] !== void 0;\n\t},\n\n\tgetItems: function() {\n\t\tvar i, j, el, ret = [];\n\t\tfor (i = 0; i < arguments.length; ++i) {\n\t\t\tel = arguments[i];\n\t\t\tif (el.length) {\n\t\t\t\tfor (j = 0; j < el.length; ++j) {\n\t\t\t\t\tret.push(this._get(el[j]));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tret.push(this._get(el));\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t},\n\n\tget: function(el) {\n\t\treturn this._get(el);\n\t},\n\n\tadd: function() {\n\t\tvar i, j, el;\n\t\tfor (i = 0; i < arguments.length; ++i) {\n\t\t\tel = arguments[i];\n\t\t\tif (el.length) {\n\t\t\t\tfor (j = 0; j < el.length; ++j) {\n\t\t\t\t\tthis._get(el[j]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._get(el);\n\t\t\t}\n\t\t}\n\t},\n\n\tremove: function() {\n\t\tvar i, j, el;\n\t\tfor (i = 0; i < arguments.length; ++i) {\n\t\t\tel = arguments[i];\n\t\t\tif (el.length) {\n\t\t\t\tfor (j = 0; j < el.length; ++j) {\n\t\t\t\t\tthis._remove(el[j]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._remove(el);\n\t\t\t}\n\t\t}\n\t},\n\n\t/* --------------------------------\n\t/* public\n\t/* -------------------------------- */\n\n\t/* public: single arg\n\t/* - - - - - - - - - - - - - - - - */\n\n\thasOffset: function(el) {\n\t\treturn this.has(el) ? this._itemsById[el.eid].hasOffset : (void 0);\n\t},\n\n\t/* public: capture\n\t/* - - - - - - - - - - - - - - - - */\n\n\tcapture: function() {\n\t\tthis._invoke(\"capture\", arguments);\n\t},\n\tcaptureAll: function() {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].capture();\n\t\t}\n\t},\n\n\tclearCapture: function() {\n\t\tthis._invoke(\"clearCapture\", arguments);\n\t},\n\tclearAllCaptures: function() {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].clearCapture();\n\t\t}\n\t},\n\n\t/* public: offset\n\t/* - - - - - - - - - - - - - - - - */\n\toffset: function(x, y) {\n\t\tthis._invoke(\"offset\", arguments, 2);\n\t},\n\toffsetAll: function(x, y) {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].offset(x, y);\n\t\t}\n\t},\n\n\tclearOffset: function() {\n\t\tthis._invoke(\"clearOffset\", arguments);\n\t},\n\tclearAllOffsets: function() {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].clearOffset();\n\t\t}\n\t},\n\n\t/* public: transitions\n\t/* - - - - - - - - - - - - - - - - */\n\n\trunTransition: function(transition) {\n\t\tthis._invoke(\"runTransition\", arguments, 1);\n\t},\n\trunAllTransitions: function(transition) {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].runTransition(transition);\n\t\t}\n\t},\n\n\tclearTransition: function() {\n\t\tthis._invoke(\"clearTransition\", arguments);\n\t},\n\tclearAllTransitions: function() {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].clearTransition();\n\t\t}\n\t},\n\n\tstopTransition: function() {\n\t\tthis._invoke(\"stopTransition\", arguments);\n\t},\n\tstopAllTransitions: function() {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].stopTransition();\n\t\t}\n\t},\n\n\twhenTransitionEnds: function() {\n\t\tvar res = this._invoke(\"whenTransitionEnds\", arguments);\n\t\treturn res.length != 0 ?\n\t\t\tPromise.all(res) :\n\t\t\tPromise.resolve(null);\n\t},\n\twhenAllTransitionsEnd: function() {\n\t\treturn (this._items.length != 0) ? Promise.all(this._items.map(function(o) {\n\t\t\treturn o.whenTransitionEnds();\n\t\t})) : Promise.resolve(null);\n\t},\n\n\tpromise: function() {\n\t\treturn arguments.length == 0 ?\n\t\t\tthis.whenAllTransitionsEnd() :\n\t\t\tthis.whenTransitionEnds.call(this, arguments);\n\t},\n\n\t/* -------------------------------\n\t/* validation\n\t/* ------------------------------- */\n\n\tvalidate: function() {\n\t\tfor (var i = 0, ii = this._items.length; i < ii; i++) {\n\t\t\tthis._items[i].validate();\n\t\t}\n\t},\n}, {\n\titems: {\n\t\tget: function() {\n\t\t\treturn this._items;\n\t\t}\n\t}\n});\n\nmodule.exports = TransformHelper;\n",
    "\"use strict\";\n/* -------------------------------\n * Imports\n * ------------------------------- */\n/** @type {module:utils/prefixedProperty} */\nconst prefixedProperty = require(\"utils/prefixedProperty\");\n/** @type {module:utils/prefixedStyleName} */\nconst prefixedStyleName = require(\"utils/prefixedStyleName\");\n/** @type {module:utils/prefixedEvent} */\nconst prefixedEvent = require(\"utils/prefixedEvent\");\n/** @type {String} */\nvar transitionEnd = prefixedEvent(\"transitionend\");\n//var transitionEnd = require(\"utils/event/transitionEnd\");\n// /** @type {Function} */\n// var slice = Array.prototype.slice;\n\n// /** @type {module:utils/debug/traceElement} */\n// var traceElt = require(\"./debug/traceElement\");\n// var traceEltCache = {};\n// var log = function() {\n// \tvar logFn = \"log\";\n// \tvar args = slice.apply(arguments);\n// \tswitch(args[0]) {\n// \t\tcase \"error\":\n// \t\tcase \"warn\":\n// \t\tcase \"info\":\n// \t\t\tlogFn = args.shift();\n// \t\t\tbreak;\n// \t\tdefault:\n// \t\t\t// break;\n// \t\t\treturn;\n// \t}\n// \tvar el, txId;\n// \tif ((el = args[0]) && (txId = el.eid)) {\n// \t\targs[0] = traceEltCache[txId] || (traceEltCache[txId] = el);\n// \t}\n// \targs[0] = \"\\t\" + args[0];\n// \tconsole[logFn].apply(console, args);\n// };\n\n/* jshint -W079 */\n// var console = (function(target) {\n// \treturn Object.getOwnPropertyNames(target).reduce(function(proxy, prop) {\n// \t\tif ((typeof target[prop]) == \"function\") {\n// \t\t\tswitch (prop) {\n// \t\t\t\tcase \"error\":\n// \t\t\t\tcase \"warn\":\n// \t\t\t\tcase \"info\":\n// \t\t\t\t\tproxy[prop] = function () {\n// \t\t\t\t\t\tvar args = slice.apply(arguments);\n// \t\t\t\t\t\tif (typeof args[0] == \"string\") {\n// \t\t\t\t\t\t\targs[0] = prop + \"::\" + args[0];\n// \t\t\t\t\t\t}\n// \t\t\t\t\t\treturn target[prop].apply(target, args);\n// \t\t\t\t\t};\n// \t\t\t\t\tbreak;\n// \t\t\t\tcase \"log\":\n// \t\t\t\t\tproxy[prop] = function() {};\n// \t\t\t\t\tbreak;\n// \t\t\t\tdefault:\n// \t\t\t\t\tproxy[prop] = target[prop].bind(target);\n// \t\t\t\t\tbreak;\n// \t\t\t}\n// \t\t} else {\n// \t\t\tObject.defineProperty(proxy, prop, {\n// \t\t\t\tget: function() { return target[prop]; },\n// \t\t\t\tset: function(val) { target[prop] = val; }\n// \t\t\t});\n// \t\t}\n// \t\treturn proxy;\n// \t}, {});\n// })(window.console);\n/* jshint +W079 */\n\n/* -------------------------------\n/* Private static\n/* ------------------------------- */\n\nvar NO_TRANSITION_VALUE = \"none 0s step-start 0s\";\n// var NO_TRANSITION_VALUE = \"all 0.001s step-start 0.001s\";\n\nvar UNSET_TRANSITION = {\n\tname: \"unset\",\n\tclassName: \"tx-unset\",\n\tproperty: \"none\",\n\teasing: \"ease\",\n\tdelay: 0,\n\tduration: 0,\n\tcssText: \"unset\",\n};\n\n// var translateTemplate = _.template(\"translate(<%= _renderedX %>px, <%= _renderedY %>px)\";\n// var translate3dTemplate = _.template(\"translate3d(<%= _renderedX %>px, <%= _renderedY %>px, 0px)\";\n// var transitionTemplate = _.template(\"<%= property %> <% duration/1000 %>s <%= easing %> <% delay/1000 %>s\");\n\nvar translateTemplate = (function(fn) {\n\treturn function(o) {\n\t\treturn fn(o._renderedX, o._renderedY);\n\t};\n}(require(\"app/control/Globals\").TRANSLATE_TEMPLATE));\n\nvar transitionTemplate = function(o) {\n\treturn o.property + \" \" +\n\t\to.duration / 1000 + \"s \" +\n\t\to.easing + \" \" +\n\t\to.delay / 1000 + \"s\";\n};\n\nvar propDefaults = {\n\t\"opacity\": \"1\",\n\t\"visibility\": \"visible\",\n\t\"transform\": \"matrix(1, 0, 0, 1, 0, 0)\",\n\t\"transformStyle\": \"\",\n\t\"transition\": \"\",\n\t// \"willChange\": \"\",\n\t// \"transitionDuration\": \"0s\",\n\t// \"transitionDelay\": \"0s\",\n\t// \"transitionProperty\": \"none\",\n\t// \"transitionTimingFunction\": \"ease\"\n};\nvar propKeys = Object.keys(propDefaults);\nvar propNames = propKeys.reduce(function(obj, propName) {\n\tobj[propName] = prefixedProperty(propName);\n\treturn obj;\n}, {});\n\nvar styleNames = (function(camelToDashed) {\n\treturn propKeys\n\t\t.map(camelToDashed)\n\t\t.reduce(function(obj, propName) {\n\t\t\tobj[propName] = prefixedStyleName(propName);\n\t\t\treturn obj;\n\t\t}, {});\n})(require(\"utils/strings/camelToDashed\"));\n\nvar resolveAll = function(pp, result) {\n\tif (pp.length != 0) {\n\t\tpp.forEach(function(p, i, a) {\n\t\t\tp.resolve(result);\n\t\t\ta[i] = null;\n\t\t});\n\t\tpp.length = 0;\n\t}\n\treturn pp;\n};\n\nvar rejectAll = function(pp, reason) {\n\tif (pp.length != 0) {\n\t\tpp.forEach(function(p, i, a) {\n\t\t\tp.reject(reason);//\n\t\t\ta[i] = null;\n\t\t});\n\t\tpp.length = 0;//\n\t}\n\treturn pp;\n};\n\n/* -------------------------------\n * TransformItem\n * ------------------------------- */\n\n/**\n * @constructor\n */\nvar TransformItem = function(el, id) {\n\tthis.el = el;\n\tthis.id = id;\n\tthis.el.eid = id;\n\n\tthis._onTransitionEnd = this._onTransitionEnd.bind(this);\n\tthis.el.addEventListener(transitionEnd, this._onTransitionEnd, false);\n\n\tthis._captureInvalid = false;\n\tthis._capturedChanged = false;\n\tthis._capturedX = null;\n\tthis._capturedY = null;\n\tthis._currCapture = {};\n\tthis._lastCapture = {};\n\n\tthis._hasOffset = false;\n\tthis._offsetInvalid = false;\n\tthis._offsetX = null;\n\tthis._offsetY = null;\n\n\tthis._renderedX = null;\n\tthis._renderedY = null;\n\n\tthis._hasTransition = false;\n\tthis._transitionInvalid = false;\n\tthis._transitionRunning = false;\n\tthis._transition = _.extend({}, UNSET_TRANSITION); //{};\n\n\tthis._promises = [];\n\tthis._pendingPromises = [];\n}\n\nTransformItem.prototype = Object.create({\n\n\t/* -------------------------------\n\t/* Public\n\t/* ------------------------------- */\n\n\t/* destroy\n\t/* - - - - - - - - - - - - - - - - */\n\tdestroy: function() {\n\t\t// NOTE: style property may have been modified; clearOffset(element) should\n\t\t// be called explicitly if clean up is required.\n\t\tthis.el.removeEventListener(transitionEnd, this._onTransitionEnd, false);\n\t\tresolveAll(this._pendingPromises, this);\n\t\tresolveAll(this._promises, this);\n\t\t// delete this.el.eid;\n\t},\n\n\t/* capture\n\t/* - - - - - - - - - - - - - - - - */\n\tcapture: function(force) {\n\t\t// console.log(\"tx[%s]::capture\", this.id);\n\t\tif (force) {\n\t\t\tthis.clearCapture();\n\t\t}\n\t\tthis._validateCapture();\n\t\treturn this;\n\t},\n\n\tclearCapture: function() {\n\t\t// console.log(\"tx[%s]::clearCapture\", this.id);\n\t\t// this._hasOffset = false;\n\t\tthis._captureInvalid = true;\n\t\treturn this;\n\t},\n\n\t/* offset/clear\n\t/* - - - - - - - - - - - - - - - - */\n\toffset: function(x, y) {\n\t\t// console.log(\"tx[%s]::offset\", this.id);\n\t\tthis._hasOffset = true;\n\t\tthis._offsetInvalid = true;\n\t\tthis._offsetX = x || 0;\n\t\tthis._offsetY = y || 0;\n\t\t// if (this.immediate) this._validateOffset();\n\t\treturn this;\n\t},\n\n\tclearOffset: function() {\n\t\tif (this._hasOffset) {\n\t\t\t// console.log(\"tx[%s]::clearOffset\", this.id);\n\t\t\tthis._hasOffset = false;\n\t\t\tthis._offsetInvalid = true;\n\t\t\tthis._offsetX = null;\n\t\t\tthis._offsetY = null;\n\t\t\t// if (this.immediate) this._validateOffset();\n\t\t}\n\t\t// else {\n\t\t// \tconsole.log(\"tx[%s]::clearOffset no offset to clear\", this.id);\n\t\t// }\n\t\treturn this;\n\t},\n\n\t/* transitions\n\t/* - - - - - - - - - - - - - - - - */\n\trunTransition: function(transition) {\n\t\tif (!transition) { // || (transition.duration + transition.delay) == 0) {\n\t\t\treturn this.clearTransition();\n\t\t}\n\t\tvar lastValue = this._transitionValue;\n\t\tvar lastName = this._transition.name;\n\t\tthis._transition.property = styleNames[\"transform\"];\n\t\tthis._transition = _.extend(this._transition, transition);\n\t\tthis._transitionValue = transitionTemplate(this._transition);\n\n\t\tif (this._transitionInvalid) {\n\t\t\tconsole.warn(\"tx[%s]::runTransition set over (%s:'%s' => %s:'%s')\", this.id,\n\t\t\t\tlastName, lastValue, this._transition.name, this._transitionValue);\n\t\t}\n\n\t\tthis._hasTransition = true;\n\t\tthis._transitionInvalid = true;\n\t\t// if (this.immediate) this._validateTransition();\n\t\treturn this;\n\t},\n\n\tclearTransition: function() {\n\t\tthis._transition = _.extend(this._transition, UNSET_TRANSITION);\n\t\tthis._transitionValue = NO_TRANSITION_VALUE;\n\n\t\tthis._hasTransition = false;\n\t\tthis._transitionInvalid = true;\n\t\t// if (this.immediate) this._validateTransition();\n\t\treturn this;\n\t},\n\n\tstopTransition: function() {\n\t\t// this._transition.name = \"[none]\";\n\t\t// this._transition.property = \"none\";\n\t\tthis._transition = _.extend(this._transition, UNSET_TRANSITION);\n\t\tthis._transitionValue = NO_TRANSITION_VALUE;\n\n\t\tthis._hasTransition = false;\n\t\tthis._transitionInvalid = true;\n\t\t// if (this.immediate) this._validateTransition();\n\t\treturn this;\n\t},\n\n\twhenTransitionEnds: function() {\n\t\tvar d, p, pp;\n\t\tif (this._transitionInvalid || this._transitionRunning) {\n\t\t\td = {};\n\t\t\tp = new Promise(function(resolve, reject) {\n\t\t\t\td.resolve = resolve;\n\t\t\t\td.reject = reject;\n\t\t\t});\n\t\t\tpp = this._transitionInvalid ? this._pendingPromises : this._promises;\n\t\t\tpp.push(d);\n\t\t} else {\n\t\t\tp = Promise.resolve(this);\n\t\t}\n\t\treturn p;\n\t},\n\n\t/* validation\n\t/* - - - - - - - - - - - - - - - - */\n\tvalidate: function() {\n\t\t// this.el.removeEventListener(transitionEnd, this._onTransitionEnd, false);\n\t\tthis._ignoreEvent = true;\n\n\t\tif (this._captureInvalid) {\n\t\t\tvar lastX = (this._renderedX !== null ? this._renderedX : this._capturedX),\n\t\t\t\tlastY = (this._renderedY !== null ? this._renderedY : this._capturedY);\n\n\t\t\t// this._validateTransition();\n\t\t\tthis._validateCapture();\n\t\t\tthis._validateOffset();\n\n\t\t\tvar currX = (this._renderedX !== null ? this._renderedX : this._capturedX),\n\t\t\t\tcurrY = (this._renderedY !== null ? this._renderedY : this._capturedY);\n\n\t\t\tif (lastX === currX && lastY === currY) {\n\t\t\t\tthis._hasTransition && console.warn(\"tx[%s]::validate unchanged: last:[%i,%i] curr:[%i,%i]\", this.el.id || this.id, lastX, lastY, currX, currY);\n\t\t\t\t// console.info(\"tx[%s]::validate unchanged: last:[%f,%f] curr:[%f,%f] render:[%f,%f] captured[%f,%f]\", this.el.id || this.id, lastX, lastY, currX, currY, this._renderedX, this._renderedY, this._capturedX, this._capturedY);\n\t\t\t\tthis.clearTransition();\n\t\t\t\t// this._validateTransition();\n\t\t\t}\n\t\t\tthis._validateTransition();\n\t\t} else {\n\t\t\t// this._validateCapture();\n\t\t\tthis._validateTransition();\n\t\t\tthis._validateOffset();\n\t\t}\n\n\t\t// this.el.addEventListener(transitionEnd, this._onTransitionEnd, false);\n\t\tthis._ignoreEvent = false;\n\n\t\t// if (this._capturedChanged) {\n\t\t// \tconsole.error(\"tx[%s]::validate capture changed: [%f,%f]\", this.id, this._capturedX, this._capturedY);\n\t\t// }\n\t\tthis._capturedChanged = false;\n\t\treturn this;\n\t},\n\n\t/* -------------------------------\n\t/* Private\n\t/* ------------------------------- */\n\n\t_validateCapture: function() {\n\t\tif (!this._captureInvalid) {\n\t\t\treturn;\n\t\t}\n\t\t// var computed, capturedValues;\n\t\tvar transformValue = null;\n\n\t\tif (this._hasOffset && !this._offsetInvalid) {\n\t\t\t// this is an explicit call to capture() instead of a subcall from _validateOffset()\n\t\t\ttransformValue = this._getCSSProp(\"transform\");\n\t\t\tif (transformValue === \"\") {\n\t\t\t\tconsole.error(\"tx[%s]::_capture valid offset (%i,$i) but transformValue=\\\"\\\"\", this.id, this._offsetX, this._offsetY);\n\t\t\t}\n\t\t\tthis._removeCSSProp(\"transform\");\n\t\t}\n\n\t\t// NOTE: reusing object, all props will be overwritten\n\t\tthis._lastCapture = this._currCapture;\n\t\tthis._currCapture = this._getComputedCSSProps();\n\n\t\tif (this._currCapture.transform !== this._lastCapture.transform) {\n\t\t\tvar m, mm; //, ret = {};\n\t\t\tmm = this._currCapture.transform.match(/(matrix|matrix3d)\\(([^\\)]+)\\)/);\n\t\t\tif (mm) {\n\t\t\t\tm = mm[2].split(\",\");\n\t\t\t\tif (mm[1] === \"matrix\") {\n\t\t\t\t\tthis._capturedX = parseFloat(m[4]);\n\t\t\t\t\tthis._capturedY = parseFloat(m[5]);\n\t\t\t\t} else {\n\t\t\t\t\tthis._capturedX = parseFloat(m[12]);\n\t\t\t\t\tthis._capturedY = parseFloat(m[13]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._capturedX = 0;\n\t\t\t\tthis._capturedY = 0;\n\t\t\t}\n\t\t\tthis._capturedChanged = true;\n\t\t}\n\t\tif (transformValue !== null) {\n\t\t\tconsole.log(\"tx[%s]::_capture reapplying '%s'\", this.id, transformValue);\n\t\t\tthis._setCSSProp(\"transform\", transformValue);\n\t\t}\n\t\tthis._captureInvalid = false;\n\t},\n\n\t_validateOffset: function() {\n\t\tif (this._offsetInvalid) {\n\t\t\t// this._validateCapture();\n\t\t\tthis._offsetInvalid = false;\n\t\t\tif (this._hasOffset) {\n\t\t\t\tvar tx = this._offsetX + this._capturedX;\n\t\t\t\tvar ty = this._offsetY + this._capturedY;\n\t\t\t\tif (tx !== this._renderedX || ty !== this._renderedY) {\n\t\t\t\t\tthis._renderedX = tx;\n\t\t\t\t\tthis._renderedY = ty;\n\t\t\t\t\tthis._setCSSProp(\"transform\", translateTemplate(this));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._renderedX = null;\n\t\t\t\tthis._renderedY = null;\n\t\t\t\tthis._removeCSSProp(\"transform\");\n\t\t\t}\n\t\t}\n\t},\n\n\t_validateTransition: function() {\n\t\tif (this._transitionInvalid) {\n\t\t\t// this._validateCapture();\n\t\t\tthis._transitionInvalid = false;\n\n\t\t\t// save promises made while invalid\n\t\t\tvar pp = this._promises;\n\t\t\t// prepare _promises and push in new ones\n\t\t\tthis._promises = this._pendingPromises;\n\t\t\t// whatever still here is to be rejected. reuse array\n\t\t\tthis._pendingPromises = resolveAll(pp, this);\n\n\t\t\t// Set running flag, if there's a transition to run\n\t\t\tthis._transitionRunning = this._hasTransition;\n\t\t\t// Set the css value (which will be empty string if there's no transition)\n\t\t\tthis._setCSSProp(\"transition\", this._transitionValue);\n\t\t\tif (DEBUG) {\n\t\t\t\tif (this._hasTransition) {\n\t\t\t\t\tthis.el.setAttribute(\"data-tx\", this._transition.name);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!this._hasTransition) {\n\t\t\t\t// if there is no transition, resolve promises now\n\t\t\t\tresolveAll(this._promises, this);\n\t\t\t}\n\t\t}\n\t},\n\n\t_onTransitionEnd: function(ev) {\n\t\tif (this._ignoreEvent) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._transitionRunning && (this.el === ev.target) &&\n\t\t\t(this._transition.property == ev.propertyName)) {\n\t\t\tthis._hasTransition = false;\n\t\t\tthis._transitionRunning = false;\n\t\t\tthis._removeCSSProp(\"transition\");\n\t\t\tresolveAll(this._promises, this);\n\n\t\t\tif (DEBUG) {\n\t\t\t\tif (this.el.hasAttribute(\"data-tx\")) {\n\t\t\t\t\t// this.el.setAttribute(\"data-tx-last\", this.el.getAttribute(\"data-tx\"));\n\t\t\t\t\tthis.el.removeAttribute(\"data-tx\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/* -------------------------------\n\t/* CSS\n\t/* ------------------------------- */\n\n\t_getCSSProp: function(prop) {\n\t\treturn this.el.style[propNames[prop]];\n\t\t// return this.el.style[prefixedProperty(prop)];\n\t\t// return this.el.style.getPropertyValue(styleNames[prop]);\n\t},\n\n\t_setCSSProp: function(prop, value) {\n\t\tif (prop === \"transition\" && value == NO_TRANSITION_VALUE) {\n\t\t\tvalue = \"\";\n\t\t}\n\t\tif (value === null || value === void 0 || value === \"\") {\n\t\t\tthis._removeCSSProp(prop);\n\t\t} else {\n\t\t\tthis.el.style[propNames[prop]] = value;\n\t\t\t// this.el.style.setProperty(styleNames[prop], value);\n\t\t}\n\t},\n\n\t_removeCSSProp: function(prop) {\n\t\tthis.el.style[propNames[prop]] = \"\";\n\t\t// this.el.style.removeProperty(styleNames[prop]);\n\t},\n\n\t_getComputedCSSProps: function() {\n\t\tvar values = {};\n\t\tvar computed = window.getComputedStyle(this.el);\n\t\tfor (var p in propNames) {\n\t\t\tvalues[p] = computed[propNames[p]];\n\t\t}\n\t\treturn values;\n\t},\n}, {\n\ttransition: {\n\t\tget: function() {\n\t\t\treturn this._transition;\n\t\t}\n\t},\n\thasTransition: {\n\t\tget: function() {\n\t\t\treturn this._hasTransition;\n\t\t}\n\t},\n\tcapturedChanged: {\n\t\tget: function() {\n\t\t\treturn this._capturedChanged;\n\t\t}\n\t},\n\tcapturedX: {\n\t\tget: function() {\n\t\t\treturn this._capturedX;\n\t\t}\n\t},\n\tcapturedY: {\n\t\tget: function() {\n\t\t\treturn this._capturedY;\n\t\t}\n\t},\n\n\thasOffset: {\n\t\tget: function() {\n\t\t\treturn this._hasOffset;\n\t\t}\n\t},\n\toffsetX: {\n\t\tget: function() {\n\t\t\treturn this._offsetX;\n\t\t}\n\t},\n\toffsetY: {\n\t\tget: function() {\n\t\t\treturn this._offsetY;\n\t\t}\n\t},\n});\n\nmodule.exports = TransformItem;\n",
    "module.exports = function(a1, a2, dest) {\n\treturn a1.reduce(function(res, o, i, a) {\n\t\tif (a2.indexOf(o) == -1) res.push(o);\n\t\treturn res;\n\t}, (dest !== void 0) ? dest : []);\n};\n",
    "var PI2 = Math.PI * 2;\n\nvar splice = Array.prototype.splice;\n// var concat = Array.prototype.concat;\n\n/*\n *\tUsing javascript to convert radians to degrees with positive and\n *\tnegative values [https://stackoverflow.com/questions/29588404/]\n *\t`(((r * (180/Math.PI)) % 360) + 360) % 360;`\n *\t`function mod(n, m) {\n *\t\treturn ((n % m) + m) % m;\n *\t}`\n */\nvar _mod = function(n, m) {\n\treturn ((n % m) + m) % m;\n};\n\nvar setStyle = function(ctx, s) {\n\tif (typeof s != \"object\") return;\n\tfor (var p in s) {\n\t\tswitch (typeof ctx[p]) {\n\t\t\tcase \"undefined\":\n\t\t\t\tbreak;\n\t\t\tcase \"function\":\n\t\t\t\tif (Array.isArray(s[p])) {\n\t\t\t\t\tctx[p].apply(ctx, s[p]);\n\t\t\t\t} else {\n\t\t\t\t\tctx[p].call(ctx, s[p]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tctx[p] = s[p];\n\t\t}\n\t}\n};\n\nvar _drawShape = function(fn, s, ctx) {\n\tctx.save();\n\tif (s) {\n\t\tsetStyle(ctx, s);\n\t}\n\tfn.apply(null, splice.call(arguments, 2));\n\tif ('strokeStyle' in s) { /* ctx.lineWidth > 0 */\n\t\tctx.stroke();\n\t}\n\tif ('fillStyle' in s) { /* ctx.fillStyle !== \"transparent\" */\n\t\tctx.fill();\n\t}\n\tctx.restore();\n};\n\nmodule.exports = {\n\tsetStyle: setStyle,\n\n\tvGuide: function(ctx, x) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(x, 0);\n\t\tctx.lineTo(x, ctx.canvas.height);\n\t},\n\tdrawVGuide: function(ctx, s, x) {\n\t\t_drawShape(this.vGuide, s, ctx, x);\n\t},\n\n\thGuide: function(ctx, y) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(0, y);\n\t\tctx.lineTo(ctx.canvas.width, y);\n\t},\n\tdrawHGuide: function(ctx, s, y) {\n\t\t_drawShape(this.hGuide, s, ctx, y);\n\t},\n\n\tcrosshair: function(ctx, x, y, r) {\n\t\tctx.save();\n\t\tctx.translate(x, y);\n\t\tctx.rotate(Math.PI / 4);\n\t\tctx.beginPath();\n\t\tctx.moveTo(0, -r);\n\t\tctx.lineTo(0, r);\n\t\tctx.moveTo(-r, 0);\n\t\tctx.lineTo(r, 0);\n\t\tctx.restore();\n\t},\n\tdrawCrosshair: function(ctx, s, x, y, r) {\n\t\t_drawShape(this.crosshair, s, ctx, x, y, r);\n\t},\n\n\tcircle: function(ctx, x, y, r) {\n\t\tctx.beginPath();\n\t\tctx.arc(x, y, r, 0, PI2);\n\t},\n\tdrawCircle: function(ctx, s, x, y, r) {\n\t\t_drawShape(this.circle, s, ctx, x, y, r);\n\t},\n\n\tsquare: function(ctx, x, y, r) {\n\t\tr = Math.floor(r / 2) * 2;\n\t\tctx.beginPath();\n\t\tctx.rect(x - r, y - r, r * 2, r * 2);\n\t},\n\tdrawSquare: function(ctx, s, x, y, r) {\n\t\t_drawShape(this.square, s, ctx, x, y, r);\n\t},\n\n\tarrowhead: function(ctx, x, y, r, t) {\n\t\tctx.save();\n\t\tctx.translate(x, y);\n\t\tctx.rotate(_mod(t, PI2));\n\t\tctx.translate(r * 0.5, 0);\n\t\tctx.beginPath();\n\t\tctx.moveTo(0, 0);\n\t\t// ctx.lineTo(-r, r * Math.SQRT1_2);\n\t\t// ctx.lineTo(-r, -r * Math.SQRT1_2);\n\t\tctx.lineTo(-r * Math.SQRT2, r * Math.SQRT1_2);\n\t\tctx.arcTo(0, 0, -r * Math.SQRT2, -r * Math.SQRT1_2, r);\n\t\t// ctx.quadraticCurveTo(0, 0, -r * Math.SQRT2, -r * Math.SQRT1_2);\n\t\tctx.lineTo(0, 0);\n\t\tctx.closePath();\n\t\tctx.restore();\n\t},\n\tdrawArrowhead: function(ctx, s, x, y, r, t) {\n\t\t_drawShape(this.arrowhead, s, ctx, x, y, r, t);\n\t},\n\n\tarrowhead2: function(ctx, x, y, r, t) {\n\t\tctx.save();\n\t\tctx.translate(x, y);\n\t\tctx.rotate(_mod(t, PI2));\n\t\tctx.beginPath();\n\t\tctx.moveTo(-r, r * Math.SQRT1_2);\n\t\tctx.lineTo(0, 0);\n\t\tctx.lineTo(-r, -r * Math.SQRT1_2);\n\t\tctx.restore();\n\t},\n\tdrawArrowhead2: function(ctx, s, x, y, r, t) {\n\t\t_drawShape(this.arrowhead, s, ctx, x, y, r, t);\n\t},\n\n\trect: function(ctx, a1, a2, a3, a4) {\n\t\tif (typeof a1 === \"object\") {\n\t\t\ta4 = a1.height;\n\t\t\ta3 = a1.width;\n\t\t\ta2 = a1.top;\n\t\t\ta1 = a1.left;\n\t\t}\n\t\tctx.beginPath();\n\t\tctx.rect(a1, a2, a3, a4);\n\t},\n\tdrawRect: function(ctx, s, a1, a2, a3, a4) {\n\t\t_drawShape(this.rect, s, ctx, a1, a2, a3, a4);\n\t},\n\n\troundRect: function(ctx, x, y, w, h, r) {\n\t\tif (w < 2 * r) r = w / 2;\n\t\tif (h < 2 * r) r = h / 2;\n\t\tctx.beginPath();\n\t\tctx.moveTo(x + r, y);\n\t\tctx.arcTo(x + w, y, x + w, y + h, r);\n\t\tctx.arcTo(x + w, y + h, x, y + h, r);\n\t\tctx.arcTo(x, y + h, x, y, r);\n\t\tctx.arcTo(x, y, x + w, y, r);\n\t\tctx.closePath();\n\t},\n\tdrawRoundRect: function(ctx, s, x, y, w, h, r) {\n\t\t_drawShape(this.roundRect, s, ctx, x, y, h, r);\n\t},\n\n\tquadRoundRect: function(ctx, x, y, w, h, r) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(x, y + r);\n\t\tctx.quadraticCurveTo(x, y, x + r, y);\n\t\tctx.lineTo(x + w - r, y);\n\t\tctx.quadraticCurveTo(x + w, y, x + w, y + r);\n\t\tctx.lineTo(x + w, y + h - r);\n\t\tctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n\t\tctx.lineTo(x + r, y + h);\n\t\tctx.quadraticCurveTo(x, y + h, x, y + h - r);\n\t\tctx.closePath();\n\t},\n\tdrawQuadRoundRect: function(ctx, s, x, y, w, h, r) {\n\t\t_drawShape(this.quadRoundRect, s, ctx, x, y, h, r);\n\t},\n};\n",
    "\"use strict\";\n/*\n\nStackBlur - a fast almost Gaussian Blur For Canvas\n\nVersion:  0.5\nAuthor: Mario Klingemann\nContact:  mario@quasimondo.com\nWebsite: http://www.quasimondo.com/StackBlurForCanvas\nTwitter: @quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr: \nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2010 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nmodule.exports = function() {\n\tthis.r = 0;\n\tthis.g = 0;\n\tthis.b = 0;\n\tthis.a = 0;\n\tthis.next = null;\n};\n",
    "module.exports = function(imageData, adj) {\n\tvar pixels = imageData.data;\n\tvar r, g, b, s;\n\tvar i, ii;\n\n\tif (arguments.length === 1) {\n\t\tfor (i = 0, ii = pixels.length; i < ii; i += 4) {\n\t\t\tpixels[i] = (pixels[i] * 299 + pixels[i + 1] * 587 + pixels[i + 2] * 144) / 1000;\n\t\t}\n\t} else\n\tif (arguments.length === 2) {\n\t\tif (0 >= adj > 1) {\n\t\t\tconsole.warn(\"argument out of range (1-0)\", adj);\n\t\t\treturn imageData;\n\t\t}\n\t\tfor (i = 0, ii = pixels.length; i < ii; i += 4) {\n\t\t\tr = pixels[i];\n\t\t\tg = pixels[i + 1];\n\t\t\tb = pixels[i + 2];\n\t\t\t// s = ((r * 299 + g * 587 + b * 144) / 1000) * (1 - adj);\n\t\t\t// pixels[i] = r * adj + s;\n\t\t\t// pixels[i + 1] = g * adj + s;\n\t\t\t// pixels[i + 2] = b * adj + s;\n\t\t\ts = Math.max(r, g, b);\n\t\t\tif (s === 0) {\n\t\t\t\tpixels[i] = Math.round(255 * adj);\n\t\t\t\tpixels[i + 1] = Math.round(255 * adj);\n\t\t\t\tpixels[i + 2] = Math.round(255 * adj);\n\t\t\t} else {\n\t\t\t\ts = 255 * adj / s;\n\t\t\t\tpixels[i] = Math.round(r * s);\n\t\t\t\tpixels[i + 1] = Math.round(g * s);\n\t\t\t\tpixels[i + 2] = Math.round(b * s);\n\t\t\t}\n\t\t}\n\t}\n\treturn imageData;\n};\n\n// function saturation(r,g,b, s) {\n//     var min = rgb.indexOf(Math.min.apply(null, rgb)), // index of min\n//         max = rgb.indexOf(Math.max.apply(null, rgb)), // index of max\n//         mid = [0, 1, 2].filter(function (i) {return i !== min && i !== max;})[0],\n//         a = rgb[max] - rgb[min],\n//         b = rgb[mid] - rgb[min],\n//         x = rgb[max],\n//         arr = [x, x, x];\n//     if (min === max) {\n//         min = 2; // both max = min = 0, => mid = 1, so set min = 2\n//         a = 1;   // also means a = b = 0, don't want division by 0 in `b / a`\n//     }\n//\n//     arr[max] = x;\n//     arr[min] = Math.round(x * (1 - s));\n//     arr[mid] = Math.round(x * ((1 - s) + s * b / a));\n//\n//     return arr;\n// }\n\n\n// function nvalue(rgb, v) {\n//     var x = Math.max.apply(null, rgb);\n//     if (x === 0)\n//         return [\n//             Math.round(255 * v),\n//             Math.round(255 * v),\n//             Math.round(255 * v)\n//         ];\n//     x = 255 * v / x;\n//     return [\n//         Math.round(rgb[0] * x),\n//         Math.round(rgb[1] * x),\n//         Math.round(rgb[2] * x)\n//     ];\n// }\n",
    "module.exports = function(imageData, opts) {\n\tvar pixels = imageData.data;\n\tvar pixelsNum = pixels.length;\n\tvar rgbAvg = [0, 0, 0];\n\tvar i;\n\n\tfor (i = 0; i < pixelsNum; i += 4) {\n\t\trgbAvg[0] += pixels[i];\n\t\trgbAvg[1] += pixels[i + 1];\n\t\trgbAvg[2] += pixels[i + 2];\n\t}\n\tfor (i = 0; i < 3; i++) {\n\t\trgbAvg[i] = (rgbAvg[i] / (pixelsNum / 4)) | 0;\n\t}\n\treturn rgbAvg;\n};\n",
    "\"use strict\";\n/*\n\nStackBlur - a fast almost Gaussian Blur For Canvas\n\nVersion:  0.5\nAuthor: Mario Klingemann\nContact:  mario@quasimondo.com\nWebsite: http://www.quasimondo.com/StackBlurForCanvas\nTwitter: @quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr: \nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2010 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nmodule.exports = [\n\t\t512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512,\n\t\t454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512,\n\t\t482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456,\n\t\t437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512,\n\t\t497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328,\n\t\t320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456,\n\t\t446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335,\n\t\t329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512,\n\t\t505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405,\n\t\t399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328,\n\t\t324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271,\n\t\t268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456,\n\t\t451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388,\n\t\t385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335,\n\t\t332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292,\n\t\t289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\n",
    "module.exports = function(pixels, adjustment) {\n\tvar d = pixels.data;\n\tfor (var i = 0; i < d.length; i += 4) {\n\t\td[i] *= adjustment;\n\t\td[i + 1] *= adjustment;\n\t\td[i + 2] *= adjustment;\n\t}\n\treturn pixels;\n};\n",
    "\"use strict\";\n/*\n\nStackBlur - a fast almost Gaussian Blur For Canvas\n\nVersion:  0.5\nAuthor: Mario Klingemann\nContact:  mario@quasimondo.com\nWebsite: http://www.quasimondo.com/StackBlurForCanvas\nTwitter: @quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr: \nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2010 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nmodule.exports = [\n\t\t9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17,\n\t\t17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19,\n\t\t19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20,\n\t\t20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21,\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,\n\t\t21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22,\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\n\t\t22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\n\t\t23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n\t\t24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n",
    "/* jshint ignore:start */\n/*\n\nStackBlur - a fast almost Gaussian Blur For Canvas\n\nVersion:  0.5\nAuthor: Mario Klingemann\nContact:  mario@quasimondo.com\nWebsite: http://www.quasimondo.com/StackBlurForCanvas\nTwitter: @quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr:\nhttps://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2010 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nconst mul_table = require(\"./mul_table\");\nconst shg_table = require(\"./shg_table\");\nconst BlurStack = require(\"./BlurStack\");\n\nmodule.exports = function(imageData, opts) {\n\tif ((typeof opts === \"object\") && opts.hasOwnProperty(\"radius\")) {\n\t\topts = opts.radius;\n\t}\n\tif ((typeof opts !== \"number\") || isNaN(opts) || (1 > opts)) {\n\t\t// no valid argument value do nothing\n\t\treturn imageData;\n\t}\n\tvar radius = opts | 0;\n\tvar pixels = imageData.data,\n\t\twidth = imageData.width,\n\t\theight = imageData.height;\n\n\tvar x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum,\n\t\tr_out_sum, g_out_sum, b_out_sum,\n\t\tr_in_sum, g_in_sum, b_in_sum,\n\t\tpr, pg, pb, rbs;\n\n\tvar div = radius + radius + 1;\n\tvar w4 = width << 2;\n\tvar widthMinus1 = width - 1;\n\tvar heightMinus1 = height - 1;\n\tvar radiusPlus1 = radius + 1;\n\tvar sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;\n\n\tvar stackStart = new BlurStack();\n\tvar stack = stackStart;\n\tfor (i = 1; i < div; i++) {\n\t\tstack = stack.next = new BlurStack();\n\t\tif (i == radiusPlus1) var stackEnd = stack;\n\t}\n\tstack.next = stackStart;\n\tvar stackIn = null;\n\tvar stackOut = null;\n\n\tyw = yi = 0;\n\n\tvar mul_sum = mul_table[radius];\n\tvar shg_sum = shg_table[radius];\n\n\tfor (y = 0; y < height; y++) {\n\t\tr_in_sum = g_in_sum = b_in_sum = r_sum = g_sum = b_sum = 0;\n\n\t\tr_out_sum = radiusPlus1 * (pr = pixels[yi]);\n\t\tg_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n\t\tb_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n\n\t\tr_sum += sumFactor * pr;\n\t\tg_sum += sumFactor * pg;\n\t\tb_sum += sumFactor * pb;\n\n\t\tstack = stackStart;\n\n\t\tfor (i = 0; i < radiusPlus1; i++) {\n\t\t\tstack.r = pr;\n\t\t\tstack.g = pg;\n\t\t\tstack.b = pb;\n\t\t\tstack = stack.next;\n\t\t}\n\n\t\tfor (i = 1; i < radiusPlus1; i++) {\n\t\t\tp = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n\t\t\tr_sum += (stack.r = (pr = pixels[p])) * (rbs = radiusPlus1 - i);\n\t\t\tg_sum += (stack.g = (pg = pixels[p + 1])) * rbs;\n\t\t\tb_sum += (stack.b = (pb = pixels[p + 2])) * rbs;\n\n\t\t\tr_in_sum += pr;\n\t\t\tg_in_sum += pg;\n\t\t\tb_in_sum += pb;\n\n\t\t\tstack = stack.next;\n\t\t}\n\n\t\tstackIn = stackStart;\n\t\tstackOut = stackEnd;\n\t\tfor (x = 0; x < width; x++) {\n\t\t\tpixels[yi] = (r_sum * mul_sum) >> shg_sum;\n\t\t\tpixels[yi + 1] = (g_sum * mul_sum) >> shg_sum;\n\t\t\tpixels[yi + 2] = (b_sum * mul_sum) >> shg_sum;\n\n\t\t\tr_sum -= r_out_sum;\n\t\t\tg_sum -= g_out_sum;\n\t\t\tb_sum -= b_out_sum;\n\n\t\t\tr_out_sum -= stackIn.r;\n\t\t\tg_out_sum -= stackIn.g;\n\t\t\tb_out_sum -= stackIn.b;\n\n\t\t\tp = (yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1)) << 2;\n\n\t\t\tr_in_sum += (stackIn.r = pixels[p]);\n\t\t\tg_in_sum += (stackIn.g = pixels[p + 1]);\n\t\t\tb_in_sum += (stackIn.b = pixels[p + 2]);\n\n\t\t\tr_sum += r_in_sum;\n\t\t\tg_sum += g_in_sum;\n\t\t\tb_sum += b_in_sum;\n\n\t\t\tstackIn = stackIn.next;\n\n\t\t\tr_out_sum += (pr = stackOut.r);\n\t\t\tg_out_sum += (pg = stackOut.g);\n\t\t\tb_out_sum += (pb = stackOut.b);\n\n\t\t\tr_in_sum -= pr;\n\t\t\tg_in_sum -= pg;\n\t\t\tb_in_sum -= pb;\n\n\t\t\tstackOut = stackOut.next;\n\n\t\t\tyi += 4;\n\t\t}\n\t\tyw += width;\n\t}\n\n\tfor (x = 0; x < width; x++) {\n\t\tg_in_sum = b_in_sum = r_in_sum = g_sum = b_sum = r_sum = 0;\n\n\t\tyi = x << 2;\n\t\tr_out_sum = radiusPlus1 * (pr = pixels[yi]);\n\t\tg_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n\t\tb_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n\n\t\tr_sum += sumFactor * pr;\n\t\tg_sum += sumFactor * pg;\n\t\tb_sum += sumFactor * pb;\n\n\t\tstack = stackStart;\n\n\t\tfor (i = 0; i < radiusPlus1; i++) {\n\t\t\tstack.r = pr;\n\t\t\tstack.g = pg;\n\t\t\tstack.b = pb;\n\t\t\tstack = stack.next;\n\t\t}\n\n\t\typ = width;\n\n\t\tfor (i = 1; i <= radius; i++) {\n\t\t\tyi = (yp + x) << 2;\n\n\t\t\tr_sum += (stack.r = (pr = pixels[yi])) * (rbs = radiusPlus1 - i);\n\t\t\tg_sum += (stack.g = (pg = pixels[yi + 1])) * rbs;\n\t\t\tb_sum += (stack.b = (pb = pixels[yi + 2])) * rbs;\n\n\t\t\tr_in_sum += pr;\n\t\t\tg_in_sum += pg;\n\t\t\tb_in_sum += pb;\n\n\t\t\tstack = stack.next;\n\n\t\t\tif (i < heightMinus1) {\n\t\t\t\typ += width;\n\t\t\t}\n\t\t}\n\n\t\tyi = x;\n\t\tstackIn = stackStart;\n\t\tstackOut = stackEnd;\n\t\tfor (y = 0; y < height; y++) {\n\t\t\tp = yi << 2;\n\t\t\tpixels[p] = (r_sum * mul_sum) >> shg_sum;\n\t\t\tpixels[p + 1] = (g_sum * mul_sum) >> shg_sum;\n\t\t\tpixels[p + 2] = (b_sum * mul_sum) >> shg_sum;\n\n\t\t\tr_sum -= r_out_sum;\n\t\t\tg_sum -= g_out_sum;\n\t\t\tb_sum -= b_out_sum;\n\n\t\t\tr_out_sum -= stackIn.r;\n\t\t\tg_out_sum -= stackIn.g;\n\t\t\tb_out_sum -= stackIn.b;\n\n\t\t\tp = (x + (((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width)) << 2;\n\n\t\t\tr_sum += (r_in_sum += (stackIn.r = pixels[p]));\n\t\t\tg_sum += (g_in_sum += (stackIn.g = pixels[p + 1]));\n\t\t\tb_sum += (b_in_sum += (stackIn.b = pixels[p + 2]));\n\n\t\t\tstackIn = stackIn.next;\n\n\t\t\tr_out_sum += (pr = stackOut.r);\n\t\t\tg_out_sum += (pg = stackOut.g);\n\t\t\tb_out_sum += (pb = stackOut.b);\n\n\t\t\tr_in_sum -= pr;\n\t\t\tg_in_sum -= pg;\n\t\t\tb_in_sum -= pb;\n\n\t\t\tstackOut = stackOut.next;\n\n\t\t\tyi += width;\n\t\t}\n\t}\n\treturn imageData;\n};\n\n/* jshint ignore:end */\n",
    "/**\n * @module utils/canvas/calcArcHConnector\n */\n\nmodule.exports = function(x1, y1, r1, x2, y2, r2, ro) {\n\tvar qx = x2 > x1 ? 1 : -1;\n\tvar qy = y2 > y1 ? 1 : -1;\n\tvar dy = Math.abs(y2 - y1);\n\tvar dx = Math.abs(x2 - x1);\n\tvar rr = r1 + r2;\n\tvar tx1, tx2, c, tx, ty;\n\n\tif (dy < 1) {\n\t\t// points are aligned horizontally, no arcs needed\n\t\ttx1 = 0;\n\t\ttx2 = dx\n\t\t// return [x1, x2];\n\t}\n\n\tif (dy >= rr && dx >= rr) {\n\t\t// arcs fit horizontally:\n\t\t// second circle center is r1+r2, tangent intersect at x=r1\n\t\tc = rr;\n\t\ttx1 = r1;\n\t\ttx2 = r1;\n\t} else {\n\t\t// arcs overlap horizontally:\n\t\t// find second circle center\n\t\tc = Math.sqrt(dy * r2 * 2 + dy * r1 * 2 - dy * dy);\n\n\t\t// circles tangent point\n\t\ttx = (c * r1) / rr;\n\t\tty = (dy * r1) / rr;\n\n\t\tif (r1 < ty || c > dx) {\n\t\t\treturn;\n\t\t}\n\n\t\t// tangent perpendicular slope\n\t\tvar slope = (rr - dy) / c;\n\t\t// tangent intersections\n\t\ttx1 = tx - (ty * slope);\n\t\ttx2 = (dy * slope) + tx1;\n\n\t\t/*\n\t\t// circle centers\n\t\tvar ccx1, ccy1, ccx2, ccy2;\n\t\tccx1 = 0;\n\t\tccy1 = r1;\n\t\tccx2 = c;\n\t\tccy2 = dy - r2;\n\t\t// tangent perpendicular slope\n\t\tvar slope = (ccy1 - ccy2) / (ccx2 - ccx1);\n\t\tvar xSec = tx - (ty * slope);\n\t\t// tangent intersections\n\t\ttx1 = xSec;\n\t\ttx2 = (dy * slope) + xSec;\n\t\t*/\n\t}\n\n\t// offset arcTo's in x-axis\n\tif (ro > 0) {\n\t\tif (ro > 1) {\n\t\t\tro = Math.min(dx - rr, ro);\n\t\t} else {\n\t\t\tro *= dx - rr;\n\t\t}\n\t\ttx1 += ro;\n\t\ttx2 += ro;\n\t}\n\n\treturn [tx1 * qx + x1, tx2 * qx + x1, tx1, tx2];\n};\n\n/*\nvar drawArcConnector = function(ctx, x1, y1, x2, y2, r) {\n\tvar dx, dy, hx, hy, gx, gy;\n\n\thx = 0;\n\thy = 0;\n\tgx = (x1 + x2) / 2;\n\tgy = (y1 + y2) / 2;\n\tdx = Math.abs(x1 - gx);\n\tdy = Math.abs(y1 - gy);\n\n\tif (dx < r && dy < r) {\n\t\tr = Math.min(dx * Math.SQRT1_2, dy * Math.SQRT1_2);\n\t} else {\n\t\tif (dx < r) {\n\t\t\thy = Math.acos(dx / r) * r * 0.5;\n\t\t\tif (y1 > y2) hy *= -1;\n\t\t}\n\t\tif (dy < r) {\n\t\t\thx = Math.acos(dy / r) * r * 0.5;\n\t\t\tif (x1 > x2) hx *= -1;\n\t\t}\n\t}\n\tctx.arcTo(gx - hx, y1, gx + hx, y2, r);\n\tctx.arcTo(gx + hx, y2, x2, y2, r);\n};\n\nvar drawArcConnector2 = function(ctx, x1, y1, x2, y2, r) {\n\tvar dx, dy, hx, hy, cx1, cx2;\n\n\thx = 0;\n\thy = 0;\n\tdx = Math.abs(x2 - x1) / 2;\n\tdy = Math.abs(y1 - y2) / 2;\n\n\tif (dx < r && dy < r) {\n\t\tr = Math.min(dx * Math.SQRT1_2, dy * Math.SQRT1_2);\n\t} else {\n\t\tif (dx < r) {\n\t\t\thy = Math.acos(dx / r) * r;\n\t\t}\n\t\tif (dy < r) {\n\t\t\thx = Math.acos(dy / r) * r;\n\t\t}\n\t}\n\tcx1 = x1 + dx;\n\tcx2 = x2 - (dx - hx / 2);\n\tctx.arcTo(cx1, y1, cx2, y2, r);\n\tctx.arcTo(cx2, y2, x2, y2, r);\n};\n\nvar drawArcConnector1 = function(ctx, x1, y1, x2, y2, r) {\n\tvar dx, dy, cx;\n\n\tdx = Math.abs(x2 - x1) / 2;\n\tdy = Math.abs(y1 - y2) / 2;\n\tr = Math.min(r, dy * Math.SQRT1_2);\n\tif (x1 < x2) {\n\t\tcx = x1 + dx + r;\n\t} else {\n\t\tcx = x2 - dx - r;\n\t}\n\t// cx = (x2 + x1) / 2;\n\t// cx += x1 < x2 ? r : -r;\n\n\tctx.arcTo(cx, y1, cx, y2, r);\n\tctx.arcTo(cx, y2, x2, y2, r);\n};\n*/\n",
    "/* global HTMLElement, CSSStyleDeclaration */\n\n// var parseSize = require(\"./parseSize\");\n\nvar CSS_BOX_PROPS = [\n\t\"boxSizing\", \"position\", \"objectFit\"\n];\nvar CSS_EDGE_PROPS = [\n\t\"marginTop\", \"marginBottom\", \"marginLeft\", \"marginRight\",\n\t\"borderTopWidth\", \"borderBottomWidth\", \"borderLeftWidth\", \"borderRightWidth\",\n\t\"paddingTop\", \"paddingBottom\", \"paddingLeft\", \"paddingRight\",\n];\nvar CSS_POS_PROPS = [\"top\", \"bottom\", \"left\", \"right\"];\nvar CSS_SIZE_PROPS = [\"width\", \"height\", \"minWidth\", \"minHeight\", \"maxWidth\", \"maxHeight\"];\nvar CSS_ALL_PROPS = CSS_EDGE_PROPS.concat(CSS_SIZE_PROPS, CSS_POS_PROPS);\n\n// var COMPUTED_PROPS = [\n// \t\"clientLeft\", \"clientTop\", \"clientWidth\", \"clientHeight\",\n// \t\"offsetLeft\", \"offsetTop\", \"offsetWidth\", \"offsetHeight\"\n// ];\n// var o = _.pick(element, function(val) {\n// \treturn /^(offset|client)(Left|Top|Width|Height)/.test(val);\n// });\n\nvar cssDimensionRE = /^(-?[\\d\\.]+)(px|em|rem)$/;\n// var cssDimRe = /^([-\\.0-9]+)([rem]+)$/;\n\nmodule.exports = function(s, m, includeSizePos) {\n\tif (s instanceof HTMLElement) {\n\t\ts = getComputedStyle(s);\n\t}\n\tif (DEBUG) {\n\t\tif (!(s instanceof CSSStyleDeclaration)) {\n\t\t\tthrow new Error(\"Not a CSSStyleDeclaration nor HTMLElement\");\n\t\t}\n\t}\n\tvar v, p, i, ii, emPx, remPx;\n\tm || (m = {});\n\n\temPx = m.fontSize = parseFloat(s.fontSize);\n\n\tfor (i = 0, ii = CSS_BOX_PROPS.length; i < ii; i++) {\n\t\tp = CSS_BOX_PROPS[i];\n\t\tif (p in s) {\n\t\t\tm[p] = s[p];\n\t\t}\n\t}\n\tvar cssProps = includeSizePos ? CSS_EDGE_PROPS : CSS_ALL_PROPS;\n\tfor (i = 0, ii = cssProps.length; i < ii; i++) {\n\t\tp = cssProps[i];\n\t\tm[\"_\" + p] = s[p];\n\t\tif (s[p] && (v = cssDimensionRE.exec(s[p]))) {\n\t\t\tif (v[2] === \"px\") {\n\t\t\t\tm[p] = parseFloat(v[1]);\n\t\t\t} else if (v[2] === \"em\") {\n\t\t\t\tm[p] = parseFloat(v[1]) * emPx;\n\t\t\t} else if (v[2] === \"rem\") {\n\t\t\t\tremPx || (remPx = parseFloat(getComputedStyle(document.documentElement).fontSize));\n\t\t\t\tm[p] = parseFloat(v[1]) * remPx;\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Ignoring value\", p, v[1], v[2]);\n\t\t\t\tm[p] = null;\n\t\t\t}\n\t\t} // else {\n\t\t//\tconsole.warn(\"Ignoring unitless value\", p, v);\n\t\t//}\n\t}\n\treturn m;\n};\n",
    "/* easeInQuad */\nmodule.exports = function(x, t, b, c, d) {\n\treturn c * (t /= d) * t + b;\n};\n",
    "/* easeOutQuad */\nmodule.exports = function(t, b, c, d) {\n\treturn -c * (t /= d) * (t - 2) + b;\n};\n",
    "/**\n * @param {number} i current iteration\n * @param {number} s start value\n * @param {number} d change in value\n * @param {number} t total iterations\n * @return {number}\n */\nvar linear = function(i, s, d, t) {\n\treturn d * i / t + s;\n};\n\nmodule.exports = linear;\n",
    "/**\n * @module app/view/component/GraphView\n */module.exports = function(rect, dx, dy) {\n\tif (arguments.length == 2) {\n\t\tdy = dx;\n\t}\n\tvar r = {\n\t\twidth: rect.width + dx * 2,\n\t\theight: rect.height + dy * 2\n\t};\n\tif (r.width >= 0) {\n\t\tr.left = rect.left - dx;\n\t\tr.right = r.left + r.width;\n\t\tr.x = r.left;\n\t} else {\n\t\tr.right = rect.right + dx;\n\t\tr.left = rect.right - r.width;\n\t\tr.y = r.right;\n\t}\n\tif (r.height >= 0) {\n\t\tr.top = rect.top - dy;\n\t\tr.bottom = r.top + r.height;\n\t\tr.y = r.top;\n\t} else {\n\t\tr.bottom = rect.bottom + dy;\n\t\tr.top = rect.bottom - r.height;\n\t\tr.y = r.bottom;\n\t}\n\n\treturn r;\n};\n",
    "/** @type {Array} lowercase prefixes */\nvar lcPrefixes = [\"\"].concat(require(\"./prefixes\"));\n\n/** @type {Array} capitalized prefixes */\nvar ucPrefixes = lcPrefixes.map(function(s) {\n\treturn (s === \"\") ? s : s.charAt(0).toUpperCase() + s.substr(1);\n});\n\n/** @type {Object} specific event solvers */\nvar _solvers = {};\n\n/** @type {Object} cached values */\nvar _cache = {};\n\n/**\n * @param {String} name Unprefixed event name\n * @param {?Object} obj Prefix test target\n * @param {?String} testProp Proxy property to test prefixes\n * @return {String|null}\n */\nvar _prefixedEvent = function(name, obj, testProp) {\n\tvar prefixes = /^[A-Z]/.test(name) ? ucPrefixes : lcPrefixes;\n\tobj || (obj = document);\n\tfor (var i = 0; i < prefixes.length; i++) {\n\t\tif (testProp) {\n\t\t\tif ((prefixes[i] + testProp) in obj) {\n\t\t\t\treturn prefixes[i] + name;\n\t\t\t}\n\t\t}\n\t\tif ((\"on\" + prefixes[i] + name) in obj) {\n\t\t\treturn prefixes[i] + name;\n\t\t}\n\t}\n\treturn null;\n};\n\n// transitionend\n_solvers[\"transitionend\"] = function() {\n\tvar prop, style = document.body.style,\n\t\tmap = {\n\t\t\t\"transition\": \"transitionend\",\n\t\t\t\"WebkitTransition\": \"webkitTransitionEnd\",\n\t\t\t\"MozTransition\": \"transitionend\",\n\t\t\t// \"msTransition\" : \"MSTransitionEnd\",\n\t\t\t\"OTransition\": \"oTransitionEnd\"\n\t\t};\n\tfor (prop in map) {\n\t\tif (prop in style) {\n\t\t\treturn map[prop];\n\t\t}\n\t}\n\treturn null;\n};\n\n/**\n * get the prefixed property\n * @param {String} property name\n * @param {Object} look-up object\n * @returns {String|null} prefixed\n */\nmodule.exports = function(evName) {\n\tif (!_cache.hasOwnProperty(evName)) {\n\t\t_cache[evName] = _solvers.hasOwnProperty(evName) ? _solvers[evName]() : _prefixedEvent.apply(null, arguments);\n\t\tif (_cache[evName] === null) {\n\t\t\tconsole.warn(\"Event '%s' not found\", evName);\n\t\t} else {\n\t\t\tconsole.log(\"Event '%s' found as '%s'\", evName, _cache[evName]);\n\t\t}\n\t}\n\treturn _cache[evName];\n\t// return _cache[evName] || (_cache[evName] = _solvers[evName]? _solvers[evName].call() : _prefixedProperty.apply(null, arguments));\n};\n\n/*\nvar defaultTest = function(name, obj) {\n\tvar prefixes = /^[A-Z]/.test(name)? ucPrefixes : lcPrefixes;\n\tfor (var i = 0; i < prefixes.length; i++) {\n\t\tif ((\"on\" + prefixes[i] + name) in obj) {\n\t\t\tconsole.log(\"Event '%s' found as '%s'\", name, prefixes[i] + name);\n\t\t\treturn prefixes[i] + name;\n\t\t}\n\t}\n\treturn null;\n};\n\nvar proxyTest = function(name, obj, testProp) {\n\tvar prefixes = /^[A-Z]/.test(name)? ucPrefixes : lcPrefixes;\n\tfor (var i = 0; i < prefixes.length; i++) {\n\t\tif ((prefixes[i] + testProp) in obj) {\n\t\t\tconsole.log(\"Event %s inferred as '%s' from property '%s'\", name, prefixes[i] + name, testProp);\n\t\t\treturn prefixes[i] + name;\n\t\t}\n\t}\n\treturn null;\n};\n*/\n",
    "/**\n/* @module utils/prefixedProperty\n/*/\n\n/** @type {module:utils/prefixes} */\nconst prefixes = require(\"./prefixes\");\n/** @type {Number} prefix count */\nvar _prefixNum = prefixes.length;\n/** @type {Array} cached values */\nvar _cache = {};\n\nvar _prefixedProperty = function(prop, obj) {\n\tvar prefixedProp, camelProp;\n\n\tif (prop in obj) {\n\t\tconsole.log(\"Property '%s' found unprefixed\", prop);\n\t\treturn prop;\n\t}\n\tcamelProp = prop[0].toUpperCase() + prop.slice(1);\n\tfor (var i = 0; i < _prefixNum; i++) {\n\t\tprefixedProp = prefixes[i] + camelProp;\n\t\tif (prefixedProp in obj) {\n\t\t\tconsole.log(\"Property '%s' found as '%s'\", prop, prefixedProp);\n\t\t\treturn prefixedProp;\n\t\t}\n\t}\n\tconsole.error(\"Property '%s' not found\", prop);\n\treturn null;\n};\n\n/**\n * get the prefixed property\n * @param {String} property name\n * @param {Object} look-up object\n * @returns {String|null} prefixed\n */\nmodule.exports = function(prop, obj) {\n\treturn _cache[prop] || (_cache[prop] = _prefixedProperty(prop, obj || document.body.style));\n};\n",
    "/**\n/* @module utils/prefixedStyleName\n/*/\n\n/** @type {module:utils/prefixes} */\nconst prefixes = require(\"./prefixes\"); //.map(function(prefix) { return \"-\" + prefix + \"-\"; });\n/** @type {Number} prefix count */\nvar _prefixNum = prefixes.length;\n/** @type {Array} cached values */\nvar _cache = {};\n\nvar _prefixedStyleName = function(style, styleObj) {\n\tvar prefixedStyle;\n\n\tif (style in styleObj) {\n\t\tconsole.log(\"CSS style '%s' found unprefixed\", style);\n\t\treturn style;\n\t}\n\tfor (var i = 0; i < _prefixNum; i++) {\n\t\tprefixedStyle = \"-\" + prefixes[i] + \"-\" + style;\n\t\t// prefixedStyle = prefixes[i] + style;\n\t\tif (prefixedStyle in styleObj) {\n\t\t\tconsole.log(\"CSS style '%s' found as '%s'\", style, prefixedStyle);\n\t\t\treturn prefixedStyle;\n\t\t}\n\t}\n\tconsole.warn(\"CSS style '%s' not found\", style);\n\treturn null;\n};\n\n/**\n * get the prefixed style name\n * @param {String} style name\n * @param {Object} look-up style object\n * @returns {String|Undefined} prefixed\n */\nmodule.exports = function(style, styleObj) {\n\t// return _cache[style] || (_cache[style] = _prefixedStyleName_reverse(style, styleObj || document.body.style));\n\treturn _cache[style] || (_cache[style] = _prefixedStyleName(style, styleObj || document.body.style));\n};\n\n// /** @type {module:utils/strings/camelToDashed} */\n// var camelToDashed = require(\"./strings/camelToDashed\");\n// /** @type {module:utils/prefixedProperty} */\n// var prefixedProperty = require(\"./prefixedProperty\");\n// /** @type {module:utils/strings/dashedToCamel} */\n// var dashedToCamel = require(\"./strings/dashedToCamel\");\n//\n// var _prefixedStyleName_reverse = function (style, styleObj) {\n// \tvar camelProp, prefixedProp;\n// \tcamelProp = dashedToCamel(style);\n// \tprefixedProp = prefixedProperty(camelProp, styleObj);\n// \treturn prefixedProp? (camelProp === prefixedProp? \"\" : \"-\") + camelToDashed(prefixedProp) : null;\n// };\n",
    "\"use strict\";\nmodule.exports = [\"webkit\", \"moz\", \"ms\", \"o\"];\n",
    "module.exports = function(pp, reason) {\n\tif (pp.length > 0) {\n\t\tpp.forEach(function(p, i, a) {\n\t\t\tp.reject(reason);\n\t\t\ta[i] = null;\n\t\t});\n\t\tpp.length = 0;\n\t}\n\treturn pp;\n};\n",
    "module.exports = function(pp, result) {\n\tif (pp.length != 0) {\n\t\tpp.forEach(function(p, i, a) {\n\t\t\tp.resolve(result);\n\t\t\ta[i] = null;\n\t\t});\n\t\tpp.length = 0;\n\t}\n\treturn pp;\n};\n",
    "module.exports = function(str) {\n\treturn str.replace(/[A-Z]/g, function($0) {\n\t\treturn \"-\" + $0.toLowerCase();\n\t});\n};\n",
    "module.exports = function(s) {\n\treturn s.replace(/<[^>]+>/g, \"\");\n};\n",
    "/** @type {module:hammerjs} */\nconst Hammer = require(\"hammerjs\");\n\n// /**\n//  * get a usable string, used as event postfix\n//  * @param {Const} state\n//  * @returns {String} state\n//  */\n// function stateStr(state) {\n// \tif (state & Hammer.STATE_CANCELLED) {\n// \t\treturn \"cancel\";\n// \t} else if (state & Hammer.STATE_ENDED) {\n// \t\treturn \"end\";\n// \t} else if (state & Hammer.STATE_CHANGED) {\n// \t\treturn \"move\";\n// \t} else if (state & Hammer.STATE_BEGAN) {\n// \t\treturn \"start\";\n// \t}\n// \treturn \"\";\n// }\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction dirStr(direction) {\n\tif (direction == Hammer.DIRECTION_DOWN) {\n\t\treturn \"down\";\n\t} else if (direction == Hammer.DIRECTION_UP) {\n\t\treturn \"up\";\n\t} else if (direction == Hammer.DIRECTION_LEFT) {\n\t\treturn \"left\";\n\t} else if (direction == Hammer.DIRECTION_RIGHT) {\n\t\treturn \"right\";\n\t}\n\treturn \"\";\n}\n\n///**\n// * Pan\n// * Recognized when the pointer is down and moved in the allowed direction.\n// * @constructor\n// * @extends AttrRecognizer\n// */\n//function PanRecognizer() {\n//\tHammer.AttrRecognizer.apply(this, arguments);\n//\n//\tthis.pX = null;\n//\tthis.pY = null;\n//}\n//\n//inherit(PanRecognizer, Hammer.AttrRecognizer, {\n//\t/**\n//\t/* @namespace\n//\t/* @memberof PanRecognizer\n//\t/*/\n//\tdefaults: {\n//\t\tevent: \"pan\",\n//\t\tthreshold: 10,\n//\t\tpointers: 1,\n//\t\tdirection: DIRECTION_ALL\n//\t},\n//\n//\tgetTouchAction: function() {\n//\t\tvar direction = this.options.direction;\n//\t\tvar actions = [];\n//\t\tif (direction & DIRECTION_HORIZONTAL) {\n//\t\t\tactions.push(TOUCH_ACTION_PAN_Y);\n//\t\t}\n//\t\tif (direction & DIRECTION_VERTICAL) {\n//\t\t\tactions.push(TOUCH_ACTION_PAN_X);\n//\t\t}\n//\t\treturn actions;\n//\t},\n//\n//\tdirectionTest: function(input) {\n//\t\tvar options = this.options;\n//\t\tvar hasMoved = true;\n//\t\tvar distance = input.distance;\n//\t\tvar direction = input.direction;\n//\t\tvar x = input.deltaX;\n//\t\tvar y = input.deltaY;\n//\n//\t\t// lock to axis?\n//\t\tif (!(direction & options.direction)) {\n//\t\t\tif (options.direction & DIRECTION_HORIZONTAL) {\n//\t\t\t\tdirection = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n//\t\t\t\thasMoved = x != this.pX;\n//\t\t\t\tdistance = Math.abs(input.deltaX);\n//\t\t\t} else {\n//\t\t\t\tdirection = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n//\t\t\t\thasMoved = y != this.pY;\n//\t\t\t\tdistance = Math.abs(input.deltaY);\n//\t\t\t}\n//\t\t}\n//\t\tinput.direction = direction;\n//\t\treturn hasMoved && distance > options.threshold && direction & options.direction;\n//\t},\n//\n//\tattrTest: function(input) {\n//\t\treturn AttrRecognizer.prototype.attrTest.call(this, input) &&\n//\t\t\t(this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n//\t},\n//\n//\temit: function(input) {\n//\t\tthis.pX = input.deltaX;\n//\t\tthis.pY = input.deltaY;\n//\n//\t\tvar direction = dirStr(input.direction);\n//\t\tif (direction) {\n//\t\t\tthis.manager.emit(this.options.event + direction, input);\n//\t\t}\n//\n//\t\tthis._super.emit.call(this, input);\n//\t}\n//});\n\n/**\n * SmoothPan\n * @constructor\n * @extends Hammer.Pan\n */\nfunction SmoothPan() {\n\tvar ret = Hammer.Pan.apply(this, arguments);\n\tthis.thresholdOffsetX = null;\n\tthis.thresholdOffsetY = null;\n\tthis.thresholdOffset = null;\n\treturn ret;\n}\n\nHammer.inherit(SmoothPan, Hammer.Pan, {\n\temit: function(input) {\n\t\t// Inheritance breaks, so this code is taken from PanRecognizer.emit\n\t\t//\tthis._super.emit.call(this, input); // Triggers infinite recursion\n\t\t//\tHammer.Pan.prototype.emit.apply(this, arguments); // This breaks too\n\n\t\tvar threshold = this.options.threshold;\n\t\tvar direction = input.direction;\n\n\t\tif (this.state == Hammer.STATE_BEGAN) {\n\t\t\tthis.thresholdOffsetX = (direction & Hammer.DIRECTION_HORIZONTAL) ? ((direction & Hammer.DIRECTION_LEFT) ? threshold : -threshold) : 0;\n\t\t\tthis.thresholdOffsetY = (direction & Hammer.DIRECTION_VERTICAL) ? ((direction & Hammer.DIRECTION_UP) ? threshold : -threshold) : 0;\n\t\t\t// this.thresholdOffset = (direction & Hammer.DIRECTION_HORIZONTAL)? input.thresholdOffsetX : input.thresholdOffsetY;\n\t\t\t// console.log(\"RECOGNIZER STATE\", dirStr(direction), stateStr(this.state), this.thresholdOffsetX);\n\t\t}\n\t\tinput.thresholdOffsetX = this.thresholdOffsetX;\n\t\tinput.thresholdOffsetY = this.thresholdOffsetY;\n\t\tinput.thresholdDeltaX = input.deltaX + this.thresholdOffsetX;\n\t\tinput.thresholdDeltaY = input.deltaY + this.thresholdOffsetY;\n\n\t\tthis.pX = input.deltaX;\n\t\tthis.pY = input.deltaY;\n\n\t\tdirection = dirStr(direction);\n\t\tif (direction) {\n\t\t\tthis.manager.emit(this.options.event + direction, input);\n\t\t}\n\t\treturn Hammer.Recognizer.prototype.emit.apply(this, arguments);\n\t}\n});\n\nmodule.exports = SmoothPan;\n",
    "module.exports={\n\t\"video_crop_px\": \"0\",\n\t\"transform_type\": \"3d\",\n\t\"transitions\": {\n\t\t\"ease\": \"ease-in-out\",\n\t\t\"duration_ms\": \"350\",\n\t\t\"delay_interval_ms\": \"34\",\n\t\t\"min_delay_ms\": \"34\"\n\t},\n\t\"breakpoints\": {\n\t\t\"landscape\": \"'(orientation: landscape)'\",\n\t\t\"portrait\": \"'(orientation: portrait)'\",\n\t\t\"xsmall-stretch\": \"'not screen and (min-width: 460px), not screen and (min-height: 420px)'\",\n\t\t\"small-stretch\": \"'not screen and (min-width: 704px), not screen and (min-height: 420px)'\",\n\t\t\"default\":\"'only screen and (min-width: 704px) and (min-height: 420px)'\",\n\t\t\"medium-wide\": \"'only screen and (min-width: 1024px) and (max-width: 1223px) and (min-height: 420px)'\",\n\t\t\"medium-wide-stretch\": \"'only screen and (min-width: 1224px) and (min-height: 420px)'\"\n\t},\n\t\"default_colors\": {\n\t\t\"color\": \"hsl(47, 5%, 15%)\",\n\t\t\"background-color\": \"hsl(47, 5%, 95%)\",\n\t\t\"link-color\": \"hsl(10, 80%, 50%)\"\n\t},\n\t\"temp\": {\n\t\t\"collapse_offset\": \"360\"\n\t},\n\t\"_ignore\": {\n\t\t\"transitions\": {\n\t\t\t\"ease\": \"cubic-bezier(0.42, 0.0, 0.58, 1.0)\",\n\t\t\t\"duration_ms\": \"400\",\n\t\t\t\"delay_interval_ms\": \"134\",\n\t\t\t\"min_delay_ms\": \"34\"\n\t\t},\n\t\t\"default_colors\": {\n\t\t\t\"--link-color\": \"hsl(10, 80%, 50%)\",\n\t\t\t\"--alt-background-color\": \"unset\"\n\t\t},\n\t\t\"units\": {\n\t\t\t\"hu_px\": \"20\",\n\t\t\t\"vu_px\": \"12\"\n\t\t},\n\t\t\"breakpoints\": {\n\t\t\t\"medium-wide-stretch\": \"'only screen and (min-width: 1024px) and (min-height: 420px)'\",\n\t\t\t\"large-wide\": \"'only screen and (min-width: 1824px) and (min-height: 1024px)'\",\n\t\t\t\"mobile\": \"'not screen and (min-width: 704px), not screen and (min-height: 540px)'\",\n\t\t\t\"unsupported\": \"'not screen and (min-width: 704px)'\",\n\t\t\t\"unquoted\": \"only screen and (min-width: 1824px)\",\n\t\t\t\"unquoted_neg\": \"not screen and (min-width: 704px)\",\n\t\t\t\"quoted_combined\": \"'not screen and (min-width: 704px), not screen and (min-height: 540px)'\",\n\t\t\t\"array\": [\n\t\t\t\t\"only screen and (min-width: 704px)\",\n\t\t\t\t\"not screen and (min-width: 704px)\",\n\t\t\t\t\"not screen and (min-height: 540px)\"\n\t\t\t]\n\t\t}\n\t}\n}\n",
    "/*! Backbone.Mutators - v0.4.4\n------------------------------\nBuild @ 2015-02-03\nDocumentation and Full License Available at:\nhttp://asciidisco.github.com/Backbone.Mutators/index.html\ngit://github.com/asciidisco/Backbone.Mutators.git\nCopyright (c) 2015 Sebastian Golasch <public@asciidisco.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a\ncopy of this software and associated documentation files (the \"Software\"),\nto deal in the Software without restriction, including without limitation\nthe rights to use, copy, modify, merge, publish, distribute, sublicense,\nand/or sell copies of the Software, and to permit persons to whom the\n\nSoftware is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\nDAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\nARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\nIN THE SOFTWARE.*/\n(function (root, factory, undef) {\n    'use strict';\n\n    if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like enviroments that support module.exports,\n        // like Node.\n        module.exports = factory(require('underscore'), require('backbone'));\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['underscore', 'backbone'], function (_, Backbone) {\n            // Check if we use the AMD branch of Back\n            _ = _ === undef ? root._ : _;\n            Backbone = Backbone === undef ? root.Backbone : Backbone;\n            return (root.returnExportsGlobal = factory(_, Backbone, root));\n        });\n    } else {\n        // Browser globals\n        root.returnExportsGlobal = factory(root._, root.Backbone);\n    }\n\n// Usage:\n//\n// Note: This plugin is UMD compatible, you can use it in node, amd and vanilla js envs\n//\n// Vanilla JS:\n// <script src=\"underscore.js\"></script>\n// <script src=\"backbone.js\"></script>\n// <script src=\"backbone.mutators.js\"></script>\n//\n// Node:\n// var _ = require('underscore');\n// var Backbone = require('backbone');\n// var Mutators = require('backbone.mutators');\n//\n//\n// AMD:\n// define(['underscore', 'backbone', 'backbone.mutators'], function (_, Backbone, Mutators) {\n//    // insert sample from below\n//    return User;\n// });\n//\n// var User = Backbone.Model.extend({\n//    mutators: {\n//        fullname: function () {\n//            return this.firstname + ' ' + this.lastname;\n//        }\n//    },\n//\n//    defaults: {\n//        firstname: 'Sebastian',\n//        lastname: 'Golasch'\n//    }\n// });\n//\n// var user = new User();\n// user.get('fullname') // returns 'Sebastian Golasch'\n// user.toJSON() // return '{firstname: 'Sebastian', lastname: 'Golasch', fullname: 'Sebastian Golasch'}'\n\n}(this, function (_, Backbone, root, undef) {\n    'use strict';\n\n    // check if we use the amd branch of backbone and underscore\n    Backbone = Backbone === undef ? root.Backbone : Backbone;\n    _ = _ === undef ? root._ : _;\n\n    // extend backbones model prototype with the mutator functionality\n    var Mutator     = function () {},\n        oldGet      = Backbone.Model.prototype.get,\n        oldSet      = Backbone.Model.prototype.set,\n        oldToJson   = Backbone.Model.prototype.toJSON;\n\n    // This is necessary to ensure that Models declared without the mutators object do not throw and error\n    Mutator.prototype.mutators = {};\n\n    // override get functionality to fetch the mutator props\n    Mutator.prototype.get = function (attr) {\n        var isMutator = this.mutators !== undef;\n\n        // check if we have a getter mutation\n        if (isMutator === true && _.isFunction(this.mutators[attr]) === true) {\n            return this.mutators[attr].call(this);\n        }\n\n        // check if we have a deeper nested getter mutation\n        if (isMutator === true && _.isObject(this.mutators[attr]) === true && _.isFunction(this.mutators[attr].get) === true) {\n            return this.mutators[attr].get.call(this);\n        }\n\n        return oldGet.call(this, attr);\n    };\n\n    // override set functionality to set the mutator props\n    Mutator.prototype.set = function (key, value, options) {\n        var isMutator = this.mutators !== undef,\n            ret = null,\n            attrs = null;\n\n\t\tret = oldSet.call(this, key, value, options);\n\n        // seamleassly stolen from backbone core\n        // check if the setter action is triggered\n        // using key <-> value or object\n        if (_.isObject(key) || key === null) {\n            attrs = key;\n            options = value;\n        } else {\n            attrs = {};\n            attrs[key] = value;\n        }\n\n        // check if we have a deeper nested setter mutation\n        if (isMutator === true && _.isObject(this.mutators[key]) === true) {\n\n            // check if we need to set a single value\n            if (_.isFunction(this.mutators[key].set) === true) {\n                ret = this.mutators[key].set.call(this, key, attrs[key], options, _.bind(oldSet, this));\n            } else if(_.isFunction(this.mutators[key])){\n                ret = this.mutators[key].call(this, key, attrs[key], options, _.bind(oldSet, this));\n            }\n        }\n\n        if (isMutator === true && _.isObject(attrs)) {\n            _.each(attrs, _.bind(function (attr, attrKey) {\n                if (_.isObject(this.mutators[attrKey]) === true) {\n                    // check if we need to set a single value\n\n                    var meth = this.mutators[attrKey];\n                    if(_.isFunction(meth.set)){\n                        meth = meth.set;\n                    }\n\n                    if(_.isFunction(meth)){\n                        if (options === undef || (_.isObject(options) === true && options.silent !== true && (options.mutators !== undef && options.mutators.silent !== true))) {\n                            this.trigger('mutators:set:' + attrKey);\n                        }\n                        meth.call(this, attrKey, attr, options, _.bind(oldSet, this));\n                    }\n\n                }\n            }, this));\n        }\n\n        return ret;\n    };\n\n    // override toJSON functionality to serialize mutator properties\n    Mutator.prototype.toJSON = function (options) {\n        // fetch ye olde values\n        var attr = oldToJson.call(this),\n            isSaving,\n            isTransient;\n        // iterate over all mutators (if there are some)\n        _.each(this.mutators, _.bind(function (mutator, name) {\n            // check if we have some getter mutations\n            if (_.isObject(this.mutators[name]) === true && _.isFunction(this.mutators[name].get)) {\n                isSaving = (this.isSaving) ? this.isSaving(options, mutator, name) : _.has(options || {}, 'emulateHTTP');\n                isTransient = this.mutators[name].transient;\n                if (!isSaving || !isTransient) {\n                  attr[name] = _.bind(this.mutators[name].get, this)();\n                }\n            } else if (_.isFunction(this.mutators[name])) {\n                attr[name] = _.bind(this.mutators[name], this)();\n            }\n        }, this));\n\n        return attr;\n    };\n\n    // override get functionality to get HTML-escaped the mutator props\n    Mutator.prototype.escape = function (attr){\n        var val = this.get(attr);\n        return _.escape(val == null ? '' : '' + val);\n    };\n\n    // extend the models prototype\n    _.extend(Backbone.Model.prototype, Mutator.prototype);\n\n    // make mutators globally available under the Backbone namespace\n    Backbone.Mutators = Mutator;\n    return Mutator;\n}));\n",
    "\"use strict\";\nrequire(\"modernizr-dist\");\n\nModernizr._config.classPrefix = \"mod-\";\nModernizr._config.enableClasses = false;\nModernizr._config.enableJSClasses = false;\nModernizr.addTest(\"weakmap\", function() {\n\treturn window.WeakMap !== void 0;\n});\n/* eslint-disable no-undef */\nModernizr.addTest(\"strictmode\", function() {\n\ttry { undeclaredVar = 1; } catch (e) { return true; }\n\treturn false;\n});\n/* eslint-enable no-undef */\n\nmodule.exports = window.Modernizr;\n",
    "// Backbone.BabySitter\n// -------------------\n// v0.1.11\n//\n// Copyright (c)2016 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n//\n// http://github.com/marionettejs/backbone.babysitter\n\n(function(root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define(['backbone', 'underscore'], function(Backbone, _) {\n      return factory(Backbone, _);\n    });\n  } else if (typeof exports !== 'undefined') {\n    var Backbone = require('backbone');\n    var _ = require('underscore');\n    module.exports = factory(Backbone, _);\n  } else {\n    factory(root.Backbone, root._);\n  }\n\n}(this, function(Backbone, _) {\n  'use strict';\n\n  var previousChildViewContainer = Backbone.ChildViewContainer;\n\n  // BabySitter.ChildViewContainer\n  // -----------------------------\n  //\n  // Provide a container to store, retrieve and\n  // shut down child views.\n  \n  Backbone.ChildViewContainer = (function (Backbone, _) {\n  \n    // Container Constructor\n    // ---------------------\n  \n    var Container = function(views){\n      this._views = {};\n      this._indexByModel = {};\n      this._indexByCustom = {};\n      this._updateLength();\n  \n      _.each(views, this.add, this);\n    };\n  \n    // Container Methods\n    // -----------------\n  \n    _.extend(Container.prototype, {\n  \n      // Add a view to this container. Stores the view\n      // by `cid` and makes it searchable by the model\n      // cid (and model itself). Optionally specify\n      // a custom key to store an retrieve the view.\n      add: function(view, customIndex){\n        var viewCid = view.cid;\n  \n        // store the view\n        this._views[viewCid] = view;\n  \n        // index it by model\n        if (view.model){\n          this._indexByModel[view.model.cid] = viewCid;\n        }\n  \n        // index by custom\n        if (customIndex){\n          this._indexByCustom[customIndex] = viewCid;\n        }\n  \n        this._updateLength();\n        return this;\n      },\n  \n      // Find a view by the model that was attached to\n      // it. Uses the model's `cid` to find it.\n      findByModel: function(model){\n        return this.findByModelCid(model.cid);\n      },\n  \n      // Find a view by the `cid` of the model that was attached to\n      // it. Uses the model's `cid` to find the view `cid` and\n      // retrieve the view using it.\n      findByModelCid: function(modelCid){\n        var viewCid = this._indexByModel[modelCid];\n        return this.findByCid(viewCid);\n      },\n  \n      // Find a view by a custom indexer.\n      findByCustom: function(index){\n        var viewCid = this._indexByCustom[index];\n        return this.findByCid(viewCid);\n      },\n  \n      // Find by index. This is not guaranteed to be a\n      // stable index.\n      findByIndex: function(index){\n        return _.values(this._views)[index];\n      },\n  \n      // retrieve a view by its `cid` directly\n      findByCid: function(cid){\n        return this._views[cid];\n      },\n  \n      // Remove a view\n      remove: function(view){\n        var viewCid = view.cid;\n  \n        // delete model index\n        if (view.model){\n          delete this._indexByModel[view.model.cid];\n        }\n  \n        // delete custom index\n        _.any(this._indexByCustom, function(cid, key) {\n          if (cid === viewCid) {\n            delete this._indexByCustom[key];\n            return true;\n          }\n        }, this);\n  \n        // remove the view from the container\n        delete this._views[viewCid];\n  \n        // update the length\n        this._updateLength();\n        return this;\n      },\n  \n      // Call a method on every view in the container,\n      // passing parameters to the call method one at a\n      // time, like `function.call`.\n      call: function(method){\n        this.apply(method, _.tail(arguments));\n      },\n  \n      // Apply a method on every view in the container,\n      // passing parameters to the call method one at a\n      // time, like `function.apply`.\n      apply: function(method, args){\n        _.each(this._views, function(view){\n          if (_.isFunction(view[method])){\n            view[method].apply(view, args || []);\n          }\n        });\n      },\n  \n      // Update the `.length` attribute on this container\n      _updateLength: function(){\n        this.length = _.size(this._views);\n      }\n    });\n  \n    // Borrowing this code from Backbone.Collection:\n    // http://backbonejs.org/docs/backbone.html#section-106\n    //\n    // Mix in methods from Underscore, for iteration, and other\n    // collection related features.\n    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n      'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n      'last', 'without', 'isEmpty', 'pluck', 'reduce'];\n  \n    _.each(methods, function(method) {\n      Container.prototype[method] = function() {\n        var views = _.values(this._views);\n        var args = [views].concat(_.toArray(arguments));\n        return _[method].apply(_, args);\n      };\n    });\n  \n    // return the public API\n    return Container;\n  })(Backbone, _);\n  \n\n  Backbone.ChildViewContainer.VERSION = '0.1.11';\n\n  Backbone.ChildViewContainer.noConflict = function () {\n    Backbone.ChildViewContainer = previousChildViewContainer;\n    return this;\n  };\n\n  return Backbone.ChildViewContainer;\n\n}));\n",
    "/**\n * Backbone.Native\n *\n * For all details and documentation:\n * http://github.com/inkling/backbone.native\n *\n * Copyright 2013 Inkling Systems, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The purpose of this library is to allow Backbone to work without needing to load jQuery or Zepto.\n * This file provides a basic jQuery-like implementation for Backbone, implementing the\n * minimum functionality for Backbone to function. We assume that Backbone applications using\n * this will not expect the standard jQuery API to work, and will instead use native JS functions.\n *\n * Keep in mind that due to the APIs in this, it will likely only work on recent browsers.\n *\n * Note:\n *  - Core Backbone only needs collections with single members, so that is all that has been\n *      supported in this library. It is expected that you will just use querySelectorAll instead.\n *      This will be most obvious if you make heavy use of 'view.$'.\n *  - Events delegated with selectors starting with '>' are not supported.\n *  - Due to 'currentTarget' being read-only on standard DOM events, we cannot make standard\n *      events behave identically to jQuery's events when delegation is used. The element matching\n *      the delegate selector is instead passed as the second argument to event handlers.\n *  - The '$.ajax' implementation is very simple and likely needs to be expanded to better support\n *      standard use-cases.\n *\n * Tested with Backbone v0.9.2 and 1.0.0.\n */\n(function(){\n    \"use strict\";\n\n    // Regular expression to match an event name and/or a namespace.\n    var namespaceRE = /^([^.]+)?(?:\\.([^.]+))?$/;\n\n    var matchesSelector = Element.prototype.matchesSelector || null;\n    if (!matchesSelector){\n        ['webkit', 'moz', 'o', 'ms'].forEach(function(prefix){\n            var func = Element.prototype[prefix + 'MatchesSelector'];\n            if (func) matchesSelector = func;\n        });\n    }\n\n    // The element property to save the cache key on.\n    var cacheKeyProp = 'backboneNativeKey' + Math.random();\n    var id = 1;\n    var handlers = {};\n    var unusedKeys = [];\n\n    /**\n     * Get the event handlers for a given element, creating an empty set if one doesn't exist.\n     *\n     * To avoid constantly filling the handlers object with null values, we reuse old IDs that\n     * have been created and then cleared.\n     *\n     * @param {Element} el The element to get handlers for.\n     *\n     * @return {Array} An array of handlers.\n     */\n    function handlersFor(el){\n        if (!el[cacheKeyProp]){\n            // Pick a new key, from the unused pool, or make a new one.\n            el[cacheKeyProp] = unusedKeys.length === 0 ? ++id : unusedKeys.pop();\n        }\n\n        var cacheKey = el[cacheKeyProp];\n        return handlers[cacheKey] || (handlers[cacheKey] = []);\n    }\n\n    /**\n     * Clear the event handlers for a given element.\n     *\n     * @param {Element} el The element to clear.\n     */\n    function clearHandlers(el){\n        var cacheKey = el[cacheKeyProp];\n        if (handlers[cacheKey]){\n            handlers[cacheKey] = null;\n            el[cacheKeyProp] = null;\n            unusedKeys.push(cacheKey);\n        }\n    }\n\n    /**\n     * Add event handlers to an element.\n     *\n     * @param {Element} parentElement The element to bind event handlers to.\n     * @param {string} eventName The event to bind, e.g. 'click'.\n     * @param {string} selector (Optional) The selector to match when an event propagates up.\n     * @param {function(Event, Element)} callback The function to call when the event is fired.\n     */\n    function on(parentElement, eventName, selector, callback){\n        // Adjust arguments if selector was not provided.\n        if (typeof selector === 'function'){\n            callback = selector;\n            selector = null;\n        }\n\n        var parts = namespaceRE.exec(eventName);\n        eventName = parts[1] || null;\n        var namespace = parts[2] || null;\n\n        if (!eventName) return;\n\n        var handler = callback;\n        var originalCallback = callback;\n        if (selector){\n            // Event delegation handler to match a selector for child element events.\n            handler = function(event){\n                for (var el = event.target; el && el !== parentElement; el = el.parentElement){\n                    if (matchesSelector.call(el, selector)){\n                        // jQuery does not include the second argument, but we have included it\n                        // for simplicity because 'this' will likely be bound to the view inside\n                        // the callback, and as noted above, we cannot override 'currentTarget'.\n                        var result = originalCallback.call(el, event, el);\n                        if (result === false){\n                            event.stopPropagation();\n                            event.preventDefault();\n                        }\n                        return result;\n                    }\n                }\n            };\n        } else {\n            // Standard event handler bound directly to the element.\n            handler = function(event){\n                var result = originalCallback.call(parentElement, event, parentElement);\n                if (result === false){\n                    event.stopPropagation();\n                    event.preventDefault();\n                }\n                return result;\n            };\n        }\n\n        parentElement.addEventListener(eventName, handler, false);\n\n        // Save event handler metadata so that the handler can be unbound later.\n        handlersFor(parentElement).push({\n            eventName: eventName,\n            callback: callback,\n            handler: handler,\n            namespace: namespace,\n            selector: selector\n        });\n    }\n\n    /**\n     * Remove an event handler from an element.\n     *\n     * @param {Element} parentElement The element to unbind event handlers from.\n     * @param {string} eventName (Optional) The event to unbind, e.g. 'click'.\n     * @param {string} selector (Optional) The selector to unbind.\n     * @param {function(Event, Element)} callback (Optional) The function to unbind.\n     */\n    function off(parentElement, eventName, selector, callback){\n        if (typeof selector === 'function'){\n            callback = selector;\n            selector = null;\n        }\n\n        var parts = namespaceRE.exec(eventName || '');\n        eventName = parts[1];\n        var namespace = parts[2];\n        var handlers = handlersFor(parentElement) || [];\n\n        if (!eventName && !namespace && !selector && !callback){\n            // Fastpath to remove all handlers.\n            handlers.forEach(function(item){\n                parentElement.removeEventListener(item.eventName, item.handler, false);\n            });\n            clearHandlers(parentElement);\n        } else {\n            var matchedHandlers = handlers.filter(function(item){\n                return ((!namespace || item.namespace === namespace) &&\n                    (!eventName || item.eventName === eventName) &&\n                    (!callback || item.callback === callback) &&\n                    (!selector || item.selector === selector));\n            });\n\n            matchedHandlers.forEach(function(item){\n                parentElement.removeEventListener(item.eventName, item.handler, false);\n\n                handlers.splice(handlers.indexOf(item), 1);\n            });\n\n            if (handlers.length === 0) clearHandlers(parentElement);\n        }\n    }\n\n    /**\n     * Construct a new jQuery-style element representation.\n     *\n     * @param {string|Element|Window} element There are several different possible values for this\n     *      argument:\n     *      - {string} A snippet of HTML, if it starts with a '<', or a selector to find.\n     *      - {Element} An existing element to wrap.\n     *      - {Window} The window object to wrap.\n     * @param {Element} context The context to search within, if a selector was given.\n     *      Defaults to document.\n     */\n    function $(element, context){\n        context = context || document;\n\n        // Call as a constructor if it was used as a function.\n        if (!(this instanceof $)) return new $(element, context);\n\n        if (!element){\n            this.length = 0;\n        } else if (typeof element === 'string'){\n            if (/^\\s*</.test(element)){\n                // Parse arbitrary HTML into an element.\n                var div = document.createElement('div');\n                div.innerHTML = element;\n                this[0] = div.firstChild;\n                div.removeChild(div.firstChild);\n                this.length = 1;\n            } else {\n                this[0] = context.querySelector(element);\n                this.length = 1;\n            }\n        } else {\n            // This handles both the 'Element' and 'Window' case, as both support\n            // event binding via 'addEventListener'.\n            this[0] = element;\n            this.length = 1;\n        }\n    }\n\n    $.prototype = {\n        /**\n         * The following methods are used by Backbone, but only in code-paths for IE 6/7 support.\n         * Since none of this will work for old IE anyway, they are not implemented, and\n         * instead left for documentation purposes.\n         *\n         * Used in Backbone.History.prototype.start.\n         */\n        hide: null,\n        appendTo: null,\n\n        /**\n         * Find is not supported to encourage the use of querySelector(All) as an alternative.\n         *\n         * e.g.\n         * Instead of 'this.$(sel)', use 'this.el.querySelectorAll(sel)'.\n         *\n         * Used in Backbone.View.prototype.$, but not actually called internally.\n         */\n        find: null,\n\n        /**\n         * Add attributes to the element.\n         *\n         * Used in Backbone.View.prototype.make.\n         *\n         * @param {Object} attributes A set of attributes to apply to the element.\n         *\n         * @return {$} This instance.\n         */\n        attr: function(attrs){\n            Object.keys(attrs).forEach(function(attr){\n                switch (attr){\n                    case 'html':\n                        this[0].innerHTML = attrs[attr];\n                        break;\n                    case 'text':\n                        this[0].textContent = attrs[attr];\n                        break;\n                    case 'class':\n                        this[0].className = attrs[attr];\n                        break;\n                    default:\n                        this[0].setAttribute(attr, attrs[attr]);\n                        break;\n                }\n            }, this);\n            return this;\n        },\n\n        /**\n         * Set the HTML content of the element. Backbone does not use the no-argument version\n         * to read innerHTML, so that has not been implemented.\n         *\n         * Used in Backbone.View.prototype.make.\n         *\n         * @param {string} html The HTML to set as the element content.\n         *\n         * @return {$} This instance.\n         */\n        html: function(html){\n            this[0].innerHTML = html;\n            return this;\n        },\n\n        /**\n         * Remove an element from the DOM and remove all event handlers bound to it and\n         * its child elements.\n         *\n         * Used in Backbone.View.prototype.remove.\n         *\n         * @return {$} This instance.\n         */\n        remove: function(){\n            var el = this[0];\n            if (el.parentElement) el.parentElement.removeChild(el);\n\n            // Unbind all event handlers on the element and children.\n            (function removeChildEvents(element){\n                off(element);\n\n                for (var i = 0, len = element.childNodes.length; i < len; i++){\n                    if (element.childNodes[i].nodeType !== Node.TEXT_NODE){\n                        removeChildEvents(element.childNodes[i]);\n                    }\n                }\n            })(el);\n\n            return this;\n        },\n\n        /**\n         * Bind an event handler to this element.\n         *\n         * @param {string} eventName The event to bind, e.g. 'click'.\n         * @param {string} selector (Optional) The selector to match when an event propagates up.\n         * @param {function(Event, Element)} callback The function to call when the event is fired.\n         */\n        on: function(eventName, selector, callback){\n            on(this[0], eventName, selector, callback);\n            return this;\n        },\n\n        /**\n         * Unbind an event handler to this element.\n         *\n         * @param {string} eventName (Optional) The event to unbind, e.g. 'click'.\n         * @param {string} selector (Optional) The selector to unbind.\n         * @param {function(Event, Element)} callback (Optional) The function to unbind.\n         */\n        off: function(eventName, selector, callback){\n            off(this[0], eventName, selector, callback);\n            return this;\n        },\n\n        // Backbone v0.9.2 support.\n        bind: function(eventName, callback){\n            return this.on(eventName, callback);\n        },\n        unbind: function(eventName, callback){\n            return this.off(eventName, callback);\n        },\n        delegate: function(selector, eventName, callback){\n            return this.on(eventName, selector, callback);\n        },\n        undelegate: function(selector, eventName, callback){\n            return this.off(eventName, selector, callback);\n        }\n    };\n\n    /**\n     * Send an AJAX request.\n     *\n     * @param {Object} options The options to use for the connection:\n     *      - {string} url The URL to connect to.\n     *      - {string} type The type of request, e.g. 'GET', or 'POST'.\n     *      - {string} dataType The type of data expected, 'json'.\n     *      - {string} contentType The content-type of the data.\n     *      - {string|object} data The content to send.\n     *      - {function(XMLHttpRequest)} beforeSend A callback to call before sending.\n     *      - {boolean} processData True if 'data' should be converted\n     *          to a query string from an object.\n     *      - {function({string|object}, {string}, {XMLHttpRequest})} success The success callback.\n     *      - {function({XMLHttpRequest})} error The error callback.\n     */\n    $.ajax = function(options){\n        options = options || {};\n        var type = options.type || 'GET';\n        var url = options.url;\n        var processData = options.processData === undefined ? true : !!options.processData;\n\n        // Process the data for sending.\n        var data = options.data;\n        if (processData && typeof data === 'object'){\n            var params = Object.keys(data).map(function(prop){\n                return encodeURIComponent(prop) + '=' + encodeURIComponent(data[prop]);\n            });\n            data = params.join('&');\n        }\n\n        // Data for GET and HEAD goes in the URL.\n        if (data && (type === 'GET' || type === 'HEAD')){\n            url += (url.indexOf('?') === -1 ? '?' : '&') + data;\n            data = undefined;\n        }\n\n        var xhr = new XMLHttpRequest();\n        xhr.open(type, url, true);\n\n        if (options.contentType) xhr.setRequestHeader('Content-Type', options.contentType);\n        if (options.beforeSend) options.beforeSend(xhr);\n\n        xhr.onload = function(){\n            var error = false;\n            var content = xhr.responseText;\n\n            // Parse the JSON before calling success.\n            if (options.dataType === 'json'){\n                try {\n                    content = JSON.parse(content);\n                } catch (e){\n                    error = true\n                }\n            }\n\n            if (!error && (xhr.status >= 200 && xhr.status < 300)){\n                // The last two arguments only apply to v0.9.2.\n                if (options.success) options.success(content, xhr.statusText, xhr);\n            } else {\n                // This signature is inconsistent with v0.9.2, but is correct for 1.0.0.\n                if (options.error) options.error(xhr);\n            }\n        }.bind(this);\n\n        xhr.onerror = xhr.onabort = function(){\n            if (options.error) options.error(xhr);\n        };\n\n        xhr.send(data);\n\n        return xhr;\n    };\n\n    // Expose on/off for external use with having to instantiate a wrapper.\n    $.on = on;\n    $.off = off;\n\n    if(typeof exports !== 'undefined') {\n      return module.exports = $;\n    }\n\n    var root = this;\n    var originalBackboneNative = root.Backbone ? root.Backbone.Native : null;\n    var original$ = root.$;\n    if (root.Backbone) root.Backbone.Native = $;\n    root.$ = $;\n\n    $.noConflict = function(deep){\n        root.$ = original$;\n        if (deep) root.Backbone.Native = originalBackboneNative;\n        return $;\n    };\n\n    if (root.Backbone){\n        if (root.Backbone.setDomLibrary){ // v0.9.2\n            root.Backbone.setDomLibrary($);\n        } else { // v1.0.0\n            root.Backbone.$ = $;\n        }\n    }\n}).call(this);\n",
    "//     Backbone.js 1.1.2\n\n//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(root, factory) {\n\n  // Set up Backbone appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backbone.\n      root.Backbone = factory(root, exports, _, $);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('underscore');\n    factory(root, exports, _);\n\n  // Finally, as a browser global.\n  } else {\n    root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));\n  }\n\n}(this, function(root, Backbone, _, $) {\n\n  // Initial Setup\n  // -------------\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create local references to array methods we'll want to use later.\n  var array = [];\n  var push = array.push;\n  var slice = array.slice;\n  var splice = array.splice;\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '1.1.2';\n\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\n  // the `$` variable.\n  Backbone.$ = $;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Backbone.Events\n  // ---------------\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // custom events. You may bind with `on` or remove with `off` callback\n  // functions to an event; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {\n\n    // Bind an event to a `callback` function. Passing `\"all\"` will bind\n    // the callback to all events fired.\n    on: function(name, callback, context) {\n      if (!eventsApi(this, 'on', name, [callback, context]) || !callback) return this;\n      this._events || (this._events = {});\n      var events = this._events[name] || (this._events[name] = []);\n      events.push({callback: callback, context: context, ctx: context || this});\n      return this;\n    },\n\n    // Bind an event to only be triggered a single time. After the first time\n    // the callback is invoked, it will be removed.\n    once: function(name, callback, context) {\n      if (!eventsApi(this, 'once', name, [callback, context]) || !callback) return this;\n      var self = this;\n      var once = _.once(function() {\n        self.off(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n      return this.on(name, once, context);\n    },\n\n    // Remove one or many callbacks. If `context` is null, removes all\n    // callbacks with that function. If `callback` is null, removes all\n    // callbacks for the event. If `name` is null, removes all bound\n    // callbacks for all events.\n    off: function(name, callback, context) {\n      var retain, ev, events, names, i, l, j, k;\n      if (!this._events || !eventsApi(this, 'off', name, [callback, context])) return this;\n      if (!name && !callback && !context) {\n        this._events = void 0;\n        return this;\n      }\n      names = name ? [name] : _.keys(this._events);\n      for (i = 0, l = names.length; i < l; i++) {\n        name = names[i];\n        if (events = this._events[name]) {\n          this._events[name] = retain = [];\n          if (callback || context) {\n            for (j = 0, k = events.length; j < k; j++) {\n              ev = events[j];\n              if ((callback && callback !== ev.callback && callback !== ev.callback._callback) ||\n                  (context && context !== ev.context)) {\n                retain.push(ev);\n              }\n            }\n          }\n          if (!retain.length) delete this._events[name];\n        }\n      }\n\n      return this;\n    },\n\n    // Trigger one or many events, firing all bound callbacks. Callbacks are\n    // passed the same arguments as `trigger` is, apart from the event name\n    // (unless you're listening on `\"all\"`, which will cause your callback to\n    // receive the true name of the event as the first argument).\n    trigger: function(name) {\n      if (!this._events) return this;\n      var args = slice.call(arguments, 1);\n      if (!eventsApi(this, 'trigger', name, args)) return this;\n      var events = this._events[name];\n      var allEvents = this._events.all;\n      if (events) triggerEvents(events, args);\n      if (allEvents) triggerEvents(allEvents, arguments);\n      return this;\n    },\n\n    // Tell this object to stop listening to either specific events ... or\n    // to every object it's currently listening to.\n    stopListening: function(obj, name, callback) {\n      var listeningTo = this._listeningTo;\n      if (!listeningTo) return this;\n      var remove = !name && !callback;\n      if (!callback && typeof name === 'object') callback = this;\n      if (obj) (listeningTo = {})[obj._listenId] = obj;\n      for (var id in listeningTo) {\n        obj = listeningTo[id];\n        obj.off(name, callback, this);\n        if (remove || _.isEmpty(obj._events)) delete this._listeningTo[id];\n      }\n      return this;\n    }\n\n  };\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // Implement fancy features of the Events API such as multiple event\n  // names `\"change blur\"` and jQuery-style event maps `{change: action}`\n  // in terms of the existing API.\n  var eventsApi = function(obj, action, name, rest) {\n    if (!name) return true;\n\n    // Handle event maps.\n    if (typeof name === 'object') {\n      for (var key in name) {\n        obj[action].apply(obj, [key, name[key]].concat(rest));\n      }\n      return false;\n    }\n\n    // Handle space separated event names.\n    if (eventSplitter.test(name)) {\n      var names = name.split(eventSplitter);\n      for (var i = 0, l = names.length; i < l; i++) {\n        obj[action].apply(obj, [names[i]].concat(rest));\n      }\n      return false;\n    }\n\n    return true;\n  };\n\n  // A difficult-to-believe, but optimized internal dispatch function for\n  // triggering events. Tries to keep the usual cases speedy (most internal\n  // Backbone events have 3 arguments).\n  var triggerEvents = function(events, args) {\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n    switch (args.length) {\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\n    }\n  };\n\n  var listenMethods = {listenTo: 'on', listenToOnce: 'once'};\n\n  // Inversion-of-control versions of `on` and `once`. Tell *this* object to\n  // listen to an event in another object ... keeping track of what it's\n  // listening to.\n  _.each(listenMethods, function(implementation, method) {\n    Events[method] = function(obj, name, callback) {\n      var listeningTo = this._listeningTo || (this._listeningTo = {});\n      var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n      listeningTo[id] = obj;\n      if (!callback && typeof name === 'object') callback = this;\n      obj[implementation](name, callback, this);\n      return this;\n    };\n  });\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Backbone **Models** are the basic data object in the framework --\n  // frequently representing a row in a table in a database on your server.\n  // A discrete chunk of data and a bunch of useful, related methods for\n  // performing computations and transformations on that data.\n\n  // Create a new model with the specified attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var attrs = attributes || {};\n    options || (options = {});\n    this.cid = _.uniqueId('c');\n    this.attributes = {};\n    if (options.collection) this.collection = options.collection;\n    if (options.parse) attrs = this.parse(attrs, options) || {};\n    attrs = _.defaults({}, attrs, _.result(this, 'defaults'));\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  };\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The value returned during the last failed validation.\n    validationError: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default -- but override this if you need\n    // custom syncing semantics for *this* particular model.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"`. This is\n    // the core primitive operation of a model, updating the data and notifying\n    // anyone who needs to know about the change in state. The heart of the beast.\n    set: function(key, val, options) {\n      var attr, attrs, unset, changes, silent, changing, prev, current;\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options || (options = {});\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Extract attributes and options.\n      unset           = options.unset;\n      silent          = options.silent;\n      changes         = [];\n      changing        = this._changing;\n      this._changing  = true;\n\n      if (!changing) {\n        this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n      }\n      current = this.attributes, prev = this._previousAttributes;\n\n      // Check for changes of `id`.\n      if (this.idAttribute in attrs) this.id = attrs[this.idAttribute];\n\n      // For each `set` attribute, update or delete the current value.\n      for (attr in attrs) {\n        val = attrs[attr];\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\n        if (!_.isEqual(prev[attr], val)) {\n          this.changed[attr] = val;\n        } else {\n          delete this.changed[attr];\n        }\n        unset ? delete current[attr] : current[attr] = val;\n      }\n\n      // Trigger all relevant attribute changes.\n      if (!silent) {\n        if (changes.length) this._pending = options;\n        for (var i = 0, l = changes.length; i < l; i++) {\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\n        }\n      }\n\n      // You might be wondering why there's a `while` loop here. Changes can\n      // be recursively nested within `\"change\"` events.\n      if (changing) return this;\n      if (!silent) {\n        while (this._pending) {\n          options = this._pending;\n          this._pending = false;\n          this.trigger('change', this, options);\n        }\n      }\n      this._pending = false;\n      this._changing = false;\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n    // if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"`.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var val, changed = false;\n      var old = this._changing ? this._previousAttributes : this.attributes;\n      for (var attr in diff) {\n        if (_.isEqual(old[attr], (val = diff[attr]))) continue;\n        (changed || (changed = {}))[attr] = val;\n      }\n      return changed;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Fetch the model from the server. If the server's representation of the\n    // model differs from its current attributes, they will be overridden,\n    // triggering a `\"change\"` event.\n    fetch: function(options) {\n      options = options ? _.clone(options) : {};\n      if (options.parse === void 0) options.parse = true;\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        if (!model.set(model.parse(resp, options), options)) return false;\n        if (success) success(model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      var attrs, method, xhr, attributes = this.attributes;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      if (key == null || typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options = _.extend({validate: true}, options);\n\n      // If we're not waiting and attributes exist, save acts as\n      // `set(attr).save(null, opts)` with validation. Otherwise, check if\n      // the model will be valid when the attributes, if any, are set.\n      if (attrs && !options.wait) {\n        if (!this.set(attrs, options)) return false;\n      } else {\n        if (!this._validate(attrs, options)) return false;\n      }\n\n      // Set temporary attributes if `{wait: true}`.\n      if (attrs && options.wait) {\n        this.attributes = _.extend({}, attributes, attrs);\n      }\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      if (options.parse === void 0) options.parse = true;\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        // Ensure attributes are restored during synchronous saves.\n        model.attributes = attributes;\n        var serverAttrs = model.parse(resp, options);\n        if (options.wait) serverAttrs = _.extend(attrs || {}, serverAttrs);\n        if (_.isObject(serverAttrs) && !model.set(serverAttrs, options)) {\n          return false;\n        }\n        if (success) success(model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n\n      method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');\n      if (method === 'patch') options.attrs = attrs;\n      xhr = this.sync(method, this, options);\n\n      // Restore attributes.\n      if (attrs && options.wait) this.attributes = attributes;\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n\n      var destroy = function() {\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (options.wait || model.isNew()) destroy();\n        if (success) success(model, resp, options);\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\n      };\n\n      if (this.isNew()) {\n        options.success();\n        return false;\n      }\n      wrapError(this, options);\n\n      var xhr = this.sync('delete', this, options);\n      if (!options.wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base =\n        _.result(this, 'urlRoot') ||\n        _.result(this.collection, 'url') ||\n        urlError();\n      if (this.isNew()) return base;\n      return base.replace(/([^\\/])$/, '$1/') + encodeURIComponent(this.id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return !this.has(this.idAttribute);\n    },\n\n    // Check if the model is currently in a valid state.\n    isValid: function(options) {\n      return this._validate({}, _.extend(options || {}, { validate: true }));\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n    _validate: function(attrs, options) {\n      if (!options.validate || !this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validationError = this.validate(attrs, options) || null;\n      if (!error) return true;\n      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\n      return false;\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Model.\n  var modelMethods = ['keys', 'values', 'pairs', 'invert', 'pick', 'omit'];\n\n  // Mix in each Underscore method as a proxy to `Model#attributes`.\n  _.each(modelMethods, function(method) {\n    Model.prototype[method] = function() {\n      var args = slice.call(arguments);\n      args.unshift(this.attributes);\n      return _[method].apply(_, args);\n    };\n  });\n\n  // Backbone.Collection\n  // -------------------\n\n  // If models tend to represent a single row of data, a Backbone Collection is\n  // more analagous to a table full of data ... or a small slice or page of that\n  // table, or a collection of rows that belong together for a particular reason\n  // -- all of the messages in this particular folder, all of the documents\n  // belonging to this particular author, and so on. Collections maintain\n  // indexes of their models, both in order, and for lookup by `id`.\n\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\n  // If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Default options for `Collection#set`.\n  var setOptions = {add: true, remove: true, merge: true};\n  var addOptions = {add: true, remove: false};\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model){ return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set.\n    add: function(models, options) {\n      return this.set(models, _.extend({merge: false}, options, addOptions));\n    },\n\n    // Remove a model, or a list of models from the set.\n    remove: function(models, options) {\n      var singular = !_.isArray(models);\n      models = singular ? [models] : _.clone(models);\n      options || (options = {});\n      var i, l, index, model;\n      for (i = 0, l = models.length; i < l; i++) {\n        model = models[i] = this.get(models[i]);\n        if (!model) continue;\n        delete this._byId[model.id];\n        delete this._byId[model.cid];\n        index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n        this._removeReference(model, options);\n      }\n      return singular ? models[0] : models;\n    },\n\n    // Update a collection by `set`-ing a new list of models, adding new ones,\n    // removing models that are no longer present, and merging models that\n    // already exist in the collection, as necessary. Similar to **Model#set**,\n    // the core operation for updating the data contained by the collection.\n    set: function(models, options) {\n      options = _.defaults({}, options, setOptions);\n      if (options.parse) models = this.parse(models, options);\n      var singular = !_.isArray(models);\n      models = singular ? (models ? [models] : []) : _.clone(models);\n      var i, l, id, model, attrs, existing, sort;\n      var at = options.at;\n      var targetModel = this.model;\n      var sortable = this.comparator && (at == null) && options.sort !== false;\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n      var toAdd = [], toRemove = [], modelMap = {};\n      var add = options.add, merge = options.merge, remove = options.remove;\n      var order = !sortable && add && remove ? [] : false;\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      for (i = 0, l = models.length; i < l; i++) {\n        attrs = models[i] || {};\n        if (attrs instanceof Model) {\n          id = model = attrs;\n        } else {\n          id = attrs[targetModel.prototype.idAttribute || 'id'];\n        }\n\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        if (existing = this.get(id)) {\n          if (remove) modelMap[existing.cid] = true;\n          if (merge) {\n            attrs = attrs === model ? model.attributes : attrs;\n            if (options.parse) attrs = existing.parse(attrs, options);\n            existing.set(attrs, options);\n            if (sortable && !sort && existing.hasChanged(sortAttr)) sort = true;\n          }\n          models[i] = existing;\n\n        // If this is a new, valid model, push it to the `toAdd` list.\n        } else if (add) {\n          model = models[i] = this._prepareModel(attrs, options);\n          if (!model) continue;\n          toAdd.push(model);\n          this._addReference(model, options);\n        }\n\n        // Do not add multiple models with the same `id`.\n        model = existing || model;\n        if (order && (model.isNew() || !modelMap[model.id])) order.push(model);\n        modelMap[model.id] = true;\n      }\n\n      // Remove nonexistent models if appropriate.\n      if (remove) {\n        for (i = 0, l = this.length; i < l; ++i) {\n          if (!modelMap[(model = this.models[i]).cid]) toRemove.push(model);\n        }\n        if (toRemove.length) this.remove(toRemove, options);\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      if (toAdd.length || (order && order.length)) {\n        if (sortable) sort = true;\n        this.length += toAdd.length;\n        if (at != null) {\n          for (i = 0, l = toAdd.length; i < l; i++) {\n            this.models.splice(at + i, 0, toAdd[i]);\n          }\n        } else {\n          if (order) this.models.length = 0;\n          var orderedModels = order || toAdd;\n          for (i = 0, l = orderedModels.length; i < l; i++) {\n            this.models.push(orderedModels[i]);\n          }\n        }\n      }\n\n      // Silently sort the collection if appropriate.\n      if (sort) this.sort({silent: true});\n\n      // Unless silenced, it's time to fire all appropriate add/sort events.\n      if (!options.silent) {\n        for (i = 0, l = toAdd.length; i < l; i++) {\n          (model = toAdd[i]).trigger('add', model, this, options);\n        }\n        if (sort || (order && order.length)) this.trigger('sort', this, options);\n      }\n\n      // Return the added (or merged) model (or models).\n      return singular ? models[0] : models;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any granular `add` or `remove` events. Fires `reset` when finished.\n    // Useful for bulk operations and optimizations.\n    reset: function(models, options) {\n      options || (options = {});\n      for (var i = 0, l = this.models.length; i < l; i++) {\n        this._removeReference(this.models[i], options);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      models = this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return models;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      return this.add(model, _.extend({at: this.length}, options));\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      this.remove(model, options);\n      return model;\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      return this.add(model, _.extend({at: 0}, options));\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      this.remove(model, options);\n      return model;\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function() {\n      return slice.apply(this.models, arguments);\n    },\n\n    // Get a model from the set by id.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      return this._byId[obj] || this._byId[obj.id] || this._byId[obj.cid];\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of\n    // `filter`.\n    where: function(attrs, first) {\n      if (_.isEmpty(attrs)) return first ? void 0 : [];\n      return this[first ? 'find' : 'filter'](function(model) {\n        for (var key in attrs) {\n          if (attrs[key] !== model.get(key)) return false;\n        }\n        return true;\n      });\n    },\n\n    // Return the first model with matching attributes. Useful for simple cases\n    // of `find`.\n    findWhere: function(attrs) {\n      return this.where(attrs, true);\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      if (!this.comparator) throw new Error('Cannot sort a set without a comparator');\n      options || (options = {});\n\n      // Run sort based on type of `comparator`.\n      if (_.isString(this.comparator) || this.comparator.length === 1) {\n        this.models = this.sortBy(this.comparator, this);\n      } else {\n        this.models.sort(_.bind(this.comparator, this));\n      }\n\n      if (!options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return _.invoke(this.models, 'get', attr);\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `reset: true` is passed, the response\n    // data will be passed through the `reset` method instead of `set`.\n    fetch: function(options) {\n      options = options ? _.clone(options) : {};\n      if (options.parse === void 0) options.parse = true;\n      var success = options.success;\n      var collection = this;\n      options.success = function(resp) {\n        var method = options.reset ? 'reset' : 'set';\n        collection[method](resp, options);\n        if (success) success(collection, resp, options);\n        collection.trigger('sync', collection, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      options = options ? _.clone(options) : {};\n      if (!(model = this._prepareModel(model, options))) return false;\n      if (!options.wait) this.add(model, options);\n      var collection = this;\n      var success = options.success;\n      options.success = function(model, resp) {\n        if (options.wait) collection.add(model, options);\n        if (success) success(model, resp, options);\n      };\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models);\n    },\n\n    // Private method to reset all internal state. Called when the collection\n    // is first initialized or reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n    },\n\n    // Prepare a hash of attributes (or other model) to be added to this\n    // collection.\n    _prepareModel: function(attrs, options) {\n      if (attrs instanceof Model) return attrs;\n      options = options ? _.clone(options) : {};\n      options.collection = this;\n      var model = new this.model(attrs, options);\n      if (!model.validationError) return model;\n      this.trigger('invalid', this, model.validationError, options);\n      return false;\n    },\n\n    // Internal method to create a model's ties to a collection.\n    _addReference: function(model, options) {\n      this._byId[model.cid] = model;\n      if (model.id != null) this._byId[model.id] = model;\n      if (!model.collection) model.collection = this;\n      model.on('all', this._onModelEvent, this);\n    },\n\n    // Internal method to sever a model's ties to a collection.\n    _removeReference: function(model, options) {\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if ((event === 'add' || event === 'remove') && collection !== this) return;\n      if (event === 'destroy') this.remove(model, options);\n      if (model && event === 'change:' + model.idAttribute) {\n        delete this._byId[model.previous(model.idAttribute)];\n        if (model.id != null) this._byId[model.id] = model;\n      }\n      this.trigger.apply(this, arguments);\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  var methods = ['forEach', 'each', 'map', 'collect', 'reduce', 'foldl',\n    'inject', 'reduceRight', 'foldr', 'find', 'detect', 'filter', 'select',\n    'reject', 'every', 'all', 'some', 'any', 'include', 'contains', 'invoke',\n    'max', 'min', 'toArray', 'size', 'first', 'head', 'take', 'initial', 'rest',\n    'tail', 'drop', 'last', 'without', 'difference', 'indexOf', 'shuffle',\n    'lastIndexOf', 'isEmpty', 'chain', 'sample'];\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  _.each(methods, function(method) {\n    Collection.prototype[method] = function() {\n      var args = slice.call(arguments);\n      args.unshift(this.models);\n      return _[method].apply(_, args);\n    };\n  });\n\n  // Underscore methods that take a property name as an argument.\n  var attributeMethods = ['groupBy', 'countBy', 'sortBy', 'indexBy'];\n\n  // Use attributes instead of properties.\n  _.each(attributeMethods, function(method) {\n    Collection.prototype[method] = function(value, context) {\n      var iterator = _.isFunction(value) ? value : function(model) {\n        return model.get(value);\n      };\n      return _[method](this.models, iterator, context);\n    };\n  });\n\n  // Backbone.View\n  // -------------\n\n  // Backbone Views are almost more convention than they are actual code. A View\n  // is simply a JavaScript object that represents a logical chunk of UI in the\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\n  // UI as a **View** allows you to define your DOM events declaratively, without\n  // having to worry about render order ... and makes it easy for the view to\n  // react to specific changes in the state of your models.\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    options || (options = {});\n    _.extend(this, _.pick(options, viewOptions));\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n    this.delegateEvents();\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be merged as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be preferred to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this.$el.remove();\n      this.stopListening();\n      return this;\n    },\n\n    // Change the view's element (`this.el` property), including event\n    // re-delegation.\n    setElement: function(element, delegate) {\n      if (this.$el) this.undelegateEvents();\n      this.$el = element instanceof Backbone.$ ? element : Backbone.$(element);\n      this.el = this.$el[0];\n      if (delegate !== false) this.delegateEvents();\n      return this;\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save',\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    // This only works for delegate-able events: not `focus`, `blur`, and\n    // not `change`, `submit`, and `reset` in Internet Explorer.\n    delegateEvents: function(events) {\n      if (!(events || (events = _.result(this, 'events')))) return this;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[events[key]];\n        if (!method) continue;\n\n        var match = key.match(delegateEventSplitter);\n        var eventName = match[1], selector = match[2];\n        method = _.bind(method, this);\n        eventName += '.delegateEvents' + this.cid;\n        if (selector === '') {\n          this.$el.on(eventName, method);\n        } else {\n          this.$el.on(eventName, selector, method);\n        }\n      }\n      return this;\n    },\n\n    // Clears all callbacks previously bound to the view with `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      this.$el.off('.delegateEvents' + this.cid);\n      return this;\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        var $el = Backbone.$('<' + _.result(this, 'tagName') + '>').attr(attrs);\n        this.setElement($el, false);\n      } else {\n        this.setElement(_.result(this, 'el'), false);\n      }\n    }\n\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    // If we're sending a `PATCH` request, and we're in an old Internet Explorer\n    // that still has ActiveX enabled by default, override jQuery to use that\n    // for XHR instead. Remove this line when jQuery supports `PATCH` on IE8.\n    if (params.type === 'PATCH' && noXhrPatch) {\n      params.xhr = function() {\n        return new ActiveXObject(\"Microsoft.XMLHTTP\");\n      };\n    }\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  var noXhrPatch =\n    typeof window !== 'undefined' && !!window.ActiveXObject &&\n      !(window.XMLHttpRequest && (new XMLHttpRequest).dispatchEvent);\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    'create': 'POST',\n    'update': 'PUT',\n    'patch':  'PATCH',\n    'delete': 'DELETE',\n    'read':   'GET'\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  // Override this if you'd like to use a different library.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /(\\(\\?)?:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n      if (!callback) callback = this[name];\n      var router = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = router._extractParameters(route, fragment);\n        router.execute(callback, args);\n        router.trigger.apply(router, ['route:' + name].concat(args));\n        router.trigger('route', name, args);\n        Backbone.history.trigger('route', router, name, args);\n      });\n      return this;\n    },\n\n    // Execute a route handler with the provided parameters.  This is an\n    // excellent place to do pre-route setup or post-route cleanup.\n    execute: function(callback, args) {\n      if (callback) callback.apply(this, args);\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      this.routes = _.result(this, 'routes');\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n                   .replace(optionalParam, '(?:$1)?')\n                   .replace(namedParam, function(match, optional) {\n                     return optional ? match : '([^/?]+)';\n                   })\n                   .replace(splatParam, '([^?]*?)');\n      return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted decoded parameters. Empty or unmatched parameters will be\n    // treated as `null` to normalize cross-browser behavior.\n    _extractParameters: function(route, fragment) {\n      var params = route.exec(fragment).slice(1);\n      return _.map(params, function(param, i) {\n        // Don't decode the search params.\n        if (i === params.length - 1) return param || null;\n        return param ? decodeURIComponent(param) : null;\n      });\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on either\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n  // and URL fragments. If the browser supports neither (old IE, natch),\n  // falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    _.bindAll(this, 'checkUrl');\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for detecting MSIE.\n  var isExplorer = /msie [\\w.]+/;\n\n  // Cached regex for removing a trailing slash.\n  var trailingSlash = /\\/$/;\n\n  // Cached regex for stripping urls of hash.\n  var pathStripper = /#.*$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Are we at the app root?\n    atRoot: function() {\n      return this.location.pathname.replace(/[^\\/]$/, '$&/') === this.root;\n    },\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the cross-browser normalized URL fragment, either from the URL,\n    // the hash, or the override.\n    getFragment: function(fragment, forcePushState) {\n      if (fragment == null) {\n        if (this._hasPushState || !this._wantsHashChange || forcePushState) {\n          fragment = decodeURI(this.location.pathname + this.location.search);\n          var root = this.root.replace(trailingSlash, '');\n          if (!fragment.indexOf(root)) fragment = fragment.slice(root.length);\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error(\"Backbone.history has already been started\");\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.options.pushState && this.history && this.history.pushState);\n      var fragment          = this.getFragment();\n      var docMode           = document.documentMode;\n      var oldIE             = (isExplorer.exec(navigator.userAgent.toLowerCase()) && (!docMode || docMode <= 7));\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      if (oldIE && this._wantsHashChange) {\n        var frame = Backbone.$('<iframe src=\"javascript:0\" tabindex=\"-1\">');\n        this.iframe = frame.hide().appendTo('body')[0].contentWindow;\n        this.navigate(fragment);\n      }\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._hasPushState) {\n        Backbone.$(window).on('popstate', this.checkUrl);\n      } else if (this._wantsHashChange && ('onhashchange' in window) && !oldIE) {\n        Backbone.$(window).on('hashchange', this.checkUrl);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      // Determine if we need to change the base url, for a pushState link\n      // opened by a non-pushState browser.\n      this.fragment = fragment;\n      var loc = this.location;\n\n      // Transition from hashChange to pushState or vice versa if both are\n      // requested.\n      if (this._wantsHashChange && this._wantsPushState) {\n\n        // If we've started off with a route from a `pushState`-enabled\n        // browser, but we're currently in a browser that doesn't support it...\n        if (!this._hasPushState && !this.atRoot()) {\n          this.fragment = this.getFragment(null, true);\n          this.location.replace(this.root + '#' + this.fragment);\n          // Return immediately as browser will do redirect to new url\n          return true;\n\n        // Or if we've started out with a hash-based route, but we're currently\n        // in a browser where it could be `pushState`-based instead...\n        } else if (this._hasPushState && this.atRoot() && loc.hash) {\n          this.fragment = this.getHash().replace(routeStripper, '');\n          this.history.replaceState({}, document.title, this.root + this.fragment);\n        }\n\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      Backbone.$(window).off('popstate', this.checkUrl).off('hashchange', this.checkUrl);\n      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n      if (current === this.fragment && this.iframe) {\n        current = this.getFragment(this.getHash(this.iframe));\n      }\n      if (current === this.fragment) return false;\n      if (this.iframe) this.navigate(current);\n      this.loadUrl();\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragment) {\n      fragment = this.fragment = this.getFragment(fragment);\n      return _.any(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      });\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: !!options};\n\n      var url = this.root + (fragment = this.getFragment(fragment || ''));\n\n      // Strip the hash for matching.\n      fragment = fragment.replace(pathStripper, '');\n\n      if (this.fragment === fragment) return;\n      this.fragment = fragment;\n\n      // Don't include a trailing slash on the root.\n      if (fragment === '' && url !== '/') url = url.slice(0, -1);\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._hasPushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && (fragment !== this.getFragment(this.getHash(this.iframe)))) {\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if(!options.replace) this.iframe.document.open().close();\n          this._updateHash(this.iframe.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) return this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain, for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent's constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ return parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function.\n    var Surrogate = function(){ this.constructor = child; };\n    Surrogate.prototype = parent.prototype;\n    child.prototype = new Surrogate;\n\n    // Add prototype properties (instance properties) to the subclass,\n    // if supplied.\n    if (protoProps) _.extend(child.prototype, protoProps);\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // Wrap an optional error callback with a fallback error event.\n  var wrapError = function(model, options) {\n    var error = options.error;\n    options.error = function(resp) {\n      if (error) error(model, resp, options);\n      model.trigger('error', model, resp, options);\n    };\n  };\n\n  return Backbone;\n\n}));\n",
    "'use strict';\n\nvar colorString = require('color-string');\nvar convert = require('color-convert');\n\nvar _slice = [].slice;\n\nvar skippedModels = [\n\t// to be honest, I don't really feel like keyword belongs in color convert, but eh.\n\t'keyword',\n\n\t// gray conflicts with some method names, and has its own method defined.\n\t'gray',\n\n\t// shouldn't really be in color-convert either...\n\t'hex'\n];\n\nvar hashedModelKeys = {};\nObject.keys(convert).forEach(function (model) {\n\thashedModelKeys[_slice.call(convert[model].labels).sort().join('')] = model;\n});\n\nvar limiters = {};\n\nfunction Color(obj, model) {\n\tif (!(this instanceof Color)) {\n\t\treturn new Color(obj, model);\n\t}\n\n\tif (model && model in skippedModels) {\n\t\tmodel = null;\n\t}\n\n\tif (model && !(model in convert)) {\n\t\tthrow new Error('Unknown model: ' + model);\n\t}\n\n\tvar i;\n\tvar channels;\n\n\tif (!obj) {\n\t\tthis.model = 'rgb';\n\t\tthis.color = [0, 0, 0];\n\t\tthis.valpha = 1;\n\t} else if (obj instanceof Color) {\n\t\tthis.model = obj.model;\n\t\tthis.color = obj.color.slice();\n\t\tthis.valpha = obj.valpha;\n\t} else if (typeof obj === 'string') {\n\t\tvar result = colorString.get(obj);\n\t\tif (result === null) {\n\t\t\tthrow new Error('Unable to parse color from string: ' + obj);\n\t\t}\n\n\t\tthis.model = result.model;\n\t\tchannels = convert[this.model].channels;\n\t\tthis.color = result.value.slice(0, channels);\n\t\tthis.valpha = typeof result.value[channels] === 'number' ? result.value[channels] : 1;\n\t} else if (obj.length) {\n\t\tthis.model = model || 'rgb';\n\t\tchannels = convert[this.model].channels;\n\t\tvar newArr = _slice.call(obj, 0, channels);\n\t\tthis.color = zeroArray(newArr, channels);\n\t\tthis.valpha = typeof obj[channels] === 'number' ? obj[channels] : 1;\n\t} else if (typeof obj === 'number') {\n\t\t// this is always RGB - can be converted later on.\n\t\tobj &= 0xFFFFFF;\n\t\tthis.model = 'rgb';\n\t\tthis.color = [\n\t\t\t(obj >> 16) & 0xFF,\n\t\t\t(obj >> 8) & 0xFF,\n\t\t\tobj & 0xFF\n\t\t];\n\t\tthis.valpha = 1;\n\t} else {\n\t\tthis.valpha = 1;\n\n\t\tvar keys = Object.keys(obj);\n\t\tif ('alpha' in obj) {\n\t\t\tkeys.splice(keys.indexOf('alpha'), 1);\n\t\t\tthis.valpha = typeof obj.alpha === 'number' ? obj.alpha : 0;\n\t\t}\n\n\t\tvar hashedKeys = keys.sort().join('');\n\t\tif (!(hashedKeys in hashedModelKeys)) {\n\t\t\tthrow new Error('Unable to parse color from object: ' + JSON.stringify(obj));\n\t\t}\n\n\t\tthis.model = hashedModelKeys[hashedKeys];\n\n\t\tvar labels = convert[this.model].labels;\n\t\tvar color = [];\n\t\tfor (i = 0; i < labels.length; i++) {\n\t\t\tcolor.push(obj[labels[i]]);\n\t\t}\n\n\t\tthis.color = zeroArray(color);\n\t}\n\n\t// perform limitations (clamping, etc.)\n\tif (limiters[this.model]) {\n\t\tchannels = convert[this.model].channels;\n\t\tfor (i = 0; i < channels; i++) {\n\t\t\tvar limit = limiters[this.model][i];\n\t\t\tif (limit) {\n\t\t\t\tthis.color[i] = limit(this.color[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.valpha = Math.max(0, Math.min(1, this.valpha));\n\n\tif (Object.freeze) {\n\t\tObject.freeze(this);\n\t}\n}\n\nColor.prototype = {\n\ttoString: function () {\n\t\treturn this.string();\n\t},\n\n\ttoJSON: function () {\n\t\treturn this[this.model]();\n\t},\n\n\tstring: function (places) {\n\t\tvar self = this.model in colorString.to ? this : this.rgb();\n\t\tself = self.round(typeof places === 'number' ? places : 1);\n\t\tvar args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);\n\t\treturn colorString.to[self.model](args);\n\t},\n\n\tpercentString: function (places) {\n\t\tvar self = this.rgb().round(typeof places === 'number' ? places : 1);\n\t\tvar args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);\n\t\treturn colorString.to.rgb.percent(args);\n\t},\n\n\tarray: function () {\n\t\treturn this.valpha === 1 ? this.color.slice() : this.color.concat(this.valpha);\n\t},\n\n\tobject: function () {\n\t\tvar result = {};\n\t\tvar channels = convert[this.model].channels;\n\t\tvar labels = convert[this.model].labels;\n\n\t\tfor (var i = 0; i < channels; i++) {\n\t\t\tresult[labels[i]] = this.color[i];\n\t\t}\n\n\t\tif (this.valpha !== 1) {\n\t\t\tresult.alpha = this.valpha;\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tunitArray: function () {\n\t\tvar rgb = this.rgb().color;\n\t\trgb[0] /= 255;\n\t\trgb[1] /= 255;\n\t\trgb[2] /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.push(this.valpha);\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tunitObject: function () {\n\t\tvar rgb = this.rgb().object();\n\t\trgb.r /= 255;\n\t\trgb.g /= 255;\n\t\trgb.b /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.alpha = this.valpha;\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tround: function (places) {\n\t\tplaces = Math.max(places || 0, 0);\n\t\treturn new Color(this.color.map(roundToPlace(places)).concat(this.valpha), this.model);\n\t},\n\n\talpha: function (val) {\n\t\tif (arguments.length) {\n\t\t\treturn new Color(this.color.concat(Math.max(0, Math.min(1, val))), this.model);\n\t\t}\n\n\t\treturn this.valpha;\n\t},\n\n\t// rgb\n\tred: getset('rgb', 0, maxfn(255)),\n\tgreen: getset('rgb', 1, maxfn(255)),\n\tblue: getset('rgb', 2, maxfn(255)),\n\n\thue: getset(['hsl', 'hsv', 'hsl', 'hwb', 'hcg'], 0, function (val) { return ((val % 360) + 360) % 360; }), // eslint-disable-line brace-style\n\n\tsaturationl: getset('hsl', 1, maxfn(100)),\n\tlightness: getset('hsl', 2, maxfn(100)),\n\n\tsaturationv: getset('hsv', 1, maxfn(100)),\n\tvalue: getset('hsv', 2, maxfn(100)),\n\n\tchroma: getset('hcg', 1, maxfn(100)),\n\tgray: getset('hcg', 2, maxfn(100)),\n\n\twhite: getset('hwb', 1, maxfn(100)),\n\twblack: getset('hwb', 2, maxfn(100)),\n\n\tcyan: getset('cmyk', 0, maxfn(100)),\n\tmagenta: getset('cmyk', 1, maxfn(100)),\n\tyellow: getset('cmyk', 2, maxfn(100)),\n\tblack: getset('cmyk', 3, maxfn(100)),\n\n\tx: getset('xyz', 0, maxfn(100)),\n\ty: getset('xyz', 1, maxfn(100)),\n\tz: getset('xyz', 2, maxfn(100)),\n\n\tl: getset('lab', 0, maxfn(100)),\n\ta: getset('lab', 1),\n\tb: getset('lab', 2),\n\n\tkeyword: function (val) {\n\t\tif (arguments.length) {\n\t\t\treturn new Color(val);\n\t\t}\n\n\t\treturn convert[this.model].keyword(this.color);\n\t},\n\n\thex: function (val) {\n\t\tif (arguments.length) {\n\t\t\treturn new Color(val);\n\t\t}\n\n\t\treturn colorString.to.hex(this.rgb().round().color);\n\t},\n\n\trgbNumber: function () {\n\t\tvar rgb = this.rgb().color;\n\t\treturn ((rgb[0] & 0xFF) << 16) | ((rgb[1] & 0xFF) << 8) | (rgb[2] & 0xFF);\n\t},\n\n\tluminosity: function () {\n\t\t// http://www.w3.org/TR/WCAG20/#relativeluminancedef\n\t\tvar rgb = this.rgb().color;\n\n\t\tvar lum = [];\n\t\tfor (var i = 0; i < rgb.length; i++) {\n\t\t\tvar chan = rgb[i] / 255;\n\t\t\tlum[i] = (chan <= 0.03928) ? chan / 12.92 : Math.pow(((chan + 0.055) / 1.055), 2.4);\n\t\t}\n\n\t\treturn 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\n\t},\n\n\tcontrast: function (color2) {\n\t\t// http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n\t\tvar lum1 = this.luminosity();\n\t\tvar lum2 = color2.luminosity();\n\n\t\tif (lum1 > lum2) {\n\t\t\treturn (lum1 + 0.05) / (lum2 + 0.05);\n\t\t}\n\n\t\treturn (lum2 + 0.05) / (lum1 + 0.05);\n\t},\n\n\tlevel: function (color2) {\n\t\tvar contrastRatio = this.contrast(color2);\n\t\tif (contrastRatio >= 7.1) {\n\t\t\treturn 'AAA';\n\t\t}\n\n\t\treturn (contrastRatio >= 4.5) ? 'AA' : '';\n\t},\n\n\tisDark: function () {\n\t\t// YIQ equation from http://24ways.org/2010/calculating-color-contrast\n\t\tvar rgb = this.rgb().color;\n\t\tvar yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;\n\t\treturn yiq < 128;\n\t},\n\n\tisLight: function () {\n\t\treturn !this.isDark();\n\t},\n\n\tnegate: function () {\n\t\tvar rgb = this.rgb();\n\t\tfor (var i = 0; i < 3; i++) {\n\t\t\trgb.color[i] = 255 - rgb.color[i];\n\t\t}\n\t\treturn rgb;\n\t},\n\n\tlighten: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[2] += hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdarken: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[2] -= hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tsaturate: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[1] += hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdesaturate: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[1] -= hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\twhiten: function (ratio) {\n\t\tvar hwb = this.hwb();\n\t\thwb.color[1] += hwb.color[1] * ratio;\n\t\treturn hwb;\n\t},\n\n\tblacken: function (ratio) {\n\t\tvar hwb = this.hwb();\n\t\thwb.color[2] += hwb.color[2] * ratio;\n\t\treturn hwb;\n\t},\n\n\tgrayscale: function () {\n\t\t// http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale\n\t\tvar rgb = this.rgb().color;\n\t\tvar val = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n\t\treturn Color.rgb(val, val, val);\n\t},\n\n\tfade: function (ratio) {\n\t\treturn this.alpha(this.valpha - (this.valpha * ratio));\n\t},\n\n\topaquer: function (ratio) {\n\t\treturn this.alpha(this.valpha + (this.valpha * ratio));\n\t},\n\n\trotate: function (degrees) {\n\t\tvar hsl = this.hsl();\n\t\tvar hue = hsl.color[0];\n\t\thue = (hue + degrees) % 360;\n\t\thue = hue < 0 ? 360 + hue : hue;\n\t\thsl.color[0] = hue;\n\t\treturn hsl;\n\t},\n\n\tmix: function (mixinColor, weight) {\n\t\t// ported from sass implementation in C\n\t\t// https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\n\t\tvar color1 = mixinColor.rgb();\n\t\tvar color2 = this.rgb();\n\t\tvar p = weight === undefined ? 0.5 : weight;\n\n\t\tvar w = 2 * p - 1;\n\t\tvar a = color1.alpha() - color2.alpha();\n\n\t\tvar w1 = (((w * a === -1) ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n\t\tvar w2 = 1 - w1;\n\n\t\treturn Color.rgb(\n\t\t\t\tw1 * color1.red() + w2 * color2.red(),\n\t\t\t\tw1 * color1.green() + w2 * color2.green(),\n\t\t\t\tw1 * color1.blue() + w2 * color2.blue(),\n\t\t\t\tcolor1.alpha() * p + color2.alpha() * (1 - p));\n\t}\n};\n\n// model conversion methods and static constructors\nObject.keys(convert).forEach(function (model) {\n\tif (skippedModels.indexOf(model) !== -1) {\n\t\treturn;\n\t}\n\n\tvar channels = convert[model].channels;\n\n\t// conversion methods\n\tColor.prototype[model] = function () {\n\t\tif (this.model === model) {\n\t\t\treturn new Color(this);\n\t\t}\n\n\t\tif (arguments.length) {\n\t\t\treturn new Color(arguments, model);\n\t\t}\n\n\t\tvar newAlpha = typeof arguments[channels] === 'number' ? channels : this.valpha;\n\t\treturn new Color(assertArray(convert[this.model][model].raw(this.color)).concat(newAlpha), model);\n\t};\n\n\t// 'static' construction methods\n\tColor[model] = function (color) {\n\t\tif (typeof color === 'number') {\n\t\t\tcolor = zeroArray(_slice.call(arguments), channels);\n\t\t}\n\t\treturn new Color(color, model);\n\t};\n});\n\nfunction roundTo(num, places) {\n\treturn Number(num.toFixed(places));\n}\n\nfunction roundToPlace(places) {\n\treturn function (num) {\n\t\treturn roundTo(num, places);\n\t};\n}\n\nfunction getset(model, channel, modifier) {\n\tmodel = Array.isArray(model) ? model : [model];\n\n\tmodel.forEach(function (m) {\n\t\t(limiters[m] || (limiters[m] = []))[channel] = modifier;\n\t});\n\n\tmodel = model[0];\n\n\treturn function (val) {\n\t\tvar result;\n\n\t\tif (arguments.length) {\n\t\t\tif (modifier) {\n\t\t\t\tval = modifier(val);\n\t\t\t}\n\n\t\t\tresult = this[model]();\n\t\t\tresult.color[channel] = val;\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = this[model]().color[channel];\n\t\tif (modifier) {\n\t\t\tresult = modifier(result);\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\nfunction maxfn(max) {\n\treturn function (v) {\n\t\treturn Math.max(0, Math.min(max, v));\n\t};\n}\n\nfunction assertArray(val) {\n\treturn Array.isArray(val) ? val : [val];\n}\n\nfunction zeroArray(arr, length) {\n\tfor (var i = 0; i < length; i++) {\n\t\tif (typeof arr[i] !== 'number') {\n\t\t\tarr[i] = 0;\n\t\t}\n\t}\n\n\treturn arr;\n}\n\nmodule.exports = Color;\n",
    "/*\r\n * Cookies.js - 1.2.0\r\n * https://github.com/ScottHamper/Cookies\r\n *\r\n * This is free and unencumbered software released into the public domain.\r\n */\r\n(function (global, undefined) {\r\n    'use strict';\r\n\r\n    var factory = function (window) {\r\n        if (typeof window.document !== 'object') {\r\n            throw new Error('Cookies.js requires a `window` with a `document` object');\r\n        }\r\n\r\n        var Cookies = function (key, value, options) {\r\n            return arguments.length === 1 ?\r\n                Cookies.get(key) : Cookies.set(key, value, options);\r\n        };\r\n\r\n        // Allows for setter injection in unit tests\r\n        Cookies._document = window.document;\r\n\r\n        // Used to ensure cookie keys do not collide with\r\n        // built-in `Object` properties\r\n        Cookies._cacheKeyPrefix = 'cookey.'; // Hurr hurr, :)\r\n        \r\n        Cookies._maxExpireDate = new Date('Fri, 31 Dec 9999 23:59:59 UTC');\r\n\r\n        Cookies.defaults = {\r\n            path: '/',\r\n            secure: false\r\n        };\r\n\r\n        Cookies.get = function (key) {\r\n            if (Cookies._cachedDocumentCookie !== Cookies._document.cookie) {\r\n                Cookies._renewCache();\r\n            }\r\n\r\n            return Cookies._cache[Cookies._cacheKeyPrefix + key];\r\n        };\r\n\r\n        Cookies.set = function (key, value, options) {\r\n            options = Cookies._getExtendedOptions(options);\r\n            options.expires = Cookies._getExpiresDate(value === undefined ? -1 : options.expires);\r\n\r\n            Cookies._document.cookie = Cookies._generateCookieString(key, value, options);\r\n\r\n            return Cookies;\r\n        };\r\n\r\n        Cookies.expire = function (key, options) {\r\n            return Cookies.set(key, undefined, options);\r\n        };\r\n\r\n        Cookies._getExtendedOptions = function (options) {\r\n            return {\r\n                path: options && options.path || Cookies.defaults.path,\r\n                domain: options && options.domain || Cookies.defaults.domain,\r\n                expires: options && options.expires || Cookies.defaults.expires,\r\n                secure: options && options.secure !== undefined ?  options.secure : Cookies.defaults.secure\r\n            };\r\n        };\r\n\r\n        Cookies._isValidDate = function (date) {\r\n            return Object.prototype.toString.call(date) === '[object Date]' && !isNaN(date.getTime());\r\n        };\r\n\r\n        Cookies._getExpiresDate = function (expires, now) {\r\n            now = now || new Date();\r\n\r\n            if (typeof expires === 'number') {\r\n                expires = expires === Infinity ?\r\n                    Cookies._maxExpireDate : new Date(now.getTime() + expires * 1000);\r\n            } else if (typeof expires === 'string') {\r\n                expires = new Date(expires);\r\n            }\r\n\r\n            if (expires && !Cookies._isValidDate(expires)) {\r\n                throw new Error('`expires` parameter cannot be converted to a valid Date instance');\r\n            }\r\n\r\n            return expires;\r\n        };\r\n\r\n        Cookies._generateCookieString = function (key, value, options) {\r\n            key = key.replace(/[^#$&+\\^`|]/g, encodeURIComponent);\r\n            key = key.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\r\n            value = (value + '').replace(/[^!#$&-+\\--:<-\\[\\]-~]/g, encodeURIComponent);\r\n            options = options || {};\r\n\r\n            var cookieString = key + '=' + value;\r\n            cookieString += options.path ? ';path=' + options.path : '';\r\n            cookieString += options.domain ? ';domain=' + options.domain : '';\r\n            cookieString += options.expires ? ';expires=' + options.expires.toUTCString() : '';\r\n            cookieString += options.secure ? ';secure' : '';\r\n\r\n            return cookieString;\r\n        };\r\n\r\n        Cookies._getCacheFromString = function (documentCookie) {\r\n            var cookieCache = {};\r\n            var cookiesArray = documentCookie ? documentCookie.split('; ') : [];\r\n\r\n            for (var i = 0; i < cookiesArray.length; i++) {\r\n                var cookieKvp = Cookies._getKeyValuePairFromCookieString(cookiesArray[i]);\r\n\r\n                if (cookieCache[Cookies._cacheKeyPrefix + cookieKvp.key] === undefined) {\r\n                    cookieCache[Cookies._cacheKeyPrefix + cookieKvp.key] = cookieKvp.value;\r\n                }\r\n            }\r\n\r\n            return cookieCache;\r\n        };\r\n\r\n        Cookies._getKeyValuePairFromCookieString = function (cookieString) {\r\n            // \"=\" is a valid character in a cookie value according to RFC6265, so cannot `split('=')`\r\n            var separatorIndex = cookieString.indexOf('=');\r\n\r\n            // IE omits the \"=\" when the cookie value is an empty string\r\n            separatorIndex = separatorIndex < 0 ? cookieString.length : separatorIndex;\r\n\r\n            return {\r\n                key: decodeURIComponent(cookieString.substr(0, separatorIndex)),\r\n                value: decodeURIComponent(cookieString.substr(separatorIndex + 1))\r\n            };\r\n        };\r\n\r\n        Cookies._renewCache = function () {\r\n            Cookies._cache = Cookies._getCacheFromString(Cookies._document.cookie);\r\n            Cookies._cachedDocumentCookie = Cookies._document.cookie;\r\n        };\r\n\r\n        Cookies._areEnabled = function () {\r\n            var testKey = 'cookies.js';\r\n            var areEnabled = Cookies.set(testKey, 1).get(testKey) === '1';\r\n            Cookies.expire(testKey);\r\n            return areEnabled;\r\n        };\r\n\r\n        Cookies.enabled = Cookies._areEnabled();\r\n\r\n        return Cookies;\r\n    };\r\n\r\n    var cookiesExport = typeof global.document === 'object' ? factory(global) : factory;\r\n\r\n    // AMD support\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(function () { return cookiesExport; });\r\n    // CommonJS/Node.js support\r\n    } else if (typeof exports === 'object') {\r\n        // Support Node.js specific `module.exports` (which can be a function)\r\n        if (typeof module === 'object' && typeof module.exports === 'object') {\r\n            exports = module.exports = cookiesExport;\r\n        }\r\n        // But always support CommonJS module 1.1.1 spec (`exports` cannot be a function)\r\n        exports.Cookies = cookiesExport;\r\n    } else {\r\n        global.Cookies = cookiesExport;\r\n    }\r\n})(typeof window === 'undefined' ? this : window);",
    "/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n",
    "module.exports = require(\"handlebars/runtime\")[\"default\"];\n",
    "\"use strict\";\n/*!\n * modernizr v3.6.0\n * Build https://modernizr.com/download?-backgroundblendmode-backgroundcliptext-backgroundsize-bgpositionshorthand-bgpositionxy-bgrepeatspace_bgrepeatround-bgsizecover-bloburls-borderradius-boxshadow-boxsizing-canvas-canvasblending-canvastext-canvaswinding-classlist-contains-cssanimations-csscalc-csschunit-cssexunit-cssgradients-csspointerevents-csspositionsticky-csspseudoanimations-csspseudotransitions-cssremunit-cssresize-csstransforms-csstransforms3d-csstransitions-cssvhunit-cssvmaxunit-cssvminunit-cssvwunit-cubicbezierrange-datauri-devicemotion_deviceorientation-documentfragment-ellipsis-es6array-es6math-es6number-es6object-es6string-flexbox-flexwrap-fontface-fullscreen-generatedcontent-generators-hashchange-hiddenscroll-history-hsla-inlinesvg-json-lastchild-mediaqueries-multiplebgs-mutationobserver-nthchild-objectfit-opacity-pagevisibility-performance-pointerevents-postmessage-preserve3d-promises-queryselector-requestanimationframe-rgba-scriptasync-scriptdefer-siblinggeneral-sizes-smil-srcset-subpixelfont-supports-svg-svgasimg-svgclippaths-svgfilters-svgforeignobject-target-templatestrings-todataurljpeg_todataurlpng_todataurlwebp-userselect-video-videoautoplay-videoloop-videopreload-willchange-xhr2-xhrresponsetype-xhrresponsetypearraybuffer-xhrresponsetypeblob-hasevent-mq-prefixed-prefixedcss-dontmin-cssclassprefix:has-\n *\n * Copyright (c)\n *  Faruk Ates\n *  Paul Irish\n *  Alex Sexton\n *  Ryan Seddon\n *  Patrick Kettner\n *  Stu Cox\n *  Richard Herrera\n\n * MIT License\n */\n\n/*\n * Modernizr tests which native CSS3 and HTML5 features are available in the\n * current UA and makes the results available to you in two ways: as properties on\n * a global `Modernizr` object, and as classes on the `<html>` element. This\n * information allows you to progressively enhance your pages with a granular level\n * of control over the experience.\n*/\n\n;(function(window, document, undefined){\n  var tests = [];\n  \n\n  /**\n   *\n   * ModernizrProto is the constructor for Modernizr\n   *\n   * @class\n   * @access public\n   */\n\n  var ModernizrProto = {\n    // The current version, dummy\n    _version: '3.6.0',\n\n    // Any settings that don't work as separate modules\n    // can go in here as configuration.\n    _config: {\n      'classPrefix': \"has-\",\n      'enableClasses': true,\n      'enableJSClass': true,\n      'usePrefixes': true\n    },\n\n    // Queue of tests\n    _q: [],\n\n    // Stub these for people who are listening\n    on: function(test, cb) {\n      // I don't really think people should do this, but we can\n      // safe guard it a bit.\n      // -- NOTE:: this gets WAY overridden in src/addTest for actual async tests.\n      // This is in case people listen to synchronous tests. I would leave it out,\n      // but the code to *disallow* sync tests in the real version of this\n      // function is actually larger than this.\n      var self = this;\n      setTimeout(function() {\n        cb(self[test]);\n      }, 0);\n    },\n\n    addTest: function(name, fn, options) {\n      tests.push({name: name, fn: fn, options: options});\n    },\n\n    addAsyncTest: function(fn) {\n      tests.push({name: null, fn: fn});\n    }\n  };\n\n  \n\n  // Fake some of Object.create so we can force non test results to be non \"own\" properties.\n  var Modernizr = function() {};\n  Modernizr.prototype = ModernizrProto;\n\n  // Leak modernizr globally when you `require` it rather than force it here.\n  // Overwrite name so constructor name is nicer :D\n  Modernizr = new Modernizr();\n\n  \n\n  var classes = [];\n  \n\n  /**\n   * is returns a boolean if the typeof an obj is exactly type.\n   *\n   * @access private\n   * @function is\n   * @param {*} obj - A thing we want to check the type of\n   * @param {string} type - A string to compare the typeof against\n   * @returns {boolean}\n   */\n\n  function is(obj, type) {\n    return typeof obj === type;\n  }\n  ;\n\n  /**\n   * Run through all tests and detect their support in the current UA.\n   *\n   * @access private\n   */\n\n  function testRunner() {\n    var featureNames;\n    var feature;\n    var aliasIdx;\n    var result;\n    var nameIdx;\n    var featureName;\n    var featureNameSplit;\n\n    for (var featureIdx in tests) {\n      if (tests.hasOwnProperty(featureIdx)) {\n        featureNames = [];\n        feature = tests[featureIdx];\n        // run the test, throw the return value into the Modernizr,\n        // then based on that boolean, define an appropriate className\n        // and push it into an array of classes we'll join later.\n        //\n        // If there is no name, it's an 'async' test that is run,\n        // but not directly added to the object. That should\n        // be done with a post-run addTest call.\n        if (feature.name) {\n          featureNames.push(feature.name.toLowerCase());\n\n          if (feature.options && feature.options.aliases && feature.options.aliases.length) {\n            // Add all the aliases into the names list\n            for (aliasIdx = 0; aliasIdx < feature.options.aliases.length; aliasIdx++) {\n              featureNames.push(feature.options.aliases[aliasIdx].toLowerCase());\n            }\n          }\n        }\n\n        // Run the test, or use the raw value if it's not a function\n        result = is(feature.fn, 'function') ? feature.fn() : feature.fn;\n\n\n        // Set each of the names on the Modernizr object\n        for (nameIdx = 0; nameIdx < featureNames.length; nameIdx++) {\n          featureName = featureNames[nameIdx];\n          // Support dot properties as sub tests. We don't do checking to make sure\n          // that the implied parent tests have been added. You must call them in\n          // order (either in the test, or make the parent test a dependency).\n          //\n          // Cap it to TWO to make the logic simple and because who needs that kind of subtesting\n          // hashtag famous last words\n          featureNameSplit = featureName.split('.');\n\n          if (featureNameSplit.length === 1) {\n            Modernizr[featureNameSplit[0]] = result;\n          } else {\n            // cast to a Boolean, if not one already\n            if (Modernizr[featureNameSplit[0]] && !(Modernizr[featureNameSplit[0]] instanceof Boolean)) {\n              Modernizr[featureNameSplit[0]] = new Boolean(Modernizr[featureNameSplit[0]]);\n            }\n\n            Modernizr[featureNameSplit[0]][featureNameSplit[1]] = result;\n          }\n\n          classes.push((result ? '' : 'no-') + featureNameSplit.join('-'));\n        }\n      }\n    }\n  }\n  ;\n\n  /**\n   * docElement is a convenience wrapper to grab the root element of the document\n   *\n   * @access private\n   * @returns {HTMLElement|SVGElement} The root element of the document\n   */\n\n  var docElement = document.documentElement;\n  \n\n  /**\n   * A convenience helper to check if the document we are running in is an SVG document\n   *\n   * @access private\n   * @returns {boolean}\n   */\n\n  var isSVG = docElement.nodeName.toLowerCase() === 'svg';\n  \n\n  /**\n   * createElement is a convenience wrapper around document.createElement. Since we\n   * use createElement all over the place, this allows for (slightly) smaller code\n   * as well as abstracting away issues with creating elements in contexts other than\n   * HTML documents (e.g. SVG documents).\n   *\n   * @access private\n   * @function createElement\n   * @returns {HTMLElement|SVGElement} An HTML or SVG element\n   */\n\n  function createElement() {\n    if (typeof document.createElement !== 'function') {\n      // This is the case in IE7, where the type of createElement is \"object\".\n      // For this reason, we cannot call apply() as Object is not a Function.\n      return document.createElement(arguments[0]);\n    } else if (isSVG) {\n      return document.createElementNS.call(document, 'http://www.w3.org/2000/svg', arguments[0]);\n    } else {\n      return document.createElement.apply(document, arguments);\n    }\n  }\n\n  ;\n\n  /**\n   * Modernizr.hasEvent() detects support for a given event\n   *\n   * @memberof Modernizr\n   * @name Modernizr.hasEvent\n   * @optionName Modernizr.hasEvent()\n   * @optionProp hasEvent\n   * @access public\n   * @function hasEvent\n   * @param  {string|*} eventName - the name of an event to test for (e.g. \"resize\")\n   * @param  {Element|string} [element=HTMLDivElement] - is the element|document|window|tagName to test on\n   * @returns {boolean}\n   * @example\n   *  `Modernizr.hasEvent` lets you determine if the browser supports a supplied event.\n   *  By default, it does this detection on a div element\n   *\n   * ```js\n   *  hasEvent('blur') // true;\n   * ```\n   *\n   * However, you are able to give an object as a second argument to hasEvent to\n   * detect an event on something other than a div.\n   *\n   * ```js\n   *  hasEvent('devicelight', window) // true;\n   * ```\n   *\n   */\n\n  var hasEvent = (function() {\n\n    // Detect whether event support can be detected via `in`. Test on a DOM element\n    // using the \"blur\" event b/c it should always exist. bit.ly/event-detection\n    var needsFallback = !('onblur' in document.documentElement);\n\n    function inner(eventName, element) {\n\n      var isSupported;\n      if (!eventName) { return false; }\n      if (!element || typeof element === 'string') {\n        element = createElement(element || 'div');\n      }\n\n      // Testing via the `in` operator is sufficient for modern browsers and IE.\n      // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and\n      // \"resize\", whereas `in` \"catches\" those.\n      eventName = 'on' + eventName;\n      isSupported = eventName in element;\n\n      // Fallback technique for old Firefox - bit.ly/event-detection\n      if (!isSupported && needsFallback) {\n        if (!element.setAttribute) {\n          // Switch to generic element if it lacks `setAttribute`.\n          // It could be the `document`, `window`, or something else.\n          element = createElement('div');\n        }\n\n        element.setAttribute(eventName, '');\n        isSupported = typeof element[eventName] === 'function';\n\n        if (element[eventName] !== undefined) {\n          // If property was created, \"remove it\" by setting value to `undefined`.\n          element[eventName] = undefined;\n        }\n        element.removeAttribute(eventName);\n      }\n\n      return isSupported;\n    }\n    return inner;\n  })();\n\n\n  ModernizrProto.hasEvent = hasEvent;\n  \n\n  /**\n   * getBody returns the body of a document, or an element that can stand in for\n   * the body if a real body does not exist\n   *\n   * @access private\n   * @function getBody\n   * @returns {HTMLElement|SVGElement} Returns the real body of a document, or an\n   * artificially created element that stands in for the body\n   */\n\n  function getBody() {\n    // After page load injecting a fake body doesn't work so check if body exists\n    var body = document.body;\n\n    if (!body) {\n      // Can't use the real body create a fake one.\n      body = createElement(isSVG ? 'svg' : 'body');\n      body.fake = true;\n    }\n\n    return body;\n  }\n\n  ;\n\n  /**\n   * injectElementWithStyles injects an element with style element and some CSS rules\n   *\n   * @access private\n   * @function injectElementWithStyles\n   * @param {string} rule - String representing a css rule\n   * @param {function} callback - A function that is used to test the injected element\n   * @param {number} [nodes] - An integer representing the number of additional nodes you want injected\n   * @param {string[]} [testnames] - An array of strings that are used as ids for the additional nodes\n   * @returns {boolean}\n   */\n\n  function injectElementWithStyles(rule, callback, nodes, testnames) {\n    var mod = 'modernizr';\n    var style;\n    var ret;\n    var node;\n    var docOverflow;\n    var div = createElement('div');\n    var body = getBody();\n\n    if (parseInt(nodes, 10)) {\n      // In order not to give false positives we create a node for each test\n      // This also allows the method to scale for unspecified uses\n      while (nodes--) {\n        node = createElement('div');\n        node.id = testnames ? testnames[nodes] : mod + (nodes + 1);\n        div.appendChild(node);\n      }\n    }\n\n    style = createElement('style');\n    style.type = 'text/css';\n    style.id = 's' + mod;\n\n    // IE6 will false positive on some tests due to the style element inside the test div somehow interfering offsetHeight, so insert it into body or fakebody.\n    // Opera will act all quirky when injecting elements in documentElement when page is served as xml, needs fakebody too. #270\n    (!body.fake ? div : body).appendChild(style);\n    body.appendChild(div);\n\n    if (style.styleSheet) {\n      style.styleSheet.cssText = rule;\n    } else {\n      style.appendChild(document.createTextNode(rule));\n    }\n    div.id = mod;\n\n    if (body.fake) {\n      //avoid crashing IE8, if background image is used\n      body.style.background = '';\n      //Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible\n      body.style.overflow = 'hidden';\n      docOverflow = docElement.style.overflow;\n      docElement.style.overflow = 'hidden';\n      docElement.appendChild(body);\n    }\n\n    ret = callback(div, rule);\n    // If this is done after page load we don't want to remove the body so check if body exists\n    if (body.fake) {\n      body.parentNode.removeChild(body);\n      docElement.style.overflow = docOverflow;\n      // Trigger layout so kinetic scrolling isn't disabled in iOS6+\n      // eslint-disable-next-line\n      docElement.offsetHeight;\n    } else {\n      div.parentNode.removeChild(div);\n    }\n\n    return !!ret;\n\n  }\n\n  ;\n\n  /**\n   * Modernizr.mq tests a given media query, live against the current state of the window\n   * adapted from matchMedia polyfill by Scott Jehl and Paul Irish\n   * gist.github.com/786768\n   *\n   * @memberof Modernizr\n   * @name Modernizr.mq\n   * @optionName Modernizr.mq()\n   * @optionProp mq\n   * @access public\n   * @function mq\n   * @param {string} mq - String of the media query we want to test\n   * @returns {boolean}\n   * @example\n   * Modernizr.mq allows for you to programmatically check if the current browser\n   * window state matches a media query.\n   *\n   * ```js\n   *  var query = Modernizr.mq('(min-width: 900px)');\n   *\n   *  if (query) {\n   *    // the browser window is larger than 900px\n   *  }\n   * ```\n   *\n   * Only valid media queries are supported, therefore you must always include values\n   * with your media query\n   *\n   * ```js\n   * // good\n   *  Modernizr.mq('(min-width: 900px)');\n   *\n   * // bad\n   *  Modernizr.mq('min-width');\n   * ```\n   *\n   * If you would just like to test that media queries are supported in general, use\n   *\n   * ```js\n   *  Modernizr.mq('only all'); // true if MQ are supported, false if not\n   * ```\n   *\n   *\n   * Note that if the browser does not support media queries (e.g. old IE) mq will\n   * always return false.\n   */\n\n  var mq = (function() {\n    var matchMedia = window.matchMedia || window.msMatchMedia;\n    if (matchMedia) {\n      return function(mq) {\n        var mql = matchMedia(mq);\n        return mql && mql.matches || false;\n      };\n    }\n\n    return function(mq) {\n      var bool = false;\n\n      injectElementWithStyles('@media ' + mq + ' { #modernizr { position: absolute; } }', function(node) {\n        bool = (window.getComputedStyle ?\n                window.getComputedStyle(node, null) :\n                node.currentStyle).position == 'absolute';\n      });\n\n      return bool;\n    };\n  })();\n\n\n  ModernizrProto.mq = mq;\n\n  \n\n  /**\n   * If the browsers follow the spec, then they would expose vendor-specific styles as:\n   *   elem.style.WebkitBorderRadius\n   * instead of something like the following (which is technically incorrect):\n   *   elem.style.webkitBorderRadius\n\n   * WebKit ghosts their properties in lowercase but Opera & Moz do not.\n   * Microsoft uses a lowercase `ms` instead of the correct `Ms` in IE8+\n   *   erik.eae.net/archives/2008/03/10/21.48.10/\n\n   * More here: github.com/Modernizr/Modernizr/issues/issue/21\n   *\n   * @access private\n   * @returns {string} The string representing the vendor-specific style properties\n   */\n\n  var omPrefixes = 'Moz O ms Webkit';\n  \n\n  var cssomPrefixes = (ModernizrProto._config.usePrefixes ? omPrefixes.split(' ') : []);\n  ModernizrProto._cssomPrefixes = cssomPrefixes;\n  \n\n\n  /**\n   * contains checks to see if a string contains another string\n   *\n   * @access private\n   * @function contains\n   * @param {string} str - The string we want to check for substrings\n   * @param {string} substr - The substring we want to search the first string for\n   * @returns {boolean}\n   */\n\n  function contains(str, substr) {\n    return !!~('' + str).indexOf(substr);\n  }\n\n  ;\n\n  /**\n   * Create our \"modernizr\" element that we do most feature tests on.\n   *\n   * @access private\n   */\n\n  var modElem = {\n    elem: createElement('modernizr')\n  };\n\n  // Clean up this element\n  Modernizr._q.push(function() {\n    delete modElem.elem;\n  });\n\n  \n\n  var mStyle = {\n    style: modElem.elem.style\n  };\n\n  // kill ref for gc, must happen before mod.elem is removed, so we unshift on to\n  // the front of the queue.\n  Modernizr._q.unshift(function() {\n    delete mStyle.style;\n  });\n\n  \n\n  /**\n   * domToCSS takes a camelCase string and converts it to kebab-case\n   * e.g. boxSizing -> box-sizing\n   *\n   * @access private\n   * @function domToCSS\n   * @param {string} name - String name of camelCase prop we want to convert\n   * @returns {string} The kebab-case version of the supplied name\n   */\n\n  function domToCSS(name) {\n    return name.replace(/([A-Z])/g, function(str, m1) {\n      return '-' + m1.toLowerCase();\n    }).replace(/^ms-/, '-ms-');\n  }\n  ;\n\n\n  /**\n   * wrapper around getComputedStyle, to fix issues with Firefox returning null when\n   * called inside of a hidden iframe\n   *\n   * @access private\n   * @function computedStyle\n   * @param {HTMLElement|SVGElement} - The element we want to find the computed styles of\n   * @param {string|null} [pseudoSelector]- An optional pseudo element selector (e.g. :before), of null if none\n   * @returns {CSSStyleDeclaration}\n   */\n\n  function computedStyle(elem, pseudo, prop) {\n    var result;\n\n    if ('getComputedStyle' in window) {\n      result = getComputedStyle.call(window, elem, pseudo);\n      var console = window.console;\n\n      if (result !== null) {\n        if (prop) {\n          result = result.getPropertyValue(prop);\n        }\n      } else {\n        if (console) {\n          var method = console.error ? 'error' : 'log';\n          console[method].call(console, 'getComputedStyle returning null, its possible modernizr test results are inaccurate');\n        }\n      }\n    } else {\n      result = !pseudo && elem.currentStyle && elem.currentStyle[prop];\n    }\n\n    return result;\n  }\n\n  ;\n\n  /**\n   * nativeTestProps allows for us to use native feature detection functionality if available.\n   * some prefixed form, or false, in the case of an unsupported rule\n   *\n   * @access private\n   * @function nativeTestProps\n   * @param {array} props - An array of property names\n   * @param {string} value - A string representing the value we want to check via @supports\n   * @returns {boolean|undefined} A boolean when @supports exists, undefined otherwise\n   */\n\n  // Accepts a list of property names and a single value\n  // Returns `undefined` if native detection not available\n  function nativeTestProps(props, value) {\n    var i = props.length;\n    // Start with the JS API: http://www.w3.org/TR/css3-conditional/#the-css-interface\n    if ('CSS' in window && 'supports' in window.CSS) {\n      // Try every prefixed variant of the property\n      while (i--) {\n        if (window.CSS.supports(domToCSS(props[i]), value)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    // Otherwise fall back to at-rule (for Opera 12.x)\n    else if ('CSSSupportsRule' in window) {\n      // Build a condition string for every prefixed variant\n      var conditionText = [];\n      while (i--) {\n        conditionText.push('(' + domToCSS(props[i]) + ':' + value + ')');\n      }\n      conditionText = conditionText.join(' or ');\n      return injectElementWithStyles('@supports (' + conditionText + ') { #modernizr { position: absolute; } }', function(node) {\n        return computedStyle(node, null, 'position') == 'absolute';\n      });\n    }\n    return undefined;\n  }\n  ;\n\n  /**\n   * cssToDOM takes a kebab-case string and converts it to camelCase\n   * e.g. box-sizing -> boxSizing\n   *\n   * @access private\n   * @function cssToDOM\n   * @param {string} name - String name of kebab-case prop we want to convert\n   * @returns {string} The camelCase version of the supplied name\n   */\n\n  function cssToDOM(name) {\n    return name.replace(/([a-z])-([a-z])/g, function(str, m1, m2) {\n      return m1 + m2.toUpperCase();\n    }).replace(/^-/, '');\n  }\n  ;\n\n  // testProps is a generic CSS / DOM property test.\n\n  // In testing support for a given CSS property, it's legit to test:\n  //    `elem.style[styleName] !== undefined`\n  // If the property is supported it will return an empty string,\n  // if unsupported it will return undefined.\n\n  // We'll take advantage of this quick test and skip setting a style\n  // on our modernizr element, but instead just testing undefined vs\n  // empty string.\n\n  // Property names can be provided in either camelCase or kebab-case.\n\n  function testProps(props, prefixed, value, skipValueTest) {\n    skipValueTest = is(skipValueTest, 'undefined') ? false : skipValueTest;\n\n    // Try native detect first\n    if (!is(value, 'undefined')) {\n      var result = nativeTestProps(props, value);\n      if (!is(result, 'undefined')) {\n        return result;\n      }\n    }\n\n    // Otherwise do it properly\n    var afterInit, i, propsLength, prop, before;\n\n    // If we don't have a style element, that means we're running async or after\n    // the core tests, so we'll need to create our own elements to use\n\n    // inside of an SVG element, in certain browsers, the `style` element is only\n    // defined for valid tags. Therefore, if `modernizr` does not have one, we\n    // fall back to a less used element and hope for the best.\n    // for strict XHTML browsers the hardly used samp element is used\n    var elems = ['modernizr', 'tspan', 'samp'];\n    while (!mStyle.style && elems.length) {\n      afterInit = true;\n      mStyle.modElem = createElement(elems.shift());\n      mStyle.style = mStyle.modElem.style;\n    }\n\n    // Delete the objects if we created them.\n    function cleanElems() {\n      if (afterInit) {\n        delete mStyle.style;\n        delete mStyle.modElem;\n      }\n    }\n\n    propsLength = props.length;\n    for (i = 0; i < propsLength; i++) {\n      prop = props[i];\n      before = mStyle.style[prop];\n\n      if (contains(prop, '-')) {\n        prop = cssToDOM(prop);\n      }\n\n      if (mStyle.style[prop] !== undefined) {\n\n        // If value to test has been passed in, do a set-and-check test.\n        // 0 (integer) is a valid property value, so check that `value` isn't\n        // undefined, rather than just checking it's truthy.\n        if (!skipValueTest && !is(value, 'undefined')) {\n\n          // Needs a try catch block because of old IE. This is slow, but will\n          // be avoided in most cases because `skipValueTest` will be used.\n          try {\n            mStyle.style[prop] = value;\n          } catch (e) {}\n\n          // If the property value has changed, we assume the value used is\n          // supported. If `value` is empty string, it'll fail here (because\n          // it hasn't changed), which matches how browsers have implemented\n          // CSS.supports()\n          if (mStyle.style[prop] != before) {\n            cleanElems();\n            return prefixed == 'pfx' ? prop : true;\n          }\n        }\n        // Otherwise just return true, or the property name if this is a\n        // `prefixed()` call\n        else {\n          cleanElems();\n          return prefixed == 'pfx' ? prop : true;\n        }\n      }\n    }\n    cleanElems();\n    return false;\n  }\n\n  ;\n\n  /**\n   * List of JavaScript DOM values used for tests\n   *\n   * @memberof Modernizr\n   * @name Modernizr._domPrefixes\n   * @optionName Modernizr._domPrefixes\n   * @optionProp domPrefixes\n   * @access public\n   * @example\n   *\n   * Modernizr._domPrefixes is exactly the same as [_prefixes](#modernizr-_prefixes), but rather\n   * than kebab-case properties, all properties are their Capitalized variant\n   *\n   * ```js\n   * Modernizr._domPrefixes === [ \"Moz\", \"O\", \"ms\", \"Webkit\" ];\n   * ```\n   */\n\n  var domPrefixes = (ModernizrProto._config.usePrefixes ? omPrefixes.toLowerCase().split(' ') : []);\n  ModernizrProto._domPrefixes = domPrefixes;\n  \n\n  /**\n   * fnBind is a super small [bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind) polyfill.\n   *\n   * @access private\n   * @function fnBind\n   * @param {function} fn - a function you want to change `this` reference to\n   * @param {object} that - the `this` you want to call the function with\n   * @returns {function} The wrapped version of the supplied function\n   */\n\n  function fnBind(fn, that) {\n    return function() {\n      return fn.apply(that, arguments);\n    };\n  }\n\n  ;\n\n  /**\n   * testDOMProps is a generic DOM property test; if a browser supports\n   *   a certain property, it won't return undefined for it.\n   *\n   * @access private\n   * @function testDOMProps\n   * @param {array.<string>} props - An array of properties to test for\n   * @param {object} obj - An object or Element you want to use to test the parameters again\n   * @param {boolean|object} elem - An Element to bind the property lookup again. Use `false` to prevent the check\n   * @returns {false|*} returns false if the prop is unsupported, otherwise the value that is supported\n   */\n  function testDOMProps(props, obj, elem) {\n    var item;\n\n    for (var i in props) {\n      if (props[i] in obj) {\n\n        // return the property name as a string\n        if (elem === false) {\n          return props[i];\n        }\n\n        item = obj[props[i]];\n\n        // let's bind a function\n        if (is(item, 'function')) {\n          // bind to obj unless overriden\n          return fnBind(item, elem || obj);\n        }\n\n        // return the unbound function or obj or value\n        return item;\n      }\n    }\n    return false;\n  }\n\n  ;\n\n  /**\n   * testPropsAll tests a list of DOM properties we want to check against.\n   * We specify literally ALL possible (known and/or likely) properties on\n   * the element including the non-vendor prefixed one, for forward-\n   * compatibility.\n   *\n   * @access private\n   * @function testPropsAll\n   * @param {string} prop - A string of the property to test for\n   * @param {string|object} [prefixed] - An object to check the prefixed properties on. Use a string to skip\n   * @param {HTMLElement|SVGElement} [elem] - An element used to test the property and value against\n   * @param {string} [value] - A string of a css value\n   * @param {boolean} [skipValueTest] - An boolean representing if you want to test if value sticks when set\n   * @returns {false|string} returns the string version of the property, or false if it is unsupported\n   */\n  function testPropsAll(prop, prefixed, elem, value, skipValueTest) {\n\n    var ucProp = prop.charAt(0).toUpperCase() + prop.slice(1),\n      props = (prop + ' ' + cssomPrefixes.join(ucProp + ' ') + ucProp).split(' ');\n\n    // did they call .prefixed('boxSizing') or are we just testing a prop?\n    if (is(prefixed, 'string') || is(prefixed, 'undefined')) {\n      return testProps(props, prefixed, value, skipValueTest);\n\n      // otherwise, they called .prefixed('requestAnimationFrame', window[, elem])\n    } else {\n      props = (prop + ' ' + (domPrefixes).join(ucProp + ' ') + ucProp).split(' ');\n      return testDOMProps(props, prefixed, elem);\n    }\n  }\n\n  // Modernizr.testAllProps() investigates whether a given style property,\n  // or any of its vendor-prefixed variants, is recognized\n  //\n  // Note that the property names must be provided in the camelCase variant.\n  // Modernizr.testAllProps('boxSizing')\n  ModernizrProto.testAllProps = testPropsAll;\n\n  \n\n  /**\n   * atRule returns a given CSS property at-rule (eg @keyframes), possibly in\n   * some prefixed form, or false, in the case of an unsupported rule\n   *\n   * @memberof Modernizr\n   * @name Modernizr.atRule\n   * @optionName Modernizr.atRule()\n   * @optionProp atRule\n   * @access public\n   * @function atRule\n   * @param {string} prop - String name of the @-rule to test for\n   * @returns {string|boolean} The string representing the (possibly prefixed)\n   * valid version of the @-rule, or `false` when it is unsupported.\n   * @example\n   * ```js\n   *  var keyframes = Modernizr.atRule('@keyframes');\n   *\n   *  if (keyframes) {\n   *    // keyframes are supported\n   *    // could be `@-webkit-keyframes` or `@keyframes`\n   *  } else {\n   *    // keyframes === `false`\n   *  }\n   * ```\n   *\n   */\n\n  var atRule = function(prop) {\n    var length = prefixes.length;\n    var cssrule = window.CSSRule;\n    var rule;\n\n    if (typeof cssrule === 'undefined') {\n      return undefined;\n    }\n\n    if (!prop) {\n      return false;\n    }\n\n    // remove literal @ from beginning of provided property\n    prop = prop.replace(/^@/, '');\n\n    // CSSRules use underscores instead of dashes\n    rule = prop.replace(/-/g, '_').toUpperCase() + '_RULE';\n\n    if (rule in cssrule) {\n      return '@' + prop;\n    }\n\n    for (var i = 0; i < length; i++) {\n      // prefixes gives us something like -o-, and we want O_\n      var prefix = prefixes[i];\n      var thisRule = prefix.toUpperCase() + '_' + rule;\n\n      if (thisRule in cssrule) {\n        return '@-' + prefix.toLowerCase() + '-' + prop;\n      }\n    }\n\n    return false;\n  };\n\n  ModernizrProto.atRule = atRule;\n\n  \n\n  /**\n   * prefixed returns the prefixed or nonprefixed property name variant of your input\n   *\n   * @memberof Modernizr\n   * @name Modernizr.prefixed\n   * @optionName Modernizr.prefixed()\n   * @optionProp prefixed\n   * @access public\n   * @function prefixed\n   * @param {string} prop - String name of the property to test for\n   * @param {object} [obj] - An object to test for the prefixed properties on\n   * @param {HTMLElement} [elem] - An element used to test specific properties against\n   * @returns {string|false} The string representing the (possibly prefixed) valid\n   * version of the property, or `false` when it is unsupported.\n   * @example\n   *\n   * Modernizr.prefixed takes a string css value in the DOM style camelCase (as\n   * opposed to the css style kebab-case) form and returns the (possibly prefixed)\n   * version of that property that the browser actually supports.\n   *\n   * For example, in older Firefox...\n   * ```js\n   * prefixed('boxSizing')\n   * ```\n   * returns 'MozBoxSizing'\n   *\n   * In newer Firefox, as well as any other browser that support the unprefixed\n   * version would simply return `boxSizing`. Any browser that does not support\n   * the property at all, it will return `false`.\n   *\n   * By default, prefixed is checked against a DOM element. If you want to check\n   * for a property on another object, just pass it as a second argument\n   *\n   * ```js\n   * var rAF = prefixed('requestAnimationFrame', window);\n   *\n   * raf(function() {\n   *  renderFunction();\n   * })\n   * ```\n   *\n   * Note that this will return _the actual function_ - not the name of the function.\n   * If you need the actual name of the property, pass in `false` as a third argument\n   *\n   * ```js\n   * var rAFProp = prefixed('requestAnimationFrame', window, false);\n   *\n   * rafProp === 'WebkitRequestAnimationFrame' // in older webkit\n   * ```\n   *\n   * One common use case for prefixed is if you're trying to determine which transition\n   * end event to bind to, you might do something like...\n   * ```js\n   * var transEndEventNames = {\n   *     'WebkitTransition' : 'webkitTransitionEnd', * Saf 6, Android Browser\n   *     'MozTransition'    : 'transitionend',       * only for FF < 15\n   *     'transition'       : 'transitionend'        * IE10, Opera, Chrome, FF 15+, Saf 7+\n   * };\n   *\n   * var transEndEventName = transEndEventNames[ Modernizr.prefixed('transition') ];\n   * ```\n   *\n   * If you want a similar lookup, but in kebab-case, you can use [prefixedCSS](#modernizr-prefixedcss).\n   */\n\n  var prefixed = ModernizrProto.prefixed = function(prop, obj, elem) {\n    if (prop.indexOf('@') === 0) {\n      return atRule(prop);\n    }\n\n    if (prop.indexOf('-') != -1) {\n      // Convert kebab-case to camelCase\n      prop = cssToDOM(prop);\n    }\n    if (!obj) {\n      return testPropsAll(prop, 'pfx');\n    } else {\n      // Testing DOM property e.g. Modernizr.prefixed('requestAnimationFrame', window) // 'mozRequestAnimationFrame'\n      return testPropsAll(prop, obj, elem);\n    }\n  };\n\n  \n\n  /**\n   * prefixedCSS is just like [prefixed](#modernizr-prefixed), but the returned values are in\n   * kebab-case (e.g. `box-sizing`) rather than camelCase (boxSizing).\n   *\n   * @memberof Modernizr\n   * @name Modernizr.prefixedCSS\n   * @optionName Modernizr.prefixedCSS()\n   * @optionProp prefixedCSS\n   * @access public\n   * @function prefixedCSS\n   * @param {string} prop - String name of the property to test for\n   * @returns {string|false} The string representing the (possibly prefixed)\n   * valid version of the property, or `false` when it is unsupported.\n   * @example\n   *\n   * `Modernizr.prefixedCSS` is like `Modernizr.prefixed`, but returns the result\n   * in hyphenated form\n   *\n   * ```js\n   * Modernizr.prefixedCSS('transition') // '-moz-transition' in old Firefox\n   * ```\n   *\n   * Since it is only useful for CSS style properties, it can only be tested against\n   * an HTMLElement.\n   *\n   * Properties can be passed as both the DOM style camelCase or CSS style kebab-case.\n   */\n\n  var prefixedCSS = ModernizrProto.prefixedCSS = function(prop) {\n    var prefixedProp = prefixed(prop);\n    return prefixedProp && domToCSS(prefixedProp);\n  };\n  \n/*!\n{\n  \"name\": \"Canvas\",\n  \"property\": \"canvas\",\n  \"caniuse\": \"canvas\",\n  \"tags\": [\"canvas\", \"graphics\"],\n  \"polyfills\": [\"flashcanvas\", \"excanvas\", \"slcanvas\", \"fxcanvas\"]\n}\n!*/\n/* DOC\nDetects support for the `<canvas>` element for 2D drawing.\n*/\n\n  // On the S60 and BB Storm, getContext exists, but always returns undefined\n  // so we actually have to call getContext() to verify\n  // github.com/Modernizr/Modernizr/issues/issue/97/\n  Modernizr.addTest('canvas', function() {\n    var elem = createElement('canvas');\n    return !!(elem.getContext && elem.getContext('2d'));\n  });\n\n/*!\n{\n  \"name\": \"canvas blending support\",\n  \"property\": \"canvasblending\",\n  \"tags\": [\"canvas\"],\n  \"async\" : false,\n  \"notes\": [{\n      \"name\": \"HTML5 Spec\",\n      \"href\": \"https://dvcs.w3.org/hg/FXTF/rawfile/tip/compositing/index.html#blending\"\n    },\n    {\n      \"name\": \"Article\",\n      \"href\": \"https://blogs.adobe.com/webplatform/2013/01/28/blending-features-in-canvas\"\n    }]\n}\n!*/\n/* DOC\nDetects if Photoshop style blending modes are available in canvas.\n*/\n\n\n  Modernizr.addTest('canvasblending', function() {\n    if (Modernizr.canvas === false) {\n      return false;\n    }\n    var ctx = createElement('canvas').getContext('2d');\n    // firefox 3 throws an error when setting an invalid `globalCompositeOperation`\n    try {\n      ctx.globalCompositeOperation = 'screen';\n    } catch (e) {}\n\n    return ctx.globalCompositeOperation === 'screen';\n  });\n\n\n/*!\n{\n  \"name\": \"canvas.toDataURL type support\",\n  \"property\": [\"todataurljpeg\", \"todataurlpng\", \"todataurlwebp\"],\n  \"tags\": [\"canvas\"],\n  \"builderAliases\": [\"canvas_todataurl_type\"],\n  \"async\" : false,\n  \"notes\": [{\n    \"name\": \"MDN article\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement.toDataURL\"\n  }]\n}\n!*/\n\n\n  var canvas = createElement('canvas');\n\n  Modernizr.addTest('todataurljpeg', function() {\n    return !!Modernizr.canvas && canvas.toDataURL('image/jpeg').indexOf('data:image/jpeg') === 0;\n  });\n  Modernizr.addTest('todataurlpng', function() {\n    return !!Modernizr.canvas && canvas.toDataURL('image/png').indexOf('data:image/png') === 0;\n  });\n  Modernizr.addTest('todataurlwebp', function() {\n    var supports = false;\n\n    // firefox 3 throws an error when you use an \"invalid\" toDataUrl\n    try {\n      supports = !!Modernizr.canvas && canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0;\n    } catch (e) {}\n\n    return supports;\n  });\n\n\n/*!\n{\n  \"name\": \"canvas winding support\",\n  \"property\": [\"canvaswinding\"],\n  \"tags\": [\"canvas\"],\n  \"async\" : false,\n  \"notes\": [{\n    \"name\": \"Article\",\n    \"href\": \"https://blogs.adobe.com/webplatform/2013/01/30/winding-rules-in-canvas/\"\n  }]\n}\n!*/\n/* DOC\nDetermines if winding rules, which controls if a path can go clockwise or counterclockwise\n*/\n\n\n  Modernizr.addTest('canvaswinding', function() {\n    if (Modernizr.canvas === false) {\n      return false;\n    }\n    var ctx = createElement('canvas').getContext('2d');\n\n    ctx.rect(0, 0, 10, 10);\n    ctx.rect(2, 2, 6, 6);\n    return ctx.isPointInPath(5, 5, 'evenodd') === false;\n  });\n\n\n/*!\n{\n  \"name\": \"Canvas text\",\n  \"property\": \"canvastext\",\n  \"caniuse\": \"canvas-text\",\n  \"tags\": [\"canvas\", \"graphics\"],\n  \"polyfills\": [\"canvastext\"]\n}\n!*/\n/* DOC\nDetects support for the text APIs for `<canvas>` elements.\n*/\n\n  Modernizr.addTest('canvastext',  function() {\n    if (Modernizr.canvas  === false) {\n      return false;\n    }\n    return typeof createElement('canvas').getContext('2d').fillText == 'function';\n  });\n\n\n  /**\n   * testAllProps determines whether a given CSS property is supported in the browser\n   *\n   * @memberof Modernizr\n   * @name Modernizr.testAllProps\n   * @optionName Modernizr.testAllProps()\n   * @optionProp testAllProps\n   * @access public\n   * @function testAllProps\n   * @param {string} prop - String naming the property to test (either camelCase or kebab-case)\n   * @param {string} [value] - String of the value to test\n   * @param {boolean} [skipValueTest=false] - Whether to skip testing that the value is supported when using non-native detection\n   * @example\n   *\n   * testAllProps determines whether a given CSS property, in some prefixed form,\n   * is supported by the browser.\n   *\n   * ```js\n   * testAllProps('boxSizing')  // true\n   * ```\n   *\n   * It can optionally be given a CSS value in string form to test if a property\n   * value is valid\n   *\n   * ```js\n   * testAllProps('display', 'block') // true\n   * testAllProps('display', 'penguin') // false\n   * ```\n   *\n   * A boolean can be passed as a third parameter to skip the value check when\n   * native detection (@supports) isn't available.\n   *\n   * ```js\n   * testAllProps('shapeOutside', 'content-box', true);\n   * ```\n   */\n\n  function testAllProps(prop, value, skipValueTest) {\n    return testPropsAll(prop, undefined, undefined, value, skipValueTest);\n  }\n  ModernizrProto.testAllProps = testAllProps;\n  \n/*!\n{\n  \"name\": \"CSS Animations\",\n  \"property\": \"cssanimations\",\n  \"caniuse\": \"css-animation\",\n  \"polyfills\": [\"transformie\", \"csssandpaper\"],\n  \"tags\": [\"css\"],\n  \"warnings\": [\"Android < 4 will pass this test, but can only animate a single property at a time\"],\n  \"notes\": [{\n    \"name\" : \"Article: 'Dispelling the Android CSS animation myths'\",\n    \"href\": \"https://goo.gl/OGw5Gm\"\n  }]\n}\n!*/\n/* DOC\nDetects whether or not elements can be animated using CSS\n*/\n\n  Modernizr.addTest('cssanimations', testAllProps('animationName', 'a', true));\n\n/*!\n{\n  \"name\": \"CSS Background Blend Mode\",\n  \"property\": \"backgroundblendmode\",\n  \"caniuse\": \"css-backgroundblendmode\",\n  \"tags\": [\"css\"],\n  \"notes\": [\n    {\n      \"name\": \"CSS Blend Modes could be the next big thing in Web Design\",\n      \"href\": \" https://medium.com/@bennettfeely/css-blend-modes-could-be-the-next-big-thing-in-web-design-6b51bf53743a\"\n    }, {\n      \"name\": \"Demo\",\n      \"href\": \"http://bennettfeely.com/gradients/\"\n    }\n  ]\n}\n!*/\n/* DOC\nDetects the ability for the browser to composite backgrounds using blending modes similar to ones found in Photoshop or Illustrator.\n*/\n\n  Modernizr.addTest('backgroundblendmode', prefixed('backgroundBlendMode', 'text'));\n\n/*!\n{\n  \"name\": \"CSS Background Clip Text\",\n  \"property\": \"backgroundcliptext\",\n  \"authors\": [\"ausi\"],\n  \"tags\": [\"css\"],\n  \"notes\": [\n    {\n      \"name\": \"CSS Tricks Article\",\n      \"href\": \"https://css-tricks.com/image-under-text/\"\n    },\n    {\n      \"name\": \"MDN Docs\",\n      \"href\": \"https://developer.mozilla.org/en-US/docs/Web/CSS/background-clip\"\n    },\n    {\n      \"name\": \"Related Github Issue\",\n      \"href\": \"https://github.com/Modernizr/Modernizr/issues/199\"\n    }\n  ]\n}\n!*/\n/* DOC\nDetects the ability to control specifies whether or not an element's background\nextends beyond its border in CSS\n*/\n\n  Modernizr.addTest('backgroundcliptext', function() {\n    return testAllProps('backgroundClip', 'text');\n  });\n\n/*!\n{\n  \"name\": \"Background Position Shorthand\",\n  \"property\": \"bgpositionshorthand\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_backgroundposition_shorthand\"],\n  \"notes\": [{\n    \"name\": \"MDN Docs\",\n    \"href\": \"https://developer.mozilla.org/en/CSS/background-position\"\n  }, {\n    \"name\": \"W3 Spec\",\n    \"href\": \"https://www.w3.org/TR/css3-background/#background-position\"\n  }, {\n    \"name\": \"Demo\",\n    \"href\": \"https://jsfiddle.net/Blink/bBXvt/\"\n  }]\n}\n!*/\n/* DOC\nDetects if you can use the shorthand method to define multiple parts of an\nelement's background-position simultaniously.\n\neg `background-position: right 10px bottom 10px`\n*/\n\n  Modernizr.addTest('bgpositionshorthand', function() {\n    var elem = createElement('a');\n    var eStyle = elem.style;\n    var val = 'right 10px bottom 10px';\n    eStyle.cssText = 'background-position: ' + val + ';';\n    return (eStyle.backgroundPosition === val);\n  });\n\n/*!\n{\n  \"name\": \"Background Position XY\",\n  \"property\": \"bgpositionxy\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_backgroundposition_xy\"],\n  \"authors\": [\"Allan Lei\", \"Brandom Aaron\"],\n  \"notes\": [{\n    \"name\": \"Demo\",\n    \"href\": \"https://jsfiddle.net/allanlei/R8AYS/\"\n  }, {\n    \"name\": \"Adapted From\",\n    \"href\": \"https://github.com/brandonaaron/jquery-cssHooks/blob/master/bgpos.js\"\n  }]\n}\n!*/\n/* DOC\nDetects the ability to control an element's background position using css\n*/\n\n  Modernizr.addTest('bgpositionxy', function() {\n    return testAllProps('backgroundPositionX', '3px', true) && testAllProps('backgroundPositionY', '5px', true);\n  });\n\n/*!\n{\n  \"name\": \"Background Repeat\",\n  \"property\": [\"bgrepeatspace\", \"bgrepeatround\"],\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_backgroundrepeat\"],\n  \"authors\": [\"Ryan Seddon\"],\n  \"notes\": [{\n    \"name\": \"MDN Docs\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/CSS/background-repeat\"\n  }, {\n    \"name\": \"Test Page\",\n    \"href\": \"https://jsbin.com/uzesun/\"\n  }, {\n    \"name\": \"Demo\",\n    \"href\": \"https://jsfiddle.net/ryanseddon/yMLTQ/6/\"\n  }]\n}\n!*/\n/* DOC\nDetects the ability to use round and space as properties for background-repeat\n*/\n\n  // Must value-test these\n  Modernizr.addTest('bgrepeatround', testAllProps('backgroundRepeat', 'round'));\n  Modernizr.addTest('bgrepeatspace', testAllProps('backgroundRepeat', 'space'));\n\n/*!\n{\n  \"name\": \"Background Size\",\n  \"property\": \"backgroundsize\",\n  \"tags\": [\"css\"],\n  \"knownBugs\": [\"This will false positive in Opera Mini - https://github.com/Modernizr/Modernizr/issues/396\"],\n  \"notes\": [{\n    \"name\": \"Related Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/issues/396\"\n  }]\n}\n!*/\n\n  Modernizr.addTest('backgroundsize', testAllProps('backgroundSize', '100%', true));\n\n/*!\n{\n  \"name\": \"Background Size Cover\",\n  \"property\": \"bgsizecover\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_backgroundsizecover\"],\n  \"notes\": [{\n    \"name\" : \"MDN Docs\",\n    \"href\": \"https://developer.mozilla.org/en/CSS/background-size\"\n  }]\n}\n!*/\n\n  // Must test value, as this specifically tests the `cover` value\n  Modernizr.addTest('bgsizecover', testAllProps('backgroundSize', 'cover'));\n\n/*!\n{\n  \"name\": \"Border Radius\",\n  \"property\": \"borderradius\",\n  \"caniuse\": \"border-radius\",\n  \"polyfills\": [\"css3pie\"],\n  \"tags\": [\"css\"],\n  \"notes\": [{\n    \"name\": \"Comprehensive Compat Chart\",\n    \"href\": \"https://muddledramblings.com/table-of-css3-border-radius-compliance\"\n  }]\n}\n!*/\n\n  Modernizr.addTest('borderradius', testAllProps('borderRadius', '0px', true));\n\n/*!\n{\n  \"name\": \"Box Shadow\",\n  \"property\": \"boxshadow\",\n  \"caniuse\": \"css-boxshadow\",\n  \"tags\": [\"css\"],\n  \"knownBugs\": [\n    \"WebOS false positives on this test.\",\n    \"The Kindle Silk browser false positives\"\n  ]\n}\n!*/\n\n  Modernizr.addTest('boxshadow', testAllProps('boxShadow', '1px 1px', true));\n\n/*!\n{\n  \"name\": \"Box Sizing\",\n  \"property\": \"boxsizing\",\n  \"caniuse\": \"css3-boxsizing\",\n  \"polyfills\": [\"borderboxmodel\", \"boxsizingpolyfill\", \"borderbox\"],\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_boxsizing\"],\n  \"notes\": [{\n    \"name\": \"MDN Docs\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing\"\n  },{\n    \"name\": \"Related Github Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/issues/248\"\n  }]\n}\n!*/\n\n  Modernizr.addTest('boxsizing', testAllProps('boxSizing', 'border-box', true) && (document.documentMode === undefined || document.documentMode > 7));\n\n\n  /**\n   * List of property values to set for css tests. See ticket #21\n   * http://git.io/vUGl4\n   *\n   * @memberof Modernizr\n   * @name Modernizr._prefixes\n   * @optionName Modernizr._prefixes\n   * @optionProp prefixes\n   * @access public\n   * @example\n   *\n   * Modernizr._prefixes is the internal list of prefixes that we test against\n   * inside of things like [prefixed](#modernizr-prefixed) and [prefixedCSS](#-code-modernizr-prefixedcss). It is simply\n   * an array of kebab-case vendor prefixes you can use within your code.\n   *\n   * Some common use cases include\n   *\n   * Generating all possible prefixed version of a CSS property\n   * ```js\n   * var rule = Modernizr._prefixes.join('transform: rotate(20deg); ');\n   *\n   * rule === 'transform: rotate(20deg); webkit-transform: rotate(20deg); moz-transform: rotate(20deg); o-transform: rotate(20deg); ms-transform: rotate(20deg);'\n   * ```\n   *\n   * Generating all possible prefixed version of a CSS value\n   * ```js\n   * rule = 'display:' +  Modernizr._prefixes.join('flex; display:') + 'flex';\n   *\n   * rule === 'display:flex; display:-webkit-flex; display:-moz-flex; display:-o-flex; display:-ms-flex; display:flex'\n   * ```\n   */\n\n  // we use ['',''] rather than an empty array in order to allow a pattern of .`join()`ing prefixes to test\n  // values in feature detects to continue to work\n  var prefixes = (ModernizrProto._config.usePrefixes ? ' -webkit- -moz- -o- -ms- '.split(' ') : ['','']);\n\n  // expose these for the plugin API. Look in the source for how to join() them against your input\n  ModernizrProto._prefixes = prefixes;\n\n  \n/*!\n{\n  \"name\": \"CSS Calc\",\n  \"property\": \"csscalc\",\n  \"caniuse\": \"calc\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_calc\"],\n  \"authors\": [\"@calvein\"]\n}\n!*/\n/* DOC\nMethod of allowing calculated values for length units. For example:\n\n```css\n//lem {\n  width: calc(100% - 3em);\n}\n```\n*/\n\n  Modernizr.addTest('csscalc', function() {\n    var prop = 'width:';\n    var value = 'calc(10px);';\n    var el = createElement('a');\n\n    el.style.cssText = prop + prefixes.join(value + prop);\n\n    return !!el.style.length;\n  });\n\n/*!\n{\n  \"name\": \"CSS Font ch Units\",\n  \"authors\": [\"Ron Waldon (@jokeyrhyme)\"],\n  \"property\": \"csschunit\",\n  \"tags\": [\"css\"],\n  \"notes\": [{\n    \"name\": \"W3C Spec\",\n    \"href\": \"https://www.w3.org/TR/css3-values/#font-relative-lengths\"\n  }]\n}\n!*/\n\n  Modernizr.addTest('csschunit', function() {\n    var elemStyle = modElem.elem.style;\n    var supports;\n    try {\n      elemStyle.fontSize = '3ch';\n      supports = elemStyle.fontSize.indexOf('ch') !== -1;\n    } catch (e) {\n      supports = false;\n    }\n    return supports;\n  });\n\n/*!\n{\n  \"name\": \"CSS Cubic Bezier Range\",\n  \"property\": \"cubicbezierrange\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_cubicbezierrange\"],\n  \"doc\" : null,\n  \"authors\": [\"@calvein\"],\n  \"warnings\": [\"cubic-bezier values can't be > 1 for Webkit until [bug #45761](https://bugs.webkit.org/show_bug.cgi?id=45761) is fixed\"],\n  \"notes\": [{\n    \"name\": \"Comprehensive Compat Chart\",\n    \"href\": \"http://muddledramblings.com/table-of-css3-border-radius-compliance\"\n  }]\n}\n!*/\n\n  Modernizr.addTest('cubicbezierrange', function() {\n    var el = createElement('a');\n    el.style.cssText = prefixes.join('transition-timing-function:cubic-bezier(1,0,0,1.1); ');\n    return !!el.style.length;\n  });\n\n/*!\n{\n  \"name\": \"CSS text-overflow ellipsis\",\n  \"property\": \"ellipsis\",\n  \"caniuse\": \"text-overflow\",\n  \"polyfills\": [\n    \"text-overflow\"\n  ],\n  \"tags\": [\"css\"]\n}\n!*/\n\n  Modernizr.addTest('ellipsis', testAllProps('textOverflow', 'ellipsis'));\n\n/*!\n{\n  \"name\": \"CSS Font ex Units\",\n  \"authors\": [\"Ron Waldon (@jokeyrhyme)\"],\n  \"property\": \"cssexunit\",\n  \"tags\": [\"css\"],\n  \"notes\": [{\n    \"name\": \"W3C Spec\",\n    \"href\": \"https://www.w3.org/TR/css3-values/#font-relative-lengths\"\n  }]\n}\n!*/\n\n  Modernizr.addTest('cssexunit', function() {\n    var elemStyle = modElem.elem.style;\n    var supports;\n    try {\n      elemStyle.fontSize = '3ex';\n      supports = elemStyle.fontSize.indexOf('ex') !== -1;\n    } catch (e) {\n      supports = false;\n    }\n    return supports;\n  });\n\n/*!\n{\n  \"name\": \"Flexbox\",\n  \"property\": \"flexbox\",\n  \"caniuse\": \"flexbox\",\n  \"tags\": [\"css\"],\n  \"notes\": [{\n    \"name\": \"The _new_ flexbox\",\n    \"href\": \"http://dev.w3.org/csswg/css3-flexbox\"\n  }],\n  \"warnings\": [\n    \"A `true` result for this detect does not imply that the `flex-wrap` property is supported; see the `flexwrap` detect.\"\n  ]\n}\n!*/\n/* DOC\nDetects support for the Flexible Box Layout model, a.k.a. Flexbox, which allows easy manipulation of layout order and sizing within a container.\n*/\n\n  Modernizr.addTest('flexbox', testAllProps('flexBasis', '1px', true));\n\n/*!\n{\n  \"name\": \"Flex Line Wrapping\",\n  \"property\": \"flexwrap\",\n  \"tags\": [\"css\", \"flexbox\"],\n  \"notes\": [{\n    \"name\": \"W3C Flexible Box Layout spec\",\n    \"href\": \"http://dev.w3.org/csswg/css3-flexbox\"\n  }],\n  \"warnings\": [\n    \"Does not imply a modern implementation – see documentation.\"\n  ]\n}\n!*/\n/* DOC\nDetects support for the `flex-wrap` CSS property, part of Flexbox, which isn’t present in all Flexbox implementations (notably Firefox).\n\nThis featured in both the 'tweener' syntax (implemented by IE10) and the 'modern' syntax (implemented by others). This detect will return `true` for either of these implementations, as long as the `flex-wrap` property is supported. So to ensure the modern syntax is supported, use together with `Modernizr.flexbox`:\n\n```javascript\nif (Modernizr.flexbox && Modernizr.flexwrap) {\n  // Modern Flexbox with `flex-wrap` supported\n}\nelse {\n  // Either old Flexbox syntax, or `flex-wrap` not supported\n}\n```\n*/\n\n  Modernizr.addTest('flexwrap', testAllProps('flexWrap', 'wrap', true));\n\n\n  /**\n   * testStyles injects an element with style element and some CSS rules\n   *\n   * @memberof Modernizr\n   * @name Modernizr.testStyles\n   * @optionName Modernizr.testStyles()\n   * @optionProp testStyles\n   * @access public\n   * @function testStyles\n   * @param {string} rule - String representing a css rule\n   * @param {function} callback - A function that is used to test the injected element\n   * @param {number} [nodes] - An integer representing the number of additional nodes you want injected\n   * @param {string[]} [testnames] - An array of strings that are used as ids for the additional nodes\n   * @returns {boolean}\n   * @example\n   *\n   * `Modernizr.testStyles` takes a CSS rule and injects it onto the current page\n   * along with (possibly multiple) DOM elements. This lets you check for features\n   * that can not be detected by simply checking the [IDL](https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Interface_development_guide/IDL_interface_rules).\n   *\n   * ```js\n   * Modernizr.testStyles('#modernizr { width: 9px; color: papayawhip; }', function(elem, rule) {\n   *   // elem is the first DOM node in the page (by default #modernizr)\n   *   // rule is the first argument you supplied - the CSS rule in string form\n   *\n   *   addTest('widthworks', elem.style.width === '9px')\n   * });\n   * ```\n   *\n   * If your test requires multiple nodes, you can include a third argument\n   * indicating how many additional div elements to include on the page. The\n   * additional nodes are injected as children of the `elem` that is returned as\n   * the first argument to the callback.\n   *\n   * ```js\n   * Modernizr.testStyles('#modernizr {width: 1px}; #modernizr2 {width: 2px}', function(elem) {\n   *   document.getElementById('modernizr').style.width === '1px'; // true\n   *   document.getElementById('modernizr2').style.width === '2px'; // true\n   *   elem.firstChild === document.getElementById('modernizr2'); // true\n   * }, 1);\n   * ```\n   *\n   * By default, all of the additional elements have an ID of `modernizr[n]`, where\n   * `n` is its index (e.g. the first additional, second overall is `#modernizr2`,\n   * the second additional is `#modernizr3`, etc.).\n   * If you want to have more meaningful IDs for your function, you can provide\n   * them as the fourth argument, as an array of strings\n   *\n   * ```js\n   * Modernizr.testStyles('#foo {width: 10px}; #bar {height: 20px}', function(elem) {\n   *   elem.firstChild === document.getElementById('foo'); // true\n   *   elem.lastChild === document.getElementById('bar'); // true\n   * }, 2, ['foo', 'bar']);\n   * ```\n   *\n   */\n\n  var testStyles = ModernizrProto.testStyles = injectElementWithStyles;\n  \n/*!\n{\n  \"name\": \"@font-face\",\n  \"property\": \"fontface\",\n  \"authors\": [\"Diego Perini\", \"Mat Marquis\"],\n  \"tags\": [\"css\"],\n  \"knownBugs\": [\n    \"False Positive: WebOS https://github.com/Modernizr/Modernizr/issues/342\",\n    \"False Postive: WP7 https://github.com/Modernizr/Modernizr/issues/538\"\n  ],\n  \"notes\": [{\n    \"name\": \"@font-face detection routine by Diego Perini\",\n    \"href\": \"http://javascript.nwbox.com/CSSSupport/\"\n  },{\n    \"name\": \"Filament Group @font-face compatibility research\",\n    \"href\": \"https://docs.google.com/presentation/d/1n4NyG4uPRjAA8zn_pSQ_Ket0RhcWC6QlZ6LMjKeECo0/edit#slide=id.p\"\n  },{\n    \"name\": \"Filament Grunticon/@font-face device testing results\",\n    \"href\": \"https://docs.google.com/spreadsheet/ccc?key=0Ag5_yGvxpINRdHFYeUJPNnZMWUZKR2ItMEpRTXZPdUE#gid=0\"\n  },{\n    \"name\": \"CSS fonts on Android\",\n    \"href\": \"https://stackoverflow.com/questions/3200069/css-fonts-on-android\"\n  },{\n    \"name\": \"@font-face and Android\",\n    \"href\": \"http://archivist.incutio.com/viewlist/css-discuss/115960\"\n  }]\n}\n!*/\n\n  var blacklist = (function() {\n    var ua = navigator.userAgent;\n    var webos = ua.match(/w(eb)?osbrowser/gi);\n    var wppre8 = ua.match(/windows phone/gi) && ua.match(/iemobile\\/([0-9])+/gi) && parseFloat(RegExp.$1) >= 9;\n    return webos || wppre8;\n  }());\n  if (blacklist) {\n    Modernizr.addTest('fontface', false);\n  } else {\n    testStyles('@font-face {font-family:\"font\";src:url(\"https://\")}', function(node, rule) {\n      var style = document.getElementById('smodernizr');\n      var sheet = style.sheet || style.styleSheet;\n      var cssText = sheet ? (sheet.cssRules && sheet.cssRules[0] ? sheet.cssRules[0].cssText : sheet.cssText || '') : '';\n      var bool = /src/i.test(cssText) && cssText.indexOf(rule.split(' ')[0]) === 0;\n      Modernizr.addTest('fontface', bool);\n    });\n  }\n;\n/*!\n{\n  \"name\": \"CSS Generated Content\",\n  \"property\": \"generatedcontent\",\n  \"tags\": [\"css\"],\n  \"warnings\": [\"Android won't return correct height for anything below 7px #738\"],\n  \"notes\": [{\n    \"name\": \"W3C CSS Selectors Level 3 spec\",\n    \"href\": \"https://www.w3.org/TR/css3-selectors/#gen-content\"\n  },{\n    \"name\": \"MDN article on :before\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/CSS/::before\"\n  },{\n    \"name\": \"MDN article on :after\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/CSS/::before\"\n  }]\n}\n!*/\n\n  testStyles('#modernizr{font:0/0 a}#modernizr:after{content:\":)\";visibility:hidden;font:7px/1 a}', function(node) {\n    // See bug report on why this value is 6 crbug.com/608142\n    Modernizr.addTest('generatedcontent', node.offsetHeight >= 6);\n  });\n\n/*!\n{\n  \"name\": \"CSS Gradients\",\n  \"caniuse\": \"css-gradients\",\n  \"property\": \"cssgradients\",\n  \"tags\": [\"css\"],\n  \"knownBugs\": [\"False-positives on webOS (https://github.com/Modernizr/Modernizr/issues/202)\"],\n  \"notes\": [{\n    \"name\": \"Webkit Gradient Syntax\",\n    \"href\": \"https://webkit.org/blog/175/introducing-css-gradients/\"\n  },{\n    \"name\": \"Linear Gradient Syntax\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient\"\n  },{\n    \"name\": \"W3C Gradient Spec\",\n    \"href\": \"https://drafts.csswg.org/css-images-3/#gradients\"\n  }]\n}\n!*/\n\n\n  Modernizr.addTest('cssgradients', function() {\n\n    var str1 = 'background-image:';\n    var str2 = 'gradient(linear,left top,right bottom,from(#9f9),to(white));';\n    var css = '';\n    var angle;\n\n    for (var i = 0, len = prefixes.length - 1; i < len; i++) {\n      angle = (i === 0 ? 'to ' : '');\n      css += str1 + prefixes[i] + 'linear-gradient(' + angle + 'left top, #9f9, white);';\n    }\n\n    if (Modernizr._config.usePrefixes) {\n    // legacy webkit syntax (FIXME: remove when syntax not in use anymore)\n      css += str1 + '-webkit-' + str2;\n    }\n\n    var elem = createElement('a');\n    var style = elem.style;\n    style.cssText = css;\n\n    // IE6 returns undefined so cast to string\n    return ('' + style.backgroundImage).indexOf('gradient') > -1;\n  });\n\n/*!\n{\n  \"name\": \"CSS HSLA Colors\",\n  \"caniuse\": \"css3-colors\",\n  \"property\": \"hsla\",\n  \"tags\": [\"css\"]\n}\n!*/\n\n  Modernizr.addTest('hsla', function() {\n    var style = createElement('a').style;\n    style.cssText = 'background-color:hsla(120,40%,100%,.5)';\n    return contains(style.backgroundColor, 'rgba') || contains(style.backgroundColor, 'hsla');\n  });\n\n/*!\n{\n  \"name\": \"CSS :last-child pseudo-selector\",\n  \"caniuse\": \"css-sel3\",\n  \"property\": \"lastchild\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_lastchild\"],\n  \"notes\": [{\n    \"name\": \"Related Github Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/pull/304\"\n  }]\n}\n!*/\n\n  testStyles('#modernizr div {width:100px} #modernizr :last-child{width:200px;display:block}', function(elem) {\n    Modernizr.addTest('lastchild', elem.lastChild.offsetWidth > elem.firstChild.offsetWidth);\n  }, 2);\n\n/*!\n{\n  \"name\": \"CSS Media Queries\",\n  \"caniuse\": \"css-mediaqueries\",\n  \"property\": \"mediaqueries\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_mediaqueries\"]\n}\n!*/\n\n  Modernizr.addTest('mediaqueries', mq('only all'));\n\n/*!\n{\n  \"name\": \"CSS Multiple Backgrounds\",\n  \"caniuse\": \"multibackgrounds\",\n  \"property\": \"multiplebgs\",\n  \"tags\": [\"css\"]\n}\n!*/\n\n  // Setting multiple images AND a color on the background shorthand property\n  // and then querying the style.background property value for the number of\n  // occurrences of \"url(\" is a reliable method for detecting ACTUAL support for this!\n\n  Modernizr.addTest('multiplebgs', function() {\n    var style = createElement('a').style;\n    style.cssText = 'background:url(https://),url(https://),red url(https://)';\n\n    // If the UA supports multiple backgrounds, there should be three occurrences\n    // of the string \"url(\" in the return value for elemStyle.background\n    return (/(url\\s*\\(.*?){3}/).test(style.background);\n  });\n\n/*!\n{\n  \"name\": \"CSS :nth-child pseudo-selector\",\n  \"caniuse\": \"css-sel3\",\n  \"property\": \"nthchild\",\n  \"tags\": [\"css\"],\n  \"notes\": [\n    {\n      \"name\": \"Related Github Issue\",\n      \"href\": \"https://github.com/Modernizr/Modernizr/pull/685\"\n    },\n    {\n      \"name\": \"Sitepoint :nth-child documentation\",\n      \"href\": \"http://reference.sitepoint.com/css/pseudoclass-nthchild\"\n    }\n  ],\n  \"authors\": [\"@emilchristensen\"],\n  \"warnings\": [\"Known false negative in Safari 3.1 and Safari 3.2.2\"]\n}\n!*/\n/* DOC\nDetects support for the ':nth-child()' CSS pseudo-selector.\n*/\n\n  // 5 `<div>` elements with `1px` width are created.\n  // Then every other element has its `width` set to `2px`.\n  // A Javascript loop then tests if the `<div>`s have the expected width\n  // using the modulus operator.\n  testStyles('#modernizr div {width:1px} #modernizr div:nth-child(2n) {width:2px;}', function(elem) {\n    var elems = elem.getElementsByTagName('div');\n    var correctWidths = true;\n\n    for (var i = 0; i < 5; i++) {\n      correctWidths = correctWidths && elems[i].offsetWidth === i % 2 + 1;\n    }\n    Modernizr.addTest('nthchild', correctWidths);\n  }, 5);\n\n/*!\n{\n  \"name\": \"CSS Object Fit\",\n  \"caniuse\": \"object-fit\",\n  \"property\": \"objectfit\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_objectfit\"],\n  \"notes\": [{\n    \"name\": \"Opera Article on Object Fit\",\n    \"href\": \"https://dev.opera.com/articles/css3-object-fit-object-position/\"\n  }]\n}\n!*/\n\n  Modernizr.addTest('objectfit', !!prefixed('objectFit'), {aliases: ['object-fit']});\n\n/*!\n{\n  \"name\": \"CSS Opacity\",\n  \"caniuse\": \"css-opacity\",\n  \"property\": \"opacity\",\n  \"tags\": [\"css\"]\n}\n!*/\n\n  // Browsers that actually have CSS Opacity implemented have done so\n  // according to spec, which means their return values are within the\n  // range of [0.0,1.0] - including the leading zero.\n\n  Modernizr.addTest('opacity', function() {\n    var style = createElement('a').style;\n    style.cssText = prefixes.join('opacity:.55;');\n\n    // The non-literal . in this regex is intentional:\n    // German Chrome returns this value as 0,55\n    // github.com/Modernizr/Modernizr/issues/#issue/59/comment/516632\n    return (/^0.55$/).test(style.opacity);\n  });\n\n/*!\n{\n  \"name\": \"CSS Pointer Events\",\n  \"caniuse\": \"pointer-events\",\n  \"property\": \"csspointerevents\",\n  \"authors\": [\"ausi\"],\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_pointerevents\"],\n  \"notes\": [\n    {\n      \"name\": \"MDN Docs\",\n      \"href\": \"https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events\"\n    },{\n      \"name\": \"Test Project Page\",\n      \"href\": \"https://ausi.github.com/Feature-detection-technique-for-pointer-events/\"\n    },{\n      \"name\": \"Test Project Wiki\",\n      \"href\": \"https://github.com/ausi/Feature-detection-technique-for-pointer-events/wiki\"\n    },\n    {\n      \"name\": \"Related Github Issue\",\n      \"href\": \"https://github.com/Modernizr/Modernizr/issues/80\"\n    }\n  ]\n}\n!*/\n\n  Modernizr.addTest('csspointerevents', function() {\n    var style = createElement('a').style;\n    style.cssText = 'pointer-events:auto';\n    return style.pointerEvents === 'auto';\n  });\n\n/*!\n{\n  \"name\": \"CSS position: sticky\",\n  \"property\": \"csspositionsticky\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_positionsticky\"],\n  \"notes\": [{\n    \"name\": \"Chrome bug report\",\n    \"href\":\"https://code.google.com/p/chromium/issues/detail?id=322972\"\n  }],\n  \"warnings\": [ \"using position:sticky on anything but top aligned elements is buggy in Chrome < 37 and iOS <=7+\" ]\n}\n!*/\n\n  // Sticky positioning - constrains an element to be positioned inside the\n  // intersection of its container box, and the viewport.\n  Modernizr.addTest('csspositionsticky', function() {\n    var prop = 'position:';\n    var value = 'sticky';\n    var el = createElement('a');\n    var mStyle = el.style;\n\n    mStyle.cssText = prop + prefixes.join(value + ';' + prop).slice(0, -prop.length);\n\n    return mStyle.position.indexOf(value) !== -1;\n  });\n\n/*!\n{\n  \"name\": \"CSS Generated Content Animations\",\n  \"property\": \"csspseudoanimations\",\n  \"tags\": [\"css\"]\n}\n!*/\n\n  Modernizr.addTest('csspseudoanimations', function() {\n    var result = false;\n\n    if (!Modernizr.cssanimations || !window.getComputedStyle) {\n      return result;\n    }\n\n    var styles = [\n      '@', Modernizr._prefixes.join('keyframes csspseudoanimations { from { font-size: 10px; } }@').replace(/\\@$/, ''),\n      '#modernizr:before { content:\" \"; font-size:5px;',\n      Modernizr._prefixes.join('animation:csspseudoanimations 1ms infinite;'),\n      '}'\n    ].join('');\n\n    Modernizr.testStyles(styles, function(elem) {\n      result = window.getComputedStyle(elem, ':before').getPropertyValue('font-size') === '10px';\n    });\n\n    return result;\n  });\n\n/*!\n{\n  \"name\": \"CSS Transitions\",\n  \"property\": \"csstransitions\",\n  \"caniuse\": \"css-transitions\",\n  \"tags\": [\"css\"]\n}\n!*/\n\n  Modernizr.addTest('csstransitions', testAllProps('transition', 'all', true));\n\n/*!\n{\n  \"name\": \"CSS Generated Content Transitions\",\n  \"property\": \"csspseudotransitions\",\n  \"tags\": [\"css\"]\n}\n!*/\n\n  Modernizr.addTest('csspseudotransitions', function() {\n    var result = false;\n\n    if (!Modernizr.csstransitions || !window.getComputedStyle) {\n      return result;\n    }\n\n    var styles =\n      '#modernizr:before { content:\" \"; font-size:5px;' + Modernizr._prefixes.join('transition:0s 100s;') + '}' +\n      '#modernizr.trigger:before { font-size:10px; }';\n\n    Modernizr.testStyles(styles, function(elem) {\n      // Force rendering of the element's styles so that the transition will trigger\n      window.getComputedStyle(elem, ':before').getPropertyValue('font-size');\n      elem.className += 'trigger';\n      result = window.getComputedStyle(elem, ':before').getPropertyValue('font-size') === '5px';\n    });\n\n    return result;\n  });\n\n/*!\n{\n  \"name\": \"CSS Font rem Units\",\n  \"caniuse\": \"rem\",\n  \"authors\": [\"nsfmc\"],\n  \"property\": \"cssremunit\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_remunit\"],\n  \"notes\": [{\n    \"name\": \"W3C Spec\",\n    \"href\": \"https://www.w3.org/TR/css3-values/#relative0\"\n  },{\n    \"name\": \"Font Size with rem by Jonathan Snook\",\n    \"href\": \"http://snook.ca/archives/html_and_css/font-size-with-rem\"\n  }]\n}\n!*/\n\n  // \"The 'rem' unit ('root em') is relative to the computed\n  // value of the 'font-size' value of the root element.\"\n  // you can test by checking if the prop was ditched\n\n  Modernizr.addTest('cssremunit', function() {\n    var style = createElement('a').style;\n    try {\n      style.fontSize = '3rem';\n    }\n    catch (e) {}\n    return (/rem/).test(style.fontSize);\n  });\n\n/*!\n{\n  \"name\": \"CSS UI Resize\",\n  \"property\": \"cssresize\",\n  \"caniuse\": \"css-resize\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_resize\"],\n  \"notes\": [{\n    \"name\": \"W3C Specification\",\n    \"href\": \"https://www.w3.org/TR/css3-ui/#resize\"\n  },{\n    \"name\": \"MDN Docs\",\n    \"href\": \"https://developer.mozilla.org/en/CSS/resize\"\n  }]\n}\n!*/\n/* DOC\nTest for CSS 3 UI \"resize\" property\n*/\n\n  Modernizr.addTest('cssresize', testAllProps('resize', 'both', true));\n\n/*!\n{\n  \"name\": \"CSS rgba\",\n  \"caniuse\": \"css3-colors\",\n  \"property\": \"rgba\",\n  \"tags\": [\"css\"],\n  \"notes\": [{\n    \"name\": \"CSSTricks Tutorial\",\n    \"href\": \"https://css-tricks.com/rgba-browser-support/\"\n  }]\n}\n!*/\n\n  Modernizr.addTest('rgba', function() {\n    var style = createElement('a').style;\n    style.cssText = 'background-color:rgba(150,255,150,.5)';\n\n    return ('' + style.backgroundColor).indexOf('rgba') > -1;\n  });\n\n/*!\n{\n  \"name\": \"CSS general sibling selector\",\n  \"caniuse\": \"css-sel3\",\n  \"property\": \"siblinggeneral\",\n  \"tags\": [\"css\"],\n  \"notes\": [{\n    \"name\": \"Related Github Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/pull/889\"\n  }]\n}\n!*/\n\n  Modernizr.addTest('siblinggeneral', function() {\n    return testStyles('#modernizr div {width:100px} #modernizr div ~ div {width:200px;display:block}', function(elem) {\n      return elem.lastChild.offsetWidth == 200;\n    }, 2);\n  });\n\n/*!\n{\n  \"name\": \"CSS Subpixel Fonts\",\n  \"property\": \"subpixelfont\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_subpixelfont\"],\n  \"authors\": [\n    \"@derSchepp\",\n    \"@gerritvanaaken\",\n    \"@rodneyrehm\",\n    \"@yatil\",\n    \"@ryanseddon\"\n  ],\n  \"notes\": [{\n    \"name\": \"Origin Test\",\n    \"href\": \"https://github.com/gerritvanaaken/subpixeldetect\"\n  }]\n}\n!*/\n\n  /*\n   * (to infer if GDI or DirectWrite is used on Windows)\n   */\n  testStyles(\n    '#modernizr{position: absolute; top: -10em; visibility:hidden; font: normal 10px arial;}#subpixel{float: left; font-size: 33.3333%;}',\n  function(elem) {\n    var subpixel = elem.firstChild;\n    subpixel.innerHTML = 'This is a text written in Arial';\n    Modernizr.addTest('subpixelfont', window.getComputedStyle ?\n      window.getComputedStyle(subpixel, null).getPropertyValue('width') !== '44px'\n    : false);\n  }, 1, ['subpixel']);\n\n/*!\n{\n  \"name\": \"CSS Supports\",\n  \"property\": \"supports\",\n  \"caniuse\": \"css-featurequeries\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_supports\"],\n  \"notes\": [{\n    \"name\": \"W3 Spec\",\n    \"href\": \"http://dev.w3.org/csswg/css3-conditional/#at-supports\"\n  },{\n    \"name\": \"Related Github Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/issues/648\"\n  },{\n    \"name\": \"W3 Info\",\n    \"href\": \"http://dev.w3.org/csswg/css3-conditional/#the-csssupportsrule-interface\"\n  }]\n}\n!*/\n\n  var newSyntax = 'CSS' in window && 'supports' in window.CSS;\n  var oldSyntax = 'supportsCSS' in window;\n  Modernizr.addTest('supports', newSyntax || oldSyntax);\n\n/*!\n{\n  \"name\": \"CSS :target pseudo-class\",\n  \"caniuse\": \"css-sel3\",\n  \"property\": \"target\",\n  \"tags\": [\"css\"],\n  \"notes\": [{\n    \"name\": \"MDN documentation\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/CSS/:target\"\n  }],\n  \"authors\": [\"@zachleat\"],\n  \"warnings\": [\"Opera Mini supports :target but doesn't update the hash for anchor links.\"]\n}\n!*/\n/* DOC\nDetects support for the ':target' CSS pseudo-class.\n*/\n\n  // querySelector\n  Modernizr.addTest('target', function() {\n    var doc = window.document;\n    if (!('querySelectorAll' in doc)) {\n      return false;\n    }\n\n    try {\n      doc.querySelectorAll(':target');\n      return true;\n    } catch (e) {\n      return false;\n    }\n  });\n\n/*!\n{\n  \"name\": \"CSS Transforms\",\n  \"property\": \"csstransforms\",\n  \"caniuse\": \"transforms2d\",\n  \"tags\": [\"css\"]\n}\n!*/\n\n  Modernizr.addTest('csstransforms', function() {\n    // Android < 3.0 is buggy, so we sniff and blacklist\n    // http://git.io/hHzL7w\n    return navigator.userAgent.indexOf('Android 2.') === -1 &&\n           testAllProps('transform', 'scale(1)', true);\n  });\n\n/*!\n{\n  \"name\": \"CSS Transforms 3D\",\n  \"property\": \"csstransforms3d\",\n  \"caniuse\": \"transforms3d\",\n  \"tags\": [\"css\"],\n  \"warnings\": [\n    \"Chrome may occassionally fail this test on some systems; more info: https://code.google.com/p/chromium/issues/detail?id=129004\"\n  ]\n}\n!*/\n\n  Modernizr.addTest('csstransforms3d', function() {\n    return !!testAllProps('perspective', '1px', true);\n  });\n\n/*!\n{\n  \"name\": \"CSS Transform Style preserve-3d\",\n  \"property\": \"preserve3d\",\n  \"authors\": [\"denyskoch\", \"aFarkas\"],\n  \"tags\": [\"css\"],\n  \"notes\": [{\n    \"name\": \"MDN Docs\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/CSS/transform-style\"\n  },{\n    \"name\": \"Related Github Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/issues/1748\"\n  }]\n}\n!*/\n/* DOC\nDetects support for `transform-style: preserve-3d`, for getting a proper 3D perspective on elements.\n*/\n\n  Modernizr.addTest('preserve3d', function() {\n    var outerAnchor, innerAnchor;\n    var CSS = window.CSS;\n    var result = false;\n\n    if (CSS && CSS.supports && CSS.supports('(transform-style: preserve-3d)')) {\n      return true;\n    }\n\n    outerAnchor = createElement('a');\n    innerAnchor = createElement('a');\n\n    outerAnchor.style.cssText = 'display: block; transform-style: preserve-3d; transform-origin: right; transform: rotateY(40deg);';\n    innerAnchor.style.cssText = 'display: block; width: 9px; height: 1px; background: #000; transform-origin: right; transform: rotateY(40deg);';\n\n    outerAnchor.appendChild(innerAnchor);\n    docElement.appendChild(outerAnchor);\n\n    result = innerAnchor.getBoundingClientRect();\n    docElement.removeChild(outerAnchor);\n\n    result = result.width && result.width < 4;\n    return result;\n  });\n\n/*!\n{\n  \"name\": \"CSS user-select\",\n  \"property\": \"userselect\",\n  \"caniuse\": \"user-select-none\",\n  \"authors\": [\"ryan seddon\"],\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_userselect\"],\n  \"notes\": [{\n    \"name\": \"Related Modernizr Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/issues/250\"\n  }]\n}\n!*/\n\n  //https://github.com/Modernizr/Modernizr/issues/250\n  Modernizr.addTest('userselect', testAllProps('userSelect', 'none', true));\n\n\n  /**\n   * roundedEquals takes two integers and checks if the first is within 1 of the second\n   *\n   * @access private\n   * @function roundedEquals\n   * @param {number} a\n   * @param {number} b\n   * @returns {boolean}\n   */\n\n  function roundedEquals(a, b) {\n    return a - 1 === b || a === b || a + 1 === b;\n  }\n\n  ;\n/*!\n{\n  \"name\": \"CSS vh unit\",\n  \"property\": \"cssvhunit\",\n  \"caniuse\": \"viewport-units\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_vhunit\"],\n  \"notes\": [{\n    \"name\": \"Related Modernizr Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/issues/572\"\n  },{\n    \"name\": \"Similar JSFiddle\",\n    \"href\": \"https://jsfiddle.net/FWeinb/etnYC/\"\n  }]\n}\n!*/\n\n  testStyles('#modernizr { height: 50vh; }', function(elem) {\n    var height = parseInt(window.innerHeight / 2, 10);\n    var compStyle = parseInt(computedStyle(elem, null, 'height'), 10);\n\n    Modernizr.addTest('cssvhunit', roundedEquals(compStyle, height));\n  });\n\n/*!\n{\n  \"name\": \"CSS vmax unit\",\n  \"property\": \"cssvmaxunit\",\n  \"caniuse\": \"viewport-units\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_vmaxunit\"],\n  \"notes\": [{\n    \"name\": \"Related Modernizr Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/issues/572\"\n  },{\n    \"name\": \"JSFiddle Example\",\n    \"href\": \"https://jsfiddle.net/glsee/JDsWQ/4/\"\n  }]\n}\n!*/\n\n  testStyles('#modernizr1{width: 50vmax}#modernizr2{width:50px;height:50px;overflow:scroll}#modernizr3{position:fixed;top:0;left:0;bottom:0;right:0}', function(node) {\n    var elem = node.childNodes[2];\n    var scroller = node.childNodes[1];\n    var fullSizeElem = node.childNodes[0];\n    var scrollbarWidth = parseInt((scroller.offsetWidth - scroller.clientWidth) / 2, 10);\n\n    var one_vw = fullSizeElem.clientWidth / 100;\n    var one_vh = fullSizeElem.clientHeight / 100;\n    var expectedWidth = parseInt(Math.max(one_vw, one_vh) * 50, 10);\n    var compWidth = parseInt(computedStyle(elem, null, 'width'), 10);\n\n    Modernizr.addTest('cssvmaxunit', roundedEquals(expectedWidth, compWidth) || roundedEquals(expectedWidth, compWidth - scrollbarWidth));\n  }, 3);\n\n/*!\n{\n  \"name\": \"CSS vmin unit\",\n  \"property\": \"cssvminunit\",\n  \"caniuse\": \"viewport-units\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_vminunit\"],\n  \"notes\": [{\n    \"name\": \"Related Modernizr Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/issues/572\"\n  },{\n    \"name\": \"JSFiddle Example\",\n    \"href\": \"https://jsfiddle.net/glsee/JRmdq/8/\"\n  }]\n}\n!*/\n\n  testStyles('#modernizr1{width: 50vm;width:50vmin}#modernizr2{width:50px;height:50px;overflow:scroll}#modernizr3{position:fixed;top:0;left:0;bottom:0;right:0}', function(node) {\n    var elem = node.childNodes[2];\n    var scroller = node.childNodes[1];\n    var fullSizeElem = node.childNodes[0];\n    var scrollbarWidth = parseInt((scroller.offsetWidth - scroller.clientWidth) / 2, 10);\n\n    var one_vw = fullSizeElem.clientWidth / 100;\n    var one_vh = fullSizeElem.clientHeight / 100;\n    var expectedWidth = parseInt(Math.min(one_vw, one_vh) * 50, 10);\n    var compWidth = parseInt(computedStyle(elem, null, 'width'), 10);\n\n    Modernizr.addTest('cssvminunit', roundedEquals(expectedWidth, compWidth) || roundedEquals(expectedWidth, compWidth - scrollbarWidth));\n  }, 3);\n\n/*!\n{\n  \"name\": \"CSS vw unit\",\n  \"property\": \"cssvwunit\",\n  \"caniuse\": \"viewport-units\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_vwunit\"],\n  \"notes\": [{\n    \"name\": \"Related Modernizr Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/issues/572\"\n  },{\n    \"name\": \"JSFiddle Example\",\n    \"href\": \"https://jsfiddle.net/FWeinb/etnYC/\"\n  }]\n}\n!*/\n\n  testStyles('#modernizr { width: 50vw; }', function(elem) {\n    var width = parseInt(window.innerWidth / 2, 10);\n    var compStyle = parseInt(computedStyle(elem, null, 'width'), 10);\n\n    Modernizr.addTest('cssvwunit', roundedEquals(compStyle, width));\n  });\n\n/*!\n{\n  \"name\": \"will-change\",\n  \"property\": \"willchange\",\n  \"notes\": [{\n    \"name\": \"Spec\",\n    \"href\": \"https://drafts.csswg.org/css-will-change/\"\n  }]\n}\n!*/\n/* DOC\nDetects support for the `will-change` css property, which formally signals to the\nbrowser that an element will be animating.\n*/\n\n  Modernizr.addTest('willchange', 'willChange' in docElement.style);\n\n/*!\n{\n  \"name\": \"classList\",\n  \"caniuse\": \"classlist\",\n  \"property\": \"classlist\",\n  \"tags\": [\"dom\"],\n  \"builderAliases\": [\"dataview_api\"],\n  \"notes\": [{\n    \"name\": \"MDN Docs\",\n    \"href\": \"https://developer.mozilla.org/en/DOM/element.classList\"\n  }]\n}\n!*/\n\n  Modernizr.addTest('classlist', 'classList' in docElement);\n\n/*!\n{\n  \"name\": \"Document Fragment\",\n  \"property\": \"documentfragment\",\n  \"notes\": [{\n    \"name\": \"W3C DOM Level 1 Reference\",\n    \"href\": \"https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-B63ED1A3\"\n  }, {\n    \"name\": \"SitePoint Reference\",\n    \"href\": \"http://reference.sitepoint.com/javascript/DocumentFragment\"\n  }, {\n    \"name\": \"QuirksMode Compatibility Tables\",\n    \"href\": \"http://www.quirksmode.org/m/w3c_core.html#t112\"\n  }],\n  \"authors\": [\"Ron Waldon (@jokeyrhyme)\"],\n  \"knownBugs\": [\"false-positive on Blackberry 9500, see QuirksMode note\"],\n  \"tags\": []\n}\n!*/\n/* DOC\nAppend multiple elements to the DOM within a single insertion.\n*/\n\n  Modernizr.addTest('documentfragment', function() {\n    return 'createDocumentFragment' in document &&\n      'appendChild' in docElement;\n  });\n\n/*!\n{\n  \"name\": \"DOM4 MutationObserver\",\n  \"property\": \"mutationobserver\",\n  \"caniuse\": \"mutationobserver\",\n  \"tags\": [\"dom\"],\n  \"authors\": [\"Karel Sedláček (@ksdlck)\"],\n  \"polyfills\": [\"mutationobservers\"],\n  \"notes\": [{\n    \"name\": \"MDN documentation\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\"\n  }]\n}\n!*/\n/* DOC\n\nDetermines if DOM4 MutationObserver support is available.\n\n*/\n\n  Modernizr.addTest('mutationobserver',\n    !!window.MutationObserver || !!window.WebKitMutationObserver);\n\n/*!\n{\n  \"name\": \"ES6 Array\",\n  \"property\": \"es6array\",\n  \"notes\": [{\n    \"name\": \"unofficial ECMAScript 6 draft specification\",\n    \"href\": \"https://people.mozilla.org/~jorendorff/es6-draft.html\"\n  }],\n  \"polyfills\": [\"es6shim\"],\n  \"authors\": [\"Ron Waldon (@jokeyrhyme)\"],\n  \"warnings\": [\"ECMAScript 6 is still a only a draft, so this detect may not match the final specification or implementations.\"],\n  \"tags\": [\"es6\"]\n}\n!*/\n/* DOC\nCheck if browser implements ECMAScript 6 Array per specification.\n*/\n\n  Modernizr.addTest('es6array', !!(Array.prototype &&\n    Array.prototype.copyWithin &&\n    Array.prototype.fill &&\n    Array.prototype.find &&\n    Array.prototype.findIndex &&\n    Array.prototype.keys &&\n    Array.prototype.entries &&\n    Array.prototype.values &&\n    Array.from &&\n    Array.of));\n\n/*!\n{\n  \"name\": \"ES5 String.prototype.contains\",\n  \"property\": \"contains\",\n  \"authors\": [\"Robert Kowalski\"],\n  \"tags\": [\"es6\"]\n}\n!*/\n/* DOC\nCheck if browser implements ECMAScript 6 `String.prototype.contains` per specification.\n*/\n\n  Modernizr.addTest('contains', is(String.prototype.contains, 'function'));\n\n/*!\n{\n  \"name\": \"ES6 Generators\",\n  \"property\": \"generators\",\n  \"authors\": [\"Michael Kachanovskyi\"],\n  \"tags\": [\"es6\"]\n}\n!*/\n/* DOC\nCheck if browser implements ECMAScript 6 Generators per specification.\n*/\n\n  Modernizr.addTest('generators', function() {\n    try {\n      new Function('function* test() {}')();\n    } catch (e) {\n      return false;\n    }\n    return true;\n  });\n\n/*!\n{\n  \"name\": \"ES6 Math\",\n  \"property\": \"es6math\",\n  \"notes\": [{\n    \"name\": \"unofficial ECMAScript 6 draft specification\",\n    \"href\": \"https://people.mozilla.org/~jorendorff/es6-draft.html\"\n  }],\n  \"polyfills\": [\"es6shim\"],\n  \"authors\": [\"Ron Waldon (@jokeyrhyme)\"],\n  \"warnings\": [\"ECMAScript 6 is still a only a draft, so this detect may not match the final specification or implementations.\"],\n  \"tags\": [\"es6\"]\n}\n!*/\n/* DOC\nCheck if browser implements ECMAScript 6 Math per specification.\n*/\n\n  Modernizr.addTest('es6math', !!(Math &&\n    Math.clz32 &&\n    Math.cbrt &&\n    Math.imul &&\n    Math.sign &&\n    Math.log10 &&\n    Math.log2 &&\n    Math.log1p &&\n    Math.expm1 &&\n    Math.cosh &&\n    Math.sinh &&\n    Math.tanh &&\n    Math.acosh &&\n    Math.asinh &&\n    Math.atanh &&\n    Math.hypot &&\n    Math.trunc &&\n    Math.fround));\n\n/*!\n{\n  \"name\": \"ES6 Number\",\n  \"property\": \"es6number\",\n  \"notes\": [{\n    \"name\": \"unofficial ECMAScript 6 draft specification\",\n    \"href\": \"https://people.mozilla.org/~jorendorff/es6-draft.html\"\n  }],\n  \"polyfills\": [\"es6shim\"],\n  \"authors\": [\"Ron Waldon (@jokeyrhyme)\"],\n  \"warnings\": [\"ECMAScript 6 is still a only a draft, so this detect may not match the final specification or implementations.\"],\n  \"tags\": [\"es6\"]\n}\n!*/\n/* DOC\nCheck if browser implements ECMAScript 6 Number per specification.\n*/\n\n  Modernizr.addTest('es6number', !!(Number.isFinite &&\n    Number.isInteger &&\n    Number.isSafeInteger &&\n    Number.isNaN &&\n    Number.parseInt &&\n    Number.parseFloat &&\n    Number.isInteger(Number.MAX_SAFE_INTEGER) &&\n    Number.isInteger(Number.MIN_SAFE_INTEGER) &&\n    Number.isFinite(Number.EPSILON)));\n\n/*!\n{\n  \"name\": \"ES6 Object\",\n  \"property\": \"es6object\",\n  \"notes\": [{\n    \"name\": \"unofficial ECMAScript 6 draft specification\",\n    \"href\": \"https://people.mozilla.org/~jorendorff/es6-draft.html\"\n  }],\n  \"polyfills\": [\"es6shim\"],\n  \"authors\": [\"Ron Waldon (@jokeyrhyme)\"],\n  \"warnings\": [\"ECMAScript 6 is still a only a draft, so this detect may not match the final specification or implementations.\"],\n  \"tags\": [\"es6\"]\n}\n!*/\n/* DOC\nCheck if browser implements ECMAScript 6 Object per specification.\n*/\n\n  Modernizr.addTest('es6object', !!(Object.assign &&\n    Object.is &&\n    Object.setPrototypeOf));\n\n/*!\n{\n  \"name\": \"ES6 Promises\",\n  \"property\": \"promises\",\n  \"caniuse\": \"promises\",\n  \"polyfills\": [\"es6promises\"],\n  \"authors\": [\"Krister Kari\", \"Jake Archibald\"],\n  \"tags\": [\"es6\"],\n  \"notes\": [{\n    \"name\": \"The ES6 promises spec\",\n    \"href\": \"https://github.com/domenic/promises-unwrapping\"\n  },{\n    \"name\": \"Chromium dashboard - ES6 Promises\",\n    \"href\": \"https://www.chromestatus.com/features/5681726336532480\"\n  },{\n    \"name\": \"JavaScript Promises: There and back again - HTML5 Rocks\",\n    \"href\": \"http://www.html5rocks.com/en/tutorials/es6/promises/\"\n  }]\n}\n!*/\n/* DOC\nCheck if browser implements ECMAScript 6 Promises per specification.\n*/\n\n  Modernizr.addTest('promises', function() {\n    return 'Promise' in window &&\n    // Some of these methods are missing from\n    // Firefox/Chrome experimental implementations\n    'resolve' in window.Promise &&\n    'reject' in window.Promise &&\n    'all' in window.Promise &&\n    'race' in window.Promise &&\n    // Older version of the spec had a resolver object\n    // as the arg rather than a function\n    (function() {\n      var resolve;\n      new window.Promise(function(r) { resolve = r; });\n      return typeof resolve === 'function';\n    }());\n  });\n\n/*!\n{\n  \"name\": \"ES6 String\",\n  \"property\": \"es6string\",\n  \"notes\": [{\n    \"name\": \"unofficial ECMAScript 6 draft specification\",\n    \"href\": \"https://people.mozilla.org/~jorendorff/es6-draft.html\"\n  }],\n  \"polyfills\": [\"es6shim\"],\n  \"authors\": [\"Ron Waldon (@jokeyrhyme)\"],\n  \"warnings\": [\"ECMAScript 6 is still a only a draft, so this detect may not match the final specification or implementations.\"],\n  \"tags\": [\"es6\"]\n}\n!*/\n/* DOC\nCheck if browser implements ECMAScript 6 String per specification.\n*/\n\n  Modernizr.addTest('es6string', !!(String.fromCodePoint &&\n    String.raw &&\n    String.prototype.codePointAt &&\n    String.prototype.repeat &&\n    String.prototype.startsWith &&\n    String.prototype.endsWith &&\n    String.prototype.includes));\n\n/*!\n{\n  \"name\": \"Orientation and Motion Events\",\n  \"property\": [\"devicemotion\", \"deviceorientation\"],\n  \"caniuse\": \"deviceorientation\",\n  \"notes\": [{\n    \"name\": \"W3C Editor's Draft\",\n    \"href\": \"http://w3c.github.io/deviceorientation/spec-source-orientation.html\"\n  },{\n    \"name\": \"Implementation by iOS Safari (Orientation)\",\n    \"href\": \"http://goo.gl/fhce3\"\n  },{\n    \"name\": \"Implementation by iOS Safari (Motion)\",\n    \"href\": \"http://goo.gl/rLKz8\"\n  }],\n  \"authors\": [\"Shi Chuan\"],\n  \"tags\": [\"event\"],\n  \"builderAliases\": [\"event_deviceorientation_motion\"]\n}\n!*/\n/* DOC\nPart of Device Access aspect of HTML5, same category as geolocation.\n\n`devicemotion` tests for Device Motion Event support, returns boolean value true/false.\n\n`deviceorientation` tests for Device Orientation Event support, returns boolean value true/false\n*/\n\n  Modernizr.addTest('devicemotion', 'DeviceMotionEvent' in window);\n  Modernizr.addTest('deviceorientation', 'DeviceOrientationEvent' in window);\n\n/*!\n{\n  \"name\": \"Fullscreen API\",\n  \"property\": \"fullscreen\",\n  \"caniuse\": \"fullscreen\",\n  \"notes\": [{\n    \"name\": \"MDN documentation\",\n    \"href\": \"https://developer.mozilla.org/en/API/Fullscreen\"\n  }],\n  \"polyfills\": [\"screenfulljs\"],\n  \"builderAliases\": [\"fullscreen_api\"]\n}\n!*/\n/* DOC\nDetects support for the ability to make the current website take over the user's entire screen\n*/\n\n  // github.com/Modernizr/Modernizr/issues/739\n  Modernizr.addTest('fullscreen', !!(prefixed('exitFullscreen', document, false) || prefixed('cancelFullScreen', document, false)));\n\n/*!\n{\n  \"name\": \"Hashchange event\",\n  \"property\": \"hashchange\",\n  \"caniuse\": \"hashchange\",\n  \"tags\": [\"history\"],\n  \"notes\": [{\n    \"name\": \"MDN documentation\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/API/window.onhashchange\"\n  }],\n  \"polyfills\": [\n    \"jquery-hashchange\",\n    \"moo-historymanager\",\n    \"jquery-ajaxy\",\n    \"hasher\",\n    \"shistory\"\n  ]\n}\n!*/\n/* DOC\nDetects support for the `hashchange` event, fired when the current location fragment changes.\n*/\n\n  Modernizr.addTest('hashchange', function() {\n    if (hasEvent('hashchange', window) === false) {\n      return false;\n    }\n\n    // documentMode logic from YUI to filter out IE8 Compat Mode\n    //   which false positives.\n    return (document.documentMode === undefined || document.documentMode > 7);\n  });\n\n/*!\n{\n  \"name\": \"Hidden Scrollbar\",\n  \"property\": \"hiddenscroll\",\n  \"authors\": [\"Oleg Korsunsky\"],\n  \"tags\": [\"overlay\"],\n  \"notes\": [{\n    \"name\": \"Overlay Scrollbar description\",\n    \"href\": \"https://developer.apple.com/library/mac/releasenotes/MacOSX/WhatsNewInOSX/Articles/MacOSX10_7.html#//apple_ref/doc/uid/TP40010355-SW39\"\n  },{\n    \"name\": \"Video example of overlay scrollbars\",\n    \"href\": \"https://gfycat.com/FoolishMeaslyAtlanticsharpnosepuffer\"\n  }]\n}\n!*/\n/* DOC\nDetects overlay scrollbars (when scrollbars on overflowed blocks are visible). This is found most commonly on mobile and OS X.\n*/\n\n  Modernizr.addTest('hiddenscroll', function() {\n    return testStyles('#modernizr {width:100px;height:100px;overflow:scroll}', function(elem) {\n      return elem.offsetWidth === elem.clientWidth;\n    });\n  });\n\n/*!\n{\n  \"name\": \"History API\",\n  \"property\": \"history\",\n  \"caniuse\": \"history\",\n  \"tags\": [\"history\"],\n  \"authors\": [\"Hay Kranen\", \"Alexander Farkas\"],\n  \"notes\": [{\n    \"name\": \"W3C Spec\",\n    \"href\": \"https://www.w3.org/TR/html51/browsers.html#the-history-interface\"\n  }, {\n    \"name\": \"MDN documentation\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/API/window.history\"\n  }],\n  \"polyfills\": [\"historyjs\", \"html5historyapi\"]\n}\n!*/\n/* DOC\nDetects support for the History API for manipulating the browser session history.\n*/\n\n  Modernizr.addTest('history', function() {\n    // Issue #733\n    // The stock browser on Android 2.2 & 2.3, and 4.0.x returns positive on history support\n    // Unfortunately support is really buggy and there is no clean way to detect\n    // these bugs, so we fall back to a user agent sniff :(\n    var ua = navigator.userAgent;\n\n    // We only want Android 2 and 4.0, stock browser, and not Chrome which identifies\n    // itself as 'Mobile Safari' as well, nor Windows Phone (issue #1471).\n    if ((ua.indexOf('Android 2.') !== -1 ||\n        (ua.indexOf('Android 4.0') !== -1)) &&\n        ua.indexOf('Mobile Safari') !== -1 &&\n        ua.indexOf('Chrome') === -1 &&\n        ua.indexOf('Windows Phone') === -1 &&\n    // Since all documents on file:// share an origin, the History apis are\n    // blocked there as well\n        location.protocol !== 'file:'\n    ) {\n      return false;\n    }\n\n    // Return the regular check\n    return (window.history && 'pushState' in window.history);\n  });\n\n\n  /**\n   * hasOwnProp is a shim for hasOwnProperty that is needed for Safari 2.0 support\n   *\n   * @author kangax\n   * @access private\n   * @function hasOwnProp\n   * @param {object} object - The object to check for a property\n   * @param {string} property - The property to check for\n   * @returns {boolean}\n   */\n\n  // hasOwnProperty shim by kangax needed for Safari 2.0 support\n  var hasOwnProp;\n\n  (function() {\n    var _hasOwnProperty = ({}).hasOwnProperty;\n    /* istanbul ignore else */\n    /* we have no way of testing IE 5.5 or safari 2,\n     * so just assume the else gets hit */\n    if (!is(_hasOwnProperty, 'undefined') && !is(_hasOwnProperty.call, 'undefined')) {\n      hasOwnProp = function(object, property) {\n        return _hasOwnProperty.call(object, property);\n      };\n    }\n    else {\n      hasOwnProp = function(object, property) { /* yes, this can give false positives/negatives, but most of the time we don't care about those */\n        return ((property in object) && is(object.constructor.prototype[property], 'undefined'));\n      };\n    }\n  })();\n\n  \n\n  /**\n   * setClasses takes an array of class names and adds them to the root element\n   *\n   * @access private\n   * @function setClasses\n   * @param {string[]} classes - Array of class names\n   */\n\n  // Pass in an and array of class names, e.g.:\n  //  ['no-webp', 'borderradius', ...]\n  function setClasses(classes) {\n    var className = docElement.className;\n    var classPrefix = Modernizr._config.classPrefix || '';\n\n    if (isSVG) {\n      className = className.baseVal;\n    }\n\n    // Change `no-js` to `js` (independently of the `enableClasses` option)\n    // Handle classPrefix on this too\n    if (Modernizr._config.enableJSClass) {\n      var reJS = new RegExp('(^|\\\\s)' + classPrefix + 'no-js(\\\\s|$)');\n      className = className.replace(reJS, '$1' + classPrefix + 'js$2');\n    }\n\n    if (Modernizr._config.enableClasses) {\n      // Add the new classes\n      className += ' ' + classPrefix + classes.join(' ' + classPrefix);\n      if (isSVG) {\n        docElement.className.baseVal = className;\n      } else {\n        docElement.className = className;\n      }\n    }\n\n  }\n\n  ;\n\n\n   // _l tracks listeners for async tests, as well as tests that execute after the initial run\n  ModernizrProto._l = {};\n\n  /**\n   * Modernizr.on is a way to listen for the completion of async tests. Being\n   * asynchronous, they may not finish before your scripts run. As a result you\n   * will get a possibly false negative `undefined` value.\n   *\n   * @memberof Modernizr\n   * @name Modernizr.on\n   * @access public\n   * @function on\n   * @param {string} feature - String name of the feature detect\n   * @param {function} cb - Callback function returning a Boolean - true if feature is supported, false if not\n   * @example\n   *\n   * ```js\n   * Modernizr.on('flash', function( result ) {\n   *   if (result) {\n   *    // the browser has flash\n   *   } else {\n   *     // the browser does not have flash\n   *   }\n   * });\n   * ```\n   */\n\n  ModernizrProto.on = function(feature, cb) {\n    // Create the list of listeners if it doesn't exist\n    if (!this._l[feature]) {\n      this._l[feature] = [];\n    }\n\n    // Push this test on to the listener list\n    this._l[feature].push(cb);\n\n    // If it's already been resolved, trigger it on next tick\n    if (Modernizr.hasOwnProperty(feature)) {\n      // Next Tick\n      setTimeout(function() {\n        Modernizr._trigger(feature, Modernizr[feature]);\n      }, 0);\n    }\n  };\n\n  /**\n   * _trigger is the private function used to signal test completion and run any\n   * callbacks registered through [Modernizr.on](#modernizr-on)\n   *\n   * @memberof Modernizr\n   * @name Modernizr._trigger\n   * @access private\n   * @function _trigger\n   * @param {string} feature - string name of the feature detect\n   * @param {function|boolean} [res] - A feature detection function, or the boolean =\n   * result of a feature detection function\n   */\n\n  ModernizrProto._trigger = function(feature, res) {\n    if (!this._l[feature]) {\n      return;\n    }\n\n    var cbs = this._l[feature];\n\n    // Force async\n    setTimeout(function() {\n      var i, cb;\n      for (i = 0; i < cbs.length; i++) {\n        cb = cbs[i];\n        cb(res);\n      }\n    }, 0);\n\n    // Don't trigger these again\n    delete this._l[feature];\n  };\n\n  /**\n   * addTest allows you to define your own feature detects that are not currently\n   * included in Modernizr (under the covers it's the exact same code Modernizr\n   * uses for its own [feature detections](https://github.com/Modernizr/Modernizr/tree/master/feature-detects)). Just like the offical detects, the result\n   * will be added onto the Modernizr object, as well as an appropriate className set on\n   * the html element when configured to do so\n   *\n   * @memberof Modernizr\n   * @name Modernizr.addTest\n   * @optionName Modernizr.addTest()\n   * @optionProp addTest\n   * @access public\n   * @function addTest\n   * @param {string|object} feature - The string name of the feature detect, or an\n   * object of feature detect names and test\n   * @param {function|boolean} test - Function returning true if feature is supported,\n   * false if not. Otherwise a boolean representing the results of a feature detection\n   * @example\n   *\n   * The most common way of creating your own feature detects is by calling\n   * `Modernizr.addTest` with a string (preferably just lowercase, without any\n   * punctuation), and a function you want executed that will return a boolean result\n   *\n   * ```js\n   * Modernizr.addTest('itsTuesday', function() {\n   *  var d = new Date();\n   *  return d.getDay() === 2;\n   * });\n   * ```\n   *\n   * When the above is run, it will set Modernizr.itstuesday to `true` when it is tuesday,\n   * and to `false` every other day of the week. One thing to notice is that the names of\n   * feature detect functions are always lowercased when added to the Modernizr object. That\n   * means that `Modernizr.itsTuesday` will not exist, but `Modernizr.itstuesday` will.\n   *\n   *\n   *  Since we only look at the returned value from any feature detection function,\n   *  you do not need to actually use a function. For simple detections, just passing\n   *  in a statement that will return a boolean value works just fine.\n   *\n   * ```js\n   * Modernizr.addTest('hasJquery', 'jQuery' in window);\n   * ```\n   *\n   * Just like before, when the above runs `Modernizr.hasjquery` will be true if\n   * jQuery has been included on the page. Not using a function saves a small amount\n   * of overhead for the browser, as well as making your code much more readable.\n   *\n   * Finally, you also have the ability to pass in an object of feature names and\n   * their tests. This is handy if you want to add multiple detections in one go.\n   * The keys should always be a string, and the value can be either a boolean or\n   * function that returns a boolean.\n   *\n   * ```js\n   * var detects = {\n   *  'hasjquery': 'jQuery' in window,\n   *  'itstuesday': function() {\n   *    var d = new Date();\n   *    return d.getDay() === 2;\n   *  }\n   * }\n   *\n   * Modernizr.addTest(detects);\n   * ```\n   *\n   * There is really no difference between the first methods and this one, it is\n   * just a convenience to let you write more readable code.\n   */\n\n  function addTest(feature, test) {\n\n    if (typeof feature == 'object') {\n      for (var key in feature) {\n        if (hasOwnProp(feature, key)) {\n          addTest(key, feature[ key ]);\n        }\n      }\n    } else {\n\n      feature = feature.toLowerCase();\n      var featureNameSplit = feature.split('.');\n      var last = Modernizr[featureNameSplit[0]];\n\n      // Again, we don't check for parent test existence. Get that right, though.\n      if (featureNameSplit.length == 2) {\n        last = last[featureNameSplit[1]];\n      }\n\n      if (typeof last != 'undefined') {\n        // we're going to quit if you're trying to overwrite an existing test\n        // if we were to allow it, we'd do this:\n        //   var re = new RegExp(\"\\\\b(no-)?\" + feature + \"\\\\b\");\n        //   docElement.className = docElement.className.replace( re, '' );\n        // but, no rly, stuff 'em.\n        return Modernizr;\n      }\n\n      test = typeof test == 'function' ? test() : test;\n\n      // Set the value (this is the magic, right here).\n      if (featureNameSplit.length == 1) {\n        Modernizr[featureNameSplit[0]] = test;\n      } else {\n        // cast to a Boolean, if not one already\n        if (Modernizr[featureNameSplit[0]] && !(Modernizr[featureNameSplit[0]] instanceof Boolean)) {\n          Modernizr[featureNameSplit[0]] = new Boolean(Modernizr[featureNameSplit[0]]);\n        }\n\n        Modernizr[featureNameSplit[0]][featureNameSplit[1]] = test;\n      }\n\n      // Set a single class (either `feature` or `no-feature`)\n      setClasses([(!!test && test != false ? '' : 'no-') + featureNameSplit.join('-')]);\n\n      // Trigger the event\n      Modernizr._trigger(feature, test);\n    }\n\n    return Modernizr; // allow chaining.\n  }\n\n  // After all the tests are run, add self to the Modernizr prototype\n  Modernizr._q.push(function() {\n    ModernizrProto.addTest = addTest;\n  });\n\n  \n\n/*!\n{\n  \"name\": \"sizes attribute\",\n  \"async\": true,\n  \"property\": \"sizes\",\n  \"tags\": [\"image\"],\n  \"authors\": [\"Mat Marquis\"],\n  \"notes\": [{\n    \"name\": \"Spec\",\n    \"href\": \"http://picture.responsiveimages.org/#parse-sizes-attr\"\n    },{\n    \"name\": \"Usage Details\",\n    \"href\": \"http://ericportis.com/posts/2014/srcset-sizes/\"\n    }]\n}\n!*/\n/* DOC\nTest for the `sizes` attribute on images\n*/\n\n  Modernizr.addAsyncTest(function() {\n    var width1, width2, test;\n    var image = createElement('img');\n    // in a perfect world this would be the test...\n    var isSizes = 'sizes' in image;\n\n    // ... but we need to deal with Safari 9...\n    if (!isSizes && ('srcset' in  image)) {\n      width2 = 'data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==';\n      width1 = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n\n      test = function() {\n        addTest('sizes', image.width == 2);\n      };\n\n      image.onload = test;\n      image.onerror = test;\n      image.setAttribute('sizes', '9px');\n\n      image.srcset = width1 + ' 1w,' + width2 + ' 8w';\n      image.src = width1;\n    } else {\n      addTest('sizes', isSizes);\n    }\n  });\n\n/*!\n{\n  \"name\": \"srcset attribute\",\n  \"property\": \"srcset\",\n  \"tags\": [\"image\"],\n  \"notes\": [{\n    \"name\": \"Smashing Magazine Article\",\n    \"href\": \"https://en.wikipedia.org/wiki/APNG\"\n    },{\n    \"name\": \"Generate multi-resolution images for srcset with Grunt\",\n    \"href\": \"https://addyosmani.com/blog/generate-multi-resolution-images-for-srcset-with-grunt/\"\n    }]\n}\n!*/\n/* DOC\nTest for the srcset attribute of images\n*/\n\n  Modernizr.addTest('srcset', 'srcset' in createElement('img'));\n\n/*!\n{\n  \"name\": \"JSON\",\n  \"property\": \"json\",\n  \"caniuse\": \"json\",\n  \"notes\": [{\n    \"name\": \"MDN documentation\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Glossary/JSON\"\n  }],\n  \"polyfills\": [\"json2\"]\n}\n!*/\n/* DOC\nDetects native support for JSON handling functions.\n*/\n\n  // this will also succeed if you've loaded the JSON2.js polyfill ahead of time\n  //   ... but that should be obvious. :)\n\n  Modernizr.addTest('json', 'JSON' in window && 'parse' in JSON && 'stringify' in JSON);\n\n/*!\n{\n  \"name\": \"XHR responseType\",\n  \"property\": \"xhrresponsetype\",\n  \"tags\": [\"network\"],\n  \"notes\": [{\n    \"name\": \"XMLHttpRequest Living Standard\",\n    \"href\": \"https://xhr.spec.whatwg.org/#the-responsetype-attribute\"\n  }]\n}\n!*/\n/* DOC\nTests for XMLHttpRequest xhr.responseType.\n*/\n\n  Modernizr.addTest('xhrresponsetype', (function() {\n    if (typeof XMLHttpRequest == 'undefined') {\n      return false;\n    }\n    var xhr = new XMLHttpRequest();\n    xhr.open('get', '/', true);\n    return 'response' in xhr;\n  }()));\n\n\n  /**\n   * http://mathiasbynens.be/notes/xhr-responsetype-json#comment-4\n   *\n   * @access private\n   * @function testXhrType\n   * @param {string} type - String name of the XHR type you want to detect\n   * @returns {boolean}\n   * @author Mathias Bynens\n   */\n\n  /* istanbul ignore next */\n  var testXhrType = function(type) {\n    if (typeof XMLHttpRequest == 'undefined') {\n      return false;\n    }\n    var xhr = new XMLHttpRequest();\n    xhr.open('get', '/', true);\n    try {\n      xhr.responseType = type;\n    } catch (error) {\n      return false;\n    }\n    return 'response' in xhr && xhr.responseType == type;\n  };\n\n  \n/*!\n{\n  \"name\": \"XHR responseType='arraybuffer'\",\n  \"property\": \"xhrresponsetypearraybuffer\",\n  \"tags\": [\"network\"],\n  \"notes\": [{\n    \"name\": \"XMLHttpRequest Living Standard\",\n    \"href\": \"https://xhr.spec.whatwg.org/#the-responsetype-attribute\"\n  }]\n}\n!*/\n/* DOC\nTests for XMLHttpRequest xhr.responseType='arraybuffer'.\n*/\n\n  Modernizr.addTest('xhrresponsetypearraybuffer', testXhrType('arraybuffer'));\n\n/*!\n{\n  \"name\": \"XHR responseType='blob'\",\n  \"property\": \"xhrresponsetypeblob\",\n  \"tags\": [\"network\"],\n  \"notes\": [{\n    \"name\": \"XMLHttpRequest Living Standard\",\n    \"href\": \"https://xhr.spec.whatwg.org/#the-responsetype-attribute\"\n  }]\n}\n!*/\n/* DOC\nTests for XMLHttpRequest xhr.responseType='blob'.\n*/\n\n  Modernizr.addTest('xhrresponsetypeblob', testXhrType('blob'));\n\n/*!\n{\n  \"name\": \"XML HTTP Request Level 2 XHR2\",\n  \"property\": \"xhr2\",\n  \"tags\": [\"network\"],\n  \"builderAliases\": [\"network_xhr2\"],\n  \"notes\": [{\n    \"name\": \"W3 Spec\",\n    \"href\": \"https://www.w3.org/TR/XMLHttpRequest2/\"\n  },{\n    \"name\": \"Details on Related Github Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/issues/385\"\n  }]\n}\n!*/\n/* DOC\nTests for XHR2.\n*/\n\n  // all three of these details report consistently across all target browsers:\n  //   !!(window.ProgressEvent);\n  //   'XMLHttpRequest' in window && 'withCredentials' in new XMLHttpRequest\n  Modernizr.addTest('xhr2', 'XMLHttpRequest' in window && 'withCredentials' in new XMLHttpRequest());\n\n/*!\n{\n  \"name\": \"Page Visibility API\",\n  \"property\": \"pagevisibility\",\n  \"caniuse\": \"pagevisibility\",\n  \"tags\": [\"performance\"],\n  \"notes\": [{\n    \"name\": \"MDN documentation\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/DOM/Using_the_Page_Visibility_API\"\n  },{\n    \"name\": \"W3C spec\",\n    \"href\": \"https://www.w3.org/TR/2011/WD-page-visibility-20110602/\"\n  },{\n    \"name\": \"HTML5 Rocks tutorial\",\n    \"href\": \"http://www.html5rocks.com/en/tutorials/pagevisibility/intro/\"\n  }],\n  \"polyfills\": [\"visibilityjs\", \"visiblyjs\", \"jquery-visibility\"]\n}\n!*/\n/* DOC\nDetects support for the Page Visibility API, which can be used to disable unnecessary actions and otherwise improve user experience.\n*/\n\n  Modernizr.addTest('pagevisibility', !!prefixed('hidden', document, false));\n\n/*!\n{\n  \"name\": \"Navigation Timing API\",\n  \"property\": \"performance\",\n  \"caniuse\": \"nav-timing\",\n  \"tags\": [\"performance\"],\n  \"authors\": [\"Scott Murphy (@uxder)\"],\n  \"notes\": [{\n    \"name\": \"W3C Spec\",\n    \"href\": \"https://www.w3.org/TR/navigation-timing/\"\n  },{\n    \"name\": \"HTML5 Rocks article\",\n    \"href\": \"http://www.html5rocks.com/en/tutorials/webperformance/basics/\"\n  }],\n  \"polyfills\": [\"perfnow\"]\n}\n!*/\n/* DOC\nDetects support for the Navigation Timing API, for measuring browser and connection performance.\n*/\n\n  Modernizr.addTest('performance', !!prefixed('performance', window));\n\n/*!\n{\n  \"name\": \"DOM Pointer Events API\",\n  \"property\": \"pointerevents\",\n  \"tags\": [\"input\"],\n  \"authors\": [\"Stu Cox\"],\n  \"notes\": [\n    {\n      \"name\": \"W3C Pointer Events\",\n      \"href\": \"https://www.w3.org/TR/pointerevents/\"\n    },{\n      \"name\": \"W3C Pointer Events Level 2\",\n      \"href\": \"https://www.w3.org/TR/pointerevents2/\"\n    },{\n    \"name\": \"MDN documentation\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent\"\n  }],\n  \"warnings\": [\"This property name now refers to W3C DOM PointerEvents: https://github.com/Modernizr/Modernizr/issues/548#issuecomment-12812099\"],\n  \"polyfills\": [\"pep\"]\n}\n!*/\n/* DOC\nDetects support for the DOM Pointer Events API, which provides a unified event interface for pointing input devices, as implemented in IE10+, Edge and Blink.\n*/\n\n  // **Test name hijacked!**\n  // Now refers to W3C DOM PointerEvents spec rather than the CSS pointer-events property.\n  Modernizr.addTest('pointerevents', function() {\n    // Cannot use `.prefixed()` for events, so test each prefix\n    var bool = false,\n      i = domPrefixes.length;\n\n    // Don't forget un-prefixed...\n    bool = Modernizr.hasEvent('pointerdown');\n\n    while (i-- && !bool) {\n      if (hasEvent(domPrefixes[i] + 'pointerdown')) {\n        bool = true;\n      }\n    }\n    return bool;\n  });\n\n/*!\n{\n  \"name\": \"postMessage\",\n  \"property\": \"postmessage\",\n  \"caniuse\": \"x-doc-messaging\",\n  \"notes\": [{\n    \"name\": \"W3C Spec\",\n    \"href\": \"http://www.w3.org/TR/html5/comms.html#posting-messages\"\n  }],\n  \"polyfills\": [\"easyxdm\", \"postmessage-jquery\"]\n}\n!*/\n/* DOC\nDetects support for the `window.postMessage` protocol for cross-document messaging.\n*/\n\n  Modernizr.addTest('postmessage', 'postMessage' in window);\n\n/*!\n{\n  \"name\": \"QuerySelector\",\n  \"property\": \"queryselector\",\n  \"caniuse\": \"queryselector\",\n  \"tags\": [\"queryselector\"],\n  \"authors\": [\"Andrew Betts (@triblondon)\"],\n  \"notes\": [{\n    \"name\" : \"W3C Selectors reference\",\n    \"href\": \"https://www.w3.org/TR/selectors-api/#queryselectorall\"\n  }],\n  \"polyfills\": [\"css-selector-engine\"]\n}\n!*/\n/* DOC\nDetects support for querySelector.\n*/\n\n  Modernizr.addTest('queryselector', 'querySelector' in document && 'querySelectorAll' in document);\n\n/*!\n{\n  \"name\": \"requestAnimationFrame\",\n  \"property\": \"requestanimationframe\",\n  \"aliases\": [\"raf\"],\n  \"caniuse\": \"requestanimationframe\",\n  \"tags\": [\"animation\"],\n  \"authors\": [\"Addy Osmani\"],\n  \"notes\": [{\n    \"name\": \"W3C spec\",\n    \"href\": \"https://www.w3.org/TR/animation-timing/\"\n  }],\n  \"polyfills\": [\"raf\"]\n}\n!*/\n/* DOC\nDetects support for the `window.requestAnimationFrame` API, for offloading animation repainting to the browser for optimized performance.\n*/\n\n  Modernizr.addTest('requestanimationframe', !!prefixed('requestAnimationFrame', window), {aliases: ['raf']});\n\n/*!\n{\n  \"name\": \"script[async]\",\n  \"property\": \"scriptasync\",\n  \"caniuse\": \"script-async\",\n  \"tags\": [\"script\"],\n  \"builderAliases\": [\"script_async\"],\n  \"authors\": [\"Theodoor van Donge\"]\n}\n!*/\n/* DOC\nDetects support for the `async` attribute on the `<script>` element.\n*/\n\n  Modernizr.addTest('scriptasync', 'async' in createElement('script'));\n\n/*!\n{\n  \"name\": \"script[defer]\",\n  \"property\": \"scriptdefer\",\n  \"caniuse\": \"script-defer\",\n  \"tags\": [\"script\"],\n  \"builderAliases\": [\"script_defer\"],\n  \"authors\": [\"Theodoor van Donge\"],\n  \"warnings\": [\"Browser implementation of the `defer` attribute vary: https://stackoverflow.com/questions/3952009/defer-attribute-chrome#answer-3982619\"],\n  \"knownBugs\": [\"False positive in Opera 12\"]\n}\n!*/\n/* DOC\nDetects support for the `defer` attribute on the `<script>` element.\n*/\n\n  Modernizr.addTest('scriptdefer', 'defer' in createElement('script'));\n\n/*!\n{\n  \"name\": \"SVG\",\n  \"property\": \"svg\",\n  \"caniuse\": \"svg\",\n  \"tags\": [\"svg\"],\n  \"authors\": [\"Erik Dahlstrom\"],\n  \"polyfills\": [\n    \"svgweb\",\n    \"raphael\",\n    \"amplesdk\",\n    \"canvg\",\n    \"svg-boilerplate\",\n    \"sie\",\n    \"dojogfx\",\n    \"fabricjs\"\n  ]\n}\n!*/\n/* DOC\nDetects support for SVG in `<embed>` or `<object>` elements.\n*/\n\n  Modernizr.addTest('svg', !!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect);\n\n/*!\n{\n  \"name\": \"SVG as an <img> tag source\",\n  \"property\": \"svgasimg\",\n  \"caniuse\" : \"svg-img\",\n  \"tags\": [\"svg\"],\n  \"aliases\": [\"svgincss\"],\n  \"authors\": [\"Chris Coyier\"],\n  \"notes\": [{\n    \"name\": \"HTML5 Spec\",\n    \"href\": \"http://www.w3.org/TR/html5/embedded-content-0.html#the-img-element\"\n  }]\n}\n!*/\n\n\n  // Original Async test by Stu Cox\n  // https://gist.github.com/chriscoyier/8774501\n\n  // Now a Sync test based on good results here\n  // http://codepen.io/chriscoyier/pen/bADFx\n\n  // Note http://www.w3.org/TR/SVG11/feature#Image is *supposed* to represent\n  // support for the `<image>` tag in SVG, not an SVG file linked from an `<img>`\n  // tag in HTML – but it’s a heuristic which works\n  Modernizr.addTest('svgasimg', document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Image', '1.1'));\n\n\n  /**\n   * Object.prototype.toString can be used with every object and allows you to\n   * get its class easily. Abstracting it off of an object prevents situations\n   * where the toString property has been overridden\n   *\n   * @access private\n   * @function toStringFn\n   * @returns {function} An abstracted toString function\n   */\n\n  var toStringFn = ({}).toString;\n  \n/*!\n{\n  \"name\": \"SVG clip paths\",\n  \"property\": \"svgclippaths\",\n  \"tags\": [\"svg\"],\n  \"notes\": [{\n    \"name\": \"Demo\",\n    \"href\": \"http://srufaculty.sru.edu/david.dailey/svg/newstuff/clipPath4.svg\"\n  }]\n}\n!*/\n/* DOC\nDetects support for clip paths in SVG (only, not on HTML content).\n\nSee [this discussion](https://github.com/Modernizr/Modernizr/issues/213) regarding applying SVG clip paths to HTML content.\n*/\n\n  Modernizr.addTest('svgclippaths', function() {\n    return !!document.createElementNS &&\n      /SVGClipPath/.test(toStringFn.call(document.createElementNS('http://www.w3.org/2000/svg', 'clipPath')));\n  });\n\n/*!\n{\n  \"name\": \"SVG filters\",\n  \"property\": \"svgfilters\",\n  \"caniuse\": \"svg-filters\",\n  \"tags\": [\"svg\"],\n  \"builderAliases\": [\"svg_filters\"],\n  \"authors\": [\"Erik Dahlstrom\"],\n  \"notes\": [{\n    \"name\": \"W3C Spec\",\n    \"href\": \"https://www.w3.org/TR/SVG11/filters.html\"\n  }]\n}\n!*/\n\n  // Should fail in Safari: https://stackoverflow.com/questions/9739955/feature-detecting-support-for-svg-filters.\n  Modernizr.addTest('svgfilters', function() {\n    var result = false;\n    try {\n      result = 'SVGFEColorMatrixElement' in window &&\n        SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE == 2;\n    }\n    catch (e) {}\n    return result;\n  });\n\n/*!\n{\n  \"name\": \"SVG foreignObject\",\n  \"property\": \"svgforeignobject\",\n  \"tags\": [\"svg\"],\n  \"notes\": [{\n    \"name\": \"W3C Spec\",\n    \"href\": \"https://www.w3.org/TR/SVG11/extend.html\"\n  }]\n}\n!*/\n/* DOC\nDetects support for foreignObject tag in SVG.\n*/\n\n  Modernizr.addTest('svgforeignobject', function() {\n    return !!document.createElementNS &&\n      /SVGForeignObject/.test(toStringFn.call(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')));\n  });\n\n/*!\n{\n  \"name\": \"Inline SVG\",\n  \"property\": \"inlinesvg\",\n  \"caniuse\": \"svg-html5\",\n  \"tags\": [\"svg\"],\n  \"notes\": [{\n    \"name\": \"Test page\",\n    \"href\": \"https://paulirish.com/demo/inline-svg\"\n  }, {\n    \"name\": \"Test page and results\",\n    \"href\": \"https://codepen.io/eltonmesquita/full/GgXbvo/\"\n  }],\n  \"polyfills\": [\"inline-svg-polyfill\"],\n  \"knownBugs\": [\"False negative on some Chromia browsers.\"]\n}\n!*/\n/* DOC\nDetects support for inline SVG in HTML (not within XHTML).\n*/\n\n  Modernizr.addTest('inlinesvg', function() {\n    var div = createElement('div');\n    div.innerHTML = '<svg/>';\n    return (typeof SVGRect != 'undefined' && div.firstChild && div.firstChild.namespaceURI) == 'http://www.w3.org/2000/svg';\n  });\n\n/*!\n{\n  \"name\": \"SVG SMIL animation\",\n  \"property\": \"smil\",\n  \"caniuse\": \"svg-smil\",\n  \"tags\": [\"svg\"],\n  \"notes\": [{\n  \"name\": \"W3C Synchronised Multimedia spec\",\n  \"href\": \"https://www.w3.org/AudioVideo/\"\n  }]\n}\n!*/\n\n  // SVG SMIL animation\n  Modernizr.addTest('smil', function() {\n    return !!document.createElementNS &&\n      /SVGAnimate/.test(toStringFn.call(document.createElementNS('http://www.w3.org/2000/svg', 'animate')));\n  });\n\n/*!\n{\n  \"name\": \"Template strings\",\n  \"property\": \"templatestrings\",\n  \"notes\": [{\n    \"name\": \"MDN Reference\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/template_strings#Browser_compatibility\"\n  }]\n}\n!*/\n/* DOC\nTemplate strings are string literals allowing embedded expressions.\n*/\n\n  Modernizr.addTest('templatestrings', function() {\n    var supports;\n    try {\n      // A number of tools, including uglifyjs and require, break on a raw \"`\", so\n      // use an eval to get around that.\n      // eslint-disable-next-line\n      eval('``');\n      supports = true;\n    } catch (e) {}\n    return !!supports;\n  });\n\n/*!\n{\n  \"name\": \"Blob URLs\",\n  \"property\": \"bloburls\",\n  \"caniuse\": \"bloburls\",\n  \"notes\": [{\n    \"name\": \"W3C Working Draft\",\n    \"href\": \"https://www.w3.org/TR/FileAPI/#creating-revoking\"\n  }],\n  \"tags\": [\"file\", \"url\"],\n  \"authors\": [\"Ron Waldon (@jokeyrhyme)\"]\n}\n!*/\n/* DOC\nDetects support for creating Blob URLs\n*/\n\n  var url = prefixed('URL', window, false);\n  url = url && window[url];\n  Modernizr.addTest('bloburls', url && 'revokeObjectURL' in url && 'createObjectURL' in url);\n\n/*!\n{\n  \"name\": \"Data URI\",\n  \"property\": \"datauri\",\n  \"caniuse\": \"datauri\",\n  \"tags\": [\"url\"],\n  \"builderAliases\": [\"url_data_uri\"],\n  \"async\": true,\n  \"notes\": [{\n    \"name\": \"Wikipedia article\",\n    \"href\": \"https://en.wikipedia.org/wiki/Data_URI_scheme\"\n  }],\n  \"warnings\": [\"Support in Internet Explorer 8 is limited to images and linked resources like CSS files, not HTML files\"]\n}\n!*/\n/* DOC\nDetects support for data URIs. Provides a subproperty to report support for data URIs over 32kb in size:\n\n```javascript\nModernizr.datauri           // true\nModernizr.datauri.over32kb  // false in IE8\n```\n*/\n\n  // https://github.com/Modernizr/Modernizr/issues/14\n  Modernizr.addAsyncTest(function() {\n\n    // IE7 throw a mixed content warning on HTTPS for this test, so we'll\n    // just blacklist it (we know it doesn't support data URIs anyway)\n    // https://github.com/Modernizr/Modernizr/issues/362\n    if (navigator.userAgent.indexOf('MSIE 7.') !== -1) {\n      // Keep the test async\n      setTimeout(function() {\n        addTest('datauri', false);\n      }, 10);\n    }\n\n    var datauri = new Image();\n\n    datauri.onerror = function() {\n      addTest('datauri', false);\n    };\n    datauri.onload = function() {\n      if (datauri.width == 1 && datauri.height == 1) {\n        testOver32kb();\n      }\n      else {\n        addTest('datauri', false);\n      }\n    };\n\n    datauri.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';\n\n    // Once we have datauri, let's check to see if we can use data URIs over\n    // 32kb (IE8 can't). https://github.com/Modernizr/Modernizr/issues/321\n    function testOver32kb() {\n\n      var datauriBig = new Image();\n\n      datauriBig.onerror = function() {\n        addTest('datauri', true);\n        Modernizr.datauri = new Boolean(true);\n        Modernizr.datauri.over32kb = false;\n      };\n      datauriBig.onload = function() {\n        addTest('datauri', true);\n        Modernizr.datauri = new Boolean(true);\n        Modernizr.datauri.over32kb = (datauriBig.width == 1 && datauriBig.height == 1);\n      };\n\n      var base64str = 'R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';\n      while (base64str.length < 33000) {\n        base64str = '\\r\\n' + base64str;\n      }\n      datauriBig.src = 'data:image/gif;base64,' + base64str;\n    }\n\n  });\n\n/*!\n{\n  \"name\": \"HTML5 Video\",\n  \"property\": \"video\",\n  \"caniuse\": \"video\",\n  \"tags\": [\"html5\"],\n  \"knownBugs\": [\n    \"Without QuickTime, `Modernizr.video.h264` will be `undefined`; https://github.com/Modernizr/Modernizr/issues/546\"\n  ],\n  \"polyfills\": [\n    \"html5media\",\n    \"mediaelementjs\",\n    \"sublimevideo\",\n    \"videojs\",\n    \"leanbackplayer\",\n    \"videoforeverybody\"\n  ]\n}\n!*/\n/* DOC\nDetects support for the video element, as well as testing what types of content it supports.\n\nSubproperties are provided to describe support for `ogg`, `h264` and `webm` formats, e.g.:\n\n```javascript\nModernizr.video         // true\nModernizr.video.ogg     // 'probably'\n```\n*/\n\n  // Codec values from : github.com/NielsLeenheer/html5test/blob/9106a8/index.html#L845\n  //                     thx to NielsLeenheer and zcorpan\n\n  // Note: in some older browsers, \"no\" was a return value instead of empty string.\n  //   It was live in FF3.5.0 and 3.5.1, but fixed in 3.5.2\n  //   It was also live in Safari 4.0.0 - 4.0.4, but fixed in 4.0.5\n\n  Modernizr.addTest('video', function() {\n    var elem = createElement('video');\n    var bool = false;\n\n    // IE9 Running on Windows Server SKU can cause an exception to be thrown, bug #224\n    try {\n      bool = !!elem.canPlayType\n      if (bool) {\n        bool = new Boolean(bool);\n        bool.ogg = elem.canPlayType('video/ogg; codecs=\"theora\"').replace(/^no$/, '');\n\n        // Without QuickTime, this value will be `undefined`. github.com/Modernizr/Modernizr/issues/546\n        bool.h264 = elem.canPlayType('video/mp4; codecs=\"avc1.42E01E\"').replace(/^no$/, '');\n\n        bool.webm = elem.canPlayType('video/webm; codecs=\"vp8, vorbis\"').replace(/^no$/, '');\n\n        bool.vp9 = elem.canPlayType('video/webm; codecs=\"vp9\"').replace(/^no$/, '');\n\n        bool.hls = elem.canPlayType('application/x-mpegURL; codecs=\"avc1.42E01E\"').replace(/^no$/, '');\n      }\n    } catch (e) {}\n\n    return bool;\n  });\n\n/*!\n{\n  \"name\": \"Video Autoplay\",\n  \"property\": \"videoautoplay\",\n  \"tags\": [\"video\"],\n  \"async\" : true,\n  \"warnings\": [\"This test is very large – only include it if you absolutely need it\"],\n  \"knownBugs\": [\"crashes with an alert on iOS7 when added to homescreen\"]\n}\n!*/\n/* DOC\nChecks for support of the autoplay attribute of the video element.\n*/\n\n\n  Modernizr.addAsyncTest(function() {\n    var timeout;\n    var waitTime = 200;\n    var retries = 5;\n    var currentTry = 0;\n    var elem = createElement('video');\n    var elemStyle = elem.style;\n\n    function testAutoplay(arg) {\n      currentTry++;\n      clearTimeout(timeout);\n\n      var result = arg && arg.type === 'playing' || elem.currentTime !== 0;\n\n      if (!result && currentTry < retries) {\n        //Detection can be flaky if the browser is slow, so lets retry in a little bit\n        timeout = setTimeout(testAutoplay, waitTime);\n        return;\n      }\n\n      elem.removeEventListener('playing', testAutoplay, false);\n      addTest('videoautoplay', result);\n\n      // Cleanup, but don't assume elem is still in the page -\n      // an extension (eg Flashblock) may already have removed it.\n      if (elem.parentNode) {\n        elem.parentNode.removeChild(elem);\n      }\n    }\n\n    //skip the test if video itself, or the autoplay\n    //element on it isn't supported\n    if (!Modernizr.video || !('autoplay' in elem)) {\n      addTest('videoautoplay', false);\n      return;\n    }\n\n    elemStyle.position = 'absolute';\n    elemStyle.height = 0;\n    elemStyle.width = 0;\n\n    try {\n      if (Modernizr.video.ogg) {\n        elem.src = 'data:video/ogg;base64,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';\n      }\n      else if (Modernizr.video.h264) {\n        elem.src = 'data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAs1tZGF0AAACrgYF//+q3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0OCByMjYwMSBhMGNkN2QzIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNSAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTEgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEwIHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAD2WIhAA3//728P4FNjuZQQAAAu5tb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAAZAABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACGHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAZAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAgAAAAIAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAGQAAAAAAAEAAAAAAZBtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAACgAAAAEAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAE7bWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAA+3N0YmwAAACXc3RzZAAAAAAAAAABAAAAh2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAgACAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAxYXZjQwFkAAr/4QAYZ2QACqzZX4iIhAAAAwAEAAADAFA8SJZYAQAGaOvjyyLAAAAAGHN0dHMAAAAAAAAAAQAAAAEAAAQAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAAsUAAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjU2LjQwLjEwMQ==';\n      }\n      else {\n        addTest('videoautoplay', false);\n        return;\n      }\n    }\n\n    catch (e) {\n      addTest('videoautoplay', false);\n      return;\n    }\n\n    elem.setAttribute('autoplay', '');\n    elemStyle.cssText = 'display:none';\n    docElement.appendChild(elem);\n    // wait for the next tick to add the listener, otherwise the element may\n    // not have time to play in high load situations (e.g. the test suite)\n    setTimeout(function() {\n      elem.addEventListener('playing', testAutoplay, false);\n      timeout = setTimeout(testAutoplay, waitTime);\n    }, 0);\n  });\n\n/*!\n{\n  \"name\": \"Video Loop Attribute\",\n  \"property\": \"videoloop\",\n  \"tags\": [\"video\", \"media\"]\n}\n!*/\n\n  Modernizr.addTest('videoloop', 'loop' in createElement('video'));\n\n/*!\n{\n  \"name\": \"Video Preload Attribute\",\n  \"property\": \"videopreload\",\n  \"tags\": [\"video\", \"media\"]\n}\n!*/\n\n  Modernizr.addTest('videopreload', 'preload' in createElement('video'));\n\n\n  // Run each test\n  testRunner();\n\n  delete ModernizrProto.addTest;\n  delete ModernizrProto.addAsyncTest;\n\n  // Run the things that are supposed to run after the tests\n  for (var i = 0; i < Modernizr._q.length; i++) {\n    Modernizr._q[i]();\n  }\n\n  // Leak Modernizr namespace\n  window.Modernizr = Modernizr;\n\n\n;\n\n})(window, document);",
    "//     Underscore.js 1.8.3\n//     http://underscorejs.org\n//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind,\n    nativeCreate       = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.8.3';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      case 2: return function(value, other) {\n        return func.call(context, value, other);\n      };\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  // A mostly-internal function to generate callbacks that can be applied\n  // to each element in a collection, returning the desired result — either\n  // identity, an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value)) return _.matcher(value);\n    return _.property(value);\n  };\n  _.iteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, undefinedOnly) {\n    return function(obj) {\n      var length = arguments.length;\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  var property = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = property('length');\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  function createReduce(dir) {\n    // Optimized iterator function as using arguments.length\n    // in the main function will deoptimize the, see #1991.\n    function iterator(obj, iteratee, memo, keys, index, length) {\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    }\n\n    return function(obj, iteratee, memo, context) {\n      iteratee = optimizeCb(iteratee, context, 4);\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      // Determine the initial value if none is provided.\n      if (arguments.length < 3) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      return iterator(obj, iteratee, memo, keys, index, length);\n    };\n  }\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var key;\n    if (isArrayLike(obj)) {\n      key = _.findIndex(obj, predicate, context);\n    } else {\n      key = _.findKey(obj, predicate, context);\n    }\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given item (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n    return _.indexOf(obj, item, fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      var func = isFunc ? method : value[method];\n      return func == null ? func : func.apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n  _.shuffle = function(obj) {\n    var set = isArrayLike(obj) ? obj : _.values(obj);\n    var length = set.length;\n    var shuffled = Array(length);\n    for (var index = 0, rand; index < length; index++) {\n      rand = _.random(0, index);\n      if (rand !== index) shuffled[index] = shuffled[rand];\n      shuffled[rand] = set[index];\n    }\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iteratee(value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iteratee, context) {\n      var result = {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var pass = [], fail = [];\n    _.each(obj, function(value, key, obj) {\n      (predicate(value, key, obj) ? pass : fail).push(value);\n    });\n    return [pass, fail];\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, startIndex) {\n    var output = [], idx = 0;\n    for (var i = startIndex || 0, length = getLength(input); i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        //flatten current level of array or arguments object\n        if (!shallow) value = flatten(value, shallow, strict);\n        var j = 0, len = value.length;\n        output.length += len;\n        while (j < len) {\n          output[idx++] = value[j++];\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(flatten(arguments, true, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      for (var j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = flatten(arguments, true, true, 1);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    return _.unzip(arguments);\n  };\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices\n  _.unzip = function(array) {\n    var length = array && _.max(array, getLength).length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = getLength(list); i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions\n  function createPredicateIndexFinder(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = getLength(array);\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  }\n\n  // Returns the first index on an array-like that passes a predicate test\n  _.findIndex = createPredicateIndexFinder(1);\n  _.findLastIndex = createPredicateIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = getLength(array);\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generator function to create the indexOf and lastIndexOf functions\n  function createIndexFinder(dir, predicateFind, sortedIndex) {\n    return function(array, item, idx) {\n      var i = 0, length = getLength(array);\n      if (typeof idx == 'number') {\n        if (dir > 0) {\n            i = idx >= 0 ? idx : Math.max(idx + length, i);\n        } else {\n            length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n        }\n      } else if (sortedIndex && idx && length) {\n        idx = sortedIndex(array, item);\n        return array[idx] === item ? idx : -1;\n      }\n      if (item !== item) {\n        idx = predicateFind(slice.call(array, i, length), _.isNaN);\n        return idx >= 0 ? idx + i : -1;\n      }\n      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n        if (array[idx] === item) return idx;\n      }\n      return -1;\n    };\n  }\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);\n  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (stop == null) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = step || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var args = slice.call(arguments, 2);\n    var bound = function() {\n      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));\n    };\n    return bound;\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var i, length = arguments.length, key;\n    if (length <= 1) throw new Error('bindAll must be passed function names');\n    for (i = 1; i < length; i++) {\n      key = arguments[i];\n      obj[key] = _.bind(obj[key], obj);\n    }\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){\n      return func.apply(null, args);\n    }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n\n      if (last < wait && last >= 0) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) timeout = setTimeout(later, wait);\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  function collectNonEnumProps(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  }\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object\n  // In contrast to _.map it returns an object\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys =  _.keys(obj),\n          length = keys.length,\n          results = {},\n          currentKey;\n      for (var index = 0; index < length; index++) {\n        currentKey = keys[index];\n        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n      }\n      return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s)\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(object, oiteratee, context) {\n    var result = {}, obj = object, iteratee, keys;\n    if (obj == null) return result;\n    if (_.isFunction(oiteratee)) {\n      keys = _.allKeys(obj);\n      iteratee = optimizeCb(oiteratee, context);\n    } else {\n      keys = flatten(arguments, false, false, 1);\n      iteratee = function(value, key, obj) { return key in obj; };\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj, iteratee, context) {\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n    } else {\n      var keys = _.map(flatten(arguments, false, false, 1), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Creates an object that inherits from the given prototype object.\n  // If additional properties are provided then they will be added to the\n  // created object.\n  _.create = function(prototype, props) {\n    var result = baseCreate(prototype);\n    if (props) _.extendOwn(result, props);\n    return result;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return _.has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), and in Safari 8 (#1929).\n  if (typeof /./ != 'function' && typeof Int8Array != 'object') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj !== +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return obj != null && hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  _.property = property;\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    return obj == null ? function(){} : function(key) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of\n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n   // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property, fallback) {\n    var value = object == null ? void 0 : object[property];\n    if (value === void 0) {\n      value = fallback;\n    }\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escaper, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offest.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    try {\n      var render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return result(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n  _.prototype.toString = function() {\n    return '' + this._wrapped;\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define === 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}.call(this));\n",
    "/* Web Font Loader v1.6.28 - (c) Adobe Systems, Google. License: Apache 2.0 */(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.o=b||a;this.c=this.o.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&(\"style\"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}\nfunction w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(\" \").replace(/\\s+/g,\" \").replace(/^\\s+|\\s+$/,\"\")}function y(a,b){for(var c=a.className.split(/\\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}\nfunction ea(a){return a.o.location.hostname||a.a.location.hostname}function z(a,b,c){function d(){m&&e&&f&&(m(g),m=null)}b=t(a,\"link\",{rel:\"stylesheet\",href:b,media:\"all\"});var e=!1,f=!0,g=null,m=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error(\"Stylesheet failed to load\");d()}):setTimeout(function(){e=!0;d()},0);u(a,\"head\",b)}\nfunction A(a,b,c,d){var e=a.c.getElementsByTagName(\"head\")[0];if(e){var f=t(a,\"script\",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&\"loaded\"!=this.readyState&&\"complete\"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,\"HEAD\"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error(\"Script load timeout\")))},d||5E3);return f}return null};function B(){this.a=0;this.c=null}function C(a){a.a++;return function(){a.a--;D(a)}}function E(a,b){a.c=b;D(a)}function D(a){0==a.a&&a.c&&(a.c(),a.c=null)};function F(a){this.a=a||\"-\"}F.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\\W_]+/g,\"\").toLowerCase());return b.join(this.a)};function G(a,b){this.c=a;this.f=4;this.a=\"n\";var c=(b||\"n4\").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return H(a)+\" \"+(a.f+\"00\")+\" 300px \"+I(a.c)}function I(a){var b=[];a=a.split(/,\\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['\"]/g,\"\");-1!=d.indexOf(\" \")||/^\\d/.test(d)?b.push(\"'\"+d+\"'\"):b.push(d)}return b.join(\",\")}function J(a){return a.a+a.f}function H(a){var b=\"normal\";\"o\"===a.a?b=\"oblique\":\"i\"===a.a&&(b=\"italic\");return b}\nfunction ga(a){var b=4,c=\"n\",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.o.document.documentElement;this.h=b;this.a=new F(\"-\");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c(\"wf\",\"loading\")]);K(a,\"loading\")}function L(a){if(a.g){var b=y(a.f,a.a.c(\"wf\",\"active\")),c=[],d=[a.a.c(\"wf\",\"loading\")];b||c.push(a.a.c(\"wf\",\"inactive\"));w(a.f,c,d)}K(a,\"inactive\")}function K(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,J(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function M(a,b){this.c=a;this.f=b;this.a=t(this.c,\"span\",{\"aria-hidden\":\"true\"},this.f)}function N(a){u(a.c,\"body\",a.a)}function O(a){return\"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:\"+I(a.c)+\";\"+(\"font-style:\"+H(a)+\";font-weight:\"+(a.f+\"00\")+\";\")};function P(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}P.prototype.start=function(){var a=this.c.o.document,b=this,c=q(),d=new Promise(function(d,e){function f(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=null,f=new Promise(function(a,d){e=setTimeout(d,b.f)});Promise.race([f,d]).then(function(){e&&(clearTimeout(e),e=null);b.g(b.a)},function(){b.j(b.a)})};function Q(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||\"BESbswy\";this.f={};this.w=e||3E3;this.u=f||null;this.m=this.j=this.h=this.g=null;this.g=new M(this.c,this.s);this.h=new M(this.c,this.s);this.j=new M(this.c,this.s);this.m=new M(this.c,this.s);a=new G(this.a.c+\",serif\",J(this.a));a=O(a);this.g.a.style.cssText=a;a=new G(this.a.c+\",sans-serif\",J(this.a));a=O(a);this.h.a.style.cssText=a;a=new G(\"serif\",J(this.a));a=O(a);this.j.a.style.cssText=a;a=new G(\"sans-serif\",J(this.a));a=\nO(a);this.m.a.style.cssText=a;N(this.g);N(this.h);N(this.j);N(this.m)}var R={D:\"serif\",C:\"sans-serif\"},S=null;function T(){if(null===S){var a=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);S=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return S}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f[\"sans-serif\"]=this.m.a.offsetWidth;this.A=q();U(this)};\nfunction la(a,b,c){for(var d in R)if(R.hasOwnProperty(d)&&b===a.f[R[d]]&&c===a.f[R[d]])return!0;return!1}function U(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f[\"sans-serif\"])||(d=T()&&la(a,b,c));d?q()-a.A>=a.w?T()&&la(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):ma(a):V(a,a.v)}function ma(a){setTimeout(p(function(){U(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.m.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.m=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c(\"wf\",a.c,J(a).toString(),\"active\")],[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\"),b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\")]);K(b,\"fontactive\",a);this.m=!0;na(this)};\nW.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c(\"wf\",a.c,J(a).toString(),\"active\")),d=[],e=[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\")];c||d.push(b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\"));w(b.f,d,e)}K(b,\"fontinactive\",a);na(this)};function na(a){0==--a.f&&a.j&&(a.m?(a=a.a,a.g&&w(a.f,[a.a.c(\"wf\",\"active\")],[a.a.c(\"wf\",\"loading\"),a.a.c(\"wf\",\"inactive\")]),K(a,\"active\")):L(a.a))};function oa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}oa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;pa(this,new ha(this.c,a),a)};\nfunction qa(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,m=d||null||{};if(0===c.length&&f)L(b.a);else{b.f+=c.length;f&&(b.j=f);var h,l=[];for(h=0;h<c.length;h++){var k=c[h],n=m[k.c],r=b.a,x=k;r.g&&w(r.f,[r.a.c(\"wf\",x.c,J(x).toString(),\"loading\")]);K(r,\"fontloading\",x);r=null;if(null===X)if(window.FontFace){var x=/Gecko.*Firefox\\/(\\d+)/.exec(window.navigator.userAgent),xa=/OS X.*Version\\/10\\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);\nX=x?42<parseInt(x[1],10):xa?!1:!0}else X=!1;X?r=new P(p(b.g,b),p(b.h,b),b.c,k,b.s,n):r=new Q(p(b.g,b),p(b.h,b),b.c,k,b.s,a,n);l.push(r)}for(h=0;h<l.length;h++)l[h].start()}},0)}function pa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){qa(a,f,b,d,c)})};function ra(a,b){this.c=a;this.a=b}\nra.prototype.load=function(a){function b(){if(f[\"__mti_fntLst\"+d]){var c=f[\"__mti_fntLst\"+d](),e=[],h;if(c)for(var l=0;l<c.length;l++){var k=c[l].fontfamily;void 0!=c[l].fontStyle&&void 0!=c[l].fontWeight?(h=c[l].fontStyle+c[l].fontWeight,e.push(new G(k,h))):e.push(new G(k))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.o;A(this.c,(c.a.api||\"https://fast.fonts.net/jsapi\")+\"/\"+d+\".js\"+(e?\"?v=\"+e:\"\"),function(e){e?a([]):(f[\"__MonotypeConfiguration__\"+\nd]=function(){return c.a},b())}).id=\"__MonotypeAPIScript__\"+d}else a([])};function sa(a,b){this.c=a;this.a=b}sa.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new B;b=0;for(c=d.length;b<c;b++)z(this.c,d[b],C(g));var m=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(\":\"),d[1])for(var h=d[1].split(\",\"),l=0;l<h.length;l+=1)m.push(new G(d[0],h[l]));else m.push(new G(d[0]));E(g,function(){a(m,f)})};function ta(a,b){a?this.c=a:this.c=ua;this.a=[];this.f=[];this.g=b||\"\"}var ua=\"https://fonts.googleapis.com/css\";function va(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(\":\");3==e.length&&a.f.push(e.pop());var f=\"\";2==e.length&&\"\"!=e[1]&&(f=\":\");a.a.push(e.join(f))}}\nfunction wa(a){if(0==a.a.length)throw Error(\"No fonts to load!\");if(-1!=a.c.indexOf(\"kit=\"))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,\"+\"));b=a.c+\"?family=\"+c.join(\"%7C\");0<a.f.length&&(b+=\"&subset=\"+a.f.join(\",\"));0<a.g.length&&(b+=\"&text=\"+encodeURIComponent(a.g));return b};function ya(a){this.f=a;this.a=[];this.c={}}\nvar za={latin:\"BESbswy\",\"latin-ext\":\"\\u00e7\\u00f6\\u00fc\\u011f\\u015f\",cyrillic:\"\\u0439\\u044f\\u0416\",greek:\"\\u03b1\\u03b2\\u03a3\",khmer:\"\\u1780\\u1781\\u1782\",Hanuman:\"\\u1780\\u1781\\u1782\"},Aa={thin:\"1\",extralight:\"2\",\"extra-light\":\"2\",ultralight:\"2\",\"ultra-light\":\"2\",light:\"3\",regular:\"4\",book:\"4\",medium:\"5\",\"semi-bold\":\"6\",semibold:\"6\",\"demi-bold\":\"6\",demibold:\"6\",bold:\"7\",\"extra-bold\":\"8\",extrabold:\"8\",\"ultra-bold\":\"8\",ultrabold:\"8\",black:\"9\",heavy:\"9\",l:\"3\",r:\"4\",b:\"7\"},Ba={i:\"i\",italic:\"i\",n:\"n\",normal:\"n\"},\nCa=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;\nfunction Da(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(\":\"),e=d[0].replace(/\\+/g,\" \"),f=[\"n4\"];if(2<=d.length){var g;var m=d[1];g=[];if(m)for(var m=m.split(\",\"),h=m.length,l=0;l<h;l++){var k;k=m[l];if(k.match(/^[\\w-]+$/)){var n=Ca.exec(k.toLowerCase());if(null==n)k=\"\";else{k=n[2];k=null==k||\"\"==k?\"n\":Ba[k];n=n[1];if(null==n||\"\"==n)n=\"4\";else var r=Aa[n],n=r?r:isNaN(n)?\"4\":n.substr(0,1);k=[k,n].join(\"\")}}else k=\"\";k&&g.push(k)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(\",\"):\ng,0<d.length&&(d=za[d[0]])&&(a.c[e]=d))}a.c[e]||(d=za[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new G(e,f[d]))}};function Ea(a,b){this.c=a;this.a=b}var Fa={Arimo:!0,Cousine:!0,Tinos:!0};Ea.prototype.load=function(a){var b=new B,c=this.c,d=new ta(this.a.api,this.a.text),e=this.a.families;va(d,e);var f=new ya(e);Da(f);z(c,wa(d),C(b));E(b,function(){a(f.a,f.c,Fa)})};function Ga(a,b){this.c=a;this.a=b}Ga.prototype.load=function(a){var b=this.a.id,c=this.c.o;b?A(this.c,(this.a.api||\"https://use.typekit.net\")+\"/\"+b+\".js\",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],m=b[f+1],h=0;h<m.length;h++)e.push(new G(g,m[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}a(e)}},2E3):a([])};function Ha(a,b){this.c=a;this.f=b;this.a=[]}Ha.prototype.load=function(a){var b=this.f.id,c=this.c.o,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,m=c.fonts.length;g<m;++g){var h=c.fonts[g];d.a.push(new G(h.name,ga(\"font-weight:\"+h.weight+\";font-style:\"+h.style)))}a(d.a)},A(this.c,(this.f.api||\"https://f.fontdeck.com/s/css/js/\")+ea(this.c)+\"/\"+b+\".js\",function(b){b&&a([])})):a([])};var Y=new oa(window);Y.a.c.custom=function(a,b){return new sa(b,a)};Y.a.c.fontdeck=function(a,b){return new Ha(b,a)};Y.a.c.monotype=function(a,b){return new ra(b,a)};Y.a.c.typekit=function(a,b){return new Ga(b,a)};Y.a.c.google=function(a,b){return new Ea(b,a)};var Z={load:p(Y.load,Y)};\"function\"===typeof define&&define.amd?define(function(){return Z}):\"undefined\"!==typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig));}());\n"
  ]
}